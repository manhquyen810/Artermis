import{a as f}from"./chunk-R75LTV62.js";import{d as o}from"./chunk-CT44YL7Q.js";import{b as u}from"./chunk-EELXLOHY.js";import{L as a,O as p}from"./chunk-IOA4DPXY.js";import{Ea as m,ya as c,z as i}from"./chunk-5LC5EQRR.js";var I=(()=>{class s{http=m(p);basePath="management/statistics/";resourceUrl="api/core/"+this.basePath;adminResourceUrl="api/core/admin/"+this.basePath;getChartData(e,t,r){let n=new a().set("span",""+e).set("periodIndex",""+t).set("graphType",""+r);return this.http.get(`${this.adminResourceUrl}data`,{params:n})}getChartDataForContent(e,t,r,n,g){let h=new a().set("span",""+e).set("periodIndex",""+t).set("graphType",""+r).set("view",""+n).set("entityId",""+g);return this.http.get(`${this.resourceUrl}data-for-content`,{params:h})}getCourseStatistics(e){let t=new a().set("courseId",""+e);return this.http.get(`${this.resourceUrl}course-statistics`,{params:t}).pipe(i(r=>(s.convertExerciseCategoriesOfCourseManagementStatisticsFromServer(r),s.convertCourseManagementStatisticDatesFromServer(r))))}getExerciseStatistics(e){let t=new a().set("exerciseId",""+e);return this.http.get(`${this.resourceUrl}exercise-statistics`,{params:t}).pipe(i(r=>s.calculatePercentagesForExerciseStatistics(r)))}static calculatePercentagesForExerciseStatistics(e){return e.participationsInPercent=e.numberOfStudentsOrTeamsInCourse>0?o(e.numberOfParticipations/e.numberOfStudentsOrTeamsInCourse*100,1):0,e.resolvedPostsInPercent=e.numberOfPosts>0?o(e.numberOfResolvedPosts/e.numberOfPosts*100,1):0,e.absoluteAveragePoints=o(e.averageScoreOfExercise*e.maxPointsOfExercise/100,1),e}static convertCourseManagementStatisticDatesFromServer(e){return e.averageScoresOfExercises.forEach(t=>{t.releaseDate=u(t.releaseDate)}),e}static convertExerciseCategoriesOfCourseManagementStatisticsFromServer(e){return e.averageScoresOfExercises.forEach(t=>{t.categories=t.categories?.map(r=>new f(r.category,r.color))}),e}static \u0275fac=function(t){return new(t||s)};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{I as a};
//# sourceMappingURL=chunk-2DI3RHO4.js.map

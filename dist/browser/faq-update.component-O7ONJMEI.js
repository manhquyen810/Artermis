import{a as re}from"./chunk-KYUIVIOO.js";import{a as Z,b as w,c as $}from"./chunk-LWFATUYQ.js";import{a as ie,b as ne}from"./chunk-RF2AUYNN.js";import{a as te}from"./chunk-HOVEUVZP.js";import{a as ee}from"./chunk-DRT3JEBM.js";import{A as X,D as Y}from"./chunk-RTOKZMYN.js";import"./chunk-5QODR5GQ.js";import"./chunk-RNPAFOPW.js";import"./chunk-KZGAUMRM.js";import"./chunk-656XE4CO.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-U4DJRHYQ.js";import"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-Z2YUBN6N.js";import"./chunk-AO5E7TEY.js";import"./chunk-D6LEDP6W.js";import"./chunk-VWRLJYRR.js";import"./chunk-QH7SWO42.js";import"./chunk-P2M2VQE3.js";import"./chunk-GXOKLIFX.js";import"./chunk-5JBXU6VG.js";import"./chunk-4I367PEU.js";import"./chunk-ZPITQMA6.js";import{a as J}from"./chunk-DRMCDU75.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as Q}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import{c as F}from"./chunk-5SKDOIBQ.js";import{K as L,c as M,h as V,i as k,k as j,m as U,n as P}from"./chunk-WA5GEAJB.js";import"./chunk-DRSQQEUE.js";import"./chunk-7XXWL6ER.js";import{r as G}from"./chunk-VK7JPHFE.js";import{c as O}from"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import"./chunk-TL3DYXRE.js";import{c as W}from"./chunk-JXJXC4DZ.js";import{d as K,f as z}from"./chunk-EDXSOKK5.js";import{b as B}from"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{fa as R,kb as D,tb as N}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as H}from"./chunk-U54OSGNH.js";import{f as T,h as I}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as m,Dc as v,Ea as l,Ma as c,Mc as g,Na as d,Oc as S,Qd as E,Tb as A,Zb as b,dd as e,kc as u,ld as q,md as C,nd as _,sc as y,xc as n,yc as r,z as x,zc as o}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function ae(f,oe){if(f&1){let i=v();e(0,`
                    `),n(1,"div",8),e(2,`
                        `),o(3,"label",21),e(4,`
                        `),n(5,"div",4),e(6,`
                            `),n(7,"input",22),_("ngModelChange",function(t){c(i);let s=S();return C(s.faq.course.title,t)||(s.faq.course.title=t),d(t)}),r(),e(8,`
                        `),r(),e(9,`
                    `),r(),e(10,`
                `)}if(f&2){let i=S();m(7),q("ngModel",i.faq.course.title)}}var je=(()=>{class f{alertService=l(W);faqService=l(Z);activatedRoute=l(T);navigationUtilService=l(J);router=l(I);profileService=l(O);accountService=l(B);artemisIntelligenceService=l(X);faq;isSaving;isAllowedToSave;existingCategories;faqCategories;courseId;isAtLeastInstructor=!1;domainActionsDescription=[new ee];irisEnabled=F(this.profileService.getProfileInfo().pipe(x(i=>i.activeProfiles.includes(G))),{initialValue:!1});artemisIntelligenceActions=E(()=>this.irisEnabled()?[new ie(this.artemisIntelligenceService,ne.FAQ,this.courseId)]:[]);faQuestionCircle=D;faSave=N;faBan=R;ngOnInit(){this.isSaving=!1,this.courseId=Number(this.activatedRoute.snapshot.paramMap.get("courseId")),this.activatedRoute.parent?.data.subscribe(i=>{let a=i.faq;this.faq=a??new $;let t=i.course;t&&(this.faq.course=t,this.loadCourseFaqCategories(t.id),this.isAtLeastInstructor=this.accountService.isAtLeastInstructorInCourse(t)),this.faqCategories=a?.categories?a.categories:[]}),this.validate()}previousState(){this.navigationUtilService.navigateBack(["course-management",this.courseId,"faqs"])}save(){this.isSaving=!0,this.faq.faqState=this.isAtLeastInstructor?w.ACCEPTED:w.PROPOSED,this.faq.id!==void 0?this.subscribeToSaveResponse(this.faqService.update(this.courseId,this.faq)):this.subscribeToSaveResponse(this.faqService.create(this.courseId,this.faq))}subscribeToSaveResponse(i){i.subscribe({next:a=>this.onSaveSuccess(a.body),error:a=>this.onSaveError(a)})}onSaveSuccess(i){this.faq.id?(this.showSuccessAlert(i,!0),this.router.navigate(["course-management",this.courseId,"faqs"])):this.faqService.find(this.courseId,i.id).subscribe({next:a=>{this.isSaving=!1;let t=a.body;t&&(this.faq=t),this.showSuccessAlert(i,!1),this.router.navigate(["course-management",this.courseId,"faqs"])}})}showSuccessAlert(i,a){let t;this.isAtLeastInstructor?t=a?"artemisApp.faq.updated":"artemisApp.faq.created":t=a?"artemisApp.faq.proposedChange":"artemisApp.faq.proposed",this.alertService.success(t,{title:i.questionTitle})}onSaveError(i){this.isSaving=!1,i.error?.title?this.alertService.addErrorAlert(i.error.title,i.error.message,i.error.params):Q(this.alertService,i)}updateCategories(i){this.faq.categories=i,this.faqCategories=i}loadCourseFaqCategories(i){re(i,this.alertService,this.faqService).subscribe(a=>{this.existingCategories=a})}validate(){this.faq.questionTitle&&this.faq.questionAnswer?this.isAllowedToSave=this.faq.questionTitle?.trim().length>0&&this.faq.questionAnswer?.trim().length>0:this.isAllowedToSave=!1}handleMarkdownChange(i){this.faq.questionAnswer=i,this.validate()}static \u0275fac=function(a){return new(a||f)};static \u0275cmp=A({type:f,selectors:[["jhi-faq-update"]],decls:69,vars:10,consts:[["editForm","ngForm"],[1,"row","justify-content-center"],[1,"col-md-8"],["name","editForm","role","form",3,"ngSubmit"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","align-items-center"],["id","jhi-faq-heading","jhiTranslate","artemisApp.faq.home.createOrEditLabel"],[1,"form-group"],["jhiTranslate","artemisApp.faq.table.questionTitle","for","field_title",1,"form-control-label"],["id","field_title","type","text","name","title",1,"form-control",3,"ngModelChange","change","ngModel"],["jhiTranslate","artemisApp.faq.table.questionAnswer","for","field_description",1,"form-control-label"],["id","field_description",1,"markdown-editor",3,"markdownChange","domainActions","artemisIntelligenceActions","markdown"],[1,"form-group","position-relative"],["jhiTranslate","artemisApp.exercise.categories",1,"form-control-label"],[3,"selectedCategories","categories","existingCategories"],["type","button","id","cancel-save",1,"btn","btn-secondary",3,"click"],[3,"icon"],["jhiTranslate","entity.action.cancel"],["type","submit","id","save-entity",1,"btn","btn-primary",3,"disabled"],["jhiTranslate","entity.action.save"],["jhiTranslate","artemisApp.faq.course","for","field_course",1,"form-control-label"],["id","field_course","disabled","","type","text","name","course",1,"form-control",3,"ngModelChange","ngModel"]],template:function(a,t){if(a&1){let s=v();n(0,"div",1),e(1,`
    `),n(2,"div",2),e(3,`
        `),n(4,"form",3,0),g("ngSubmit",function(){return c(s),d(t.save())}),e(6,`
            `),n(7,"div",4),e(8,`
                `),n(9,"div",5),e(10,`
                    `),n(11,"div",6),e(12,`
                        `),o(13,"h2",7),e(14,`
                    `),r(),e(15,`
                `),r(),e(16,`
            `),r(),e(17,`
            `),n(18,"div"),e(19,`
                `),n(20,"div",8),e(21,`
                    `),o(22,"label",9),e(23,`
                    `),n(24,"div",4),e(25,`
                        `),n(26,"input",10),_("ngModelChange",function(p){return c(s),C(t.faq.questionTitle,p)||(t.faq.questionTitle=p),d(p)}),g("change",function(){return c(s),d(t.validate())}),r(),e(27,`
                    `),r(),e(28,`
                `),r(),e(29,`
                `),n(30,"div",8),e(31,`
                    `),o(32,"label",11),e(33,`
                    `),n(34,"jhi-markdown-editor-monaco",12),g("markdownChange",function(p){return c(s),d(t.handleMarkdownChange(p))}),r(),e(35,`
                `),r(),e(36,`
                `),n(37,"div",13),e(38,`
                    `),o(39,"label",14),e(40,`
                    `),n(41,"jhi-category-selector",15),g("selectedCategories",function(p){return c(s),d(t.updateCategories(p))}),r(),e(42,`
                `),r(),e(43,`
                `),b(44,ae,11,1),n(45,"div",4),e(46,`
                    `),n(47,"div",5),e(48,`
                        `),n(49,"button",16),g("click",function(){return c(s),d(t.previousState())}),e(50,`
                            `),o(51,"fa-icon",17),e(52,"\xA0"),o(53,"span",18),e(54,`
                        `),r(),e(55,`
                        `),n(56,"button",19),e(57,`
                            `),o(58,"fa-icon",17),e(59,"\xA0"),o(60,"span",20),e(61,`
                        `),r(),e(62,`
                    `),r(),e(63,`
                `),r(),e(64,`
            `),r(),e(65,`
        `),r(),e(66,`
    `),r(),e(67,`
`),r(),e(68,`
`)}a&2&&(m(26),q("ngModel",t.faq.questionTitle),m(8),u("domainActions",t.domainActionsDescription)("artemisIntelligenceActions",t.artemisIntelligenceActions())("markdown",t.faq.questionAnswer||""),m(7),u("categories",t.faqCategories)("existingCategories",t.existingCategories),m(3),y(t.faq.course?44:-1),m(7),u("icon",t.faBan),m(5),u("disabled",!t.isAllowedToSave||t.isSaving),m(2),u("icon",t.faSave))},dependencies:[te,Y,H,z,K,L,P,M,V,k,U,j],styles:[".markdown-editor[_ngcontent-%COMP%]{height:350px}"]})}return f})();export{je as FaqUpdateComponent};
//# sourceMappingURL=faq-update.component-O7ONJMEI.js.map

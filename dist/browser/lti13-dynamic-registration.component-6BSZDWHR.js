import{a as u}from"./chunk-U54OSGNH.js";import{f as g}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{L as c,O as l}from"./chunk-IOA4DPXY.js";import{Db as p,Ea as a,Tb as d,dd as o,kc as r,zc as n}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var S=(()=>{class t{route=a(g);http=a(l);courseId;isRegistering=!0;registeredSuccessfully;ngOnInit(){this.route.params.subscribe(m=>{this.courseId=Number(m.courseId)});let s=this.route.snapshot.queryParamMap.get("openid_configuration"),i=this.route.snapshot.queryParamMap.get("registration_token");if(!s){this.isRegistering=!1,this.registeredSuccessfully=!1;return}let e=new c().set("openid_configuration",s);i&&(e=e.set("registration_token",i)),this.http.post("api/lti/admin/lti13/dynamic-registration",null,{observe:"response",params:e}).subscribe({next:()=>{this.registeredSuccessfully=!0},error:()=>{this.registeredSuccessfully=!1}}).add(()=>{this.isRegistering=!1,(window.opener||window.parent).postMessage({subject:"org.imsglobal.lti.close"},"*")})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["jhi-dynamic-registration"]],decls:6,vars:3,consts:[["jhiTranslate","artemisApp.lti13.dynamicRegistration.registering",3,"hidden"],["jhiTranslate","artemisApp.lti13.dynamicRegistration.registeredSuccessfully",3,"hidden"],["jhiTranslate","artemisApp.lti13.dynamicRegistration.registerFailed",3,"hidden"]],template:function(i,e){i&1&&(n(0,"h1",0),o(1,`
`),n(2,"h2",1),o(3,`
`),n(4,"h2",2),o(5,`
`)),i&2&&(r("hidden",!e.isRegistering),p(2),r("hidden",e.isRegistering||!e.registeredSuccessfully),p(2),r("hidden",e.isRegistering||e.registeredSuccessfully))},dependencies:[u],encapsulation:2})}return t})();export{S as Lti13DynamicRegistrationComponent};
//# sourceMappingURL=lti13-dynamic-registration.component-6BSZDWHR.js.map

import{a as z}from"./chunk-H7UNTMXY.js";import{a as H}from"./chunk-4P7M5PJP.js";import{a as G}from"./chunk-COI3ESZV.js";import{a as J}from"./chunk-V55WZ52P.js";import"./chunk-JCAGYDTX.js";import"./chunk-OI2L2OHD.js";import"./chunk-5M3YV54C.js";import"./chunk-5AQXEKLE.js";import"./chunk-3JSWSN6W.js";import"./chunk-7XNS72RJ.js";import"./chunk-DXTZ4GAW.js";import"./chunk-Z2YUBN6N.js";import{a as q}from"./chunk-BIK4CL5A.js";import"./chunk-GERFCPB6.js";import{d as P}from"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import{c as X}from"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import{K as j}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-5GXY5RYT.js";import{a as W}from"./chunk-K3W6YFKH.js";import{c as N}from"./chunk-JXJXC4DZ.js";import{d as U}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import{c as O,h as R,i as $}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{fa as D,oa as M}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as V}from"./chunk-U54OSGNH.js";import{f as F,i as w}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import{c as B}from"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{A,Ad as L,Db as a,Dc as I,Ea as l,Ma as S,Mc as y,Na as C,Oc as c,Tb as T,Zb as h,dd as e,ed as f,fd as _,kc as d,sc as x,uc as g,ud as v,vc as k,wc as E,xc as s,yc as o,yd as u,zc as r,zd as b}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var Q=(n,m,t,i)=>["/course-management",n,"text-exercises",m,"participations",t,"submissions",i,"assessment"],Y=(n,m,t,i)=>["/course-management",n,m,t,"submissions",i,"assessment"];function Z(n,m){if(n&1&&(e(0,`
                                    `),s(1,"span"),e(2),o(),e(3,`
                                `)),n&2){let t=c().$implicit;a(2),_("",t.latestResult.score,"%")}}function ee(n,m){if(n&1&&(e(0,`
                                        `),s(1,"a",13),e(2,`
                                            `),r(3,"fa-icon",14),e(4),u(5,"artemisTranslate"),o(),e(6,`
                                    `)),n&2){let t=c().$implicit,i=c(2);a(),d("routerLink",v(6,Q,i.courseId,t.participation.exercise.id,t.participation.id,t.id)),a(2),d("icon",i.faFolderOpen)("fixedWidth",!0),a(),_("\xA0",b(5,4,"artemisApp.assessment.dashboard.actions.open"),`
                                        `)}}function te(n,m){if(n&1&&(e(0,`
                                        `),s(1,"a",13),e(2,`
                                            `),r(3,"fa-icon",14),e(4),u(5,"artemisTranslate"),o(),e(6,`
                                    `)),n&2){let t=c().$implicit,i=c(2);a(),d("routerLink",v(6,Y,i.courseId,t.participation.exercise.type+"-exercises",t.participation.exercise.id,t.id)),a(2),d("icon",i.faFolderOpen)("fixedWidth",!0),a(),_("\xA0",b(5,4,"artemisApp.assessment.dashboard.actions.open"),`
                                        `)}}function ie(n,m){if(n&1){let t=I();e(0,`
                                        `),s(1,"button",15),y("click",function(){S(t);let p=c().$implicit,K=c(2);return C(K.cancelAssessment(p))}),e(2,`
                                            `),r(3,"fa-icon",14),e(4),u(5,"artemisTranslate"),o(),e(6,`
                                    `)}if(n&2){let t=c(3);a(3),d("icon",t.faBan)("fixedWidth",!0),a(),_("\xA0",b(5,3,"artemisApp.assessment.dashboard.actions.cancel"),`
                                        `)}}function ne(n,m){if(n&1&&(e(0,`
                        `),s(1,"tr"),e(2,`
                            `),s(3,"td"),e(4),o(),e(5,`
                            `),s(6,"td"),e(7,`
                                `),r(8,"fa-icon",12),u(9,"artemisTranslate"),e(10,`
                            `),o(),e(11,`
                            `),s(12,"td"),e(13),o(),e(14,`
                            `),s(15,"td"),e(16),u(17,"artemisDate"),o(),e(18,`
                            `),s(19,"td"),e(20),o(),e(21,`
                            `),s(22,"td"),e(23,`
                                `),h(24,Z,4,1),o(),e(25,`
                            `),s(26,"td"),e(27,`
                                `),s(28,"span"),e(29,`
                                    `),h(30,ee,7,11)(31,te,7,11),o(),e(32,`
                                `),s(33,"span"),e(34,`
                                    `),h(35,ie,7,5),o(),e(36,`
                            `),o(),e(37,`
                        `),o(),e(38,`
                    `)),n&2){let t=m.$implicit,i=c(2);a(4),f(t.id),a(4),d("icon",i.getIcon(t.participation.exercise.type))("ngbTooltip",b(9,10,i.getIconTooltip(t.participation.exercise.type))),a(5),f(t.participation.exercise.title||""),a(3),f(L(17,12,t.submissionDate,"long-date")),a(4),f(t.participation.submissions?t.participation.submissions.length:0),a(4),x((t.latestResult==null?null:t.latestResult.score)!==void 0?24:-1),a(6),x(t.participation.exercise.type===i.ExerciseType.TEXT?30:-1),a(),x(t.participation.exercise.type!==i.ExerciseType.TEXT?31:-1),a(4),x(t.latestResult.completionDate?-1:35)}}function se(n,m){if(n&1&&(e(0,`
    `),s(1,"div"),e(2,`
        `),s(3,"div",3),e(4,`
            `),s(5,"table",4),e(6,`
                `),s(7,"thead"),e(8,`
                    `),s(9,"tr"),e(10,`
                        `),s(11,"th",5),e(12,"Id"),o(),e(13,`
                        `),r(14,"th",6),e(15,`
                        `),r(16,"th",7),e(17,`
                        `),r(18,"th",8),e(19,`
                        `),r(20,"th",9),e(21,`
                        `),r(22,"th",10),e(23,`
                        `),r(24,"th",11),e(25,`
                    `),o(),e(26,`
                `),o(),e(27,`
                `),s(28,"tbody"),e(29,`
                    `),k(30,ne,39,15,null,null,g),o(),e(32,`
            `),o(),e(33,`
        `),o(),e(34,`
    `),o(),e(35,`
`)),n&2){let t=c();a(30),E(t.submissions)}}function oe(n,m){n&1&&(e(0,`
    `),s(1,"div",16),e(2,`
        `),r(3,"p",17),e(4,`
    `),o(),e(5,`
`))}var Ee=(()=>{class n{route=l(F);alertService=l(N);modelingAssessmentService=l(H);textAssessmentService=l(J);fileUploadAssessmentService=l(G);programmingAssessmentService=l(z);courseService=l(P);examManagementService=l(q);ExerciseType=O;course;courseId;tutorId;examId;showAll=!1;exercises=[];submissions=[];cancelConfirmationText;getIcon=R;getIconTooltip=$;faBan=D;faFolderOpen=M;constructor(){l(B).get("artemisApp.assessment.messages.confirmCancel").subscribe(i=>this.cancelConfirmationText=i)}ngOnInit(){A([this.route.params,this.route.queryParams]).subscribe(([t,i])=>{this.courseId=Number(t.courseId),this.examId=Number(t.examId),this.tutorId=Number(i.tutorId),this.getAllLockedSubmissions()})}getAllLockedSubmissions(){let t;this.examId?(t=this.examManagementService.findAllLockedSubmissionsOfExam(this.courseId,this.examId),this.showAll=!0):t=this.courseService.findAllLockedSubmissionsOfCourse(this.courseId),t.subscribe({next:i=>{this.submissions.push(...i.body??[])},error:i=>this.onError(i)})}cancelAssessment(t){if(window.confirm(this.cancelConfirmationText)){switch(t.submissionExerciseType){case"modeling":this.modelingAssessmentService.cancelAssessment(t.id).subscribe();break;case"text":t.participation?.exercise?.id&&this.textAssessmentService.cancelAssessment(t.participation.id,t.id).subscribe();break;case"file-upload":this.fileUploadAssessmentService.cancelAssessment(t.id).subscribe();break;case"programming":this.programmingAssessmentService.cancelAssessment(t.id).subscribe();break;default:break}this.submissions=this.submissions.filter(p=>p!==t)}}onError(t){this.alertService.error(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=T({type:n,selectors:[["jhi-assessment-locks"]],decls:18,vars:5,consts:[[1,"course-info-bar"],[1,"row","justify-content-between"],[1,"col-md-8"],[1,"table-responsive"],[1,"table","table-striped","exercise-table"],[1,"th-link"],["jhiTranslate","artemisApp.assessment.locks.type",1,"th-link"],["jhiTranslate","artemisApp.assessment.locks.exercise",1,"th-link"],["jhiTranslate","artemisApp.assessment.dashboard.columns.submissionDate",1,"th-link"],["jhiTranslate","artemisApp.assessment.dashboard.columns.submissionCount",1,"th-link"],["jhiTranslate","artemisApp.assessment.dashboard.columns.score",1,"th-link"],["jhiTranslate","artemisApp.assessment.dashboard.columns.action",1,"th-link"],["placement","right auto",3,"icon","ngbTooltip"],[1,"btn","btn-outline-secondary","btn-sm","mb-1",3,"routerLink"],[3,"icon","fixedWidth"],[1,"btn","btn-outline-secondary","btn-sm","mb-1",3,"click"],[2,"margin-top","10px"],["jhiTranslate","artemisApp.assessment.locks.empty"]],template:function(i,p){i&1&&(s(0,"div",0),e(1,`
    `),s(2,"div",1),e(3,`
        `),s(4,"div",2),e(5,`
            `),s(6,"h2"),e(7,`
                `),s(8,"span"),e(9),u(10,"artemisTranslate"),o(),e(11,`
            `),o(),e(12,`
        `),o(),e(13,`
    `),o(),e(14,`
`),o(),e(15,`
`),h(16,se,36,0)(17,oe,6,0)),i&2&&(a(9),f(b(10,3,"artemisApp.assessment.locks.title"+(p.showAll?"All":""))),a(7),x(p.submissions.length>0?16:-1),a(),x(p.submissions.length===0?17:-1))},dependencies:[V,U,j,w,X,W],encapsulation:2})}return n})();export{Ee as AssessmentLocksComponent};
//# sourceMappingURL=assessment-locks.component-3XNNRFIN.js.map

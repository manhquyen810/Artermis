import{a as K}from"./chunk-AOI2U3YC.js";import{b as J}from"./chunk-TECMX7AA.js";import{b as H}from"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import{a as Q,b as Z,d as G}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import{c as q}from"./chunk-JNO6DNVW.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{K as j,h as B,m as M}from"./chunk-WA5GEAJB.js";import"./chunk-5GXY5RYT.js";import{a as R}from"./chunk-K3W6YFKH.js";import{c as L}from"./chunk-JXJXC4DZ.js";import{d as W}from"./chunk-EDXSOKK5.js";import{b as I}from"./chunk-R5BZWVRQ.js";import{p as g}from"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{Bb as F,Jc as N,Q as U,fa as z,tb as O}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as Y}from"./chunk-U54OSGNH.js";import"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as r,Dc as T,Ea as f,Ma as p,Mc as x,Na as m,Oc as c,Rc as E,Tb as A,Zb as S,dd as e,ed as D,f as k,kc as d,ld as V,mc as b,md as w,nd as P,ra as y,sc as u,xc as n,yc as i,yd as h,zc as l,zd as v}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function X(o,_){if(o&1){let t=T();e(0,`
                        `),n(1,"table",4),e(2,`
                            `),n(3,"thead",5),e(4,`
                                `),n(5,"tr"),e(6,`
                                    `),n(7,"th",6),e(8,`
                                        `),l(9,"span",7),e(10,`
                                    `),i(),e(11,`
                                    `),l(12,"th",8),e(13,`
                                    `),n(14,"th",9),e(15,`
                                        `),l(16,"span",10),e(17,`
                                    `),i(),e(18,`
                                    `),n(19,"th",9),e(20,`
                                        `),l(21,"span",11),e(22,`
                                    `),i(),e(23,`
                                `),i(),e(24,`
                            `),i(),e(25,`

                            `),n(26,"tbody"),e(27,`
                                `),n(28,"tr"),e(29,`
                                    `),n(30,"td"),e(31,"***************"),i(),e(32,`
                                    `),n(33,"td"),e(34,`
                                        `),n(35,"button",12),x("cdkCopyToClipboardCopied",function(s){p(t);let C=c(3);return m(C.onCopyFinished(s))}),e(36,`
                                            `),l(37,"fa-icon",13),e(38,`
                                        `),i(),e(39,`
                                    `),i(),e(40,`
                                    `),n(41,"td"),e(42),h(43,"artemisDate"),i(),e(44,`
                                    `),n(45,"td"),e(46,`
                                        `),n(47,"button",14),x("delete",function(){p(t);let s=c(3);return m(s.deleteVcsAccessToken())}),e(48,`
                                            `),l(49,"fa-icon",13),e(50,`
                                            `),l(51,"div",15),e(52,`
                                        `),i(),e(53,`
                                    `),i(),e(54,`
                                `),i(),e(55,`
                            `),i(),e(56,`
                        `),i(),e(57,`
                    `)}if(o&2){let t=c(3);r(35),b("btn-success",t.wasCopied),d("cdkCopyToClipboard",t.currentUser.vcsAccessToken||""),r(2),d("icon",t.faCopy),r(5),D(v(43,8,t.currentUser==null?null:t.currentUser.vcsAccessTokenExpiryDate)),r(5),d("renderButtonText",!1)("dialogError",t.dialogError$),r(2),d("icon",t.faTrash)}}function $(o,_){o&1&&(e(0,`
                        `),l(1,"div",16),e(2,`
                    `))}function ee(o,_){if(o&1){let t=T();e(0,`
                `),n(1,"div",2),e(2,`
                    `),n(3,"dt"),e(4,`
                        `),n(5,"div",17),e(6,`
                            `),n(7,"jhi-button",18),x("onClick",function(){p(t);let s=c(3);return m(s.addNewVcsAccessToken())}),i(),e(8,`
                        `),i(),e(9,`
                    `),i(),e(10,`
                `),i(),e(11,`
            `)}if(o&2){let t=c(3);r(7),d("btnType",t.ButtonType.PRIMARY)("btnSize",t.ButtonSize.SMALL)("icon",t.faEdit)("title","artemisApp.userSettings.vcsAccessTokensSettingsPage.addToken")}}function te(o,_){if(o&1&&(e(0,`
            `),n(1,"div",2),e(2,`
                `),n(3,"dt"),e(4,`
                    `),S(5,X,58,10)(6,$,3,0),i(),e(7,`
            `),i(),e(8,`
            `),S(9,ee,12,4)),o&2){let t=c(2);r(5),u(t.currentUser!=null&&t.currentUser.vcsAccessToken?5:6),r(4),u(t.currentUser!=null&&t.currentUser.vcsAccessToken?-1:9)}}function ne(o,_){if(o&1){let t=T();e(0,`
            `),n(1,"div",2),e(2,`
                `),n(3,"dt"),e(4,`
                    `),l(5,"h4",19),e(6,`

                    `),n(7,"div",20),e(8,`
                        `),n(9,"div",21),e(10,`
                            `),n(11,"jhi-date-time-picker",22),h(12,"artemisTranslate"),P("ngModelChange",function(s){p(t);let C=c(2);return w(C.expiryDate,s)||(C.expiryDate=s),m(s)}),x("valueChange",function(){p(t);let s=c(2);return m(s.validateDate())}),i(),e(13,`
                        `),i(),e(14,`
                    `),i(),e(15,`

                    `),n(16,"div",17),e(17,`
                        `),n(18,"jhi-button",23),x("onClick",function(){p(t);let s=c(2);return m(s.sendTokenCreationRequest())}),i(),e(19,`
                        `),n(20,"jhi-button",24),x("onClick",function(){p(t);let s=c(2);return m(s.cancelTokenCreation())}),i(),e(21,`
                    `),i(),e(22,`
                `),i(),e(23,`
            `),i(),e(24,`
        `)}if(o&2){let t=c(2);r(11),E("labelName",v(12,13,"artemisApp.userSettings.vcsAccessTokensSettingsPage.expiryDate")),d("shouldDisplayTimeZoneWarning",!1),V("ngModel",t.expiryDate),d("error",!!t.expiryDate&&!t.validExpiryDate),r(7),d("btnType",t.ButtonType.PRIMARY)("btnSize",t.ButtonSize.SMALL)("disabled",!t.validExpiryDate)("icon",t.faSave)("title","artemisApp.userSettings.vcsAccessTokensSettingsPage.createAccessToken"),r(2),d("btnType",t.ButtonType.SECONDARY)("btnSize",t.ButtonSize.SMALL)("icon",t.faBan)("title","entity.action.cancel")}}function ie(o,_){if(o&1&&(e(0,`
    `),n(1,"div",1),e(2,`
        `),n(3,"div",2),e(4,`
            `),n(5,"dt"),e(6,`
                `),l(7,"span",3),e(8,`
            `),i(),e(9,`
        `),i(),e(10,`
        `),S(11,te,10,2)(12,ne,25,15),i(),e(13,`
`)),o&2){let t=c();r(11),u(t.edit?-1:11),r(),u(t.edit?12:-1)}}var ke=(()=>{class o{accountService=f(I);alertService=f(L);currentUser;faEdit=U;faSave=O;faTrash=F;faCopy=N;faBan=z;authStateSubscription;expiryDate;validExpiryDate=!1;wasCopied=!1;edit=!1;dialogErrorSource=new k;dialogError$=this.dialogErrorSource.asObservable();ButtonType=Q;ButtonSize=Z;ngOnInit(){this.authStateSubscription=this.accountService.getAuthenticationState().pipe(y(t=>(this.currentUser=t,this.currentUser))).subscribe()}ngOnDestroy(){this.authStateSubscription.unsubscribe()}deleteVcsAccessToken(){this.accountService.deleteUserVcsAccessToken().subscribe({next:()=>{this.currentUser&&(this.currentUser.vcsAccessTokenExpiryDate=void 0,this.currentUser.vcsAccessToken=void 0),this.alertService.success("artemisApp.userSettings.vcsAccessTokensSettingsPage.deleteSuccess")},error:()=>{this.alertService.error("artemisApp.userSettings.vcsAccessTokensSettingsPage.deleteFailure")}}),this.dialogErrorSource.next("")}addNewVcsAccessToken(){this.edit=!0}sendTokenCreationRequest(){if(!this.expiryDate||this.expiryDate.isBefore(g())||this.expiryDate.isAfter(g().add(1,"year"))){this.alertService.error("artemisApp.userSettings.vcsAccessTokensSettingsPage.addFailure");return}this.accountService.addNewVcsAccessToken(this.expiryDate.toISOString()).subscribe({next:t=>{if(this.currentUser){let a=t.body;this.currentUser.vcsAccessToken=a.vcsAccessToken,this.currentUser.vcsAccessTokenExpiryDate=a.vcsAccessTokenExpiryDate,this.edit=!1}this.alertService.success("artemisApp.userSettings.vcsAccessTokensSettingsPage.addSuccess")},error:()=>{this.alertService.error("artemisApp.userSettings.vcsAccessTokensSettingsPage.addFailure")}})}onCopyFinished(t){t&&(this.wasCopied=!0,setTimeout(()=>{this.wasCopied=!1},3e3))}validateDate(){this.validExpiryDate=!!this.expiryDate?.isAfter(g())&&!!this.expiryDate?.isBefore(g().add(1,"year"))}cancelTokenCreation(){this.edit=!1,this.expiryDate=void 0,this.validExpiryDate=!1}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=A({type:o,selectors:[["jhi-account-information"]],decls:5,vars:1,consts:[["jhiTranslate","artemisApp.userSettings.vcsAccessTokenSettings"],[1,"list-group","d-block"],[1,"list-group-item"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.infoText"],[1,"table","table-striped","flex"],[1,"thead-dark"],[1,"col-2"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.vcsAccessToken"],[1,"col-1"],[1,"col-4"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.expiryDate"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.actions"],["id","copy-token-button","type","button",1,"btn","btn-secondary","btn-sm","me-2",3,"cdkCopyToClipboardCopied","cdkCopyToClipboard"],[3,"icon"],["id","delete-vcs-token-button","jhiDeleteButton","","deleteQuestion","artemisApp.userSettings.vcsAccessTokensSettingsPage.deleteVcsAccessTokenQuestion",1,"btn","btn-md","flex-grow-1","d-flex","align-items-center",3,"delete","renderButtonText","dialogError"],["jhiTranslate","entity.action.delete",1,"ms-2"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.noTokenSet"],["role","group","aria-label","Actions",1,"btn-group"],["id","add-new-token-button",1,"d-flex",3,"onClick","btnType","btnSize","icon","title"],["jhiTranslate","artemisApp.userSettings.vcsAccessTokensSettingsPage.addTokenTitle"],[1,"row","mb-3"],[1,"col-sm-6"],["name","expiryDate","id","expiryDate",3,"ngModelChange","valueChange","shouldDisplayTimeZoneWarning","labelName","ngModel","error"],["id","create-vcs-token-button",1,"me-1",3,"onClick","btnType","btnSize","disabled","icon","title"],["id","cancel-vcs-token-creation-button",3,"onClick","btnType","btnSize","icon","title"]],template:function(a,s){a&1&&(n(0,"h1",0),e(1,`
    `),e(2,`
`),i(),e(3,`
`),S(4,ie,14,2)),a&2&&(r(4),u(s.currentUser?4:-1))},dependencies:[Y,K,W,H,G,J,j,B,M,q,R],styles:["#apply-changes-button[_ngcontent-%COMP%]{width:250px;height:40px;font-size:large;border:0}h3[_ngcontent-%COMP%]{font-weight:700;text-underline-offset:3px}dt[_ngcontent-%COMP%]{font-size:large;font-weight:500}dd[_ngcontent-%COMP%]{font-size:larger}.userSettings-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:gray;font-size:large;font-weight:bolder}.userSettings-info[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{color:gray}.form-check[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}"]})}return o})();export{ke as VcsAccessTokensSettingsComponent};
//# sourceMappingURL=vcs-access-tokens-settings.component-4Z4AXSQP.js.map

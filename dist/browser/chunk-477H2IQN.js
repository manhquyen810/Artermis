import{a as N}from"./chunk-UBFIUABE.js";import{a as Q}from"./chunk-KNK6NHCW.js";import{a as q}from"./chunk-SBDPY7ZH.js";import{a as W}from"./chunk-MVBHDJDH.js";import{a as U}from"./chunk-KYCCMZSV.js";import{f as v}from"./chunk-DXTZ4GAW.js";import{a as R}from"./chunk-JHBUBEY6.js";import{c as k,e as j}from"./chunk-CK7FH6VF.js";import{c as G}from"./chunk-JNO6DNVW.js";import{K as b}from"./chunk-VZRSC3LP.js";import{a as z}from"./chunk-K3W6YFKH.js";import{d as B}from"./chunk-EDXSOKK5.js";import{b as A}from"./chunk-R5BZWVRQ.js";import{p as C}from"./chunk-DID2YGL7.js";import{c as T,f as D,h as I,i as L}from"./chunk-CXQURQM5.js";import{a as F}from"./chunk-U54OSGNH.js";import{i as E}from"./chunk-M6Z6DKZQ.js";import{n as y}from"./chunk-IOA4DPXY.js";import{Db as r,Ea as g,La as P,Oc as l,Tb as S,Zb as p,dd as e,ed as O,fd as f,kc as c,mc as _,oc as w,rd as M,sc as u,xc as o,yc as a,yd as x,zc as d,zd as m}from"./chunk-5LC5EQRR.js";var H=i=>({difficulty:!0,includedInScore:!0,notReleased:!0,quizLive:i});function V(i,h){if(i&1&&(e(0,`
                `),d(1,"fa-icon",12),x(2,"artemisTranslate"),e(3,`
            `)),i&2){let t=l();r(),c("icon",t.getIcon(t.exercise.type))("ngbTooltip",m(2,2,t.getIconTooltip(t.exercise.type)))}}function Z(i,h){if(i&1&&(e(0,`
                        `),d(1,"fa-icon",13),e(2,`
                    `)),i&2){let t=l();r(),c("icon",t.getIcon(t.exercise.type))}}function J(i,h){if(i&1&&(e(0,`
                `),d(1,"jhi-submission-result-status",14),e(2,`
            `)),i&2){let t=l();r(),c("exercise",t.exercise)("studentParticipation",t.gradedStudentParticipation)("triggerLastGraded",!1)}}function K(i,h){if(i&1&&(e(0,`
                `),d(1,"jhi-exercise-details-student-actions",15),e(2,`
            `)),i&2){let t=l();r(),c("showInOrionWindow",!1)("smallButtons",!0)("courseId",t.course.id)("smallColumns",!0)("equalColumns",!1)("exercise",t.exercise)("ngClass","mt-2 mb-2 raised-actions")}}function X(i,h){if(i&1&&(e(0,`
                `),o(1,"div",16),x(2,"artemisDate"),e(3,`
                    `),o(4,"span",17),e(5),x(6,"artemisTranslate"),a(),e(7,`
                    `),o(8,"span",18),e(9),x(10,"artemisTranslate"),a(),e(11),x(12,"artemisTimeAgo"),a(),e(13,`
            `)),i&2){let t=l();r(),c("ngClass",t.getUrgentClass(t.dueDate)||"")("ngbTooltip",m(2,6,t.dueDate))("routerLink",t.routerLink),r(4),f(" ",m(6,8,"artemisApp.exercise.dueDate"),": "),r(4),f(" ",m(10,10,"artemisApp.courseOverview.exerciseList.shortDueDate"),": "),r(2),f(`
                    `,m(12,12,t.dueDate),`
                `)}}function Y(i,h){i&1&&(e(0,`
                `),d(1,"div",19),e(2,`
            `))}var ye=(()=>{class i{accountService=g(A);participationService=g(j);exerciseService=g(k);participationWebsocketService=g(R);IncludedInOverallScore=D;dayjs=C;classes="exercise-row";exercise;course;hasGuidedTour;isPresentationMode=!1;getIcon=I;getIconTooltip=L;exerciseCategories;isAfterAssessmentDueDate;dueDate;gradedStudentParticipation;routerLink;participationUpdateListener;ngOnInit(){this.exercise?.studentParticipations?.length&&(this.gradedStudentParticipation=this.participationService.getSpecificStudentParticipation(this.exercise.studentParticipations,!1)),this.participationUpdateListener=this.participationWebsocketService.subscribeForParticipationChanges().subscribe(t=>{t&&this.exercise&&t.exercise?.id===this.exercise.id&&(this.exercise.studentParticipations=this.exercise.studentParticipations?.length?this.exercise.studentParticipations.map(n=>n.id===t.id?t:n):[t],this.gradedStudentParticipation=this.participationService.getSpecificStudentParticipation(this.exercise.studentParticipations,!1),this.dueDate=v(this.exercise,this.gradedStudentParticipation))}),this.routerLink=["/courses",this.course.id.toString(),"exercises",this.exercise.id.toString()]}ngOnChanges(){let t=this.participationWebsocketService.getParticipationsForExercise(this.exercise.id);if(t?.length&&(this.exercise.studentParticipations=t,this.gradedStudentParticipation=this.participationService.getSpecificStudentParticipation(this.exercise.studentParticipations,!1)),this.dueDate=v(this.exercise,this.gradedStudentParticipation),this.exercise.isAtLeastTutor=this.accountService.isAtLeastTutorInCourse(this.course||this.exercise.exerciseGroup.exam.course),this.exercise.isAtLeastEditor=this.accountService.isAtLeastEditorInCourse(this.course||this.exercise.exerciseGroup.exam.course),this.exercise.isAtLeastInstructor=this.accountService.isAtLeastInstructorInCourse(this.course||this.exercise.exerciseGroup.exam.course),this.isAfterAssessmentDueDate=!this.exercise.assessmentDueDate||C().isAfter(this.exercise.assessmentDueDate),this.exercise.type===T.QUIZ){let n=this.exercise;n.isActiveQuiz=this.exerciseService.isActiveQuiz(n),n.isPracticeModeAvailable=n.isOpenForPractice&&n.quizEnded,this.exercise=n}this.exerciseCategories=this.exercise.categories||[],this.exercise.course=this.course}ngOnDestroy(){this.participationUpdateListener&&this.participationUpdateListener.unsubscribe()}getUrgentClass(t){if(!t)return;let n=t.diff(C(),"days");if(0<=n&&n<7)return"text-danger"}asQuizExercise(t){return t}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=S({type:i,selectors:[["jhi-course-exercise-row"]],hostVars:2,hostBindings:function(n,s){n&2&&w(s.classes)},inputs:{exercise:"exercise",course:"course",hasGuidedTour:"hasGuidedTour",isPresentationMode:"isPresentationMode"},features:[P],decls:41,vars:16,consts:[[1,"course-exercise-row","align-items-center","position-relative",3,"id"],[1,"stretched-link",3,"routerLink"],[1,"col-auto","d-none","d-md-block"],[1,"exercise-row-icon",3,"routerLink"],[1,"col","max-width"],[1,"row","m-0"],[1,"col-auto","p-0","d-md-none"],[1,"fw-medium","exercise-title"],[1,"col-sm","p-0","col","d-none","d-md-flex"],[1,"exercise-title"],[1,"row",2,"justify-content","space-between"],[1,"exercise-tags","col-auto","col-sm","justify-content-center","d-none","d-md-flex",3,"exercise","showTags"],["size","lg",1,"me-3",3,"icon","ngbTooltip"],[3,"icon"],[1,"result",3,"exercise","studentParticipation","triggerLastGraded"],["jhiOrionFilter","",3,"showInOrionWindow","smallButtons","courseId","smallColumns","equalColumns","exercise","ngClass"],[1,"col-sm-auto","mb-2","due-date",3,"ngClass","ngbTooltip","routerLink"],[1,"d-none","d-sm-inline"],[1,"d-sm-none"],["jhiTranslate","artemisApp.courseOverview.exerciseList.noDueDate",1,"col-auto","mb-2"]],template:function(n,s){n&1&&(o(0,"div",0),e(1,`
    `),d(2,"a",1),e(3,`
    `),o(4,"div",2),e(5,`
        `),o(6,"a",3),e(7,`
            `),p(8,V,4,4),a(),e(9,`
    `),a(),e(10,`
    `),o(11,"div",4),e(12,`
        `),o(13,"div",5),e(14,`
            `),o(15,"div",6),e(16,`
                `),o(17,"h4",7),e(18,`
                    `),p(19,Z,3,1),e(20),a(),e(21,`
            `),a(),e(22,`
            `),o(23,"div",8),e(24,`
                `),o(25,"h5",9),e(26),a(),e(27,`
            `),a(),e(28,`
            `),p(29,J,3,3),a(),e(30,`
        `),o(31,"div",10),e(32,`
            `),p(33,K,3,7),d(34,"jhi-exercise-categories",11),e(35,`
            `),p(36,X,14,14)(37,Y,3,0),a(),e(38,`
    `),a(),e(39,`
`),a(),e(40,`
`)),n&2&&(_("guided-tour",s.hasGuidedTour),c("id","exercise-card-"+s.exercise.id),r(2),c("routerLink",s.routerLink),r(4),c("routerLink",s.routerLink),r(2),u(s.exercise.type?8:-1),r(11),u(s.exercise.type?19:-1),r(),f(`
                    \xA0
                    `,s.exercise.title,`
                `),r(6),O(s.exercise.title),r(3),u(s.isPresentationMode?-1:29),r(4),u(s.isPresentationMode?-1:33),r(),c("exercise",s.exercise)("showTags",M(14,H,!s.isPresentationMode)),r(2),u(s.dueDate?36:37))},dependencies:[E,B,b,Q,N,q,y,W,F,G,z,U],styles:["[_nghost-%COMP%]{cursor:pointer}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{padding:5px 0;background-color:var(--overview-light-background-color);border-radius:var(--bs-border-radius-lg)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{min-height:35px;align-items:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]:hover{background-color:var(--hover-slightly-darker-body-bg)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   .exercise-link[_ngcontent-%COMP%]{color:#212529}[_nghost-%COMP%]   .course-exercise-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:.5rem 1rem}[_nghost-%COMP%]   .exercise-row-icon[_ngcontent-%COMP%]{color:var(--bs-body-color);display:flex;align-items:center;justify-content:center;min-width:40px}[_nghost-%COMP%]   .exercise-row-icon[_ngcontent-%COMP%] > fa-icon[_ngcontent-%COMP%]{z-index:1}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]{width:unset;z-index:2}[_nghost-%COMP%]   .due-date[_ngcontent-%COMP%]{z-index:1}.raised-actions[_ngcontent-%COMP%]{position:relative;z-index:1}@media (min-width: 768px){.max-width[_ngcontent-%COMP%]{max-width:90%}}@media (max-width: 767px){.max-width[_ngcontent-%COMP%]{max-width:100%}}.exercise-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}"]})}return i})();export{ye as a};
//# sourceMappingURL=chunk-477H2IQN.js.map

import{a as ie,b as ae}from"./chunk-EWZHEKEG.js";import{a as ne}from"./chunk-VTF2OQPK.js";import{i as Z,t as J,u as K}from"./chunk-VZRSC3LP.js";import{c as ee}from"./chunk-JXJXC4DZ.js";import{d as te,f as P}from"./chunk-EDXSOKK5.js";import{Nc as Q}from"./chunk-Z4VHWOB5.js";import{a as R}from"./chunk-U54OSGNH.js";import{E as q,L as B,n as W}from"./chunk-IOA4DPXY.js";import{Db as p,Dc as V,Ea as x,Ed as T,Ma as L,Mc as G,Na as k,Oa as M,Oc as g,Pa as D,Pd as X,Qa as j,Qd as S,Rd as w,Tb as v,Ya as F,Za as C,Zb as m,_a as Y,ab as f,dd as n,ed as H,f as E,fd as A,jc as b,kc as h,rd as z,sc as _,td as U,xc as o,ya as I,yc as r,zc as d}from"./chunk-5LC5EQRR.js";import{a as $,b as O,j as c}from"./chunk-3E746U5Y.js";var oe=(()=>{class t extends ne{getLearningPathForCurrentUser(e){return c(this,null,function*(){return yield this.get(`atlas/courses/${e}/learning-path/me`)})}startLearningPathForCurrentUser(e){return c(this,null,function*(){return yield this.patch(`atlas/learning-path/${e}/start`)})}getLearningPathNavigation(e){return c(this,null,function*(){return yield this.get(`atlas/learning-path/${e}/navigation`)})}getRelativeLearningPathNavigation(e,i,a,l){return c(this,null,function*(){let y=new B;return y=y.set("learningObjectId",i.toString()),y=y.set("learningObjectType",a),y=y.set("competencyId",l.toString()),yield this.get(`atlas/learning-path/${e}/relative-navigation`,{params:y})})}generateLearningPathForCurrentUser(e){return c(this,null,function*(){return yield this.post(`atlas/courses/${e}/learning-path`)})}getLearningPathNavigationOverview(e){return c(this,null,function*(){return yield this.get(`atlas/learning-path/${e}/navigation-overview`)})}getLearningPathCompetencyGraph(e){return c(this,null,function*(){return yield this.get(`atlas/learning-path/${e}/competency-graph`)})}getLearningPathInstructorCompetencyGraph(e){return c(this,null,function*(){return yield this.get(`atlas/courses/${e}/learning-path/competency-instructor-graph`)})}getLearningPathCompetencies(e){return c(this,null,function*(){return yield this.get(`atlas/learning-path/${e}/competencies`)})}getLearningPathCompetencyLearningObjects(e,i){return c(this,null,function*(){return yield this.get(`atlas/learning-path/${e}/competencies/${i}/learning-objects`)})}getLearningPathsConfiguration(e){return c(this,null,function*(){return yield this.get(`atlas/courses/${e}/learning-paths/configuration`)})}getLearningPathHealthStatus(e){return c(this,null,function*(){return yield this.get(`atlas/courses/${e}/learning-path-health`)})}updateLearningPathsConfiguration(e,i){return c(this,null,function*(){yield this.put(`atlas/courses/${e}/learning-paths/configuration`,i)})}enableLearningPaths(e){return c(this,null,function*(){yield this.put(`atlas/courses/${e}/learning-paths/enable`)})}generateMissingLearningPaths(e){return c(this,null,function*(){yield this.put(`atlas/courses/${e}/learning-paths/generate-missing`)})}getLearningPathInformation(e,i){return c(this,null,function*(){let a=this.createHttpSearchParams(i);return yield this.get(`atlas/courses/${e}/learning-paths`,{params:a})})}static \u0275fac=(()=>{let e;return function(a){return(e||(e=j(t)))(a||t)}})();static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pe=function(t){return t.LECTURE="LECTURE",t.EXERCISE="EXERCISE",t}(pe||{}),u=function(t){return t.MASTERY_PROGRESS="MASTERY_PROGRESS",t.AVERAGE_MASTERY_PROGRESS="AVERAGE_MASTERY_PROGRESS",t}(u||{});var se=(t,s,e)=>({"green-competency":t,"yellow-competency":s,"gray-competency":e});function le(t,s){if(t&1&&n(0),t&2){let e=g();A(`
                    `,e.value(),` %
                `)}}function me(t,s){if(t&1&&n(0),t&2){let e=g();A(`
                    `,e.value(),`
                `)}}var re=(()=>{class t{CompetencyGraphNodeValueType=u;nodeHeight=45.59;competencyNode=C.required();valueType=S(()=>this.competencyNode().valueType);value=S(()=>this.competencyNode().value);element=x(Y);onSizeSet=F();ngAfterViewInit(){this.setDimensions()}isGreen(){switch(this.valueType()){case u.MASTERY_PROGRESS:return this.value()>=100;default:return!1}}isYellow(){switch(this.valueType()){case u.MASTERY_PROGRESS:case u.AVERAGE_MASTERY_PROGRESS:return this.value()>0&&this.value()<100;default:return!1}}isGray(){switch(this.valueType()){case u.MASTERY_PROGRESS:case u.AVERAGE_MASTERY_PROGRESS:return this.value()===0;default:return!1}}setDimensions(){let e=this.element.nativeElement.offsetWidth,i=this.nodeHeight;this.onSizeSet.emit({id:this.competencyNode().id,dimension:{height:i,width:e}})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=v({type:t,selectors:[["jhi-learning-path-competency-node"]],inputs:{competencyNode:[1,"competencyNode"]},outputs:{onSizeSet:"onSizeSet"},decls:16,vars:7,consts:[[1,"d-inline-block","competency-node"],[1,"progress-container","d-inline-block",3,"ngClass"],[1,"d-inline-block","ms-1"]],template:function(i,a){i&1&&(o(0,"div",0),n(1,`
    `),o(2,"div",1),n(3,`
        `),o(4,"small")(5,"strong"),n(6,`
                `),m(7,le,1,1)(8,me,1,1),r()(),n(9,`
    `),r(),n(10,`
    `),o(11,"span",2)(12,"strong"),n(13),r()(),n(14,`
`),r(),n(15,`
`)),i&2&&(p(2),h("ngClass",U(3,se,a.isGreen(),a.isYellow(),a.isGray())),p(5),_(a.valueType()===a.CompetencyGraphNodeValueType.MASTERY_PROGRESS||a.valueType()===a.CompetencyGraphNodeValueType.AVERAGE_MASTERY_PROGRESS?7:8),p(6),H(a.competencyNode().label))},dependencies:[J,P,Z,q,W],styles:[".competency-node[_ngcontent-%COMP%]{white-space:nowrap;background-color:var(--bs-body-bg);border-radius:calc(var(--bs-border-radius-lg) + 6px);padding:10px 12px}.competency-node[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{color:var(--bs-white);padding:2px 8px;border-radius:var(--bs-border-radius-lg)}.competency-node[_ngcontent-%COMP%]   .green-competency[_ngcontent-%COMP%]{background-color:var(--bs-green)}.competency-node[_ngcontent-%COMP%]   .gray-competency[_ngcontent-%COMP%]{background-color:var(--bs-gray)}.competency-node[_ngcontent-%COMP%]   .yellow-competency[_ngcontent-%COMP%]{background-color:var(--bs-yellow)}"],changeDetection:0})}return t})();function de(t,s){t&1&&(n(0,`
    `),d(1,"h5",3),n(2,`
`))}function he(t,s){t&1&&(n(0,`
                `),M(),o(1,"marker",6),n(2,`
                    `),d(3,"path",7),n(4,`
                `),r(),n(5,`
            `))}function ge(t,s){if(t&1){let e=V();n(0,`
                `),M(),o(1,"g"),n(2,`
                    `),o(3,"foreignObject",8),n(4,`
                        `),D(),o(5,"jhi-learning-path-competency-node",9),G("onSizeSet",function(a){L(e);let l=g(2);return k(l.setNodeDimension(a))}),r(),n(6,`
                    `),r(),n(7,`
                `),r(),n(8,`
            `)}if(t&2){let e=s.$implicit;p(),b("width",e.dimension.width)("height",e.dimension.height),p(2),b("width",e.dimension.width)("height",e.dimension.height),p(2),h("competencyNode",e)}}function ue(t,s){t&1&&(n(0,`
                `),M(),o(1,"g",10),n(2,`
                    `),d(3,"path",11),n(4,`
                `),r(),n(5,`
            `))}function ye(t,s){if(t&1&&(n(0,`
    `),o(1,"div",4),n(2,`
        `),o(3,"ngx-graph",5),n(4,`
            `),m(5,he,6,0,"ng-template",null,0,T),n(7,`
            `),m(8,ge,9,5,"ng-template",null,1,T),n(10,`
            `),m(11,ue,6,0,"ng-template",null,2,T),n(13,`
        `),r(),n(14,`
    `),r(),n(15,`
`)),t&2){let e=g();p(3),h("draggingEnabled",!1)("enableZoom",!1)("links",e.edges())("nodes",e.nodes())("update$",e.update$)("center$",e.center$)("zoomToFit$",e.zoomToFit$)("showMiniMap",!0)("miniMapMaxWidth",200)("miniMapMaxHeight",150)}}var ce=(()=>{class t{competencyGraph=C.required();internalCompetencyGraph=f({nodes:[],edges:[]});nodes=S(()=>this.internalCompetencyGraph().nodes||[]);edges=S(()=>this.internalCompetencyGraph().edges?.map(e=>O($({},e),{id:`edge-${e.id}`}))||[]);update$=new E;center$=new E;zoomToFit$=new E;constructor(){w(()=>this.internalCompetencyGraph.set(this.competencyGraph()))}setNodeDimension(e){this.internalCompetencyGraph.update(({nodes:i,edges:a})=>({nodes:i.map(l=>(l.id===e.id&&(l.dimension=e.dimension),l)),edges:a}))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=v({type:t,selectors:[["jhi-competency-graph"]],inputs:{competencyGraph:[1,"competencyGraph"]},decls:2,vars:1,consts:[["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["jhiTranslate","artemisApp.learningPathManagement.noGraphAvailable",1,"m-0"],[0,"xmlns","svg","http://www.w3.org/2000/svg",1,"competency-graph-container","h-100"],["layout","dagreCluster",3,"draggingEnabled","enableZoom","links","nodes","update$","center$","zoomToFit$","showMiniMap","miniMapMaxWidth","miniMapMaxHeight"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],[3,"onSizeSet","competencyNode"],[1,"edge"],["stroke-width","1","marker-end","url(#arrow)",1,"line"]],template:function(i,a){i&1&&m(0,de,3,0)(1,ye,16,10),i&2&&_(a.nodes().length===0||a.edges().length===0?0:1)},dependencies:[re,ae,ie,R],styles:[".competency-graph-container[_ngcontent-%COMP%]   #arrow[_ngcontent-%COMP%]{stroke:var(--body-color);fill:var(--body-color)}"],changeDetection:0})}return t})();var Ce=t=>({name:t});function fe(t,s){if(t&1&&(n(0,`
                `),d(1,"span",6),n(2,`
            `)),t&2){let e=g();p(),h("translateValues",z(1,Ce,e.name()))}}function _e(t,s){t&1&&(n(0,`
                `),d(1,"span",7),n(2,`
            `))}function xe(t,s){t&1&&(n(0,`
            `),o(1,"div",8),n(2,`
                `),o(3,"div",9),n(4,`
                    `),d(5,"span",10),n(6,`
                `),r(),n(7,`
            `),r(),n(8,`
        `))}function ve(t,s){if(t&1&&(n(0,`
            `),d(1,"jhi-competency-graph",11),n(2,`
        `)),t&2){let e=g();p(),h("competencyGraph",e.competencyGraph())}}var it=(()=>{class t{closeIcon=Q;learningPathApiService=x(oe);alertService=x(ee);name=C();learningPathId=C.required();isLoading=f(!1);competencyGraph=f(void 0);activeModal=x(K);constructor(){w(()=>{let e=this.learningPathId();X(()=>this.loadCompetencyGraph(e))})}loadCompetencyGraph(e){return c(this,null,function*(){try{this.isLoading.set(!0);let i=yield this.learningPathApiService.getLearningPathCompetencyGraph(e);this.competencyGraph.set(i)}catch(i){this.alertService.error(i)}finally{this.isLoading.set(!1)}})}closeModal(){this.activeModal.close()}static openCompetencyGraphModal(e,i,a){let l=e.open(t,{size:"xl",backdrop:"static",windowClass:"competency-graph-modal"});l.componentInstance.learningPathId=f(i),l.componentInstance.name=f(a)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=v({type:t,selectors:[["jhi-competency-graph-modal"]],inputs:{name:[1,"name"],learningPathId:[1,"learningPathId"]},decls:20,vars:3,consts:[[1,"competency-graph-modal"],[1,"col","p-3"],[1,"row","m-0"],["id","close-button",1,"col-md-auto","h5","clickable","m-0","p-1","pe-0",3,"click","icon"],[1,"m-0"],[1,"competency-graph-modal-body","h-100"],["jhiTranslate","artemisApp.learningPath.competencyGraphModal.titleWithName",1,"col","p-0","h5","m-0","align-self-center",3,"translateValues"],["jhiTranslate","artemisApp.learningPath.competencyGraphModal.title",1,"col","p-0","h5","m-0","align-self-center"],[1,"row","justify-content-center","m-4"],["role","status",1,"spinner-border","text-primary"],["jhiTranslate","loading",1,"sr-only"],[3,"competencyGraph"]],template:function(i,a){i&1&&(o(0,"div",0),n(1,`
    `),o(2,"div",1),n(3,`
        `),o(4,"div",2),n(5,`
            `),m(6,fe,3,3)(7,_e,3,0),o(8,"fa-icon",3),G("click",function(){return a.closeModal()}),r(),n(9,`
        `),r(),n(10,`
    `),r(),n(11,`
    `),d(12,"hr",4),n(13,`
    `),o(14,"div",5),n(15,`
        `),m(16,xe,9,0)(17,ve,3,1),r(),n(18,`
`),r(),n(19,`
`)),i&2&&(p(6),_(a.name()!==void 0?6:7),p(2),h("icon",a.closeIcon),p(8),_(a.isLoading()?16:a.competencyGraph()?17:-1))},dependencies:[P,te,ce,R],styles:[".competency-graph-modal[_ngcontent-%COMP%]{height:90vh;max-height:700px;overflow:hidden}"],changeDetection:0})}return t})();export{oe as a,pe as b,u as c,ce as d,it as e};
//# sourceMappingURL=chunk-L7ISDZQQ.js.map

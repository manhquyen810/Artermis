import{a as se,b as Ci}from"./chunk-P2ARLJ6R.js";import{a as Ti,c as G,d as Ei,e as Ii,f as yi,g as ki,h as Ri,i as wi}from"./chunk-E5SIAVCE.js";import"./chunk-2XM463N5.js";import"./chunk-52ZREXQL.js";import"./chunk-F452EUSG.js";import"./chunk-F75WZTS2.js";import"./chunk-2SI4Q343.js";import"./chunk-4YACL3TM.js";import"./chunk-IJQAYIKN.js";import"./chunk-ZXG3EZUM.js";import"./chunk-7VA67MIB.js";import"./chunk-7MNRIAWL.js";import"./chunk-TOVMCMTA.js";import"./chunk-FNJRUM5G.js";import"./chunk-XYQBKB2U.js";import"./chunk-A7SZQPNU.js";import{c as bi,e as vi}from"./chunk-VJKFYSDP.js";import{a as Si}from"./chunk-ASDUDRMA.js";import"./chunk-GM5QZPKO.js";import"./chunk-IJRVZ46L.js";import{a as pi}from"./chunk-POPNQ63B.js";import"./chunk-SKB5UJGX.js";import"./chunk-SUUJN3EQ.js";import{a as xi,b as be}from"./chunk-3A7JIXAS.js";import"./chunk-CCVWGTN5.js";import"./chunk-MD22LTSS.js";import"./chunk-RKZRHQUL.js";import{a as hi}from"./chunk-M2FHCXD3.js";import"./chunk-RGQYMQQL.js";import{a as gi}from"./chunk-EAC2ODNH.js";import{a as fi}from"./chunk-SLVT6IA5.js";import{e as _i,h as ge}from"./chunk-FAFORKWV.js";import"./chunk-QU4DXSXD.js";import"./chunk-KZGAUMRM.js";import"./chunk-656XE4CO.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-U4DJRHYQ.js";import"./chunk-JRBFEQNN.js";import"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-MBS3WUDO.js";import"./chunk-22YQSX6Z.js";import"./chunk-R56P6PAY.js";import"./chunk-65Z25AP3.js";import"./chunk-5M3YV54C.js";import"./chunk-RYZEETVB.js";import"./chunk-VTF2OQPK.js";import"./chunk-BNRTXX46.js";import"./chunk-VPHPBAVR.js";import"./chunk-N4VVKRBU.js";import"./chunk-5AQXEKLE.js";import"./chunk-3JSWSN6W.js";import"./chunk-7XNS72RJ.js";import"./chunk-KYCCMZSV.js";import"./chunk-DXTZ4GAW.js";import"./chunk-2UXGFGK3.js";import"./chunk-O4VJ5OXY.js";import"./chunk-BDII35IB.js";import"./chunk-LARBQRTJ.js";import"./chunk-OTNXTVPX.js";import"./chunk-Z2YUBN6N.js";import"./chunk-OTCBNILH.js";import{d as ci}from"./chunk-6EYB5QBP.js";import"./chunk-GERFCPB6.js";import{b as oi,d as di}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{d as mi,e as fe,f as ui,g as xe}from"./chunk-VWRLJYRR.js";import{a as $}from"./chunk-FZY4YCJJ.js";import"./chunk-R2SUWIPY.js";import"./chunk-35PLMJNP.js";import"./chunk-GXOKLIFX.js";import"./chunk-4I367PEU.js";import"./chunk-QA7Y7QBM.js";import"./chunk-ZPITQMA6.js";import"./chunk-2CUFQLAH.js";import"./chunk-I76AVIQH.js";import{f as ee,q as $e,v as li}from"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import{d as ri}from"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import"./chunk-YLNI6ED3.js";import"./chunk-ZFM7LHJQ.js";import"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import{b as ni}from"./chunk-EELXLOHY.js";import{K as ie,v as Je}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{K as Ye,a as Qe,c as qe,h as Ze,m as Ke}from"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import{a as te}from"./chunk-K3W6YFKH.js";import"./chunk-JXJXC4DZ.js";import{d as ai}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import{p as D}from"./chunk-DID2YGL7.js";import{c as v,f as si}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{B as ii,Cc as ti,Q as pe,sd as _e}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import{a as ei}from"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as j}from"./chunk-U54OSGNH.js";import{f as Ge}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{O as He,n as Xe}from"./chunk-IOA4DPXY.js";import{B as Ie,Ba as X,Db as a,Dc as k,Ea as u,F as ye,Ib as ae,Id as L,Ma as T,Mc as b,Na as C,Nd as W,Oc as m,Od as V,Pc as Ne,Qa as Ae,Qc as Le,R as ke,Rc as We,Sc as je,Tb as R,U as Re,Va as y,Vb as Oe,W as we,Wa as q,Xb as oe,Xc as le,Yc as w,Zb as x,Zc as E,_a as Z,_c as I,ab as O,dd as n,ed as J,f as Q,fd as F,gb as De,gd as ze,jc as Ue,kc as p,lc as Be,ld as ce,mc as K,md as me,nd as ue,oc as de,pd as N,ra as Ve,rd as H,sc as f,sd as he,tc as Fe,uc as Y,vc as U,wc as B,xa as Me,xc as d,ya as Pe,yc as l,yd as P,z as M,zc as _,zd as A}from"./chunk-5LC5EQRR.js";import{a as Ce,b as Ee}from"./chunk-3E746U5Y.js";var Vi=(s,h)=>({current:s,all:h});function Ni(s,h){if(s&1&&(n(0,`
            `),_(1,"div",10),n(2,`
        `)),s&2){let e=m();a(),p("translateValues",he(1,Vi,e.exerciseIndex+1,e.exercises.length))}}function Li(s,h){if(s&1&&(n(0,`
            `),_(1,"div",11),n(2,`
        `)),s&2){let e=m();a(),p("translateValues",he(1,Vi,e.exerciseIndex+1,e.exercises.length))}}function Wi(s,h){s&1&&(n(0,`
            `),_(1,"div",12),n(2,`
        `))}function ji(s,h){if(s&1){let e=k();n(0,`
                    `),d(1,"button",13),P(2,"artemisTranslate"),b("click",function(){T(e);let t=m();return C(t.changePage(!0,-1))}),n(3,`
                        `),_(4,"fa-icon",14),n(5,`
                    `),l(),n(6,`
                `)}if(s&2){let e=m();a(),p("ngClass",e.getOverviewStatus())("ngbTooltip",A(2,3,"artemisApp.examParticipation.examOverview")),a(3),p("icon",e.faBars)}}function zi(s,h){if(s&1){let e=k();n(0,`
                    `),d(1,"div",6),n(2,`
                        `),d(3,"button",15),P(4,"artemisTranslate"),b("click",function(){T(e);let t=m().$index,r=m();return C(r.changePage(!1,t,!1))}),n(5,`
                            `),_(6,"fa-icon",14),n(7,`
                        `),l(),n(8,`
                        `),d(9,"div",16),n(10),l(),n(11,`
                    `),l(),n(12,`
                `)}if(s&2){let e=m(),i=e.$implicit,t=e.$index,r=m();a(3),je("id","exam-exercise-",t,""),p("ngClass",r.setExerciseButtonStatus(t))("ngbTooltip",r.examTimeLineView?"":A(4,6,"artemisApp.examParticipation."+r.getExerciseButtonTooltip(i))),a(3),p("icon",r.icon),a(4),J(t+1)}}function Xi(s,h){if(s&1&&(n(0,`
                `),x(1,zi,13,8)),s&2){let e=h.$index,i=m();a(),f(e>=i.exerciseIndex-i.itemsVisiblePerSide-(i.exerciseIndex+1+i.itemsVisiblePerSide>i.exercises.length?i.exerciseIndex+1+i.itemsVisiblePerSide-i.exercises.length:0)&&e<=i.exerciseIndex+i.itemsVisiblePerSide-(i.exerciseIndex-i.itemsVisiblePerSide<=0?i.exerciseIndex-i.itemsVisiblePerSide:0)?1:-1)}}function Hi(s,h){if(s&1){let e=k();n(0,`
                        `),d(1,"button",22),b("click",function(){T(e);let t=m(2);return C(t.saveExercise())}),n(2),P(3,"artemisTranslate"),l(),n(4,`
                    `)}if(s&2){let e=m(2);a(),K("invisible",e.isProgrammingExercise()||e.isFileUploadExercise()),a(),F(`
                            `,A(3,3,"artemisApp.examParticipation."+(e.exerciseIndex>=e.exercises.length-1?"submitLastExercise":"submitOtherExercise")),`
                        `)}}function $i(s,h){if(s&1){let e=k();n(0,`
            `),d(1,"div",17),n(2,`
                `),d(3,"div",18),n(4,`
                    `),x(5,Hi,5,5),d(6,"button",19),b("click",function(){T(e);let t=m();return C(t.handInEarly())}),l(),n(7,`
                `),l(),n(8,`
                `),d(9,"div",20),n(10,`
                    `),d(11,"jhi-exam-timer",21),b("timerAboutToEnd",function(){T(e);let t=m();return C(t.triggerExamAboutToEnd())}),l(),n(12,`
                `),l(),n(13,`
            `),l(),n(14,`
        `)}if(s&2){let e=m();a(5),f(e.overviewPageOpen?-1:5),a(6),p("criticalTime",e.criticalTime)("endDate",e.endDate)}}var Mi=(()=>{class s{layoutService=u(Ci);examParticipationService=u($);examExerciseUpdateService=u(hi);repositoryService=u(vi);conflictService=u(bi);exercises=[];exerciseIndex=0;endDate;overviewPageOpen;examSessions=[];examTimeLineView=!1;onPageChanged=new y;examAboutToEnd=new y;onExamHandInEarly=new y;static itemsVisiblePerSideDefault=4;itemsVisiblePerSide=s.itemsVisiblePerSideDefault;criticalTime=D.duration(5,"minutes");icon;subscriptionToLiveExamExerciseUpdates;faBars=ii;ngOnInit(){this.examTimeLineView||(this.subscriptionToLiveExamExerciseUpdates=this.examExerciseUpdateService.currentExerciseIdForNavigation.subscribe(i=>{this.changeExerciseById(i)})),this.layoutService.subscribeToLayoutChanges().subscribe(()=>{this.layoutService.isBreakpointActive(se.extraLarge)?this.itemsVisiblePerSide=s.itemsVisiblePerSideDefault:this.layoutService.isBreakpointActive(se.large)?this.itemsVisiblePerSide=3:this.layoutService.isBreakpointActive(se.medium)?this.itemsVisiblePerSide=1:this.itemsVisiblePerSide=0});let e=this.examSessions&&this.examSessions.length>0&&this.examSessions[0].initialSession;e||e==null||this.exercises.filter(i=>i.type===v.PROGRAMMING&&i.studentParticipations).forEach(i=>{let t=[_i.PARTICIPATION,i.studentParticipations[0]];this.conflictService.setDomain(t),this.repositoryService.setDomain(t),this.repositoryService.getStatus().pipe(M(r=>Object.values(ge).find(o=>o===r.repositoryStatus))).subscribe(r=>{let o=$.getSubmissionForExercise(i);r===ge.UNCOMMITTED_CHANGES&&o&&(o.isSynced=!1)})})}ngAfterViewInit(){setTimeout(()=>{let e=document.querySelector("jhi-navbar")?.offsetHeight;document.documentElement.style.setProperty("--header-height",`${e}px`)})}getExerciseButtonTooltip(e){return this.examParticipationService.getExerciseButtonTooltip(e)}triggerExamAboutToEnd(){this.saveExercise(!1),this.examAboutToEnd.emit()}changePage(e,i,t,r){if(e)e&&(this.exerciseIndex=-1,this.onPageChanged.emit({overViewChange:!0,exercise:void 0,forceSave:!1}));else{if(i>this.exercises.length-1||i<0)return;this.exerciseIndex=i,this.onPageChanged.emit({overViewChange:!1,exercise:this.exercises[this.exerciseIndex],forceSave:!!t,submission:r})}this.setExerciseButtonStatus(this.exerciseIndex)}changeExerciseById(e){let i=this.exercises.findIndex(t=>t.id===e);this.changePage(!1,i,!0)}saveExercise(e=!0){let i=this.exerciseIndex+1,t=$.getSubmissionForExercise(this.exercises[this.exerciseIndex]);t&&this.exercises[this.exerciseIndex].type!==v.PROGRAMMING&&(t.submitted=!0),e&&(i>this.exercises.length-1?this.changePage(!1,this.exerciseIndex,!0):this.changePage(!1,i,!0))}isProgrammingExercise(){return this.exercises[this.exerciseIndex].type===v.PROGRAMMING}isFileUploadExercise(){return this.exercises[this.exerciseIndex].type===v.FILE_UPLOAD}getOverviewStatus(){return this.overviewPageOpen?"active":""}setExerciseButtonStatus(e){if(this.icon=_e,this.examTimeLineView)return this.exerciseIndex===e?"synced active":"synced";this.icon=pe;let i=this.exercises[e],t=$.getSubmissionForExercise(i);return t?(t.submitted&&(this.icon=_e),t.isSynced||this.isOnlyOfflineIDE(i)?e===this.exerciseIndex&&!this.overviewPageOpen?"synced active":"synced":(this.icon=pe,"notSynced")):"synced"}isOnlyOfflineIDE(e){if(e instanceof ci){let i=e;return i.allowOfflineIde===!0&&i.allowOnlineEditor===!1}return!1}handInEarly(){this.onExamHandInEarly.emit()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=R({type:s,selectors:[["jhi-exam-navigation-bar"]],inputs:{exercises:"exercises",exerciseIndex:"exerciseIndex",endDate:"endDate",overviewPageOpen:"overviewPageOpen",examSessions:"examSessions",examTimeLineView:"examTimeLineView"},outputs:{onPageChanged:"onPageChanged",examAboutToEnd:"examAboutToEnd",onExamHandInEarly:"onExamHandInEarly"},decls:55,vars:7,consts:[[1,"row","justify-content-between","align-items-start","exam-navigation","pt-3"],[1,"col","m-0"],[1,"mt-2"],[1,"col"],[1,"d-flex","justify-content-center"],[1,"navigation-item","overview"],[1,"navigation-item"],[1,"btn","btn-secondary","w-100",3,"click","disabled"],["aria-hidden","true"],[1,"sr-only"],["jhiTranslate","artemisApp.examParticipation.progress",1,"col","d-none","d-lg-block","h3","m-0","text-overflow",3,"translateValues"],["jhiTranslate","artemisApp.examParticipation.progressSmall",1,"col","d-block","d-lg-none","h3","m-0","text-overflow",2,"flex","0.2",3,"translateValues"],["jhiTranslate","artemisApp.examParticipation.examOverview",1,"h3","m-0","text-overflow","d-block","col"],[1,"btn","btn-primary","w-100","synced",3,"click","ngClass","ngbTooltip"],[3,"icon"],[1,"btn","btn-primary","w-100",3,"click","id","ngClass","ngbTooltip"],[1,"exerciseIndex"],[1,"row","justify-content-end","align-items-start","pe-2"],[1,"d-flex","mb-2","justify-content-end"],["id","hand-in-early","jhiTranslate","artemisApp.examParticipation.handInEarly",1,"btn","btn-danger","ms-2",3,"click"],[1,"ms-3","mb-2"],[1,"d-flex","justify-content-end","mx-0",3,"timerAboutToEnd","criticalTime","endDate"],["id","save",1,"btn","btn-primary",3,"click"]],template:function(i,t){i&1&&(d(0,"div",0),n(1,`
    `),d(2,"div",1),n(3,`
        `),x(4,Ni,3,4)(5,Li,3,4)(6,Wi,3,0),d(7,"div",2),n(8,`
            `),_(9,"jhi-exam-live-events-button"),n(10,`
        `),l(),n(11,`
    `),l(),n(12,`
    `),d(13,"div",3),n(14,`
        `),d(15,"div",4),n(16,`
            `),n(17,`
            `),d(18,"div",5),n(19,`
                `),x(20,ji,7,5),l(),n(21,`
            `),d(22,"div",6),n(23,`
                `),d(24,"button",7),b("click",function(){return t.changePage(!1,t.exerciseIndex-1,!1)}),n(25,`
                    `),d(26,"span",8),n(27,"\xAB"),l(),n(28,`
                    `),d(29,"span",9),n(30,"Previous"),l(),n(31,`
                `),l(),n(32,`
            `),l(),n(33,`
            `),U(34,Xi,2,1,null,null,Y),d(36,"div",6),n(37,`
                `),d(38,"button",7),b("click",function(){return t.changePage(!1,t.overviewPageOpen?0:t.exerciseIndex+1,!1)}),n(39,`
                    `),d(40,"span",8),n(41,"\xBB"),l(),n(42,`
                    `),d(43,"span",9),n(44,"Next"),l(),n(45,`
                `),l(),n(46,`
            `),l(),n(47,`
        `),l(),n(48,`
    `),l(),n(49,`
    `),d(50,"div",3),n(51,`
        `),x(52,$i,15,3),l(),n(53,`
`),l(),n(54,`
`)),i&2&&(a(4),f(t.exercises&&t.exercises.length>0&&!t.overviewPageOpen?4:-1),a(),f(t.exercises&&t.exercises.length>0&&!t.overviewPageOpen?5:-1),a(),f(t.overviewPageOpen?6:-1),a(14),f(t.examTimeLineView?-1:20),a(4),p("disabled",t.exerciseIndex<=0),a(10),B(t.exercises),a(4),p("disabled",t.exerciseIndex>=t.exercises.length-1||t.exerciseIndex<0),a(14),f(t.examTimeLineView?-1:52))},dependencies:[j,Ei,Xe,ie,ai,Ii,te],styles:[".exam-navigation[_ngcontent-%COMP%]{background:var(--exam-navigation-bar-background-color);margin:-1rem -1rem 1rem;z-index:50}.navigation-item[_ngcontent-%COMP%]{margin-left:.1rem;margin-right:.1rem;width:3rem}.text-overflow[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.synced[_ngcontent-%COMP%]{color:var(--exam-navigation-bar-synced-color);background-color:var(--exam-navigation-bar-synced-background-color)}.notSynced[_ngcontent-%COMP%]{color:var(--exam-navigation-bar-synced-color);background-color:var(--exam-navigation-bar-not-synced-background-color)}.inactive[_ngcontent-%COMP%]{background-color:var(--exam-navigation-bar-inactive-background)}.active[_ngcontent-%COMP%]{background-color:var(--exam-navigation-bar-active-background)}.exerciseIndex[_ngcontent-%COMP%]{color:var(--exam-navigation-bar-exercise-index-color);text-align:center;font-size:18px;font-weight:700}.overview[_ngcontent-%COMP%]{margin-right:20px}"]})}return s})();var re=class{id;submission;createdDate;content};var Pi=(()=>{class s{http=u(He);resourceUrl="api/exercise/submissions";findAllSubmissionVersionsOfSubmission(e){return this.http.get(`${this.resourceUrl}/${e}/versions`).pipe(M(i=>this.convertCreatedDatesFromServer(i)))}convertCreatedDatesFromServer(e){return e.map(i=>Ee(Ce({},i),{createdDate:ni(i.createdDate)}))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=Pe({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Gi=s=>({currentCommitHash:s}),Qi=s=>({previousCommitHash:s});function qi(s,h){if(s&1&&(n(0,`
            `),_(1,"jhi-included-in-score-badge",2),n(2,`
        `)),s&2){let e=m();a(),p("includedInOverallScore",e.exercise.includedInOverallScore)}}function Zi(s,h){if(s&1&&(n(0,`
                `),_(1,"span",6),n(2,`
            `)),s&2){let e=m(2);a(),p("translateValues",H(1,Qi,e.previousSubmission==null?null:e.previousSubmission.commitHash))}}function Ki(s,h){s&1&&(n(0,`
                `),_(1,"span",7),n(2,`
            `))}function Yi(s,h){if(s&1){let e=k();n(0,`
                    `),d(1,"jhi-button",8),b("onClick",function(){T(e);let t=m(2);return C(t.showGitDiff())}),l(),n(2,`
                `)}if(s&2){let e=m(2);a(),p("featureToggle",e.FeatureToggle.ProgrammingExercises)("isLoading",e.isLoadingDiffReport)("btnSize",e.ButtonSize.SMALL)("icon",e.faCodeCompare)("title","artemisApp.programmingExercise.diffReport.button")("tooltip","artemisApp.programmingExercise.diffReport.tooltipBetweenSubmissions")}}function Ji(s,h){if(s&1&&(n(0,`
    `),d(1,"div"),n(2,`
        `),d(3,"dt"),n(4,`
            `),_(5,"span",3),n(6,`
            `),x(7,Zi,3,3)(8,Ki,3,0),l(),n(9,`
        `),d(10,"dd"),n(11,`
            `),d(12,"div",4),n(13,`
                `),_(14,"jhi-git-diff-line-stat",5),P(15,"artemisTranslate"),n(16,`
                `),x(17,Yi,3,6),l(),n(18,`
        `),l(),n(19,`
    `),l(),n(20,`
`)),s&2){let e=m();a(5),p("translateValues",H(8,Gi,e.currentSubmission==null?null:e.currentSubmission.commitHash)),a(2),f(e.previousSubmission?7:8),a(7),We("ngbTooltip",A(15,6,"artemisApp.programmingExercise.diffReport.lineStatTooltipExamTimeline")),p("addedLineCount",e.addedLineCount)("removedLineCount",e.removedLineCount),a(3),f(e.addedLineCount>0||e.removedLineCount>0?17:-1)}}var Ai=(()=>{class s extends G{programmingExerciseService=u(fi);modalService=u(Je);cachedRepositoryFilesService=u(xi);exercise;previousSubmission;currentSubmission;studentParticipation;submissions;cachedDiffReports=new Map;cachedDiffReportsChange=new y;exerciseIdSubject=new Q;isLoadingDiffReport;addedLineCount;removedLineCount;cachedRepositoryFiles=new Map;exerciseType=v.PROGRAMMING;exerciseIdSubscription;FeatureToggle=ei;ButtonSize=oi;faCodeCompare=ti;IncludedInOverallScore=si;ngOnInit(){this.exerciseIdSubscription=this.exerciseIdSubject.pipe(Re(200)).subscribe(()=>{let e=this.calculateMapKey();if(this.cachedDiffReports.has(e)){let i=this.cachedDiffReports.get(e);this.assignPropertiesToReportAndCalculateLineCount(i)}else this.loadGitDiffReport()})}ngOnDestroy(){this.exerciseIdSubscription?.unsubscribe()}loadGitDiffReport(){this.isLoadingDiffReport=!0;let e;this.previousSubmission?e=this.programmingExerciseService.getDiffReportForSubmissions(this.exercise.id,this.previousSubmission.id,this.currentSubmission.id):e=this.programmingExerciseService.getDiffReportForSubmissionWithTemplate(this.exercise.id,this.currentSubmission.id);let i=this.calculateMapKey();e.pipe(we(1)).subscribe(t=>{t&&(this.assignPropertiesToReportAndCalculateLineCount(t),this.cachedDiffReports.set(i,t),this.cachedDiffReportsChange.emit(this.cachedDiffReports)),this.isLoadingDiffReport=!1})}assignPropertiesToReportAndCalculateLineCount(e){this.exercise.gitDiffReport=e,e.programmingExercise=this.exercise,e.participationIdForLeftCommit=this.previousSubmission?.participation?.id,e.participationIdForRightCommit=this.currentSubmission.participation?.id,e.leftCommitHash=this.previousSubmission?.commitHash,e.rightCommitHash=this.currentSubmission.commitHash,this.calculateLineCount(e)}calculateLineCount(e){this.addedLineCount=e?.entries?.map(i=>i.lineCount).filter(i=>i).map(i=>i).reduce((i,t)=>i+t,0)??0,this.removedLineCount=e?.entries?.map(i=>i.previousLineCount).filter(i=>i).map(i=>i).reduce((i,t)=>i+t,0)??0}showGitDiff(){let e=this.modalService.open(be,{windowClass:be.WINDOW_CLASS});e.componentInstance.report=O(this.exercise.gitDiffReport),e.componentInstance.diffForTemplateAndSolution=O(!1),e.componentInstance.cachedRepositoryFiles=O(this.cachedRepositoryFiles),this.cachedRepositoryFilesService.getCachedRepositoryFilesObservable().subscribe(i=>{this.cachedRepositoryFiles=i})}calculateMapKey(){return JSON.stringify([this.previousSubmission?.id,this.currentSubmission.id])}getExercise(){return this.exercise}getExerciseId(){return this.exercise.id}getSubmission(){return this.currentSubmission}hasUnsavedChanges(){return!1}setSubmissionVersion(e){this.submissionVersion=e}updateSubmissionFromView(){}updateViewFromSubmission(){}static \u0275fac=(()=>{let e;return function(t){return(e||(e=Ae(s)))(t||s)}})();static \u0275cmp=R({type:s,selectors:[["jhi-programming-exam-diff"]],inputs:{exercise:"exercise",previousSubmission:"previousSubmission",currentSubmission:"currentSubmission",studentParticipation:"studentParticipation",submissions:"submissions",cachedDiffReports:"cachedDiffReports",exerciseIdSubject:"exerciseIdSubject"},outputs:{cachedDiffReportsChange:"cachedDiffReportsChange"},features:[N([{provide:G,useExisting:s}]),oe],decls:11,vars:12,consts:[[1,"exercise-title"],[1,"mb-2",3,"currentSubmissionHash","previousSubmissionHash","participationId","submissions","exerciseProjectKey"],[3,"includedInOverallScore"],["jhiTranslate","artemisApp.programmingExercise.diffReport.lineStatBetweenSubmissionsCurrentSubmissionLabel",3,"translateValues"],[1,"fw-bold"],[3,"addedLineCount","removedLineCount","ngbTooltip"],["jhiTranslate","artemisApp.programmingExercise.diffReport.lineStatBetweenSubmissionsPreviousSubmissionLabel",3,"translateValues"],["jhiTranslate","artemisApp.programmingExercise.diffReport.lineStatBetweenSubmissionsTemplateLabel"],[1,"ms-2",3,"onClick","featureToggle","isLoading","btnSize","icon","title","tooltip"]],template:function(i,t){i&1&&(d(0,"h4",0),n(1),d(2,"span"),n(3),P(4,"artemisTranslate"),x(5,qi,3,1),l(),n(6,`
`),l(),n(7,`
`),_(8,"jhi-commits-info",1),n(9,`
`),x(10,Ji,21,10)),i&2&&(a(),F(`
    `,t.exercise.title,`
    `),a(2),ze("[",t.exercise.maxPoints," ",A(4,10,"artemisApp.examParticipation.exercisePoints"),`]
        `),a(2),f(t.exercise.includedInOverallScore!==t.IncludedInOverallScore.INCLUDED_COMPLETELY?5:-1),a(3),p("currentSubmissionHash",t.currentSubmission==null?null:t.currentSubmission.commitHash)("previousSubmissionHash",t.previousSubmission==null?null:t.previousSubmission.commitHash)("participationId",t.studentParticipation==null?null:t.studentParticipation.id)("submissions",t.submissions)("exerciseProjectKey",t.exercise==null?null:t.exercise.projectKey),a(2),f(t.exercise!=null&&t.exercise.gitDiffReport?10:-1))},dependencies:[pi,Si,j,gi,ie,di,te],encapsulation:2})}return s})();var et=["knob"],it=["valueIndicatorContainer"];function tt(s,h){if(s&1&&(d(0,"div",2,1)(2,"div",5)(3,"span",6),n(4),l()()()),s&2){let e=m();a(4),J(e.valueIndicatorText)}}var st=["trackActive"],nt=["*"];function rt(s,h){if(s&1&&_(0,"div"),s&2){let e=h.$implicit,i=h.$index,t=m(3);de(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Be("transform",t._calcTickMarkTransform(i))}}function at(s,h){if(s&1&&U(0,rt,1,4,"div",8,Fe),s&2){let e=m(2);B(e._tickMarks)}}function ot(s,h){if(s&1&&(d(0,"div",6,1),x(2,at,2,0),l()),s&2){let e=m();a(2),f(e._cachedWidth?2:-1)}}function dt(s,h){if(s&1&&_(0,"mat-slider-visual-thumb",7),s&2){let e=m();p("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var c=function(s){return s[s.START=1]="START",s[s.END=2]="END",s}(c||{}),z=function(s){return s[s.ACTIVE=0]="ACTIVE",s[s.INACTIVE=1]="INACTIVE",s}(z||{}),ve=new X("_MatSlider"),Di=new X("_MatSliderThumb"),lt=new X("_MatSliderRangeThumb"),Oi=new X("_MatSliderVisualThumb");var ct=(()=>{class s{_cdr=u(L);_ngZone=u(q);_slider=u(ve);_renderer=u(ae);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=u(Z).nativeElement;_platform=u(ee);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl,t=this._renderer;this._listenerCleanups=[t.listen(i,"pointermove",this._onPointerMove),t.listen(i,"pointerdown",this._onDragStart),t.listen(i,"pointerup",this._onDragEnd),t.listen(i,"pointerleave",this._onMouseLeave),t.listen(i,"focus",this._onFocus),t.listen(i,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),t=this._slider._isCursorOnSliderThumb(e,i);this._isHovered=t,t?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===fe.FADING_IN||e?.state===fe.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===c.START?c.END:c.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===c.START?c.END:c.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=R({type:s,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,t){if(i&1&&(w(xe,5),w(et,5),w(it,5)),i&2){let r;E(r=I())&&(t._ripple=r.first),E(r=I())&&(t._knob=r.first),E(r=I())&&(t._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[N([{provide:Oi,useExisting:s}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,t){i&1&&(x(0,tt,5,1,"div",2),_(1,"div",3,0)(3,"div",4)),i&2&&(f(t.discrete?0:-1),a(3),p("matRippleDisabled",!0))},dependencies:[xe],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return s})(),Ui=(()=>{class s{_ngZone=u(q);_cdr=u(L);_elementRef=u(Z);_dir=u($e,{optional:!0});_globalRippleOptions=u(ui,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let i=this._getInput(c.END),t=this._getInput(c.START);i&&(i.disabled=this._disabled),t&&(t.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(e){let i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let i=this._getInput(c.END),t=this._getInput(c.START),r=i.value,o=t.value;t.min=e.new,i.min=Math.max(e.new,t.value),t.max=Math.min(i.max,i.value),t._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,t):this._onTranslateXChangeBySideEffect(t,i),r!==i.value&&this._onValueChange(i),o!==t.value&&this._onValueChange(t)}_updateMinNonRange(e){let i=this._getInput(c.END);if(i){let t=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),t!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){let i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(e){let i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let i=this._getInput(c.END),t=this._getInput(c.START),r=i.value,o=t.value;i.max=e.new,t.max=Math.min(e.new,i.value),i.min=t.value,i._updateWidthInactive(),t._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(t,i):this._onTranslateXChangeBySideEffect(i,t),r!==i.value&&this._onValueChange(i),o!==t.value&&this._onValueChange(t)}_updateMaxNonRange(e){let i=this._getInput(c.END);if(i){let t=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),t!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){let i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(c.END),i=this._getInput(c.START),t=e.value,r=i.value,o=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),t!==e.value&&this._onValueChange(e),r!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let e=this._getInput(c.END);if(e){let i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=u(ee);constructor(){u(li).load(mi);let e=u(De,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(c.END),i=this._getInput(c.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();let t=this._getThumb(c.END);this._rippleRadius=t._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(c.END),i=this._getInput(c.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(c.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(c.START)._isActive||this._getThumb(c.END)._isActive}_getValue(e=c.END){let i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(c.START)?._skipUIUpdate||this._getInput(c.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){let i=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-i:i}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(c.END),i=this._getInput(c.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{let e=this._getInput(c.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(c.START),i=this._getInput(c.END);return!e||!i?!1:i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let i=e.getSibling(),t=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),t._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let i=this._getThumb(e.thumbPosition===c.END?c.END:c.START);i._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===c.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let t=this._getThumb(e.thumbPosition);i.length<3?t._hostElement.classList.add("mdc-slider__thumb--short-value"):t._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(c.END),i=this._getInput(c.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,t=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*t}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let i=e.getSibling();if(!i||!this._cachedWidth)return;let t=Math.abs(i.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${t})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${t})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let i=this._getValue(),t=Math.max(Math.round((i-this.min)/e),0)+1,r=Math.max(Math.round((this.max-i)/e),0)-1;this._isRtl?t++:r++,this._tickMarks=Array(t).fill(z.ACTIVE).concat(Array(r).fill(z.INACTIVE))}_updateTickMarkUIRange(e){let i=this._getValue(),t=this._getValue(c.START),r=Math.max(Math.round((t-this.min)/e),0),o=Math.max(Math.round((i-t)/e)+1,0),g=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(r).fill(z.INACTIVE).concat(Array(o).fill(z.ACTIVE),Array(g).fill(z.INACTIVE))}_getInput(e){if(e===c.END&&this._input)return this._input;if(this._inputs?.length)return e===c.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===c.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){let t=i.width/2,r=i.x+t,o=i.y+t,g=e.clientX-r,S=e.clientY-o;return Math.pow(g,2)+Math.pow(S,2)<Math.pow(t,2)}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=R({type:s,selectors:[["mat-slider"]],contentQueries:function(i,t,r){if(i&1&&(le(r,Di,5),le(r,lt,4)),i&2){let o;E(o=I())&&(t._input=o.first),E(o=I())&&(t._inputs=o)}},viewQuery:function(i,t){if(i&1&&(w(st,5),w(Oi,5)),i&2){let r;E(r=I())&&(t._trackActive=r.first),E(r=I())&&(t._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,t){i&2&&(de("mat-"+(t.color||"primary")),K("mdc-slider--range",t._isRange)("mdc-slider--disabled",t.disabled)("mdc-slider--discrete",t.discrete)("mdc-slider--tick-marks",t.showTickMarks)("_mat-animation-noopable",t._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",W],discrete:[2,"discrete","discrete",W],showTickMarks:[2,"showTickMarks","showTickMarks",W],min:[2,"min","min",V],color:"color",disableRipple:[2,"disableRipple","disableRipple",W],max:[2,"max","max",V],step:[2,"step","step",V],displayWith:"displayWith"},exportAs:["matSlider"],features:[N([{provide:ve,useExisting:s}])],ngContentSelectors:nt,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,t){i&1&&(Ne(),Le(0),d(1,"div",2),_(2,"div",3),d(3,"div",4),_(4,"div",5,0),l(),x(6,ot,3,1,"div",6),l(),x(7,dt,1,3,"mat-slider-visual-thumb",7),_(8,"mat-slider-visual-thumb",7)),i&2&&(a(6),f(t.showTickMarks?6:-1),a(),f(t._isRange?7:-1),a(),p("discrete",t.discrete)("thumbPosition",2)("valueIndicatorText",t.endValueIndicatorText))},dependencies:[ct],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return s})();var mt={provide:Qe,useExisting:Me(()=>Se),multi:!0};var Se=(()=>{class s{_ngZone=u(q);_elementRef=u(Z);_cdr=u(L);_slider=u(ve);_platform=u(ee);_listenerCleanups;get value(){return V(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let i=e+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new y;dragStart=new y;dragEnd=new y;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=c.END;get min(){return V(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return V(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return V(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return W(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=O("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Q;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=u(ae);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let i=e.clientX-this._slider._cachedLeft,t=this._slider._cachedWidth,r=this._slider.step===0?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/r),g=this._slider._isRtl?1-i/t:i/t,Bi=Math.round(g*o)/o*(this._slider.max-this._slider.min)+this._slider.min,Te=Math.round(Bi/r)*r,Fi=this.value;if(Te===Fi){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=Te,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let i=this._tickMarkOffset,t=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,t),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||s)};static \u0275dir=Oe({type:s,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,t){i&1&&b("change",function(){return t._onChange()})("input",function(){return t._onInput()})("blur",function(){return t._onBlur()})("focus",function(){return t._onFocus()}),i&2&&Ue("aria-valuetext",t._valuetext())},inputs:{value:[2,"value","value",V]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[N([mt,{provide:Di,useExisting:s}])]})}return s})();var ut=["examNavigationBar"],ht=s=>({username:s});function pt(s,h){if(s&1&&(n(0,`
                                `),_(1,"jhi-quiz-submission-exam",8),n(2,`
                            `)),s&2){let e=m(3).$implicit;a(),p("exercise",e)("quizConfiguration",e)("studentSubmission",e.studentParticipations[0].submissions[0])("readonly",!0)("examTimeline",!0)}}function _t(s,h){if(s&1&&(n(0,`
                                `),_(1,"jhi-file-upload-submission-exam",9),n(2,`
                            `)),s&2){let e=m(3).$implicit;a(),p("exercise",e)("studentSubmission",e.studentParticipations[0].submissions[0])("readonly",!0)("examTimeline",!0)}}function ft(s,h){if(s&1&&(n(0,`
                                `),_(1,"jhi-text-editor-exam",9),n(2,`
                            `)),s&2){let e=m(3).$implicit;a(),p("exercise",e)("studentSubmission",e.studentParticipations[0].submissions[0])("readonly",!0)("examTimeline",!0)}}function xt(s,h){if(s&1&&(n(0,`
                                `),_(1,"jhi-modeling-submission-exam",9),n(2,`
                            `)),s&2){let e=m(3).$implicit;a(),p("exercise",e)("studentSubmission",e.studentParticipations[0].submissions[0])("readonly",!0)("examTimeline",!0)}}function gt(s,h){if(s&1){let e=k();n(0,`
                                `),d(1,"jhi-programming-exam-diff",10),ue("cachedDiffReportsChange",function(t){T(e);let r=m(5);return me(r.cachedDiffReports,t)||(r.cachedDiffReports=t),C(t)}),l(),n(2,`
                            `)}if(s&2){let e=m(3).$implicit,i=m(2);a(),p("exercise",e)("studentParticipation",e.studentParticipations[0]),ce("cachedDiffReports",i.cachedDiffReports)}}function bt(s,h){if(s&1&&(n(0,`
                    `),d(1,"div",7),n(2,`
                        `),x(3,pt,3,5)(4,_t,3,4)(5,ft,3,4)(6,xt,3,4)(7,gt,3,3),n(8,`
                    `),l(),n(9,`
                `)),s&2){let e,i=m(2),t=i.$implicit,r=i.$index,o=m(2);a(),p("hidden",r!==o.activePageIndex),a(2),f((e=t.type)===o.ExerciseType.QUIZ?3:e===o.ExerciseType.FILE_UPLOAD?4:e===o.ExerciseType.TEXT?5:e===o.ExerciseType.MODELING?6:e===o.ExerciseType.PROGRAMMING?7:-1)}}function vt(s,h){if(s&1&&(n(0,`
                `),x(1,bt,10,2)),s&2){let e=m().$index,i=m(2);a(),f(i.pageComponentVisited[e]?1:-1)}}function St(s,h){if(s&1&&(n(0,`
            `),x(1,vt,2,1)),s&2){let e=h.$implicit;a(),f(e&&e.studentParticipations&&e.studentParticipations[0]?1:-1)}}function Tt(s,h){if(s&1){let e=k();n(0,`
    `),d(1,"div"),n(2,`
        `),d(3,"div",3),n(4,`
            `),d(5,"h5"),n(6),l(),n(7,`
            `),d(8,"mat-slider",4),b("change",function(){T(e);let t=m();return C(t.onSliderInputChange())}),n(9,`
                `),d(10,"input",5,0),ue("ngModelChange",function(t){T(e);let r=m();return me(r.timestampIndex,t)||(r.timestampIndex=t),C(t)}),l(),n(12,`
            `),l(),n(13,`
        `),l(),n(14,`
        `),d(15,"jhi-exam-navigation-bar",6,1),b("onPageChanged",function(t){T(e);let r=m();return C(r.onPageChange(t))}),l(),n(17,`
        `),n(18,`
        `),U(19,St,2,1,null,null,Y),l(),n(21,`
`)}if(s&2){let e=m();a(6),F("Selected Timestamp: ",e.displayCurrentTimestamp(),""),a(2),p("min",0)("max",e.submissionTimeStamps.length-1)("step",1)("showTickMarks",!0),a(2),ce("ngModel",e.timestampIndex),a(5),p("exercises",e.studentExam==null?null:e.studentExam.exercises)("exerciseIndex",e.exerciseIndex)("examTimeLineView",!0),a(4),B(e.studentExam.exercises)}}var Tn=(()=>{class s{activatedRoute=u(Ge);submissionService=u(ri);submissionVersionService=u(Pi);cdr=u(L);ExerciseType=v;SubmissionVersion=re;pageComponentVisited;selectedTimestamp;timestampIndex=0;studentExam;exerciseIndex;activeExamPage=new Ti;submissionTimeStamps=[];submissionVersions=[];programmingSubmissions=[];fileUploadSubmissions=[];currentExercise;currentSubmission;changesSubscription;cachedDiffReports=new Map;currentPageComponents;examNavigationBarComponent;activatedRouteSubscription;ngOnInit(){this.activatedRouteSubscription=this.activatedRoute.data.subscribe(({studentExam:e})=>{this.studentExam=e.studentExam}),this.exerciseIndex=0,this.pageComponentVisited=new Array(this.studentExam.exercises.length).fill(!1),this.retrieveSubmissionDataAndTimeStamps().subscribe(e=>{e.flat().forEach(r=>{if(this.isSubmissionVersion(r)){let o=r;this.submissionVersions.push(o),this.submissionTimeStamps.push(o.createdDate)}else if(this.isFileUploadSubmission(r)){let o=r;this.fileUploadSubmissions.push(o),this.submissionTimeStamps.push(o.submissionDate)}else{let o=r;this.programmingSubmissions.push(o),this.submissionTimeStamps.push(o.submissionDate)}}),this.sortTimeStamps(),this.selectedTimestamp=this.submissionTimeStamps[0]?.toDate().getTime()??0;let t=this.findFirstSubmission();this.currentSubmission=t,this.exerciseIndex=this.findExerciseIndex(t),this.examNavigationBarComponent.changePage(!1,this.exerciseIndex,!1,t)})}ngAfterViewInit(){this.changesSubscription=this.currentPageComponents.changes.subscribe(()=>{this.updateSubmissionOrSubmissionVersionInView()})}ngOnDestroy(){this.activatedRouteSubscription?.unsubscribe(),this.changesSubscription?.unsubscribe()}updateProgrammingExerciseView(){let e=this.activePageComponent;e&&(e.studentParticipation=this.currentExercise.studentParticipations[0],e.exercise=this.currentExercise,e.currentSubmission=this.currentSubmission,e.previousSubmission=this.findPreviousProgrammingSubmission(this.currentExercise,this.currentSubmission),e.submissions=this.programmingSubmissions.filter(i=>i.participation?.exercise?.id===this.currentExercise?.id),e.exerciseIdSubject.next(this.currentExercise.id))}findPreviousProgrammingSubmission(e,i){let t=i.submissionDate,r=1/0,o;for(let g of this.programmingSubmissions){let S=Math.abs(g.submissionDate.diff(t));g.submissionDate.isBefore(t)&&S<r&&g.participation?.exercise?.id===e.id&&(r=S,o=g)}return o}updateFileUploadExerciseView(){let e=this.activePageComponent;e&&(e.studentSubmission.update(()=>this.currentSubmission),e.updateViewFromSubmission())}displayCurrentTimestamp(){return D(this.selectedTimestamp).format("HH:mm:ss")}isSubmissionVersion(e){if(!e)return!1;let i=e;return i.id&&i.createdDate&&i.submission}isFileUploadSubmission(e){if(!e)return!1;let i=e;return!!i.id&&i.submissionDate&&i.filePath}retrieveSubmissionDataAndTimeStamps(){let e=[];return this.studentExam.exercises?.forEach(i=>{if(i.type===v.PROGRAMMING){let t=i.studentParticipations[0].id,r=this.submissionService.findAllSubmissionsOfParticipation(t).pipe(M(({body:o})=>o));e.push(r)}else if(i.type===v.FILE_UPLOAD){let t=i.studentParticipations[0].id;e.push(this.submissionService.findAllSubmissionsOfParticipation(t).pipe(M(({body:r})=>r)))}else e.push(this.submissionVersionService.findAllSubmissionVersionsOfSubmission(i.studentParticipations[0].submissions[0].id).pipe(Ie(t=>t),ke()))}),ye([...e]).pipe(Ve(()=>this.cdr.detectChanges()))}sortTimeStamps(){this.submissionTimeStamps=this.submissionTimeStamps.sort((e,i)=>e.isAfter(i)?1:-1)}onPageChange(e){let i=this.activePageComponent;if(i&&i.onDeactivate(),e.submission||e.exercise!==this.currentExercise&&(e.submission=this.findSubmissionForExerciseClosestToCurrentTimeStampForExercise(e.exercise)),e.submission){if(this.isSubmissionVersion(e.submission)){let t=e.submission;this.selectedTimestamp=t.createdDate.toDate().getTime()}else if(this.isFileUploadSubmission(e.submission)){let t=e.submission;this.selectedTimestamp=t.submissionDate.toDate().getTime()}else{let t=e.submission;this.selectedTimestamp=t.submissionDate.toDate().getTime()}this.currentSubmission=e.submission,this.initializeExercise(e.exercise,e.submission)}}findFirstSubmission(){let e=this.submissionVersions.find(i=>i.createdDate.isSame(this.submissionTimeStamps[0]));if(!e){let i=this.programmingSubmissions.find(t=>t.submissionDate?.isSame(this.submissionTimeStamps[0]));return i||this.fileUploadSubmissions.find(t=>t.submissionDate?.isSame(this.submissionTimeStamps[0]))}return e}initializeExercise(e,i){this.activeExamPage.exercise=e,this.exerciseIndex=this.studentExam.exercises.findIndex(t=>t.id===e.id),this.currentExercise=e,this.currentSubmission=i,this.activateActiveComponent(),this.updateSubmissionOrSubmissionVersionInView()}updateSubmissionOrSubmissionVersionInView(){this.currentExercise?.type===v.PROGRAMMING?this.updateProgrammingExerciseView():this.currentExercise?.type===v.FILE_UPLOAD?this.updateFileUploadExerciseView():this.activePageComponent?.setSubmissionVersion(this.currentSubmission)}activateActiveComponent(){this.pageComponentVisited[this.activePageIndex]=!0;let e=this.activePageComponent;e&&e.onActivate()}get activePageIndex(){return this.studentExam.exercises.findIndex(e=>e.id===this.activeExamPage.exercise?.id)}get activePageComponent(){return this.currentPageComponents.find(e=>e.getExercise().id===this.activeExamPage.exercise?.id)}onSliderInputChange(){this.selectedTimestamp=this.submissionTimeStamps[this.timestampIndex].toDate().getTime();let e=this.findCorrespondingSubmissionForTimestamp(this.selectedTimestamp);if(this.isSubmissionVersion(e)){let t=e;this.currentExercise=t.submission.participation?.exercise}else if(this.isFileUploadSubmission(e)){let t=e;this.currentExercise=t.participation?.exercise}else{let t=e;this.currentExercise=t.participation?.exercise}let i=this.studentExam.exercises.findIndex(t=>t.id===this.currentExercise?.id);this.exerciseIndex=i,this.currentSubmission=e,this.examNavigationBarComponent.changePage(!1,i,!1,e)}findCorrespondingSubmissionForTimestamp(e){let i=D(e);for(let t of this.submissionVersions)if(t.createdDate.isSame(i))return t;for(let t of this.programmingSubmissions)if(t.submissionDate?.isSame(i))return t;for(let t of this.fileUploadSubmissions)if(t.submissionDate?.isSame(i))return t}findSubmissionForExerciseClosestToCurrentTimeStampForExercise(e){let i=D(this.selectedTimestamp),t=1/0,r=0;if(e.type===v.PROGRAMMING)r=this.findClosestTimestampForExerciseInSubmissionArray(e,this.programmingSubmissions);else{if(e.type===v.FILE_UPLOAD)return this.fileUploadSubmissions.find(o=>o.participation?.exercise?.id===e.id);{let o=this.submissionVersions.filter(g=>g.submission?.participation?.exercise?.id===e.id).length;for(let g of this.submissionVersions)Math.abs(g.createdDate.diff(i))<t&&g.submission.participation?.exercise?.id===e.id&&(!g.createdDate.isSame(i)||o===1)&&(t=Math.abs(g.createdDate.diff(i)),r=g.createdDate.valueOf())}}return this.findCorrespondingSubmissionForTimestamp(r)}findClosestTimestampForExerciseInSubmissionArray(e,i){let t=D(this.selectedTimestamp),r=1/0,o=0,g=i.filter(S=>S.participation?.exercise?.id===e.id).length;for(let S of i)S.submissionDate.diff(t)<r&&S.participation?.exercise?.id===e.id&&(!S.submissionDate?.isSame(t)||g===1)&&(r=S.submissionDate.diff(t),o=S.submissionDate.valueOf());return o}findExerciseIndex(e){if(this.isSubmissionVersion(e)){let i=e;return this.studentExam.exercises.findIndex(t=>t.id===i.submission.participation?.exercise?.id)}else{let i=e;return this.studentExam.exercises.findIndex(t=>t.id===i.participation?.exercise?.id)}}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=R({type:s,selectors:[["jhi-student-exam-timeline"]],viewQuery:function(i,t){if(i&1&&(w(ut,5),w(G,5)),i&2){let r;E(r=I())&&(t.examNavigationBarComponent=r.first),E(r=I())&&(t.currentPageComponents=r)}},decls:3,vars:4,consts:[["slider",""],["examNavigationBar",""],["jhiTranslate","artemisApp.examTimeline.title",1,"mb-4",3,"translateValues"],[1,"custom-slider"],[1,"mat-slider","mb-5",3,"change","min","max","step","showTickMarks"],["matSliderThumb","",3,"ngModelChange","ngModel"],["id","exam-navigation-bar",1,"sticky-top","d-block",3,"onPageChanged","exercises","exerciseIndex","examTimeLineView"],[3,"hidden"],[3,"exercise","quizConfiguration","studentSubmission","readonly","examTimeline"],[3,"exercise","studentSubmission","readonly","examTimeline"],[3,"cachedDiffReportsChange","exercise","studentParticipation","cachedDiffReports"]],template:function(i,t){i&1&&(_(0,"h4",2),n(1,`
`),x(2,Tt,22,9)),i&2&&(p("translateValues",H(2,ht,t.studentExam.user.login)),a(2),f(t.studentExam?2:-1))},dependencies:[j,Ui,Se,Ye,qe,Ze,Ke,Mi,ki,wi,Ri,yi,Ai],styles:["[_nghost-%COMP%]  .custom-slider .mat-slider{width:98%}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track--active_fill{background-color:#dcdcdc;border:#fff}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track--inactive{background-color:#55637d}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track--active_fill, [_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track--inactive, [_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track--active, [_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__track{height:5px}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__thumb{background-color:#0db9f0;border:2px solid #fff;height:36px;width:36px;border-radius:50%;margin-top:6px;margin-left:8px}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__thumb-knob{background-color:#fff;border:4px solid #fff;height:8px;width:8px;border-radius:50%}[_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__tick-mark--active, [_nghost-%COMP%]  .custom-slider .mat-slider .mdc-slider__tick-mark--inactive{height:10px;width:10px;background-color:#dcdcdc;border-radius:50%}"]})}return s})();export{Tn as StudentExamTimelineComponent};
//# sourceMappingURL=student-exam-timeline.component-MZLBYNZR.js.map

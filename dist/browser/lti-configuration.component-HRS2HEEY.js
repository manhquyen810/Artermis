import{a as ut}from"./chunk-245YX7R6.js";import"./chunk-Z2YUBN6N.js";import{a as gt}from"./chunk-3I2WQJ2Z.js";import{a as xt}from"./chunk-OTCBNILH.js";import"./chunk-AOI2U3YC.js";import"./chunk-DLAFGQEJ.js";import{a as ct}from"./chunk-ZMTDPOTL.js";import{a as dt,b as st}from"./chunk-VRAVBLUK.js";import{b as mt}from"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{a as pt}from"./chunk-2QXIMOEO.js";import"./chunk-G3JOQOSD.js";import{A as X,B as $,C as J,D as Q,w as M,y as Y,z as q}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{K,i as F,k as G,n as H}from"./chunk-WA5GEAJB.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import{c as rt}from"./chunk-JXJXC4DZ.js";import{d as ot}from"./chunk-EDXSOKK5.js";import"./chunk-DID2YGL7.js";import{Bb as it,Lc as nt,Qa as tt,hb as et,q as Z,wd as at}from"./chunk-Z4VHWOB5.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as lt}from"./chunk-U54OSGNH.js";import{f as V,h as W,i as z}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{A as N,Ac as C,Bc as b,Db as a,Dc as h,Ea as f,Ma as x,Mc as v,Na as g,Oc as c,Sc as A,Tb as w,Zb as I,cd as k,dd as t,ed as s,f as j,kc as o,ld as y,md as _,nd as E,qd as B,rd as D,td as O,uc as U,vc as P,wc as R,xc as i,yc as n,zc as r}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var L=`${location.origin}/api/lti/public/lti13`,u={LTI13_DYNAMIC_REGISTRATION_URL:`${location.origin}/lti/dynamic-registration`,LTI13_DEEPLINK_REDIRECT_PATH:`${L}/deep-link`,TOOL_URL:`${location.origin}/courses`,KEYSET_URI:`${location.origin}/.well-known/jwks.json`,LTI13_LOGIN_INITIATION_PATH:`${L}/initiate-login`,LTI13_LOGIN_REDIRECT_PROXY_PATH:`${L}/auth-callback`};var St=()=>["/admin","lti-configuration","new"],_t=(p,S,e)=>({page:p,totalItems:S,itemsPerPage:e}),ht=p=>["/admin","lti-configuration",p,"edit"];function vt(p,S){if(p&1){let e=h();t(0,`
                                        `),i(1,"tr",46),t(2,`
                                            `),i(3,"td"),t(4),n(),t(5,`
                                            `),i(6,"td"),t(7),n(),t(8,`
                                            `),i(9,"td"),t(10),n(),t(11,`
                                            `),i(12,"td"),t(13),n(),t(14,`
                                            `),i(15,"td"),t(16),n(),t(17,`
                                            `),i(18,"td"),t(19),n(),t(20,`
                                            `),i(21,"td"),t(22),n(),t(23,`
                                            `),i(24,"td"),t(25),n(),t(26,`
                                            `),i(27,"td"),t(28,`
                                                `),i(29,"div",47),t(30,`
                                                    `),i(31,"div",48),t(32,`
                                                        `),i(33,"a",18),t(34,`
                                                            `),r(35,"fa-icon",19),t(36,`
                                                            `),r(37,"span",49),t(38,`
                                                        `),n(),t(39,`
                                                        `),i(40,"button",50),v("delete",function(){let l=x(e).$implicit,d=c(2);return g(d.deleteLtiPlatform(l.id))}),t(41,`
                                                            `),r(42,"fa-icon",19),t(43,`
                                                            `),r(44,"span",51),t(45,`
                                                        `),n(),t(46,`
                                                    `),n(),t(47,`
                                                `),n(),t(48,`
                                            `),n(),t(49,`
                                        `),n(),t(50,`
                                    `)}if(p&2){let e=S.$implicit,m=c(2);a(),A("id","platform-",e.id,""),a(3),s(e.id),a(3),s(e.customName),a(3),s(e.registrationId),a(3),s(e.clientId),a(3),s(e.originalUrl),a(3),s(e.authorizationUri),a(3),s(e.jwkSetUri),a(3),s(e.tokenUri),a(8),o("routerLink",D(16,ht,e.id)),a(2),o("icon",m.faPencilAlt),a(5),o("renderButtonStyle",!1)("renderButtonText",!1)("dialogError",m.dialogError$),a(2),o("icon",m.faTrash)}}function yt(p,S){if(p&1){let e=h();t(0,`
                `),r(1,"dt"),t(2,`
                `),i(3,"dt",11),t(4,`
                    `),r(5,"h4",12),t(6,`
                    `),r(7,"jhi-help-icon",13),t(8,`
                `),n(),t(9,`
                `),i(10,"dd"),t(11,`
                    `),i(12,"span"),t(13),n(),t(14,`
                    `),r(15,"jhi-copy-icon-button",14),t(16,`
                `),n(),t(17,`
                `),i(18,"dt",15),t(19,`
                    `),i(20,"div",2),t(21,`
                        `),r(22,"h4",16),t(23,`
                        `),r(24,"jhi-help-icon",17),t(25,`
                    `),n(),t(26,`
                    `),i(27,"div",2),t(28,`
                        `),i(29,"a",18),t(30,`
                            `),r(31,"fa-icon",19),t(32,`
                            `),r(33,"span",20),t(34,`
                        `),n(),t(35,`
                    `),n(),t(36,`
                `),n(),t(37,`
                `),i(38,"div",21),t(39,`
                    `),i(40,"div",22),t(41,`
                        `),i(42,"div",23),t(43,`
                            `),i(44,"table",24),t(45,`
                                `),i(46,"thead",25),t(47,`
                                    `),i(48,"tr",26),E("predicateChange",function(l){x(e);let d=c();return _(d.predicate,l)||(d.predicate=l),g(l)})("ascendingChange",function(l){x(e);let d=c();return _(d.reverse,l)||(d.reverse=l),g(l)}),v("sortChange",function(){x(e);let l=c();return g(l.sortRows())}),t(49,`
                                        `),i(50,"th",27),t(51,`
                                            `),r(52,"span",28),t(53,`
                                            `),r(54,"fa-icon",19),t(55,`
                                        `),n(),t(56,`
                                        `),i(57,"th",29),t(58,`
                                            `),r(59,"span",30),t(60,`
                                            `),r(61,"fa-icon",19),t(62,`
                                        `),n(),t(63,`
                                        `),i(64,"th",31),t(65,`
                                            `),r(66,"span",32),t(67,`
                                            `),r(68,"fa-icon",19),t(69,`
                                        `),n(),t(70,`
                                        `),i(71,"th",33),t(72,`
                                            `),r(73,"span",34),t(74,`
                                            `),r(75,"fa-icon",19),t(76,`
                                        `),n(),t(77,`
                                        `),i(78,"th",35),t(79,`
                                            `),r(80,"span",36),t(81,`
                                            `),r(82,"fa-icon",19),t(83,`
                                        `),n(),t(84,`
                                        `),i(85,"th",37),t(86,`
                                            `),r(87,"span",38),t(88,`
                                            `),r(89,"fa-icon",19),t(90,`
                                        `),n(),t(91,`
                                        `),i(92,"th",39),t(93,`
                                            `),r(94,"span",40),t(95,`
                                            `),r(96,"fa-icon",19),t(97,`
                                        `),n(),t(98,`
                                        `),i(99,"th",41),t(100,`
                                            `),r(101,"span",42),t(102,`
                                            `),r(103,"fa-icon",19),t(104,`
                                        `),n(),t(105,`
                                    `),n(),t(106,`
                                `),n(),t(107,`
                                `),i(108,"tbody"),t(109,`
                                    `),P(110,vt,51,18,null,null,U),n(),t(112,`
                            `),n(),t(113,`
                        `),n(),t(114,`
                        `),i(115,"div"),t(116,`
                            `),i(117,"div",43),t(118,`
                                `),r(119,"jhi-item-count",44),t(120,`
                            `),n(),t(121,`
                            `),i(122,"div",43),t(123,`
                                `),i(124,"ngb-pagination",45),E("pageChange",function(l){x(e);let d=c();return _(d.page,l)||(d.page=l),g(l)}),v("pageChange",function(){x(e);let l=c();return g(l.transition())}),n(),t(125,`
                            `),n(),t(126,`
                        `),n(),t(127,`
                    `),n(),t(128,`
                `),n(),t(129,`
            `)}if(p&2){let e=c();a(13),s(e.getDynamicRegistrationUrl()),a(2),o("copyText",e.getDynamicRegistrationUrl()),a(14),o("routerLink",B(22,St)),a(2),o("icon",e.faPlus),a(17),y("predicate",e.predicate)("ascending",e.reverse),a(6),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),o("icon",e.faSort),a(7),R(e.platforms),a(9),o("params",O(23,_t,e.page,e.totalItems,e.itemsPerPage)),a(5),o("collectionSize",e.totalItems),y("page",e.page),o("pageSize",e.itemsPerPage)("maxSize",5)("rotate",!0)("boundaryLinks",!0)("disabled",!1)}}function Et(p,S){if(p&1&&(t(0,`
                `),i(1,"dt"),t(2,`
                    `),r(3,"span",52),t(4,`
                `),n(),t(5,`
                `),i(6,"dd"),t(7,`
                    `),i(8,"span"),t(9),n(),t(10,`
                    `),r(11,"jhi-copy-icon-button",14),t(12,`
                `),n(),t(13,`
                `),i(14,"dt"),t(15,`
                    `),r(16,"span",36),t(17,`
                `),n(),t(18,`
                `),i(19,"dd"),t(20,`
                    `),i(21,"span"),t(22),n(),t(23,`
                    `),r(24,"jhi-copy-icon-button",14),t(25,`
                `),n(),t(26,`
                `),i(27,"dt"),t(28,`
                    `),r(29,"span",53),t(30,`
                `),n(),t(31,`
                `),i(32,"dd"),t(33,`
                    `),i(34,"span"),t(35),n(),t(36,`
                    `),r(37,"jhi-copy-icon-button",14),t(38,`
                `),n(),t(39,`
                `),i(40,"dt"),t(41,`
                    `),r(42,"span",54),t(43,`
                `),n(),t(44,`
                `),i(45,"dd"),t(46,`
                    `),i(47,"span"),t(48),n(),t(49,`
                    `),r(50,"jhi-copy-icon-button",14),t(51,`
                `),n(),t(52,`
                `),i(53,"dt"),t(54,`
                    `),r(55,"span",55),t(56,`
                `),n(),t(57,`
                `),i(58,"dd"),t(59,`
                    `),i(60,"span"),t(61),n(),t(62,`
                    `),r(63,"jhi-copy-icon-button",14),t(64,`
                `),n(),t(65,`
            `)),p&2){let e=c();a(9),s(e.getDeepLinkingUrl()),a(2),o("copyText",e.getDeepLinkingUrl()),a(11),s(e.getToolUrl()),a(2),o("copyText",e.getToolUrl()),a(11),s(e.getKeysetUrl()),a(2),o("copyText",e.getKeysetUrl()),a(11),s(e.getInitiateLoginUrl()),a(2),o("copyText",e.getInitiateLoginUrl()),a(11),s(e.getRedirectUri()),a(2),o("copyText",e.getRedirectUri())}}var qt=(()=>{class p{router=f(W);ltiConfigurationService=f(gt);sortService=f(xt);alertService=f(rt);activatedRoute=f(V);course;platforms;ascending;activeTab=1;predicate="id";reverse=!1;page=1;itemsPerPage=50;totalItems=0;faSort=tt;faExclamationTriangle=at;faWrench=et;faPencilAlt=Z;faTrash=it;faPlus=nt;dialogErrorSource=new j;dialogError$=this.dialogErrorSource.asObservable();ngOnInit(){N({data:this.activatedRoute.data,params:this.activatedRoute.queryParamMap}).subscribe(({data:e,params:m})=>{let l=m.get("page");this.page=l!==null?+l:1;let d=(m.get("sort")??e.defaultSort).split(",");this.predicate=d[0],this.ascending=d[1]==="asc",this.loadData()})}loadData(){this.ltiConfigurationService.query({page:this.page-1,size:this.itemsPerPage,sort:this.sort()}).subscribe(e=>this.onSuccess(e.body,e.headers))}transition(){this.router.navigate(["/admin/lti-configuration"],{queryParams:{page:this.page,sort:this.predicate+","+(this.ascending?"asc":"desc")}})}getDynamicRegistrationUrl(){return u.LTI13_DYNAMIC_REGISTRATION_URL}getDeepLinkingUrl(){return u.LTI13_DEEPLINK_REDIRECT_PATH}getToolUrl(){return u.TOOL_URL}getKeysetUrl(){return u.KEYSET_URI}getInitiateLoginUrl(){return u.LTI13_LOGIN_INITIATION_PATH}getRedirectUri(){return u.LTI13_LOGIN_REDIRECT_PROXY_PATH}sortRows(){this.sortService.sortByProperty(this.platforms,this.predicate,this.reverse)}deleteLtiPlatform(e){this.ltiConfigurationService.deleteLtiPlatform(e).subscribe({next:()=>{this.dialogErrorSource.next(""),this.router.navigate(["admin","lti-configuration"])},error:m=>{this.dialogErrorSource.next(m.message),this.alertService.error("artemisApp.lti13.deletePlatformError")}})}sort(){let e=[this.predicate+","+(this.ascending?"asc":"desc")];return this.predicate!=="id"&&e.push("id"),e}onSuccess(e,m){this.totalItems=Number(m.get("X-Total-Count")),this.platforms=e||[]}static \u0275fac=function(m){return new(m||p)};static \u0275cmp=w({type:p,selectors:[["jhi-lti-configuration"]],decls:31,vars:4,consts:[["nav","ngbNav"],["name","editForm","role","form","novalidate",""],[1,"modal-header",2,"margin-bottom","20px"],["jhiTranslate","artemisApp.lti.version13Configuration",1,"modal-title"],["ngbNav","",1,"nav-tabs","mt-4",3,"activeIdChange","activeId"],["ngbNavItem","",3,"ngbNavItem"],["ngbNavLink","","jhiTranslate","artemisApp.lti.platformRegistration"],["ngbNavContent",""],["ngbNavLink","","jhiTranslate","artemisApp.lti.serviceUrls"],[1,"modal-body"],[1,"mt-2",3,"ngbNavOutlet"],[2,"display","flex","align-items","center"],["jhiTranslate","artemisApp.lti.dynamicRegistrationUrl",1,"modal-title"],["text","artemisApp.lti.dynamicRegistrationTooltip"],[3,"copyText"],[2,"display","flex","align-items","center","justify-content","space-between","width","100%"],["jhiTranslate","artemisApp.lti.configuredPlatforms",1,"modal-title",2,"margin-right","2px"],["text","artemisApp.lti.configuredPlatformsTooltip"],[1,"btn","btn-primary",3,"routerLink"],[3,"icon"],["jhiTranslate","artemisApp.lti13.addNewPlatform"],[1,"row"],[1,"col-12","mx-auto"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"thead-dark"],["jhiSort","",3,"predicateChange","ascendingChange","sortChange","predicate","ascending"],["jhiSortBy","id"],["jhiTranslate","global.field.id"],["jhiSortBy","customName"],["jhiTranslate","artemisApp.lti.customName"],["jhiSortBy","registrationId"],["jhiTranslate","artemisApp.lti.registrationId"],["jhiSortBy","clientId"],["jhiTranslate","artemisApp.lti.clientId"],["jhiSortBy","originalURL"],["jhiTranslate","artemisApp.lti.toolUrl"],["jhiSortBy","authorizationUri"],["jhiTranslate","artemisApp.lti.authorizationUri"],["jhiSortBy","jwkSetUri"],["jhiTranslate","artemisApp.lti.jwkSetUri"],["jhiSortBy","tokenUri"],["jhiTranslate","artemisApp.lti.tokenUri"],[1,"row","justify-content-center"],[3,"params"],[3,"pageChange","collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","disabled"],[3,"id"],["role","group",1,"d-flex","gap-1","flex-column","justify-content-center","col-3","col-sm-2","col-lg-1"],[1,"d-flex","gap-1","w-100"],["jhiTranslate","entity.action.edit"],["type","button","jhiDeleteButton","",1,"btn","btn-danger","btn-sm","flex-grow-1",3,"delete","renderButtonStyle","renderButtonText","dialogError"],["jhiTranslate","entity.action.delete"],["jhiTranslate","artemisApp.lti.deepLinkingUrl"],["jhiTranslate","artemisApp.lti.keysetUrl"],["jhiTranslate","artemisApp.lti.initiateLoginUrl"],["jhiTranslate","artemisApp.lti.redirectUri"]],template:function(m,l){if(m&1){let d=h();i(0,"form",1),t(1,`
    `),i(2,"div",2),t(3,`
        `),r(4,"h4",3),t(5,`
    `),n(),t(6,`
    `),i(7,"nav",4,0),E("activeIdChange",function(T){return x(d),_(l.activeTab,T)||(l.activeTab=T),g(T)}),t(9,`
        `),C(10,5),t(11,`
            `),r(12,"a",6),t(13,`
            `),I(14,yt,130,27,"ng-template",7),t(15,`
        `),b(),t(16,`
        `),C(17,5),t(18,`
            `),r(19,"a",8),t(20,`
            `),I(21,Et,66,10,"ng-template",7),t(22,`
        `),b(),t(23,`
    `),n(),t(24,`
    `),i(25,"div",9),t(26,`
        `),r(27,"div",10),t(28,`
    `),n(),t(29,`
`),n(),t(30,`
`)}if(m&2){let d=k(8);a(7),y("activeId",l.activeTab),a(3),o("ngbNavItem",1),a(7),o("ngbNavItem",2),a(10),o("ngbNavOutlet",d)}},dependencies:[K,H,F,G,lt,q,Y,$,X,M,pt,ut,z,ot,dt,st,mt,ct,Q,J],encapsulation:2})}return p})();export{qt as LtiConfigurationComponent};
//# sourceMappingURL=lti-configuration.component-HRS2HEEY.js.map

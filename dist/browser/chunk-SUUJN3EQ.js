import{a as m}from"./chunk-BQNBT6PW.js";import{O as d}from"./chunk-IOA4DPXY.js";import{Ea as p,w as a,ya as c}from"./chunk-5LC5EQRR.js";import{j as l}from"./chunk-3E746U5Y.js";var F=(()=>{class r{http=p(d);resourceUrl="api/core/files";getTemplateFile(e,t){let o=[e];return t&&o.push(t),this.http.get(`${this.resourceUrl}/templates/`+o.join("/"),{responseType:"text"})}getFile(e,t){return l(this,null,function*(){let o=yield a(this.http.get(e,{responseType:"blob"})),n=new File([o],this.getUniqueFileName(this.getExtension(e),t));return Promise.resolve(n)})}getTemplateCodeOfConduct(){return this.http.get(`${this.resourceUrl}/templates/code-of-conduct`,{observe:"response",responseType:"text"})}downloadFile(e){let t=e.split("/"),o=t.pop(),s=t.join("/")+"/"+encodeURIComponent(o),i=window.open("about:blank");return i.location.href=s,i}downloadFileByAttachmentName(e,t){let o=this.createAttachmentFileUrl(e,t,!0),n=window.open("about:blank");return n.location.href=o,n}createAttachmentFileUrl(e,t,o){let n=e.split("/"),s=n.pop().split(".").pop(),i=n.join("/"),u=o?encodeURIComponent(t+"."+s):t+"."+s;return i+"/"+u}downloadMergedFile(e){return this.http.get(`${this.resourceUrl}/attachments/lecture/${e}/merge-pdf`,{observe:"response",responseType:"blob"})}getExtension(e){return e.split(".").pop()}getUniqueFileName(e,t){let o;do o=m()+"."+e;while(t&&t.has(o));return o}replaceAttachmentPrefixAndUnderscores(e){return e.replace(/AttachmentUnit_\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}_/,"").replace(/_/g," ")}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{F as a};
//# sourceMappingURL=chunk-SUUJN3EQ.js.map

import{a as At}from"./chunk-CDMXF7Y5.js";import{a as Tt,b as Et,c as Ut,d as St,e as Lt}from"./chunk-TXYCUEEB.js";import{b as E}from"./chunk-X4L2PWEV.js";import{a as bt,d as yt,f as vt}from"./chunk-KZGAUMRM.js";import{a as ht}from"./chunk-QZKVSIAC.js";import{b as gt}from"./chunk-T624HJJL.js";import{a as w}from"./chunk-HMZID6NQ.js";import{a as _t}from"./chunk-UDBRF4PR.js";import{a as xt}from"./chunk-ZLJ76G5I.js";import{a as m,f as dt}from"./chunk-MLVGKM2P.js";import{c as F}from"./chunk-5MVJAZRV.js";import{c as ft}from"./chunk-JNO6DNVW.js";import{K as Y}from"./chunk-VZRSC3LP.js";import{r as Ct}from"./chunk-VK7JPHFE.js";import{c as ut}from"./chunk-BNDLMKXK.js";import{a as k}from"./chunk-K3W6YFKH.js";import{c as mt}from"./chunk-JXJXC4DZ.js";import{d as I}from"./chunk-EDXSOKK5.js";import{Ba as nt,Bb as ot,Fa as it,Kd as pt,Zc as ct,ed as lt,ha as tt,nb as rt,q as Z,ra as et,sd as st,uc as at}from"./chunk-Z4VHWOB5.js";import{a as M}from"./chunk-U54OSGNH.js";import{b as G,f as W,h as J,i as A}from"./chunk-M6Z6DKZQ.js";import{n as Q}from"./chunk-IOA4DPXY.js";import{Db as o,Dc as T,Ea as h,L as N,Ma as f,Mc as b,Na as g,Oa as $,Oc as c,Pa as H,Tb as L,U as j,Va as S,Zb as x,aa as R,dd as t,f as O,fd as U,kc as p,mc as D,qd as v,rc as X,sc as d,sd as B,td as K,vc as z,wc as q,xc as l,yc as s,yd as C,z as P,zc as a,zd as _}from"./chunk-5LC5EQRR.js";import{j as V}from"./chunk-3E746U5Y.js";var wt=()=>["./","text-units","create"],Ot=()=>["./","exercise-units","create"],Pt=()=>["./","video-units","create"],Dt=()=>["./","online-units","create"],Bt=()=>["./","attachment-units","create"];function Ft(n,u){if(n&1&&(t(0,`
                `),l(1,"a",4),t(2,`
                    `),a(3,"fa-icon",5),t(4,"\xA0"),a(5,"span",6),t(6,`
                `),s(),t(7,`
                `),l(8,"a",7),t(9,`
                    `),a(10,"fa-icon",5),t(11,"\xA0"),a(12,"span",8),t(13,`
                `),s(),t(14,`
                `),l(15,"a",9),t(16,`
                    `),a(17,"fa-icon",5),t(18,"\xA0"),a(19,"span",10),t(20,`
                `),s(),t(21,`
                `),l(22,"a",11),t(23,`
                    `),a(24,"fa-icon",5),t(25,"\xA0"),a(26,"span",12),t(27,`
                `),s(),t(28,`
                `),l(29,"a",13),t(30,`
                    `),a(31,"fa-icon",5),t(32,"\xA0"),a(33,"span",14),t(34,`
                `),s(),t(35,`
            `)),n&2){let e=c();o(),p("routerLink",v(10,wt)),o(2),p("icon",e.faScroll),o(5),p("routerLink",v(11,Ot)),o(2),p("icon",e.faCheck),o(5),p("routerLink",v(12,Pt)),o(2),p("icon",e.faVideo),o(5),p("routerLink",v(13,Dt)),o(2),p("icon",e.faLink),o(5),p("routerLink",v(14,Bt)),o(2),p("icon",e.faFileUpload)}}function Vt(n,u){if(n&1){let e=T();t(0,`
                `),l(1,"button",15),b("click",function(){f(e);let r=c();return g(r.onButtonClicked(r.unitType.TEXT))}),t(2,`
                    `),a(3,"fa-icon",5),t(4,"\xA0"),a(5,"span",6),t(6,`
                `),s(),t(7,`
                `),l(8,"button",16),b("click",function(){f(e);let r=c();return g(r.onButtonClicked(r.unitType.EXERCISE))}),t(9,`
                    `),a(10,"fa-icon",5),t(11,"\xA0"),a(12,"span",8),t(13,`
                `),s(),t(14,`
                `),l(15,"button",17),b("click",function(){f(e);let r=c();return g(r.onButtonClicked(r.unitType.VIDEO))}),t(16,`
                    `),a(17,"fa-icon",5),t(18,"\xA0"),a(19,"span",10),t(20,`
                `),s(),t(21,`
                `),l(22,"button",18),b("click",function(){f(e);let r=c();return g(r.onButtonClicked(r.unitType.ONLINE))}),t(23,`
                    `),a(24,"fa-icon",5),t(25,"\xA0"),a(26,"span",12),t(27,`
                `),s(),t(28,`
                `),l(29,"button",19),b("click",function(){f(e);let r=c();return g(r.onButtonClicked(r.unitType.ATTACHMENT))}),t(30,`
                    `),a(31,"fa-icon",5),t(32,"\xA0"),a(33,"span",14),t(34,`
                `),s(),t(35,`
            `)}if(n&2){let e=c();o(3),p("icon",e.faScroll),o(7),p("icon",e.faCheck),o(7),p("icon",e.faVideo),o(7),p("icon",e.faLink),o(7),p("icon",e.faFileUpload)}}var kt=(()=>{class n{documentationType="Units";emitEvents=!1;onUnitCreationCardClicked=new S;unitType=m;faCheck=st;faVideo=pt;faFileUpload=et;faScroll=it;faLink=at;onButtonClicked(e){if(this.emitEvents){this.onUnitCreationCardClicked.emit(e);return}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=L({type:n,selectors:[["jhi-unit-creation-card"]],inputs:{emitEvents:"emitEvents"},outputs:{onUnitCreationCardClicked:"onUnitCreationCardClicked"},decls:17,vars:5,consts:[["id","unit-creation",1,"container"],[1,"d-flex","justify-content-center","flex-wrap","gap-1","align-items-center"],[1,"text-center","text-primary","me-2"],[3,"type"],["type","button","id","createTextUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"routerLink"],[3,"icon"],["jhiTranslate","artemisApp.lectureUnit.unitCreationCard.text"],["type","button","id","createExerciseUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"routerLink"],["jhiTranslate","artemisApp.lectureUnit.unitCreationCard.exercise"],["type","button","id","createVideoUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"routerLink"],["jhiTranslate","artemisApp.lectureUnit.unitCreationCard.video"],["type","button","id","createOnlineUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"routerLink"],["jhiTranslate","artemisApp.lectureUnit.unitCreationCard.online"],["type","button","id","createAttachmentUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"routerLink"],["jhiTranslate","artemisApp.lectureUnit.unitCreationCard.attachment"],["type","button","id","createTextUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"click"],["type","button","id","createExerciseUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"click"],["type","button","id","createVideoUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"click"],["type","button","id","createOnlineUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"click"],["type","button","id","createAttachmentUnitButton",1,"btn","btn-sm","btn-primary","ms-1",3,"click"]],template:function(i,r){i&1&&(l(0,"div",0),t(1,`
    `),l(2,"div",1),t(3,`
        `),l(4,"div",2),t(5),C(6,"artemisTranslate"),s(),t(7,`
        `),l(8,"div",1),t(9,`
            `),x(10,Ft,36,15)(11,Vt,36,5),s(),t(12,`
        `),a(13,"jhi-documentation-button",3),t(14,`
    `),s(),t(15,`
`),s(),t(16,`
`)),i&2&&(o(5),U("",_(6,3,"artemisApp.lectureUnit.unitCreationCard.title"),":"),o(5),d(r.emitEvents?11:10),o(3),p("type",r.documentationType))},dependencies:[A,I,M,_t,k],encapsulation:2})}return n})();var Nt=(n,u)=>({error:n,"btn-success":u}),It=()=>[],jt=(n,u,e)=>["/course-management",n,"lectures",u,"unit-management","attachment-units",e,"view"],Rt=(n,u)=>["./",n,u,"edit"];function $t(n,u){n&1&&(t(0,`
    `),l(1,"div",0),t(2,`
        `),l(3,"div",1),t(4,`
            `),a(5,"span",2),t(6,`
        `),s(),t(7,`
    `),s(),t(8,`
`))}function Ht(n,u){if(n&1&&(t(0,`
            `),l(1,"div",4),t(2,`
                `),a(3,"jhi-unit-creation-card"),t(4,`
            `),s(),t(5,`
        `)),n&2){let e=c(2);o(),D("justify-content-center",!(e.lectureUnits!=null&&e.lectureUnits.length))}}function Xt(n,u){if(n&1&&(t(0,`
                                `),l(1,"div",26),t(2),C(3,"artemisTranslate"),s(),t(4,`
                            `)),n&2){let e=c().$implicit,i=c(2);o(2),U(`
                                    `,_(3,1,"artemisApp.lectureUnit.details.attachmentVersion")+i.getAttachmentVersion(e),`
                                `)}}function zt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-attachment-unit",27),t(2,`
                                `)),n&2){let e=c().$implicit;o(),p("lectureUnit",e)("isPresentationMode",!0)}}function qt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-exercise-unit",28),t(2,`
                                `)),n&2){let e=c().$implicit,i=c(2);o(),p("exerciseUnit",e)("isPresentationMode",!0)("course",i.lecture.course)}}function Kt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-video-unit",27),t(2,`
                                `)),n&2){let e=c().$implicit;o(),p("lectureUnit",e)("isPresentationMode",!0)}}function Qt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-text-unit",27),t(2,`
                                `)),n&2){let e=c().$implicit;o(),p("lectureUnit",e)("isPresentationMode",!0)}}function Gt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-online-unit",27),t(2,`
                                `)),n&2){let e=c().$implicit;o(),p("lectureUnit",e)("isPresentationMode",!0)}}function Wt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-competencies-popover",31),t(2,`
                                `)),n&2){let e=c(2).$implicit,i=c(2);o(),p("courseId",i.lecture.course.id)("competencyLinks",e.competencyLinks||v(3,It))("navigateTo","competencyManagement")}}function Jt(n,u){if(n&1){let e=T();t(0,`
                            `),l(1,"div",25),t(2,`
                                `),x(3,Wt,3,4),l(4,"button",29),C(5,"artemisTranslate"),b("click",function(){f(e);let r=c().$implicit,y=c(2);return g(y.onIngestButtonClicked(r.id))}),t(6,`
                                    `),a(7,"fa-icon",30),t(8,`
                                `),s(),t(9,`
                            `),s(),t(10,`
                        `)}if(n&2){let e=c().$implicit,i=c(2);o(3),d(i.lecture.course!=null&&i.lecture.course.id&&i.showCompetencies?3:-1),o(),p("ngClass",B(6,Nt,i.getIcon(e)===i.faRepeat,i.getIcon(e)===i.faCheckCircle))("ngbTooltip",_(5,4,"entity.action.sendToIris")),o(3),p("icon",i.getIcon(e))}}function Yt(n,u){if(n&1&&(t(0,`
                                    `),a(1,"jhi-competencies-popover",31),t(2,`
                                `)),n&2){let e=c(2).$implicit,i=c(2);o(),p("courseId",i.lecture.course.id)("competencyLinks",e.competencyLinks||v(3,It))("navigateTo","competencyManagement")}}function Zt(n,u){if(n&1&&(t(0,`
                            `),l(1,"div",25),t(2,`
                                `),x(3,Yt,3,4),s(),t(4,`
                        `)),n&2){let e=c(3);o(3),d(e.lecture.course!=null&&e.lecture.course.id&&e.showCompetencies?3:-1)}}function te(n,u){if(n&1&&(t(0,`
                            `),l(1,"a",32),C(2,"artemisTranslate"),t(3,`
                                `),a(4,"fa-icon",30),t(5,`
                            `),s(),t(6,`
                        `)),n&2){let e=c().$implicit,i=c(2);o(),p("routerLink",K(5,jt,i.lecture.course==null?null:i.lecture.course.id,i.lecture.id,e.id))("ngbTooltip",_(2,3,"entity.action.view")),o(3),p("icon",i.faEye)}}function ee(n,u){if(n&1){let e=T();t(0,`
                                    `),l(1,"button",33),C(2,"artemisTranslate"),b("click",function(){f(e);let r=c(2).$implicit,y=c(2);return g(y.onEditButtonClicked(r))}),t(3,`
                                        `),a(4,"fa-icon",30),t(5,`
                                    `),s(),t(6,`
                                `)}if(n&2){let e=c(4);o(),p("ngbTooltip",_(2,2,"entity.action.edit")),o(3),p("icon",e.faPencilAlt)}}function ne(n,u){if(n&1&&(t(0,`
                                `),x(1,ee,7,4)),n&2){let e=c().$implicit,i=c(2);o(),d(i.editButtonAvailable(e)?1:-1)}}function ie(n,u){if(n&1&&(t(0,`
                                    `),l(1,"a",34),C(2,"artemisTranslate"),t(3,`
                                        `),a(4,"fa-icon",30),t(5,`
                                    `),s(),t(6,`
                                `)),n&2){let e=c(2).$implicit,i=c(2);o(),p("routerLink",B(5,Rt,i.routerEditLinksBase[e.type],e.id))("ngbTooltip",_(2,3,"entity.action.edit")),o(3),p("icon",i.faPencilAlt)}}function re(n,u){if(n&1&&(t(0,`
                                `),x(1,ie,7,8)),n&2){let e=c().$implicit,i=c(2);o(),d(i.editButtonAvailable(e)?1:-1)}}function oe(n,u){if(n&1){let e=T();t(0,`
                                `),l(1,"button",35),C(2,"artemisTranslate"),b("delete",function(){f(e);let r=c().$implicit,y=c(2);return g(y.deleteLectureUnit(r.id))}),t(3,`
                                    `),a(4,"fa-icon",30),t(5,`
                                `),s(),t(6,`
                            `)}if(n&2){let e=c().$implicit,i=c(2);o(),p("renderButtonStyle",!1)("renderButtonText",!1)("ngbTooltip",_(2,9,"entity.action."+i.getActionType(e)))("actionType",i.getActionType(e))("entityTitle",i.lectureUnitService.getLectureUnitName(e)||"")("deleteQuestion",i.getDeleteQuestionKey(e))("deleteConfirmationText",i.getDeleteConfirmationTextKey(e))("dialogError",i.dialogError$),o(3),p("icon",i.faTrash)}}function ae(n,u){if(n&1&&(t(0,`
                `),l(1,"div",5),t(2,`
                    `),l(3,"div",6),t(4,`
                        `),$(),l(5,"svg",7),t(6,`
                            `),a(7,"circle",8),t(8,`
                            `),a(9,"circle",9),t(10,`
                            `),a(11,"circle",10),t(12,`
                            `),a(13,"circle",11),t(14,`
                            `),a(15,"circle",12),t(16,`
                            `),a(17,"circle",13),t(18,`
                            `),a(19,"circle",14),t(20,`
                            `),a(21,"circle",15),t(22,`
                            `),a(23,"circle",16),t(24,`
                            `),a(25,"circle",17),t(26,`
                            `),a(27,"circle",18),t(28,`
                            `),a(29,"circle",19),t(30,`
                        `),s(),t(31,`
                    `),s(),t(32,`
                    `),H(),l(33,"div",20),t(34,`
                        `),l(35,"div",21),t(36,`
                            `),l(37,"div",22),t(38),C(39,"artemisTranslate"),C(40,"artemisDate"),C(41,"artemisTranslate"),s(),t(42,`
                            `),x(43,Xt,5,3),s(),t(44,`
                        `),l(45,"div",23),t(46,`
                            `),x(47,zt,3,2)(48,qt,3,3)(49,Kt,3,2)(50,Qt,3,2)(51,Gt,3,2),t(52,`
                        `),s(),t(53,`
                    `),s(),t(54,`
                    `),l(55,"div",24),t(56,`
                        `),x(57,Jt,11,9)(58,Zt,5,1)(59,te,7,9),l(60,"div",25),t(61,`
                            `),x(62,ne,2,1)(63,re,2,1)(64,oe,7,11),s(),t(65,`
                    `),s(),t(66,`
                `),s(),t(67,`
            `)),n&2){let e,i=u.$implicit,r=c(2);o(),D("attachment",i.type===r.LectureUnitType.ATTACHMENT),o(37),U(`
                                `,r.getLectureUnitReleaseDate(i)?_(39,9,"artemisApp.lectureUnit.details.releaseDateSet")+_(40,11,r.getLectureUnitReleaseDate(i)):_(41,13,"artemisApp.lectureUnit.details.releaseDateNotSet"),`
                            `),o(5),d(i.type===r.LectureUnitType.ATTACHMENT?43:-1),o(4),d((e=i.type)===r.LectureUnitType.ATTACHMENT?47:e===r.LectureUnitType.EXERCISE?48:e===r.LectureUnitType.VIDEO?49:e===r.LectureUnitType.TEXT?50:e===r.LectureUnitType.ONLINE?51:-1),o(10),d(r.lectureIngestionEnabled&&i.type===r.LectureUnitType.ATTACHMENT?57:58),o(2),d(r.viewButtonAvailable[i.id]?59:-1),o(3),d(r.emitEditEvents?62:63),o(2),d(r.lecture.isAtLeastInstructor?64:-1)}}function ce(n,u){if(n&1){let e=T();t(0,`
    `),l(1,"div"),t(2,`
        `),t(3,`
        `),x(4,Ht,6,2),l(5,"div",3),b("cdkDropListDropped",function(r){f(e);let y=c();return g(y.drop(r))}),t(6,`
            `),z(7,ae,68,15,null,null,X().identify,!0),s(),t(9,`
    `),s(),t(10,`
`)}if(n&2){let e=c();o(4),d(e.showCreationCard?4:-1),o(3),q(e.lectureUnits)}}var Ze=(()=>{class n{faTrash=ot;faPencilAlt=Z;faEye=rt;faFileExport=lt;faRepeat=tt;faCheckCircle=nt;faSpinner=ct;LectureUnitType=m;ActionType=w;activatedRoute=h(W);router=h(J);lectureService=h(xt);alertService=h(mt);profileService=h(ut);irisSettingsService=h(ht);lectureUnitService=h(dt);showCreationCard=!0;showCompetencies=!0;emitEditEvents=!1;lectureId;onEditLectureUnitClicked=new S;lectureUnits=[];lecture;isLoading=!1;updateOrderSubject;viewButtonAvailable={};updateOrderSubjectSubscription;navigationEndSubscription;activatedRouteSubscription;profileInfoSubscription;dialogErrorSource=new O;dialogError$=this.dialogErrorSource.asObservable();irisEnabled=!1;lectureIngestionEnabled=!1;routerEditLinksBase={[m.ATTACHMENT]:"attachment-units",[m.VIDEO]:"video-units",[m.TEXT]:"text-units",[m.ONLINE]:"online-units"};ngOnInit(){this.navigationEndSubscription=this.router.events.pipe(N(e=>e instanceof G)).subscribe(()=>{this.loadData()}),this.updateOrderSubject=new O,this.activatedRouteSubscription=this.activatedRoute?.parent?.params.subscribe(e=>{this.lectureId??=+e.lectureId,this.lectureId&&this.loadData()}),this.updateOrderSubjectSubscription=this.updateOrderSubject.pipe(j(1e3)).subscribe(()=>{this.updateOrder()})}ngOnDestroy(){this.updateOrder(),this.updateOrderSubjectSubscription.unsubscribe(),this.dialogErrorSource.unsubscribe(),this.navigationEndSubscription.unsubscribe(),this.profileInfoSubscription?.unsubscribe(),this.activatedRouteSubscription?.unsubscribe()}loadData(){this.isLoading=!0,this.lectureService.findWithDetails(this.lectureId).pipe(P(e=>e.body),R(()=>{this.isLoading=!1})).subscribe({next:e=>{this.lecture=e,e?.lectureUnits?(this.lectureUnits=e?.lectureUnits,this.lectureUnits.forEach(i=>{this.viewButtonAvailable[i.id]=this.isViewButtonAvailable(i)}),this.initializeProfileInfo(),this.lectureIngestionEnabled&&this.updateIngestionStates()):this.lectureUnits=[]},error:e=>F(this.alertService,e)})}updateOrder(){this.lectureId===void 0||isNaN(this.lectureId)||this.lectureUnitService.updateOrder(this.lectureId,this.lectureUnits).pipe(P(e=>e.body)).subscribe({error:e=>F(this.alertService,e)})}initializeProfileInfo(){this.profileInfoSubscription=this.profileService.getProfileInfo().subscribe(e=>V(this,null,function*(){this.irisEnabled=e.activeProfiles.includes(Ct),this.irisEnabled&&this.lecture.course&&this.lecture.course.id&&this.irisSettingsService.getCombinedCourseSettings(this.lecture.course.id).subscribe(i=>{this.lectureIngestionEnabled=i?.irisLectureIngestionSettings?.enabled||!1})}))}drop(e){bt(this.lectureUnits,e.previousIndex,e.currentIndex),this.updateOrderSubject.next("")}identify(e,i){return`${e}-${i.id}`}getDeleteQuestionKey(e){switch(e.type){case m.EXERCISE:return"artemisApp.exerciseUnit.delete.question";case m.ATTACHMENT:return"artemisApp.attachmentUnit.delete.question";case m.VIDEO:return"artemisApp.videoUnit.delete.question";case m.TEXT:return"artemisApp.textUnit.delete.question";case m.ONLINE:return"artemisApp.onlineUnit.delete.question";default:return""}}getDeleteConfirmationTextKey(e){switch(e.type){case m.EXERCISE:return"artemisApp.exerciseUnit.delete.typeNameToConfirm";case m.ATTACHMENT:return"artemisApp.attachmentUnit.delete.typeNameToConfirm";case m.VIDEO:return"artemisApp.videoUnit.delete.typeNameToConfirm";case m.TEXT:return"artemisApp.textUnit.delete.typeNameToConfirm";case m.ONLINE:return"artemisApp.onlineUnit.delete.typeNameToConfirm";default:return""}}getActionType(e){return e.type===m.EXERCISE?w.Unlink:w.Delete}deleteLectureUnit(e){this.lectureUnitService.delete(e,this.lectureId).subscribe({next:()=>{this.dialogErrorSource.next(""),this.loadData()},error:i=>this.dialogErrorSource.next(i.message)})}isViewButtonAvailable(e){switch(e.type){case m.ATTACHMENT:return e.attachment?.link?.endsWith(".pdf")??!1;default:return!1}}editButtonAvailable(e){switch(e?.type){case m.ATTACHMENT:case m.TEXT:case m.VIDEO:case m.ONLINE:return!0;default:return!1}}onEditButtonClicked(e){this.onEditLectureUnitClicked.emit(e)}getLectureUnitReleaseDate(e){switch(e.type){case m.ATTACHMENT:return e?.attachment?.releaseDate||void 0;case m.EXERCISE:return e?.exercise?.releaseDate||void 0;default:return e.releaseDate||void 0}}getAttachmentVersion(e){switch(e.type){case m.ATTACHMENT:return e?.attachment?.version||void 0;default:return}}updateIngestionStates(){this.lectureUnitService.getIngestionState(this.lecture.course.id,this.lecture.id).subscribe({next:e=>{if(e.body){let i=e.body;this.lectureUnits.forEach(r=>{if(r.id){let y=i[r.id];y!==void 0&&(r.pyrisIngestionState=y)}})}},error:()=>{this.alertService.error("artemisApp.iris.ingestionAlert.pyrisError")}})}onIngestButtonClicked(e){let i=this.lectureUnits.findIndex(r=>r.id===e);if(i>-1){let r=this.lectureUnits[i];r.pyrisIngestionState=E.IN_PROGRESS,this.lectureUnits[i]=r}this.lectureUnitService.ingestLectureUnitInPyris(e,this.lecture.id).subscribe({next:()=>this.alertService.success("artemisApp.iris.ingestionAlert.lectureUnitSuccess"),error:r=>{r.status===400?this.alertService.error("artemisApp.iris.ingestionAlert.lectureUnitError"):r.status===503?this.alertService.error("artemisApp.iris.ingestionAlert.pyrisUnavailable"):this.alertService.error("artemisApp.iris.ingestionAlert.pyrisError")}})}getIcon(e){switch(e.pyrisIngestionState){case E.NOT_STARTED:return this.faFileExport;case E.IN_PROGRESS:return this.faSpinner;case E.DONE:return this.faCheckCircle;case E.ERROR:return this.faRepeat;default:return this.faFileExport}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=L({type:n,selectors:[["jhi-lecture-unit-management"]],inputs:{showCreationCard:"showCreationCard",showCompetencies:"showCompetencies",emitEditEvents:"emitEditEvents",lectureId:"lectureId"},outputs:{onEditLectureUnitClicked:"onEditLectureUnitClicked"},decls:2,vars:2,consts:[[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],["jhiTranslate","loading",1,"sr-only"],["cdkDropList","",1,"component-container",3,"cdkDropListDropped"],[1,"w-100","d-flex","justify-content-end"],["cdkDrag","",1,"lecture-unit-container"],[1,"custom-handle","d-none","d-sm-flex"],["viewBox","3 1 5 13","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","4.5","cy","2.5","r",".6","fill","currentColor"],["cx","4.5","cy","4.5","r",".6","fill","currentColor"],["cx","4.5","cy","6.499","r",".6","fill","currentColor"],["cx","4.5","cy","8.499","r",".6","fill","currentColor"],["cx","4.5","cy","10.498","r",".6","fill","currentColor"],["cx","4.5","cy","12.498","r",".6","fill","currentColor"],["cx","6.5","cy","2.5","r",".6","fill","currentColor"],["cx","6.5","cy","4.5","r",".6","fill","currentColor"],["cx","6.5","cy","6.499","r",".6","fill","currentColor"],["cx","6.5","cy","8.499","r",".6","fill","currentColor"],["cx","6.5","cy","10.498","r",".6","fill","currentColor"],["cx","6.5","cy","12.498","r",".6","fill","currentColor"],[1,"lecture-unit-type-container"],[1,"unit-badges","d-flex","flex-column","gap-1"],[1,"badge","bg-info"],[1,"mt-2"],["role","group",1,"d-flex","gap-1","flex-column","justify-content-center","col-3","col-sm-2","col-lg-1"],[1,"d-flex","gap-1","w-100"],[1,"badge","bg-info","attachment-badge"],[3,"lectureUnit","isPresentationMode"],[3,"exerciseUnit","isPresentationMode","course"],["type","button",1,"btn","btn-primary","btn-sm","flex-grow-1",3,"click","ngClass","ngbTooltip"],[3,"icon"],[1,"flex-grow-1",3,"courseId","competencyLinks","navigateTo"],["type","button",1,"btn","btn-primary","btn-sm","flex-grow-1",3,"routerLink","ngbTooltip"],["type","button",1,"btn","btn-primary","btn-sm","edit","flex-grow-1",3,"click","ngbTooltip"],["type","button",1,"btn","btn-primary","btn-sm","edit","flex-grow-1",3,"routerLink","ngbTooltip"],["type","button","jhiDeleteButton","",1,"btn","btn-danger","btn-sm","flex-grow-1",3,"delete","renderButtonStyle","renderButtonText","ngbTooltip","actionType","entityTitle","deleteQuestion","deleteConfirmationText","dialogError"]],template:function(i,r){i&1&&x(0,$t,9,0)(1,ce,11,1),i&2&&(d(r.isLoading?0:-1),o(),d(!r.isLoading&&r.lecture?1:-1))},dependencies:[M,kt,vt,yt,Tt,Et,Ut,St,Lt,At,Q,Y,I,A,gt,ft,k],styles:[".btn-circle[_ngcontent-%COMP%]{width:30px!important;height:30px!important;text-align:center;padding:6px 0;font-size:12px;line-height:1.428571429;border-radius:15px}.component-container[_ngcontent-%COMP%]{max-width:960px;margin:0 auto}.lecture-unit-container[_ngcontent-%COMP%]{cursor:grab;margin-top:30px;margin-bottom:20px;display:flex;gap:5px;flex-wrap:nowrap;align-items:center}.lecture-unit-container[_ngcontent-%COMP%]   .custom-handle[_ngcontent-%COMP%]{align-items:center;padding:0 5px;color:var(--secondary)}.lecture-unit-container[_ngcontent-%COMP%]   .custom-handle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:30px}.lecture-unit-container[_ngcontent-%COMP%]   .lecture-unit-type-container[_ngcontent-%COMP%]{position:relative;flex:1 0 0;margin:0 20px}.lecture-unit-container[_ngcontent-%COMP%]   .lecture-unit-type-container[_ngcontent-%COMP%]   .unit-badges[_ngcontent-%COMP%]{position:absolute;left:-.75rem;top:-20px}.lecture-unit-container.attachment[_ngcontent-%COMP%]{margin-top:50px}.lecture-unit-container.attachment[_ngcontent-%COMP%]   .lecture-unit-type-container[_ngcontent-%COMP%]   .unit-badges[_ngcontent-%COMP%]{top:-40px}.lecture-unit-container.attachment[_ngcontent-%COMP%]   .lecture-unit-type-container[_ngcontent-%COMP%]   .unit-badges[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:min-content}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .lecture-unit-container[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.creation-card-wrapper[_ngcontent-%COMP%]{flex:1}"]})}return n})();export{kt as a,Ze as b};
//# sourceMappingURL=chunk-KU7ZFTWF.js.map

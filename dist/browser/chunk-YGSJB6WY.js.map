{"version":3,"sources":["node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.css","node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js","node_modules/monaco-editor/esm/vs/editor/contrib/diffEditorBreadcrumbs/browser/contribution.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.css","node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/bicep/bicep.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/cypher/cypher.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/dart/dart.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/ecl/ecl.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/elixir/elixir.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/flow9/flow9.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/freemarker2/freemarker2.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/go/go.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/hcl/hcl.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/java/java.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/julia/julia.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/lexon/lexon.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/liquid/liquid.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/m3/m3.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/mdx/mdx.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/php/php.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/pla/pla.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/protobuf/protobuf.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/python/python.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/qsharp/qsharp.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/r/r.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/scala/scala.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/sparql/sparql.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/st/st.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/systemverilog/systemverilog.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/typespec/typespec.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/wgsl/wgsl.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js","node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js","node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js","node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js","node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js","node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/commands.js","node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteController.js","node_modules/monaco-editor/esm/vs/base/common/dataTransfer.js","node_modules/monaco-editor/esm/vs/base/common/uuid.js","node_modules/monaco-editor/esm/vs/base/common/hierarchicalKind.js","node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","node_modules/monaco-editor/esm/vs/platform/dnd/browser/dnd.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/defaultProviders.js","node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/edit.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineProgress/browser/inlineProgress.js","node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/postEditWidget.js","node_modules/monaco-editor/esm/vs/base/common/errorMessage.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionController.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","node_modules/monaco-editor/esm/vs/platform/actionWidget/browser/actionWidget.js","node_modules/monaco-editor/esm/vs/platform/actionWidget/browser/actionList.js","node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverActionIds.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverController2.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/hintsWidget/inlineCompletionsHintsWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/controller/commandIds.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverUtils.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverWidgetWrapper.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverWidget.js","node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/resizableContentWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverComputer.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverTypes.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverRendered.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverStatusBar.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js","node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions.js","node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js","node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js","node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteContribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js","node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js","node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findController.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js","node_modules/monaco-editor/esm/vs/base/common/search.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findState.js","node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js","node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","node_modules/monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js","node_modules/monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js","node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletions.contribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/controller/commands.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/controller/inlineCompletionContextKeys.js","node_modules/monaco-editor/esm/vs/base/browser/domObservable.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/controller/inlineCompletionsController.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/view/ghostTextView.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/ghostText.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/inlineCompletionsModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/inlineCompletionsSource.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/provideInlineCompletions.js","node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/singleTextEdit.js","node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","node_modules/monaco-editor/esm/vs/base/common/labels.js","node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/model/suggestWidgetAdaptor.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js","node_modules/monaco-editor/esm/vs/platform/files/common/files.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/hintsWidget/hoverParticipant.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsAccessibleView.js","node_modules/monaco-editor/esm/vs/platform/accessibility/browser/accessibleViewRegistry.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","node_modules/monaco-editor/esm/vs/platform/severityIcon/browser/severityIcon.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverActions.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverContribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHoverController.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHoverWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHoverComputer.js","node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverAccessibleViews.js","node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js","node_modules/monaco-editor/esm/vs/editor/contrib/indentation/common/indentUtils.js","node_modules/monaco-editor/esm/vs/editor/contrib/indentation/common/indentation.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js","node_modules/monaco-editor/esm/vs/editor/editor.all.js","node_modules/monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js","node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js","node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js","node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js","node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js","node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js","node_modules/monaco-editor/esm/vs/editor/contrib/longLinesHelper/browser/longLinesHelper.js","node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js","node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/highlightDecorations.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEdit.contribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/commands.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/commandIds.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditController.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/ghostTextWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditHintsWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditSideBySideWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/inlineEdits.contribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/commands.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/consts.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/inlineEditsController.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/inlineEditsModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdits/browser/inlineEditsWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/placeholderText/browser/placeholderTextContribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js","node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js","node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js","node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/placeholderText/browser/placeholderText.contribution.js","node_modules/monaco-editor/esm/vs/platform/observable/common/wrapInReloadableClass.js","node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/sectionHeaders/browser/sectionHeaders.js","node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.js","node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/getSemanticTokens.js","node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js","node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/semanticTokensConfig.js","node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js","node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js","node_modules/monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js","node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js","node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js","node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js","node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js","node_modules/monaco-editor/esm/vs/platform/opener/browser/link.js","node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js","node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js","node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/textualHighlightProvider.js","node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js","node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js","node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","node_modules/monaco-editor/esm/vs/editor/edcore.main.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js","node_modules/monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","node_modules/monaco-editor/esm/vs/base/common/fuzzyScorer.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","node_modules/monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js","node_modules/monaco-editor/esm/vs/base/common/tfIdf.js","node_modules/monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","src/main/webapp/app/shared/monaco-editor/model/languages/monaco-custom-markdown.language.ts","src/main/webapp/app/shared/monaco-editor/model/themes/monaco-dark.theme.ts","src/main/webapp/app/shared/monaco-editor/model/themes/monaco-editor-theme.model.ts","src/main/webapp/app/shared/monaco-editor/model/themes/monaco-light.theme.ts","src/main/webapp/app/shared/monaco-editor/monaco-editor.service.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n  remove() {\n    this.parent?.children.delete(this.id);\n  }\n  static findId(candidate, container) {\n    // complex id-computation which contains the origin/extension,\n    // the parent path, and some dedupe logic when names collide\n    let candidateId;\n    if (typeof candidate === 'string') {\n      candidateId = `${container.id}/${candidate}`;\n    } else {\n      candidateId = `${container.id}/${candidate.name}`;\n      if (container.children.get(candidateId) !== undefined) {\n        candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n      }\n    }\n    let id = candidateId;\n    for (let i = 0; container.children.get(id) !== undefined; i++) {\n      id = `${candidateId}_${i}`;\n    }\n    return id;\n  }\n  static empty(element) {\n    return element.children.size === 0;\n  }\n}\nexport class OutlineElement extends TreeElement {\n  constructor(id, parent, symbol) {\n    super();\n    this.id = id;\n    this.parent = parent;\n    this.symbol = symbol;\n    this.children = new Map();\n  }\n}\nexport class OutlineGroup extends TreeElement {\n  constructor(id, parent, label, order) {\n    super();\n    this.id = id;\n    this.parent = parent;\n    this.label = label;\n    this.order = order;\n    this.children = new Map();\n  }\n}\nexport class OutlineModel extends TreeElement {\n  static create(registry, textModel, token) {\n    const cts = new CancellationTokenSource(token);\n    const result = new OutlineModel(textModel.uri);\n    const provider = registry.ordered(textModel);\n    const promises = provider.map((provider, index) => {\n      const id = TreeElement.findId(`provider_${index}`, result);\n      const group = new OutlineGroup(id, result, provider.displayName ?? 'Unknown Outline Provider', index);\n      return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n        for (const info of result || []) {\n          OutlineModel._makeOutlineElement(info, group);\n        }\n        return group;\n      }, err => {\n        onUnexpectedExternalError(err);\n        return group;\n      }).then(group => {\n        if (!TreeElement.empty(group)) {\n          result._groups.set(id, group);\n        } else {\n          group.remove();\n        }\n      });\n    });\n    const listener = registry.onDidChange(() => {\n      const newProvider = registry.ordered(textModel);\n      if (!equals(newProvider, provider)) {\n        cts.cancel();\n      }\n    });\n    return Promise.all(promises).then(() => {\n      if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n        return OutlineModel.create(registry, textModel, token);\n      } else {\n        return result._compact();\n      }\n    }).finally(() => {\n      cts.dispose();\n      listener.dispose();\n      cts.dispose();\n    });\n  }\n  static _makeOutlineElement(info, container) {\n    const id = TreeElement.findId(info, container);\n    const res = new OutlineElement(id, container, info);\n    if (info.children) {\n      for (const childInfo of info.children) {\n        OutlineModel._makeOutlineElement(childInfo, res);\n      }\n    }\n    container.children.set(res.id, res);\n  }\n  constructor(uri) {\n    super();\n    this.uri = uri;\n    this.id = 'root';\n    this.parent = undefined;\n    this._groups = new Map();\n    this.children = new Map();\n    this.id = 'root';\n    this.parent = undefined;\n  }\n  _compact() {\n    let count = 0;\n    for (const [key, group] of this._groups) {\n      if (group.children.size === 0) {\n        // empty\n        this._groups.delete(key);\n      } else {\n        count += 1;\n      }\n    }\n    if (count !== 1) {\n      //\n      this.children = this._groups;\n    } else {\n      // adopt all elements of the first group\n      const group = Iterable.first(this._groups.values());\n      for (const [, child] of group.children) {\n        child.parent = this;\n        this.children.set(child.id, child);\n      }\n    }\n    return this;\n  }\n  getTopLevelSymbols() {\n    const roots = [];\n    for (const child of this.children.values()) {\n      if (child instanceof OutlineElement) {\n        roots.push(child.symbol);\n      } else {\n        roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n      }\n    }\n    return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n  }\n  asListOfDocumentSymbols() {\n    const roots = this.getTopLevelSymbols();\n    const bucket = [];\n    OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n    return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n  }\n  static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n    for (const entry of entries) {\n      bucket.push({\n        kind: entry.kind,\n        tags: entry.tags,\n        name: entry.name,\n        detail: entry.detail,\n        containerName: entry.containerName || overrideContainerLabel,\n        range: entry.range,\n        selectionRange: entry.selectionRange,\n        children: undefined // we flatten it...\n      });\n      // Recurse over children\n      if (entry.children) {\n        OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n      }\n    }\n  }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n  constructor(_languageFeaturesService, debounces, modelService) {\n    this._languageFeaturesService = _languageFeaturesService;\n    this._disposables = new DisposableStore();\n    this._cache = new LRUCache(10, 0.7);\n    this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', {\n      min: 350\n    });\n    // don't cache outline models longer than their text model\n    this._disposables.add(modelService.onModelRemoved(textModel => {\n      this._cache.delete(textModel.id);\n    }));\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n  async getOrCreate(textModel, token) {\n    const registry = this._languageFeaturesService.documentSymbolProvider;\n    const provider = registry.ordered(textModel);\n    let data = this._cache.get(textModel.id);\n    if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n      const source = new CancellationTokenSource();\n      data = {\n        versionId: textModel.getVersionId(),\n        provider,\n        promiseCnt: 0,\n        source,\n        promise: OutlineModel.create(registry, textModel, source.token),\n        model: undefined\n      };\n      this._cache.set(textModel.id, data);\n      const now = Date.now();\n      data.promise.then(outlineModel => {\n        data.model = outlineModel;\n        this._debounceInformation.update(textModel, Date.now() - now);\n      }).catch(_err => {\n        this._cache.delete(textModel.id);\n      });\n    }\n    if (data.model) {\n      // resolved -> return data\n      return data.model;\n    }\n    // increase usage counter\n    data.promiseCnt += 1;\n    const listener = token.onCancellationRequested(() => {\n      // last -> cancel provider request, remove cached promise\n      if (--data.promiseCnt === 0) {\n        data.source.cancel();\n        this._cache.delete(textModel.id);\n      }\n    });\n    try {\n      return await data.promise;\n    } finally {\n      listener.dispose();\n    }\n  }\n};\nOutlineModelService = __decorate([__param(0, ILanguageFeaturesService), __param(1, ILanguageFeatureDebounceService), __param(2, IModelService)], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, 1 /* InstantiationType.Delayed */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n  constructor(editRange, originalSelection, text) {\n    this._editRange = editRange;\n    this._originalSelection = originalSelection;\n    this._text = text;\n  }\n  getEditOperations(model, builder) {\n    builder.addTrackedEditOperation(this._editRange, this._text);\n  }\n  computeCursorState(model, helper) {\n    const inverseEditOperations = helper.getInverseEditOperations();\n    const srcRange = inverseEditOperations[0].range;\n    if (!this._originalSelection.isEmpty()) {\n      // Preserve selection and extends to typed text\n      return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n    }\n    return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\n.monaco-editor.vs .valueSetReplacement {\n\toutline: solid 2px var(--vscode-editorBracketMatch-border);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InPlaceReplaceController_1;\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport * as nls from '../../../../nls.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nimport './inPlaceReplace.css';\nlet InPlaceReplaceController = class InPlaceReplaceController {\n  static {\n    InPlaceReplaceController_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.inPlaceReplaceController';\n  }\n  static get(editor) {\n    return editor.getContribution(InPlaceReplaceController_1.ID);\n  }\n  static {\n    this.DECORATION = ModelDecorationOptions.register({\n      description: 'in-place-replace',\n      className: 'valueSetReplacement'\n    });\n  }\n  constructor(editor, editorWorkerService) {\n    this.editor = editor;\n    this.editorWorkerService = editorWorkerService;\n    this.decorations = this.editor.createDecorationsCollection();\n  }\n  dispose() {}\n  run(source, up) {\n    // cancel any pending request\n    this.currentRequest?.cancel();\n    const editorSelection = this.editor.getSelection();\n    const model = this.editor.getModel();\n    if (!model || !editorSelection) {\n      return undefined;\n    }\n    let selection = editorSelection;\n    if (selection.startLineNumber !== selection.endLineNumber) {\n      // Can't accept multiline selection\n      return undefined;\n    }\n    const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n    const modelURI = model.uri;\n    if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n      return Promise.resolve(undefined);\n    }\n    this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n    return this.currentRequest.then(result => {\n      if (!result || !result.range || !result.value) {\n        // No proper result\n        return;\n      }\n      if (!state.validate(this.editor)) {\n        // state has changed\n        return;\n      }\n      // Selection\n      const editRange = Range.lift(result.range);\n      let highlightRange = result.range;\n      const diff = result.value.length - (selection.endColumn - selection.startColumn);\n      // highlight\n      highlightRange = {\n        startLineNumber: highlightRange.startLineNumber,\n        startColumn: highlightRange.startColumn,\n        endLineNumber: highlightRange.endLineNumber,\n        endColumn: highlightRange.startColumn + result.value.length\n      };\n      if (diff > 1) {\n        selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n      }\n      // Insert new text\n      const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n      this.editor.pushUndoStop();\n      this.editor.executeCommand(source, command);\n      this.editor.pushUndoStop();\n      // add decoration\n      this.decorations.set([{\n        range: highlightRange,\n        options: InPlaceReplaceController_1.DECORATION\n      }]);\n      // remove decoration after delay\n      this.decorationRemover?.cancel();\n      this.decorationRemover = timeout(350);\n      this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\n    }).catch(onUnexpectedError);\n  }\n};\nInPlaceReplaceController = InPlaceReplaceController_1 = __decorate([__param(1, IEditorWorkerService)], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inPlaceReplace.up',\n      label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n      alias: 'Replace with Previous Value',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.Comma */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = InPlaceReplaceController.get(editor);\n    if (!controller) {\n      return Promise.resolve(undefined);\n    }\n    return controller.run(this.id, false);\n  }\n}\nclass InPlaceReplaceDown extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inPlaceReplace.down',\n      label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n      alias: 'Replace with Next Value',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = InPlaceReplaceController.get(editor);\n    if (!controller) {\n      return Promise.resolve(undefined);\n    }\n    return controller.run(this.id, true);\n  }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { reverseOrder, compareBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { observableValue, observableSignalFromEvent, autorunWithStore } from '../../../../base/common/observable.js';\nimport { HideUnchangedRegionsFeature } from '../../../browser/widget/diffEditor/features/hideUnchangedRegionsFeature.js';\nimport { DisposableCancellationTokenSource } from '../../../browser/widget/diffEditor/utils.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Event } from '../../../../base/common/event.js';\nlet DiffEditorBreadcrumbsSource = class DiffEditorBreadcrumbsSource extends Disposable {\n  constructor(_textModel, _languageFeaturesService, _outlineModelService) {\n    super();\n    this._textModel = _textModel;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._outlineModelService = _outlineModelService;\n    this._currentModel = observableValue(this, undefined);\n    const documentSymbolProviderChanged = observableSignalFromEvent('documentSymbolProvider.onDidChange', this._languageFeaturesService.documentSymbolProvider.onDidChange);\n    const textModelChanged = observableSignalFromEvent('_textModel.onDidChangeContent', Event.debounce(e => this._textModel.onDidChangeContent(e), () => undefined, 100));\n    this._register(autorunWithStore(async (reader, store) => {\n      documentSymbolProviderChanged.read(reader);\n      textModelChanged.read(reader);\n      const src = store.add(new DisposableCancellationTokenSource());\n      const model = await this._outlineModelService.getOrCreate(this._textModel, src.token);\n      if (store.isDisposed) {\n        return;\n      }\n      this._currentModel.set(model, undefined);\n    }));\n  }\n  getBreadcrumbItems(startRange, reader) {\n    const m = this._currentModel.read(reader);\n    if (!m) {\n      return [];\n    }\n    const symbols = m.asListOfDocumentSymbols().filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));\n    symbols.sort(reverseOrder(compareBy(s => s.range.endLineNumber - s.range.startLineNumber, numberComparator)));\n    return symbols.map(s => ({\n      name: s.name,\n      kind: s.kind,\n      startLineNumber: s.range.startLineNumber\n    }));\n  }\n};\nDiffEditorBreadcrumbsSource = __decorate([__param(1, ILanguageFeaturesService), __param(2, IOutlineModelService)], DiffEditorBreadcrumbsSource);\nHideUnchangedRegionsFeature.setBreadcrumbsSourceFactory((textModel, instantiationService) => {\n  return instantiationService.createInstance(DiffEditorBreadcrumbsSource, textModel);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .tokens-inspect-widget {\n\tz-index: 50;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tpadding: 10px;\n\tcolor: var(--vscode-editorHoverWidget-foreground);\n\tbackground-color: var(--vscode-editorHoverWidget-background);\n\tborder: 1px solid var(--vscode-editorHoverWidget-border);\n}\n.monaco-editor.hc-black .tokens-inspect-widget, .monaco-editor.hc-light .tokens-inspect-widget {\n\tborder-width: 2px;\n}\n\n.monaco-editor .tokens-inspect-widget .tokens-inspect-separator {\n\theight: 1px;\n\tborder: 0;\n\tbackground-color: var(--vscode-editorHoverWidget-border);\n}\n\n.monaco-editor .tokens-inspect-widget .tm-token {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n.monaco-editor .tokens-inspect-widget .tm-token-length {\n\tfont-weight: normal;\n\tfont-size: 60%;\n\tfloat: right;\n}\n\n.monaco-editor .tokens-inspect-widget .tm-metadata-table {\n\twidth: 100%;\n}\n\n.monaco-editor .tokens-inspect-widget .tm-metadata-value {\n\tfont-family: var(--monaco-monospace-font);\n\ttext-align: right;\n}\n\n.monaco-editor .tokens-inspect-widget .tm-token-type {\n\tfont-family: var(--monaco-monospace-font);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InspectTokensController_1;\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nlet InspectTokensController = /*#__PURE__*/(() => {\n  let InspectTokensController = class InspectTokensController extends Disposable {\n    static {\n      InspectTokensController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.inspectTokens';\n    }\n    static get(editor) {\n      return editor.getContribution(InspectTokensController_1.ID);\n    }\n    constructor(editor, standaloneColorService, languageService) {\n      super();\n      this._editor = editor;\n      this._languageService = languageService;\n      this._widget = null;\n      this._register(this._editor.onDidChangeModel(e => this.stop()));\n      this._register(this._editor.onDidChangeModelLanguage(e => this.stop()));\n      this._register(TokenizationRegistry.onDidChange(e => this.stop()));\n      this._register(this._editor.onKeyUp(e => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    dispose() {\n      this.stop();\n      super.dispose();\n    }\n    launch() {\n      if (this._widget) {\n        return;\n      }\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n      if (this._widget) {\n        this._widget.dispose();\n        this._widget = null;\n      }\n    }\n  };\n  return InspectTokensController;\n})();\nInspectTokensController = InspectTokensController_1 = __decorate([__param(1, IStandaloneThemeService), __param(2, ILanguageService)], InspectTokensController);\nclass InspectTokens extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inspectTokens',\n      label: InspectTokensNLS.inspectTokensAction,\n      alias: 'Developer: Inspect Tokens',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    const controller = InspectTokensController.get(editor);\n    controller?.launch();\n  }\n}\nfunction renderTokenText(tokenText) {\n  let result = '';\n  for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n    const charCode = tokenText.charCodeAt(charIndex);\n    switch (charCode) {\n      case 9 /* CharCode.Tab */:\n        result += '\\u2192'; // &rarr;\n        break;\n      case 32 /* CharCode.Space */:\n        result += '\\u00B7'; // &middot;\n        break;\n      default:\n        result += String.fromCharCode(charCode);\n    }\n  }\n  return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n  const tokenizationSupport = TokenizationRegistry.get(languageId);\n  if (tokenizationSupport) {\n    return tokenizationSupport;\n  }\n  const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n  return {\n    getInitialState: () => NullState,\n    tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n    tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n  };\n}\nlet InspectTokensWidget = /*#__PURE__*/(() => {\n  class InspectTokensWidget extends Disposable {\n    static {\n      this._ID = 'editor.contrib.inspectTokensWidget';\n    }\n    constructor(editor, languageService) {\n      super();\n      // Editor.IContentWidget.allowEditorOverflow\n      this.allowEditorOverflow = true;\n      this._editor = editor;\n      this._languageService = languageService;\n      this._model = this._editor.getModel();\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'tokens-inspect-widget';\n      this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n      this._compute(this._editor.getPosition());\n      this._register(this._editor.onDidChangeCursorPosition(e => this._compute(this._editor.getPosition())));\n      this._editor.addContentWidget(this);\n    }\n    dispose() {\n      this._editor.removeContentWidget(this);\n      super.dispose();\n    }\n    getId() {\n      return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n      const data = this._getTokensAtLine(position.lineNumber);\n      let token1Index = 0;\n      for (let i = data.tokens1.length - 1; i >= 0; i--) {\n        const t = data.tokens1[i];\n        if (position.column - 1 >= t.offset) {\n          token1Index = i;\n          break;\n        }\n      }\n      let token2Index = 0;\n      for (let i = data.tokens2.length >>> 1; i >= 0; i--) {\n        if (position.column - 1 >= data.tokens2[i << 1]) {\n          token2Index = i;\n          break;\n        }\n      }\n      const lineContent = this._model.getLineContent(position.lineNumber);\n      let tokenText = '';\n      if (token1Index < data.tokens1.length) {\n        const tokenStartIndex = data.tokens1[token1Index].offset;\n        const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n        tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n      }\n      reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n      append(this._domNode, $('hr.tokens-inspect-separator', {\n        'style': 'clear:both'\n      }));\n      const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n      append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n      append(this._domNode, $('hr.tokens-inspect-separator'));\n      if (token1Index < data.tokens1.length) {\n        append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n      }\n      this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n      const colorMap = TokenizationRegistry.getColorMap();\n      const languageId = TokenMetadata.getLanguageId(metadata);\n      const tokenType = TokenMetadata.getTokenType(metadata);\n      const fontStyle = TokenMetadata.getFontStyle(metadata);\n      const foreground = TokenMetadata.getForeground(metadata);\n      const background = TokenMetadata.getBackground(metadata);\n      return {\n        languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n        tokenType: tokenType,\n        fontStyle: fontStyle,\n        foreground: colorMap[foreground],\n        background: colorMap[background]\n      };\n    }\n    _tokenTypeToString(tokenType) {\n      switch (tokenType) {\n        case 0 /* StandardTokenType.Other */:\n          return 'Other';\n        case 1 /* StandardTokenType.Comment */:\n          return 'Comment';\n        case 2 /* StandardTokenType.String */:\n          return 'String';\n        case 3 /* StandardTokenType.RegEx */:\n          return 'RegEx';\n        default:\n          return '??';\n      }\n    }\n    _fontStyleToString(fontStyle) {\n      let r = '';\n      if (fontStyle & 1 /* FontStyle.Italic */) {\n        r += 'italic ';\n      }\n      if (fontStyle & 2 /* FontStyle.Bold */) {\n        r += 'bold ';\n      }\n      if (fontStyle & 4 /* FontStyle.Underline */) {\n        r += 'underline ';\n      }\n      if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n        r += 'strikethrough ';\n      }\n      if (r.length === 0) {\n        r = '---';\n      }\n      return r;\n    }\n    _getTokensAtLine(lineNumber) {\n      const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n      const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n      const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n      return {\n        startState: stateBeforeLine,\n        tokens1: tokenizationResult1.tokens,\n        tokens2: tokenizationResult2.tokens,\n        endState: tokenizationResult1.endState\n      };\n    }\n    _getStateBeforeLine(lineNumber) {\n      let state = this._tokenizationSupport.getInitialState();\n      for (let i = 1; i < lineNumber; i++) {\n        const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n        state = tokenizationResult.endState;\n      }\n      return state;\n    }\n    getDomNode() {\n      return this._domNode;\n    }\n    getPosition() {\n      return {\n        position: this._editor.getPosition(),\n        preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n      };\n    }\n  }\n  return InspectTokensWidget;\n})();\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(InspectTokens);","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\n\n// src/basic-languages/_.contribution.ts\nvar languageDefinitions = {};\nvar lazyLanguageLoaders = {};\nvar LazyLanguageLoader = class _LazyLanguageLoader {\n  static getOrCreate(languageId) {\n    if (!lazyLanguageLoaders[languageId]) {\n      lazyLanguageLoaders[languageId] = new _LazyLanguageLoader(languageId);\n    }\n    return lazyLanguageLoaders[languageId];\n  }\n  constructor(languageId) {\n    this._languageId = languageId;\n    this._loadingTriggered = false;\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\n      this._lazyLoadPromiseResolve = resolve;\n      this._lazyLoadPromiseReject = reject;\n    });\n  }\n  load() {\n    if (!this._loadingTriggered) {\n      this._loadingTriggered = true;\n      languageDefinitions[this._languageId].loader().then(mod => this._lazyLoadPromiseResolve(mod), err => this._lazyLoadPromiseReject(err));\n    }\n    return this._lazyLoadPromise;\n  }\n};\nasync function loadLanguage(languageId) {\n  await LazyLanguageLoader.getOrCreate(languageId).load();\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\n  model.dispose();\n}\nfunction registerLanguage(def) {\n  const languageId = def.id;\n  languageDefinitions[languageId] = def;\n  monaco_editor_core_exports.languages.register(def);\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\n    create: async () => {\n      const mod = await lazyLanguageLoader.load();\n      return mod.language;\n    }\n  });\n  monaco_editor_core_exports.languages.onLanguageEncountered(languageId, async () => {\n    const mod = await lazyLanguageLoader.load();\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\nexport { loadLanguage, registerLanguage };","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/abap/abap.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"abap\",\n  extensions: [\".abap\"],\n  aliases: [\"abap\", \"ABAP\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/abap/abap\"], resolve, reject);\n      });\n    } else {\n      return import(\"./abap.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/apex/apex.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"apex\",\n  extensions: [\".cls\"],\n  aliases: [\"Apex\", \"apex\"],\n  mimetypes: [\"text/x-apex-source\", \"text/x-apex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/apex/apex\"], resolve, reject);\n      });\n    } else {\n      return import(\"./apex.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/azcli/azcli.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"azcli\",\n  extensions: [\".azcli\"],\n  aliases: [\"Azure CLI\", \"azcli\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/azcli/azcli\"], resolve, reject);\n      });\n    } else {\n      return import(\"./azcli.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bat/bat.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bat\",\n  extensions: [\".bat\", \".cmd\"],\n  aliases: [\"Batch\", \"bat\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bat/bat\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bat.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bicep/bicep.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bicep\",\n  extensions: [\".bicep\"],\n  aliases: [\"Bicep\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bicep/bicep\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bicep.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cameligo/cameligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cameligo\",\n  extensions: [\".mligo\"],\n  aliases: [\"Cameligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cameligo/cameligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cameligo.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/clojure/clojure.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"clojure\",\n  extensions: [\".clj\", \".cljs\", \".cljc\", \".edn\"],\n  aliases: [\"clojure\", \"Clojure\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/clojure/clojure\"], resolve, reject);\n      });\n    } else {\n      return import(\"./clojure.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/coffee/coffee.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"coffeescript\",\n  extensions: [\".coffee\"],\n  aliases: [\"CoffeeScript\", \"coffeescript\", \"coffee\"],\n  mimetypes: [\"text/x-coffeescript\", \"text/coffeescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/coffee/coffee\"], resolve, reject);\n      });\n    } else {\n      return import(\"./coffee.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cpp/cpp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"c\",\n  extensions: [\".c\", \".h\"],\n  aliases: [\"C\", \"c\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"cpp\",\n  extensions: [\".cpp\", \".cc\", \".cxx\", \".hpp\", \".hh\", \".hxx\"],\n  aliases: [\"C++\", \"Cpp\", \"cpp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csharp/csharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csharp\",\n  extensions: [\".cs\", \".csx\", \".cake\"],\n  aliases: [\"C#\", \"csharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csharp/csharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csharp.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csp/csp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csp\",\n  extensions: [\".csp\"],\n  aliases: [\"CSP\", \"csp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csp/csp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csp.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/css/css.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"css\",\n  extensions: [\".css\"],\n  aliases: [\"CSS\", \"css\"],\n  mimetypes: [\"text/css\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\n      });\n    } else {\n      return import(\"./css.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cypher/cypher.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cypher\",\n  extensions: [\".cypher\", \".cyp\"],\n  aliases: [\"Cypher\", \"OpenCypher\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cypher/cypher\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cypher.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dart/dart.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dart\",\n  extensions: [\".dart\"],\n  aliases: [\"Dart\", \"dart\"],\n  mimetypes: [\"text/x-dart-source\", \"text/x-dart\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dart/dart\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dart.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dockerfile/dockerfile.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dockerfile\",\n  extensions: [\".dockerfile\"],\n  filenames: [\"Dockerfile\"],\n  aliases: [\"Dockerfile\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dockerfile/dockerfile\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dockerfile.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ecl/ecl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ecl\",\n  extensions: [\".ecl\"],\n  aliases: [\"ECL\", \"Ecl\", \"ecl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ecl/ecl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ecl.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/elixir/elixir.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"elixir\",\n  extensions: [\".ex\", \".exs\"],\n  aliases: [\"Elixir\", \"elixir\", \"ex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/elixir/elixir\"], resolve, reject);\n      });\n    } else {\n      return import(\"./elixir.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/flow9/flow9.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"flow9\",\n  extensions: [\".flow\"],\n  aliases: [\"Flow9\", \"Flow\", \"flow9\", \"flow\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/flow9/flow9\"], resolve, reject);\n      });\n    } else {\n      return import(\"./flow9.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/fsharp/fsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"fsharp\",\n  extensions: [\".fs\", \".fsi\", \".ml\", \".mli\", \".fsx\", \".fsscript\"],\n  aliases: [\"F#\", \"FSharp\", \"fsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/fsharp/fsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./fsharp.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/freemarker2/freemarker2.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"freemarker2\",\n  extensions: [\".ftl\", \".ftlh\", \".ftlx\"],\n  aliases: [\"FreeMarker2\", \"Apache FreeMarker2\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Angle/Dollar)\", \"Apache FreeMarker2 (Angle/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagAngleInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Bracket/Dollar)\", \"Apache FreeMarker2 (Bracket/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagBracketInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagBracketInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Angle/Bracket)\", \"Apache FreeMarker2 (Angle/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagAngleInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagAngleInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Bracket/Bracket)\", \"Apache FreeMarker2 (Bracket/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagBracketInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagBracketInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Auto/Dollar)\", \"Apache FreeMarker2 (Auto/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagAutoInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Auto/Bracket)\", \"Apache FreeMarker2 (Auto/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then(m => m.TagAutoInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then(m => m.TagAutoInterpolationBracket);\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/go/go.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"go\",\n  extensions: [\".go\"],\n  aliases: [\"Go\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/go/go\"], resolve, reject);\n      });\n    } else {\n      return import(\"./go.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/graphql/graphql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"graphql\",\n  extensions: [\".graphql\", \".gql\"],\n  aliases: [\"GraphQL\", \"graphql\", \"gql\"],\n  mimetypes: [\"application/graphql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/graphql/graphql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./graphql.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/handlebars/handlebars.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"handlebars\",\n  extensions: [\".handlebars\", \".hbs\"],\n  aliases: [\"Handlebars\", \"handlebars\", \"hbs\"],\n  mimetypes: [\"text/x-handlebars-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/handlebars/handlebars\"], resolve, reject);\n      });\n    } else {\n      return import(\"./handlebars.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/hcl/hcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"hcl\",\n  extensions: [\".tf\", \".tfvars\", \".hcl\"],\n  aliases: [\"Terraform\", \"tf\", \"HCL\", \"hcl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/hcl/hcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./hcl.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/html/html.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"html\",\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\n      });\n    } else {\n      return import(\"./html.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ini/ini.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ini\",\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\n  aliases: [\"Ini\", \"ini\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ini.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/java/java.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"java\",\n  extensions: [\".java\", \".jav\"],\n  aliases: [\"Java\", \"java\"],\n  mimetypes: [\"text/x-java-source\", \"text/x-java\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/java/java\"], resolve, reject);\n      });\n    } else {\n      return import(\"./java.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/javascript/javascript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"javascript\",\n  extensions: [\".js\", \".es6\", \".jsx\", \".mjs\", \".cjs\"],\n  firstLine: \"^#!.*\\\\bnode\",\n  filenames: [\"jakefile\"],\n  aliases: [\"JavaScript\", \"javascript\", \"js\"],\n  mimetypes: [\"text/javascript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/javascript/javascript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./javascript.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/julia/julia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"julia\",\n  extensions: [\".jl\"],\n  aliases: [\"julia\", \"Julia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/julia/julia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./julia.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/kotlin/kotlin.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"kotlin\",\n  extensions: [\".kt\", \".kts\"],\n  aliases: [\"Kotlin\", \"kotlin\"],\n  mimetypes: [\"text/x-kotlin-source\", \"text/x-kotlin\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/kotlin/kotlin\"], resolve, reject);\n      });\n    } else {\n      return import(\"./kotlin.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/less/less.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"less\",\n  extensions: [\".less\"],\n  aliases: [\"Less\", \"less\"],\n  mimetypes: [\"text/x-less\", \"text/less\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\n      });\n    } else {\n      return import(\"./less.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lexon/lexon.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lexon\",\n  extensions: [\".lex\"],\n  aliases: [\"Lexon\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lexon/lexon\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lexon.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lua/lua.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lua\",\n  extensions: [\".lua\"],\n  aliases: [\"Lua\", \"lua\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lua/lua\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lua.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/liquid/liquid.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"liquid\",\n  extensions: [\".liquid\", \".html.liquid\"],\n  aliases: [\"Liquid\", \"liquid\"],\n  mimetypes: [\"application/liquid\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/liquid/liquid\"], resolve, reject);\n      });\n    } else {\n      return import(\"./liquid.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/m3/m3.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"m3\",\n  extensions: [\".m3\", \".i3\", \".mg\", \".ig\"],\n  aliases: [\"Modula-3\", \"Modula3\", \"modula3\", \"m3\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/m3/m3\"], resolve, reject);\n      });\n    } else {\n      return import(\"./m3.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/markdown/markdown.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"markdown\",\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\n  aliases: [\"Markdown\", \"markdown\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\n      });\n    } else {\n      return import(\"./markdown.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mdx/mdx.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mdx\",\n  extensions: [\".mdx\"],\n  aliases: [\"MDX\", \"mdx\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mdx/mdx\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mdx.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mips/mips.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mips\",\n  extensions: [\".s\"],\n  aliases: [\"MIPS\", \"MIPS-V\"],\n  mimetypes: [\"text/x-mips\", \"text/mips\", \"text/plaintext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mips/mips\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mips.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/msdax/msdax.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"msdax\",\n  extensions: [\".dax\", \".msdax\"],\n  aliases: [\"DAX\", \"MSDAX\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/msdax/msdax\"], resolve, reject);\n      });\n    } else {\n      return import(\"./msdax.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mysql/mysql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mysql\",\n  extensions: [],\n  aliases: [\"MySQL\", \"mysql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mysql/mysql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mysql.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/objective-c/objective-c.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"objective-c\",\n  extensions: [\".m\"],\n  aliases: [\"Objective-C\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/objective-c/objective-c\"], resolve, reject);\n      });\n    } else {\n      return import(\"./objective-c.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascal/pascal.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascal\",\n  extensions: [\".pas\", \".p\", \".pp\"],\n  aliases: [\"Pascal\", \"pas\"],\n  mimetypes: [\"text/x-pascal-source\", \"text/x-pascal\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascal/pascal\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascal.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascaligo/pascaligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascaligo\",\n  extensions: [\".ligo\"],\n  aliases: [\"Pascaligo\", \"ligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascaligo/pascaligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascaligo.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/perl/perl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"perl\",\n  extensions: [\".pl\", \".pm\"],\n  aliases: [\"Perl\", \"pl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/perl/perl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./perl.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pgsql/pgsql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pgsql\",\n  extensions: [],\n  aliases: [\"PostgreSQL\", \"postgres\", \"pg\", \"postgre\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pgsql/pgsql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pgsql.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/php/php.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"php\",\n  extensions: [\".php\", \".php4\", \".php5\", \".phtml\", \".ctp\"],\n  aliases: [\"PHP\", \"php\"],\n  mimetypes: [\"application/x-php\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/php/php\"], resolve, reject);\n      });\n    } else {\n      return import(\"./php.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pla/pla.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pla\",\n  extensions: [\".pla\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pla/pla\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pla.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/postiats/postiats.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"postiats\",\n  extensions: [\".dats\", \".sats\", \".hats\"],\n  aliases: [\"ATS\", \"ATS/Postiats\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/postiats/postiats\"], resolve, reject);\n      });\n    } else {\n      return import(\"./postiats.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powerquery/powerquery.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powerquery\",\n  extensions: [\".pq\", \".pqm\"],\n  aliases: [\"PQ\", \"M\", \"Power Query\", \"Power Query M\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powerquery/powerquery\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powerquery.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powershell/powershell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powershell\",\n  extensions: [\".ps1\", \".psm1\", \".psd1\"],\n  aliases: [\"PowerShell\", \"powershell\", \"ps\", \"ps1\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powershell/powershell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powershell.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/protobuf/protobuf.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"proto\",\n  extensions: [\".proto\"],\n  aliases: [\"protobuf\", \"Protocol Buffers\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/protobuf/protobuf\"], resolve, reject);\n      });\n    } else {\n      return import(\"./protobuf.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pug/pug.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pug\",\n  extensions: [\".jade\", \".pug\"],\n  aliases: [\"Pug\", \"Jade\", \"jade\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pug/pug\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pug.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/python/python.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"python\",\n  extensions: [\".py\", \".rpy\", \".pyw\", \".cpy\", \".gyp\", \".gypi\"],\n  aliases: [\"Python\", \"py\"],\n  firstLine: \"^#!/.*\\\\bpython[0-9.-]*\\\\b\",\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/python/python\"], resolve, reject);\n      });\n    } else {\n      return import(\"./python.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/qsharp/qsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"qsharp\",\n  extensions: [\".qs\"],\n  aliases: [\"Q#\", \"qsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/qsharp/qsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./qsharp.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/r/r.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"r\",\n  extensions: [\".r\", \".rhistory\", \".rmd\", \".rprofile\", \".rt\"],\n  aliases: [\"R\", \"r\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/r/r\"], resolve, reject);\n      });\n    } else {\n      return import(\"./r.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/razor/razor.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"razor\",\n  extensions: [\".cshtml\"],\n  aliases: [\"Razor\", \"razor\"],\n  mimetypes: [\"text/x-cshtml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/razor/razor\"], resolve, reject);\n      });\n    } else {\n      return import(\"./razor.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redis/redis.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redis\",\n  extensions: [\".redis\"],\n  aliases: [\"redis\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redis/redis\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redis.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redshift/redshift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redshift\",\n  extensions: [],\n  aliases: [\"Redshift\", \"redshift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redshift/redshift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redshift.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/restructuredtext/restructuredtext.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"restructuredtext\",\n  extensions: [\".rst\"],\n  aliases: [\"reStructuredText\", \"restructuredtext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/restructuredtext/restructuredtext\"], resolve, reject);\n      });\n    } else {\n      return import(\"./restructuredtext.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ruby/ruby.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ruby\",\n  extensions: [\".rb\", \".rbx\", \".rjs\", \".gemspec\", \".pp\"],\n  filenames: [\"rakefile\", \"Gemfile\"],\n  aliases: [\"Ruby\", \"rb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ruby/ruby\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ruby.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/rust/rust.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"rust\",\n  extensions: [\".rs\", \".rlib\"],\n  aliases: [\"Rust\", \"rust\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/rust/rust\"], resolve, reject);\n      });\n    } else {\n      return import(\"./rust.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sb/sb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sb\",\n  extensions: [\".sb\"],\n  aliases: [\"Small Basic\", \"sb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sb/sb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sb.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scala/scala.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scala\",\n  extensions: [\".scala\", \".sc\", \".sbt\"],\n  aliases: [\"Scala\", \"scala\", \"SBT\", \"Sbt\", \"sbt\", \"Dotty\", \"dotty\"],\n  mimetypes: [\"text/x-scala-source\", \"text/x-scala\", \"text/x-sbt\", \"text/x-dotty\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scala/scala\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scala.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scheme/scheme.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scheme\",\n  extensions: [\".scm\", \".ss\", \".sch\", \".rkt\"],\n  aliases: [\"scheme\", \"Scheme\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scheme/scheme\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scheme.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scss/scss.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scss\",\n  extensions: [\".scss\"],\n  aliases: [\"Sass\", \"sass\", \"scss\"],\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scss.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/shell/shell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"shell\",\n  extensions: [\".sh\", \".bash\"],\n  aliases: [\"Shell\", \"sh\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/shell/shell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./shell.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/solidity/solidity.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sol\",\n  extensions: [\".sol\"],\n  aliases: [\"sol\", \"solidity\", \"Solidity\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/solidity/solidity\"], resolve, reject);\n      });\n    } else {\n      return import(\"./solidity.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sophia/sophia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"aes\",\n  extensions: [\".aes\"],\n  aliases: [\"aes\", \"sophia\", \"Sophia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sophia/sophia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sophia.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sparql/sparql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sparql\",\n  extensions: [\".rq\"],\n  aliases: [\"sparql\", \"SPARQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sparql/sparql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sparql.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sql/sql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sql\",\n  extensions: [\".sql\"],\n  aliases: [\"SQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sql/sql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sql.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/st/st.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"st\",\n  extensions: [\".st\", \".iecst\", \".iecplc\", \".lc3lib\", \".TcPOU\", \".TcDUT\", \".TcGVL\", \".TcIO\"],\n  aliases: [\"StructuredText\", \"scl\", \"stl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/st/st\"], resolve, reject);\n      });\n    } else {\n      return import(\"./st.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/swift/swift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"swift\",\n  aliases: [\"Swift\", \"swift\"],\n  extensions: [\".swift\"],\n  mimetypes: [\"text/swift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/swift/swift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./swift.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/systemverilog/systemverilog.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"systemverilog\",\n  extensions: [\".sv\", \".svh\"],\n  aliases: [\"SV\", \"sv\", \"SystemVerilog\", \"systemverilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"verilog\",\n  extensions: [\".v\", \".vh\"],\n  aliases: [\"V\", \"v\", \"Verilog\", \"verilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/tcl/tcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"tcl\",\n  extensions: [\".tcl\"],\n  aliases: [\"tcl\", \"Tcl\", \"tcltk\", \"TclTk\", \"tcl/tk\", \"Tcl/Tk\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/tcl/tcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./tcl.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/twig/twig.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"twig\",\n  extensions: [\".twig\"],\n  aliases: [\"Twig\", \"twig\"],\n  mimetypes: [\"text/x-twig\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/twig/twig\"], resolve, reject);\n      });\n    } else {\n      return import(\"./twig.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typescript/typescript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typescript\",\n  extensions: [\".ts\", \".tsx\", \".cts\", \".mts\"],\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\n  mimetypes: [\"text/typescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typescript.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typespec/typespec.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typespec\",\n  extensions: [\".tsp\"],\n  aliases: [\"TypeSpec\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typespec/typespec\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typespec.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/vb/vb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"vb\",\n  extensions: [\".vb\"],\n  aliases: [\"Visual Basic\", \"vb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/vb/vb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./vb.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/wgsl/wgsl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"wgsl\",\n  extensions: [\".wgsl\"],\n  aliases: [\"WebGPU Shading Language\", \"WGSL\", \"wgsl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/wgsl/wgsl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./wgsl.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/xml/xml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"xml\",\n  extensions: [\".xml\", \".xsd\", \".dtd\", \".ascx\", \".csproj\", \".config\", \".props\", \".targets\", \".wxi\", \".wxl\", \".wxs\", \".xaml\", \".svg\", \".svgz\", \".opf\", \".xslt\", \".xsl\"],\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\n  aliases: [\"XML\", \"xml\"],\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./xml.js\");\n    }\n  }\n});","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/yaml/yaml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"yaml\",\n  extensions: [\".yaml\", \".yml\"],\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./yaml.js\");\n    }\n  }\n});","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/css/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  constructor(languageId, options, modeConfiguration) {\n    this._onDidChange = new monaco_editor_core_exports.Emitter();\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this.options;\n  }\n  get options() {\n    return this._options;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setDiagnosticsOptions(options) {\n    this.setOptions(options);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar optionsDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: \"ignore\",\n    vendorPrefix: \"warning\",\n    duplicateProperties: \"warning\",\n    emptyRules: \"warning\",\n    importStatement: \"ignore\",\n    boxModel: \"ignore\",\n    universalSelector: \"ignore\",\n    zeroUnits: \"ignore\",\n    fontFaceProperties: \"warning\",\n    hexColorLength: \"error\",\n    argumentsInColorFunction: \"error\",\n    unknownProperties: \"warning\",\n    ieHack: \"ignore\",\n    unknownVendorSpecificProperties: \"ignore\",\n    propertyIgnoredDueToDisplay: \"warning\",\n    important: \"ignore\",\n    float: \"ignore\",\n    idSelector: \"ignore\"\n  },\n  data: {\n    useDefaultDataProvider: true\n  },\n  format: {\n    newlineBetweenSelectors: true,\n    newlineBetweenRules: true,\n    spaceAroundSelectorSeparator: false,\n    braceStyle: \"collapse\",\n    maxPreserveNewLines: void 0,\n    preserveNewLines: true\n  }\n};\nvar modeConfigurationDefault = {\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  definitions: true,\n  references: true,\n  documentHighlights: true,\n  rename: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true,\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.css = {\n  cssDefaults,\n  lessDefaults,\n  scssDefaults\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./cssMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\n  getMode().then(mode => mode.setupMode(lessDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\n  getMode().then(mode => mode.setupMode(scssDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\n  getMode().then(mode => mode.setupMode(cssDefaults));\n});\nexport { cssDefaults, lessDefaults, scssDefaults };","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/html/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  constructor(languageId, options, modeConfiguration) {\n    this._onDidChange = new monaco_editor_core_exports.Emitter();\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get options() {\n    return this._options;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: \"pre\",\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: void 0,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: \"head, body, /html\",\n  wrapAttributes: \"auto\"\n};\nvar optionsDefault = {\n  format: formatDefaults,\n  suggest: {},\n  data: {\n    useDefaultDataProvider: true\n  }\n};\nfunction getConfigurationDefault(languageId) {\n  return {\n    completionItems: true,\n    hovers: true,\n    documentSymbols: true,\n    links: true,\n    documentHighlights: true,\n    rename: true,\n    colors: true,\n    foldingRanges: true,\n    selectionRanges: true,\n    diagnostics: languageId === htmlLanguageId,\n    // turned off for Razor and Handlebar\n    documentFormattingEdits: languageId === htmlLanguageId,\n    // turned off for Razor and Handlebar\n    documentRangeFormattingEdits: languageId === htmlLanguageId\n    // turned off for Razor and Handlebar\n  };\n}\nvar htmlLanguageId = \"html\";\nvar handlebarsLanguageId = \"handlebars\";\nvar razorLanguageId = \"razor\";\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\nvar htmlDefaults = htmlLanguageService.defaults;\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\nvar handlebarDefaults = handlebarLanguageService.defaults;\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\nvar razorDefaults = razorLanguageService.defaults;\nmonaco_editor_core_exports.languages.html = {\n  htmlDefaults,\n  razorDefaults,\n  handlebarDefaults,\n  htmlLanguageService,\n  handlebarLanguageService,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./htmlMode.js\");\n  }\n}\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\n  let mode;\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    mode = (await getMode()).setupMode(defaults);\n  });\n  return {\n    defaults,\n    dispose() {\n      onLanguageListener.dispose();\n      mode?.dispose();\n      mode = void 0;\n    }\n  };\n}\nexport { handlebarDefaults, handlebarLanguageService, htmlDefaults, htmlLanguageService, razorDefaults, razorLanguageService, registerHTMLLanguageService };","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/json/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\n    this._onDidChange = new monaco_editor_core_exports.Emitter();\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false,\n  schemaRequest: \"warning\",\n  schemaValidation: \"warning\",\n  comments: \"error\",\n  trailingCommas: \"error\"\n};\nvar modeConfigurationDefault = {\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true,\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  tokens: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\nvar getWorker = () => getMode().then(mode => mode.getWorker());\nmonaco_editor_core_exports.languages.json = {\n  jsonDefaults,\n  getWorker\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./jsonMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.register({\n  id: \"json\",\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\n  aliases: [\"JSON\", \"json\"],\n  mimetypes: [\"application/json\"]\n});\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\n  getMode().then(mode => mode.setupMode(jsonDefaults));\n});\nexport { getWorker, jsonDefaults };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { AccessibleDiffViewerNext, AccessibleDiffViewerPrev, CollapseAllUnchangedRegions, ExitCompareMove, RevertHunkOrSelection, ShowAllUnchangedRegions, SwitchSide, ToggleCollapseUnchangedRegions, ToggleShowMovedCodeBlocks, ToggleUseInlineViewWhenSpaceIsLimited } from './commands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport './registrations.contribution.js';\nregisterAction2(ToggleCollapseUnchangedRegions);\nregisterAction2(ToggleShowMovedCodeBlocks);\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n  command: {\n    id: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\n    title: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\n    toggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\n    precondition: ContextKeyExpr.has('isInDiffEditor')\n  },\n  order: 11,\n  group: '1_diff',\n  when: ContextKeyExpr.and(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, ContextKeyExpr.has('isInDiffEditor'))\n});\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n  command: {\n    id: new ToggleShowMovedCodeBlocks().desc.id,\n    title: localize('showMoves', \"Show Moved Code Blocks\"),\n    icon: Codicon.move,\n    toggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\n    precondition: ContextKeyExpr.has('isInDiffEditor')\n  },\n  order: 10,\n  group: '1_diff',\n  when: ContextKeyExpr.has('isInDiffEditor')\n});\nregisterAction2(RevertHunkOrSelection);\nfor (const ctx of [{\n  icon: Codicon.arrowRight,\n  key: EditorContextKeys.diffEditorInlineMode.toNegated()\n}, {\n  icon: Codicon.discard,\n  key: EditorContextKeys.diffEditorInlineMode\n}]) {\n  MenuRegistry.appendMenuItem(MenuId.DiffEditorHunkToolbar, {\n    command: {\n      id: new RevertHunkOrSelection().desc.id,\n      title: localize('revertHunk', \"Revert Block\"),\n      icon: ctx.icon\n    },\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n    order: 5,\n    group: 'primary'\n  });\n  MenuRegistry.appendMenuItem(MenuId.DiffEditorSelectionToolbar, {\n    command: {\n      id: new RevertHunkOrSelection().desc.id,\n      title: localize('revertSelection', \"Revert Selection\"),\n      icon: ctx.icon\n    },\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n    order: 5,\n    group: 'primary'\n  });\n}\nregisterAction2(SwitchSide);\nregisterAction2(ExitCompareMove);\nregisterAction2(CollapseAllUnchangedRegions);\nregisterAction2(ShowAllUnchangedRegions);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n  command: {\n    id: AccessibleDiffViewerNext.id,\n    title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n    precondition: ContextKeyExpr.has('isInDiffEditor')\n  },\n  order: 10,\n  group: '2_diff',\n  when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor'))\n});\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getActiveElement } from '../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { EditorAction2 } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { DiffEditorWidget } from './diffEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize2 } from '../../../../nls.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport './registrations.contribution.js';\nexport class ToggleCollapseUnchangedRegions extends Action2 {\n  constructor() {\n    super({\n      id: 'diffEditor.toggleCollapseUnchangedRegions',\n      title: localize2('toggleCollapseUnchangedRegions', 'Toggle Collapse Unchanged Regions'),\n      icon: Codicon.map,\n      toggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      menu: {\n        when: ContextKeyExpr.has('isInDiffEditor'),\n        id: MenuId.EditorTitle,\n        order: 22,\n        group: 'navigation'\n      }\n    });\n  }\n  run(accessor, ...args) {\n    const configurationService = accessor.get(IConfigurationService);\n    const newValue = !configurationService.getValue('diffEditor.hideUnchangedRegions.enabled');\n    configurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\n  }\n}\nexport class ToggleShowMovedCodeBlocks extends Action2 {\n  constructor() {\n    super({\n      id: 'diffEditor.toggleShowMovedCodeBlocks',\n      title: localize2('toggleShowMovedCodeBlocks', 'Toggle Show Moved Code Blocks'),\n      precondition: ContextKeyExpr.has('isInDiffEditor')\n    });\n  }\n  run(accessor, ...args) {\n    const configurationService = accessor.get(IConfigurationService);\n    const newValue = !configurationService.getValue('diffEditor.experimental.showMoves');\n    configurationService.updateValue('diffEditor.experimental.showMoves', newValue);\n  }\n}\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\n  constructor() {\n    super({\n      id: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\n      title: localize2('toggleUseInlineViewWhenSpaceIsLimited', 'Toggle Use Inline View When Space Is Limited'),\n      precondition: ContextKeyExpr.has('isInDiffEditor')\n    });\n  }\n  run(accessor, ...args) {\n    const configurationService = accessor.get(IConfigurationService);\n    const newValue = !configurationService.getValue('diffEditor.useInlineViewWhenSpaceIsLimited');\n    configurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\n  }\n}\nconst diffEditorCategory = localize2('diffEditor', \"Diff Editor\");\nexport class SwitchSide extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'diffEditor.switchSide',\n      title: localize2('switchSide', 'Switch Side'),\n      icon: Codicon.arrowSwap,\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      f1: true,\n      category: diffEditorCategory\n    });\n  }\n  runEditorCommand(accessor, editor, arg) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    if (diffEditor instanceof DiffEditorWidget) {\n      if (arg && arg.dryRun) {\n        return {\n          destinationSelection: diffEditor.mapToOtherSide().destinationSelection\n        };\n      } else {\n        diffEditor.switchSide();\n      }\n    }\n    return undefined;\n  }\n}\nexport class ExitCompareMove extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'diffEditor.exitCompareMove',\n      title: localize2('exitCompareMove', 'Exit Compare Move'),\n      icon: Codicon.close,\n      precondition: EditorContextKeys.comparingMovedCode,\n      f1: false,\n      category: diffEditorCategory,\n      keybinding: {\n        weight: 10000,\n        primary: 9 /* KeyCode.Escape */\n      }\n    });\n  }\n  runEditorCommand(accessor, editor, ...args) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    if (diffEditor instanceof DiffEditorWidget) {\n      diffEditor.exitCompareMove();\n    }\n  }\n}\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'diffEditor.collapseAllUnchangedRegions',\n      title: localize2('collapseAllUnchangedRegions', 'Collapse All Unchanged Regions'),\n      icon: Codicon.fold,\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      f1: true,\n      category: diffEditorCategory\n    });\n  }\n  runEditorCommand(accessor, editor, ...args) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    if (diffEditor instanceof DiffEditorWidget) {\n      diffEditor.collapseAllUnchangedRegions();\n    }\n  }\n}\nexport class ShowAllUnchangedRegions extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'diffEditor.showAllUnchangedRegions',\n      title: localize2('showAllUnchangedRegions', 'Show All Unchanged Regions'),\n      icon: Codicon.unfold,\n      precondition: ContextKeyExpr.has('isInDiffEditor'),\n      f1: true,\n      category: diffEditorCategory\n    });\n  }\n  runEditorCommand(accessor, editor, ...args) {\n    const diffEditor = findFocusedDiffEditor(accessor);\n    if (diffEditor instanceof DiffEditorWidget) {\n      diffEditor.showAllUnchangedRegions();\n    }\n  }\n}\nexport class RevertHunkOrSelection extends Action2 {\n  constructor() {\n    super({\n      id: 'diffEditor.revert',\n      title: localize2('revert', 'Revert'),\n      f1: false,\n      category: diffEditorCategory\n    });\n  }\n  run(accessor, arg) {\n    const diffEditor = findDiffEditor(accessor, arg.originalUri, arg.modifiedUri);\n    if (diffEditor instanceof DiffEditorWidget) {\n      diffEditor.revertRangeMappings(arg.mapping.innerChanges ?? []);\n    }\n    return undefined;\n  }\n}\nconst accessibleDiffViewerCategory = localize2('accessibleDiffViewer', \"Accessible Diff Viewer\");\nexport let AccessibleDiffViewerNext = /*#__PURE__*/(() => {\n  class AccessibleDiffViewerNext extends Action2 {\n    static {\n      this.id = 'editor.action.accessibleDiffViewer.next';\n    }\n    constructor() {\n      super({\n        id: AccessibleDiffViewerNext.id,\n        title: localize2('editor.action.accessibleDiffViewer.next', 'Go to Next Difference'),\n        category: accessibleDiffViewerCategory,\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n        keybinding: {\n          primary: 65 /* KeyCode.F7 */,\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        },\n        f1: true\n      });\n    }\n    run(accessor) {\n      const diffEditor = findFocusedDiffEditor(accessor);\n      diffEditor?.accessibleDiffViewerNext();\n    }\n  }\n  return AccessibleDiffViewerNext;\n})();\nexport let AccessibleDiffViewerPrev = /*#__PURE__*/(() => {\n  class AccessibleDiffViewerPrev extends Action2 {\n    static {\n      this.id = 'editor.action.accessibleDiffViewer.prev';\n    }\n    constructor() {\n      super({\n        id: AccessibleDiffViewerPrev.id,\n        title: localize2('editor.action.accessibleDiffViewer.prev', 'Go to Previous Difference'),\n        category: accessibleDiffViewerCategory,\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n        keybinding: {\n          primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        },\n        f1: true\n      });\n    }\n    run(accessor) {\n      const diffEditor = findFocusedDiffEditor(accessor);\n      diffEditor?.accessibleDiffViewerPrev();\n    }\n  }\n  return AccessibleDiffViewerPrev;\n})();\nexport function findDiffEditor(accessor, originalUri, modifiedUri) {\n  const codeEditorService = accessor.get(ICodeEditorService);\n  const diffEditors = codeEditorService.listDiffEditors();\n  return diffEditors.find(diffEditor => {\n    const modified = diffEditor.getModifiedEditor();\n    const original = diffEditor.getOriginalEditor();\n    return modified && modified.getModel()?.uri.toString() === modifiedUri.toString() && original && original.getModel()?.uri.toString() === originalUri.toString();\n  }) || null;\n}\nexport function findFocusedDiffEditor(accessor) {\n  const codeEditorService = accessor.get(ICodeEditorService);\n  const diffEditors = codeEditorService.listDiffEditors();\n  const activeElement = getActiveElement();\n  if (activeElement) {\n    for (const d of diffEditors) {\n      const container = d.getContainerDomNode();\n      if (isElementOrParentOf(container, activeElement)) {\n        return d;\n      }\n    }\n  }\n  return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n  let e = element;\n  while (e) {\n    if (e === elementOrParent) {\n      return true;\n    }\n    e = e.parentElement;\n  }\n  return false;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SelectionAnchorController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = /*#__PURE__*/(() => {\n  let SelectionAnchorController = class SelectionAnchorController {\n    static {\n      SelectionAnchorController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.selectionAnchorController';\n    }\n    static get(editor) {\n      return editor.getContribution(SelectionAnchorController_1.ID);\n    }\n    constructor(editor, contextKeyService) {\n      this.editor = editor;\n      this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n      this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n      if (this.editor.hasModel()) {\n        const position = this.editor.getPosition();\n        this.editor.changeDecorations(accessor => {\n          if (this.decorationId) {\n            accessor.removeDecoration(this.decorationId);\n          }\n          this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n            description: 'selection-anchor',\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n            hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n            className: 'selection-anchor'\n          });\n        });\n        this.selectionAnchorSetContextKey.set(!!this.decorationId);\n        alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n      }\n    }\n    goToSelectionAnchor() {\n      if (this.editor.hasModel() && this.decorationId) {\n        const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n        if (anchorPosition) {\n          this.editor.setPosition(anchorPosition.getStartPosition());\n        }\n      }\n    }\n    selectFromAnchorToCursor() {\n      if (this.editor.hasModel() && this.decorationId) {\n        const start = this.editor.getModel().getDecorationRange(this.decorationId);\n        if (start) {\n          const end = this.editor.getPosition();\n          this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n          this.cancelSelectionAnchor();\n        }\n      }\n    }\n    cancelSelectionAnchor() {\n      if (this.decorationId) {\n        const decorationId = this.decorationId;\n        this.editor.changeDecorations(accessor => {\n          accessor.removeDecoration(decorationId);\n          this.decorationId = undefined;\n        });\n        this.selectionAnchorSetContextKey.set(false);\n      }\n    }\n    dispose() {\n      this.cancelSelectionAnchor();\n      this.modelChangeListener.dispose();\n    }\n  };\n  return SelectionAnchorController;\n})();\nSelectionAnchorController = SelectionAnchorController_1 = __decorate([__param(1, IContextKeyService)], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.setSelectionAnchor',\n      label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n      alias: 'Set Selection Anchor',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  async run(_accessor, editor) {\n    SelectionAnchorController.get(editor)?.setSelectionAnchor();\n  }\n}\nclass GoToSelectionAnchor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.goToSelectionAnchor',\n      label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n      alias: 'Go to Selection Anchor',\n      precondition: SelectionAnchorSet\n    });\n  }\n  async run(_accessor, editor) {\n    SelectionAnchorController.get(editor)?.goToSelectionAnchor();\n  }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.selectFromAnchorToCursor',\n      label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n      alias: 'Select from Anchor to Cursor',\n      precondition: SelectionAnchorSet,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  async run(_accessor, editor) {\n    SelectionAnchorController.get(editor)?.selectFromAnchorToCursor();\n  }\n}\nclass CancelSelectionAnchor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.cancelSelectionAnchor',\n      label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n      alias: 'Cancel Selection Anchor',\n      precondition: SelectionAnchorSet,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  async run(_accessor, editor) {\n    SelectionAnchorController.get(editor)?.cancelSelectionAnchor();\n  }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', '#A0A0A0', nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.jumpToBracket',\n      label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n      alias: 'Go to Bracket',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    BracketMatchingController.get(editor)?.jumpToBracket();\n  }\n}\nclass SelectToBracketAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.selectToBracket',\n      label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n      alias: 'Select to Bracket',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('smartSelect.selectToBracketDescription', \"Select the text inside and including the brackets or curly braces\"),\n        args: [{\n          name: 'args',\n          schema: {\n            type: 'object',\n            properties: {\n              'selectBrackets': {\n                type: 'boolean',\n                default: true\n              }\n            }\n          }\n        }]\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    let selectBrackets = true;\n    if (args && args.selectBrackets === false) {\n      selectBrackets = false;\n    }\n    BracketMatchingController.get(editor)?.selectToBracket(selectBrackets);\n  }\n}\nclass RemoveBracketsAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.removeBrackets',\n      label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n      alias: 'Remove Brackets',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    BracketMatchingController.get(editor)?.removeBrackets(this.id);\n  }\n}\nclass BracketsData {\n  constructor(position, brackets, options) {\n    this.position = position;\n    this.brackets = brackets;\n    this.options = options;\n  }\n}\nexport class BracketMatchingController extends Disposable {\n  static {\n    this.ID = 'editor.contrib.bracketMatchingController';\n  }\n  static get(editor) {\n    return editor.getContribution(BracketMatchingController.ID);\n  }\n  constructor(editor) {\n    super();\n    this._editor = editor;\n    this._lastBracketsData = [];\n    this._lastVersionId = 0;\n    this._decorations = this._editor.createDecorationsCollection();\n    this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n    this._matchBrackets = this._editor.getOption(72 /* EditorOption.matchBrackets */);\n    this._updateBracketsSoon.schedule();\n    this._register(editor.onDidChangeCursorPosition(e => {\n      if (this._matchBrackets === 'never') {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModelContent(e => {\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModel(e => {\n      this._lastBracketsData = [];\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModelLanguageConfiguration(e => {\n      this._lastBracketsData = [];\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(72 /* EditorOption.matchBrackets */)) {\n        this._matchBrackets = this._editor.getOption(72 /* EditorOption.matchBrackets */);\n        this._decorations.clear();\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._updateBracketsSoon.schedule();\n      }\n    }));\n    this._register(editor.onDidBlurEditorWidget(() => {\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidFocusEditorWidget(() => {\n      this._updateBracketsSoon.schedule();\n    }));\n  }\n  jumpToBracket() {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const newSelections = this._editor.getSelections().map(selection => {\n      const position = selection.getStartPosition();\n      // find matching brackets if position is on a bracket\n      const brackets = model.bracketPairs.matchBracket(position);\n      let newCursorPosition = null;\n      if (brackets) {\n        if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n          newCursorPosition = brackets[1].getStartPosition();\n        } else if (brackets[1].containsPosition(position)) {\n          newCursorPosition = brackets[0].getStartPosition();\n        }\n      } else {\n        // find the enclosing brackets if the position isn't on a matching bracket\n        const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n        if (enclosingBrackets) {\n          newCursorPosition = enclosingBrackets[1].getStartPosition();\n        } else {\n          // no enclosing brackets, try the very first next bracket\n          const nextBracket = model.bracketPairs.findNextBracket(position);\n          if (nextBracket && nextBracket.range) {\n            newCursorPosition = nextBracket.range.getStartPosition();\n          }\n        }\n      }\n      if (newCursorPosition) {\n        return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n      }\n      return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n    });\n    this._editor.setSelections(newSelections);\n    this._editor.revealRange(newSelections[0]);\n  }\n  selectToBracket(selectBrackets) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const newSelections = [];\n    this._editor.getSelections().forEach(selection => {\n      const position = selection.getStartPosition();\n      let brackets = model.bracketPairs.matchBracket(position);\n      if (!brackets) {\n        brackets = model.bracketPairs.findEnclosingBrackets(position);\n        if (!brackets) {\n          const nextBracket = model.bracketPairs.findNextBracket(position);\n          if (nextBracket && nextBracket.range) {\n            brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n          }\n        }\n      }\n      let selectFrom = null;\n      let selectTo = null;\n      if (brackets) {\n        brackets.sort(Range.compareRangesUsingStarts);\n        const [open, close] = brackets;\n        selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n        selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n        if (close.containsPosition(position)) {\n          // select backwards if the cursor was on the closing bracket\n          const tmp = selectFrom;\n          selectFrom = selectTo;\n          selectTo = tmp;\n        }\n      }\n      if (selectFrom && selectTo) {\n        newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n      }\n    });\n    if (newSelections.length > 0) {\n      this._editor.setSelections(newSelections);\n      this._editor.revealRange(newSelections[0]);\n    }\n  }\n  removeBrackets(editSource) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    this._editor.getSelections().forEach(selection => {\n      const position = selection.getPosition();\n      let brackets = model.bracketPairs.matchBracket(position);\n      if (!brackets) {\n        brackets = model.bracketPairs.findEnclosingBrackets(position);\n      }\n      if (brackets) {\n        this._editor.pushUndoStop();\n        this._editor.executeEdits(editSource, [{\n          range: brackets[0],\n          text: ''\n        }, {\n          range: brackets[1],\n          text: ''\n        }]);\n        this._editor.pushUndoStop();\n      }\n    });\n  }\n  static {\n    this._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n      description: 'bracket-match-overview',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      className: 'bracket-match',\n      overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n      }\n    });\n  }\n  static {\n    this._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n      description: 'bracket-match-no-overview',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      className: 'bracket-match'\n    });\n  }\n  _updateBrackets() {\n    if (this._matchBrackets === 'never') {\n      return;\n    }\n    this._recomputeBrackets();\n    const newDecorations = [];\n    let newDecorationsLen = 0;\n    for (const bracketData of this._lastBracketsData) {\n      const brackets = bracketData.brackets;\n      if (brackets) {\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[0],\n          options: bracketData.options\n        };\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[1],\n          options: bracketData.options\n        };\n      }\n    }\n    this._decorations.set(newDecorations);\n  }\n  _recomputeBrackets() {\n    if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n      // no model or no focus => no brackets!\n      this._lastBracketsData = [];\n      this._lastVersionId = 0;\n      return;\n    }\n    const selections = this._editor.getSelections();\n    if (selections.length > 100) {\n      // no bracket matching for high numbers of selections\n      this._lastBracketsData = [];\n      this._lastVersionId = 0;\n      return;\n    }\n    const model = this._editor.getModel();\n    const versionId = model.getVersionId();\n    let previousData = [];\n    if (this._lastVersionId === versionId) {\n      // use the previous data only if the model is at the same version id\n      previousData = this._lastBracketsData;\n    }\n    const positions = [];\n    let positionsLen = 0;\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const selection = selections[i];\n      if (selection.isEmpty()) {\n        // will bracket match a cursor only if the selection is collapsed\n        positions[positionsLen++] = selection.getStartPosition();\n      }\n    }\n    // sort positions for `previousData` cache hits\n    if (positions.length > 1) {\n      positions.sort(Position.compare);\n    }\n    const newData = [];\n    let newDataLen = 0;\n    let previousIndex = 0;\n    const previousLen = previousData.length;\n    for (let i = 0, len = positions.length; i < len; i++) {\n      const position = positions[i];\n      while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n        previousIndex++;\n      }\n      if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n        newData[newDataLen++] = previousData[previousIndex];\n      } else {\n        let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n        let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n        if (!brackets && this._matchBrackets === 'always') {\n          brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n          options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n        }\n        newData[newDataLen++] = new BracketsData(position, brackets, options);\n      }\n    }\n    this._lastBracketsData = newData;\n    this._lastVersionId = versionId;\n  }\n}\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n  group: '5_infile_nav',\n  command: {\n    id: 'editor.action.jumpToBracket',\n    title: nls.localize({\n      key: 'miGoToBracket',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Bracket\")\n  },\n  order: 2\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n  constructor(left, opts) {\n    super(opts);\n    this.left = left;\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const commands = [];\n    const selections = editor.getSelections();\n    for (const selection of selections) {\n      commands.push(new MoveCaretCommand(selection, this.left));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.moveCarretLeftAction',\n      label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n      alias: 'Move Selected Text Left',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.moveCarretRightAction',\n      label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n      alias: 'Move Selected Text Right',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n  constructor(selection, isMovingLeft) {\n    this._selection = selection;\n    this._isMovingLeft = isMovingLeft;\n  }\n  getEditOperations(model, builder) {\n    if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n      return;\n    }\n    const lineNumber = this._selection.startLineNumber;\n    const startColumn = this._selection.startColumn;\n    const endColumn = this._selection.endColumn;\n    if (this._isMovingLeft && startColumn === 1) {\n      return;\n    }\n    if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n      return;\n    }\n    if (this._isMovingLeft) {\n      const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n      const charBefore = model.getValueInRange(rangeBefore);\n      builder.addEditOperation(rangeBefore, null);\n      builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n    } else {\n      const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n      const charAfter = model.getValueInRange(rangeAfter);\n      builder.addEditOperation(rangeAfter, null);\n      builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n    }\n  }\n  computeCursorState(model, helper) {\n    if (this._isMovingLeft) {\n      return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n    } else {\n      return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.transposeLetters',\n      label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n      alias: 'Transpose Letters',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    const commands = [];\n    const selections = editor.getSelections();\n    for (const selection of selections) {\n      if (!selection.isEmpty()) {\n        continue;\n      }\n      const lineNumber = selection.startLineNumber;\n      const column = selection.startColumn;\n      const lastColumn = model.getLineMaxColumn(lineNumber);\n      if (lineNumber === 1 && (column === 1 || column === 2 && lastColumn === 2)) {\n        // at beginning of file, nothing to do\n        continue;\n      }\n      // handle special case: when at end of line, transpose left two chars\n      // otherwise, transpose left and right chars\n      const endPosition = column === lastColumn ? selection.getPosition() : MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n      const middlePosition = MoveOperations.leftPosition(model, endPosition);\n      const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n      const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n      const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n      const replaceRange = Range.fromPositions(beginPosition, endPosition);\n      commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n    }\n    if (commands.length > 0) {\n      editor.pushUndoStop();\n      editor.executeCommands(this.id, commands);\n      editor.pushUndoStop();\n    }\n  }\n}\nregisterEditorAction(TransposeLettersAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../../base/browser/browser.js';\nimport { getActiveDocument } from '../../../../base/browser/dom.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyPasteController } from '../../dropOrPasteInto/browser/copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = platform.isNative || document.queryCommandSupported('cut');\nconst supportsCopy = platform.isNative || document.queryCommandSupported('copy');\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = typeof navigator.clipboard === 'undefined' || browser.isFirefox ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n  command.register();\n  return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n  id: 'editor.action.clipboardCutAction',\n  precondition: undefined,\n  kbOpts:\n  // Do not bind cut keybindings in the browser,\n  // since browsers do that for us and it avoids security prompts\n  platform.isNative ? {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n    win: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n      secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */]\n    },\n    weight: 100 /* KeybindingWeight.EditorContrib */\n  } : undefined,\n  menuOpts: [{\n    menuId: MenuId.MenubarEditMenu,\n    group: '2_ccp',\n    title: nls.localize({\n      key: 'miCut',\n      comment: ['&& denotes a mnemonic']\n    }, \"Cu&&t\"),\n    order: 1\n  }, {\n    menuId: MenuId.EditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n    when: EditorContextKeys.writable,\n    order: 1\n  }, {\n    menuId: MenuId.CommandPalette,\n    group: '',\n    title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n    order: 1\n  }, {\n    menuId: MenuId.SimpleEditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n    when: EditorContextKeys.writable,\n    order: 1\n  }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n  id: 'editor.action.clipboardCopyAction',\n  precondition: undefined,\n  kbOpts:\n  // Do not bind copy keybindings in the browser,\n  // since browsers do that for us and it avoids security prompts\n  platform.isNative ? {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n    win: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n      secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */]\n    },\n    weight: 100 /* KeybindingWeight.EditorContrib */\n  } : undefined,\n  menuOpts: [{\n    menuId: MenuId.MenubarEditMenu,\n    group: '2_ccp',\n    title: nls.localize({\n      key: 'miCopy',\n      comment: ['&& denotes a mnemonic']\n    }, \"&&Copy\"),\n    order: 2\n  }, {\n    menuId: MenuId.EditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n    order: 2\n  }, {\n    menuId: MenuId.CommandPalette,\n    group: '',\n    title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n    order: 1\n  }, {\n    menuId: MenuId.SimpleEditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n    order: 2\n  }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, {\n  submenu: MenuId.MenubarCopy,\n  title: nls.localize2('copy as', \"Copy As\"),\n  group: '2_ccp',\n  order: 3\n});\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n  submenu: MenuId.EditorContextCopy,\n  title: nls.localize2('copy as', \"Copy As\"),\n  group: CLIPBOARD_CONTEXT_MENU_GROUP,\n  order: 3\n});\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n  submenu: MenuId.EditorContextShare,\n  title: nls.localize2('share', \"Share\"),\n  group: '11_share',\n  order: -1,\n  when: ContextKeyExpr.and(ContextKeyExpr.notEquals('resourceScheme', 'output'), EditorContextKeys.editorTextFocus)\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n  submenu: MenuId.ExplorerContextShare,\n  title: nls.localize2('share', \"Share\"),\n  group: '11_share',\n  order: -1\n});\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n  id: 'editor.action.clipboardPasteAction',\n  precondition: undefined,\n  kbOpts:\n  // Do not bind paste keybindings in the browser,\n  // since browsers do that for us and it avoids security prompts\n  platform.isNative ? {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n    win: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n      secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */]\n    },\n    linux: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n      secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */]\n    },\n    weight: 100 /* KeybindingWeight.EditorContrib */\n  } : undefined,\n  menuOpts: [{\n    menuId: MenuId.MenubarEditMenu,\n    group: '2_ccp',\n    title: nls.localize({\n      key: 'miPaste',\n      comment: ['&& denotes a mnemonic']\n    }, \"&&Paste\"),\n    order: 4\n  }, {\n    menuId: MenuId.EditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n    when: EditorContextKeys.writable,\n    order: 4\n  }, {\n    menuId: MenuId.CommandPalette,\n    group: '',\n    title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n    order: 1\n  }, {\n    menuId: MenuId.SimpleEditorContext,\n    group: CLIPBOARD_CONTEXT_MENU_GROUP,\n    title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n    when: EditorContextKeys.writable,\n    order: 4\n  }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n      label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n      alias: 'Copy With Syntax Highlighting',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const emptySelectionClipboard = editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n    if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n      return;\n    }\n    CopyOptions.forceCopyWithSyntaxHighlighting = true;\n    editor.focus();\n    editor.getContainerDomNode().ownerDocument.execCommand('copy');\n    CopyOptions.forceCopyWithSyntaxHighlighting = false;\n  }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n  if (!target) {\n    return;\n  }\n  // 1. handle case when focus is in editor.\n  target.addImplementation(10000, 'code-editor', (accessor, args) => {\n    // Only if editor text focus (i.e. not if editor has widget focus).\n    const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (focusedEditor && focusedEditor.hasTextFocus()) {\n      // Do not execute if there is no selection and empty selection clipboard is off\n      const emptySelectionClipboard = focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n      const selection = focusedEditor.getSelection();\n      if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n        return true;\n      }\n      focusedEditor.getContainerDomNode().ownerDocument.execCommand(browserCommand);\n      return true;\n    }\n    return false;\n  });\n  // 2. (default) handle case when focus is somewhere else.\n  target.addImplementation(0, 'generic-dom', (accessor, args) => {\n    getActiveDocument().execCommand(browserCommand);\n    return true;\n  });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n  // 1. Paste: handle case when focus is in editor.\n  PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const clipboardService = accessor.get(IClipboardService);\n    // Only if editor text focus (i.e. not if editor has widget focus).\n    const focusedEditor = codeEditorService.getFocusedCodeEditor();\n    if (focusedEditor && focusedEditor.hasTextFocus()) {\n      const result = focusedEditor.getContainerDomNode().ownerDocument.execCommand('paste');\n      if (result) {\n        return CopyPasteController.get(focusedEditor)?.finishedPaste() ?? Promise.resolve();\n      } else if (platform.isWeb) {\n        // Use the clipboard service if document.execCommand('paste') was not successful\n        return (async () => {\n          const clipboardText = await clipboardService.readText();\n          if (clipboardText !== '') {\n            const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n            let pasteOnNewLine = false;\n            let multicursorText = null;\n            let mode = null;\n            if (metadata) {\n              pasteOnNewLine = focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection;\n              multicursorText = typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null;\n              mode = metadata.mode;\n            }\n            focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n              text: clipboardText,\n              pasteOnNewLine,\n              multicursorText,\n              mode\n            });\n          }\n        })();\n      }\n      return true;\n    }\n    return false;\n  });\n  // 2. Paste: (default) handle case when focus is somewhere else.\n  PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n    getActiveDocument().execCommand('paste');\n    return true;\n  });\n}\nif (supportsCopy) {\n  registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar CopyPasteController_1;\nimport { addDisposableListener, getActiveDocument } from '../../../../base/browser/dom.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { UriList, createStringDataTransferItem, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ClipboardEventUtils } from '../../../browser/controller/textAreaInput.js';\nimport { toExternalVSDataTransfer, toVSDataTransfer } from '../../../browser/dnd.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { DocumentPasteTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DefaultTextPasteOrDropEditProvider } from './defaultProviders.js';\nimport { createCombinedWorkspaceEdit, sortEditsByYieldTo } from './edit.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nimport { CancellationError, isCancellationError } from '../../../../base/common/errors.js';\nexport const changePasteTypeCommandId = 'editor.changePasteType';\nexport const pasteWidgetVisibleCtx = new RawContextKey('pasteWidgetVisible', false, localize('pasteWidgetVisible', \"Whether the paste widget is showing\"));\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = /*#__PURE__*/(() => {\n  let CopyPasteController = class CopyPasteController extends Disposable {\n    static {\n      CopyPasteController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.copyPasteActionController';\n    }\n    static get(editor) {\n      return editor.getContribution(CopyPasteController_1.ID);\n    }\n    constructor(editor, instantiationService, _bulkEditService, _clipboardService, _languageFeaturesService, _quickInputService, _progressService) {\n      super();\n      this._bulkEditService = _bulkEditService;\n      this._clipboardService = _clipboardService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._quickInputService = _quickInputService;\n      this._progressService = _progressService;\n      this._editor = editor;\n      const container = editor.getContainerDomNode();\n      this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n      this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n      this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n      this._pasteProgressManager = this._register(new InlineProgressManager('pasteIntoEditor', editor, instantiationService));\n      this._postPasteWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'pasteIntoEditor', editor, pasteWidgetVisibleCtx, {\n        id: changePasteTypeCommandId,\n        label: localize('postPasteWidgetTitle', \"Show paste options...\")\n      }));\n    }\n    changePasteType() {\n      this._postPasteWidgetManager.tryShowSelector();\n    }\n    pasteAs(preferred) {\n      this._editor.focus();\n      try {\n        this._pasteAsActionContext = {\n          preferred\n        };\n        getActiveDocument().execCommand('paste');\n      } finally {\n        this._pasteAsActionContext = undefined;\n      }\n    }\n    clearWidgets() {\n      this._postPasteWidgetManager.clear();\n    }\n    isPasteAsEnabled() {\n      return this._editor.getOption(85 /* EditorOption.pasteAs */).enabled;\n    }\n    async finishedPaste() {\n      await this._currentPasteOperation;\n    }\n    handleCopy(e) {\n      if (!this._editor.hasTextFocus()) {\n        return;\n      }\n      // Explicitly clear the clipboard internal state.\n      // This is needed because on web, the browser clipboard is faked out using an in-memory store.\n      // This means the resources clipboard is not properly updated when copying from the editor.\n      this._clipboardService.clearInternalState?.();\n      if (!e.clipboardData || !this.isPasteAsEnabled()) {\n        return;\n      }\n      const model = this._editor.getModel();\n      const selections = this._editor.getSelections();\n      if (!model || !selections?.length) {\n        return;\n      }\n      const enableEmptySelectionClipboard = this._editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n      let ranges = selections;\n      const wasFromEmptySelection = selections.length === 1 && selections[0].isEmpty();\n      if (wasFromEmptySelection) {\n        if (!enableEmptySelectionClipboard) {\n          return;\n        }\n        ranges = [new Range(ranges[0].startLineNumber, 1, ranges[0].startLineNumber, 1 + model.getLineLength(ranges[0].startLineNumber))];\n      }\n      const toCopy = this._editor._getViewModel()?.getPlainTextToCopy(selections, enableEmptySelectionClipboard, platform.isWindows);\n      const multicursorText = Array.isArray(toCopy) ? toCopy : null;\n      const defaultPastePayload = {\n        multicursorText,\n        pasteOnNewLine: wasFromEmptySelection,\n        mode: null\n      };\n      const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n      if (!providers.length) {\n        this.setCopyMetadata(e.clipboardData, {\n          defaultPastePayload\n        });\n        return;\n      }\n      const dataTransfer = toVSDataTransfer(e.clipboardData);\n      const providerCopyMimeTypes = providers.flatMap(x => x.copyMimeTypes ?? []);\n      // Save off a handle pointing to data that VS Code maintains.\n      const handle = generateUuid();\n      this.setCopyMetadata(e.clipboardData, {\n        id: handle,\n        providerCopyMimeTypes,\n        defaultPastePayload\n      });\n      const promise = createCancelablePromise(async token => {\n        const results = coalesce(await Promise.all(providers.map(async provider => {\n          try {\n            return await provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n          } catch (err) {\n            console.error(err);\n            return undefined;\n          }\n        })));\n        // Values from higher priority providers should overwrite values from lower priority ones.\n        // Reverse the array to so that the calls to `replace` below will do this\n        results.reverse();\n        for (const result of results) {\n          for (const [mime, value] of result) {\n            dataTransfer.replace(mime, value);\n          }\n        }\n        return dataTransfer;\n      });\n      CopyPasteController_1._currentCopyOperation?.dataTransferPromise.cancel();\n      CopyPasteController_1._currentCopyOperation = {\n        handle: handle,\n        dataTransferPromise: promise\n      };\n    }\n    async handlePaste(e) {\n      if (!e.clipboardData || !this._editor.hasTextFocus()) {\n        return;\n      }\n      MessageController.get(this._editor)?.closeMessage();\n      this._currentPasteOperation?.cancel();\n      this._currentPasteOperation = undefined;\n      const model = this._editor.getModel();\n      const selections = this._editor.getSelections();\n      if (!selections?.length || !model) {\n        return;\n      }\n      if (this._editor.getOption(92 /* EditorOption.readOnly */) // Never enabled if editor is readonly.\n      || !this.isPasteAsEnabled() && !this._pasteAsActionContext // Or feature disabled (but still enable if paste was explicitly requested)\n      ) {\n        return;\n      }\n      const metadata = this.fetchCopyMetadata(e);\n      const dataTransfer = toExternalVSDataTransfer(e.clipboardData);\n      dataTransfer.delete(vscodeClipboardMime);\n      const allPotentialMimeTypes = [...e.clipboardData.types, ...(metadata?.providerCopyMimeTypes ?? []),\n      // TODO: always adds `uri-list` because this get set if there are resources in the system clipboard.\n      // However we can only check the system clipboard async. For this early check, just add it in.\n      // We filter providers again once we have the final dataTransfer we will use.\n      Mimes.uriList];\n      const allProviders = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(provider => {\n        // Filter out providers that don't match the requested paste types\n        const preference = this._pasteAsActionContext?.preferred;\n        if (preference) {\n          if (provider.providedPasteEditKinds && !this.providerMatchesPreference(provider, preference)) {\n            return false;\n          }\n        }\n        // And providers that don't handle any of mime types in the clipboard\n        return provider.pasteMimeTypes?.some(type => matchesMimeType(type, allPotentialMimeTypes));\n      });\n      if (!allProviders.length) {\n        if (this._pasteAsActionContext?.preferred) {\n          this.showPasteAsNoEditMessage(selections, this._pasteAsActionContext.preferred);\n        }\n        return;\n      }\n      // Prevent the editor's default paste handler from running.\n      // Note that after this point, we are fully responsible for handling paste.\n      // If we can't provider a paste for any reason, we need to explicitly delegate pasting back to the editor.\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      if (this._pasteAsActionContext) {\n        this.showPasteAsPick(this._pasteAsActionContext.preferred, allProviders, selections, dataTransfer, metadata);\n      } else {\n        this.doPasteInline(allProviders, selections, dataTransfer, metadata, e);\n      }\n    }\n    showPasteAsNoEditMessage(selections, preference) {\n      MessageController.get(this._editor)?.showMessage(localize('pasteAsError', \"No paste edits for '{0}' found\", preference instanceof HierarchicalKind ? preference.value : preference.providerId), selections[0].getStartPosition());\n    }\n    doPasteInline(allProviders, selections, dataTransfer, metadata, clipboardEvent) {\n      const editor = this._editor;\n      if (!editor.hasModel()) {\n        return;\n      }\n      const editorStateCts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined);\n      const p = createCancelablePromise(async pToken => {\n        const editor = this._editor;\n        if (!editor.hasModel()) {\n          return;\n        }\n        const model = editor.getModel();\n        const disposables = new DisposableStore();\n        const cts = disposables.add(new CancellationTokenSource(pToken));\n        disposables.add(editorStateCts.token.onCancellationRequested(() => cts.cancel()));\n        const token = cts.token;\n        try {\n          await this.mergeInDataFromCopy(dataTransfer, metadata, token);\n          if (token.isCancellationRequested) {\n            return;\n          }\n          const supportedProviders = allProviders.filter(provider => this.isSupportedPasteProvider(provider, dataTransfer));\n          if (!supportedProviders.length || supportedProviders.length === 1 && supportedProviders[0] instanceof DefaultTextPasteOrDropEditProvider // Only our default text provider is active\n          ) {\n            return this.applyDefaultPasteHandler(dataTransfer, metadata, token, clipboardEvent);\n          }\n          const context = {\n            triggerKind: DocumentPasteTriggerKind.Automatic\n          };\n          const editSession = await this.getPasteEdits(supportedProviders, dataTransfer, model, selections, context, token);\n          disposables.add(editSession);\n          if (token.isCancellationRequested) {\n            return;\n          }\n          // If the only edit returned is our default text edit, use the default paste handler\n          if (editSession.edits.length === 1 && editSession.edits[0].provider instanceof DefaultTextPasteOrDropEditProvider) {\n            return this.applyDefaultPasteHandler(dataTransfer, metadata, token, clipboardEvent);\n          }\n          if (editSession.edits.length) {\n            const canShowWidget = editor.getOption(85 /* EditorOption.pasteAs */).showPasteSelector === 'afterPaste';\n            return this._postPasteWidgetManager.applyEditAndShowIfNeeded(selections, {\n              activeEditIndex: 0,\n              allEdits: editSession.edits\n            }, canShowWidget, (edit, token) => {\n              return new Promise((resolve, reject) => {\n                (async () => {\n                  try {\n                    const resolveP = edit.provider.resolveDocumentPasteEdit?.(edit, token);\n                    const showP = new DeferredPromise();\n                    const resolved = resolveP && (await this._pasteProgressManager.showWhile(selections[0].getEndPosition(), localize('resolveProcess', \"Resolving paste edit. Click to cancel\"), Promise.race([showP.p, resolveP]), {\n                      cancel: () => {\n                        showP.cancel();\n                        return reject(new CancellationError());\n                      }\n                    }, 0));\n                    if (resolved) {\n                      edit.additionalEdit = resolved.additionalEdit;\n                    }\n                    return resolve(edit);\n                  } catch (err) {\n                    return reject(err);\n                  }\n                })();\n              });\n            }, token);\n          }\n          await this.applyDefaultPasteHandler(dataTransfer, metadata, token, clipboardEvent);\n        } finally {\n          disposables.dispose();\n          if (this._currentPasteOperation === p) {\n            this._currentPasteOperation = undefined;\n          }\n        }\n      });\n      this._pasteProgressManager.showWhile(selections[0].getEndPosition(), localize('pasteIntoEditorProgress', \"Running paste handlers. Click to cancel and do basic paste\"), p, {\n        cancel: async () => {\n          try {\n            p.cancel();\n            if (editorStateCts.token.isCancellationRequested) {\n              return;\n            }\n            await this.applyDefaultPasteHandler(dataTransfer, metadata, editorStateCts.token, clipboardEvent);\n          } finally {\n            editorStateCts.dispose();\n          }\n        }\n      }).then(() => {\n        editorStateCts.dispose();\n      });\n      this._currentPasteOperation = p;\n    }\n    showPasteAsPick(preference, allProviders, selections, dataTransfer, metadata) {\n      const p = createCancelablePromise(async token => {\n        const editor = this._editor;\n        if (!editor.hasModel()) {\n          return;\n        }\n        const model = editor.getModel();\n        const disposables = new DisposableStore();\n        const tokenSource = disposables.add(new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined, token));\n        try {\n          await this.mergeInDataFromCopy(dataTransfer, metadata, tokenSource.token);\n          if (tokenSource.token.isCancellationRequested) {\n            return;\n          }\n          // Filter out any providers the don't match the full data transfer we will send them.\n          let supportedProviders = allProviders.filter(provider => this.isSupportedPasteProvider(provider, dataTransfer, preference));\n          if (preference) {\n            // We are looking for a specific edit\n            supportedProviders = supportedProviders.filter(provider => this.providerMatchesPreference(provider, preference));\n          }\n          const context = {\n            triggerKind: DocumentPasteTriggerKind.PasteAs,\n            only: preference && preference instanceof HierarchicalKind ? preference : undefined\n          };\n          let editSession = disposables.add(await this.getPasteEdits(supportedProviders, dataTransfer, model, selections, context, tokenSource.token));\n          if (tokenSource.token.isCancellationRequested) {\n            return;\n          }\n          // Filter out any edits that don't match the requested kind\n          if (preference) {\n            editSession = {\n              edits: editSession.edits.filter(edit => {\n                if (preference instanceof HierarchicalKind) {\n                  return preference.contains(edit.kind);\n                } else {\n                  return preference.providerId === edit.provider.id;\n                }\n              }),\n              dispose: editSession.dispose\n            };\n          }\n          if (!editSession.edits.length) {\n            if (context.only) {\n              this.showPasteAsNoEditMessage(selections, context.only);\n            }\n            return;\n          }\n          let pickedEdit;\n          if (preference) {\n            pickedEdit = editSession.edits.at(0);\n          } else {\n            const selected = await this._quickInputService.pick(editSession.edits.map(edit => ({\n              label: edit.title,\n              description: edit.kind?.value,\n              edit\n            })), {\n              placeHolder: localize('pasteAsPickerPlaceholder', \"Select Paste Action\")\n            });\n            pickedEdit = selected?.edit;\n          }\n          if (!pickedEdit) {\n            return;\n          }\n          const combinedWorkspaceEdit = createCombinedWorkspaceEdit(model.uri, selections, pickedEdit);\n          await this._bulkEditService.apply(combinedWorkspaceEdit, {\n            editor: this._editor\n          });\n        } finally {\n          disposables.dispose();\n          if (this._currentPasteOperation === p) {\n            this._currentPasteOperation = undefined;\n          }\n        }\n      });\n      this._progressService.withProgress({\n        location: 10 /* ProgressLocation.Window */,\n        title: localize('pasteAsProgress', \"Running paste handlers\")\n      }, () => p);\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n      dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    fetchCopyMetadata(e) {\n      if (!e.clipboardData) {\n        return;\n      }\n      // Prefer using the clipboard data we saved off\n      const rawMetadata = e.clipboardData.getData(vscodeClipboardMime);\n      if (rawMetadata) {\n        try {\n          return JSON.parse(rawMetadata);\n        } catch {\n          return undefined;\n        }\n      }\n      // Otherwise try to extract the generic text editor metadata\n      const [_, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\n      if (metadata) {\n        return {\n          defaultPastePayload: {\n            mode: metadata.mode,\n            multicursorText: metadata.multicursorText ?? null,\n            pasteOnNewLine: !!metadata.isFromEmptySelection\n          }\n        };\n      }\n      return undefined;\n    }\n    async mergeInDataFromCopy(dataTransfer, metadata, token) {\n      if (metadata?.id && CopyPasteController_1._currentCopyOperation?.handle === metadata.id) {\n        const toMergeDataTransfer = await CopyPasteController_1._currentCopyOperation.dataTransferPromise;\n        if (token.isCancellationRequested) {\n          return;\n        }\n        for (const [key, value] of toMergeDataTransfer) {\n          dataTransfer.replace(key, value);\n        }\n      }\n      if (!dataTransfer.has(Mimes.uriList)) {\n        const resources = await this._clipboardService.readResources();\n        if (token.isCancellationRequested) {\n          return;\n        }\n        if (resources.length) {\n          dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n        }\n      }\n    }\n    async getPasteEdits(providers, dataTransfer, model, selections, context, token) {\n      const disposables = new DisposableStore();\n      const results = await raceCancellation(Promise.all(providers.map(async provider => {\n        try {\n          const edits = await provider.provideDocumentPasteEdits?.(model, selections, dataTransfer, context, token);\n          if (edits) {\n            disposables.add(edits);\n          }\n          return edits?.edits?.map(edit => ({\n            ...edit,\n            provider\n          }));\n        } catch (err) {\n          if (!isCancellationError(err)) {\n            console.error(err);\n          }\n          return undefined;\n        }\n      })), token);\n      const edits = coalesce(results ?? []).flat().filter(edit => {\n        return !context.only || context.only.contains(edit.kind);\n      });\n      return {\n        edits: sortEditsByYieldTo(edits),\n        dispose: () => disposables.dispose()\n      };\n    }\n    async applyDefaultPasteHandler(dataTransfer, metadata, token, clipboardEvent) {\n      const textDataTransfer = dataTransfer.get(Mimes.text) ?? dataTransfer.get('text');\n      const text = (await textDataTransfer?.asString()) ?? '';\n      if (token.isCancellationRequested) {\n        return;\n      }\n      const payload = {\n        clipboardEvent,\n        text,\n        pasteOnNewLine: metadata?.defaultPastePayload.pasteOnNewLine ?? false,\n        multicursorText: metadata?.defaultPastePayload.multicursorText ?? null,\n        mode: null\n      };\n      this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, payload);\n    }\n    /**\n     * Filter out providers if they:\n     * - Don't handle any of the data transfer types we have\n     * - Don't match the preferred paste kind\n     */\n    isSupportedPasteProvider(provider, dataTransfer, preference) {\n      if (!provider.pasteMimeTypes?.some(type => dataTransfer.matches(type))) {\n        return false;\n      }\n      return !preference || this.providerMatchesPreference(provider, preference);\n    }\n    providerMatchesPreference(provider, preference) {\n      if (preference instanceof HierarchicalKind) {\n        if (!provider.providedPasteEditKinds) {\n          return true;\n        }\n        return provider.providedPasteEditKinds.some(providedKind => preference.contains(providedKind));\n      } else {\n        return provider.id === preference.providerId;\n      }\n    }\n  };\n  return CopyPasteController;\n})();\nCopyPasteController = CopyPasteController_1 = __decorate([__param(1, IInstantiationService), __param(2, IBulkEditService), __param(3, IClipboardService), __param(4, ILanguageFeaturesService), __param(5, IQuickInputService), __param(6, IProgressService)], CopyPasteController);\nexport { CopyPasteController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { distinct } from './arrays.js';\nimport { Iterable } from './iterator.js';\nimport { generateUuid } from './uuid.js';\nexport function createStringDataTransferItem(stringOrPromise) {\n  return {\n    asString: async () => stringOrPromise,\n    asFile: () => undefined,\n    value: typeof stringOrPromise === 'string' ? stringOrPromise : undefined\n  };\n}\nexport function createFileDataTransferItem(fileName, uri, data) {\n  const file = {\n    id: generateUuid(),\n    name: fileName,\n    uri,\n    data\n  };\n  return {\n    asString: async () => '',\n    asFile: () => file,\n    value: undefined\n  };\n}\nexport class VSDataTransfer {\n  constructor() {\n    this._entries = new Map();\n  }\n  get size() {\n    let size = 0;\n    for (const _ of this._entries) {\n      size++;\n    }\n    return size;\n  }\n  has(mimeType) {\n    return this._entries.has(this.toKey(mimeType));\n  }\n  matches(pattern) {\n    const mimes = [...this._entries.keys()];\n    if (Iterable.some(this, ([_, item]) => item.asFile())) {\n      mimes.push('files');\n    }\n    return matchesMimeType_normalized(normalizeMimeType(pattern), mimes);\n  }\n  get(mimeType) {\n    return this._entries.get(this.toKey(mimeType))?.[0];\n  }\n  /**\n   * Add a new entry to this data transfer.\n   *\n   * This does not replace existing entries for `mimeType`.\n   */\n  append(mimeType, value) {\n    const existing = this._entries.get(mimeType);\n    if (existing) {\n      existing.push(value);\n    } else {\n      this._entries.set(this.toKey(mimeType), [value]);\n    }\n  }\n  /**\n   * Set the entry for a given mime type.\n   *\n   * This replaces all existing entries for `mimeType`.\n   */\n  replace(mimeType, value) {\n    this._entries.set(this.toKey(mimeType), [value]);\n  }\n  /**\n   * Remove all entries for `mimeType`.\n   */\n  delete(mimeType) {\n    this._entries.delete(this.toKey(mimeType));\n  }\n  /**\n   * Iterate over all `[mime, item]` pairs in this data transfer.\n   *\n   * There may be multiple entries for each mime type.\n   */\n  *[Symbol.iterator]() {\n    for (const [mine, items] of this._entries) {\n      for (const item of items) {\n        yield [mine, item];\n      }\n    }\n  }\n  toKey(mimeType) {\n    return normalizeMimeType(mimeType);\n  }\n}\nfunction normalizeMimeType(mimeType) {\n  return mimeType.toLowerCase();\n}\nexport function matchesMimeType(pattern, mimeTypes) {\n  return matchesMimeType_normalized(normalizeMimeType(pattern), mimeTypes.map(normalizeMimeType));\n}\nfunction matchesMimeType_normalized(normalizedPattern, normalizedMimeTypes) {\n  // Anything wildcard\n  if (normalizedPattern === '*/*') {\n    return normalizedMimeTypes.length > 0;\n  }\n  // Exact match\n  if (normalizedMimeTypes.includes(normalizedPattern)) {\n    return true;\n  }\n  // Wildcard, such as `image/*`\n  const wildcard = normalizedPattern.match(/^([a-z]+)\\/([a-z]+|\\*)$/i);\n  if (!wildcard) {\n    return false;\n  }\n  const [_, type, subtype] = wildcard;\n  if (subtype === '*') {\n    return normalizedMimeTypes.some(mime => mime.startsWith(type + '/'));\n  }\n  return false;\n}\nexport const UriList = Object.freeze({\n  // http://amundsen.com/hypermedia/urilist/\n  create: entries => {\n    return distinct(entries.map(x => x.toString())).join('\\r\\n');\n  },\n  split: str => {\n    return str.split('\\r\\n');\n  },\n  parse: str => {\n    return UriList.split(str).filter(value => !value.startsWith('#'));\n  }\n});","export const generateUuid = function () {\n  // use `randomUUID` if possible\n  if (typeof crypto === 'object' && typeof crypto.randomUUID === 'function') {\n    return crypto.randomUUID.bind(crypto);\n  }\n  // use `randomValues` if possible\n  let getRandomValues;\n  if (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\n    getRandomValues = crypto.getRandomValues.bind(crypto);\n  } else {\n    getRandomValues = function (bucket) {\n      for (let i = 0; i < bucket.length; i++) {\n        bucket[i] = Math.floor(Math.random() * 256);\n      }\n      return bucket;\n    };\n  }\n  // prep-work\n  const _data = new Uint8Array(16);\n  const _hex = [];\n  for (let i = 0; i < 256; i++) {\n    _hex.push(i.toString(16).padStart(2, '0'));\n  }\n  return function generateUuid() {\n    // get data\n    getRandomValues(_data);\n    // set version bits\n    _data[6] = _data[6] & 0x0f | 0x40;\n    _data[8] = _data[8] & 0x3f | 0x80;\n    // print as string\n    let i = 0;\n    let result = '';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += '-';\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    result += _hex[_data[i++]];\n    return result;\n  };\n}();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HierarchicalKind {\n  static {\n    this.sep = '.';\n  }\n  static {\n    this.None = new HierarchicalKind('@@none@@');\n  } // Special kind that matches nothing\n  static {\n    this.Empty = new HierarchicalKind('');\n  }\n  constructor(value) {\n    this.value = value;\n  }\n  equals(other) {\n    return this.value === other.value;\n  }\n  contains(other) {\n    return this.equals(other) || this.value === '' || other.value.startsWith(this.value + HierarchicalKind.sep);\n  }\n  intersects(other) {\n    return this.contains(other) || other.contains(this);\n  }\n  append(...parts) {\n    return new HierarchicalKind((this.value ? [this.value, ...parts] : parts).join(HierarchicalKind.sep));\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n  const vsDataTransfer = new VSDataTransfer();\n  for (const item of dataTransfer.items) {\n    const type = item.type;\n    if (item.kind === 'string') {\n      const asStringValue = new Promise(resolve => item.getAsString(resolve));\n      vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n    } else if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n      }\n    }\n  }\n  return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n  const uri = file.path ? URI.parse(file.path) : undefined;\n  return createFileDataTransferItem(file.name, uri, async () => {\n    return new Uint8Array(await file.arrayBuffer());\n  });\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([CodeDataTransfers.EDITORS, CodeDataTransfers.FILES, DataTransfers.RESOURCES, DataTransfers.INTERNAL_URI_LIST]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n  const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n  // Try to expose the internal uri-list type as the standard type\n  const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n  if (uriList) {\n    vsDataTransfer.replace(Mimes.uriList, uriList);\n  } else {\n    if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n      // Otherwise, fallback to adding dragged resources to the uri list\n      const editorData = [];\n      for (const item of sourceDataTransfer.items) {\n        const file = item.getAsFile();\n        if (file) {\n          const path = file.path;\n          try {\n            if (path) {\n              editorData.push(URI.file(path).toString());\n            } else {\n              editorData.push(URI.parse(file.name, true).toString());\n            }\n          } catch {\n            // Parsing failed. Leave out from list\n          }\n        }\n      }\n      if (editorData.length) {\n        vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n      }\n    }\n  }\n  for (const internal of INTERNAL_DND_MIME_TYPES) {\n    vsDataTransfer.delete(internal);\n  }\n  return vsDataTransfer;\n}","import { Registry } from '../../registry/common/platform.js';\n//#region Editor / Resources DND\nexport const CodeDataTransfers = {\n  EDITORS: 'CodeEditors',\n  FILES: 'CodeFiles'\n};\nclass DragAndDropContributionRegistry {}\nexport const Extensions = {\n  DragAndDropContribution: 'workbench.contributions.dragAndDrop'\n};\nRegistry.add(Extensions.DragAndDropContribution, new DragAndDropContributionRegistry());\n//#endregion\n//#region DND Utilities\n/**\n * A singleton to store transfer data during drag & drop operations that are only valid within the application.\n */\nexport class LocalSelectionTransfer {\n  static {\n    this.INSTANCE = new LocalSelectionTransfer();\n  }\n  constructor() {\n    // protect against external instantiation\n  }\n  static getInstance() {\n    return LocalSelectionTransfer.INSTANCE;\n  }\n  hasData(proto) {\n    return proto && proto === this.proto;\n  }\n  getData(proto) {\n    if (this.hasData(proto)) {\n      return this.data;\n    }\n    return undefined;\n  }\n}\n//#endregion","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { UriList } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DocumentPasteTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nclass SimplePasteAndDropProvider {\n  async provideDocumentPasteEdits(_model, _ranges, dataTransfer, context, token) {\n    const edit = await this.getEdit(dataTransfer, token);\n    if (!edit) {\n      return undefined;\n    }\n    return {\n      edits: [{\n        insertText: edit.insertText,\n        title: edit.title,\n        kind: edit.kind,\n        handledMimeType: edit.handledMimeType,\n        yieldTo: edit.yieldTo\n      }],\n      dispose() {}\n    };\n  }\n  async provideDocumentDropEdits(_model, _position, dataTransfer, token) {\n    const edit = await this.getEdit(dataTransfer, token);\n    if (!edit) {\n      return;\n    }\n    return {\n      edits: [{\n        insertText: edit.insertText,\n        title: edit.title,\n        kind: edit.kind,\n        handledMimeType: edit.handledMimeType,\n        yieldTo: edit.yieldTo\n      }],\n      dispose() {}\n    };\n  }\n}\nexport class DefaultTextPasteOrDropEditProvider extends SimplePasteAndDropProvider {\n  constructor() {\n    super(...arguments);\n    this.kind = DefaultTextPasteOrDropEditProvider.kind;\n    this.dropMimeTypes = [Mimes.text];\n    this.pasteMimeTypes = [Mimes.text];\n  }\n  static {\n    this.id = 'text';\n  }\n  static {\n    this.kind = new HierarchicalKind('text.plain');\n  }\n  async getEdit(dataTransfer, _token) {\n    const textEntry = dataTransfer.get(Mimes.text);\n    if (!textEntry) {\n      return;\n    }\n    // Suppress if there's also a uriList entry.\n    // Typically the uri-list contains the same text as the text entry so showing both is confusing.\n    if (dataTransfer.has(Mimes.uriList)) {\n      return;\n    }\n    const insertText = await textEntry.asString();\n    return {\n      handledMimeType: Mimes.text,\n      title: localize('text.label', \"Insert Plain Text\"),\n      insertText,\n      kind: this.kind\n    };\n  }\n}\nclass PathProvider extends SimplePasteAndDropProvider {\n  constructor() {\n    super(...arguments);\n    this.kind = new HierarchicalKind('uri.absolute');\n    this.dropMimeTypes = [Mimes.uriList];\n    this.pasteMimeTypes = [Mimes.uriList];\n  }\n  async getEdit(dataTransfer, token) {\n    const entries = await extractUriList(dataTransfer);\n    if (!entries.length || token.isCancellationRequested) {\n      return;\n    }\n    let uriCount = 0;\n    const insertText = entries.map(({\n      uri,\n      originalText\n    }) => {\n      if (uri.scheme === Schemas.file) {\n        return uri.fsPath;\n      } else {\n        uriCount++;\n        return originalText;\n      }\n    }).join(' ');\n    let label;\n    if (uriCount > 0) {\n      // Dropping at least one generic uri (such as https) so use most generic label\n      label = entries.length > 1 ? localize('defaultDropProvider.uriList.uris', \"Insert Uris\") : localize('defaultDropProvider.uriList.uri', \"Insert Uri\");\n    } else {\n      // All the paths are file paths\n      label = entries.length > 1 ? localize('defaultDropProvider.uriList.paths', \"Insert Paths\") : localize('defaultDropProvider.uriList.path', \"Insert Path\");\n    }\n    return {\n      handledMimeType: Mimes.uriList,\n      insertText,\n      title: label,\n      kind: this.kind\n    };\n  }\n}\nlet RelativePathProvider = class RelativePathProvider extends SimplePasteAndDropProvider {\n  constructor(_workspaceContextService) {\n    super();\n    this._workspaceContextService = _workspaceContextService;\n    this.kind = new HierarchicalKind('uri.relative');\n    this.dropMimeTypes = [Mimes.uriList];\n    this.pasteMimeTypes = [Mimes.uriList];\n  }\n  async getEdit(dataTransfer, token) {\n    const entries = await extractUriList(dataTransfer);\n    if (!entries.length || token.isCancellationRequested) {\n      return;\n    }\n    const relativeUris = coalesce(entries.map(({\n      uri\n    }) => {\n      const root = this._workspaceContextService.getWorkspaceFolder(uri);\n      return root ? relativePath(root.uri, uri) : undefined;\n    }));\n    if (!relativeUris.length) {\n      return;\n    }\n    return {\n      handledMimeType: Mimes.uriList,\n      insertText: relativeUris.join(' '),\n      title: entries.length > 1 ? localize('defaultDropProvider.uriList.relativePaths', \"Insert Relative Paths\") : localize('defaultDropProvider.uriList.relativePath', \"Insert Relative Path\"),\n      kind: this.kind\n    };\n  }\n};\nRelativePathProvider = __decorate([__param(0, IWorkspaceContextService)], RelativePathProvider);\nclass PasteHtmlProvider {\n  constructor() {\n    this.kind = new HierarchicalKind('html');\n    this.pasteMimeTypes = ['text/html'];\n    this._yieldTo = [{\n      mimeType: Mimes.text\n    }];\n  }\n  async provideDocumentPasteEdits(_model, _ranges, dataTransfer, context, token) {\n    if (context.triggerKind !== DocumentPasteTriggerKind.PasteAs && !context.only?.contains(this.kind)) {\n      return;\n    }\n    const entry = dataTransfer.get('text/html');\n    const htmlText = await entry?.asString();\n    if (!htmlText || token.isCancellationRequested) {\n      return;\n    }\n    return {\n      dispose() {},\n      edits: [{\n        insertText: htmlText,\n        yieldTo: this._yieldTo,\n        title: localize('pasteHtmlLabel', 'Insert HTML'),\n        kind: this.kind\n      }]\n    };\n  }\n}\nasync function extractUriList(dataTransfer) {\n  const urlListEntry = dataTransfer.get(Mimes.uriList);\n  if (!urlListEntry) {\n    return [];\n  }\n  const strUriList = await urlListEntry.asString();\n  const entries = [];\n  for (const entry of UriList.parse(strUriList)) {\n    try {\n      entries.push({\n        uri: URI.parse(entry),\n        originalText: entry\n      });\n    } catch {\n      // noop\n    }\n  }\n  return entries;\n}\nlet DefaultDropProvidersFeature = class DefaultDropProvidersFeature extends Disposable {\n  constructor(languageFeaturesService, workspaceContextService) {\n    super();\n    this._register(languageFeaturesService.documentDropEditProvider.register('*', new DefaultTextPasteOrDropEditProvider()));\n    this._register(languageFeaturesService.documentDropEditProvider.register('*', new PathProvider()));\n    this._register(languageFeaturesService.documentDropEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\n  }\n};\nDefaultDropProvidersFeature = __decorate([__param(0, ILanguageFeaturesService), __param(1, IWorkspaceContextService)], DefaultDropProvidersFeature);\nexport { DefaultDropProvidersFeature };\nlet DefaultPasteProvidersFeature = class DefaultPasteProvidersFeature extends Disposable {\n  constructor(languageFeaturesService, workspaceContextService) {\n    super();\n    this._register(languageFeaturesService.documentPasteEditProvider.register('*', new DefaultTextPasteOrDropEditProvider()));\n    this._register(languageFeaturesService.documentPasteEditProvider.register('*', new PathProvider()));\n    this._register(languageFeaturesService.documentPasteEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\n    this._register(languageFeaturesService.documentPasteEditProvider.register('*', new PasteHtmlProvider()));\n  }\n};\nDefaultPasteProvidersFeature = __decorate([__param(0, ILanguageFeaturesService), __param(1, IWorkspaceContextService)], DefaultPasteProvidersFeature);\nexport { DefaultPasteProvidersFeature };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport let Scanner = /*#__PURE__*/(() => {\n  class Scanner {\n    constructor() {\n      this.value = '';\n      this.pos = 0;\n    }\n    static {\n      this._table = {\n        [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n        [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n        [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n        [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n        [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n        [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n        [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n        [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n        [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n        [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n        [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */\n      };\n    }\n    static isDigitCharacter(ch) {\n      return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n      return ch === 95 /* CharCode.Underline */ || ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */ || ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */;\n    }\n    text(value) {\n      this.value = value;\n      this.pos = 0;\n    }\n    tokenText(token) {\n      return this.value.substr(token.pos, token.len);\n    }\n    next() {\n      if (this.pos >= this.value.length) {\n        return {\n          type: 14 /* TokenType.EOF */,\n          pos: this.pos,\n          len: 0\n        };\n      }\n      const pos = this.pos;\n      let len = 0;\n      let ch = this.value.charCodeAt(pos);\n      let type;\n      // static types\n      type = Scanner._table[ch];\n      if (typeof type === 'number') {\n        this.pos += 1;\n        return {\n          type,\n          pos,\n          len: 1\n        };\n      }\n      // number\n      if (Scanner.isDigitCharacter(ch)) {\n        type = 8 /* TokenType.Int */;\n        do {\n          len += 1;\n          ch = this.value.charCodeAt(pos + len);\n        } while (Scanner.isDigitCharacter(ch));\n        this.pos += len;\n        return {\n          type,\n          pos,\n          len\n        };\n      }\n      // variable name\n      if (Scanner.isVariableCharacter(ch)) {\n        type = 9 /* TokenType.VariableName */;\n        do {\n          ch = this.value.charCodeAt(pos + ++len);\n        } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n        this.pos += len;\n        return {\n          type,\n          pos,\n          len\n        };\n      }\n      // format\n      type = 10 /* TokenType.Format */;\n      do {\n        len += 1;\n        ch = this.value.charCodeAt(pos + len);\n      } while (!isNaN(ch) && typeof Scanner._table[ch] === 'undefined' // not static token\n      && !Scanner.isDigitCharacter(ch) // not number\n      && !Scanner.isVariableCharacter(ch) // not variable\n      );\n      this.pos += len;\n      return {\n        type,\n        pos,\n        len\n      };\n    }\n  }\n  return Scanner;\n})();\nexport class Marker {\n  constructor() {\n    this._children = [];\n  }\n  appendChild(child) {\n    if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n      // this and previous child are text -> merge them\n      this._children[this._children.length - 1].value += child.value;\n    } else {\n      // normal adoption of child\n      child.parent = this;\n      this._children.push(child);\n    }\n    return this;\n  }\n  replace(child, others) {\n    const {\n      parent\n    } = child;\n    const idx = parent.children.indexOf(child);\n    const newChildren = parent.children.slice(0);\n    newChildren.splice(idx, 1, ...others);\n    parent._children = newChildren;\n    (function _fixParent(children, parent) {\n      for (const child of children) {\n        child.parent = parent;\n        _fixParent(child.children, child);\n      }\n    })(others, parent);\n  }\n  get children() {\n    return this._children;\n  }\n  get rightMostDescendant() {\n    if (this._children.length > 0) {\n      return this._children[this._children.length - 1].rightMostDescendant;\n    }\n    return this;\n  }\n  get snippet() {\n    let candidate = this;\n    while (true) {\n      if (!candidate) {\n        return undefined;\n      }\n      if (candidate instanceof TextmateSnippet) {\n        return candidate;\n      }\n      candidate = candidate.parent;\n    }\n  }\n  toString() {\n    return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n  }\n  len() {\n    return 0;\n  }\n}\nexport class Text extends Marker {\n  constructor(value) {\n    super();\n    this.value = value;\n  }\n  toString() {\n    return this.value;\n  }\n  len() {\n    return this.value.length;\n  }\n  clone() {\n    return new Text(this.value);\n  }\n}\nexport class TransformableMarker extends Marker {}\nexport class Placeholder extends TransformableMarker {\n  static compareByIndex(a, b) {\n    if (a.index === b.index) {\n      return 0;\n    } else if (a.isFinalTabstop) {\n      return 1;\n    } else if (b.isFinalTabstop) {\n      return -1;\n    } else if (a.index < b.index) {\n      return -1;\n    } else if (a.index > b.index) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n  constructor(index) {\n    super();\n    this.index = index;\n  }\n  get isFinalTabstop() {\n    return this.index === 0;\n  }\n  get choice() {\n    return this._children.length === 1 && this._children[0] instanceof Choice ? this._children[0] : undefined;\n  }\n  clone() {\n    const ret = new Placeholder(this.index);\n    if (this.transform) {\n      ret.transform = this.transform.clone();\n    }\n    ret._children = this.children.map(child => child.clone());\n    return ret;\n  }\n}\nexport class Choice extends Marker {\n  constructor() {\n    super(...arguments);\n    this.options = [];\n  }\n  appendChild(marker) {\n    if (marker instanceof Text) {\n      marker.parent = this;\n      this.options.push(marker);\n    }\n    return this;\n  }\n  toString() {\n    return this.options[0].value;\n  }\n  len() {\n    return this.options[0].len();\n  }\n  clone() {\n    const ret = new Choice();\n    this.options.forEach(ret.appendChild, ret);\n    return ret;\n  }\n}\nexport class Transform extends Marker {\n  constructor() {\n    super(...arguments);\n    this.regexp = new RegExp('');\n  }\n  resolve(value) {\n    const _this = this;\n    let didMatch = false;\n    let ret = value.replace(this.regexp, function () {\n      didMatch = true;\n      return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n    });\n    // when the regex didn't match and when the transform has\n    // else branches, then run those\n    if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n      ret = this._replace([]);\n    }\n    return ret;\n  }\n  _replace(groups) {\n    let ret = '';\n    for (const marker of this._children) {\n      if (marker instanceof FormatString) {\n        let value = groups[marker.index] || '';\n        value = marker.resolve(value);\n        ret += value;\n      } else {\n        ret += marker.toString();\n      }\n    }\n    return ret;\n  }\n  toString() {\n    return '';\n  }\n  clone() {\n    const ret = new Transform();\n    ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n    ret._children = this.children.map(child => child.clone());\n    return ret;\n  }\n}\nexport class FormatString extends Marker {\n  constructor(index, shorthandName, ifValue, elseValue) {\n    super();\n    this.index = index;\n    this.shorthandName = shorthandName;\n    this.ifValue = ifValue;\n    this.elseValue = elseValue;\n  }\n  resolve(value) {\n    if (this.shorthandName === 'upcase') {\n      return !value ? '' : value.toLocaleUpperCase();\n    } else if (this.shorthandName === 'downcase') {\n      return !value ? '' : value.toLocaleLowerCase();\n    } else if (this.shorthandName === 'capitalize') {\n      return !value ? '' : value[0].toLocaleUpperCase() + value.substr(1);\n    } else if (this.shorthandName === 'pascalcase') {\n      return !value ? '' : this._toPascalCase(value);\n    } else if (this.shorthandName === 'camelcase') {\n      return !value ? '' : this._toCamelCase(value);\n    } else if (Boolean(value) && typeof this.ifValue === 'string') {\n      return this.ifValue;\n    } else if (!Boolean(value) && typeof this.elseValue === 'string') {\n      return this.elseValue;\n    } else {\n      return value || '';\n    }\n  }\n  _toPascalCase(value) {\n    const match = value.match(/[a-z0-9]+/gi);\n    if (!match) {\n      return value;\n    }\n    return match.map(word => {\n      return word.charAt(0).toUpperCase() + word.substr(1);\n    }).join('');\n  }\n  _toCamelCase(value) {\n    const match = value.match(/[a-z0-9]+/gi);\n    if (!match) {\n      return value;\n    }\n    return match.map((word, index) => {\n      if (index === 0) {\n        return word.charAt(0).toLowerCase() + word.substr(1);\n      }\n      return word.charAt(0).toUpperCase() + word.substr(1);\n    }).join('');\n  }\n  clone() {\n    const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n    return ret;\n  }\n}\nexport class Variable extends TransformableMarker {\n  constructor(name) {\n    super();\n    this.name = name;\n  }\n  resolve(resolver) {\n    let value = resolver.resolve(this);\n    if (this.transform) {\n      value = this.transform.resolve(value || '');\n    }\n    if (value !== undefined) {\n      this._children = [new Text(value)];\n      return true;\n    }\n    return false;\n  }\n  clone() {\n    const ret = new Variable(this.name);\n    if (this.transform) {\n      ret.transform = this.transform.clone();\n    }\n    ret._children = this.children.map(child => child.clone());\n    return ret;\n  }\n}\nfunction walk(marker, visitor) {\n  const stack = [...marker];\n  while (stack.length > 0) {\n    const marker = stack.shift();\n    const recurse = visitor(marker);\n    if (!recurse) {\n      break;\n    }\n    stack.unshift(...marker.children);\n  }\n}\nexport class TextmateSnippet extends Marker {\n  get placeholderInfo() {\n    if (!this._placeholders) {\n      // fill in placeholders\n      const all = [];\n      let last;\n      this.walk(function (candidate) {\n        if (candidate instanceof Placeholder) {\n          all.push(candidate);\n          last = !last || last.index < candidate.index ? candidate : last;\n        }\n        return true;\n      });\n      this._placeholders = {\n        all,\n        last\n      };\n    }\n    return this._placeholders;\n  }\n  get placeholders() {\n    const {\n      all\n    } = this.placeholderInfo;\n    return all;\n  }\n  offset(marker) {\n    let pos = 0;\n    let found = false;\n    this.walk(candidate => {\n      if (candidate === marker) {\n        found = true;\n        return false;\n      }\n      pos += candidate.len();\n      return true;\n    });\n    if (!found) {\n      return -1;\n    }\n    return pos;\n  }\n  fullLen(marker) {\n    let ret = 0;\n    walk([marker], marker => {\n      ret += marker.len();\n      return true;\n    });\n    return ret;\n  }\n  enclosingPlaceholders(placeholder) {\n    const ret = [];\n    let {\n      parent\n    } = placeholder;\n    while (parent) {\n      if (parent instanceof Placeholder) {\n        ret.push(parent);\n      }\n      parent = parent.parent;\n    }\n    return ret;\n  }\n  resolveVariables(resolver) {\n    this.walk(candidate => {\n      if (candidate instanceof Variable) {\n        if (candidate.resolve(resolver)) {\n          this._placeholders = undefined;\n        }\n      }\n      return true;\n    });\n    return this;\n  }\n  appendChild(child) {\n    this._placeholders = undefined;\n    return super.appendChild(child);\n  }\n  replace(child, others) {\n    this._placeholders = undefined;\n    return super.replace(child, others);\n  }\n  clone() {\n    const ret = new TextmateSnippet();\n    this._children = this.children.map(child => child.clone());\n    return ret;\n  }\n  walk(visitor) {\n    walk(this.children, visitor);\n  }\n}\nexport class SnippetParser {\n  constructor() {\n    this._scanner = new Scanner();\n    this._token = {\n      type: 14 /* TokenType.EOF */,\n      pos: 0,\n      len: 0\n    };\n  }\n  static escape(value) {\n    return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n  }\n  static guessNeedsClipboard(template) {\n    return /\\${?CLIPBOARD/.test(template);\n  }\n  parse(value, insertFinalTabstop, enforceFinalTabstop) {\n    const snippet = new TextmateSnippet();\n    this.parseFragment(value, snippet);\n    this.ensureFinalTabstop(snippet, enforceFinalTabstop ?? false, insertFinalTabstop ?? false);\n    return snippet;\n  }\n  parseFragment(value, snippet) {\n    const offset = snippet.children.length;\n    this._scanner.text(value);\n    this._token = this._scanner.next();\n    while (this._parse(snippet)) {\n      // nothing\n    }\n    // fill in values for placeholders. the first placeholder of an index\n    // that has a value defines the value for all placeholders with that index\n    const placeholderDefaultValues = new Map();\n    const incompletePlaceholders = [];\n    snippet.walk(marker => {\n      if (marker instanceof Placeholder) {\n        if (marker.isFinalTabstop) {\n          placeholderDefaultValues.set(0, undefined);\n        } else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n          placeholderDefaultValues.set(marker.index, marker.children);\n        } else {\n          incompletePlaceholders.push(marker);\n        }\n      }\n      return true;\n    });\n    const fillInIncompletePlaceholder = (placeholder, stack) => {\n      const defaultValues = placeholderDefaultValues.get(placeholder.index);\n      if (!defaultValues) {\n        return;\n      }\n      const clone = new Placeholder(placeholder.index);\n      clone.transform = placeholder.transform;\n      for (const child of defaultValues) {\n        const newChild = child.clone();\n        clone.appendChild(newChild);\n        // \"recurse\" on children that are again placeholders\n        if (newChild instanceof Placeholder && placeholderDefaultValues.has(newChild.index) && !stack.has(newChild.index)) {\n          stack.add(newChild.index);\n          fillInIncompletePlaceholder(newChild, stack);\n          stack.delete(newChild.index);\n        }\n      }\n      snippet.replace(placeholder, [clone]);\n    };\n    const stack = new Set();\n    for (const placeholder of incompletePlaceholders) {\n      fillInIncompletePlaceholder(placeholder, stack);\n    }\n    return snippet.children.slice(offset);\n  }\n  ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n    if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n      const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n      if (!finalTabstop) {\n        // the snippet uses placeholders but has no\n        // final tabstop defined -> insert at the end\n        snippet.appendChild(new Placeholder(0));\n      }\n    }\n  }\n  _accept(type, value) {\n    if (type === undefined || this._token.type === type) {\n      const ret = !value ? true : this._scanner.tokenText(this._token);\n      this._token = this._scanner.next();\n      return ret;\n    }\n    return false;\n  }\n  _backTo(token) {\n    this._scanner.pos = token.pos + token.len;\n    this._token = token;\n    return false;\n  }\n  _until(type) {\n    const start = this._token;\n    while (this._token.type !== type) {\n      if (this._token.type === 14 /* TokenType.EOF */) {\n        return false;\n      } else if (this._token.type === 5 /* TokenType.Backslash */) {\n        const nextToken = this._scanner.next();\n        if (nextToken.type !== 0 /* TokenType.Dollar */ && nextToken.type !== 4 /* TokenType.CurlyClose */ && nextToken.type !== 5 /* TokenType.Backslash */) {\n          return false;\n        }\n      }\n      this._token = this._scanner.next();\n    }\n    const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n    this._token = this._scanner.next();\n    return value;\n  }\n  _parse(marker) {\n    return this._parseEscaped(marker) || this._parseTabstopOrVariableName(marker) || this._parseComplexPlaceholder(marker) || this._parseComplexVariable(marker) || this._parseAnything(marker);\n  }\n  // \\$, \\\\, \\} -> just text\n  _parseEscaped(marker) {\n    let value;\n    if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n      // saw a backslash, append escaped token or that backslash\n      value = this._accept(0 /* TokenType.Dollar */, true) || this._accept(4 /* TokenType.CurlyClose */, true) || this._accept(5 /* TokenType.Backslash */, true) || value;\n      marker.appendChild(new Text(value));\n      return true;\n    }\n    return false;\n  }\n  // $foo -> variable, $1 -> tabstop\n  _parseTabstopOrVariableName(parent) {\n    let value;\n    const token = this._token;\n    const match = this._accept(0 /* TokenType.Dollar */) && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n    if (!match) {\n      return this._backTo(token);\n    }\n    parent.appendChild(/^\\d+$/.test(value) ? new Placeholder(Number(value)) : new Variable(value));\n    return true;\n  }\n  // ${1:<children>}, ${1} -> placeholder\n  _parseComplexPlaceholder(parent) {\n    let index;\n    const token = this._token;\n    const match = this._accept(0 /* TokenType.Dollar */) && this._accept(3 /* TokenType.CurlyOpen */) && (index = this._accept(8 /* TokenType.Int */, true));\n    if (!match) {\n      return this._backTo(token);\n    }\n    const placeholder = new Placeholder(Number(index));\n    if (this._accept(1 /* TokenType.Colon */)) {\n      // ${1:<children>}\n      while (true) {\n        // ...} -> done\n        if (this._accept(4 /* TokenType.CurlyClose */)) {\n          parent.appendChild(placeholder);\n          return true;\n        }\n        if (this._parse(placeholder)) {\n          continue;\n        }\n        // fallback\n        parent.appendChild(new Text('${' + index + ':'));\n        placeholder.children.forEach(parent.appendChild, parent);\n        return true;\n      }\n    } else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n      // ${1|one,two,three|}\n      const choice = new Choice();\n      while (true) {\n        if (this._parseChoiceElement(choice)) {\n          if (this._accept(2 /* TokenType.Comma */)) {\n            // opt, -> more\n            continue;\n          }\n          if (this._accept(7 /* TokenType.Pipe */)) {\n            placeholder.appendChild(choice);\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n              // ..|} -> done\n              parent.appendChild(placeholder);\n              return true;\n            }\n          }\n        }\n        this._backTo(token);\n        return false;\n      }\n    } else if (this._accept(6 /* TokenType.Forwardslash */)) {\n      // ${1/<regex>/<format>/<options>}\n      if (this._parseTransform(placeholder)) {\n        parent.appendChild(placeholder);\n        return true;\n      }\n      this._backTo(token);\n      return false;\n    } else if (this._accept(4 /* TokenType.CurlyClose */)) {\n      // ${1}\n      parent.appendChild(placeholder);\n      return true;\n    } else {\n      // ${1 <- missing curly or colon\n      return this._backTo(token);\n    }\n  }\n  _parseChoiceElement(parent) {\n    const token = this._token;\n    const values = [];\n    while (true) {\n      if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n        break;\n      }\n      let value;\n      if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n        // \\, \\|, or \\\\\n        value = this._accept(2 /* TokenType.Comma */, true) || this._accept(7 /* TokenType.Pipe */, true) || this._accept(5 /* TokenType.Backslash */, true) || value;\n      } else {\n        value = this._accept(undefined, true);\n      }\n      if (!value) {\n        // EOF\n        this._backTo(token);\n        return false;\n      }\n      values.push(value);\n    }\n    if (values.length === 0) {\n      this._backTo(token);\n      return false;\n    }\n    parent.appendChild(new Text(values.join('')));\n    return true;\n  }\n  // ${foo:<children>}, ${foo} -> variable\n  _parseComplexVariable(parent) {\n    let name;\n    const token = this._token;\n    const match = this._accept(0 /* TokenType.Dollar */) && this._accept(3 /* TokenType.CurlyOpen */) && (name = this._accept(9 /* TokenType.VariableName */, true));\n    if (!match) {\n      return this._backTo(token);\n    }\n    const variable = new Variable(name);\n    if (this._accept(1 /* TokenType.Colon */)) {\n      // ${foo:<children>}\n      while (true) {\n        // ...} -> done\n        if (this._accept(4 /* TokenType.CurlyClose */)) {\n          parent.appendChild(variable);\n          return true;\n        }\n        if (this._parse(variable)) {\n          continue;\n        }\n        // fallback\n        parent.appendChild(new Text('${' + name + ':'));\n        variable.children.forEach(parent.appendChild, parent);\n        return true;\n      }\n    } else if (this._accept(6 /* TokenType.Forwardslash */)) {\n      // ${foo/<regex>/<format>/<options>}\n      if (this._parseTransform(variable)) {\n        parent.appendChild(variable);\n        return true;\n      }\n      this._backTo(token);\n      return false;\n    } else if (this._accept(4 /* TokenType.CurlyClose */)) {\n      // ${foo}\n      parent.appendChild(variable);\n      return true;\n    } else {\n      // ${foo <- missing curly or colon\n      return this._backTo(token);\n    }\n  }\n  _parseTransform(parent) {\n    // ...<regex>/<format>/<options>}\n    const transform = new Transform();\n    let regexValue = '';\n    let regexOptions = '';\n    // (1) /regex\n    while (true) {\n      if (this._accept(6 /* TokenType.Forwardslash */)) {\n        break;\n      }\n      let escaped;\n      if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n        escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n        regexValue += escaped;\n        continue;\n      }\n      if (this._token.type !== 14 /* TokenType.EOF */) {\n        regexValue += this._accept(undefined, true);\n        continue;\n      }\n      return false;\n    }\n    // (2) /format\n    while (true) {\n      if (this._accept(6 /* TokenType.Forwardslash */)) {\n        break;\n      }\n      let escaped;\n      if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n        escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n        transform.appendChild(new Text(escaped));\n        continue;\n      }\n      if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n        continue;\n      }\n      return false;\n    }\n    // (3) /option\n    while (true) {\n      if (this._accept(4 /* TokenType.CurlyClose */)) {\n        break;\n      }\n      if (this._token.type !== 14 /* TokenType.EOF */) {\n        regexOptions += this._accept(undefined, true);\n        continue;\n      }\n      return false;\n    }\n    try {\n      transform.regexp = new RegExp(regexValue, regexOptions);\n    } catch (e) {\n      // invalid regexp\n      return false;\n    }\n    parent.transform = transform;\n    return true;\n  }\n  _parseFormatString(parent) {\n    const token = this._token;\n    if (!this._accept(0 /* TokenType.Dollar */)) {\n      return false;\n    }\n    let complex = false;\n    if (this._accept(3 /* TokenType.CurlyOpen */)) {\n      complex = true;\n    }\n    const index = this._accept(8 /* TokenType.Int */, true);\n    if (!index) {\n      this._backTo(token);\n      return false;\n    } else if (!complex) {\n      // $1\n      parent.appendChild(new FormatString(Number(index)));\n      return true;\n    } else if (this._accept(4 /* TokenType.CurlyClose */)) {\n      // ${1}\n      parent.appendChild(new FormatString(Number(index)));\n      return true;\n    } else if (!this._accept(1 /* TokenType.Colon */)) {\n      this._backTo(token);\n      return false;\n    }\n    if (this._accept(6 /* TokenType.Forwardslash */)) {\n      // ${1:/upcase}\n      const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n      if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n        this._backTo(token);\n        return false;\n      } else {\n        parent.appendChild(new FormatString(Number(index), shorthand));\n        return true;\n      }\n    } else if (this._accept(11 /* TokenType.Plus */)) {\n      // ${1:+<if>}\n      const ifValue = this._until(4 /* TokenType.CurlyClose */);\n      if (ifValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n        return true;\n      }\n    } else if (this._accept(12 /* TokenType.Dash */)) {\n      // ${2:-<else>}\n      const elseValue = this._until(4 /* TokenType.CurlyClose */);\n      if (elseValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n        return true;\n      }\n    } else if (this._accept(13 /* TokenType.QuestionMark */)) {\n      // ${2:?<if>:<else>}\n      const ifValue = this._until(1 /* TokenType.Colon */);\n      if (ifValue) {\n        const elseValue = this._until(4 /* TokenType.CurlyClose */);\n        if (elseValue) {\n          parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n          return true;\n        }\n      }\n    } else {\n      // ${1:<else>}\n      const elseValue = this._until(4 /* TokenType.CurlyClose */);\n      if (elseValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n        return true;\n      }\n    }\n    this._backTo(token);\n    return false;\n  }\n  _parseAnything(marker) {\n    if (this._token.type !== 14 /* TokenType.EOF */) {\n      marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n      this._accept(undefined);\n      return true;\n    }\n    return false;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\n/**\n * Given a {@link DropOrPasteEdit} and set of ranges, creates a {@link WorkspaceEdit} that applies the insert text from\n * the {@link DropOrPasteEdit} at each range plus any additional edits.\n */\nexport function createCombinedWorkspaceEdit(uri, ranges, edit) {\n  // If the edit insert text is empty, skip applying at each range\n  if (typeof edit.insertText === 'string' ? edit.insertText === '' : edit.insertText.snippet === '') {\n    return {\n      edits: edit.additionalEdit?.edits ?? []\n    };\n  }\n  return {\n    edits: [...ranges.map(range => new ResourceTextEdit(uri, {\n      range,\n      text: typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) + '$0' : edit.insertText.snippet,\n      insertAsSnippet: true\n    })), ...(edit.additionalEdit?.edits ?? [])]\n  };\n}\nexport function sortEditsByYieldTo(edits) {\n  function yieldsTo(yTo, other) {\n    if ('mimeType' in yTo) {\n      return yTo.mimeType === other.handledMimeType;\n    }\n    return !!other.kind && yTo.kind.contains(other.kind);\n  }\n  // Build list of nodes each node yields to\n  const yieldsToMap = new Map();\n  for (const edit of edits) {\n    for (const yTo of edit.yieldTo ?? []) {\n      for (const other of edits) {\n        if (other === edit) {\n          continue;\n        }\n        if (yieldsTo(yTo, other)) {\n          let arr = yieldsToMap.get(edit);\n          if (!arr) {\n            arr = [];\n            yieldsToMap.set(edit, arr);\n          }\n          arr.push(other);\n        }\n      }\n    }\n  }\n  if (!yieldsToMap.size) {\n    return Array.from(edits);\n  }\n  // Topological sort\n  const visited = new Set();\n  const tempStack = [];\n  function visit(nodes) {\n    if (!nodes.length) {\n      return [];\n    }\n    const node = nodes[0];\n    if (tempStack.includes(node)) {\n      console.warn('Yield to cycle detected', node);\n      return nodes;\n    }\n    if (visited.has(node)) {\n      return visit(nodes.slice(1));\n    }\n    let pre = [];\n    const yTo = yieldsToMap.get(node);\n    if (yTo) {\n      tempStack.push(node);\n      pre = visit(yTo);\n      tempStack.pop();\n    }\n    visited.add(node);\n    return [...pre, node, ...visit(nodes.slice(1))];\n  }\n  return visit(Array.from(edits));\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './inlineProgressWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nconst inlineProgressDecoration = ModelDecorationOptions.register({\n  description: 'inline-progress-widget',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  showIfCollapsed: true,\n  after: {\n    content: noBreakWhitespace,\n    inlineClassName: 'inline-editor-progress-decoration',\n    inlineClassNameAffectsLetterSpacing: true\n  }\n});\nlet InlineProgressWidget = /*#__PURE__*/(() => {\n  class InlineProgressWidget extends Disposable {\n    static {\n      this.baseId = 'editor.widget.inlineProgressWidget';\n    }\n    constructor(typeId, editor, range, title, delegate) {\n      super();\n      this.typeId = typeId;\n      this.editor = editor;\n      this.range = range;\n      this.delegate = delegate;\n      this.allowEditorOverflow = false;\n      this.suppressMouseDown = true;\n      this.create(title);\n      this.editor.addContentWidget(this);\n      this.editor.layoutContentWidget(this);\n    }\n    create(title) {\n      this.domNode = dom.$('.inline-progress-widget');\n      this.domNode.role = 'button';\n      this.domNode.title = title;\n      const iconElement = dom.$('span.icon');\n      this.domNode.append(iconElement);\n      iconElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\n      const updateSize = () => {\n        const lineHeight = this.editor.getOption(67 /* EditorOption.lineHeight */);\n        this.domNode.style.height = `${lineHeight}px`;\n        this.domNode.style.width = `${Math.ceil(0.8 * lineHeight)}px`;\n      };\n      updateSize();\n      this._register(this.editor.onDidChangeConfiguration(c => {\n        if (c.hasChanged(52 /* EditorOption.fontSize */) || c.hasChanged(67 /* EditorOption.lineHeight */)) {\n          updateSize();\n        }\n      }));\n      this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, e => {\n        this.delegate.cancel();\n      }));\n    }\n    getId() {\n      return InlineProgressWidget.baseId + '.' + this.typeId;\n    }\n    getDomNode() {\n      return this.domNode;\n    }\n    getPosition() {\n      return {\n        position: {\n          lineNumber: this.range.startLineNumber,\n          column: this.range.startColumn\n        },\n        preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n      };\n    }\n    dispose() {\n      super.dispose();\n      this.editor.removeContentWidget(this);\n    }\n  }\n  return InlineProgressWidget;\n})();\nlet InlineProgressManager = class InlineProgressManager extends Disposable {\n  constructor(id, _editor, _instantiationService) {\n    super();\n    this.id = id;\n    this._editor = _editor;\n    this._instantiationService = _instantiationService;\n    /** Delay before showing the progress widget */\n    this._showDelay = 500; // ms\n    this._showPromise = this._register(new MutableDisposable());\n    this._currentWidget = this._register(new MutableDisposable());\n    this._operationIdPool = 0;\n    this._currentDecorations = _editor.createDecorationsCollection();\n  }\n  dispose() {\n    super.dispose();\n    this._currentDecorations.clear();\n  }\n  async showWhile(position, title, promise, delegate, delayOverride) {\n    const operationId = this._operationIdPool++;\n    this._currentOperation = operationId;\n    this.clear();\n    this._showPromise.value = disposableTimeout(() => {\n      const range = Range.fromPositions(position);\n      const decorationIds = this._currentDecorations.set([{\n        range: range,\n        options: inlineProgressDecoration\n      }]);\n      if (decorationIds.length > 0) {\n        this._currentWidget.value = this._instantiationService.createInstance(InlineProgressWidget, this.id, this._editor, range, title, delegate);\n      }\n    }, delayOverride ?? this._showDelay);\n    try {\n      return await promise;\n    } finally {\n      if (this._currentOperation === operationId) {\n        this.clear();\n        this._currentOperation = undefined;\n      }\n    }\n  }\n  clear() {\n    this._showPromise.clear();\n    this._currentDecorations.clear();\n    this._currentWidget.clear();\n  }\n};\nInlineProgressManager = __decorate([__param(2, IInstantiationService)], InlineProgressManager);\nexport { InlineProgressManager };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar MessageController_1;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { openLinkFromMarkdown } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport * as dom from '../../../../base/browser/dom.js';\nlet MessageController = class MessageController {\n  static {\n    MessageController_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.messageController';\n  }\n  static {\n    this.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\n  }\n  static get(editor) {\n    return editor.getContribution(MessageController_1.ID);\n  }\n  constructor(editor, contextKeyService, _openerService) {\n    this._openerService = _openerService;\n    this._messageWidget = new MutableDisposable();\n    this._messageListeners = new DisposableStore();\n    this._mouseOverMessage = false;\n    this._editor = editor;\n    this._visible = MessageController_1.MESSAGE_VISIBLE.bindTo(contextKeyService);\n  }\n  dispose() {\n    this._message?.dispose();\n    this._messageListeners.dispose();\n    this._messageWidget.dispose();\n    this._visible.reset();\n  }\n  showMessage(message, position) {\n    alert(isMarkdownString(message) ? message.value : message);\n    this._visible.set(true);\n    this._messageWidget.clear();\n    this._messageListeners.clear();\n    this._message = isMarkdownString(message) ? renderMarkdown(message, {\n      actionHandler: {\n        callback: url => {\n          this.closeMessage();\n          openLinkFromMarkdown(this._openerService, url, isMarkdownString(message) ? message.isTrusted : undefined);\n        },\n        disposables: this._messageListeners\n      }\n    }) : undefined;\n    this._messageWidget.value = new MessageWidget(this._editor, position, typeof message === 'string' ? message : this._message.element);\n    // close on blur (debounced to allow to tab into the message), cursor, model change, dispose\n    this._messageListeners.add(Event.debounce(this._editor.onDidBlurEditorText, (last, event) => event, 0)(() => {\n      if (this._mouseOverMessage) {\n        return; // override when mouse over message\n      }\n      if (this._messageWidget.value && dom.isAncestor(dom.getActiveElement(), this._messageWidget.value.getDomNode())) {\n        return; // override when focus is inside the message\n      }\n      this.closeMessage();\n    }));\n    this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n    this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n    this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n    this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_ENTER, () => this._mouseOverMessage = true, true));\n    this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_LEAVE, () => this._mouseOverMessage = false, true));\n    // close on mouse move\n    let bounds;\n    this._messageListeners.add(this._editor.onMouseMove(e => {\n      // outside the text area\n      if (!e.target.position) {\n        return;\n      }\n      if (!bounds) {\n        // define bounding box around position and first mouse occurance\n        bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n      } else if (!bounds.containsPosition(e.target.position)) {\n        // check if position is still in bounds\n        this.closeMessage();\n      }\n    }));\n  }\n  closeMessage() {\n    this._visible.reset();\n    this._messageListeners.clear();\n    if (this._messageWidget.value) {\n      this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n    }\n  }\n};\nMessageController = MessageController_1 = __decorate([__param(1, IContextKeyService), __param(2, IOpenerService)], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n  id: 'leaveEditorMessage',\n  precondition: MessageController.MESSAGE_VISIBLE,\n  handler: c => c.closeMessage(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n    primary: 9 /* KeyCode.Escape */\n  }\n}));\nclass MessageWidget {\n  static fadeOut(messageWidget) {\n    const dispose = () => {\n      messageWidget.dispose();\n      clearTimeout(handle);\n      messageWidget.getDomNode().removeEventListener('animationend', dispose);\n    };\n    const handle = setTimeout(dispose, 110);\n    messageWidget.getDomNode().addEventListener('animationend', dispose);\n    messageWidget.getDomNode().classList.add('fadeOut');\n    return {\n      dispose\n    };\n  }\n  constructor(editor, {\n    lineNumber,\n    column\n  }, text) {\n    // Editor.IContentWidget.allowEditorOverflow\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this._editor = editor;\n    this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n    this._position = {\n      lineNumber,\n      column\n    };\n    this._domNode = document.createElement('div');\n    this._domNode.classList.add('monaco-editor-overlaymessage');\n    this._domNode.style.marginLeft = '-6px';\n    const anchorTop = document.createElement('div');\n    anchorTop.classList.add('anchor', 'top');\n    this._domNode.appendChild(anchorTop);\n    const message = document.createElement('div');\n    if (typeof text === 'string') {\n      message.classList.add('message');\n      message.textContent = text;\n    } else {\n      text.classList.add('message');\n      message.appendChild(text);\n    }\n    this._domNode.appendChild(message);\n    const anchorBottom = document.createElement('div');\n    anchorBottom.classList.add('anchor', 'below');\n    this._domNode.appendChild(anchorBottom);\n    this._editor.addContentWidget(this);\n    this._domNode.classList.add('fadeIn');\n  }\n  dispose() {\n    this._editor.removeContentWidget(this);\n  }\n  getId() {\n    return 'messageoverlay';\n  }\n  getDomNode() {\n    return this._domNode;\n  }\n  getPosition() {\n    return {\n      position: this._position,\n      preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\n      positionAffinity: 1 /* PositionAffinity.Right */\n    };\n  }\n  afterRender(position) {\n    this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n  }\n}\nregisterEditorContribution(MessageController.ID, MessageController, 4 /* EditorContributionInstantiation.Lazy */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar PostEditWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { toAction } from '../../../../base/common/actions.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport './postEditWidget.css';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { createCombinedWorkspaceEdit } from './edit.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nlet PostEditWidget = /*#__PURE__*/(() => {\n  let PostEditWidget = class PostEditWidget extends Disposable {\n    static {\n      PostEditWidget_1 = this;\n    }\n    static {\n      this.baseId = 'editor.widget.postEditWidget';\n    }\n    constructor(typeId, editor, visibleContext, showCommand, range, edits, onSelectNewEdit, _contextMenuService, contextKeyService, _keybindingService) {\n      super();\n      this.typeId = typeId;\n      this.editor = editor;\n      this.showCommand = showCommand;\n      this.range = range;\n      this.edits = edits;\n      this.onSelectNewEdit = onSelectNewEdit;\n      this._contextMenuService = _contextMenuService;\n      this._keybindingService = _keybindingService;\n      this.allowEditorOverflow = true;\n      this.suppressMouseDown = true;\n      this.create();\n      this.visibleContext = visibleContext.bindTo(contextKeyService);\n      this.visibleContext.set(true);\n      this._register(toDisposable(() => this.visibleContext.reset()));\n      this.editor.addContentWidget(this);\n      this.editor.layoutContentWidget(this);\n      this._register(toDisposable(() => this.editor.removeContentWidget(this)));\n      this._register(this.editor.onDidChangeCursorPosition(e => {\n        if (!range.containsPosition(e.position)) {\n          this.dispose();\n        }\n      }));\n      this._register(Event.runAndSubscribe(_keybindingService.onDidUpdateKeybindings, () => {\n        this._updateButtonTitle();\n      }));\n    }\n    _updateButtonTitle() {\n      const binding = this._keybindingService.lookupKeybinding(this.showCommand.id)?.getLabel();\n      this.button.element.title = this.showCommand.label + (binding ? ` (${binding})` : '');\n    }\n    create() {\n      this.domNode = dom.$('.post-edit-widget');\n      this.button = this._register(new Button(this.domNode, {\n        supportIcons: true\n      }));\n      this.button.label = '$(insert)';\n      this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, () => this.showSelector()));\n    }\n    getId() {\n      return PostEditWidget_1.baseId + '.' + this.typeId;\n    }\n    getDomNode() {\n      return this.domNode;\n    }\n    getPosition() {\n      return {\n        position: this.range.getEndPosition(),\n        preference: [2 /* ContentWidgetPositionPreference.BELOW */]\n      };\n    }\n    showSelector() {\n      this._contextMenuService.showContextMenu({\n        getAnchor: () => {\n          const pos = dom.getDomNodePagePosition(this.button.element);\n          return {\n            x: pos.left + pos.width,\n            y: pos.top + pos.height\n          };\n        },\n        getActions: () => {\n          return this.edits.allEdits.map((edit, i) => toAction({\n            id: '',\n            label: edit.title,\n            checked: i === this.edits.activeEditIndex,\n            run: () => {\n              if (i !== this.edits.activeEditIndex) {\n                return this.onSelectNewEdit(i);\n              }\n            }\n          }));\n        }\n      });\n    }\n  };\n  return PostEditWidget;\n})();\nPostEditWidget = PostEditWidget_1 = __decorate([__param(7, IContextMenuService), __param(8, IContextKeyService), __param(9, IKeybindingService)], PostEditWidget);\nlet PostEditWidgetManager = class PostEditWidgetManager extends Disposable {\n  constructor(_id, _editor, _visibleContext, _showCommand, _instantiationService, _bulkEditService, _notificationService) {\n    super();\n    this._id = _id;\n    this._editor = _editor;\n    this._visibleContext = _visibleContext;\n    this._showCommand = _showCommand;\n    this._instantiationService = _instantiationService;\n    this._bulkEditService = _bulkEditService;\n    this._notificationService = _notificationService;\n    this._currentWidget = this._register(new MutableDisposable());\n    this._register(Event.any(_editor.onDidChangeModel, _editor.onDidChangeModelContent)(() => this.clear()));\n  }\n  async applyEditAndShowIfNeeded(ranges, edits, canShowWidget, resolve, token) {\n    const model = this._editor.getModel();\n    if (!model || !ranges.length) {\n      return;\n    }\n    const edit = edits.allEdits.at(edits.activeEditIndex);\n    if (!edit) {\n      return;\n    }\n    const onDidSelectEdit = async newEditIndex => {\n      const model = this._editor.getModel();\n      if (!model) {\n        return;\n      }\n      await model.undo();\n      this.applyEditAndShowIfNeeded(ranges, {\n        activeEditIndex: newEditIndex,\n        allEdits: edits.allEdits\n      }, canShowWidget, resolve, token);\n    };\n    const handleError = (e, message) => {\n      if (isCancellationError(e)) {\n        return;\n      }\n      this._notificationService.error(message);\n      if (canShowWidget) {\n        this.show(ranges[0], edits, onDidSelectEdit);\n      }\n    };\n    let resolvedEdit;\n    try {\n      resolvedEdit = await resolve(edit, token);\n    } catch (e) {\n      return handleError(e, localize('resolveError', \"Error resolving edit '{0}':\\n{1}\", edit.title, toErrorMessage(e)));\n    }\n    if (token.isCancellationRequested) {\n      return;\n    }\n    const combinedWorkspaceEdit = createCombinedWorkspaceEdit(model.uri, ranges, resolvedEdit);\n    // Use a decoration to track edits around the trigger range\n    const primaryRange = ranges[0];\n    const editTrackingDecoration = model.deltaDecorations([], [{\n      range: primaryRange,\n      options: {\n        description: 'paste-line-suffix',\n        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */\n      }\n    }]);\n    this._editor.focus();\n    let editResult;\n    let editRange;\n    try {\n      editResult = await this._bulkEditService.apply(combinedWorkspaceEdit, {\n        editor: this._editor,\n        token\n      });\n      editRange = model.getDecorationRange(editTrackingDecoration[0]);\n    } catch (e) {\n      return handleError(e, localize('applyError', \"Error applying edit '{0}':\\n{1}\", edit.title, toErrorMessage(e)));\n    } finally {\n      model.deltaDecorations(editTrackingDecoration, []);\n    }\n    if (token.isCancellationRequested) {\n      return;\n    }\n    if (canShowWidget && editResult.isApplied && edits.allEdits.length > 1) {\n      this.show(editRange ?? primaryRange, edits, onDidSelectEdit);\n    }\n  }\n  show(range, edits, onDidSelectEdit) {\n    this.clear();\n    if (this._editor.hasModel()) {\n      this._currentWidget.value = this._instantiationService.createInstance(PostEditWidget, this._id, this._editor, this._visibleContext, this._showCommand, range, edits, onDidSelectEdit);\n    }\n  }\n  clear() {\n    this._currentWidget.clear();\n  }\n  tryShowSelector() {\n    this._currentWidget.value?.showSelector();\n  }\n};\nPostEditWidgetManager = __decorate([__param(4, IInstantiationService), __param(5, IBulkEditService), __param(6, INotificationService)], PostEditWidgetManager);\nexport { PostEditWidgetManager };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from './arrays.js';\nimport * as types from './types.js';\nimport * as nls from '../../nls.js';\nfunction exceptionToErrorMessage(exception, verbose) {\n  if (verbose && (exception.stack || exception.stacktrace)) {\n    return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\n  }\n  return detectSystemErrorMessage(exception);\n}\nfunction stackToString(stack) {\n  if (Array.isArray(stack)) {\n    return stack.join('\\n');\n  }\n  return stack;\n}\nfunction detectSystemErrorMessage(exception) {\n  // Custom node.js error from us\n  if (exception.code === 'ERR_UNC_HOST_NOT_ALLOWED') {\n    return `${exception.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`;\n  }\n  // See https://nodejs.org/api/errors.html#errors_class_system_error\n  if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\n    return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\n  }\n  return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error = null, verbose = false) {\n  if (!error) {\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n  }\n  if (Array.isArray(error)) {\n    const errors = arrays.coalesce(error);\n    const msg = toErrorMessage(errors[0], verbose);\n    if (errors.length > 1) {\n      return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\n    }\n    return msg;\n  }\n  if (types.isString(error)) {\n    return error;\n  }\n  if (error.detail) {\n    const detail = error.detail;\n    if (detail.error) {\n      return exceptionToErrorMessage(detail.error, verbose);\n    }\n    if (detail.exception) {\n      return exceptionToErrorMessage(detail.exception, verbose);\n    }\n  }\n  if (error.stack) {\n    return exceptionToErrorMessage(error, verbose);\n  }\n  if (error.message) {\n    return error.message;\n  }\n  return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, SourceAction } from './codeActionCommands.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorContribution(LightBulbWidget.ID, LightBulbWidget, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration({\n  ...editorConfigurationBaseNode,\n  properties: {\n    'editor.codeActionWidget.showHeaders': {\n      type: 'boolean',\n      scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n      description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n      default: true\n    }\n  }\n});\nRegistry.as(Extensions.Configuration).registerConfiguration({\n  ...editorConfigurationBaseNode,\n  properties: {\n    'editor.codeActionWidget.includeNearbyQuickFixes': {\n      type: 'boolean',\n      scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n      description: nls.localize('includeNearbyQuickFixes', \"Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic.\"),\n      default: true\n    }\n  }\n});\nRegistry.as(Extensions.Configuration).registerConfiguration({\n  ...editorConfigurationBaseNode,\n  properties: {\n    'editor.codeActions.triggerOnFocusChange': {\n      type: 'boolean',\n      scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n      markdownDescription: nls.localize('triggerOnFocusChange', 'Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.', '`#editor.codeActionsOnSave#`', '`#files.autoSave#`', '`afterDelay`', '`always`'),\n      default: false\n    }\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { autoFixCommandId, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, quickFixCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nfunction contextKeyForSupportedActions(kind) {\n  return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n  type: 'object',\n  defaultSnippets: [{\n    body: {\n      kind: ''\n    }\n  }],\n  properties: {\n    'kind': {\n      type: 'string',\n      description: nls.localize('args.schema.kind', \"Kind of the code action to run.\")\n    },\n    'apply': {\n      type: 'string',\n      description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n      default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n      enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n      enumDescriptions: [nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"), nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"), nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\")]\n    },\n    'preferred': {\n      type: 'boolean',\n      default: false,\n      description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\")\n    }\n  }\n};\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, triggerAction = CodeActionTriggerSource.Default) {\n  if (editor.hasModel()) {\n    const controller = CodeActionController.get(editor);\n    controller?.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply);\n  }\n}\nexport class QuickFixAction extends EditorAction {\n  constructor() {\n    super({\n      id: quickFixCommandId,\n      label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n      alias: 'Quick Fix...',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, CodeActionTriggerSource.QuickFix);\n  }\n}\nexport class CodeActionCommand extends EditorCommand {\n  constructor() {\n    super({\n      id: codeActionCommandId,\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      metadata: {\n        description: 'Trigger a code action',\n        args: [{\n          name: 'args',\n          schema: argsSchema\n        }]\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor, userArgs) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n      kind: HierarchicalKind.Empty,\n      apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof userArgs?.kind === 'string' ? args.preferred ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind) : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind) : args.preferred ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\") : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n      include: args.kind,\n      includeSourceActions: true,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply);\n  }\n}\nexport class RefactorAction extends EditorAction {\n  constructor() {\n    super({\n      id: refactorCommandId,\n      label: nls.localize('refactor.label', \"Refactor...\"),\n      alias: 'Refactor...',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 2,\n        when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor))\n      },\n      metadata: {\n        description: 'Refactor...',\n        args: [{\n          name: 'args',\n          schema: argsSchema\n        }]\n      }\n    });\n  }\n  run(_accessor, editor, userArgs) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n      kind: CodeActionKind.Refactor,\n      apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof userArgs?.kind === 'string' ? args.preferred ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind) : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind) : args.preferred ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\") : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n      include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : HierarchicalKind.None,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply, CodeActionTriggerSource.Refactor);\n  }\n}\nexport class SourceAction extends EditorAction {\n  constructor() {\n    super({\n      id: sourceActionCommandId,\n      label: nls.localize('source.label', \"Source Action...\"),\n      alias: 'Source Action...',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 2.1,\n        when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source))\n      },\n      metadata: {\n        description: 'Source Action...',\n        args: [{\n          name: 'args',\n          schema: argsSchema\n        }]\n      }\n    });\n  }\n  run(_accessor, editor, userArgs) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n      kind: CodeActionKind.Source,\n      apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof userArgs?.kind === 'string' ? args.preferred ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind) : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind) : args.preferred ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\") : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n      include: CodeActionKind.Source.contains(args.kind) ? args.kind : HierarchicalKind.None,\n      includeSourceActions: true,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply, CodeActionTriggerSource.SourceAction);\n  }\n}\nexport class OrganizeImportsAction extends EditorAction {\n  constructor() {\n    super({\n      id: organizeImportsCommandId,\n      label: nls.localize('organizeImports.label', \"Organize Imports\"),\n      alias: 'Organize Imports',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), {\n      include: CodeActionKind.SourceOrganizeImports,\n      includeSourceActions: true\n    }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.OrganizeImports);\n  }\n}\nexport class FixAllAction extends EditorAction {\n  constructor() {\n    super({\n      id: fixAllCommandId,\n      label: nls.localize('fixAll.label', \"Fix All\"),\n      alias: 'Fix All',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n    });\n  }\n  run(_accessor, editor) {\n    return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), {\n      include: CodeActionKind.SourceFixAll,\n      includeSourceActions: true\n    }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.FixAll);\n  }\n}\nexport class AutoFixAction extends EditorAction {\n  constructor() {\n    super({\n      id: autoFixCommandId,\n      label: nls.localize('autoFix.label', \"Auto Fix...\"),\n      alias: 'Auto Fix...',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.Period */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n      include: CodeActionKind.QuickFix,\n      onlyIncludePreferredActions: true\n    }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.AutoFix);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const quickFixCommandId = 'editor.action.quickFix';\nexport const autoFixCommandId = 'editor.action.autoFix';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n  static codeActionsPreferredComparator(a, b) {\n    if (a.isPreferred && !b.isPreferred) {\n      return -1;\n    } else if (!a.isPreferred && b.isPreferred) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n  static codeActionsComparator({\n    action: a\n  }, {\n    action: b\n  }) {\n    if (a.isAI && !b.isAI) {\n      return 1;\n    } else if (!a.isAI && b.isAI) {\n      return -1;\n    }\n    if (isNonEmptyArray(a.diagnostics)) {\n      return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n    } else if (isNonEmptyArray(b.diagnostics)) {\n      return 1;\n    } else {\n      return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n    }\n  }\n  constructor(actions, documentation, disposables) {\n    super();\n    this.documentation = documentation;\n    this._register(disposables);\n    this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n    this.validActions = this.allActions.filter(({\n      action\n    }) => !action.disabled);\n  }\n  get hasAutoFix() {\n    return this.validActions.some(({\n      action: fix\n    }) => !!fix.kind && CodeActionKind.QuickFix.contains(new HierarchicalKind(fix.kind)) && !!fix.isPreferred);\n  }\n  get hasAIFix() {\n    return this.validActions.some(({\n      action: fix\n    }) => !!fix.isAI);\n  }\n  get allAIFixes() {\n    return this.validActions.every(({\n      action: fix\n    }) => !!fix.isAI);\n  }\n}\nconst emptyCodeActionsResponse = {\n  actions: [],\n  documentation: undefined\n};\nexport async function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n  const filter = trigger.filter || {};\n  const notebookFilter = {\n    ...filter,\n    excludes: [...(filter.excludes || []), CodeActionKind.Notebook]\n  };\n  const codeActionContext = {\n    only: filter.include?.value,\n    trigger: trigger.type\n  };\n  const cts = new TextModelCancellationTokenSource(model, token);\n  // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\n  const excludeNotebookCodeActions = trigger.type === 2 /* languages.CodeActionTriggerType.Auto */;\n  const providers = getCodeActionProviders(registry, model, excludeNotebookCodeActions ? notebookFilter : filter);\n  const disposables = new DisposableStore();\n  const promises = providers.map(async provider => {\n    try {\n      progress.report(provider);\n      const providedCodeActions = await provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n      if (providedCodeActions) {\n        disposables.add(providedCodeActions);\n      }\n      if (cts.token.isCancellationRequested) {\n        return emptyCodeActionsResponse;\n      }\n      const filteredActions = (providedCodeActions?.actions || []).filter(action => action && filtersAction(filter, action));\n      const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n      return {\n        actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n        documentation\n      };\n    } catch (err) {\n      if (isCancellationError(err)) {\n        throw err;\n      }\n      onUnexpectedExternalError(err);\n      return emptyCodeActionsResponse;\n    }\n  });\n  const listener = registry.onDidChange(() => {\n    const newProviders = registry.all(model);\n    if (!equals(newProviders, providers)) {\n      cts.cancel();\n    }\n  });\n  try {\n    const actions = await Promise.all(promises);\n    const allActions = actions.map(x => x.actions).flat();\n    const allDocumentation = [...coalesce(actions.map(x => x.documentation)), ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)];\n    return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n  } finally {\n    listener.dispose();\n    cts.dispose();\n  }\n}\nfunction getCodeActionProviders(registry, model, filter) {\n  return registry.all(model)\n  // Don't include providers that we know will not return code actions of interest\n  .filter(provider => {\n    if (!provider.providedCodeActionKinds) {\n      // We don't know what type of actions this provider will return.\n      return true;\n    }\n    return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new HierarchicalKind(kind)));\n  });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n  if (model && actionsToShow.length) {\n    for (const provider of registry.all(model)) {\n      if (provider._getAdditionalMenuItems) {\n        yield* provider._getAdditionalMenuItems?.({\n          trigger: trigger.type,\n          only: trigger.filter?.include?.value\n        }, actionsToShow.map(item => item.action));\n      }\n    }\n  }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n  if (!provider.documentation) {\n    return undefined;\n  }\n  const documentation = provider.documentation.map(entry => ({\n    kind: new HierarchicalKind(entry.kind),\n    command: entry.command\n  }));\n  if (only) {\n    let currentBest;\n    for (const entry of documentation) {\n      if (entry.kind.contains(only)) {\n        if (!currentBest) {\n          currentBest = entry;\n        } else {\n          // Take best match\n          if (currentBest.kind.contains(entry.kind)) {\n            currentBest = entry;\n          }\n        }\n      }\n    }\n    if (currentBest) {\n      return currentBest?.command;\n    }\n  }\n  // Otherwise, check to see if any of the provided actions match.\n  for (const action of providedCodeActions) {\n    if (!action.kind) {\n      continue;\n    }\n    for (const entry of documentation) {\n      if (entry.kind.contains(new HierarchicalKind(action.kind))) {\n        return entry.command;\n      }\n    }\n  }\n  return undefined;\n}\nexport var ApplyCodeActionReason = /*#__PURE__*/function (ApplyCodeActionReason) {\n  ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n  ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n  ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n  ApplyCodeActionReason[\"FromAILightbulb\"] = \"fromAILightbulb\"; // direct invocation when clicking on the AI lightbulb\n  return ApplyCodeActionReason;\n}(ApplyCodeActionReason || {});\nexport async function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n  const bulkEditService = accessor.get(IBulkEditService);\n  const commandService = accessor.get(ICommandService);\n  const telemetryService = accessor.get(ITelemetryService);\n  const notificationService = accessor.get(INotificationService);\n  telemetryService.publicLog2('codeAction.applyCodeAction', {\n    codeActionTitle: item.action.title,\n    codeActionKind: item.action.kind,\n    codeActionIsPreferred: !!item.action.isPreferred,\n    reason: codeActionReason\n  });\n  await item.resolve(token);\n  if (token.isCancellationRequested) {\n    return;\n  }\n  if (item.action.edit?.edits.length) {\n    const result = await bulkEditService.apply(item.action.edit, {\n      editor: options?.editor,\n      label: item.action.title,\n      quotableLabel: item.action.title,\n      code: 'undoredo.codeAction',\n      respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n      showPreview: options?.preview\n    });\n    if (!result.isApplied) {\n      return;\n    }\n  }\n  if (item.action.command) {\n    try {\n      await commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n    } catch (err) {\n      const message = asMessage(err);\n      notificationService.error(typeof message === 'string' ? message : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n    }\n  }\n}\nfunction asMessage(err) {\n  if (typeof err === 'string') {\n    return err;\n  } else if (err instanceof Error && typeof err.message === 'string') {\n    return err.message;\n  } else {\n    return undefined;\n  }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', async function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n  const {\n    codeActionProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument();\n  }\n  const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection) ? Selection.liftSelection(rangeOrSelection) : Range.isIRange(rangeOrSelection) ? model.validateRange(rangeOrSelection) : undefined;\n  if (!validatedRangeOrSelection) {\n    throw illegalArgument();\n  }\n  const include = typeof kind === 'string' ? new HierarchicalKind(kind) : undefined;\n  const codeActionSet = await getCodeActions(codeActionProvider, model, validatedRangeOrSelection, {\n    type: 1 /* languages.CodeActionTriggerType.Invoke */,\n    triggerAction: CodeActionTriggerSource.Default,\n    filter: {\n      includeSourceActions: true,\n      include\n    }\n  }, Progress.None, CancellationToken.None);\n  const resolving = [];\n  const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n  for (let i = 0; i < resolveCount; i++) {\n    resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n  }\n  try {\n    await Promise.all(resolving);\n    return codeActionSet.validActions.map(item => item.action);\n  } finally {\n    setTimeout(() => codeActionSet.dispose(), 100);\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nexport const CodeActionKind = new class {\n  constructor() {\n    this.QuickFix = new HierarchicalKind('quickfix');\n    this.Refactor = new HierarchicalKind('refactor');\n    this.RefactorExtract = this.Refactor.append('extract');\n    this.RefactorInline = this.Refactor.append('inline');\n    this.RefactorMove = this.Refactor.append('move');\n    this.RefactorRewrite = this.Refactor.append('rewrite');\n    this.Notebook = new HierarchicalKind('notebook');\n    this.Source = new HierarchicalKind('source');\n    this.SourceOrganizeImports = this.Source.append('organizeImports');\n    this.SourceFixAll = this.Source.append('fixAll');\n    this.SurroundWith = this.Refactor.append('surround');\n  }\n}();\nexport var CodeActionTriggerSource = /*#__PURE__*/function (CodeActionTriggerSource) {\n  CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n  CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n  CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n  CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n  CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n  CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n  CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n  CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n  CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n  CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n  CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n  CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n  return CodeActionTriggerSource;\n}(CodeActionTriggerSource || {});\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n  // A provided kind may be a subset or superset of our filtered kind.\n  if (filter.include && !filter.include.intersects(providedKind)) {\n    return false;\n  }\n  if (filter.excludes) {\n    if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n      return false;\n    }\n  }\n  // Don't return source actions unless they are explicitly requested\n  if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n    return false;\n  }\n  return true;\n}\nexport function filtersAction(filter, action) {\n  const actionKind = action.kind ? new HierarchicalKind(action.kind) : undefined;\n  // Filter out actions by kind\n  if (filter.include) {\n    if (!actionKind || !filter.include.contains(actionKind)) {\n      return false;\n    }\n  }\n  if (filter.excludes) {\n    if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n      return false;\n    }\n  }\n  // Don't return source actions unless they are explicitly requested\n  if (!filter.includeSourceActions) {\n    if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n      return false;\n    }\n  }\n  if (filter.onlyIncludePreferredActions) {\n    if (!action.isPreferred) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n  if (!exclude.contains(providedKind)) {\n    return false;\n  }\n  if (include && exclude.contains(include)) {\n    // The include is more specific, don't filter out\n    return false;\n  }\n  return true;\n}\nexport class CodeActionCommandArgs {\n  static fromUser(arg, defaults) {\n    if (!arg || typeof arg !== 'object') {\n      return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n    }\n    return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n  }\n  static getApplyFromUser(arg, defaultAutoApply) {\n    switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n      case 'first':\n        return \"first\" /* CodeActionAutoApply.First */;\n      case 'never':\n        return \"never\" /* CodeActionAutoApply.Never */;\n      case 'ifsingle':\n        return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n      default:\n        return defaultAutoApply;\n    }\n  }\n  static getKindFromUser(arg, defaultKind) {\n    return typeof arg.kind === 'string' ? new HierarchicalKind(arg.kind) : defaultKind;\n  }\n  static getPreferredUser(arg) {\n    return typeof arg.preferred === 'boolean' ? arg.preferred : false;\n  }\n  constructor(kind, apply, preferred) {\n    this.kind = kind;\n    this.apply = apply;\n    this.preferred = preferred;\n  }\n}\nexport class CodeActionItem {\n  constructor(action, provider, highlightRange) {\n    this.action = action;\n    this.provider = provider;\n    this.highlightRange = highlightRange;\n  }\n  async resolve(token) {\n    if (this.provider?.resolveCodeAction && !this.action.edit) {\n      let action;\n      try {\n        action = await this.provider.resolveCodeAction(this.action, token);\n      } catch (err) {\n        onUnexpectedExternalError(err);\n      }\n      if (action) {\n        this.action.edit = action.edit;\n      }\n    }\n    return this;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar CodeActionController_1;\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ApplyCodeActionReason, applyCodeAction } from './codeAction.js';\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\nimport { toMenuItems } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { editorFindMatchHighlight, editorFindMatchHighlightBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionModel } from './codeActionModel.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nconst DECORATION_CLASS_NAME = 'quickfix-edit-highlight';\nlet CodeActionController = class CodeActionController extends Disposable {\n  static {\n    CodeActionController_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.codeActionController';\n  }\n  static get(editor) {\n    return editor.getContribution(CodeActionController_1.ID);\n  }\n  constructor(editor, markerService, contextKeyService, instantiationService, languageFeaturesService, progressService, _commandService, _configurationService, _actionWidgetService, _instantiationService, _telemetryService) {\n    super();\n    this._commandService = _commandService;\n    this._configurationService = _configurationService;\n    this._actionWidgetService = _actionWidgetService;\n    this._instantiationService = _instantiationService;\n    this._telemetryService = _telemetryService;\n    this._activeCodeActions = this._register(new MutableDisposable());\n    this._showDisabled = false;\n    this._disposed = false;\n    this._editor = editor;\n    this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService, _configurationService, this._telemetryService));\n    this._register(this._model.onDidChangeState(newState => this.update(newState)));\n    this._lightBulbWidget = new Lazy(() => {\n      const widget = this._editor.getContribution(LightBulbWidget.ID);\n      if (widget) {\n        this._register(widget.onClick(e => this.showCodeActionsFromLightbulb(e.actions, e)));\n      }\n      return widget;\n    });\n    this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\n    this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\n  }\n  dispose() {\n    this._disposed = true;\n    super.dispose();\n  }\n  async showCodeActionsFromLightbulb(actions, at) {\n    if (actions.allAIFixes && actions.validActions.length === 1) {\n      const actionItem = actions.validActions[0];\n      const command = actionItem.action.command;\n      if (command && command.id === 'inlineChat.start') {\n        if (command.arguments && command.arguments.length >= 1) {\n          command.arguments[0] = {\n            ...command.arguments[0],\n            autoSend: false\n          };\n        }\n      }\n      await this._applyCodeAction(actionItem, false, false, ApplyCodeActionReason.FromAILightbulb);\n      return;\n    }\n    await this.showCodeActionList(actions, at, {\n      includeDisabledActions: false,\n      fromLightbulb: true\n    });\n  }\n  showCodeActions(_trigger, actions, at) {\n    return this.showCodeActionList(actions, at, {\n      includeDisabledActions: false,\n      fromLightbulb: false\n    });\n  }\n  manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    MessageController.get(this._editor)?.closeMessage();\n    const triggerPosition = this._editor.getPosition();\n    this._trigger({\n      type: 1 /* CodeActionTriggerType.Invoke */,\n      triggerAction,\n      filter,\n      autoApply,\n      context: {\n        notAvailableMessage,\n        position: triggerPosition\n      }\n    });\n  }\n  _trigger(trigger) {\n    return this._model.trigger(trigger);\n  }\n  async _applyCodeAction(action, retrigger, preview, actionReason) {\n    try {\n      await this._instantiationService.invokeFunction(applyCodeAction, action, actionReason, {\n        preview,\n        editor: this._editor\n      });\n    } finally {\n      if (retrigger) {\n        this._trigger({\n          type: 2 /* CodeActionTriggerType.Auto */,\n          triggerAction: CodeActionTriggerSource.QuickFix,\n          filter: {}\n        });\n      }\n    }\n  }\n  hideLightBulbWidget() {\n    this._lightBulbWidget.rawValue?.hide();\n    this._lightBulbWidget.rawValue?.gutterHide();\n  }\n  async update(newState) {\n    if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n      this.hideLightBulbWidget();\n      return;\n    }\n    let actions;\n    try {\n      actions = await newState.actions;\n    } catch (e) {\n      onUnexpectedError(e);\n      return;\n    }\n    if (this._disposed) {\n      return;\n    }\n    const selection = this._editor.getSelection();\n    if (selection?.startLineNumber !== newState.position.lineNumber) {\n      return;\n    }\n    this._lightBulbWidget.value?.update(actions, newState.trigger, newState.position);\n    if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n      if (newState.trigger.filter?.include) {\n        // Triggered for specific scope\n        // Check to see if we want to auto apply.\n        const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n        if (validActionToApply) {\n          try {\n            this.hideLightBulbWidget();\n            await this._applyCodeAction(validActionToApply, false, false, ApplyCodeActionReason.FromCodeActions);\n          } finally {\n            actions.dispose();\n          }\n          return;\n        }\n        // Check to see if there is an action that we would have applied were it not invalid\n        if (newState.trigger.context) {\n          const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n          if (invalidAction && invalidAction.action.disabled) {\n            MessageController.get(this._editor)?.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n            actions.dispose();\n            return;\n          }\n        }\n      }\n      const includeDisabledActions = !!newState.trigger.filter?.include;\n      if (newState.trigger.context) {\n        if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n          MessageController.get(this._editor)?.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n          this._activeCodeActions.value = actions;\n          actions.dispose();\n          return;\n        }\n      }\n      this._activeCodeActions.value = actions;\n      this.showCodeActionList(actions, this.toCoords(newState.position), {\n        includeDisabledActions,\n        fromLightbulb: false\n      });\n    } else {\n      // auto magically triggered\n      if (this._actionWidgetService.isVisible) {\n        // TODO: Figure out if we should update the showing menu?\n        actions.dispose();\n      } else {\n        this._activeCodeActions.value = actions;\n      }\n    }\n  }\n  getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n    if (!actions.allActions.length) {\n      return undefined;\n    }\n    if (trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0 || trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1) {\n      return actions.allActions.find(({\n        action\n      }) => action.disabled);\n    }\n    return undefined;\n  }\n  tryGetValidActionToApply(trigger, actions) {\n    if (!actions.validActions.length) {\n      return undefined;\n    }\n    if (trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0 || trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1) {\n      return actions.validActions[0];\n    }\n    return undefined;\n  }\n  static {\n    this.DECORATION = ModelDecorationOptions.register({\n      description: 'quickfix-highlight',\n      className: DECORATION_CLASS_NAME\n    });\n  }\n  async showCodeActionList(actions, at, options) {\n    const currentDecorations = this._editor.createDecorationsCollection();\n    const editorDom = this._editor.getDomNode();\n    if (!editorDom) {\n      return;\n    }\n    const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\n    if (!actionsToShow.length) {\n      return;\n    }\n    const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\n    const delegate = {\n      onSelect: async (action, preview) => {\n        this._applyCodeAction(action, /* retrigger */true, !!preview, options.fromLightbulb ? ApplyCodeActionReason.FromAILightbulb : ApplyCodeActionReason.FromCodeActions);\n        this._actionWidgetService.hide(false);\n        currentDecorations.clear();\n      },\n      onHide: didCancel => {\n        this._editor?.focus();\n        currentDecorations.clear();\n      },\n      onHover: async (action, token) => {\n        if (token.isCancellationRequested) {\n          return;\n        }\n        let canPreview = false;\n        const actionKind = action.action.kind;\n        if (actionKind) {\n          const hierarchicalKind = new HierarchicalKind(actionKind);\n          const refactorKinds = [CodeActionKind.RefactorExtract, CodeActionKind.RefactorInline, CodeActionKind.RefactorRewrite, CodeActionKind.RefactorMove, CodeActionKind.Source];\n          canPreview = refactorKinds.some(refactorKind => refactorKind.contains(hierarchicalKind));\n        }\n        return {\n          canPreview: canPreview || !!action.action.edit?.edits.length\n        };\n      },\n      onFocus: action => {\n        if (action && action.action) {\n          const ranges = action.action.ranges;\n          const diagnostics = action.action.diagnostics;\n          currentDecorations.clear();\n          if (ranges && ranges.length > 0) {\n            // Handles case for `fix all` where there are multiple diagnostics.\n            const decorations = diagnostics && diagnostics?.length > 1 ? diagnostics.map(diagnostic => ({\n              range: diagnostic,\n              options: CodeActionController_1.DECORATION\n            })) : ranges.map(range => ({\n              range,\n              options: CodeActionController_1.DECORATION\n            }));\n            currentDecorations.set(decorations);\n          } else if (diagnostics && diagnostics.length > 0) {\n            const decorations = diagnostics.map(diagnostic => ({\n              range: diagnostic,\n              options: CodeActionController_1.DECORATION\n            }));\n            currentDecorations.set(decorations);\n            const diagnostic = diagnostics[0];\n            if (diagnostic.startLineNumber && diagnostic.startColumn) {\n              const selectionText = this._editor.getModel()?.getWordAtPosition({\n                lineNumber: diagnostic.startLineNumber,\n                column: diagnostic.startColumn\n              })?.word;\n              aria.status(localize('editingNewSelection', \"Context: {0} at line {1} and column {2}.\", selectionText, diagnostic.startLineNumber, diagnostic.startColumn));\n            }\n          }\n        } else {\n          currentDecorations.clear();\n        }\n      }\n    };\n    this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\n  }\n  toCoords(position) {\n    if (!this._editor.hasModel()) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    this._editor.render();\n    // Translate to absolute editor position\n    const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n    const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n    const x = editorCoords.left + cursorCoords.left;\n    const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n    return {\n      x,\n      y\n    };\n  }\n  _shouldShowHeaders() {\n    const model = this._editor?.getModel();\n    return this._configurationService.getValue('editor.codeActionWidget.showHeaders', {\n      resource: model?.uri\n    });\n  }\n  _getActionBarActions(actions, at, options) {\n    if (options.fromLightbulb) {\n      return [];\n    }\n    const resultActions = actions.documentation.map(command => ({\n      id: command.id,\n      label: command.title,\n      tooltip: command.tooltip ?? '',\n      class: undefined,\n      enabled: true,\n      run: () => this._commandService.executeCommand(command.id, ...(command.arguments ?? []))\n    }));\n    if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\n      resultActions.push(this._showDisabled ? {\n        id: 'hideMoreActions',\n        label: localize('hideMoreActions', 'Hide Disabled'),\n        enabled: true,\n        tooltip: '',\n        class: undefined,\n        run: () => {\n          this._showDisabled = false;\n          return this.showCodeActionList(actions, at, options);\n        }\n      } : {\n        id: 'showMoreActions',\n        label: localize('showMoreActions', 'Show Disabled'),\n        enabled: true,\n        tooltip: '',\n        class: undefined,\n        run: () => {\n          this._showDisabled = true;\n          return this.showCodeActionList(actions, at, options);\n        }\n      });\n    }\n    return resultActions;\n  }\n};\nCodeActionController = CodeActionController_1 = __decorate([__param(1, IMarkerService), __param(2, IContextKeyService), __param(3, IInstantiationService), __param(4, ILanguageFeaturesService), __param(5, IEditorProgressService), __param(6, ICommandService), __param(7, IConfigurationService), __param(8, IActionWidgetService), __param(9, IInstantiationService), __param(10, ITelemetryService)], CodeActionController);\nexport { CodeActionController };\nregisterThemingParticipant((theme, collector) => {\n  const addBackgroundColorRule = (selector, color) => {\n    if (color) {\n      collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n    }\n  };\n  addBackgroundColorRule('.quickfix-edit-highlight', theme.getColor(editorFindMatchHighlight));\n  const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n  if (findMatchHighlightBorder) {\n    collector.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar CodeActionKeybindingResolver_1;\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet CodeActionKeybindingResolver = /*#__PURE__*/(() => {\n  let CodeActionKeybindingResolver = class CodeActionKeybindingResolver {\n    static {\n      CodeActionKeybindingResolver_1 = this;\n    }\n    static {\n      this.codeActionCommands = [refactorCommandId, codeActionCommandId, sourceActionCommandId, organizeImportsCommandId, fixAllCommandId];\n    }\n    constructor(keybindingService) {\n      this.keybindingService = keybindingService;\n    }\n    getResolver() {\n      // Lazy since we may not actually ever read the value\n      const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings().filter(item => CodeActionKeybindingResolver_1.codeActionCommands.indexOf(item.command) >= 0).filter(item => item.resolvedKeybinding).map(item => {\n        // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n        let commandArgs = item.commandArgs;\n        if (item.command === organizeImportsCommandId) {\n          commandArgs = {\n            kind: CodeActionKind.SourceOrganizeImports.value\n          };\n        } else if (item.command === fixAllCommandId) {\n          commandArgs = {\n            kind: CodeActionKind.SourceFixAll.value\n          };\n        }\n        return {\n          resolvedKeybinding: item.resolvedKeybinding,\n          ...CodeActionCommandArgs.fromUser(commandArgs, {\n            kind: HierarchicalKind.None,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n          })\n        };\n      }));\n      return action => {\n        if (action.kind) {\n          const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\n          return binding?.resolvedKeybinding;\n        }\n        return undefined;\n      };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n      if (!action.kind) {\n        return undefined;\n      }\n      const kind = new HierarchicalKind(action.kind);\n      return candidates.filter(candidate => candidate.kind.contains(kind)).filter(candidate => {\n        if (candidate.preferred) {\n          // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n          return action.isPreferred;\n        }\n        return true;\n      }).reduceRight((currentBest, candidate) => {\n        if (!currentBest) {\n          return candidate;\n        }\n        // Select the more specific binding\n        return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n      }, undefined);\n    }\n  };\n  return CodeActionKeybindingResolver;\n})();\nCodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = __decorate([__param(0, IKeybindingService)], CodeActionKeybindingResolver);\nexport { CodeActionKeybindingResolver };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CodeActionKind } from '../common/types.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { localize } from '../../../../nls.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nconst uncategorizedCodeActionGroup = Object.freeze({\n  kind: HierarchicalKind.Empty,\n  title: localize('codeAction.widget.id.more', 'More Actions...')\n});\nconst codeActionGroups = Object.freeze([{\n  kind: CodeActionKind.QuickFix,\n  title: localize('codeAction.widget.id.quickfix', 'Quick Fix')\n}, {\n  kind: CodeActionKind.RefactorExtract,\n  title: localize('codeAction.widget.id.extract', 'Extract'),\n  icon: Codicon.wrench\n}, {\n  kind: CodeActionKind.RefactorInline,\n  title: localize('codeAction.widget.id.inline', 'Inline'),\n  icon: Codicon.wrench\n}, {\n  kind: CodeActionKind.RefactorRewrite,\n  title: localize('codeAction.widget.id.convert', 'Rewrite'),\n  icon: Codicon.wrench\n}, {\n  kind: CodeActionKind.RefactorMove,\n  title: localize('codeAction.widget.id.move', 'Move'),\n  icon: Codicon.wrench\n}, {\n  kind: CodeActionKind.SurroundWith,\n  title: localize('codeAction.widget.id.surround', 'Surround With'),\n  icon: Codicon.surroundWith\n}, {\n  kind: CodeActionKind.Source,\n  title: localize('codeAction.widget.id.source', 'Source Action'),\n  icon: Codicon.symbolFile\n}, uncategorizedCodeActionGroup]);\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\n  if (!showHeaders) {\n    return inputCodeActions.map(action => {\n      return {\n        kind: \"action\" /* ActionListItemKind.Action */,\n        item: action,\n        group: uncategorizedCodeActionGroup,\n        disabled: !!action.action.disabled,\n        label: action.action.disabled || action.action.title,\n        canPreview: !!action.action.edit?.edits.length\n      };\n    });\n  }\n  // Group code actions\n  const menuEntries = codeActionGroups.map(group => ({\n    group,\n    actions: []\n  }));\n  for (const action of inputCodeActions) {\n    const kind = action.action.kind ? new HierarchicalKind(action.action.kind) : HierarchicalKind.None;\n    for (const menuEntry of menuEntries) {\n      if (menuEntry.group.kind.contains(kind)) {\n        menuEntry.actions.push(action);\n        break;\n      }\n    }\n  }\n  const allMenuItems = [];\n  for (const menuEntry of menuEntries) {\n    if (menuEntry.actions.length) {\n      allMenuItems.push({\n        kind: \"header\" /* ActionListItemKind.Header */,\n        group: menuEntry.group\n      });\n      for (const action of menuEntry.actions) {\n        const group = menuEntry.group;\n        allMenuItems.push({\n          kind: \"action\" /* ActionListItemKind.Action */,\n          item: action,\n          group: action.action.isAI ? {\n            title: group.title,\n            kind: group.kind,\n            icon: Codicon.sparkle\n          } : group,\n          label: action.action.title,\n          disabled: !!action.action.disabled,\n          keybinding: keybindingResolver(action.action)\n        });\n      }\n    }\n  }\n  return allMenuItems;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './symbolIcons.css';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', foreground, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', foreground, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n  dark: '#EE9D28',\n  light: '#D67E00',\n  hcDark: '#EE9D28',\n  hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', foreground, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', foreground, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n  dark: '#B180D7',\n  light: '#652D90',\n  hcDark: '#B180D7',\n  hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n  dark: '#EE9D28',\n  light: '#D67E00',\n  hcDark: '#EE9D28',\n  hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n  dark: '#75BEFF',\n  light: '#007ACC',\n  hcDark: '#75BEFF',\n  hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n  dark: '#EE9D28',\n  light: '#D67E00',\n  hcDark: '#EE9D28',\n  hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n  dark: '#75BEFF',\n  light: '#007ACC',\n  hcDark: '#75BEFF',\n  hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', foreground, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', foreground, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n  dark: '#B180D7',\n  light: '#652D90',\n  hcDark: '#B180D7',\n  hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n  dark: '#75BEFF',\n  light: '#007ACC',\n  hcDark: '#75BEFF',\n  hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', foreground, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', foreground, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n  dark: '#B180D7',\n  light: '#652D90',\n  hcDark: '#B180D7',\n  hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', foreground, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', foreground, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', foreground, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', foreground, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', foreground, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', foreground, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', foreground, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', foreground, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', foreground, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', foreground, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', foreground, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', foreground, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', foreground, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', foreground, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', foreground, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n  dark: '#75BEFF',\n  light: '#007ACC',\n  hcDark: '#75BEFF',\n  hcLight: '#007ACC'\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar LightBulbWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { GlyphMarginLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { Range } from '../../../common/core/range.js';\nconst GUTTER_LIGHTBULB_ICON = registerIcon('gutter-lightbulb', Codicon.lightBulb, nls.localize('gutterLightbulbWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor.'));\nconst GUTTER_LIGHTBULB_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-auto-fix', Codicon.lightbulbAutofix, nls.localize('gutterLightbulbAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_ICON = registerIcon('gutter-lightbulb-sparkle', Codicon.lightbulbSparkle, nls.localize('gutterLightbulbAIFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-aifix-auto-fix', Codicon.lightbulbSparkleAutofix, nls.localize('gutterLightbulbAIFixAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nconst GUTTER_SPARKLE_FILLED_ICON = registerIcon('gutter-lightbulb-sparkle-filled', Codicon.sparkleFilled, nls.localize('gutterLightbulbSparkleFilledWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nvar LightBulbState;\n(function (LightBulbState) {\n  LightBulbState.Hidden = {\n    type: 0 /* Type.Hidden */\n  };\n  class Showing {\n    constructor(actions, trigger, editorPosition, widgetPosition) {\n      this.actions = actions;\n      this.trigger = trigger;\n      this.editorPosition = editorPosition;\n      this.widgetPosition = widgetPosition;\n      this.type = 1 /* Type.Showing */;\n    }\n  }\n  LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n  static {\n    LightBulbWidget_1 = this;\n  }\n  static {\n    this.GUTTER_DECORATION = ModelDecorationOptions.register({\n      description: 'codicon-gutter-lightbulb-decoration',\n      glyphMarginClassName: ThemeIcon.asClassName(Codicon.lightBulb),\n      glyphMargin: {\n        position: GlyphMarginLane.Left\n      },\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n    });\n  }\n  static {\n    this.ID = 'editor.contrib.lightbulbWidget';\n  }\n  static {\n    this._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\n  }\n  constructor(_editor, _keybindingService) {\n    super();\n    this._editor = _editor;\n    this._keybindingService = _keybindingService;\n    this._onClick = this._register(new Emitter());\n    this.onClick = this._onClick.event;\n    this._state = LightBulbState.Hidden;\n    this._gutterState = LightBulbState.Hidden;\n    this._iconClasses = [];\n    this.lightbulbClasses = ['codicon-' + GUTTER_LIGHTBULB_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AUTO_FIX_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AIFIX_ICON.id, 'codicon-' + GUTTER_SPARKLE_FILLED_ICON.id];\n    this.gutterDecoration = LightBulbWidget_1.GUTTER_DECORATION;\n    this._domNode = dom.$('div.lightBulbWidget');\n    this._domNode.role = 'listbox';\n    this._register(Gesture.ignoreTarget(this._domNode));\n    this._editor.addContentWidget(this);\n    this._register(this._editor.onDidChangeModelContent(_ => {\n      // cancel when the line in question has been removed\n      const editorModel = this._editor.getModel();\n      if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n        this.hide();\n      }\n      if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.gutterState.editorPosition.lineNumber >= editorModel.getLineCount()) {\n        this.gutterHide();\n      }\n    }));\n    this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n      if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n        return;\n      }\n      // Make sure that focus / cursor location is not lost when clicking widget icon\n      this._editor.focus();\n      e.preventDefault();\n      // a bit of extra work to make sure the menu\n      // doesn't cover the line-text\n      const {\n        top,\n        height\n      } = dom.getDomNodePagePosition(this._domNode);\n      const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      let pad = Math.floor(lineHeight / 3);\n      if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n        pad += lineHeight;\n      }\n      this._onClick.fire({\n        x: e.posx,\n        y: top + height + pad,\n        actions: this.state.actions,\n        trigger: this.state.trigger\n      });\n    }));\n    this._register(dom.addDisposableListener(this._domNode, 'mouseenter', e => {\n      if ((e.buttons & 1) !== 1) {\n        return;\n      }\n      // mouse enters lightbulb while the primary/left button\n      // is being pressed -> hide the lightbulb\n      this.hide();\n    }));\n    this._register(Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings, () => {\n      this._preferredKbLabel = this._keybindingService.lookupKeybinding(autoFixCommandId)?.getLabel() ?? undefined;\n      this._quickFixKbLabel = this._keybindingService.lookupKeybinding(quickFixCommandId)?.getLabel() ?? undefined;\n      this._updateLightBulbTitleAndIcon();\n    }));\n    this._register(this._editor.onMouseDown(async e => {\n      if (!e.target.element || !this.lightbulbClasses.some(cls => e.target.element && e.target.element.classList.contains(cls))) {\n        return;\n      }\n      if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n        return;\n      }\n      // Make sure that focus / cursor location is not lost when clicking widget icon\n      this._editor.focus();\n      // a bit of extra work to make sure the menu\n      // doesn't cover the line-text\n      const {\n        top,\n        height\n      } = dom.getDomNodePagePosition(e.target.element);\n      const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      let pad = Math.floor(lineHeight / 3);\n      if (this.gutterState.widgetPosition.position !== null && this.gutterState.widgetPosition.position.lineNumber < this.gutterState.editorPosition.lineNumber) {\n        pad += lineHeight;\n      }\n      this._onClick.fire({\n        x: e.event.posx,\n        y: top + height + pad,\n        actions: this.gutterState.actions,\n        trigger: this.gutterState.trigger\n      });\n    }));\n  }\n  dispose() {\n    super.dispose();\n    this._editor.removeContentWidget(this);\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n    }\n  }\n  getId() {\n    return 'LightBulbWidget';\n  }\n  getDomNode() {\n    return this._domNode;\n  }\n  getPosition() {\n    return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n  }\n  update(actions, trigger, atPosition) {\n    if (actions.validActions.length <= 0) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const hasTextFocus = this._editor.hasTextFocus();\n    if (!hasTextFocus) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const options = this._editor.getOptions();\n    if (!options.get(65 /* EditorOption.lightbulb */).enabled) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const model = this._editor.getModel();\n    if (!model) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const {\n      lineNumber,\n      column\n    } = model.validatePosition(atPosition);\n    const tabSize = model.getOptions().tabSize;\n    const fontInfo = this._editor.getOptions().get(50 /* EditorOption.fontInfo */);\n    const lineContent = model.getLineContent(lineNumber);\n    const indent = computeIndentLevel(lineContent, tabSize);\n    const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n    const isFolded = lineNumber => {\n      return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n    };\n    // Check for glyph margin decorations of any kind\n    const currLineDecorations = this._editor.getLineDecorations(lineNumber);\n    let hasDecoration = false;\n    if (currLineDecorations) {\n      for (const decoration of currLineDecorations) {\n        const glyphClass = decoration.options.glyphMarginClassName;\n        if (glyphClass && !this.lightbulbClasses.some(className => glyphClass.includes(className))) {\n          hasDecoration = true;\n          break;\n        }\n      }\n    }\n    let effectiveLineNumber = lineNumber;\n    let effectiveColumnNumber = 1;\n    if (!lineHasSpace) {\n      // Checks if line is empty or starts with any amount of whitespace\n      const isLineEmptyOrIndented = lineNumber => {\n        const lineContent = model.getLineContent(lineNumber);\n        return /^\\s*$|^\\s+/.test(lineContent) || lineContent.length <= effectiveColumnNumber;\n      };\n      if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n        const lineCount = model.getLineCount();\n        const endLine = lineNumber === lineCount;\n        const prevLineEmptyOrIndented = lineNumber > 1 && isLineEmptyOrIndented(lineNumber - 1);\n        const nextLineEmptyOrIndented = !endLine && isLineEmptyOrIndented(lineNumber + 1);\n        const currLineEmptyOrIndented = isLineEmptyOrIndented(lineNumber);\n        const notEmpty = !nextLineEmptyOrIndented && !prevLineEmptyOrIndented;\n        // check above and below. if both are blocked, display lightbulb in the gutter.\n        if (!nextLineEmptyOrIndented && !prevLineEmptyOrIndented && !hasDecoration) {\n          this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: {\n              lineNumber: effectiveLineNumber,\n              column: effectiveColumnNumber\n            },\n            preference: LightBulbWidget_1._posPref\n          });\n          this.renderGutterLightbub();\n          return this.hide();\n        } else if (prevLineEmptyOrIndented || endLine || prevLineEmptyOrIndented && !currLineEmptyOrIndented) {\n          effectiveLineNumber -= 1;\n        } else if (nextLineEmptyOrIndented || notEmpty && currLineEmptyOrIndented) {\n          effectiveLineNumber += 1;\n        }\n      } else if (lineNumber === 1 && (lineNumber === model.getLineCount() || !isLineEmptyOrIndented(lineNumber + 1) && !isLineEmptyOrIndented(lineNumber))) {\n        // special checks for first line blocked vs. not blocked.\n        this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n          position: {\n            lineNumber: effectiveLineNumber,\n            column: effectiveColumnNumber\n          },\n          preference: LightBulbWidget_1._posPref\n        });\n        if (hasDecoration) {\n          this.gutterHide();\n        } else {\n          this.renderGutterLightbub();\n          return this.hide();\n        }\n      } else if (lineNumber < model.getLineCount() && !isFolded(lineNumber + 1)) {\n        effectiveLineNumber += 1;\n      } else if (column * fontInfo.spaceWidth < 22) {\n        // cannot show lightbulb above/below and showing\n        // it inline would overlay the cursor...\n        return this.hide();\n      }\n      effectiveColumnNumber = /^\\S\\s*$/.test(model.getLineContent(effectiveLineNumber)) ? 2 : 1;\n    }\n    this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n      position: {\n        lineNumber: effectiveLineNumber,\n        column: effectiveColumnNumber\n      },\n      preference: LightBulbWidget_1._posPref\n    });\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n      this.gutterHide();\n    }\n    const validActions = actions.validActions;\n    const actionKind = actions.validActions[0].action.kind;\n    if (validActions.length !== 1 || !actionKind) {\n      this._editor.layoutContentWidget(this);\n      return;\n    }\n    this._editor.layoutContentWidget(this);\n  }\n  hide() {\n    if (this.state === LightBulbState.Hidden) {\n      return;\n    }\n    this.state = LightBulbState.Hidden;\n    this._editor.layoutContentWidget(this);\n  }\n  gutterHide() {\n    if (this.gutterState === LightBulbState.Hidden) {\n      return;\n    }\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n    }\n    this.gutterState = LightBulbState.Hidden;\n  }\n  get state() {\n    return this._state;\n  }\n  set state(value) {\n    this._state = value;\n    this._updateLightBulbTitleAndIcon();\n  }\n  get gutterState() {\n    return this._gutterState;\n  }\n  set gutterState(value) {\n    this._gutterState = value;\n    this._updateGutterLightBulbTitleAndIcon();\n  }\n  _updateLightBulbTitleAndIcon() {\n    this._domNode.classList.remove(...this._iconClasses);\n    this._iconClasses = [];\n    if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    let icon;\n    let autoRun = false;\n    if (this.state.actions.allAIFixes) {\n      icon = Codicon.sparkleFilled;\n      if (this.state.actions.validActions.length === 1) {\n        autoRun = true;\n      }\n    } else if (this.state.actions.hasAutoFix) {\n      if (this.state.actions.hasAIFix) {\n        icon = Codicon.lightbulbSparkleAutofix;\n      } else {\n        icon = Codicon.lightbulbAutofix;\n      }\n    } else if (this.state.actions.hasAIFix) {\n      icon = Codicon.lightbulbSparkle;\n    } else {\n      icon = Codicon.lightBulb;\n    }\n    this._updateLightbulbTitle(this.state.actions.hasAutoFix, autoRun);\n    this._iconClasses = ThemeIcon.asClassNameArray(icon);\n    this._domNode.classList.add(...this._iconClasses);\n  }\n  _updateGutterLightBulbTitleAndIcon() {\n    if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    let icon;\n    let autoRun = false;\n    if (this.gutterState.actions.allAIFixes) {\n      icon = GUTTER_SPARKLE_FILLED_ICON;\n      if (this.gutterState.actions.validActions.length === 1) {\n        autoRun = true;\n      }\n    } else if (this.gutterState.actions.hasAutoFix) {\n      if (this.gutterState.actions.hasAIFix) {\n        icon = GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON;\n      } else {\n        icon = GUTTER_LIGHTBULB_AUTO_FIX_ICON;\n      }\n    } else if (this.gutterState.actions.hasAIFix) {\n      icon = GUTTER_LIGHTBULB_AIFIX_ICON;\n    } else {\n      icon = GUTTER_LIGHTBULB_ICON;\n    }\n    this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix, autoRun);\n    const GUTTER_DECORATION = ModelDecorationOptions.register({\n      description: 'codicon-gutter-lightbulb-decoration',\n      glyphMarginClassName: ThemeIcon.asClassName(icon),\n      glyphMargin: {\n        position: GlyphMarginLane.Left\n      },\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n    });\n    this.gutterDecoration = GUTTER_DECORATION;\n  }\n  /* Gutter Helper Functions */\n  renderGutterLightbub() {\n    const selection = this._editor.getSelection();\n    if (!selection) {\n      return;\n    }\n    if (this._gutterDecorationID === undefined) {\n      this._addGutterDecoration(selection.startLineNumber);\n    } else {\n      this._updateGutterDecoration(this._gutterDecorationID, selection.startLineNumber);\n    }\n  }\n  _addGutterDecoration(lineNumber) {\n    this._editor.changeDecorations(accessor => {\n      this._gutterDecorationID = accessor.addDecoration(new Range(lineNumber, 0, lineNumber, 0), this.gutterDecoration);\n    });\n  }\n  _removeGutterDecoration(decorationId) {\n    this._editor.changeDecorations(accessor => {\n      accessor.removeDecoration(decorationId);\n      this._gutterDecorationID = undefined;\n    });\n  }\n  _updateGutterDecoration(decorationId, lineNumber) {\n    this._editor.changeDecorations(accessor => {\n      accessor.changeDecoration(decorationId, new Range(lineNumber, 0, lineNumber, 0));\n      accessor.changeDecorationOptions(decorationId, this.gutterDecoration);\n    });\n  }\n  _updateLightbulbTitle(autoFix, autoRun) {\n    if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    if (autoRun) {\n      this.title = nls.localize('codeActionAutoRun', \"Run: {0}\", this.state.actions.validActions[0].action.title);\n    } else if (autoFix && this._preferredKbLabel) {\n      this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n    } else if (!autoFix && this._quickFixKbLabel) {\n      this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n    } else if (!autoFix) {\n      this.title = nls.localize('codeAction', \"Show Code Actions\");\n    }\n  }\n  set title(value) {\n    this._domNode.title = value;\n  }\n};\nLightBulbWidget = LightBulbWidget_1 = __decorate([__param(1, IKeybindingService)], LightBulbWidget);\nexport { LightBulbWidget };","var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport './actionWidget.css';\nimport { localize, localize2 } from '../../../nls.js';\nimport { acceptSelectedActionCommand, ActionList, previewSelectedActionCommand } from './actionList.js';\nimport { Action2, registerAction2 } from '../../actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { inputActiveOptionBackground, registerColor } from '../../theme/common/colorRegistry.js';\nregisterColor('actionBar.toggledBackground', inputActiveOptionBackground, localize('actionBar.toggledBackground', 'Background color for toggled action items in action bar.'));\nconst ActionWidgetContextKeys = {\n  Visible: new RawContextKey('codeActionMenuVisible', false, localize('codeActionMenuVisible', \"Whether the action widget list is visible\"))\n};\nexport const IActionWidgetService = createDecorator('actionWidgetService');\nlet ActionWidgetService = class ActionWidgetService extends Disposable {\n  get isVisible() {\n    return ActionWidgetContextKeys.Visible.getValue(this._contextKeyService) || false;\n  }\n  constructor(_contextViewService, _contextKeyService, _instantiationService) {\n    super();\n    this._contextViewService = _contextViewService;\n    this._contextKeyService = _contextKeyService;\n    this._instantiationService = _instantiationService;\n    this._list = this._register(new MutableDisposable());\n  }\n  show(user, supportsPreview, items, delegate, anchor, container, actionBarActions) {\n    const visibleContext = ActionWidgetContextKeys.Visible.bindTo(this._contextKeyService);\n    const list = this._instantiationService.createInstance(ActionList, user, supportsPreview, items, delegate);\n    this._contextViewService.showContextView({\n      getAnchor: () => anchor,\n      render: container => {\n        visibleContext.set(true);\n        return this._renderWidget(container, list, actionBarActions ?? []);\n      },\n      onHide: didCancel => {\n        visibleContext.reset();\n        this._onWidgetClosed(didCancel);\n      }\n    }, container, false);\n  }\n  acceptSelected(preview) {\n    this._list.value?.acceptSelected(preview);\n  }\n  focusPrevious() {\n    this._list?.value?.focusPrevious();\n  }\n  focusNext() {\n    this._list?.value?.focusNext();\n  }\n  hide(didCancel) {\n    this._list.value?.hide(didCancel);\n    this._list.clear();\n  }\n  _renderWidget(element, list, actionBarActions) {\n    const widget = document.createElement('div');\n    widget.classList.add('action-widget');\n    element.appendChild(widget);\n    this._list.value = list;\n    if (this._list.value) {\n      widget.appendChild(this._list.value.domNode);\n    } else {\n      throw new Error('List has no value');\n    }\n    const renderDisposables = new DisposableStore();\n    // Invisible div to block mouse interaction in the rest of the UI\n    const menuBlock = document.createElement('div');\n    const block = element.appendChild(menuBlock);\n    block.classList.add('context-view-block');\n    renderDisposables.add(dom.addDisposableListener(block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n    // Invisible div to block mouse interaction with the menu\n    const pointerBlockDiv = document.createElement('div');\n    const pointerBlock = element.appendChild(pointerBlockDiv);\n    pointerBlock.classList.add('context-view-pointerBlock');\n    // Removes block on click INSIDE widget or ANY mouse movement\n    renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.POINTER_MOVE, () => pointerBlock.remove()));\n    renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.MOUSE_DOWN, () => pointerBlock.remove()));\n    // Action bar\n    let actionBarWidth = 0;\n    if (actionBarActions.length) {\n      const actionBar = this._createActionBar('.action-widget-action-bar', actionBarActions);\n      if (actionBar) {\n        widget.appendChild(actionBar.getContainer().parentElement);\n        renderDisposables.add(actionBar);\n        actionBarWidth = actionBar.getContainer().offsetWidth;\n      }\n    }\n    const width = this._list.value?.layout(actionBarWidth);\n    widget.style.width = `${width}px`;\n    const focusTracker = renderDisposables.add(dom.trackFocus(element));\n    renderDisposables.add(focusTracker.onDidBlur(() => this.hide(true)));\n    return renderDisposables;\n  }\n  _createActionBar(className, actions) {\n    if (!actions.length) {\n      return undefined;\n    }\n    const container = dom.$(className);\n    const actionBar = new ActionBar(container);\n    actionBar.push(actions, {\n      icon: false,\n      label: true\n    });\n    return actionBar;\n  }\n  _onWidgetClosed(didCancel) {\n    this._list.value?.hide(didCancel);\n  }\n};\nActionWidgetService = __decorate([__param(0, IContextViewService), __param(1, IContextKeyService), __param(2, IInstantiationService)], ActionWidgetService);\nregisterSingleton(IActionWidgetService, ActionWidgetService, 1 /* InstantiationType.Delayed */);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 1000;\nregisterAction2(class extends Action2 {\n  constructor() {\n    super({\n      id: 'hideCodeActionWidget',\n      title: localize2('hideCodeActionWidget.title', \"Hide action widget\"),\n      precondition: ActionWidgetContextKeys.Visible,\n      keybinding: {\n        weight,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n      }\n    });\n  }\n  run(accessor) {\n    accessor.get(IActionWidgetService).hide(true);\n  }\n});\nregisterAction2(class extends Action2 {\n  constructor() {\n    super({\n      id: 'selectPrevCodeAction',\n      title: localize2('selectPrevCodeAction.title', \"Select previous action\"),\n      precondition: ActionWidgetContextKeys.Visible,\n      keybinding: {\n        weight,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: {\n          primary: 16 /* KeyCode.UpArrow */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */]\n        }\n      }\n    });\n  }\n  run(accessor) {\n    const widgetService = accessor.get(IActionWidgetService);\n    if (widgetService instanceof ActionWidgetService) {\n      widgetService.focusPrevious();\n    }\n  }\n});\nregisterAction2(class extends Action2 {\n  constructor() {\n    super({\n      id: 'selectNextCodeAction',\n      title: localize2('selectNextCodeAction.title', \"Select next action\"),\n      precondition: ActionWidgetContextKeys.Visible,\n      keybinding: {\n        weight,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: {\n          primary: 18 /* KeyCode.DownArrow */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */]\n        }\n      }\n    });\n  }\n  run(accessor) {\n    const widgetService = accessor.get(IActionWidgetService);\n    if (widgetService instanceof ActionWidgetService) {\n      widgetService.focusNext();\n    }\n  }\n});\nregisterAction2(class extends Action2 {\n  constructor() {\n    super({\n      id: acceptSelectedActionCommand,\n      title: localize2('acceptSelected.title', \"Accept selected action\"),\n      precondition: ActionWidgetContextKeys.Visible,\n      keybinding: {\n        weight,\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */]\n      }\n    });\n  }\n  run(accessor) {\n    const widgetService = accessor.get(IActionWidgetService);\n    if (widgetService instanceof ActionWidgetService) {\n      widgetService.acceptSelected();\n    }\n  }\n});\nregisterAction2(class extends Action2 {\n  constructor() {\n    super({\n      id: previewSelectedActionCommand,\n      title: localize2('previewSelected.title', \"Preview selected action\"),\n      precondition: ActionWidgetContextKeys.Visible,\n      keybinding: {\n        weight,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */\n      }\n    });\n  }\n  run(accessor) {\n    const widgetService = accessor.get(IActionWidgetService);\n    if (widgetService instanceof ActionWidgetService) {\n      widgetService.acceptSelected(true);\n    }\n  }\n});","var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { OS } from '../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './actionWidget.css';\nimport { localize } from '../../../nls.js';\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { defaultListStyles } from '../../theme/browser/defaultStyles.js';\nimport { asCssVariable } from '../../theme/common/colorRegistry.js';\nexport const acceptSelectedActionCommand = 'acceptSelectedCodeAction';\nexport const previewSelectedActionCommand = 'previewSelectedCodeAction';\nclass HeaderRenderer {\n  get templateId() {\n    return \"header\" /* ActionListItemKind.Header */;\n  }\n  renderTemplate(container) {\n    container.classList.add('group-header');\n    const text = document.createElement('span');\n    container.append(text);\n    return {\n      container,\n      text\n    };\n  }\n  renderElement(element, _index, templateData) {\n    templateData.text.textContent = element.group?.title ?? '';\n  }\n  disposeTemplate(_templateData) {\n    // noop\n  }\n}\nlet ActionItemRenderer = class ActionItemRenderer {\n  get templateId() {\n    return \"action\" /* ActionListItemKind.Action */;\n  }\n  constructor(_supportsPreview, _keybindingService) {\n    this._supportsPreview = _supportsPreview;\n    this._keybindingService = _keybindingService;\n  }\n  renderTemplate(container) {\n    container.classList.add(this.templateId);\n    const icon = document.createElement('div');\n    icon.className = 'icon';\n    container.append(icon);\n    const text = document.createElement('span');\n    text.className = 'title';\n    container.append(text);\n    const keybinding = new KeybindingLabel(container, OS);\n    return {\n      container,\n      icon,\n      text,\n      keybinding\n    };\n  }\n  renderElement(element, _index, data) {\n    if (element.group?.icon) {\n      data.icon.className = ThemeIcon.asClassName(element.group.icon);\n      if (element.group.icon.color) {\n        data.icon.style.color = asCssVariable(element.group.icon.color.id);\n      }\n    } else {\n      data.icon.className = ThemeIcon.asClassName(Codicon.lightBulb);\n      data.icon.style.color = 'var(--vscode-editorLightBulb-foreground)';\n    }\n    if (!element.item || !element.label) {\n      return;\n    }\n    data.text.textContent = stripNewlines(element.label);\n    data.keybinding.set(element.keybinding);\n    dom.setVisibility(!!element.keybinding, data.keybinding.element);\n    const actionTitle = this._keybindingService.lookupKeybinding(acceptSelectedActionCommand)?.getLabel();\n    const previewTitle = this._keybindingService.lookupKeybinding(previewSelectedActionCommand)?.getLabel();\n    data.container.classList.toggle('option-disabled', element.disabled);\n    if (element.disabled) {\n      data.container.title = element.label;\n    } else if (actionTitle && previewTitle) {\n      if (this._supportsPreview && element.canPreview) {\n        data.container.title = localize({\n          key: 'label-preview',\n          comment: ['placeholders are keybindings, e.g \"F2 to Apply, Shift+F2 to Preview\"']\n        }, \"{0} to Apply, {1} to Preview\", actionTitle, previewTitle);\n      } else {\n        data.container.title = localize({\n          key: 'label',\n          comment: ['placeholder is a keybinding, e.g \"F2 to Apply\"']\n        }, \"{0} to Apply\", actionTitle);\n      }\n    } else {\n      data.container.title = '';\n    }\n  }\n  disposeTemplate(_templateData) {\n    _templateData.keybinding.dispose();\n  }\n};\nActionItemRenderer = __decorate([__param(1, IKeybindingService)], ActionItemRenderer);\nclass AcceptSelectedEvent extends UIEvent {\n  constructor() {\n    super('acceptSelectedAction');\n  }\n}\nclass PreviewSelectedEvent extends UIEvent {\n  constructor() {\n    super('previewSelectedAction');\n  }\n}\nfunction getKeyboardNavigationLabel(item) {\n  // Filter out header vs. action\n  if (item.kind === 'action') {\n    return item.label;\n  }\n  return undefined;\n}\nlet ActionList = class ActionList extends Disposable {\n  constructor(user, preview, items, _delegate, _contextViewService, _keybindingService) {\n    super();\n    this._delegate = _delegate;\n    this._contextViewService = _contextViewService;\n    this._keybindingService = _keybindingService;\n    this._actionLineHeight = 24;\n    this._headerLineHeight = 26;\n    this.cts = this._register(new CancellationTokenSource());\n    this.domNode = document.createElement('div');\n    this.domNode.classList.add('actionList');\n    const virtualDelegate = {\n      getHeight: element => element.kind === \"header\" /* ActionListItemKind.Header */ ? this._headerLineHeight : this._actionLineHeight,\n      getTemplateId: element => element.kind\n    };\n    this._list = this._register(new List(user, this.domNode, virtualDelegate, [new ActionItemRenderer(preview, this._keybindingService), new HeaderRenderer()], {\n      keyboardSupport: false,\n      typeNavigationEnabled: true,\n      keyboardNavigationLabelProvider: {\n        getKeyboardNavigationLabel\n      },\n      accessibilityProvider: {\n        getAriaLabel: element => {\n          if (element.kind === \"action\" /* ActionListItemKind.Action */) {\n            let label = element.label ? stripNewlines(element?.label) : '';\n            if (element.disabled) {\n              label = localize({\n                key: 'customQuickFixWidget.labels',\n                comment: [`Action widget labels for accessibility.`]\n              }, \"{0}, Disabled Reason: {1}\", label, element.disabled);\n            }\n            return label;\n          }\n          return null;\n        },\n        getWidgetAriaLabel: () => localize({\n          key: 'customQuickFixWidget',\n          comment: [`An action widget option`]\n        }, \"Action Widget\"),\n        getRole: e => e.kind === \"action\" /* ActionListItemKind.Action */ ? 'option' : 'separator',\n        getWidgetRole: () => 'listbox'\n      }\n    }));\n    this._list.style(defaultListStyles);\n    this._register(this._list.onMouseClick(e => this.onListClick(e)));\n    this._register(this._list.onMouseOver(e => this.onListHover(e)));\n    this._register(this._list.onDidChangeFocus(() => this.onFocus()));\n    this._register(this._list.onDidChangeSelection(e => this.onListSelection(e)));\n    this._allMenuItems = items;\n    this._list.splice(0, this._list.length, this._allMenuItems);\n    if (this._list.length) {\n      this.focusNext();\n    }\n  }\n  focusCondition(element) {\n    return !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */;\n  }\n  hide(didCancel) {\n    this._delegate.onHide(didCancel);\n    this.cts.cancel();\n    this._contextViewService.hideContextView();\n  }\n  layout(minWidth) {\n    // Updating list height, depending on how many separators and headers there are.\n    const numHeaders = this._allMenuItems.filter(item => item.kind === 'header').length;\n    const itemsHeight = this._allMenuItems.length * this._actionLineHeight;\n    const heightWithHeaders = itemsHeight + numHeaders * this._headerLineHeight - numHeaders * this._actionLineHeight;\n    this._list.layout(heightWithHeaders);\n    let maxWidth = minWidth;\n    if (this._allMenuItems.length >= 50) {\n      maxWidth = 380;\n    } else {\n      // For finding width dynamically (not using resize observer)\n      const itemWidths = this._allMenuItems.map((_, index) => {\n        const element = this.domNode.ownerDocument.getElementById(this._list.getElementID(index));\n        if (element) {\n          element.style.width = 'auto';\n          const width = element.getBoundingClientRect().width;\n          element.style.width = '';\n          return width;\n        }\n        return 0;\n      });\n      // resize observer - can be used in the future since list widget supports dynamic height but not width\n      maxWidth = Math.max(...itemWidths, minWidth);\n    }\n    const maxVhPrecentage = 0.7;\n    const height = Math.min(heightWithHeaders, this.domNode.ownerDocument.body.clientHeight * maxVhPrecentage);\n    this._list.layout(height, maxWidth);\n    this.domNode.style.height = `${height}px`;\n    this._list.domFocus();\n    return maxWidth;\n  }\n  focusPrevious() {\n    this._list.focusPrevious(1, true, undefined, this.focusCondition);\n  }\n  focusNext() {\n    this._list.focusNext(1, true, undefined, this.focusCondition);\n  }\n  acceptSelected(preview) {\n    const focused = this._list.getFocus();\n    if (focused.length === 0) {\n      return;\n    }\n    const focusIndex = focused[0];\n    const element = this._list.element(focusIndex);\n    if (!this.focusCondition(element)) {\n      return;\n    }\n    const event = preview ? new PreviewSelectedEvent() : new AcceptSelectedEvent();\n    this._list.setSelection([focusIndex], event);\n  }\n  onListSelection(e) {\n    if (!e.elements.length) {\n      return;\n    }\n    const element = e.elements[0];\n    if (element.item && this.focusCondition(element)) {\n      this._delegate.onSelect(element.item, e.browserEvent instanceof PreviewSelectedEvent);\n    } else {\n      this._list.setSelection([]);\n    }\n  }\n  onFocus() {\n    const focused = this._list.getFocus();\n    if (focused.length === 0) {\n      return;\n    }\n    const focusIndex = focused[0];\n    const element = this._list.element(focusIndex);\n    this._delegate.onFocus?.(element.item);\n  }\n  async onListHover(e) {\n    const element = e.element;\n    if (element && element.item && this.focusCondition(element)) {\n      if (this._delegate.onHover && !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */) {\n        const result = await this._delegate.onHover(element.item, this.cts.token);\n        element.canPreview = result ? result.canPreview : undefined;\n      }\n      if (e.index) {\n        this._list.splice(e.index, 1, [element]);\n      }\n    }\n    this._list.setFocus(typeof e.index === 'number' ? [e.index] : []);\n  }\n  onListClick(e) {\n    if (e.element && this.focusCondition(e.element)) {\n      this._list.setFocus([]);\n    }\n  }\n};\nActionList = __decorate([__param(4, IContextViewService), __param(5, IKeybindingService)], ActionList);\nexport { ActionList };\nfunction stripNewlines(str) {\n  return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { ShowLightbulbIconMode } from '../../../common/config/editorOptions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { getCodeActions } from './codeAction.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nexport const APPLY_FIX_ALL_COMMAND_ID = '_typescript.applyFixAllCodeAction';\nclass CodeActionOracle extends Disposable {\n  constructor(_editor, _markerService, _signalChange, _delay = 250) {\n    super();\n    this._editor = _editor;\n    this._markerService = _markerService;\n    this._signalChange = _signalChange;\n    this._delay = _delay;\n    this._autoTriggerTimer = this._register(new TimeoutTimer());\n    this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n    this._register(this._editor.onDidChangeCursorPosition(() => this._tryAutoTrigger()));\n  }\n  trigger(trigger) {\n    const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n    this._signalChange(selection ? {\n      trigger,\n      selection\n    } : undefined);\n  }\n  _onMarkerChanges(resources) {\n    const model = this._editor.getModel();\n    if (model && resources.some(resource => isEqual(resource, model.uri))) {\n      this._tryAutoTrigger();\n    }\n  }\n  _tryAutoTrigger() {\n    this._autoTriggerTimer.cancelAndSet(() => {\n      this.trigger({\n        type: 2 /* CodeActionTriggerType.Auto */,\n        triggerAction: CodeActionTriggerSource.Default\n      });\n    }, this._delay);\n  }\n  _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n    if (!this._editor.hasModel()) {\n      return undefined;\n    }\n    const selection = this._editor.getSelection();\n    if (trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n      return selection;\n    }\n    const enabled = this._editor.getOption(65 /* EditorOption.lightbulb */).enabled;\n    if (enabled === ShowLightbulbIconMode.Off) {\n      return undefined;\n    } else if (enabled === ShowLightbulbIconMode.On) {\n      return selection;\n    } else if (enabled === ShowLightbulbIconMode.OnCode) {\n      const isSelectionEmpty = selection.isEmpty();\n      if (!isSelectionEmpty) {\n        return selection;\n      }\n      const model = this._editor.getModel();\n      const {\n        lineNumber,\n        column\n      } = selection.getPosition();\n      const line = model.getLineContent(lineNumber);\n      if (line.length === 0) {\n        // empty line\n        return undefined;\n      } else if (column === 1) {\n        // look only right\n        if (/\\s/.test(line[0])) {\n          return undefined;\n        }\n      } else if (column === model.getLineMaxColumn(lineNumber)) {\n        // look only left\n        if (/\\s/.test(line[line.length - 1])) {\n          return undefined;\n        }\n      } else {\n        // look left and right\n        if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n          return undefined;\n        }\n      }\n    }\n    return selection;\n  }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n  CodeActionsState.Empty = {\n    type: 0 /* Type.Empty */\n  };\n  class Triggered {\n    constructor(trigger, position, _cancellablePromise) {\n      this.trigger = trigger;\n      this.position = position;\n      this._cancellablePromise = _cancellablePromise;\n      this.type = 1 /* Type.Triggered */;\n      this.actions = _cancellablePromise.catch(e => {\n        if (isCancellationError(e)) {\n          return emptyCodeActionSet;\n        }\n        throw e;\n      });\n    }\n    cancel() {\n      this._cancellablePromise.cancel();\n    }\n  }\n  CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = Object.freeze({\n  allActions: [],\n  validActions: [],\n  dispose: () => {},\n  documentation: [],\n  hasAutoFix: false,\n  hasAIFix: false,\n  allAIFixes: false\n});\nexport class CodeActionModel extends Disposable {\n  constructor(_editor, _registry, _markerService, contextKeyService, _progressService, _configurationService, _telemetryService) {\n    super();\n    this._editor = _editor;\n    this._registry = _registry;\n    this._markerService = _markerService;\n    this._progressService = _progressService;\n    this._configurationService = _configurationService;\n    this._telemetryService = _telemetryService;\n    this._codeActionOracle = this._register(new MutableDisposable());\n    this._state = CodeActionsState.Empty;\n    this._onDidChangeState = this._register(new Emitter());\n    this.onDidChangeState = this._onDidChangeState.event;\n    this._disposed = false;\n    this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n    this._register(this._editor.onDidChangeModel(() => this._update()));\n    this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n    this._register(this._registry.onDidChange(() => this._update()));\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(65 /* EditorOption.lightbulb */)) {\n        this._update();\n      }\n    }));\n    this._update();\n  }\n  dispose() {\n    if (this._disposed) {\n      return;\n    }\n    this._disposed = true;\n    super.dispose();\n    this.setState(CodeActionsState.Empty, true);\n  }\n  _settingEnabledNearbyQuickfixes() {\n    const model = this._editor?.getModel();\n    return this._configurationService ? this._configurationService.getValue('editor.codeActionWidget.includeNearbyQuickFixes', {\n      resource: model?.uri\n    }) : false;\n  }\n  _update() {\n    if (this._disposed) {\n      return;\n    }\n    this._codeActionOracle.value = undefined;\n    this.setState(CodeActionsState.Empty);\n    const model = this._editor.getModel();\n    if (model && this._registry.has(model) && !this._editor.getOption(92 /* EditorOption.readOnly */)) {\n      const supportedActions = this._registry.all(model).flatMap(provider => provider.providedCodeActionKinds ?? []);\n      this._supportedCodeActions.set(supportedActions.join(' '));\n      this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n        if (!trigger) {\n          this.setState(CodeActionsState.Empty);\n          return;\n        }\n        const startPosition = trigger.selection.getStartPosition();\n        const actions = createCancelablePromise(async token => {\n          if (this._settingEnabledNearbyQuickfixes() && trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && (trigger.trigger.triggerAction === CodeActionTriggerSource.QuickFix || trigger.trigger.filter?.include?.contains(CodeActionKind.QuickFix))) {\n            const codeActionSet = await getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n            const allCodeActions = [...codeActionSet.allActions];\n            if (token.isCancellationRequested) {\n              return emptyCodeActionSet;\n            }\n            // Search for quickfixes in the curret code action set.\n            const foundQuickfix = codeActionSet.validActions?.some(action => action.action.kind ? CodeActionKind.QuickFix.contains(new HierarchicalKind(action.action.kind)) : false);\n            const allMarkers = this._markerService.read({\n              resource: model.uri\n            });\n            if (foundQuickfix) {\n              for (const action of codeActionSet.validActions) {\n                if (action.action.command?.arguments?.some(arg => typeof arg === 'string' && arg.includes(APPLY_FIX_ALL_COMMAND_ID))) {\n                  action.action.diagnostics = [...allMarkers.filter(marker => marker.relatedInformation)];\n                }\n              }\n              return {\n                validActions: codeActionSet.validActions,\n                allActions: allCodeActions,\n                documentation: codeActionSet.documentation,\n                hasAutoFix: codeActionSet.hasAutoFix,\n                hasAIFix: codeActionSet.hasAIFix,\n                allAIFixes: codeActionSet.allAIFixes,\n                dispose: () => {\n                  codeActionSet.dispose();\n                }\n              };\n            } else if (!foundQuickfix) {\n              // If markers exists, and there are no quickfixes found or length is zero, check for quickfixes on that line.\n              if (allMarkers.length > 0) {\n                const currPosition = trigger.selection.getPosition();\n                let trackedPosition = currPosition;\n                let distance = Number.MAX_VALUE;\n                const currentActions = [...codeActionSet.validActions];\n                for (const marker of allMarkers) {\n                  const col = marker.endColumn;\n                  const row = marker.endLineNumber;\n                  const startRow = marker.startLineNumber;\n                  // Found quickfix on the same line and check relative distance to other markers\n                  if (row === currPosition.lineNumber || startRow === currPosition.lineNumber) {\n                    trackedPosition = new Position(row, col);\n                    const newCodeActionTrigger = {\n                      type: trigger.trigger.type,\n                      triggerAction: trigger.trigger.triggerAction,\n                      filter: {\n                        include: trigger.trigger.filter?.include ? trigger.trigger.filter?.include : CodeActionKind.QuickFix\n                      },\n                      autoApply: trigger.trigger.autoApply,\n                      context: {\n                        notAvailableMessage: trigger.trigger.context?.notAvailableMessage || '',\n                        position: trackedPosition\n                      }\n                    };\n                    const selectionAsPosition = new Selection(trackedPosition.lineNumber, trackedPosition.column, trackedPosition.lineNumber, trackedPosition.column);\n                    const actionsAtMarker = await getCodeActions(this._registry, model, selectionAsPosition, newCodeActionTrigger, Progress.None, token);\n                    if (actionsAtMarker.validActions.length !== 0) {\n                      for (const action of actionsAtMarker.validActions) {\n                        if (action.action.command?.arguments?.some(arg => typeof arg === 'string' && arg.includes(APPLY_FIX_ALL_COMMAND_ID))) {\n                          action.action.diagnostics = [...allMarkers.filter(marker => marker.relatedInformation)];\n                        }\n                      }\n                      if (codeActionSet.allActions.length === 0) {\n                        allCodeActions.push(...actionsAtMarker.allActions);\n                      }\n                      // Already filtered through to only get quickfixes, so no need to filter again.\n                      if (Math.abs(currPosition.column - col) < distance) {\n                        currentActions.unshift(...actionsAtMarker.validActions);\n                      } else {\n                        currentActions.push(...actionsAtMarker.validActions);\n                      }\n                    }\n                    distance = Math.abs(currPosition.column - col);\n                  }\n                }\n                const filteredActions = currentActions.filter((action, index, self) => self.findIndex(a => a.action.title === action.action.title) === index);\n                filteredActions.sort((a, b) => {\n                  if (a.action.isPreferred && !b.action.isPreferred) {\n                    return -1;\n                  } else if (!a.action.isPreferred && b.action.isPreferred) {\n                    return 1;\n                  } else if (a.action.isAI && !b.action.isAI) {\n                    return 1;\n                  } else if (!a.action.isAI && b.action.isAI) {\n                    return -1;\n                  } else {\n                    return 0;\n                  }\n                });\n                // Only retriggers if actually found quickfix on the same line as cursor\n                return {\n                  validActions: filteredActions,\n                  allActions: allCodeActions,\n                  documentation: codeActionSet.documentation,\n                  hasAutoFix: codeActionSet.hasAutoFix,\n                  hasAIFix: codeActionSet.hasAIFix,\n                  allAIFixes: codeActionSet.allAIFixes,\n                  dispose: () => {\n                    codeActionSet.dispose();\n                  }\n                };\n              }\n            }\n          }\n          // Case for manual triggers - specifically Source Actions and Refactors\n          if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n            const sw = new StopWatch();\n            const codeActions = await getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n            // Telemetry for duration of each code action on save.\n            if (this._telemetryService) {\n              this._telemetryService.publicLog2('codeAction.invokedDurations', {\n                codeActions: codeActions.validActions.length,\n                duration: sw.elapsed()\n              });\n            }\n            return codeActions;\n          }\n          return getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n        });\n        if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n          this._progressService?.showWhile(actions, 250);\n        }\n        const newState = new CodeActionsState.Triggered(trigger.trigger, startPosition, actions);\n        let isManualToAutoTransition = false;\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n          // Check if the current state is manual and the new state is automatic\n          isManualToAutoTransition = this._state.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && newState.type === 1 /* CodeActionsState.Type.Triggered */ && newState.trigger.type === 2 /* CodeActionTriggerType.Auto */ && this._state.position !== newState.position;\n        }\n        // Do not trigger state if current state is manual and incoming state is automatic\n        if (!isManualToAutoTransition) {\n          this.setState(newState);\n        } else {\n          // Reset the new state after getting code actions back.\n          setTimeout(() => {\n            this.setState(newState);\n          }, 500);\n        }\n      }, undefined);\n      this._codeActionOracle.value.trigger({\n        type: 2 /* CodeActionTriggerType.Auto */,\n        triggerAction: CodeActionTriggerSource.Default\n      });\n    } else {\n      this._supportedCodeActions.reset();\n    }\n  }\n  trigger(trigger) {\n    this._codeActionOracle.value?.trigger(trigger);\n  }\n  setState(newState, skipNotify) {\n    if (newState === this._state) {\n      return;\n    }\n    // Cancel old request\n    if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n      this._state.cancel();\n    }\n    this._state = newState;\n    if (!skipNotify && !this._disposed) {\n      this._onDidChangeState.fire(newState);\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n  static {\n    this.ID = 'css.editor.codeLens';\n  }\n  constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n    this._editor = _editor;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._commandService = _commandService;\n    this._notificationService = _notificationService;\n    this._codeLensCache = _codeLensCache;\n    this._disposables = new DisposableStore();\n    this._localToDispose = new DisposableStore();\n    this._lenses = [];\n    this._oldCodeLensModels = new DisposableStore();\n    this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', {\n      min: 250\n    });\n    this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', {\n      min: 250,\n      salt: 'resolve'\n    });\n    this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n    this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n    this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n    this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(19 /* EditorOption.codeLensFontSize */) || e.hasChanged(18 /* EditorOption.codeLensFontFamily */)) {\n        this._updateLensStyle();\n      }\n      if (e.hasChanged(17 /* EditorOption.codeLens */)) {\n        this._onModelChange();\n      }\n    }));\n    this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n    this._onModelChange();\n    this._updateLensStyle();\n  }\n  dispose() {\n    this._localDispose();\n    this._disposables.dispose();\n    this._oldCodeLensModels.dispose();\n    this._currentCodeLensModel?.dispose();\n  }\n  _getLayoutInfo() {\n    const lineHeightFactor = Math.max(1.3, this._editor.getOption(67 /* EditorOption.lineHeight */) / this._editor.getOption(52 /* EditorOption.fontSize */));\n    let fontSize = this._editor.getOption(19 /* EditorOption.codeLensFontSize */);\n    if (!fontSize || fontSize < 5) {\n      fontSize = this._editor.getOption(52 /* EditorOption.fontSize */) * .9 | 0;\n    }\n    return {\n      fontSize,\n      codeLensHeight: fontSize * lineHeightFactor | 0\n    };\n  }\n  _updateLensStyle() {\n    const {\n      codeLensHeight,\n      fontSize\n    } = this._getLayoutInfo();\n    const fontFamily = this._editor.getOption(18 /* EditorOption.codeLensFontFamily */);\n    const editorFontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    const {\n      style\n    } = this._editor.getContainerDomNode();\n    style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n    style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n    style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n    if (fontFamily) {\n      style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n      style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n    }\n    //\n    this._editor.changeViewZones(accessor => {\n      for (const lens of this._lenses) {\n        lens.updateHeight(codeLensHeight, accessor);\n      }\n    });\n  }\n  _localDispose() {\n    this._getCodeLensModelPromise?.cancel();\n    this._getCodeLensModelPromise = undefined;\n    this._resolveCodeLensesPromise?.cancel();\n    this._resolveCodeLensesPromise = undefined;\n    this._localToDispose.clear();\n    this._oldCodeLensModels.clear();\n    this._currentCodeLensModel?.dispose();\n  }\n  _onModelChange() {\n    this._localDispose();\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    if (!this._editor.getOption(17 /* EditorOption.codeLens */) || model.isTooLargeForTokenization()) {\n      return;\n    }\n    const cachedLenses = this._codeLensCache.get(model);\n    if (cachedLenses) {\n      this._renderCodeLensSymbols(cachedLenses);\n    }\n    if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n      // no provider -> return but check with\n      // cached lenses. they expire after 30 seconds\n      if (cachedLenses) {\n        disposableTimeout(() => {\n          const cachedLensesNow = this._codeLensCache.get(model);\n          if (cachedLenses === cachedLensesNow) {\n            this._codeLensCache.delete(model);\n            this._onModelChange();\n          }\n        }, 30 * 1000, this._localToDispose);\n      }\n      return;\n    }\n    for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n      if (typeof provider.onDidChange === 'function') {\n        const registration = provider.onDidChange(() => scheduler.schedule());\n        this._localToDispose.add(registration);\n      }\n    }\n    const scheduler = new RunOnceScheduler(() => {\n      const t1 = Date.now();\n      this._getCodeLensModelPromise?.cancel();\n      this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n      this._getCodeLensModelPromise.then(result => {\n        if (this._currentCodeLensModel) {\n          this._oldCodeLensModels.add(this._currentCodeLensModel);\n        }\n        this._currentCodeLensModel = result;\n        // cache model to reduce flicker\n        this._codeLensCache.put(model, result);\n        // update moving average\n        const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n        scheduler.delay = newDelay;\n        // render lenses\n        this._renderCodeLensSymbols(result);\n        // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n        this._resolveCodeLensesInViewportSoon();\n      }, onUnexpectedError);\n    }, this._provideCodeLensDebounce.get(model));\n    this._localToDispose.add(scheduler);\n    this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n    this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n      this._editor.changeDecorations(decorationsAccessor => {\n        this._editor.changeViewZones(viewZonesAccessor => {\n          const toDispose = [];\n          let lastLensLineNumber = -1;\n          this._lenses.forEach(lens => {\n            if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n              // invalid -> lens collapsed, attach range doesn't exist anymore\n              // line_number -> lenses should never be on the same line\n              toDispose.push(lens);\n            } else {\n              lens.update(viewZonesAccessor);\n              lastLensLineNumber = lens.getLineNumber();\n            }\n          });\n          const helper = new CodeLensHelper();\n          toDispose.forEach(l => {\n            l.dispose(helper, viewZonesAccessor);\n            this._lenses.splice(this._lenses.indexOf(l), 1);\n          });\n          helper.commit(decorationsAccessor);\n        });\n      });\n      // Ask for all references again\n      scheduler.schedule();\n      // Cancel pending and active resolve requests\n      this._resolveCodeLensesScheduler.cancel();\n      this._resolveCodeLensesPromise?.cancel();\n      this._resolveCodeLensesPromise = undefined;\n    }));\n    this._localToDispose.add(this._editor.onDidFocusEditorText(() => {\n      scheduler.schedule();\n    }));\n    this._localToDispose.add(this._editor.onDidBlurEditorText(() => {\n      scheduler.cancel();\n    }));\n    this._localToDispose.add(this._editor.onDidScrollChange(e => {\n      if (e.scrollTopChanged && this._lenses.length > 0) {\n        this._resolveCodeLensesInViewportSoon();\n      }\n    }));\n    this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n      this._resolveCodeLensesInViewportSoon();\n    }));\n    this._localToDispose.add(toDisposable(() => {\n      if (this._editor.getModel()) {\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        this._editor.changeDecorations(decorationsAccessor => {\n          this._editor.changeViewZones(viewZonesAccessor => {\n            this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n          });\n        });\n        scrollState.restore(this._editor);\n      } else {\n        // No accessors available\n        this._disposeAllLenses(undefined, undefined);\n      }\n    }));\n    this._localToDispose.add(this._editor.onMouseDown(e => {\n      if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n        return;\n      }\n      let target = e.target.element;\n      if (target?.tagName === 'SPAN') {\n        target = target.parentElement;\n      }\n      if (target?.tagName === 'A') {\n        for (const lens of this._lenses) {\n          const command = lens.getCommand(target);\n          if (command) {\n            this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n            break;\n          }\n        }\n      }\n    }));\n    scheduler.schedule();\n  }\n  _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n    const helper = new CodeLensHelper();\n    for (const lens of this._lenses) {\n      lens.dispose(helper, viewZoneChangeAccessor);\n    }\n    if (decChangeAccessor) {\n      helper.commit(decChangeAccessor);\n    }\n    this._lenses.length = 0;\n  }\n  _renderCodeLensSymbols(symbols) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const maxLineNumber = this._editor.getModel().getLineCount();\n    const groups = [];\n    let lastGroup;\n    for (const symbol of symbols.lenses) {\n      const line = symbol.symbol.range.startLineNumber;\n      if (line < 1 || line > maxLineNumber) {\n        // invalid code lens\n        continue;\n      } else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n        // on same line as previous\n        lastGroup.push(symbol);\n      } else {\n        // on later line as previous\n        lastGroup = [symbol];\n        groups.push(lastGroup);\n      }\n    }\n    if (!groups.length && !this._lenses.length) {\n      // Nothing to change\n      return;\n    }\n    const scrollState = StableEditorScrollState.capture(this._editor);\n    const layoutInfo = this._getLayoutInfo();\n    this._editor.changeDecorations(decorationsAccessor => {\n      this._editor.changeViewZones(viewZoneAccessor => {\n        const helper = new CodeLensHelper();\n        let codeLensIndex = 0;\n        let groupsIndex = 0;\n        while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n          const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n          const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n          if (codeLensLineNumber < symbolsLineNumber) {\n            this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n            this._lenses.splice(codeLensIndex, 1);\n          } else if (codeLensLineNumber === symbolsLineNumber) {\n            this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n            groupsIndex++;\n            codeLensIndex++;\n          } else {\n            this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n            codeLensIndex++;\n            groupsIndex++;\n          }\n        }\n        // Delete extra code lenses\n        while (codeLensIndex < this._lenses.length) {\n          this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n          this._lenses.splice(codeLensIndex, 1);\n        }\n        // Create extra symbols\n        while (groupsIndex < groups.length) {\n          this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n          groupsIndex++;\n        }\n        helper.commit(decorationsAccessor);\n      });\n    });\n    scrollState.restore(this._editor);\n  }\n  _resolveCodeLensesInViewportSoon() {\n    const model = this._editor.getModel();\n    if (model) {\n      this._resolveCodeLensesScheduler.schedule();\n    }\n  }\n  _resolveCodeLensesInViewport() {\n    this._resolveCodeLensesPromise?.cancel();\n    this._resolveCodeLensesPromise = undefined;\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    const toResolve = [];\n    const lenses = [];\n    this._lenses.forEach(lens => {\n      const request = lens.computeIfNecessary(model);\n      if (request) {\n        toResolve.push(request);\n        lenses.push(lens);\n      }\n    });\n    if (toResolve.length === 0) {\n      return;\n    }\n    const t1 = Date.now();\n    const resolvePromise = createCancelablePromise(token => {\n      const promises = toResolve.map((request, i) => {\n        const resolvedSymbols = new Array(request.length);\n        const promises = request.map((request, i) => {\n          if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n            return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n              resolvedSymbols[i] = symbol;\n            }, onUnexpectedExternalError);\n          } else {\n            resolvedSymbols[i] = request.symbol;\n            return Promise.resolve(undefined);\n          }\n        });\n        return Promise.all(promises).then(() => {\n          if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n            lenses[i].updateCommands(resolvedSymbols);\n          }\n        });\n      });\n      return Promise.all(promises);\n    });\n    this._resolveCodeLensesPromise = resolvePromise;\n    this._resolveCodeLensesPromise.then(() => {\n      // update moving average\n      const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n      this._resolveCodeLensesScheduler.delay = newDelay;\n      if (this._currentCodeLensModel) {\n        // update the cached state with new resolved items\n        this._codeLensCache.put(model, this._currentCodeLensModel);\n      }\n      this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n      if (resolvePromise === this._resolveCodeLensesPromise) {\n        this._resolveCodeLensesPromise = undefined;\n      }\n    }, err => {\n      onUnexpectedError(err); // can also be cancellation!\n      if (resolvePromise === this._resolveCodeLensesPromise) {\n        this._resolveCodeLensesPromise = undefined;\n      }\n    });\n  }\n  async getModel() {\n    await this._getCodeLensModelPromise;\n    await this._resolveCodeLensesPromise;\n    return !this._currentCodeLensModel?.isDisposed ? this._currentCodeLensModel : undefined;\n  }\n};\nCodeLensContribution = __decorate([__param(1, ILanguageFeaturesService), __param(2, ILanguageFeatureDebounceService), __param(3, ICommandService), __param(4, INotificationService), __param(5, ICodeLensCache)], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n  constructor() {\n    super({\n      id: 'codelens.showLensesInCurrentLine',\n      precondition: EditorContextKeys.hasCodeLensProvider,\n      label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n      alias: 'Show CodeLens Commands For Current Line'\n    });\n  }\n  async run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const quickInputService = accessor.get(IQuickInputService);\n    const commandService = accessor.get(ICommandService);\n    const notificationService = accessor.get(INotificationService);\n    const lineNumber = editor.getSelection().positionLineNumber;\n    const codelensController = editor.getContribution(CodeLensContribution.ID);\n    if (!codelensController) {\n      return;\n    }\n    const model = await codelensController.getModel();\n    if (!model) {\n      // nothing\n      return;\n    }\n    const items = [];\n    for (const lens of model.lenses) {\n      if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n        items.push({\n          label: lens.symbol.command.title,\n          command: lens.symbol.command\n        });\n      }\n    }\n    if (items.length === 0) {\n      // We dont want an empty picker\n      return;\n    }\n    const item = await quickInputService.pick(items, {\n      canPickMany: false,\n      placeHolder: localize('placeHolder', \"Select a command\")\n    });\n    if (!item) {\n      // Nothing picked\n      return;\n    }\n    let command = item.command;\n    if (model.isDisposed) {\n      // try to find the same command again in-case the model has been re-created in the meantime\n      // this is a best attempt approach which shouldn't be needed because eager model re-creates\n      // shouldn't happen due to focus in/out anymore\n      const newModel = await codelensController.getModel();\n      const newLens = newModel?.lenses.find(lens => lens.symbol.range.startLineNumber === lineNumber && lens.symbol.command?.title === command.title);\n      if (!newLens || !newLens.symbol.command) {\n        return;\n      }\n      command = newLens.symbol.command;\n    }\n    try {\n      await commandService.executeCommand(command.id, ...(command.arguments || []));\n    } catch (err) {\n      notificationService.error(err);\n    }\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n  constructor() {\n    this.lenses = [];\n    this._disposables = new DisposableStore();\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n  get isDisposed() {\n    return this._disposables.isDisposed;\n  }\n  add(list, provider) {\n    this._disposables.add(list);\n    for (const symbol of list.lenses) {\n      this.lenses.push({\n        symbol,\n        provider\n      });\n    }\n  }\n}\nexport async function getCodeLensModel(registry, model, token) {\n  const provider = registry.ordered(model);\n  const providerRanks = new Map();\n  const result = new CodeLensModel();\n  const promises = provider.map(async (provider, i) => {\n    providerRanks.set(provider, i);\n    try {\n      const list = await Promise.resolve(provider.provideCodeLenses(model, token));\n      if (list) {\n        result.add(list, provider);\n      }\n    } catch (err) {\n      onUnexpectedExternalError(err);\n    }\n  });\n  await Promise.all(promises);\n  result.lenses = result.lenses.sort((a, b) => {\n    // sort by lineNumber, provider-rank, and column\n    if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n      return -1;\n    } else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n      return 1;\n    } else if (providerRanks.get(a.provider) < providerRanks.get(b.provider)) {\n      return -1;\n    } else if (providerRanks.get(a.provider) > providerRanks.get(b.provider)) {\n      return 1;\n    } else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n      return -1;\n    } else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n  return result;\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n  let [uri, itemResolveCount] = args;\n  assertType(URI.isUri(uri));\n  assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n  const {\n    codeLensProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    throw illegalArgument();\n  }\n  const result = [];\n  const disposables = new DisposableStore();\n  return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n    disposables.add(value);\n    const resolve = [];\n    for (const item of value.lenses) {\n      if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n        result.push(item.symbol);\n      } else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n        resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n      }\n    }\n    return Promise.all(resolve);\n  }).then(() => {\n    return result;\n  }).finally(() => {\n    // make sure to return results, then (on next tick)\n    // dispose the results\n    setTimeout(() => disposables.dispose(), 100);\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Event } from '../../../../base/common/event.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { runWhenWindowIdle } from '../../../../base/browser/dom.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n  constructor(lineCount, data) {\n    this.lineCount = lineCount;\n    this.data = data;\n  }\n}\nlet CodeLensCache = class CodeLensCache {\n  constructor(storageService) {\n    this._fakeProvider = new class {\n      provideCodeLenses() {\n        throw new Error('not supported');\n      }\n    }();\n    this._cache = new LRUCache(20, 0.75);\n    // remove old data\n    const oldkey = 'codelens/cache';\n    runWhenWindowIdle(mainWindow, () => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n    // restore lens data on start\n    const key = 'codelens/cache2';\n    const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n    this._deserialize(raw);\n    // store lens data on shutdown\n    const onWillSaveStateBecauseOfShutdown = Event.filter(storageService.onWillSaveState, e => e.reason === WillSaveStateReason.SHUTDOWN);\n    Event.once(onWillSaveStateBecauseOfShutdown)(e => {\n      storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n    });\n  }\n  put(model, data) {\n    // create a copy of the model that is without command-ids\n    // but with comand-labels\n    const copyItems = data.lenses.map(item => {\n      return {\n        range: item.symbol.range,\n        command: item.symbol.command && {\n          id: '',\n          title: item.symbol.command?.title\n        }\n      };\n    });\n    const copyModel = new CodeLensModel();\n    copyModel.add({\n      lenses: copyItems,\n      dispose: () => {}\n    }, this._fakeProvider);\n    const item = new CacheItem(model.getLineCount(), copyModel);\n    this._cache.set(model.uri.toString(), item);\n  }\n  get(model) {\n    const item = this._cache.get(model.uri.toString());\n    return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n  }\n  delete(model) {\n    this._cache.delete(model.uri.toString());\n  }\n  // --- persistence\n  _serialize() {\n    const data = Object.create(null);\n    for (const [key, value] of this._cache) {\n      const lines = new Set();\n      for (const d of value.data.lenses) {\n        lines.add(d.symbol.range.startLineNumber);\n      }\n      data[key] = {\n        lineCount: value.lineCount,\n        lines: [...lines.values()]\n      };\n    }\n    return JSON.stringify(data);\n  }\n  _deserialize(raw) {\n    try {\n      const data = JSON.parse(raw);\n      for (const key in data) {\n        const element = data[key];\n        const lenses = [];\n        for (const line of element.lines) {\n          lenses.push({\n            range: new Range(line, 1, line, 11)\n          });\n        }\n        const model = new CodeLensModel();\n        model.add({\n          lenses,\n          dispose() {}\n        }, this._fakeProvider);\n        this._cache.set(key, new CacheItem(element.lineCount, model));\n      }\n    } catch {\n      // ignore...\n    }\n  }\n};\nCodeLensCache = __decorate([__param(0, IStorageService)], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n  constructor(afterLineNumber, heightInPx, onHeight) {\n    /**\n     * We want that this view zone, which reserves space for a code lens appears\n     * as close as possible to the next line, so we use a very large value here.\n     */\n    this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n    this.afterLineNumber = afterLineNumber;\n    this.heightInPx = heightInPx;\n    this._onHeight = onHeight;\n    this.suppressMouseDown = true;\n    this.domNode = document.createElement('div');\n  }\n  onComputedHeight(height) {\n    if (this._lastHeight === undefined) {\n      this._lastHeight = height;\n    } else if (this._lastHeight !== height) {\n      this._lastHeight = height;\n      this._onHeight();\n    }\n  }\n  isVisible() {\n    return this._lastHeight !== 0 && this.domNode.hasAttribute('monaco-visible-view-zone');\n  }\n}\nlet CodeLensContentWidget = /*#__PURE__*/(() => {\n  class CodeLensContentWidget {\n    static {\n      this._idPool = 0;\n    }\n    constructor(editor, line) {\n      // Editor.IContentWidget.allowEditorOverflow\n      this.allowEditorOverflow = false;\n      this.suppressMouseDown = true;\n      this._commands = new Map();\n      this._isEmpty = true;\n      this._editor = editor;\n      this._id = `codelens.widget-${CodeLensContentWidget._idPool++}`;\n      this.updatePosition(line);\n      this._domNode = document.createElement('span');\n      this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n      this._commands.clear();\n      const children = [];\n      let hasSymbol = false;\n      for (let i = 0; i < lenses.length; i++) {\n        const lens = lenses[i];\n        if (!lens) {\n          continue;\n        }\n        hasSymbol = true;\n        if (lens.command) {\n          const title = renderLabelWithIcons(lens.command.title.trim());\n          if (lens.command.id) {\n            const id = `c${CodeLensContentWidget._idPool++}`;\n            children.push(dom.$('a', {\n              id,\n              title: lens.command.tooltip,\n              role: 'button'\n            }, ...title));\n            this._commands.set(id, lens.command);\n          } else {\n            children.push(dom.$('span', {\n              title: lens.command.tooltip\n            }, ...title));\n          }\n          if (i + 1 < lenses.length) {\n            children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n          }\n        }\n      }\n      if (!hasSymbol) {\n        // symbols but no commands\n        dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n      } else {\n        // symbols and commands\n        dom.reset(this._domNode, ...children);\n        if (this._isEmpty && animate) {\n          this._domNode.classList.add('fadein');\n        }\n        this._isEmpty = false;\n      }\n    }\n    getCommand(link) {\n      return link.parentElement === this._domNode ? this._commands.get(link.id) : undefined;\n    }\n    getId() {\n      return this._id;\n    }\n    getDomNode() {\n      return this._domNode;\n    }\n    updatePosition(line) {\n      const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n      this._widgetPosition = {\n        position: {\n          lineNumber: line,\n          column: column\n        },\n        preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n      };\n    }\n    getPosition() {\n      return this._widgetPosition || null;\n    }\n  }\n  return CodeLensContentWidget;\n})();\nexport class CodeLensHelper {\n  constructor() {\n    this._removeDecorations = [];\n    this._addDecorations = [];\n    this._addDecorationsCallbacks = [];\n  }\n  addDecoration(decoration, callback) {\n    this._addDecorations.push(decoration);\n    this._addDecorationsCallbacks.push(callback);\n  }\n  removeDecoration(decorationId) {\n    this._removeDecorations.push(decorationId);\n  }\n  commit(changeAccessor) {\n    const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n    for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n      this._addDecorationsCallbacks[i](resultingDecorations[i]);\n    }\n  }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n  collapseOnReplaceEdit: true,\n  description: 'codelens'\n});\nexport class CodeLensWidget {\n  constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n    this._isDisposed = false;\n    this._editor = editor;\n    this._data = data;\n    // create combined range, track all ranges with decorations,\n    // check if there is already something to render\n    this._decorationIds = [];\n    let range;\n    const lenses = [];\n    this._data.forEach((codeLensData, i) => {\n      if (codeLensData.symbol.command) {\n        lenses.push(codeLensData.symbol);\n      }\n      helper.addDecoration({\n        range: codeLensData.symbol.range,\n        options: codeLensDecorationOptions\n      }, id => this._decorationIds[i] = id);\n      // the range contains all lenses on this line\n      if (!range) {\n        range = Range.lift(codeLensData.symbol.range);\n      } else {\n        range = Range.plusRange(range, codeLensData.symbol.range);\n      }\n    });\n    this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n    this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n    if (lenses.length > 0) {\n      this._createContentWidgetIfNecessary();\n      this._contentWidget.withCommands(lenses, false);\n    }\n  }\n  _createContentWidgetIfNecessary() {\n    if (!this._contentWidget) {\n      this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n      this._editor.addContentWidget(this._contentWidget);\n    } else {\n      this._editor.layoutContentWidget(this._contentWidget);\n    }\n  }\n  dispose(helper, viewZoneChangeAccessor) {\n    this._decorationIds.forEach(helper.removeDecoration, helper);\n    this._decorationIds = [];\n    viewZoneChangeAccessor?.removeZone(this._viewZoneId);\n    if (this._contentWidget) {\n      this._editor.removeContentWidget(this._contentWidget);\n      this._contentWidget = undefined;\n    }\n    this._isDisposed = true;\n  }\n  isDisposed() {\n    return this._isDisposed;\n  }\n  isValid() {\n    return this._decorationIds.some((id, i) => {\n      const range = this._editor.getModel().getDecorationRange(id);\n      const symbol = this._data[i].symbol;\n      return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n    });\n  }\n  updateCodeLensSymbols(data, helper) {\n    this._decorationIds.forEach(helper.removeDecoration, helper);\n    this._decorationIds = [];\n    this._data = data;\n    this._data.forEach((codeLensData, i) => {\n      helper.addDecoration({\n        range: codeLensData.symbol.range,\n        options: codeLensDecorationOptions\n      }, id => this._decorationIds[i] = id);\n    });\n  }\n  updateHeight(height, viewZoneChangeAccessor) {\n    this._viewZone.heightInPx = height;\n    viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n    if (this._contentWidget) {\n      this._editor.layoutContentWidget(this._contentWidget);\n    }\n  }\n  computeIfNecessary(model) {\n    if (!this._viewZone.isVisible()) {\n      return null;\n    }\n    // Read editor current state\n    for (let i = 0; i < this._decorationIds.length; i++) {\n      const range = model.getDecorationRange(this._decorationIds[i]);\n      if (range) {\n        this._data[i].symbol.range = range;\n      }\n    }\n    return this._data;\n  }\n  updateCommands(symbols) {\n    this._createContentWidgetIfNecessary();\n    this._contentWidget.withCommands(symbols, true);\n    for (let i = 0; i < this._data.length; i++) {\n      const resolved = symbols[i];\n      if (resolved) {\n        const {\n          symbol\n        } = this._data[i];\n        symbol.command = resolved.command || symbol.command;\n      }\n    }\n  }\n  getCommand(link) {\n    return this._contentWidget?.getCommand(link);\n  }\n  getLineNumber() {\n    const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n    if (range) {\n      return range.startLineNumber;\n    }\n    return -1;\n  }\n  update(viewZoneChangeAccessor) {\n    if (this.isValid()) {\n      const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n      if (range) {\n        this._viewZone.afterLineNumber = range.startLineNumber - 1;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n          this._contentWidget.updatePosition(range.startLineNumber);\n          this._editor.layoutContentWidget(this._contentWidget);\n        }\n      }\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ContentHoverController } from '../../hover/browser/contentHoverController2.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport let ColorContribution = /*#__PURE__*/(() => {\n  class ColorContribution extends Disposable {\n    static {\n      this.ID = 'editor.contrib.colorContribution';\n    } // ms\n    constructor(_editor) {\n      super();\n      this._editor = _editor;\n      this._register(_editor.onMouseDown(e => this.onMouseDown(e)));\n    }\n    dispose() {\n      super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n      const colorDecoratorsActivatedOn = this._editor.getOption(149 /* EditorOption.colorDecoratorsActivatedOn */);\n      if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n        return;\n      }\n      const target = mouseEvent.target;\n      if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n        return;\n      }\n      if (!target.detail.injectedText) {\n        return;\n      }\n      if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n        return;\n      }\n      if (!target.range) {\n        return;\n      }\n      const hoverController = this._editor.getContribution(ContentHoverController.ID);\n      if (!hoverController) {\n        return;\n      }\n      if (!hoverController.isColorPickerVisible) {\n        const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n        hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n      }\n    }\n  }\n  return ColorContribution;\n})();\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ColorDetector_1;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = /*#__PURE__*/(() => {\n  let ColorDetector = class ColorDetector extends Disposable {\n    static {\n      ColorDetector_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.colorDetector';\n    }\n    static {\n      this.RECOMPUTE_TIME = 1000;\n    } // ms\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n      super();\n      this._editor = _editor;\n      this._configurationService = _configurationService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._localToDispose = this._register(new DisposableStore());\n      this._decorationsIds = [];\n      this._colorDatas = new Map();\n      this._colorDecoratorIds = this._editor.createDecorationsCollection();\n      this._ruleFactory = new DynamicCssRules(this._editor);\n      this._decoratorLimitReporter = new DecoratorLimitReporter();\n      this._colorDecorationClassRefs = this._register(new DisposableStore());\n      this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', {\n        min: ColorDetector_1.RECOMPUTE_TIME\n      });\n      this._register(_editor.onDidChangeModel(() => {\n        this._isColorDecoratorsEnabled = this.isEnabled();\n        this.updateColors();\n      }));\n      this._register(_editor.onDidChangeModelLanguage(() => this.updateColors()));\n      this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.updateColors()));\n      this._register(_editor.onDidChangeConfiguration(e => {\n        const prevIsEnabled = this._isColorDecoratorsEnabled;\n        this._isColorDecoratorsEnabled = this.isEnabled();\n        this._isDefaultColorDecoratorsEnabled = this._editor.getOption(148 /* EditorOption.defaultColorDecorators */);\n        const updatedColorDecoratorsSetting = prevIsEnabled !== this._isColorDecoratorsEnabled || e.hasChanged(21 /* EditorOption.colorDecoratorsLimit */);\n        const updatedDefaultColorDecoratorsSetting = e.hasChanged(148 /* EditorOption.defaultColorDecorators */);\n        if (updatedColorDecoratorsSetting || updatedDefaultColorDecoratorsSetting) {\n          if (this._isColorDecoratorsEnabled) {\n            this.updateColors();\n          } else {\n            this.removeAllDecorations();\n          }\n        }\n      }));\n      this._timeoutTimer = null;\n      this._computePromise = null;\n      this._isColorDecoratorsEnabled = this.isEnabled();\n      this._isDefaultColorDecoratorsEnabled = this._editor.getOption(148 /* EditorOption.defaultColorDecorators */);\n      this.updateColors();\n    }\n    isEnabled() {\n      const model = this._editor.getModel();\n      if (!model) {\n        return false;\n      }\n      const languageId = model.getLanguageId();\n      // handle deprecated settings. [languageId].colorDecorators.enable\n      const deprecatedConfig = this._configurationService.getValue(languageId);\n      if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n        const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n        if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n          return colorDecorators['enable'];\n        }\n      }\n      return this._editor.getOption(20 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n      return editor.getContribution(this.ID);\n    }\n    dispose() {\n      this.stop();\n      this.removeAllDecorations();\n      super.dispose();\n    }\n    updateColors() {\n      this.stop();\n      if (!this._isColorDecoratorsEnabled) {\n        return;\n      }\n      const model = this._editor.getModel();\n      if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n        return;\n      }\n      this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n        if (!this._timeoutTimer) {\n          this._timeoutTimer = new TimeoutTimer();\n          this._timeoutTimer.cancelAndSet(() => {\n            this._timeoutTimer = null;\n            this.beginCompute();\n          }, this._debounceInformation.get(model));\n        }\n      }));\n      this.beginCompute();\n    }\n    async beginCompute() {\n      this._computePromise = createCancelablePromise(async token => {\n        const model = this._editor.getModel();\n        if (!model) {\n          return [];\n        }\n        const sw = new StopWatch(false);\n        const colors = await getColors(this._languageFeaturesService.colorProvider, model, token, this._isDefaultColorDecoratorsEnabled);\n        this._debounceInformation.update(model, sw.elapsed());\n        return colors;\n      });\n      try {\n        const colors = await this._computePromise;\n        this.updateDecorations(colors);\n        this.updateColorDecorators(colors);\n        this._computePromise = null;\n      } catch (e) {\n        onUnexpectedError(e);\n      }\n    }\n    stop() {\n      if (this._timeoutTimer) {\n        this._timeoutTimer.cancel();\n        this._timeoutTimer = null;\n      }\n      if (this._computePromise) {\n        this._computePromise.cancel();\n        this._computePromise = null;\n      }\n      this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n      const decorations = colorDatas.map(c => ({\n        range: {\n          startLineNumber: c.colorInfo.range.startLineNumber,\n          startColumn: c.colorInfo.range.startColumn,\n          endLineNumber: c.colorInfo.range.endLineNumber,\n          endColumn: c.colorInfo.range.endColumn\n        },\n        options: ModelDecorationOptions.EMPTY\n      }));\n      this._editor.changeDecorations(changeAccessor => {\n        this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n        this._colorDatas = new Map();\n        this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n      });\n    }\n    updateColorDecorators(colorData) {\n      this._colorDecorationClassRefs.clear();\n      const decorations = [];\n      const limit = this._editor.getOption(21 /* EditorOption.colorDecoratorsLimit */);\n      for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n        const {\n          red,\n          green,\n          blue,\n          alpha\n        } = colorData[i].colorInfo.color;\n        const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n        const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n        const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n          backgroundColor: color\n        }));\n        decorations.push({\n          range: {\n            startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n            startColumn: colorData[i].colorInfo.range.startColumn,\n            endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n            endColumn: colorData[i].colorInfo.range.endColumn\n          },\n          options: {\n            description: 'colorDetector',\n            before: {\n              content: noBreakWhitespace,\n              inlineClassName: `${ref.className} colorpicker-color-decoration`,\n              inlineClassNameAffectsLetterSpacing: true,\n              attachedData: ColorDecorationInjectedTextMarker\n            }\n          }\n        });\n      }\n      const limited = limit < colorData.length ? limit : false;\n      this._decoratorLimitReporter.update(colorData.length, limited);\n      this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n      this._editor.removeDecorations(this._decorationsIds);\n      this._decorationsIds = [];\n      this._colorDecoratorIds.clear();\n      this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n      const model = this._editor.getModel();\n      if (!model) {\n        return null;\n      }\n      const decorations = model.getDecorationsInRange(Range.fromPositions(position, position)).filter(d => this._colorDatas.has(d.id));\n      if (decorations.length === 0) {\n        return null;\n      }\n      return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n      return this._colorDecoratorIds.has(decoration);\n    }\n  };\n  return ColorDetector;\n})();\nColorDetector = ColorDetector_1 = __decorate([__param(1, IConfigurationService), __param(2, ILanguageFeaturesService), __param(3, ILanguageFeatureDebounceService)], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n  constructor() {\n    this._onDidChange = new Emitter();\n    this._computed = 0;\n    this._limited = false;\n  }\n  update(computed, limited) {\n    if (computed !== this._computed || limited !== this._limited) {\n      this._computed = computed;\n      this._limited = limited;\n      this._onDidChange.fire();\n    }\n  }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport async function getColors(colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled = true) {\n  return _findColorData(new ColorDataCollector(), colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n  return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nclass ColorDataCollector {\n  constructor() {}\n  async compute(provider, model, token, colors) {\n    const documentColors = await provider.provideDocumentColors(model, token);\n    if (Array.isArray(documentColors)) {\n      for (const colorInfo of documentColors) {\n        colors.push({\n          colorInfo,\n          provider\n        });\n      }\n    }\n    return Array.isArray(documentColors);\n  }\n}\nclass ExtColorDataCollector {\n  constructor() {}\n  async compute(provider, model, token, colors) {\n    const documentColors = await provider.provideDocumentColors(model, token);\n    if (Array.isArray(documentColors)) {\n      for (const colorInfo of documentColors) {\n        colors.push({\n          range: colorInfo.range,\n          color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha]\n        });\n      }\n    }\n    return Array.isArray(documentColors);\n  }\n}\nclass ColorPresentationsCollector {\n  constructor(colorInfo) {\n    this.colorInfo = colorInfo;\n  }\n  async compute(provider, model, _token, colors) {\n    const documentColors = await provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\n    if (Array.isArray(documentColors)) {\n      colors.push(...documentColors);\n    }\n    return Array.isArray(documentColors);\n  }\n}\nasync function _findColorData(collector, colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled) {\n  let validDocumentColorProviderFound = false;\n  let defaultProvider;\n  const colorData = [];\n  const documentColorProviders = colorProviderRegistry.ordered(model);\n  for (let i = documentColorProviders.length - 1; i >= 0; i--) {\n    const provider = documentColorProviders[i];\n    if (provider instanceof DefaultDocumentColorProvider) {\n      defaultProvider = provider;\n    } else {\n      try {\n        if (await collector.compute(provider, model, token, colorData)) {\n          validDocumentColorProviderFound = true;\n        }\n      } catch (e) {\n        onUnexpectedExternalError(e);\n      }\n    }\n  }\n  if (validDocumentColorProviderFound) {\n    return colorData;\n  }\n  if (defaultProvider && isDefaultColorDecoratorsEnabled) {\n    await collector.compute(defaultProvider, model, token, colorData);\n    return colorData;\n  }\n  return [];\n}\nfunction _setupColorCommand(accessor, resource) {\n  const {\n    colorProvider: colorProviderRegistry\n  } = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument();\n  }\n  const isDefaultColorDecoratorsEnabled = accessor.get(IConfigurationService).getValue('editor.defaultColorDecorators', {\n    resource\n  });\n  return {\n    model,\n    colorProviderRegistry,\n    isDefaultColorDecoratorsEnabled\n  };\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n  const [resource] = args;\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n  const {\n    model,\n    colorProviderRegistry,\n    isDefaultColorDecoratorsEnabled\n  } = _setupColorCommand(accessor, resource);\n  return _findColorData(new ExtColorDataCollector(), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n  const [color, context] = args;\n  const {\n    uri,\n    range\n  } = context;\n  if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n  const {\n    model,\n    colorProviderRegistry,\n    isDefaultColorDecoratorsEnabled\n  } = _setupColorCommand(accessor, uri);\n  const [red, green, blue, alpha] = color;\n  return _findColorData(new ColorPresentationsCollector({\n    range: range,\n    color: {\n      red,\n      green,\n      blue,\n      alpha\n    }\n  }), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nlet DefaultDocumentColorProvider = class DefaultDocumentColorProvider {\n  constructor(_editorWorkerService) {\n    this._editorWorkerService = _editorWorkerService;\n  }\n  async provideDocumentColors(model, _token) {\n    return this._editorWorkerService.computeDefaultDocumentColors(model.uri);\n  }\n  provideColorPresentations(_model, colorInfo, _token) {\n    const range = colorInfo.range;\n    const colorFromInfo = colorInfo.color;\n    const alpha = colorFromInfo.alpha;\n    const color = new Color(new RGBA(Math.round(255 * colorFromInfo.red), Math.round(255 * colorFromInfo.green), Math.round(255 * colorFromInfo.blue), alpha));\n    const rgb = alpha ? Color.Format.CSS.formatRGB(color) : Color.Format.CSS.formatRGBA(color);\n    const hsl = alpha ? Color.Format.CSS.formatHSL(color) : Color.Format.CSS.formatHSLA(color);\n    const hex = alpha ? Color.Format.CSS.formatHex(color) : Color.Format.CSS.formatHexA(color);\n    const colorPresentations = [];\n    colorPresentations.push({\n      label: rgb,\n      textEdit: {\n        range: range,\n        text: rgb\n      }\n    });\n    colorPresentations.push({\n      label: hsl,\n      textEdit: {\n        range: range,\n        text: hsl\n      }\n    });\n    colorPresentations.push({\n      label: hex,\n      textEdit: {\n        range: range,\n        text: hex\n      }\n    });\n    return colorPresentations;\n  }\n};\nDefaultDocumentColorProvider = __decorate([__param(0, IEditorWorkerService)], DefaultDocumentColorProvider);\nexport { DefaultDocumentColorProvider };\nlet DefaultDocumentColorProviderFeature = class DefaultDocumentColorProviderFeature extends Disposable {\n  constructor(_languageFeaturesService, editorWorkerService) {\n    super();\n    this._register(_languageFeaturesService.colorProvider.register('*', new DefaultDocumentColorProvider(editorWorkerService)));\n  }\n};\nDefaultDocumentColorProviderFeature = __decorate([__param(0, ILanguageFeaturesService), __param(1, IEditorWorkerService)], DefaultDocumentColorProviderFeature);\nregisterEditorFeature(DefaultDocumentColorProviderFeature);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { RenderedHoverParts } from '../../hover/browser/hoverTypes.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n  constructor(owner, range, model, provider) {\n    this.owner = owner;\n    this.range = range;\n    this.model = model;\n    this.provider = provider;\n    /**\n     * Force the hover to always be rendered at this specific range,\n     * even in the case of multiple hover parts.\n     */\n    this.forceShowAtRange = true;\n  }\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1 /* HoverAnchorType.Range */ && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n  constructor(_editor, _themeService) {\n    this._editor = _editor;\n    this._themeService = _themeService;\n    this.hoverOrdinal = 2;\n  }\n  computeSync(_anchor, _lineDecorations) {\n    return [];\n  }\n  computeAsync(anchor, lineDecorations, token) {\n    return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n  }\n  async _computeAsync(_anchor, lineDecorations, _token) {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n    const colorDetector = ColorDetector.get(this._editor);\n    if (!colorDetector) {\n      return [];\n    }\n    for (const d of lineDecorations) {\n      if (!colorDetector.isColorDecoration(d)) {\n        continue;\n      }\n      const colorData = colorDetector.getColorData(d.range.getStartPosition());\n      if (colorData) {\n        const colorHover = await _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n        return [colorHover];\n      }\n    }\n    return [];\n  }\n  renderHoverParts(context, hoverParts) {\n    const renderedPart = renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    if (!renderedPart) {\n      return new RenderedHoverParts([]);\n    }\n    this._colorPicker = renderedPart.colorPicker;\n    const renderedHoverPart = {\n      hoverPart: renderedPart.hoverPart,\n      hoverElement: this._colorPicker.domNode,\n      dispose() {\n        renderedPart.disposables.dispose();\n      }\n    };\n    return new RenderedHoverParts([renderedHoverPart]);\n  }\n  handleResize() {\n    this._colorPicker?.layout();\n  }\n  isColorPickerVisible() {\n    return !!this._colorPicker;\n  }\n};\nColorHoverParticipant = __decorate([__param(1, IThemeService)], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n  constructor(owner, range, model, provider) {\n    this.owner = owner;\n    this.range = range;\n    this.model = model;\n    this.provider = provider;\n  }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n  constructor(_editor, _themeService) {\n    this._editor = _editor;\n    this._themeService = _themeService;\n    this._color = null;\n  }\n  async createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const colorDetector = ColorDetector.get(this._editor);\n    if (!colorDetector) {\n      return null;\n    }\n    const colors = await getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n    let foundColorInfo = null;\n    let foundColorProvider = null;\n    for (const colorData of colors) {\n      const colorInfo = colorData.colorInfo;\n      if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n        foundColorInfo = colorInfo;\n        foundColorProvider = colorData.provider;\n      }\n    }\n    const colorInfo = foundColorInfo ?? defaultColorInfo;\n    const colorProvider = foundColorProvider ?? defaultColorProvider;\n    const foundInEditor = !!foundColorInfo;\n    return {\n      colorHover: await _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider),\n      foundInEditor: foundInEditor\n    };\n  }\n  async updateEditorModel(colorHoverData) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const colorPickerModel = colorHoverData.model;\n    let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n    if (this._color) {\n      await _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n      range = _updateEditorModel(this._editor, range, colorPickerModel);\n    }\n  }\n  renderHoverParts(context, hoverParts) {\n    return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n  }\n  set color(color) {\n    this._color = color;\n  }\n  get color() {\n    return this._color;\n  }\n};\nStandaloneColorPickerParticipant = __decorate([__param(1, IThemeService)], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nasync function _createColorHover(participant, editorModel, colorInfo, provider) {\n  const originalText = editorModel.getValueInRange(colorInfo.range);\n  const {\n    red,\n    green,\n    blue,\n    alpha\n  } = colorInfo.color;\n  const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n  const color = new Color(rgba);\n  const colorPresentations = await getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n  const model = new ColorPickerModel(color, [], 0);\n  model.colorPresentations = colorPresentations || [];\n  model.guessColorPresentation(color, originalText);\n  if (participant instanceof ColorHoverParticipant) {\n    return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n  } else {\n    return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n  }\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n  if (hoverParts.length === 0 || !editor.hasModel()) {\n    return undefined;\n  }\n  if (context.setMinimumDimensions) {\n    const minimumHeight = editor.getOption(67 /* EditorOption.lineHeight */) + 8;\n    context.setMinimumDimensions(new Dimension(302, minimumHeight));\n  }\n  const disposables = new DisposableStore();\n  const colorHover = hoverParts[0];\n  const editorModel = editor.getModel();\n  const model = colorHover.model;\n  const colorPicker = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(144 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n  let editorUpdatedByColorPicker = false;\n  let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n  if (participant instanceof StandaloneColorPickerParticipant) {\n    const color = colorHover.model.color;\n    participant.color = color;\n    _updateColorPresentations(editorModel, model, color, range, colorHover);\n    disposables.add(model.onColorFlushed(color => {\n      participant.color = color;\n    }));\n  } else {\n    disposables.add(model.onColorFlushed(async color => {\n      await _updateColorPresentations(editorModel, model, color, range, colorHover);\n      editorUpdatedByColorPicker = true;\n      range = _updateEditorModel(editor, range, model);\n    }));\n  }\n  disposables.add(model.onDidChangeColor(color => {\n    _updateColorPresentations(editorModel, model, color, range, colorHover);\n  }));\n  disposables.add(editor.onDidChangeModelContent(e => {\n    if (editorUpdatedByColorPicker) {\n      editorUpdatedByColorPicker = false;\n    } else {\n      context.hide();\n      editor.focus();\n    }\n  }));\n  return {\n    hoverPart: colorHover,\n    colorPicker,\n    disposables\n  };\n}\nfunction _updateEditorModel(editor, range, model) {\n  const textEdits = [];\n  const edit = model.presentation.textEdit ?? {\n    range,\n    text: model.presentation.label,\n    forceMoveMarkers: false\n  };\n  textEdits.push(edit);\n  if (model.presentation.additionalTextEdits) {\n    textEdits.push(...model.presentation.additionalTextEdits);\n  }\n  const replaceRange = Range.lift(edit.range);\n  const trackedRange = editor.getModel()._setTrackedRange(null, replaceRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n  editor.executeEdits('colorpicker', textEdits);\n  editor.pushUndoStop();\n  return editor.getModel()._getTrackedRange(trackedRange) ?? replaceRange;\n}\nasync function _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n  const colorPresentations = await getColorPresentations(editorModel, {\n    range: range,\n    color: {\n      red: color.rgba.r / 255,\n      green: color.rgba.g / 255,\n      blue: color.rgba.b / 255,\n      alpha: color.rgba.a\n    }\n  }, colorHover.provider, CancellationToken.None);\n  colorPickerModel.colorPresentations = colorPresentations || [];\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n  get color() {\n    return this._color;\n  }\n  set color(color) {\n    if (this._color.equals(color)) {\n      return;\n    }\n    this._color = color;\n    this._onDidChangeColor.fire(color);\n  }\n  get presentation() {\n    return this.colorPresentations[this.presentationIndex];\n  }\n  get colorPresentations() {\n    return this._colorPresentations;\n  }\n  set colorPresentations(colorPresentations) {\n    this._colorPresentations = colorPresentations;\n    if (this.presentationIndex > colorPresentations.length - 1) {\n      this.presentationIndex = 0;\n    }\n    this._onDidChangePresentation.fire(this.presentation);\n  }\n  constructor(color, availableColorPresentations, presentationIndex) {\n    this.presentationIndex = presentationIndex;\n    this._onColorFlushed = new Emitter();\n    this.onColorFlushed = this._onColorFlushed.event;\n    this._onDidChangeColor = new Emitter();\n    this.onDidChangeColor = this._onDidChangeColor.event;\n    this._onDidChangePresentation = new Emitter();\n    this.onDidChangePresentation = this._onDidChangePresentation.event;\n    this.originalColor = color;\n    this._color = color;\n    this._colorPresentations = availableColorPresentations;\n  }\n  selectNextColorPresentation() {\n    this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n    this.flushColor();\n    this._onDidChangePresentation.fire(this.presentation);\n  }\n  guessColorPresentation(color, originalText) {\n    let presentationIndex = -1;\n    for (let i = 0; i < this.colorPresentations.length; i++) {\n      if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n        presentationIndex = i;\n        break;\n      }\n    }\n    if (presentationIndex === -1) {\n      // check which color presentation text has same prefix as original text's prefix\n      const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n      for (let i = 0; i < this.colorPresentations.length; i++) {\n        if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n          presentationIndex = i;\n          break;\n        }\n      }\n    }\n    if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n      this.presentationIndex = presentationIndex;\n      this._onDidChangePresentation.fire(this.presentation);\n    }\n  }\n  flushColor() {\n    this._onColorFlushed.fire(this._color);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/pixelRatio.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n  constructor(container, model, themeService, showingStandaloneColorPicker = false) {\n    super();\n    this.model = model;\n    this.showingStandaloneColorPicker = showingStandaloneColorPicker;\n    this._closeButton = null;\n    this._domNode = $('.colorpicker-header');\n    dom.append(container, this._domNode);\n    this._pickedColorNode = dom.append(this._domNode, $('.picked-color'));\n    dom.append(this._pickedColorNode, $('span.codicon.codicon-color-mode'));\n    this._pickedColorPresentation = dom.append(this._pickedColorNode, document.createElement('span'));\n    this._pickedColorPresentation.classList.add('picked-color-presentation');\n    const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n    this._pickedColorNode.setAttribute('title', tooltip);\n    this._originalColorNode = dom.append(this._domNode, $('.original-color'));\n    this._originalColorNode.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n    this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n    this._register(themeService.onDidColorThemeChange(theme => {\n      this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n    }));\n    this._register(dom.addDisposableListener(this._pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n    this._register(dom.addDisposableListener(this._originalColorNode, dom.EventType.CLICK, () => {\n      this.model.color = this.model.originalColor;\n      this.model.flushColor();\n    }));\n    this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n    this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n    this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n    this._pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n    this.onDidChangeColor(this.model.color);\n    // When the color picker widget is a standalone color picker widget, then add a close button\n    if (this.showingStandaloneColorPicker) {\n      this._domNode.classList.add('standalone-colorpicker');\n      this._closeButton = this._register(new CloseButton(this._domNode));\n    }\n  }\n  get closeButton() {\n    return this._closeButton;\n  }\n  get pickedColorNode() {\n    return this._pickedColorNode;\n  }\n  get originalColorNode() {\n    return this._originalColorNode;\n  }\n  onDidChangeColor(color) {\n    this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n    this._pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n    this.onDidChangePresentation();\n  }\n  onDidChangePresentation() {\n    this._pickedColorPresentation.textContent = this.model.presentation ? this.model.presentation.label : '';\n  }\n}\nclass CloseButton extends Disposable {\n  constructor(container) {\n    super();\n    this._onClicked = this._register(new Emitter());\n    this.onClicked = this._onClicked.event;\n    this._button = document.createElement('div');\n    this._button.classList.add('close-button');\n    dom.append(container, this._button);\n    const innerDiv = document.createElement('div');\n    innerDiv.classList.add('close-button-inner-div');\n    dom.append(this._button, innerDiv);\n    const closeButton = dom.append(innerDiv, $('.button' + ThemeIcon.asCSSSelector(registerIcon('color-picker-close', Codicon.close, localize('closeIcon', 'Icon to close the color picker')))));\n    closeButton.classList.add('close-icon');\n    this._register(dom.addDisposableListener(this._button, dom.EventType.CLICK, () => {\n      this._onClicked.fire();\n    }));\n  }\n}\nexport class ColorPickerBody extends Disposable {\n  constructor(container, model, pixelRatio, isStandaloneColorPicker = false) {\n    super();\n    this.model = model;\n    this.pixelRatio = pixelRatio;\n    this._insertButton = null;\n    this._domNode = $('.colorpicker-body');\n    dom.append(container, this._domNode);\n    this._saturationBox = new SaturationBox(this._domNode, this.model, this.pixelRatio);\n    this._register(this._saturationBox);\n    this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n    this._register(this._saturationBox.onColorFlushed(this.flushColor, this));\n    this._opacityStrip = new OpacityStrip(this._domNode, this.model, isStandaloneColorPicker);\n    this._register(this._opacityStrip);\n    this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange, this));\n    this._register(this._opacityStrip.onColorFlushed(this.flushColor, this));\n    this._hueStrip = new HueStrip(this._domNode, this.model, isStandaloneColorPicker);\n    this._register(this._hueStrip);\n    this._register(this._hueStrip.onDidChange(this.onDidHueChange, this));\n    this._register(this._hueStrip.onColorFlushed(this.flushColor, this));\n    if (isStandaloneColorPicker) {\n      this._insertButton = this._register(new InsertButton(this._domNode));\n      this._domNode.classList.add('standalone-colorpicker');\n    }\n  }\n  flushColor() {\n    this.model.flushColor();\n  }\n  onDidSaturationValueChange({\n    s,\n    v\n  }) {\n    const hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n  }\n  onDidOpacityChange(a) {\n    const hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n  }\n  onDidHueChange(value) {\n    const hsva = this.model.color.hsva;\n    const h = (1 - value) * 360;\n    this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n  }\n  get domNode() {\n    return this._domNode;\n  }\n  get saturationBox() {\n    return this._saturationBox;\n  }\n  get enterButton() {\n    return this._insertButton;\n  }\n  layout() {\n    this._saturationBox.layout();\n    this._opacityStrip.layout();\n    this._hueStrip.layout();\n  }\n}\nclass SaturationBox extends Disposable {\n  constructor(container, model, pixelRatio) {\n    super();\n    this.model = model;\n    this.pixelRatio = pixelRatio;\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n    this._onColorFlushed = new Emitter();\n    this.onColorFlushed = this._onColorFlushed.event;\n    this._domNode = $('.saturation-wrap');\n    dom.append(container, this._domNode);\n    // Create canvas, draw selected color\n    this._canvas = document.createElement('canvas');\n    this._canvas.className = 'saturation-box';\n    dom.append(this._domNode, this._canvas);\n    // Add selection circle\n    this.selection = $('.saturation-selection');\n    dom.append(this._domNode, this.selection);\n    this.layout();\n    this._register(dom.addDisposableListener(this._domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n    this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n    this.monitor = null;\n  }\n  get domNode() {\n    return this._domNode;\n  }\n  onPointerDown(e) {\n    if (!e.target || !(e.target instanceof Element)) {\n      return;\n    }\n    this.monitor = this._register(new GlobalPointerMoveMonitor());\n    const origin = dom.getDomNodePagePosition(this._domNode);\n    if (e.target !== this.selection) {\n      this.onDidChangePosition(e.offsetX, e.offsetY);\n    }\n    this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n    const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n      this._onColorFlushed.fire();\n      pointerUpListener.dispose();\n      if (this.monitor) {\n        this.monitor.stopMonitoring(true);\n        this.monitor = null;\n      }\n    }, true);\n  }\n  onDidChangePosition(left, top) {\n    const s = Math.max(0, Math.min(1, left / this.width));\n    const v = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.paintSelection(s, v);\n    this._onDidChange.fire({\n      s,\n      v\n    });\n  }\n  layout() {\n    this.width = this._domNode.offsetWidth;\n    this.height = this._domNode.offsetHeight;\n    this._canvas.width = this.width * this.pixelRatio;\n    this._canvas.height = this.height * this.pixelRatio;\n    this.paint();\n    const hsva = this.model.color.hsva;\n    this.paintSelection(hsva.s, hsva.v);\n  }\n  paint() {\n    const hsva = this.model.color.hsva;\n    const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n    const ctx = this._canvas.getContext('2d');\n    const whiteGradient = ctx.createLinearGradient(0, 0, this._canvas.width, 0);\n    whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n    whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n    whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n    const blackGradient = ctx.createLinearGradient(0, 0, 0, this._canvas.height);\n    blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n    blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n    ctx.rect(0, 0, this._canvas.width, this._canvas.height);\n    ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n    ctx.fill();\n    ctx.fillStyle = whiteGradient;\n    ctx.fill();\n    ctx.fillStyle = blackGradient;\n    ctx.fill();\n  }\n  paintSelection(s, v) {\n    this.selection.style.left = `${s * this.width}px`;\n    this.selection.style.top = `${this.height - v * this.height}px`;\n  }\n  onDidChangeColor(color) {\n    if (this.monitor && this.monitor.isMonitoring()) {\n      return;\n    }\n    this.paint();\n    const hsva = color.hsva;\n    this.paintSelection(hsva.s, hsva.v);\n  }\n}\nclass Strip extends Disposable {\n  constructor(container, model, showingStandaloneColorPicker = false) {\n    super();\n    this.model = model;\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n    this._onColorFlushed = new Emitter();\n    this.onColorFlushed = this._onColorFlushed.event;\n    if (showingStandaloneColorPicker) {\n      this.domNode = dom.append(container, $('.standalone-strip'));\n      this.overlay = dom.append(this.domNode, $('.standalone-overlay'));\n    } else {\n      this.domNode = dom.append(container, $('.strip'));\n      this.overlay = dom.append(this.domNode, $('.overlay'));\n    }\n    this.slider = dom.append(this.domNode, $('.slider'));\n    this.slider.style.top = `0px`;\n    this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n    this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n    this.layout();\n  }\n  layout() {\n    this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n    const value = this.getValue(this.model.color);\n    this.updateSliderPosition(value);\n  }\n  onDidChangeColor(color) {\n    const value = this.getValue(color);\n    this.updateSliderPosition(value);\n  }\n  onPointerDown(e) {\n    if (!e.target || !(e.target instanceof Element)) {\n      return;\n    }\n    const monitor = this._register(new GlobalPointerMoveMonitor());\n    const origin = dom.getDomNodePagePosition(this.domNode);\n    this.domNode.classList.add('grabbing');\n    if (e.target !== this.slider) {\n      this.onDidChangeTop(e.offsetY);\n    }\n    monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n    const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n      this._onColorFlushed.fire();\n      pointerUpListener.dispose();\n      monitor.stopMonitoring(true);\n      this.domNode.classList.remove('grabbing');\n    }, true);\n  }\n  onDidChangeTop(top) {\n    const value = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.updateSliderPosition(value);\n    this._onDidChange.fire(value);\n  }\n  updateSliderPosition(value) {\n    this.slider.style.top = `${(1 - value) * this.height}px`;\n  }\n}\nclass OpacityStrip extends Strip {\n  constructor(container, model, showingStandaloneColorPicker = false) {\n    super(container, model, showingStandaloneColorPicker);\n    this.domNode.classList.add('opacity-strip');\n    this.onDidChangeColor(this.model.color);\n  }\n  onDidChangeColor(color) {\n    super.onDidChangeColor(color);\n    const {\n      r,\n      g,\n      b\n    } = color.rgba;\n    const opaque = new Color(new RGBA(r, g, b, 1));\n    const transparent = new Color(new RGBA(r, g, b, 0));\n    this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n  }\n  getValue(color) {\n    return color.hsva.a;\n  }\n}\nclass HueStrip extends Strip {\n  constructor(container, model, showingStandaloneColorPicker = false) {\n    super(container, model, showingStandaloneColorPicker);\n    this.domNode.classList.add('hue-strip');\n  }\n  getValue(color) {\n    return 1 - color.hsva.h / 360;\n  }\n}\nexport class InsertButton extends Disposable {\n  constructor(container) {\n    super();\n    this._onClicked = this._register(new Emitter());\n    this.onClicked = this._onClicked.event;\n    this._button = dom.append(container, document.createElement('button'));\n    this._button.classList.add('insert-button');\n    this._button.textContent = 'Insert';\n    this._register(dom.addDisposableListener(this._button, dom.EventType.CLICK, () => {\n      this._onClicked.fire();\n    }));\n  }\n  get button() {\n    return this._button;\n  }\n}\nexport class ColorPickerWidget extends Widget {\n  constructor(container, model, pixelRatio, themeService, standaloneColorPicker = false) {\n    super();\n    this.model = model;\n    this.pixelRatio = pixelRatio;\n    this._register(PixelRatio.getInstance(dom.getWindow(container)).onDidChange(() => this.layout()));\n    this._domNode = $('.colorpicker-widget');\n    container.appendChild(this._domNode);\n    this.header = this._register(new ColorPickerHeader(this._domNode, this.model, themeService, standaloneColorPicker));\n    this.body = this._register(new ColorPickerBody(this._domNode, this.model, this.pixelRatio, standaloneColorPicker));\n  }\n  layout() {\n    this.body.layout();\n  }\n  get domNode() {\n    return this._domNode;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n  constructor(priority, range, initialMousePosX, initialMousePosY) {\n    this.priority = priority;\n    this.range = range;\n    this.initialMousePosX = initialMousePosX;\n    this.initialMousePosY = initialMousePosY;\n    this.type = 1 /* HoverAnchorType.Range */;\n  }\n  equals(other) {\n    return other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range);\n  }\n  canAdoptVisibleHover(lastAnchor, showAtPosition) {\n    return lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber;\n  }\n}\nexport class HoverForeignElementAnchor {\n  constructor(priority, owner, range, initialMousePosX, initialMousePosY, supportsMarkerHover) {\n    this.priority = priority;\n    this.owner = owner;\n    this.range = range;\n    this.initialMousePosX = initialMousePosX;\n    this.initialMousePosY = initialMousePosY;\n    this.supportsMarkerHover = supportsMarkerHover;\n    this.type = 2 /* HoverAnchorType.ForeignElement */;\n  }\n  equals(other) {\n    return other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner;\n  }\n  canAdoptVisibleHover(lastAnchor, showAtPosition) {\n    return lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner;\n  }\n}\n/**\n * Default implementation of IRenderedHoverParts.\n */\nexport class RenderedHoverParts {\n  constructor(renderedHoverParts) {\n    this.renderedHoverParts = renderedHoverParts;\n  }\n  dispose() {\n    for (const part of this.renderedHoverParts) {\n      part.dispose();\n    }\n  }\n}\nexport const HoverParticipantRegistry = new class HoverParticipantRegistry {\n  constructor() {\n    this._participants = [];\n  }\n  register(ctor) {\n    this._participants.push(ctor);\n  }\n  getAll() {\n    return this._participants;\n  }\n}();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../../nls.js';\nexport const SHOW_OR_FOCUS_HOVER_ACTION_ID = 'editor.action.showHover';\nexport const SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID = 'editor.action.showDefinitionPreviewHover';\nexport const SCROLL_UP_HOVER_ACTION_ID = 'editor.action.scrollUpHover';\nexport const SCROLL_DOWN_HOVER_ACTION_ID = 'editor.action.scrollDownHover';\nexport const SCROLL_LEFT_HOVER_ACTION_ID = 'editor.action.scrollLeftHover';\nexport const SCROLL_RIGHT_HOVER_ACTION_ID = 'editor.action.scrollRightHover';\nexport const PAGE_UP_HOVER_ACTION_ID = 'editor.action.pageUpHover';\nexport const PAGE_DOWN_HOVER_ACTION_ID = 'editor.action.pageDownHover';\nexport const GO_TO_TOP_HOVER_ACTION_ID = 'editor.action.goToTopHover';\nexport const GO_TO_BOTTOM_HOVER_ACTION_ID = 'editor.action.goToBottomHover';\nexport const INCREASE_HOVER_VERBOSITY_ACTION_ID = 'editor.action.increaseHoverVerbosityLevel';\nexport const INCREASE_HOVER_VERBOSITY_ACTION_LABEL = nls.localize({\n  key: 'increaseHoverVerbosityLevel',\n  comment: ['Label for action that will increase the hover verbosity level.']\n}, \"Increase Hover Verbosity Level\");\nexport const DECREASE_HOVER_VERBOSITY_ACTION_ID = 'editor.action.decreaseHoverVerbosityLevel';\nexport const DECREASE_HOVER_VERBOSITY_ACTION_LABEL = nls.localize({\n  key: 'decreaseHoverVerbosityLevel',\n  comment: ['Label for action that will decrease the hover verbosity level.']\n}, \"Decrease Hover Verbosity Level\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ContentHoverController_1;\nimport { DECREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID, SHOW_OR_FOCUS_HOVER_ACTION_ID } from './hoverActionIds.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/hintsWidget/inlineCompletionsHintsWidget.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nimport { ContentHoverWidgetWrapper } from './contentHoverWidgetWrapper.js';\nimport './hover.css';\nimport { Emitter } from '../../../../base/common/event.js';\n// sticky hover widget which doesn't disappear on focus out and such\nconst _sticky = false;\nlet ContentHoverController = /*#__PURE__*/(() => {\n  let ContentHoverController = class ContentHoverController extends Disposable {\n    static {\n      ContentHoverController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.contentHover';\n    }\n    constructor(_editor, _instantiationService, _keybindingService) {\n      super();\n      this._editor = _editor;\n      this._instantiationService = _instantiationService;\n      this._keybindingService = _keybindingService;\n      this._onHoverContentsChanged = this._register(new Emitter());\n      this.shouldKeepOpenOnEditorMouseMoveOrLeave = false;\n      this._listenersStore = new DisposableStore();\n      this._hoverState = {\n        mouseDown: false,\n        activatedByDecoratorClick: false\n      };\n      this._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(() => this._reactToEditorMouseMove(this._mouseMoveEvent), 0));\n      this._hookListeners();\n      this._register(this._editor.onDidChangeConfiguration(e => {\n        if (e.hasChanged(60 /* EditorOption.hover */)) {\n          this._unhookListeners();\n          this._hookListeners();\n        }\n      }));\n    }\n    static get(editor) {\n      return editor.getContribution(ContentHoverController_1.ID);\n    }\n    _hookListeners() {\n      const hoverOpts = this._editor.getOption(60 /* EditorOption.hover */);\n      this._hoverSettings = {\n        enabled: hoverOpts.enabled,\n        sticky: hoverOpts.sticky,\n        hidingDelay: hoverOpts.hidingDelay\n      };\n      if (hoverOpts.enabled) {\n        this._listenersStore.add(this._editor.onMouseDown(e => this._onEditorMouseDown(e)));\n        this._listenersStore.add(this._editor.onMouseUp(() => this._onEditorMouseUp()));\n        this._listenersStore.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n        this._listenersStore.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n      } else {\n        this._listenersStore.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n        this._listenersStore.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n      }\n      this._listenersStore.add(this._editor.onMouseLeave(e => this._onEditorMouseLeave(e)));\n      this._listenersStore.add(this._editor.onDidChangeModel(() => {\n        this._cancelScheduler();\n        this._hideWidgets();\n      }));\n      this._listenersStore.add(this._editor.onDidChangeModelContent(() => this._cancelScheduler()));\n      this._listenersStore.add(this._editor.onDidScrollChange(e => this._onEditorScrollChanged(e)));\n    }\n    _unhookListeners() {\n      this._listenersStore.clear();\n    }\n    _cancelScheduler() {\n      this._mouseMoveEvent = undefined;\n      this._reactToEditorMouseMoveRunner.cancel();\n    }\n    _onEditorScrollChanged(e) {\n      if (e.scrollTopChanged || e.scrollLeftChanged) {\n        this._hideWidgets();\n      }\n    }\n    _onEditorMouseDown(mouseEvent) {\n      this._hoverState.mouseDown = true;\n      const shouldNotHideCurrentHoverWidget = this._shouldNotHideCurrentHoverWidget(mouseEvent);\n      if (shouldNotHideCurrentHoverWidget) {\n        return;\n      }\n      this._hideWidgets();\n    }\n    _shouldNotHideCurrentHoverWidget(mouseEvent) {\n      return this._isMouseOnContentHoverWidget(mouseEvent) || this._isContentWidgetResizing();\n    }\n    _isMouseOnContentHoverWidget(mouseEvent) {\n      const contentWidgetNode = this._contentWidget?.getDomNode();\n      if (contentWidgetNode) {\n        return isMousePositionWithinElement(contentWidgetNode, mouseEvent.event.posx, mouseEvent.event.posy);\n      }\n      return false;\n    }\n    _onEditorMouseUp() {\n      this._hoverState.mouseDown = false;\n    }\n    _onEditorMouseLeave(mouseEvent) {\n      if (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n        return;\n      }\n      this._cancelScheduler();\n      const shouldNotHideCurrentHoverWidget = this._shouldNotHideCurrentHoverWidget(mouseEvent);\n      if (shouldNotHideCurrentHoverWidget) {\n        return;\n      }\n      if (_sticky) {\n        return;\n      }\n      this._hideWidgets();\n    }\n    _shouldNotRecomputeCurrentHoverWidget(mouseEvent) {\n      const isHoverSticky = this._hoverSettings.sticky;\n      const isMouseOnStickyContentHoverWidget = (mouseEvent, isHoverSticky) => {\n        const isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n        return isHoverSticky && isMouseOnContentHoverWidget;\n      };\n      const isMouseOnColorPicker = mouseEvent => {\n        const isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n        const isColorPickerVisible = this._contentWidget?.isColorPickerVisible ?? false;\n        return isMouseOnContentHoverWidget && isColorPickerVisible;\n      };\n      // TODO@aiday-mar verify if the following is necessary code\n      const isTextSelectedWithinContentHoverWidget = (mouseEvent, sticky) => {\n        return (sticky && this._contentWidget?.containsNode(mouseEvent.event.browserEvent.view?.document.activeElement) && !mouseEvent.event.browserEvent.view?.getSelection()?.isCollapsed) ?? false;\n      };\n      return isMouseOnStickyContentHoverWidget(mouseEvent, isHoverSticky) || isMouseOnColorPicker(mouseEvent) || isTextSelectedWithinContentHoverWidget(mouseEvent, isHoverSticky);\n    }\n    _onEditorMouseMove(mouseEvent) {\n      if (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n        return;\n      }\n      this._mouseMoveEvent = mouseEvent;\n      if (this._contentWidget?.isFocused || this._contentWidget?.isResizing) {\n        return;\n      }\n      const sticky = this._hoverSettings.sticky;\n      if (sticky && this._contentWidget?.isVisibleFromKeyboard) {\n        // Sticky mode is on and the hover has been shown via keyboard\n        // so moving the mouse has no effect\n        return;\n      }\n      const shouldNotRecomputeCurrentHoverWidget = this._shouldNotRecomputeCurrentHoverWidget(mouseEvent);\n      if (shouldNotRecomputeCurrentHoverWidget) {\n        this._reactToEditorMouseMoveRunner.cancel();\n        return;\n      }\n      const hidingDelay = this._hoverSettings.hidingDelay;\n      const isContentHoverWidgetVisible = this._contentWidget?.isVisible;\n      // If the mouse is not over the widget, and if sticky is on,\n      // then give it a grace period before reacting to the mouse event\n      const shouldRescheduleHoverComputation = isContentHoverWidgetVisible && sticky && hidingDelay > 0;\n      if (shouldRescheduleHoverComputation) {\n        if (!this._reactToEditorMouseMoveRunner.isScheduled()) {\n          this._reactToEditorMouseMoveRunner.schedule(hidingDelay);\n        }\n        return;\n      }\n      this._reactToEditorMouseMove(mouseEvent);\n    }\n    _reactToEditorMouseMove(mouseEvent) {\n      if (!mouseEvent) {\n        return;\n      }\n      const target = mouseEvent.target;\n      const mouseOnDecorator = target.element?.classList.contains('colorpicker-color-decoration');\n      const decoratorActivatedOn = this._editor.getOption(149 /* EditorOption.colorDecoratorsActivatedOn */);\n      const enabled = this._hoverSettings.enabled;\n      const activatedByDecoratorClick = this._hoverState.activatedByDecoratorClick;\n      if (mouseOnDecorator && (decoratorActivatedOn === 'click' && !activatedByDecoratorClick || decoratorActivatedOn === 'hover' && !enabled && !_sticky || decoratorActivatedOn === 'clickAndHover' && !enabled && !activatedByDecoratorClick) || !mouseOnDecorator && !enabled && !activatedByDecoratorClick) {\n        this._hideWidgets();\n        return;\n      }\n      const contentHoverShowsOrWillShow = this._tryShowHoverWidget(mouseEvent);\n      if (contentHoverShowsOrWillShow) {\n        return;\n      }\n      if (_sticky) {\n        return;\n      }\n      this._hideWidgets();\n    }\n    _tryShowHoverWidget(mouseEvent) {\n      const contentWidget = this._getOrCreateContentWidget();\n      return contentWidget.showsOrWillShow(mouseEvent);\n    }\n    _onKeyDown(e) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      const resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\n      // If the beginning of a multi-chord keybinding is pressed,\n      // or the command aims to focus the hover,\n      // set the variable to true, otherwise false\n      const shouldKeepHoverVisible = resolvedKeyboardEvent.kind === 1 /* ResultKind.MoreChordsNeeded */ || resolvedKeyboardEvent.kind === 2 /* ResultKind.KbFound */ && (resolvedKeyboardEvent.commandId === SHOW_OR_FOCUS_HOVER_ACTION_ID || resolvedKeyboardEvent.commandId === INCREASE_HOVER_VERBOSITY_ACTION_ID || resolvedKeyboardEvent.commandId === DECREASE_HOVER_VERBOSITY_ACTION_ID) && this._contentWidget?.isVisible;\n      if (e.keyCode === 5 /* KeyCode.Ctrl */ || e.keyCode === 6 /* KeyCode.Alt */ || e.keyCode === 57 /* KeyCode.Meta */ || e.keyCode === 4 /* KeyCode.Shift */ || shouldKeepHoverVisible) {\n        // Do not hide hover when a modifier key is pressed\n        return;\n      }\n      this._hideWidgets();\n    }\n    _hideWidgets() {\n      if (_sticky) {\n        return;\n      }\n      if (this._hoverState.mouseDown && this._contentWidget?.isColorPickerVisible || InlineSuggestionHintsContentWidget.dropDownVisible) {\n        return;\n      }\n      this._hoverState.activatedByDecoratorClick = false;\n      this._contentWidget?.hide();\n    }\n    _getOrCreateContentWidget() {\n      if (!this._contentWidget) {\n        this._contentWidget = this._instantiationService.createInstance(ContentHoverWidgetWrapper, this._editor);\n        this._listenersStore.add(this._contentWidget.onContentsChanged(() => this._onHoverContentsChanged.fire()));\n      }\n      return this._contentWidget;\n    }\n    showContentHover(range, mode, source, focus, activatedByColorDecoratorClick = false) {\n      this._hoverState.activatedByDecoratorClick = activatedByColorDecoratorClick;\n      this._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\n    }\n    _isContentWidgetResizing() {\n      return this._contentWidget?.widget.isResizing || false;\n    }\n    focusedHoverPartIndex() {\n      return this._getOrCreateContentWidget().focusedHoverPartIndex();\n    }\n    updateHoverVerbosityLevel(action, index, focus) {\n      this._getOrCreateContentWidget().updateHoverVerbosityLevel(action, index, focus);\n    }\n    focus() {\n      this._contentWidget?.focus();\n    }\n    scrollUp() {\n      this._contentWidget?.scrollUp();\n    }\n    scrollDown() {\n      this._contentWidget?.scrollDown();\n    }\n    scrollLeft() {\n      this._contentWidget?.scrollLeft();\n    }\n    scrollRight() {\n      this._contentWidget?.scrollRight();\n    }\n    pageUp() {\n      this._contentWidget?.pageUp();\n    }\n    pageDown() {\n      this._contentWidget?.pageDown();\n    }\n    goToTop() {\n      this._contentWidget?.goToTop();\n    }\n    goToBottom() {\n      this._contentWidget?.goToBottom();\n    }\n    get isColorPickerVisible() {\n      return this._contentWidget?.isColorPickerVisible;\n    }\n    get isHoverVisible() {\n      return this._contentWidget?.isVisible;\n    }\n    dispose() {\n      super.dispose();\n      this._unhookListeners();\n      this._listenersStore.dispose();\n      this._contentWidget?.dispose();\n    }\n  };\n  return ContentHoverController;\n})();\nContentHoverController = ContentHoverController_1 = __decorate([__param(1, IInstantiationService), __param(2, IKeybindingService)], ContentHoverController);\nexport { ContentHoverController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineSuggestionHintsContentWidget_1;\nimport { h } from '../../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from '../../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Action, Separator } from '../../../../../base/common/actions.js';\nimport { equals } from '../../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../../base/common/async.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedObservableWithCache, observableFromEvent } from '../../../../../base/common/observable.js';\nimport { derivedWithStore } from '../../../../../base/common/observableInternal/derived.js';\nimport { OS } from '../../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport './inlineCompletionsHintsWidget.css';\nimport { Position } from '../../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../../common/languages.js';\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId } from '../controller/commandIds.js';\nimport { localize } from '../../../../../nls.js';\nimport { MenuEntryActionViewItem, createAndFillInActionBarActions } from '../../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { WorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nlet InlineCompletionsHintsWidget = class InlineCompletionsHintsWidget extends Disposable {\n  constructor(editor, model, instantiationService) {\n    super();\n    this.editor = editor;\n    this.model = model;\n    this.instantiationService = instantiationService;\n    this.alwaysShowToolbar = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).showToolbar === 'always');\n    this.sessionPosition = undefined;\n    this.position = derived(this, reader => {\n      const ghostText = this.model.read(reader)?.primaryGhostText.read(reader);\n      if (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\n        this.sessionPosition = undefined;\n        return null;\n      }\n      const firstColumn = ghostText.parts[0].column;\n      if (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\n        this.sessionPosition = undefined;\n      }\n      const position = new Position(ghostText.lineNumber, Math.min(firstColumn, this.sessionPosition?.column ?? Number.MAX_SAFE_INTEGER));\n      this.sessionPosition = position;\n      return position;\n    });\n    this._register(autorunWithStore((reader, store) => {\n      /** @description setup content widget */\n      const model = this.model.read(reader);\n      if (!model || !this.alwaysShowToolbar.read(reader)) {\n        return;\n      }\n      const contentWidgetValue = derivedWithStore((reader, store) => {\n        const contentWidget = store.add(this.instantiationService.createInstance(InlineSuggestionHintsContentWidget, this.editor, true, this.position, model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.activeCommands));\n        editor.addContentWidget(contentWidget);\n        store.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\n        store.add(autorun(reader => {\n          /** @description request explicit */\n          const position = this.position.read(reader);\n          if (!position) {\n            return;\n          }\n          if (model.lastTriggerKind.read(reader) !== InlineCompletionTriggerKind.Explicit) {\n            model.triggerExplicitly();\n          }\n        }));\n        return contentWidget;\n      });\n      const hadPosition = derivedObservableWithCache(this, (reader, lastValue) => !!this.position.read(reader) || !!lastValue);\n      store.add(autorun(reader => {\n        if (hadPosition.read(reader)) {\n          contentWidgetValue.read(reader);\n        }\n      }));\n    }));\n  }\n};\nInlineCompletionsHintsWidget = __decorate([__param(2, IInstantiationService)], InlineCompletionsHintsWidget);\nexport { InlineCompletionsHintsWidget };\nconst inlineSuggestionHintsNextIcon = registerIcon('inline-suggestion-hints-next', Codicon.chevronRight, localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst inlineSuggestionHintsPreviousIcon = registerIcon('inline-suggestion-hints-previous', Codicon.chevronLeft, localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet InlineSuggestionHintsContentWidget = /*#__PURE__*/(() => {\n  let InlineSuggestionHintsContentWidget = class InlineSuggestionHintsContentWidget extends Disposable {\n    static {\n      InlineSuggestionHintsContentWidget_1 = this;\n    }\n    static {\n      this._dropDownVisible = false;\n    }\n    static get dropDownVisible() {\n      return this._dropDownVisible;\n    }\n    static {\n      this.id = 0;\n    }\n    createCommandAction(commandId, label, iconClassName) {\n      const action = new Action(commandId, label, iconClassName, true, () => this._commandService.executeCommand(commandId));\n      const kb = this.keybindingService.lookupKeybinding(commandId, this._contextKeyService);\n      let tooltip = label;\n      if (kb) {\n        tooltip = localize({\n          key: 'content',\n          comment: ['A label', 'A keybinding']\n        }, '{0} ({1})', label, kb.getLabel());\n      }\n      action.tooltip = tooltip;\n      return action;\n    }\n    constructor(editor, withBorder, _position, _currentSuggestionIdx, _suggestionCount, _extraCommands, _commandService, instantiationService, keybindingService, _contextKeyService, _menuService) {\n      super();\n      this.editor = editor;\n      this.withBorder = withBorder;\n      this._position = _position;\n      this._currentSuggestionIdx = _currentSuggestionIdx;\n      this._suggestionCount = _suggestionCount;\n      this._extraCommands = _extraCommands;\n      this._commandService = _commandService;\n      this.keybindingService = keybindingService;\n      this._contextKeyService = _contextKeyService;\n      this._menuService = _menuService;\n      this.id = `InlineSuggestionHintsContentWidget${InlineSuggestionHintsContentWidget_1.id++}`;\n      this.allowEditorOverflow = true;\n      this.suppressMouseDown = false;\n      this.nodes = h('div.inlineSuggestionsHints', {\n        className: this.withBorder ? '.withBorder' : ''\n      }, [h('div@toolBar')]);\n      this.previousAction = this.createCommandAction(showPreviousInlineSuggestionActionId, localize('previous', 'Previous'), ThemeIcon.asClassName(inlineSuggestionHintsPreviousIcon));\n      this.availableSuggestionCountAction = new Action('inlineSuggestionHints.availableSuggestionCount', '', undefined, false);\n      this.nextAction = this.createCommandAction(showNextInlineSuggestionActionId, localize('next', 'Next'), ThemeIcon.asClassName(inlineSuggestionHintsNextIcon));\n      // TODO@hediet: deprecate MenuId.InlineCompletionsActions\n      this.inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n      this.clearAvailableSuggestionCountLabelDebounced = this._register(new RunOnceScheduler(() => {\n        this.availableSuggestionCountAction.label = '';\n      }, 100));\n      this.disableButtonsDebounced = this._register(new RunOnceScheduler(() => {\n        this.previousAction.enabled = this.nextAction.enabled = false;\n      }, 100));\n      this.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, MenuId.InlineSuggestionToolbar, {\n        menuOptions: {\n          renderShortTitle: true\n        },\n        toolbarOptions: {\n          primaryGroup: g => g.startsWith('primary')\n        },\n        actionViewItemProvider: (action, options) => {\n          if (action instanceof MenuItemAction) {\n            return instantiationService.createInstance(StatusBarViewItem, action, undefined);\n          }\n          if (action === this.availableSuggestionCountAction) {\n            const a = new ActionViewItemWithClassName(undefined, action, {\n              label: true,\n              icon: false\n            });\n            a.setClass('availableSuggestionCount');\n            return a;\n          }\n          return undefined;\n        },\n        telemetrySource: 'InlineSuggestionToolbar'\n      }));\n      this.toolBar.setPrependedPrimaryActions([this.previousAction, this.availableSuggestionCountAction, this.nextAction]);\n      this._register(this.toolBar.onDidChangeDropdownVisibility(e => {\n        InlineSuggestionHintsContentWidget_1._dropDownVisible = e;\n      }));\n      this._register(autorun(reader => {\n        /** @description update position */\n        this._position.read(reader);\n        this.editor.layoutContentWidget(this);\n      }));\n      this._register(autorun(reader => {\n        /** @description counts */\n        const suggestionCount = this._suggestionCount.read(reader);\n        const currentSuggestionIdx = this._currentSuggestionIdx.read(reader);\n        if (suggestionCount !== undefined) {\n          this.clearAvailableSuggestionCountLabelDebounced.cancel();\n          this.availableSuggestionCountAction.label = `${currentSuggestionIdx + 1}/${suggestionCount}`;\n        } else {\n          this.clearAvailableSuggestionCountLabelDebounced.schedule();\n        }\n        if (suggestionCount !== undefined && suggestionCount > 1) {\n          this.disableButtonsDebounced.cancel();\n          this.previousAction.enabled = this.nextAction.enabled = true;\n        } else {\n          this.disableButtonsDebounced.schedule();\n        }\n      }));\n      this._register(autorun(reader => {\n        /** @description extra commands */\n        const extraCommands = this._extraCommands.read(reader);\n        const extraActions = extraCommands.map(c => ({\n          class: undefined,\n          id: c.id,\n          enabled: true,\n          tooltip: c.tooltip || '',\n          label: c.title,\n          run: event => {\n            return this._commandService.executeCommand(c.id);\n          }\n        }));\n        for (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\n          for (const action of group) {\n            if (action instanceof MenuItemAction) {\n              extraActions.push(action);\n            }\n          }\n        }\n        if (extraActions.length > 0) {\n          extraActions.unshift(new Separator());\n        }\n        this.toolBar.setAdditionalSecondaryActions(extraActions);\n      }));\n    }\n    getId() {\n      return this.id;\n    }\n    getDomNode() {\n      return this.nodes.root;\n    }\n    getPosition() {\n      return {\n        position: this._position.get(),\n        preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\n        positionAffinity: 3 /* PositionAffinity.LeftOfInjectedText */\n      };\n    }\n  };\n  return InlineSuggestionHintsContentWidget;\n})();\nInlineSuggestionHintsContentWidget = InlineSuggestionHintsContentWidget_1 = __decorate([__param(6, ICommandService), __param(7, IInstantiationService), __param(8, IKeybindingService), __param(9, IContextKeyService), __param(10, IMenuService)], InlineSuggestionHintsContentWidget);\nexport { InlineSuggestionHintsContentWidget };\nclass ActionViewItemWithClassName extends ActionViewItem {\n  constructor() {\n    super(...arguments);\n    this._className = undefined;\n  }\n  setClass(className) {\n    this._className = className;\n  }\n  render(container) {\n    super.render(container);\n    if (this._className) {\n      container.classList.add(this._className);\n    }\n  }\n  updateTooltip() {\n    // NOOP, disable tooltip\n  }\n}\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n  updateLabel() {\n    const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n    if (!kb) {\n      return super.updateLabel();\n    }\n    if (this.label) {\n      const div = h('div.keybinding').root;\n      const k = this._register(new KeybindingLabel(div, OS, {\n        disableTitle: true,\n        ...unthemedKeybindingLabelOptions\n      }));\n      k.set(kb);\n      this.label.textContent = this._action.label;\n      this.label.appendChild(div);\n      this.label.classList.add('inlineSuggestionStatusBarItemLabel');\n    }\n  }\n  updateTooltip() {\n    // NOOP, disable tooltip\n  }\n}\nlet CustomizedMenuWorkbenchToolBar = class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\n  constructor(container, menuId, options2, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService) {\n    super(container, {\n      resetMenu: menuId,\n      ...options2\n    }, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService);\n    this.menuId = menuId;\n    this.options2 = options2;\n    this.menuService = menuService;\n    this.contextKeyService = contextKeyService;\n    this.menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, {\n      emitEventsForSubmenuChanges: true\n    }));\n    this.additionalActions = [];\n    this.prependedPrimaryActions = [];\n    this._store.add(this.menu.onDidChange(() => this.updateToolbar()));\n    this.updateToolbar();\n  }\n  updateToolbar() {\n    const primary = [];\n    const secondary = [];\n    createAndFillInActionBarActions(this.menu, this.options2?.menuOptions, {\n      primary,\n      secondary\n    }, this.options2?.toolbarOptions?.primaryGroup, this.options2?.toolbarOptions?.shouldInlineSubmenu, this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions);\n    secondary.push(...this.additionalActions);\n    primary.unshift(...this.prependedPrimaryActions);\n    this.setActions(primary, secondary);\n  }\n  setPrependedPrimaryActions(actions) {\n    if (equals(this.prependedPrimaryActions, actions, (a, b) => a === b)) {\n      return;\n    }\n    this.prependedPrimaryActions = actions;\n    this.updateToolbar();\n  }\n  setAdditionalSecondaryActions(actions) {\n    if (equals(this.additionalActions, actions, (a, b) => a === b)) {\n      return;\n    }\n    this.additionalActions = actions;\n    this.updateToolbar();\n  }\n};\nCustomizedMenuWorkbenchToolBar = __decorate([__param(3, IMenuService), __param(4, IContextKeyService), __param(5, IContextMenuService), __param(6, IKeybindingService), __param(7, ICommandService), __param(8, ITelemetryService)], CustomizedMenuWorkbenchToolBar);\nexport { CustomizedMenuWorkbenchToolBar };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\nexport const showPreviousInlineSuggestionActionId = 'editor.action.inlineSuggest.showPrevious';\nexport const showNextInlineSuggestionActionId = 'editor.action.inlineSuggest.showNext';","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nexport function isMousePositionWithinElement(element, posx, posy) {\n  const elementRect = dom.getDomNodePagePosition(element);\n  if (posx < elementRect.left || posx > elementRect.left + elementRect.width || posy < elementRect.top || posy > elementRect.top + elementRect.height) {\n    return false;\n  }\n  return true;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ContentHoverWidget } from './contentHoverWidget.js';\nimport { ContentHoverComputer } from './contentHoverComputer.js';\nimport { HoverResult } from './contentHoverTypes.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { RenderedContentHover } from './contentHoverRendered.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nlet ContentHoverWidgetWrapper = class ContentHoverWidgetWrapper extends Disposable {\n  constructor(_editor, _instantiationService, _keybindingService) {\n    super();\n    this._editor = _editor;\n    this._instantiationService = _instantiationService;\n    this._keybindingService = _keybindingService;\n    this._currentResult = null;\n    this._onContentsChanged = this._register(new Emitter());\n    this.onContentsChanged = this._onContentsChanged.event;\n    this._contentHoverWidget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n    this._participants = this._initializeHoverParticipants();\n    this._computer = new ContentHoverComputer(this._editor, this._participants);\n    this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n    this._registerListeners();\n  }\n  _initializeHoverParticipants() {\n    const participants = [];\n    for (const participant of HoverParticipantRegistry.getAll()) {\n      const participantInstance = this._instantiationService.createInstance(participant, this._editor);\n      participants.push(participantInstance);\n    }\n    participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n    this._register(this._contentHoverWidget.onDidResize(() => {\n      this._participants.forEach(participant => participant.handleResize?.());\n    }));\n    return participants;\n  }\n  _registerListeners() {\n    this._register(this._hoverOperation.onResult(result => {\n      if (!this._computer.anchor) {\n        // invalid state, ignore result\n        return;\n      }\n      const messages = result.hasLoadingMessage ? this._addLoadingMessage(result.value) : result.value;\n      this._withResult(new HoverResult(this._computer.anchor, messages, result.isComplete));\n    }));\n    const contentHoverWidgetNode = this._contentHoverWidget.getDomNode();\n    this._register(dom.addStandardDisposableListener(contentHoverWidgetNode, 'keydown', e => {\n      if (e.equals(9 /* KeyCode.Escape */)) {\n        this.hide();\n      }\n    }));\n    this._register(dom.addStandardDisposableListener(contentHoverWidgetNode, 'mouseleave', e => {\n      this._onMouseLeave(e);\n    }));\n    this._register(TokenizationRegistry.onDidChange(() => {\n      if (this._contentHoverWidget.position && this._currentResult) {\n        this._setCurrentResult(this._currentResult); // render again\n      }\n    }));\n  }\n  /**\n   * Returns true if the hover shows now or will show.\n   */\n  _startShowingOrUpdateHover(anchor, mode, source, focus, mouseEvent) {\n    const contentHoverIsVisible = this._contentHoverWidget.position && this._currentResult;\n    if (!contentHoverIsVisible) {\n      if (anchor) {\n        this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n        return true;\n      }\n      return false;\n    }\n    const isHoverSticky = this._editor.getOption(60 /* EditorOption.hover */).sticky;\n    const isMouseGettingCloser = mouseEvent && this._contentHoverWidget.isMouseGettingCloser(mouseEvent.event.posx, mouseEvent.event.posy);\n    const isHoverStickyAndIsMouseGettingCloser = isHoverSticky && isMouseGettingCloser;\n    // The mouse is getting closer to the hover, so we will keep the hover untouched\n    // But we will kick off a hover update at the new anchor, insisting on keeping the hover visible.\n    if (isHoverStickyAndIsMouseGettingCloser) {\n      if (anchor) {\n        this._startHoverOperationIfNecessary(anchor, mode, source, focus, true);\n      }\n      return true;\n    }\n    // If mouse is not getting closer and anchor not defined, hide the hover\n    if (!anchor) {\n      this._setCurrentResult(null);\n      return false;\n    }\n    // If mouse if not getting closer and anchor is defined, and the new anchor is the same as the previous anchor\n    const currentAnchorEqualsPreviousAnchor = this._currentResult.anchor.equals(anchor);\n    if (currentAnchorEqualsPreviousAnchor) {\n      return true;\n    }\n    // If mouse if not getting closer and anchor is defined, and the new anchor is not compatible with the previous anchor\n    const currentAnchorCompatibleWithPreviousAnchor = anchor.canAdoptVisibleHover(this._currentResult.anchor, this._contentHoverWidget.position);\n    if (!currentAnchorCompatibleWithPreviousAnchor) {\n      this._setCurrentResult(null);\n      this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n      return true;\n    }\n    // We aren't getting any closer to the hover, so we will filter existing results\n    // and keep those which also apply to the new anchor.\n    this._setCurrentResult(this._currentResult.filter(anchor));\n    this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n    return true;\n  }\n  _startHoverOperationIfNecessary(anchor, mode, source, focus, insistOnKeepingHoverVisible) {\n    const currentAnchorEqualToPreviousHover = this._computer.anchor && this._computer.anchor.equals(anchor);\n    if (currentAnchorEqualToPreviousHover) {\n      return;\n    }\n    this._hoverOperation.cancel();\n    this._computer.anchor = anchor;\n    this._computer.shouldFocus = focus;\n    this._computer.source = source;\n    this._computer.insistOnKeepingHoverVisible = insistOnKeepingHoverVisible;\n    this._hoverOperation.start(mode);\n  }\n  _setCurrentResult(hoverResult) {\n    let currentHoverResult = hoverResult;\n    const currentResultEqualToPreviousResult = this._currentResult === currentHoverResult;\n    if (currentResultEqualToPreviousResult) {\n      return;\n    }\n    const currentHoverResultIsEmpty = currentHoverResult && currentHoverResult.hoverParts.length === 0;\n    if (currentHoverResultIsEmpty) {\n      currentHoverResult = null;\n    }\n    this._currentResult = currentHoverResult;\n    if (this._currentResult) {\n      this._showHover(this._currentResult);\n    } else {\n      this._hideHover();\n    }\n  }\n  _addLoadingMessage(result) {\n    if (!this._computer.anchor) {\n      return result;\n    }\n    for (const participant of this._participants) {\n      if (!participant.createLoadingMessage) {\n        continue;\n      }\n      const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n      if (!loadingMessage) {\n        continue;\n      }\n      return result.slice(0).concat([loadingMessage]);\n    }\n    return result;\n  }\n  _withResult(hoverResult) {\n    const previousHoverIsVisibleWithCompleteResult = this._contentHoverWidget.position && this._currentResult && this._currentResult.isComplete;\n    if (!previousHoverIsVisibleWithCompleteResult) {\n      this._setCurrentResult(hoverResult);\n    }\n    // The hover is visible with a previous complete result.\n    const isCurrentHoverResultComplete = hoverResult.isComplete;\n    if (!isCurrentHoverResultComplete) {\n      // Instead of rendering the new partial result, we wait for the result to be complete.\n      return;\n    }\n    const currentHoverResultIsEmpty = hoverResult.hoverParts.length === 0;\n    const insistOnKeepingPreviousHoverVisible = this._computer.insistOnKeepingHoverVisible;\n    const shouldKeepPreviousHoverVisible = currentHoverResultIsEmpty && insistOnKeepingPreviousHoverVisible;\n    if (shouldKeepPreviousHoverVisible) {\n      // The hover would now hide normally, so we'll keep the previous messages\n      return;\n    }\n    this._setCurrentResult(hoverResult);\n  }\n  _showHover(hoverResult) {\n    const context = this._getHoverContext();\n    this._renderedContentHover = new RenderedContentHover(this._editor, hoverResult, this._participants, this._computer, context, this._keybindingService);\n    if (this._renderedContentHover.domNodeHasChildren) {\n      this._contentHoverWidget.show(this._renderedContentHover);\n    } else {\n      this._renderedContentHover.dispose();\n    }\n  }\n  _hideHover() {\n    this._contentHoverWidget.hide();\n  }\n  _getHoverContext() {\n    const hide = () => {\n      this.hide();\n    };\n    const onContentsChanged = () => {\n      this._onContentsChanged.fire();\n      this._contentHoverWidget.onContentsChanged();\n    };\n    const setMinimumDimensions = dimensions => {\n      this._contentHoverWidget.setMinimumDimensions(dimensions);\n    };\n    return {\n      hide,\n      onContentsChanged,\n      setMinimumDimensions\n    };\n  }\n  showsOrWillShow(mouseEvent) {\n    const isContentWidgetResizing = this._contentHoverWidget.isResizing;\n    if (isContentWidgetResizing) {\n      return true;\n    }\n    const anchorCandidates = this._findHoverAnchorCandidates(mouseEvent);\n    const anchorCandidatesExist = anchorCandidates.length > 0;\n    if (!anchorCandidatesExist) {\n      return this._startShowingOrUpdateHover(null, 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\n    }\n    const anchor = anchorCandidates[0];\n    return this._startShowingOrUpdateHover(anchor, 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\n  }\n  _findHoverAnchorCandidates(mouseEvent) {\n    const anchorCandidates = [];\n    for (const participant of this._participants) {\n      if (!participant.suggestHoverAnchor) {\n        continue;\n      }\n      const anchor = participant.suggestHoverAnchor(mouseEvent);\n      if (!anchor) {\n        continue;\n      }\n      anchorCandidates.push(anchor);\n    }\n    const target = mouseEvent.target;\n    switch (target.type) {\n      case 6 /* MouseTargetType.CONTENT_TEXT */:\n        {\n          anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n          break;\n        }\n      case 7 /* MouseTargetType.CONTENT_EMPTY */:\n        {\n          const epsilon = this._editor.getOption(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\n          // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n          const mouseIsWithinLinesAndCloseToHover = !target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon;\n          if (!mouseIsWithinLinesAndCloseToHover) {\n            break;\n          }\n          anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n          break;\n        }\n    }\n    anchorCandidates.sort((a, b) => b.priority - a.priority);\n    return anchorCandidates;\n  }\n  _onMouseLeave(e) {\n    const editorDomNode = this._editor.getDomNode();\n    const isMousePositionOutsideOfEditor = !editorDomNode || !isMousePositionWithinElement(editorDomNode, e.x, e.y);\n    if (isMousePositionOutsideOfEditor) {\n      this.hide();\n    }\n  }\n  startShowingAtRange(range, mode, source, focus) {\n    this._startShowingOrUpdateHover(new HoverRangeAnchor(0, range, undefined, undefined), mode, source, focus, null);\n  }\n  async updateHoverVerbosityLevel(action, index, focus) {\n    this._renderedContentHover?.updateHoverVerbosityLevel(action, index, focus);\n  }\n  focusedHoverPartIndex() {\n    return this._renderedContentHover?.focusedHoverPartIndex ?? -1;\n  }\n  containsNode(node) {\n    return node ? this._contentHoverWidget.getDomNode().contains(node) : false;\n  }\n  focus() {\n    this._contentHoverWidget.focus();\n  }\n  scrollUp() {\n    this._contentHoverWidget.scrollUp();\n  }\n  scrollDown() {\n    this._contentHoverWidget.scrollDown();\n  }\n  scrollLeft() {\n    this._contentHoverWidget.scrollLeft();\n  }\n  scrollRight() {\n    this._contentHoverWidget.scrollRight();\n  }\n  pageUp() {\n    this._contentHoverWidget.pageUp();\n  }\n  pageDown() {\n    this._contentHoverWidget.pageDown();\n  }\n  goToTop() {\n    this._contentHoverWidget.goToTop();\n  }\n  goToBottom() {\n    this._contentHoverWidget.goToBottom();\n  }\n  hide() {\n    this._computer.anchor = null;\n    this._hoverOperation.cancel();\n    this._setCurrentResult(null);\n  }\n  getDomNode() {\n    return this._contentHoverWidget.getDomNode();\n  }\n  get isColorPickerVisible() {\n    return this._renderedContentHover?.isColorPickerVisible() ?? false;\n  }\n  get isVisibleFromKeyboard() {\n    return this._contentHoverWidget.isVisibleFromKeyboard;\n  }\n  get isVisible() {\n    return this._contentHoverWidget.isVisible;\n  }\n  get isFocused() {\n    return this._contentHoverWidget.isFocused;\n  }\n  get isResizing() {\n    return this._contentHoverWidget.isResizing;\n  }\n  get widget() {\n    return this._contentHoverWidget;\n  }\n};\nContentHoverWidgetWrapper = __decorate([__param(1, IInstantiationService), __param(2, IKeybindingService)], ContentHoverWidgetWrapper);\nexport { ContentHoverWidgetWrapper };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n  constructor(value, isComplete, hasLoadingMessage) {\n    this.value = value;\n    this.isComplete = isComplete;\n    this.hasLoadingMessage = hasLoadingMessage;\n  }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n  constructor(_editor, _computer) {\n    super();\n    this._editor = _editor;\n    this._computer = _computer;\n    this._onResult = this._register(new Emitter());\n    this.onResult = this._onResult.event;\n    this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n    this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n    this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n    this._state = 0 /* HoverOperationState.Idle */;\n    this._asyncIterable = null;\n    this._asyncIterableDone = false;\n    this._result = [];\n  }\n  dispose() {\n    if (this._asyncIterable) {\n      this._asyncIterable.cancel();\n      this._asyncIterable = null;\n    }\n    super.dispose();\n  }\n  get _hoverTime() {\n    return this._editor.getOption(60 /* EditorOption.hover */).delay;\n  }\n  get _firstWaitTime() {\n    return this._hoverTime / 2;\n  }\n  get _secondWaitTime() {\n    return this._hoverTime - this._firstWaitTime;\n  }\n  get _loadingMessageTime() {\n    return 3 * this._hoverTime;\n  }\n  _setState(state, fireResult = true) {\n    this._state = state;\n    if (fireResult) {\n      this._fireResult();\n    }\n  }\n  _triggerAsyncComputation() {\n    this._setState(2 /* HoverOperationState.SecondWait */);\n    this._secondWaitScheduler.schedule(this._secondWaitTime);\n    if (this._computer.computeAsync) {\n      this._asyncIterableDone = false;\n      this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n      (async () => {\n        try {\n          for await (const item of this._asyncIterable) {\n            if (item) {\n              this._result.push(item);\n              this._fireResult();\n            }\n          }\n          this._asyncIterableDone = true;\n          if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\n            this._setState(0 /* HoverOperationState.Idle */);\n          }\n        } catch (e) {\n          onUnexpectedError(e);\n        }\n      })();\n    } else {\n      this._asyncIterableDone = true;\n    }\n  }\n  _triggerSyncComputation() {\n    if (this._computer.computeSync) {\n      this._result = this._result.concat(this._computer.computeSync());\n    }\n    this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\n  }\n  _triggerLoadingMessage() {\n    if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\n      this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n    }\n  }\n  _fireResult() {\n    if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\n      // Do not send out results before the hover time\n      return;\n    }\n    const isComplete = this._state === 0 /* HoverOperationState.Idle */;\n    const hasLoadingMessage = this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */;\n    this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n  }\n  start(mode) {\n    if (mode === 0 /* HoverStartMode.Delayed */) {\n      if (this._state === 0 /* HoverOperationState.Idle */) {\n        this._setState(1 /* HoverOperationState.FirstWait */);\n        this._firstWaitScheduler.schedule(this._firstWaitTime);\n        this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n      }\n    } else {\n      switch (this._state) {\n        case 0 /* HoverOperationState.Idle */:\n          this._triggerAsyncComputation();\n          this._secondWaitScheduler.cancel();\n          this._triggerSyncComputation();\n          break;\n        case 2 /* HoverOperationState.SecondWait */:\n          this._secondWaitScheduler.cancel();\n          this._triggerSyncComputation();\n          break;\n      }\n    }\n  }\n  cancel() {\n    this._firstWaitScheduler.cancel();\n    this._secondWaitScheduler.cancel();\n    this._loadingMessageScheduler.cancel();\n    if (this._asyncIterable) {\n      this._asyncIterable.cancel();\n      this._asyncIterable = null;\n    }\n    this._result = [];\n    this._setState(0 /* HoverOperationState.Idle */, false);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ContentHoverWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ResizableContentWidget } from './resizableContentWidget.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getHoverAccessibleViewHint, HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Emitter } from '../../../../base/common/event.js';\nconst HORIZONTAL_SCROLLING_BY = 30;\nconst CONTAINER_HEIGHT_PADDING = 6;\nlet ContentHoverWidget = class ContentHoverWidget extends ResizableContentWidget {\n  static {\n    ContentHoverWidget_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.resizableContentHoverWidget';\n  }\n  static {\n    this._lastDimensions = new dom.Dimension(0, 0);\n  }\n  get isVisibleFromKeyboard() {\n    return this._renderedHover?.source === 1 /* HoverStartSource.Keyboard */;\n  }\n  get isVisible() {\n    return this._hoverVisibleKey.get() ?? false;\n  }\n  get isFocused() {\n    return this._hoverFocusedKey.get() ?? false;\n  }\n  constructor(editor, contextKeyService, _configurationService, _accessibilityService, _keybindingService) {\n    const minimumHeight = editor.getOption(67 /* EditorOption.lineHeight */) + 8;\n    const minimumWidth = 150;\n    const minimumSize = new dom.Dimension(minimumWidth, minimumHeight);\n    super(editor, minimumSize);\n    this._configurationService = _configurationService;\n    this._accessibilityService = _accessibilityService;\n    this._keybindingService = _keybindingService;\n    this._hover = this._register(new HoverWidget());\n    this._onDidResize = this._register(new Emitter());\n    this.onDidResize = this._onDidResize.event;\n    this._minimumSize = minimumSize;\n    this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(contextKeyService);\n    this._hoverFocusedKey = EditorContextKeys.hoverFocused.bindTo(contextKeyService);\n    dom.append(this._resizableNode.domNode, this._hover.containerDomNode);\n    this._resizableNode.domNode.style.zIndex = '50';\n    this._register(this._editor.onDidLayoutChange(() => {\n      if (this.isVisible) {\n        this._updateMaxDimensions();\n      }\n    }));\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n        this._updateFont();\n      }\n    }));\n    const focusTracker = this._register(dom.trackFocus(this._resizableNode.domNode));\n    this._register(focusTracker.onDidFocus(() => {\n      this._hoverFocusedKey.set(true);\n    }));\n    this._register(focusTracker.onDidBlur(() => {\n      this._hoverFocusedKey.set(false);\n    }));\n    this._setRenderedHover(undefined);\n    this._editor.addContentWidget(this);\n  }\n  dispose() {\n    super.dispose();\n    this._renderedHover?.dispose();\n    this._editor.removeContentWidget(this);\n  }\n  getId() {\n    return ContentHoverWidget_1.ID;\n  }\n  static _applyDimensions(container, width, height) {\n    const transformedWidth = typeof width === 'number' ? `${width}px` : width;\n    const transformedHeight = typeof height === 'number' ? `${height}px` : height;\n    container.style.width = transformedWidth;\n    container.style.height = transformedHeight;\n  }\n  _setContentsDomNodeDimensions(width, height) {\n    const contentsDomNode = this._hover.contentsDomNode;\n    return ContentHoverWidget_1._applyDimensions(contentsDomNode, width, height);\n  }\n  _setContainerDomNodeDimensions(width, height) {\n    const containerDomNode = this._hover.containerDomNode;\n    return ContentHoverWidget_1._applyDimensions(containerDomNode, width, height);\n  }\n  _setHoverWidgetDimensions(width, height) {\n    this._setContentsDomNodeDimensions(width, height);\n    this._setContainerDomNodeDimensions(width, height);\n    this._layoutContentWidget();\n  }\n  static _applyMaxDimensions(container, width, height) {\n    const transformedWidth = typeof width === 'number' ? `${width}px` : width;\n    const transformedHeight = typeof height === 'number' ? `${height}px` : height;\n    container.style.maxWidth = transformedWidth;\n    container.style.maxHeight = transformedHeight;\n  }\n  _setHoverWidgetMaxDimensions(width, height) {\n    ContentHoverWidget_1._applyMaxDimensions(this._hover.contentsDomNode, width, height);\n    ContentHoverWidget_1._applyMaxDimensions(this._hover.containerDomNode, width, height);\n    this._hover.containerDomNode.style.setProperty('--vscode-hover-maxWidth', typeof width === 'number' ? `${width}px` : width);\n    this._layoutContentWidget();\n  }\n  _setAdjustedHoverWidgetDimensions(size) {\n    this._setHoverWidgetMaxDimensions('none', 'none');\n    const width = size.width;\n    const height = size.height;\n    this._setHoverWidgetDimensions(width, height);\n  }\n  _updateResizableNodeMaxDimensions() {\n    const maxRenderingWidth = this._findMaximumRenderingWidth() ?? Infinity;\n    const maxRenderingHeight = this._findMaximumRenderingHeight() ?? Infinity;\n    this._resizableNode.maxSize = new dom.Dimension(maxRenderingWidth, maxRenderingHeight);\n    this._setHoverWidgetMaxDimensions(maxRenderingWidth, maxRenderingHeight);\n  }\n  _resize(size) {\n    ContentHoverWidget_1._lastDimensions = new dom.Dimension(size.width, size.height);\n    this._setAdjustedHoverWidgetDimensions(size);\n    this._resizableNode.layout(size.height, size.width);\n    this._updateResizableNodeMaxDimensions();\n    this._hover.scrollbar.scanDomNode();\n    this._editor.layoutContentWidget(this);\n    this._onDidResize.fire();\n  }\n  _findAvailableSpaceVertically() {\n    const position = this._renderedHover?.showAtPosition;\n    if (!position) {\n      return;\n    }\n    return this._positionPreference === 1 /* ContentWidgetPositionPreference.ABOVE */ ? this._availableVerticalSpaceAbove(position) : this._availableVerticalSpaceBelow(position);\n  }\n  _findMaximumRenderingHeight() {\n    const availableSpace = this._findAvailableSpaceVertically();\n    if (!availableSpace) {\n      return;\n    }\n    // Padding needed in order to stop the resizing down to a smaller height\n    let maximumHeight = CONTAINER_HEIGHT_PADDING;\n    Array.from(this._hover.contentsDomNode.children).forEach(hoverPart => {\n      maximumHeight += hoverPart.clientHeight;\n    });\n    return Math.min(availableSpace, maximumHeight);\n  }\n  _isHoverTextOverflowing() {\n    // To find out if the text is overflowing, we will disable wrapping, check the widths, and then re-enable wrapping\n    this._hover.containerDomNode.style.setProperty('--vscode-hover-whiteSpace', 'nowrap');\n    this._hover.containerDomNode.style.setProperty('--vscode-hover-sourceWhiteSpace', 'nowrap');\n    const overflowing = Array.from(this._hover.contentsDomNode.children).some(hoverElement => {\n      return hoverElement.scrollWidth > hoverElement.clientWidth;\n    });\n    this._hover.containerDomNode.style.removeProperty('--vscode-hover-whiteSpace');\n    this._hover.containerDomNode.style.removeProperty('--vscode-hover-sourceWhiteSpace');\n    return overflowing;\n  }\n  _findMaximumRenderingWidth() {\n    if (!this._editor || !this._editor.hasModel()) {\n      return;\n    }\n    const overflowing = this._isHoverTextOverflowing();\n    const initialWidth = typeof this._contentWidth === 'undefined' ? 0 : this._contentWidth - 2 // - 2 for the borders\n    ;\n    if (overflowing || this._hover.containerDomNode.clientWidth < initialWidth) {\n      const bodyBoxWidth = dom.getClientArea(this._hover.containerDomNode.ownerDocument.body).width;\n      const horizontalPadding = 14;\n      return bodyBoxWidth - horizontalPadding;\n    } else {\n      return this._hover.containerDomNode.clientWidth + 2;\n    }\n  }\n  isMouseGettingCloser(posx, posy) {\n    if (!this._renderedHover) {\n      return false;\n    }\n    if (this._renderedHover.initialMousePosX === undefined || this._renderedHover.initialMousePosY === undefined) {\n      this._renderedHover.initialMousePosX = posx;\n      this._renderedHover.initialMousePosY = posy;\n      return false;\n    }\n    const widgetRect = dom.getDomNodePagePosition(this.getDomNode());\n    if (this._renderedHover.closestMouseDistance === undefined) {\n      this._renderedHover.closestMouseDistance = computeDistanceFromPointToRectangle(this._renderedHover.initialMousePosX, this._renderedHover.initialMousePosY, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n    }\n    const distance = computeDistanceFromPointToRectangle(posx, posy, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n    if (distance > this._renderedHover.closestMouseDistance + 4 /* tolerance of 4 pixels */) {\n      // The mouse is getting farther away\n      return false;\n    }\n    this._renderedHover.closestMouseDistance = Math.min(this._renderedHover.closestMouseDistance, distance);\n    return true;\n  }\n  _setRenderedHover(renderedHover) {\n    this._renderedHover?.dispose();\n    this._renderedHover = renderedHover;\n    this._hoverVisibleKey.set(!!renderedHover);\n    this._hover.containerDomNode.classList.toggle('hidden', !renderedHover);\n  }\n  _updateFont() {\n    const {\n      fontSize,\n      lineHeight\n    } = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    const contentsDomNode = this._hover.contentsDomNode;\n    contentsDomNode.style.fontSize = `${fontSize}px`;\n    contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n    const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n    codeClasses.forEach(node => this._editor.applyFontInfo(node));\n  }\n  _updateContent(node) {\n    const contentsDomNode = this._hover.contentsDomNode;\n    contentsDomNode.style.paddingBottom = '';\n    contentsDomNode.textContent = '';\n    contentsDomNode.appendChild(node);\n  }\n  _layoutContentWidget() {\n    this._editor.layoutContentWidget(this);\n    this._hover.onContentsChanged();\n  }\n  _updateMaxDimensions() {\n    const height = Math.max(this._editor.getLayoutInfo().height / 4, 250, ContentHoverWidget_1._lastDimensions.height);\n    const width = Math.max(this._editor.getLayoutInfo().width * 0.66, 500, ContentHoverWidget_1._lastDimensions.width);\n    this._setHoverWidgetMaxDimensions(width, height);\n  }\n  _render(renderedHover) {\n    this._setRenderedHover(renderedHover);\n    this._updateFont();\n    this._updateContent(renderedHover.domNode);\n    this._updateMaxDimensions();\n    this.onContentsChanged();\n    // Simply force a synchronous render on the editor\n    // such that the widget does not really render with left = '0px'\n    this._editor.render();\n  }\n  getPosition() {\n    if (!this._renderedHover) {\n      return null;\n    }\n    return {\n      position: this._renderedHover.showAtPosition,\n      secondaryPosition: this._renderedHover.showAtSecondaryPosition,\n      positionAffinity: this._renderedHover.shouldAppearBeforeContent ? 3 /* PositionAffinity.LeftOfInjectedText */ : undefined,\n      preference: [this._positionPreference ?? 1 /* ContentWidgetPositionPreference.ABOVE */]\n    };\n  }\n  show(renderedHover) {\n    if (!this._editor || !this._editor.hasModel()) {\n      return;\n    }\n    this._render(renderedHover);\n    const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n    const widgetPosition = renderedHover.showAtPosition;\n    this._positionPreference = this._findPositionPreference(widgetHeight, widgetPosition) ?? 1 /* ContentWidgetPositionPreference.ABOVE */;\n    // See https://github.com/microsoft/vscode/issues/140339\n    // TODO: Doing a second layout of the hover after force rendering the editor\n    this.onContentsChanged();\n    if (renderedHover.shouldFocus) {\n      this._hover.containerDomNode.focus();\n    }\n    this._onDidResize.fire();\n    // The aria label overrides the label, so if we add to it, add the contents of the hover\n    const hoverFocused = this._hover.containerDomNode.ownerDocument.activeElement === this._hover.containerDomNode;\n    const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), this._keybindingService.lookupKeybinding('editor.action.accessibleView')?.getAriaLabel() ?? '');\n    if (accessibleViewHint) {\n      this._hover.contentsDomNode.ariaLabel = this._hover.contentsDomNode.textContent + ', ' + accessibleViewHint;\n    }\n  }\n  hide() {\n    if (!this._renderedHover) {\n      return;\n    }\n    const hoverStoleFocus = this._renderedHover.shouldFocus || this._hoverFocusedKey.get();\n    this._setRenderedHover(undefined);\n    this._resizableNode.maxSize = new dom.Dimension(Infinity, Infinity);\n    this._resizableNode.clearSashHoverState();\n    this._hoverFocusedKey.set(false);\n    this._editor.layoutContentWidget(this);\n    if (hoverStoleFocus) {\n      this._editor.focus();\n    }\n  }\n  _removeConstraintsRenderNormally() {\n    // Added because otherwise the initial size of the hover content is smaller than should be\n    const layoutInfo = this._editor.getLayoutInfo();\n    this._resizableNode.layout(layoutInfo.height, layoutInfo.width);\n    this._setHoverWidgetDimensions('auto', 'auto');\n  }\n  setMinimumDimensions(dimensions) {\n    // We combine the new minimum dimensions with the previous ones\n    this._minimumSize = new dom.Dimension(Math.max(this._minimumSize.width, dimensions.width), Math.max(this._minimumSize.height, dimensions.height));\n    this._updateMinimumWidth();\n  }\n  _updateMinimumWidth() {\n    const width = typeof this._contentWidth === 'undefined' ? this._minimumSize.width : Math.min(this._contentWidth, this._minimumSize.width);\n    // We want to avoid that the hover is artificially large, so we use the content width as minimum width\n    this._resizableNode.minSize = new dom.Dimension(width, this._minimumSize.height);\n  }\n  onContentsChanged() {\n    this._removeConstraintsRenderNormally();\n    const containerDomNode = this._hover.containerDomNode;\n    let height = dom.getTotalHeight(containerDomNode);\n    let width = dom.getTotalWidth(containerDomNode);\n    this._resizableNode.layout(height, width);\n    this._setHoverWidgetDimensions(width, height);\n    height = dom.getTotalHeight(containerDomNode);\n    width = dom.getTotalWidth(containerDomNode);\n    this._contentWidth = width;\n    this._updateMinimumWidth();\n    this._resizableNode.layout(height, width);\n    if (this._renderedHover?.showAtPosition) {\n      const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n      this._positionPreference = this._findPositionPreference(widgetHeight, this._renderedHover.showAtPosition);\n    }\n    this._layoutContentWidget();\n  }\n  focus() {\n    this._hover.containerDomNode.focus();\n  }\n  scrollUp() {\n    const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n    const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: scrollTop - fontInfo.lineHeight\n    });\n  }\n  scrollDown() {\n    const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n    const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: scrollTop + fontInfo.lineHeight\n    });\n  }\n  scrollLeft() {\n    const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n    this._hover.scrollbar.setScrollPosition({\n      scrollLeft: scrollLeft - HORIZONTAL_SCROLLING_BY\n    });\n  }\n  scrollRight() {\n    const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n    this._hover.scrollbar.setScrollPosition({\n      scrollLeft: scrollLeft + HORIZONTAL_SCROLLING_BY\n    });\n  }\n  pageUp() {\n    const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n    const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: scrollTop - scrollHeight\n    });\n  }\n  pageDown() {\n    const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n    const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: scrollTop + scrollHeight\n    });\n  }\n  goToTop() {\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: 0\n    });\n  }\n  goToBottom() {\n    this._hover.scrollbar.setScrollPosition({\n      scrollTop: this._hover.scrollbar.getScrollDimensions().scrollHeight\n    });\n  }\n};\nContentHoverWidget = ContentHoverWidget_1 = __decorate([__param(1, IContextKeyService), __param(2, IConfigurationService), __param(3, IAccessibilityService), __param(4, IKeybindingService)], ContentHoverWidget);\nexport { ContentHoverWidget };\nfunction computeDistanceFromPointToRectangle(pointX, pointY, left, top, width, height) {\n  const x = left + width / 2; // x center of rectangle\n  const y = top + height / 2; // y center of rectangle\n  const dx = Math.max(Math.abs(pointX - x) - width / 2, 0);\n  const dy = Math.max(Math.abs(pointY - y) - height / 2, 0);\n  return Math.sqrt(dx * dx + dy * dy);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n  constructor() {\n    this._onDidWillResize = new Emitter();\n    this.onDidWillResize = this._onDidWillResize.event;\n    this._onDidResize = new Emitter();\n    this.onDidResize = this._onDidResize.event;\n    this._sashListener = new DisposableStore();\n    this._size = new Dimension(0, 0);\n    this._minSize = new Dimension(0, 0);\n    this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n    this.domNode = document.createElement('div');\n    this._eastSash = new Sash(this.domNode, {\n      getVerticalSashLeft: () => this._size.width\n    }, {\n      orientation: 0 /* Orientation.VERTICAL */\n    });\n    this._westSash = new Sash(this.domNode, {\n      getVerticalSashLeft: () => 0\n    }, {\n      orientation: 0 /* Orientation.VERTICAL */\n    });\n    this._northSash = new Sash(this.domNode, {\n      getHorizontalSashTop: () => 0\n    }, {\n      orientation: 1 /* Orientation.HORIZONTAL */,\n      orthogonalEdge: OrthogonalEdge.North\n    });\n    this._southSash = new Sash(this.domNode, {\n      getHorizontalSashTop: () => this._size.height\n    }, {\n      orientation: 1 /* Orientation.HORIZONTAL */,\n      orthogonalEdge: OrthogonalEdge.South\n    });\n    this._northSash.orthogonalStartSash = this._westSash;\n    this._northSash.orthogonalEndSash = this._eastSash;\n    this._southSash.orthogonalStartSash = this._westSash;\n    this._southSash.orthogonalEndSash = this._eastSash;\n    let currentSize;\n    let deltaY = 0;\n    let deltaX = 0;\n    this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n      if (currentSize === undefined) {\n        this._onDidWillResize.fire();\n        currentSize = this._size;\n        deltaY = 0;\n        deltaX = 0;\n      }\n    }));\n    this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n      if (currentSize !== undefined) {\n        currentSize = undefined;\n        deltaY = 0;\n        deltaX = 0;\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: true\n        });\n      }\n    }));\n    this._sashListener.add(this._eastSash.onDidChange(e => {\n      if (currentSize) {\n        deltaX = e.currentX - e.startX;\n        this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: false,\n          east: true\n        });\n      }\n    }));\n    this._sashListener.add(this._westSash.onDidChange(e => {\n      if (currentSize) {\n        deltaX = -(e.currentX - e.startX);\n        this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: false,\n          west: true\n        });\n      }\n    }));\n    this._sashListener.add(this._northSash.onDidChange(e => {\n      if (currentSize) {\n        deltaY = -(e.currentY - e.startY);\n        this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: false,\n          north: true\n        });\n      }\n    }));\n    this._sashListener.add(this._southSash.onDidChange(e => {\n      if (currentSize) {\n        deltaY = e.currentY - e.startY;\n        this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: false,\n          south: true\n        });\n      }\n    }));\n    this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n      if (this._preferredSize) {\n        this.layout(this._size.height, this._preferredSize.width);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: true\n        });\n      }\n    }));\n    this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n      if (this._preferredSize) {\n        this.layout(this._preferredSize.height, this._size.width);\n        this._onDidResize.fire({\n          dimension: this._size,\n          done: true\n        });\n      }\n    }));\n  }\n  dispose() {\n    this._northSash.dispose();\n    this._southSash.dispose();\n    this._eastSash.dispose();\n    this._westSash.dispose();\n    this._sashListener.dispose();\n    this._onDidResize.dispose();\n    this._onDidWillResize.dispose();\n    this.domNode.remove();\n  }\n  enableSashes(north, east, south, west) {\n    this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n  }\n  layout(height = this.size.height, width = this.size.width) {\n    const {\n      height: minHeight,\n      width: minWidth\n    } = this._minSize;\n    const {\n      height: maxHeight,\n      width: maxWidth\n    } = this._maxSize;\n    height = Math.max(minHeight, Math.min(maxHeight, height));\n    width = Math.max(minWidth, Math.min(maxWidth, width));\n    const newSize = new Dimension(width, height);\n    if (!Dimension.equals(newSize, this._size)) {\n      this.domNode.style.height = height + 'px';\n      this.domNode.style.width = width + 'px';\n      this._size = newSize;\n      this._northSash.layout();\n      this._eastSash.layout();\n      this._southSash.layout();\n      this._westSash.layout();\n    }\n  }\n  clearSashHoverState() {\n    this._eastSash.clearSashHoverState();\n    this._westSash.clearSashHoverState();\n    this._northSash.clearSashHoverState();\n    this._southSash.clearSashHoverState();\n  }\n  get size() {\n    return this._size;\n  }\n  set maxSize(value) {\n    this._maxSize = value;\n  }\n  get maxSize() {\n    return this._maxSize;\n  }\n  set minSize(value) {\n    this._minSize = value;\n  }\n  get minSize() {\n    return this._minSize;\n  }\n  set preferredSize(value) {\n    this._preferredSize = value;\n  }\n  get preferredSize() {\n    return this._preferredSize;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as dom from '../../../../base/browser/dom.js';\nconst TOP_HEIGHT = 30;\nconst BOTTOM_HEIGHT = 24;\nexport class ResizableContentWidget extends Disposable {\n  constructor(_editor, minimumSize = new dom.Dimension(10, 10)) {\n    super();\n    this._editor = _editor;\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this._resizableNode = this._register(new ResizableHTMLElement());\n    this._contentPosition = null;\n    this._isResizing = false;\n    this._resizableNode.domNode.style.position = 'absolute';\n    this._resizableNode.minSize = dom.Dimension.lift(minimumSize);\n    this._resizableNode.layout(minimumSize.height, minimumSize.width);\n    this._resizableNode.enableSashes(true, true, true, true);\n    this._register(this._resizableNode.onDidResize(e => {\n      this._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\n      if (e.done) {\n        this._isResizing = false;\n      }\n    }));\n    this._register(this._resizableNode.onDidWillResize(() => {\n      this._isResizing = true;\n    }));\n  }\n  get isResizing() {\n    return this._isResizing;\n  }\n  getDomNode() {\n    return this._resizableNode.domNode;\n  }\n  getPosition() {\n    return this._contentPosition;\n  }\n  get position() {\n    return this._contentPosition?.position ? Position.lift(this._contentPosition.position) : undefined;\n  }\n  _availableVerticalSpaceAbove(position) {\n    const editorDomNode = this._editor.getDomNode();\n    const mouseBox = this._editor.getScrolledVisiblePosition(position);\n    if (!editorDomNode || !mouseBox) {\n      return;\n    }\n    const editorBox = dom.getDomNodePagePosition(editorDomNode);\n    return editorBox.top + mouseBox.top - TOP_HEIGHT;\n  }\n  _availableVerticalSpaceBelow(position) {\n    const editorDomNode = this._editor.getDomNode();\n    const mouseBox = this._editor.getScrolledVisiblePosition(position);\n    if (!editorDomNode || !mouseBox) {\n      return;\n    }\n    const editorBox = dom.getDomNodePagePosition(editorDomNode);\n    const bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\n    const mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\n    return bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\n  }\n  _findPositionPreference(widgetHeight, showAtPosition) {\n    const maxHeightBelow = Math.min(this._availableVerticalSpaceBelow(showAtPosition) ?? Infinity, widgetHeight);\n    const maxHeightAbove = Math.min(this._availableVerticalSpaceAbove(showAtPosition) ?? Infinity, widgetHeight);\n    const maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\n    const height = Math.min(widgetHeight, maxHeight);\n    let renderingAbove;\n    if (this._editor.getOption(60 /* EditorOption.hover */).above) {\n      renderingAbove = height <= maxHeightAbove ? 1 /* ContentWidgetPositionPreference.ABOVE */ : 2 /* ContentWidgetPositionPreference.BELOW */;\n    } else {\n      renderingAbove = height <= maxHeightBelow ? 2 /* ContentWidgetPositionPreference.BELOW */ : 1 /* ContentWidgetPositionPreference.ABOVE */;\n    }\n    if (renderingAbove === 1 /* ContentWidgetPositionPreference.ABOVE */) {\n      this._resizableNode.enableSashes(true, true, false, false);\n    } else {\n      this._resizableNode.enableSashes(false, true, true, false);\n    }\n    return renderingAbove;\n  }\n  _resize(dimension) {\n    this._resizableNode.layout(dimension.height, dimension.width);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nexport class ContentHoverComputer {\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    this._anchor = value;\n  }\n  get shouldFocus() {\n    return this._shouldFocus;\n  }\n  set shouldFocus(value) {\n    this._shouldFocus = value;\n  }\n  get source() {\n    return this._source;\n  }\n  set source(value) {\n    this._source = value;\n  }\n  get insistOnKeepingHoverVisible() {\n    return this._insistOnKeepingHoverVisible;\n  }\n  set insistOnKeepingHoverVisible(value) {\n    this._insistOnKeepingHoverVisible = value;\n  }\n  constructor(_editor, _participants) {\n    this._editor = _editor;\n    this._participants = _participants;\n    this._anchor = null;\n    this._shouldFocus = false;\n    this._source = 0 /* HoverStartSource.Mouse */;\n    this._insistOnKeepingHoverVisible = false;\n  }\n  static _getLineDecorations(editor, anchor) {\n    if (anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\n      return [];\n    }\n    const model = editor.getModel();\n    const lineNumber = anchor.range.startLineNumber;\n    if (lineNumber > model.getLineCount()) {\n      // invalid line\n      return [];\n    }\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    return editor.getLineDecorations(lineNumber).filter(d => {\n      if (d.options.isWholeLine) {\n        return true;\n      }\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n      if (d.options.showIfCollapsed) {\n        // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n        if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n          return false;\n        }\n      } else {\n        if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n  computeAsync(token) {\n    const anchor = this._anchor;\n    if (!this._editor.hasModel() || !anchor) {\n      return AsyncIterableObject.EMPTY;\n    }\n    const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n    return AsyncIterableObject.merge(this._participants.map(participant => {\n      if (!participant.computeAsync) {\n        return AsyncIterableObject.EMPTY;\n      }\n      return participant.computeAsync(anchor, lineDecorations, token);\n    }));\n  }\n  computeSync() {\n    if (!this._editor.hasModel() || !this._anchor) {\n      return [];\n    }\n    const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n    let result = [];\n    for (const participant of this._participants) {\n      result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n    }\n    return coalesce(result);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverResult {\n  constructor(anchor, hoverParts, isComplete) {\n    this.anchor = anchor;\n    this.hoverParts = hoverParts;\n    this.isComplete = isComplete;\n  }\n  filter(anchor) {\n    const filteredHoverParts = this.hoverParts.filter(m => m.isValidForHoverAnchor(anchor));\n    if (filteredHoverParts.length === this.hoverParts.length) {\n      return this;\n    }\n    return new FilteredHoverResult(this, this.anchor, filteredHoverParts, this.isComplete);\n  }\n}\nexport class FilteredHoverResult extends HoverResult {\n  constructor(original, anchor, messages, isComplete) {\n    super(anchor, messages, isComplete);\n    this.original = original;\n  }\n  filter(anchor) {\n    return this.original.filter(anchor);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RenderedHoverParts } from './hoverTypes.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { EditorHoverStatusBar } from './contentHoverStatusBar.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { ColorHoverParticipant } from '../../colorPicker/browser/colorHoverParticipant.js';\nimport { InlayHintsHover } from '../../inlayHints/browser/inlayHintsHover.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nexport class RenderedContentHover extends Disposable {\n  constructor(editor, hoverResult, participants, computer, context, keybindingService) {\n    super();\n    const anchor = hoverResult.anchor;\n    const parts = hoverResult.hoverParts;\n    this._renderedHoverParts = this._register(new RenderedContentHoverParts(editor, participants, parts, keybindingService, context));\n    const {\n      showAtPosition,\n      showAtSecondaryPosition\n    } = RenderedContentHover.computeHoverPositions(editor, anchor.range, parts);\n    this.shouldAppearBeforeContent = parts.some(m => m.isBeforeContent);\n    this.showAtPosition = showAtPosition;\n    this.showAtSecondaryPosition = showAtSecondaryPosition;\n    this.initialMousePosX = anchor.initialMousePosX;\n    this.initialMousePosY = anchor.initialMousePosY;\n    this.shouldFocus = computer.shouldFocus;\n    this.source = computer.source;\n  }\n  get domNode() {\n    return this._renderedHoverParts.domNode;\n  }\n  get domNodeHasChildren() {\n    return this._renderedHoverParts.domNodeHasChildren;\n  }\n  get focusedHoverPartIndex() {\n    return this._renderedHoverParts.focusedHoverPartIndex;\n  }\n  async updateHoverVerbosityLevel(action, index, focus) {\n    this._renderedHoverParts.updateHoverVerbosityLevel(action, index, focus);\n  }\n  isColorPickerVisible() {\n    return this._renderedHoverParts.isColorPickerVisible();\n  }\n  static computeHoverPositions(editor, anchorRange, hoverParts) {\n    let startColumnBoundary = 1;\n    if (editor.hasModel()) {\n      // Ensure the range is on the current view line\n      const viewModel = editor._getViewModel();\n      const coordinatesConverter = viewModel.coordinatesConverter;\n      const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\n      const anchorViewMinColumn = viewModel.getLineMinColumn(anchorViewRange.startLineNumber);\n      const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, anchorViewMinColumn);\n      startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\n    }\n    // The anchor range is always on a single line\n    const anchorStartLineNumber = anchorRange.startLineNumber;\n    let secondaryPositionColumn = anchorRange.startColumn;\n    let forceShowAtRange;\n    for (const hoverPart of hoverParts) {\n      const hoverPartRange = hoverPart.range;\n      const hoverPartRangeOnAnchorStartLine = hoverPartRange.startLineNumber === anchorStartLineNumber;\n      const hoverPartRangeOnAnchorEndLine = hoverPartRange.endLineNumber === anchorStartLineNumber;\n      const hoverPartRangeIsOnAnchorLine = hoverPartRangeOnAnchorStartLine && hoverPartRangeOnAnchorEndLine;\n      if (hoverPartRangeIsOnAnchorLine) {\n        // this message has a range that is completely sitting on the line of the anchor\n        const hoverPartStartColumn = hoverPartRange.startColumn;\n        const minSecondaryPositionColumn = Math.min(secondaryPositionColumn, hoverPartStartColumn);\n        secondaryPositionColumn = Math.max(minSecondaryPositionColumn, startColumnBoundary);\n      }\n      if (hoverPart.forceShowAtRange) {\n        forceShowAtRange = hoverPartRange;\n      }\n    }\n    let showAtPosition;\n    let showAtSecondaryPosition;\n    if (forceShowAtRange) {\n      const forceShowAtPosition = forceShowAtRange.getStartPosition();\n      showAtPosition = forceShowAtPosition;\n      showAtSecondaryPosition = forceShowAtPosition;\n    } else {\n      showAtPosition = anchorRange.getStartPosition();\n      showAtSecondaryPosition = new Position(anchorStartLineNumber, secondaryPositionColumn);\n    }\n    return {\n      showAtPosition,\n      showAtSecondaryPosition\n    };\n  }\n}\nclass RenderedStatusBar {\n  constructor(fragment, _statusBar) {\n    this._statusBar = _statusBar;\n    fragment.appendChild(this._statusBar.hoverElement);\n  }\n  get hoverElement() {\n    return this._statusBar.hoverElement;\n  }\n  get actions() {\n    return this._statusBar.actions;\n  }\n  dispose() {\n    this._statusBar.dispose();\n  }\n}\nclass RenderedContentHoverParts extends Disposable {\n  static {\n    this._DECORATION_OPTIONS = ModelDecorationOptions.register({\n      description: 'content-hover-highlight',\n      className: 'hoverHighlight'\n    });\n  }\n  constructor(editor, participants, hoverParts, keybindingService, context) {\n    super();\n    this._renderedParts = [];\n    this._focusedHoverPartIndex = -1;\n    this._context = context;\n    this._fragment = document.createDocumentFragment();\n    this._register(this._renderParts(participants, hoverParts, context, keybindingService));\n    this._register(this._registerListenersOnRenderedParts());\n    this._register(this._createEditorDecorations(editor, hoverParts));\n    this._updateMarkdownAndColorParticipantInfo(participants);\n  }\n  _createEditorDecorations(editor, hoverParts) {\n    if (hoverParts.length === 0) {\n      return Disposable.None;\n    }\n    let highlightRange = hoverParts[0].range;\n    for (const hoverPart of hoverParts) {\n      const hoverPartRange = hoverPart.range;\n      highlightRange = Range.plusRange(highlightRange, hoverPartRange);\n    }\n    const highlightDecoration = editor.createDecorationsCollection();\n    highlightDecoration.set([{\n      range: highlightRange,\n      options: RenderedContentHoverParts._DECORATION_OPTIONS\n    }]);\n    return toDisposable(() => {\n      highlightDecoration.clear();\n    });\n  }\n  _renderParts(participants, hoverParts, hoverContext, keybindingService) {\n    const statusBar = new EditorHoverStatusBar(keybindingService);\n    const hoverRenderingContext = {\n      fragment: this._fragment,\n      statusBar,\n      ...hoverContext\n    };\n    const disposables = new DisposableStore();\n    for (const participant of participants) {\n      const renderedHoverParts = this._renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext);\n      disposables.add(renderedHoverParts);\n      for (const renderedHoverPart of renderedHoverParts.renderedHoverParts) {\n        this._renderedParts.push({\n          type: 'hoverPart',\n          participant,\n          hoverPart: renderedHoverPart.hoverPart,\n          hoverElement: renderedHoverPart.hoverElement\n        });\n      }\n    }\n    const renderedStatusBar = this._renderStatusBar(this._fragment, statusBar);\n    if (renderedStatusBar) {\n      disposables.add(renderedStatusBar);\n      this._renderedParts.push({\n        type: 'statusBar',\n        hoverElement: renderedStatusBar.hoverElement,\n        actions: renderedStatusBar.actions\n      });\n    }\n    return toDisposable(() => {\n      disposables.dispose();\n    });\n  }\n  _renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext) {\n    const hoverPartsForParticipant = hoverParts.filter(hoverPart => hoverPart.owner === participant);\n    const hasHoverPartsForParticipant = hoverPartsForParticipant.length > 0;\n    if (!hasHoverPartsForParticipant) {\n      return new RenderedHoverParts([]);\n    }\n    return participant.renderHoverParts(hoverRenderingContext, hoverPartsForParticipant);\n  }\n  _renderStatusBar(fragment, statusBar) {\n    if (!statusBar.hasContent) {\n      return undefined;\n    }\n    return new RenderedStatusBar(fragment, statusBar);\n  }\n  _registerListenersOnRenderedParts() {\n    const disposables = new DisposableStore();\n    this._renderedParts.forEach((renderedPart, index) => {\n      const element = renderedPart.hoverElement;\n      element.tabIndex = 0;\n      disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_IN, event => {\n        event.stopPropagation();\n        this._focusedHoverPartIndex = index;\n      }));\n      disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_OUT, event => {\n        event.stopPropagation();\n        this._focusedHoverPartIndex = -1;\n      }));\n    });\n    return disposables;\n  }\n  _updateMarkdownAndColorParticipantInfo(participants) {\n    const markdownHoverParticipant = participants.find(p => {\n      return p instanceof MarkdownHoverParticipant && !(p instanceof InlayHintsHover);\n    });\n    if (markdownHoverParticipant) {\n      this._markdownHoverParticipant = markdownHoverParticipant;\n    }\n    this._colorHoverParticipant = participants.find(p => p instanceof ColorHoverParticipant);\n  }\n  async updateHoverVerbosityLevel(action, index, focus) {\n    if (!this._markdownHoverParticipant) {\n      return;\n    }\n    const normalizedMarkdownHoverIndex = this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant, index);\n    if (normalizedMarkdownHoverIndex === undefined) {\n      return;\n    }\n    const renderedPart = await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(action, normalizedMarkdownHoverIndex, focus);\n    if (!renderedPart) {\n      return;\n    }\n    this._renderedParts[index] = {\n      type: 'hoverPart',\n      participant: this._markdownHoverParticipant,\n      hoverPart: renderedPart.hoverPart,\n      hoverElement: renderedPart.hoverElement\n    };\n    this._context.onContentsChanged();\n  }\n  isColorPickerVisible() {\n    return this._colorHoverParticipant?.isColorPickerVisible() ?? false;\n  }\n  _normalizedIndexToMarkdownHoverIndexRange(markdownHoverParticipant, index) {\n    const renderedPart = this._renderedParts[index];\n    if (!renderedPart || renderedPart.type !== 'hoverPart') {\n      return undefined;\n    }\n    const isHoverPartMarkdownHover = renderedPart.participant === markdownHoverParticipant;\n    if (!isHoverPartMarkdownHover) {\n      return undefined;\n    }\n    const firstIndexOfMarkdownHovers = this._renderedParts.findIndex(renderedPart => renderedPart.type === 'hoverPart' && renderedPart.participant === markdownHoverParticipant);\n    if (firstIndexOfMarkdownHovers === -1) {\n      throw new BugIndicatingError();\n    }\n    return index - firstIndexOfMarkdownHovers;\n  }\n  get domNode() {\n    return this._fragment;\n  }\n  get domNodeHasChildren() {\n    return this._fragment.hasChildNodes();\n  }\n  get focusedHoverPartIndex() {\n    return this._focusedHoverPartIndex;\n  }\n}","var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nconst $ = dom.$;\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n  get hasContent() {\n    return this._hasContent;\n  }\n  constructor(_keybindingService) {\n    super();\n    this._keybindingService = _keybindingService;\n    this.actions = [];\n    this._hasContent = false;\n    this.hoverElement = $('div.hover-row.status-bar');\n    this.hoverElement.tabIndex = 0;\n    this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n  }\n  addAction(actionOptions) {\n    const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n    const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n    this._hasContent = true;\n    const action = this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    this.actions.push(action);\n    return action;\n  }\n  append(element) {\n    const result = dom.append(this.actionsElement, element);\n    this._hasContent = true;\n    return result;\n  }\n};\nEditorHoverStatusBar = __decorate([__param(0, IKeybindingService)], EditorHoverStatusBar);\nexport { EditorHoverStatusBar };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray, compareBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { DECREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID } from './hoverActionIds.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { RenderedHoverParts } from './hoverTypes.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { HoverVerbosityAction } from '../../../common/languages.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ClickAction, KeyDownAction } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IHoverService, WorkbenchHoverDelegate } from '../../../../platform/hover/browser/hover.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { getHoverProviderResultsAsAsyncIterable } from './getHover.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nconst $ = dom.$;\nconst increaseHoverVerbosityIcon = registerIcon('hover-increase-verbosity', Codicon.add, nls.localize('increaseHoverVerbosity', 'Icon for increaseing hover verbosity.'));\nconst decreaseHoverVerbosityIcon = registerIcon('hover-decrease-verbosity', Codicon.remove, nls.localize('decreaseHoverVerbosity', 'Icon for decreasing hover verbosity.'));\nexport class MarkdownHover {\n  constructor(owner, range, contents, isBeforeContent, ordinal, source = undefined) {\n    this.owner = owner;\n    this.range = range;\n    this.contents = contents;\n    this.isBeforeContent = isBeforeContent;\n    this.ordinal = ordinal;\n    this.source = source;\n  }\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1 /* HoverAnchorType.Range */ && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n}\nclass HoverSource {\n  constructor(hover, hoverProvider, hoverPosition) {\n    this.hover = hover;\n    this.hoverProvider = hoverProvider;\n    this.hoverPosition = hoverPosition;\n  }\n  supportsVerbosityAction(hoverVerbosityAction) {\n    switch (hoverVerbosityAction) {\n      case HoverVerbosityAction.Increase:\n        return this.hover.canIncreaseVerbosity ?? false;\n      case HoverVerbosityAction.Decrease:\n        return this.hover.canDecreaseVerbosity ?? false;\n    }\n  }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n  constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService, _keybindingService, _hoverService, _commandService) {\n    this._editor = _editor;\n    this._languageService = _languageService;\n    this._openerService = _openerService;\n    this._configurationService = _configurationService;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._keybindingService = _keybindingService;\n    this._hoverService = _hoverService;\n    this._commandService = _commandService;\n    this.hoverOrdinal = 3;\n  }\n  createLoadingMessage(anchor) {\n    return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], false, 2000);\n  }\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n      return [];\n    }\n    const model = this._editor.getModel();\n    const lineNumber = anchor.range.startLineNumber;\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    const result = [];\n    let index = 1000;\n    const lineLength = model.getLineLength(lineNumber);\n    const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n    const stopRenderingLineAfter = this._editor.getOption(118 /* EditorOption.stopRenderingLineAfter */);\n    const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n      overrideIdentifier: languageId\n    });\n    let stopRenderingMessage = false;\n    if (stopRenderingLineAfter >= 0 && lineLength > stopRenderingLineAfter && anchor.range.startColumn >= stopRenderingLineAfter) {\n      stopRenderingMessage = true;\n      result.push(new MarkdownHover(this, anchor.range, [{\n        value: nls.localize('stopped rendering', \"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.\")\n      }], false, index++));\n    }\n    if (!stopRenderingMessage && typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n      result.push(new MarkdownHover(this, anchor.range, [{\n        value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n      }], false, index++));\n    }\n    let isBeforeContent = false;\n    for (const d of lineDecorations) {\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n      const hoverMessage = d.options.hoverMessage;\n      if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n        continue;\n      }\n      if (d.options.beforeContentClassName) {\n        isBeforeContent = true;\n      }\n      const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n      result.push(new MarkdownHover(this, range, asArray(hoverMessage), isBeforeContent, index++));\n    }\n    return result;\n  }\n  computeAsync(anchor, lineDecorations, token) {\n    if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n      return AsyncIterableObject.EMPTY;\n    }\n    const model = this._editor.getModel();\n    const hoverProviderRegistry = this._languageFeaturesService.hoverProvider;\n    if (!hoverProviderRegistry.has(model)) {\n      return AsyncIterableObject.EMPTY;\n    }\n    const markdownHovers = this._getMarkdownHovers(hoverProviderRegistry, model, anchor, token);\n    return markdownHovers;\n  }\n  _getMarkdownHovers(hoverProviderRegistry, model, anchor, token) {\n    const position = anchor.range.getStartPosition();\n    const hoverProviderResults = getHoverProviderResultsAsAsyncIterable(hoverProviderRegistry, model, position, token);\n    const markdownHovers = hoverProviderResults.filter(item => !isEmptyMarkdownString(item.hover.contents)).map(item => {\n      const range = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n      const hoverSource = new HoverSource(item.hover, item.provider, position);\n      return new MarkdownHover(this, range, item.hover.contents, false, item.ordinal, hoverSource);\n    });\n    return markdownHovers;\n  }\n  renderHoverParts(context, hoverParts) {\n    this._renderedHoverParts = new MarkdownRenderedHoverParts(hoverParts, context.fragment, this, this._editor, this._languageService, this._openerService, this._commandService, this._keybindingService, this._hoverService, this._configurationService, context.onContentsChanged);\n    return this._renderedHoverParts;\n  }\n  updateMarkdownHoverVerbosityLevel(action, index, focus) {\n    return Promise.resolve(this._renderedHoverParts?.updateMarkdownHoverPartVerbosityLevel(action, index, focus));\n  }\n};\nMarkdownHoverParticipant = __decorate([__param(1, ILanguageService), __param(2, IOpenerService), __param(3, IConfigurationService), __param(4, ILanguageFeaturesService), __param(5, IKeybindingService), __param(6, IHoverService), __param(7, ICommandService)], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nclass RenderedMarkdownHoverPart {\n  constructor(hoverPart, hoverElement, disposables) {\n    this.hoverPart = hoverPart;\n    this.hoverElement = hoverElement;\n    this.disposables = disposables;\n  }\n  dispose() {\n    this.disposables.dispose();\n  }\n}\nclass MarkdownRenderedHoverParts {\n  constructor(hoverParts, hoverPartsContainer, _hoverParticipant, _editor, _languageService, _openerService, _commandService, _keybindingService, _hoverService, _configurationService, _onFinishedRendering) {\n    this._hoverParticipant = _hoverParticipant;\n    this._editor = _editor;\n    this._languageService = _languageService;\n    this._openerService = _openerService;\n    this._commandService = _commandService;\n    this._keybindingService = _keybindingService;\n    this._hoverService = _hoverService;\n    this._configurationService = _configurationService;\n    this._onFinishedRendering = _onFinishedRendering;\n    this._ongoingHoverOperations = new Map();\n    this._disposables = new DisposableStore();\n    this.renderedHoverParts = this._renderHoverParts(hoverParts, hoverPartsContainer, this._onFinishedRendering);\n    this._disposables.add(toDisposable(() => {\n      this.renderedHoverParts.forEach(renderedHoverPart => {\n        renderedHoverPart.dispose();\n      });\n      this._ongoingHoverOperations.forEach(operation => {\n        operation.tokenSource.dispose(true);\n      });\n    }));\n  }\n  _renderHoverParts(hoverParts, hoverPartsContainer, onFinishedRendering) {\n    hoverParts.sort(compareBy(hover => hover.ordinal, numberComparator));\n    return hoverParts.map(hoverPart => {\n      const renderedHoverPart = this._renderHoverPart(hoverPart, onFinishedRendering);\n      hoverPartsContainer.appendChild(renderedHoverPart.hoverElement);\n      return renderedHoverPart;\n    });\n  }\n  _renderHoverPart(hoverPart, onFinishedRendering) {\n    const renderedMarkdownPart = this._renderMarkdownHover(hoverPart, onFinishedRendering);\n    const renderedMarkdownElement = renderedMarkdownPart.hoverElement;\n    const hoverSource = hoverPart.source;\n    const disposables = new DisposableStore();\n    disposables.add(renderedMarkdownPart);\n    if (!hoverSource) {\n      return new RenderedMarkdownHoverPart(hoverPart, renderedMarkdownElement, disposables);\n    }\n    const canIncreaseVerbosity = hoverSource.supportsVerbosityAction(HoverVerbosityAction.Increase);\n    const canDecreaseVerbosity = hoverSource.supportsVerbosityAction(HoverVerbosityAction.Decrease);\n    if (!canIncreaseVerbosity && !canDecreaseVerbosity) {\n      return new RenderedMarkdownHoverPart(hoverPart, renderedMarkdownElement, disposables);\n    }\n    const actionsContainer = $('div.verbosity-actions');\n    renderedMarkdownElement.prepend(actionsContainer);\n    disposables.add(this._renderHoverExpansionAction(actionsContainer, HoverVerbosityAction.Increase, canIncreaseVerbosity));\n    disposables.add(this._renderHoverExpansionAction(actionsContainer, HoverVerbosityAction.Decrease, canDecreaseVerbosity));\n    return new RenderedMarkdownHoverPart(hoverPart, renderedMarkdownElement, disposables);\n  }\n  _renderMarkdownHover(markdownHover, onFinishedRendering) {\n    const renderedMarkdownHover = renderMarkdownInContainer(this._editor, markdownHover, this._languageService, this._openerService, onFinishedRendering);\n    return renderedMarkdownHover;\n  }\n  _renderHoverExpansionAction(container, action, actionEnabled) {\n    const store = new DisposableStore();\n    const isActionIncrease = action === HoverVerbosityAction.Increase;\n    const actionElement = dom.append(container, $(ThemeIcon.asCSSSelector(isActionIncrease ? increaseHoverVerbosityIcon : decreaseHoverVerbosityIcon)));\n    actionElement.tabIndex = 0;\n    const hoverDelegate = new WorkbenchHoverDelegate('mouse', false, {\n      target: container,\n      position: {\n        hoverPosition: 0 /* HoverPosition.LEFT */\n      }\n    }, this._configurationService, this._hoverService);\n    store.add(this._hoverService.setupManagedHover(hoverDelegate, actionElement, labelForHoverVerbosityAction(this._keybindingService, action)));\n    if (!actionEnabled) {\n      actionElement.classList.add('disabled');\n      return store;\n    }\n    actionElement.classList.add('enabled');\n    const actionFunction = () => this._commandService.executeCommand(action === HoverVerbosityAction.Increase ? INCREASE_HOVER_VERBOSITY_ACTION_ID : DECREASE_HOVER_VERBOSITY_ACTION_ID);\n    store.add(new ClickAction(actionElement, actionFunction));\n    store.add(new KeyDownAction(actionElement, actionFunction, [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]));\n    return store;\n  }\n  async updateMarkdownHoverPartVerbosityLevel(action, index, focus = true) {\n    const model = this._editor.getModel();\n    if (!model) {\n      return undefined;\n    }\n    const hoverRenderedPart = this._getRenderedHoverPartAtIndex(index);\n    const hoverSource = hoverRenderedPart?.hoverPart.source;\n    if (!hoverRenderedPart || !hoverSource?.supportsVerbosityAction(action)) {\n      return undefined;\n    }\n    const newHover = await this._fetchHover(hoverSource, model, action);\n    if (!newHover) {\n      return undefined;\n    }\n    const newHoverSource = new HoverSource(newHover, hoverSource.hoverProvider, hoverSource.hoverPosition);\n    const initialHoverPart = hoverRenderedPart.hoverPart;\n    const newHoverPart = new MarkdownHover(this._hoverParticipant, initialHoverPart.range, newHover.contents, initialHoverPart.isBeforeContent, initialHoverPart.ordinal, newHoverSource);\n    const newHoverRenderedPart = this._renderHoverPart(newHoverPart, this._onFinishedRendering);\n    this._replaceRenderedHoverPartAtIndex(index, newHoverRenderedPart, newHoverPart);\n    if (focus) {\n      this._focusOnHoverPartWithIndex(index);\n    }\n    return {\n      hoverPart: newHoverPart,\n      hoverElement: newHoverRenderedPart.hoverElement\n    };\n  }\n  async _fetchHover(hoverSource, model, action) {\n    let verbosityDelta = action === HoverVerbosityAction.Increase ? 1 : -1;\n    const provider = hoverSource.hoverProvider;\n    const ongoingHoverOperation = this._ongoingHoverOperations.get(provider);\n    if (ongoingHoverOperation) {\n      ongoingHoverOperation.tokenSource.cancel();\n      verbosityDelta += ongoingHoverOperation.verbosityDelta;\n    }\n    const tokenSource = new CancellationTokenSource();\n    this._ongoingHoverOperations.set(provider, {\n      verbosityDelta,\n      tokenSource\n    });\n    const context = {\n      verbosityRequest: {\n        verbosityDelta,\n        previousHover: hoverSource.hover\n      }\n    };\n    let hover;\n    try {\n      hover = await Promise.resolve(provider.provideHover(model, hoverSource.hoverPosition, tokenSource.token, context));\n    } catch (e) {\n      onUnexpectedExternalError(e);\n    }\n    tokenSource.dispose();\n    this._ongoingHoverOperations.delete(provider);\n    return hover;\n  }\n  _replaceRenderedHoverPartAtIndex(index, renderedHoverPart, hoverPart) {\n    if (index >= this.renderedHoverParts.length || index < 0) {\n      return;\n    }\n    const currentRenderedHoverPart = this.renderedHoverParts[index];\n    const currentRenderedMarkdown = currentRenderedHoverPart.hoverElement;\n    const renderedMarkdown = renderedHoverPart.hoverElement;\n    const renderedChildrenElements = Array.from(renderedMarkdown.children);\n    currentRenderedMarkdown.replaceChildren(...renderedChildrenElements);\n    const newRenderedHoverPart = new RenderedMarkdownHoverPart(hoverPart, currentRenderedMarkdown, renderedHoverPart.disposables);\n    currentRenderedMarkdown.focus();\n    currentRenderedHoverPart.dispose();\n    this.renderedHoverParts[index] = newRenderedHoverPart;\n  }\n  _focusOnHoverPartWithIndex(index) {\n    this.renderedHoverParts[index].hoverElement.focus();\n  }\n  _getRenderedHoverPartAtIndex(index) {\n    return this.renderedHoverParts[index];\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n}\nexport function renderMarkdownHovers(context, markdownHovers, editor, languageService, openerService) {\n  // Sort hover parts to keep them stable since they might come in async, out-of-order\n  markdownHovers.sort(compareBy(hover => hover.ordinal, numberComparator));\n  const renderedHoverParts = [];\n  for (const markdownHover of markdownHovers) {\n    renderedHoverParts.push(renderMarkdownInContainer(editor, markdownHover, languageService, openerService, context.onContentsChanged));\n  }\n  return new RenderedHoverParts(renderedHoverParts);\n}\nfunction renderMarkdownInContainer(editor, markdownHover, languageService, openerService, onFinishedRendering) {\n  const disposables = new DisposableStore();\n  const renderedMarkdown = $('div.hover-row');\n  const renderedMarkdownContents = $('div.hover-row-contents');\n  renderedMarkdown.appendChild(renderedMarkdownContents);\n  const markdownStrings = markdownHover.contents;\n  for (const markdownString of markdownStrings) {\n    if (isEmptyMarkdownString(markdownString)) {\n      continue;\n    }\n    const markdownHoverElement = $('div.markdown-hover');\n    const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n    const renderer = disposables.add(new MarkdownRenderer({\n      editor\n    }, languageService, openerService));\n    disposables.add(renderer.onDidRenderAsync(() => {\n      hoverContentsElement.className = 'hover-contents code-hover-contents';\n      onFinishedRendering();\n    }));\n    const renderedContents = disposables.add(renderer.render(markdownString));\n    hoverContentsElement.appendChild(renderedContents.element);\n    renderedMarkdownContents.appendChild(markdownHoverElement);\n  }\n  const renderedHoverPart = {\n    hoverPart: markdownHover,\n    hoverElement: renderedMarkdown,\n    dispose() {\n      disposables.dispose();\n    }\n  };\n  return renderedHoverPart;\n}\nexport function labelForHoverVerbosityAction(keybindingService, action) {\n  switch (action) {\n    case HoverVerbosityAction.Increase:\n      {\n        const kb = keybindingService.lookupKeybinding(INCREASE_HOVER_VERBOSITY_ACTION_ID);\n        return kb ? nls.localize('increaseVerbosityWithKb', \"Increase Hover Verbosity ({0})\", kb.getLabel()) : nls.localize('increaseVerbosity', \"Increase Hover Verbosity\");\n      }\n    case HoverVerbosityAction.Decrease:\n      {\n        const kb = keybindingService.lookupKeybinding(DECREASE_HOVER_VERBOSITY_ACTION_ID);\n        return kb ? nls.localize('decreaseVerbosityWithKb', \"Decrease Hover Verbosity ({0})\", kb.getLabel()) : nls.localize('decreaseVerbosity', \"Decrease Hover Verbosity\");\n      }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n  constructor(provider, hover, ordinal) {\n    this.provider = provider;\n    this.hover = hover;\n    this.ordinal = ordinal;\n  }\n}\n/**\n * Does not throw or return a rejected promise (returns undefined instead).\n */\nasync function executeProvider(provider, ordinal, model, position, token) {\n  const result = await Promise.resolve(provider.provideHover(model, position, token)).catch(onUnexpectedExternalError);\n  if (!result || !isValid(result)) {\n    return undefined;\n  }\n  return new HoverProviderResult(provider, result, ordinal);\n}\nexport function getHoverProviderResultsAsAsyncIterable(registry, model, position, token, recursive = false) {\n  const providers = registry.ordered(model, recursive);\n  const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n  return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoversPromise(registry, model, position, token, recursive = false) {\n  return getHoverProviderResultsAsAsyncIterable(registry, model, position, token, recursive).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  return getHoversPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nregisterModelAndPositionCommand('_executeHoverProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  return getHoversPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None, true);\n});\nfunction isValid(result) {\n  const hasRange = typeof result.range !== 'undefined';\n  const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n  return hasRange && hasHtmlContent;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHoverProviderResultsAsAsyncIterable } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n  constructor(part, owner, initialMousePosX, initialMousePosY) {\n    super(10, owner, part.item.anchor.range, initialMousePosX, initialMousePosY, true);\n    this.part = part;\n  }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n  constructor(editor, languageService, openerService, keybindingService, hoverService, configurationService, _resolverService, languageFeaturesService, commandService) {\n    super(editor, languageService, openerService, configurationService, languageFeaturesService, keybindingService, hoverService, commandService);\n    this._resolverService = _resolverService;\n    this.hoverOrdinal = 6;\n  }\n  suggestHoverAnchor(mouseEvent) {\n    const controller = InlayHintsController.get(this._editor);\n    if (!controller) {\n      return null;\n    }\n    if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n      return null;\n    }\n    const options = mouseEvent.target.detail.injectedText?.options;\n    if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n      return null;\n    }\n    return new InlayHintsHoverAnchor(options.attachedData, this, mouseEvent.event.posx, mouseEvent.event.posy);\n  }\n  computeSync() {\n    return [];\n  }\n  computeAsync(anchor, _lineDecorations, token) {\n    if (!(anchor instanceof InlayHintsHoverAnchor)) {\n      return AsyncIterableObject.EMPTY;\n    }\n    return new AsyncIterableObject(async executor => {\n      const {\n        part\n      } = anchor;\n      await part.item.resolve(token);\n      if (token.isCancellationRequested) {\n        return;\n      }\n      // (1) Inlay Tooltip\n      let itemTooltip;\n      if (typeof part.item.hint.tooltip === 'string') {\n        itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n      } else if (part.item.hint.tooltip) {\n        itemTooltip = part.item.hint.tooltip;\n      }\n      if (itemTooltip) {\n        executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], false, 0));\n      }\n      // (1.2) Inlay dbl-click gesture\n      if (isNonEmptyArray(part.item.hint.textEdits)) {\n        executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double-click to insert\"))], false, 10001));\n      }\n      // (2) Inlay Label Part Tooltip\n      let partTooltip;\n      if (typeof part.part.tooltip === 'string') {\n        partTooltip = new MarkdownString().appendText(part.part.tooltip);\n      } else if (part.part.tooltip) {\n        partTooltip = part.part.tooltip;\n      }\n      if (partTooltip) {\n        executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], false, 1));\n      }\n      // (2.2) Inlay Label Part Help Hover\n      if (part.part.location || part.part.command) {\n        let linkHint;\n        const useMetaKey = this._editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n        const kb = useMetaKey ? platform.isMacintosh ? localize('links.navigate.kb.meta.mac', \"cmd + click\") : localize('links.navigate.kb.meta', \"ctrl + click\") : platform.isMacintosh ? localize('links.navigate.kb.alt.mac', \"option + click\") : localize('links.navigate.kb.alt', \"alt + click\");\n        if (part.part.location && part.part.command) {\n          linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n        } else if (part.part.location) {\n          linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n        } else if (part.part.command) {\n          linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, {\n            isTrusted: true\n          });\n        }\n        if (linkHint) {\n          executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], false, 10000));\n        }\n      }\n      // (3) Inlay Label Part Location tooltip\n      const iterable = await this._resolveInlayHintLabelPartHover(part, token);\n      for await (const item of iterable) {\n        executor.emitOne(item);\n      }\n    });\n  }\n  async _resolveInlayHintLabelPartHover(part, token) {\n    if (!part.part.location) {\n      return AsyncIterableObject.EMPTY;\n    }\n    const {\n      uri,\n      range\n    } = part.part.location;\n    const ref = await this._resolverService.createModelReference(uri);\n    try {\n      const model = ref.object.textEditorModel;\n      if (!this._languageFeaturesService.hoverProvider.has(model)) {\n        return AsyncIterableObject.EMPTY;\n      }\n      return getHoverProviderResultsAsAsyncIterable(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token).filter(item => !isEmptyMarkdownString(item.hover.contents)).map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, false, 2 + item.ordinal));\n    } finally {\n      ref.dispose();\n    }\n  }\n};\nInlayHintsHover = __decorate([__param(1, ILanguageService), __param(2, IOpenerService), __param(3, IKeybindingService), __param(4, IHoverService), __param(5, IConfigurationService), __param(6, ITextModelService), __param(7, ILanguageFeaturesService), __param(8, ICommandService)], InlayHintsHover);\nexport { InlayHintsHover };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlayHintsController_1;\nimport { isHTMLElement, ModifierKeyEmitter } from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n  constructor() {\n    this._entries = new LRUCache(50);\n  }\n  get(model) {\n    const key = InlayHintsCache._key(model);\n    return this._entries.get(key);\n  }\n  set(model, value) {\n    const key = InlayHintsCache._key(model);\n    this._entries.set(key, value);\n  }\n  static _key(model) {\n    return `${model.uri.toString()}/${model.getVersionId()}`;\n  }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, 1 /* InstantiationType.Delayed */);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n  constructor(item, index) {\n    this.item = item;\n    this.index = index;\n  }\n  get part() {\n    const label = this.item.hint.label;\n    if (typeof label === 'string') {\n      return {\n        label\n      };\n    } else {\n      return label[this.index];\n    }\n  }\n}\nclass ActiveInlayHintInfo {\n  constructor(part, hasTriggerModifier) {\n    this.part = part;\n    this.hasTriggerModifier = hasTriggerModifier;\n  }\n}\n// --- controller\nlet InlayHintsController = /*#__PURE__*/(() => {\n  let InlayHintsController = class InlayHintsController {\n    static {\n      InlayHintsController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.InlayHints';\n    }\n    static {\n      this._MAX_DECORATORS = 1500;\n    }\n    static {\n      this._MAX_LABEL_LEN = 43;\n    }\n    static get(editor) {\n      return editor.getContribution(InlayHintsController_1.ID) ?? undefined;\n    }\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n      this._editor = _editor;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._inlayHintsCache = _inlayHintsCache;\n      this._commandService = _commandService;\n      this._notificationService = _notificationService;\n      this._instaService = _instaService;\n      this._disposables = new DisposableStore();\n      this._sessionDisposables = new DisposableStore();\n      this._decorationsMetadata = new Map();\n      this._ruleFactory = new DynamicCssRules(this._editor);\n      this._activeRenderMode = 0 /* RenderMode.Normal */;\n      this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', {\n        min: 25\n      });\n      this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n      this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n      this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n      this._disposables.add(_editor.onDidChangeConfiguration(e => {\n        if (e.hasChanged(142 /* EditorOption.inlayHints */)) {\n          this._update();\n        }\n      }));\n      this._update();\n    }\n    dispose() {\n      this._sessionDisposables.dispose();\n      this._removeAllDecorations();\n      this._disposables.dispose();\n    }\n    _update() {\n      this._sessionDisposables.clear();\n      this._removeAllDecorations();\n      const options = this._editor.getOption(142 /* EditorOption.inlayHints */);\n      if (options.enabled === 'off') {\n        return;\n      }\n      const model = this._editor.getModel();\n      if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n        return;\n      }\n      if (options.enabled === 'on') {\n        // different \"on\" modes: always\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\n      } else {\n        // different \"on\" modes: offUnlessPressed, or onUnlessPressed\n        let defaultMode;\n        let altMode;\n        if (options.enabled === 'onUnlessPressed') {\n          defaultMode = 0 /* RenderMode.Normal */;\n          altMode = 1 /* RenderMode.Invisible */;\n        } else {\n          defaultMode = 1 /* RenderMode.Invisible */;\n          altMode = 0 /* RenderMode.Normal */;\n        }\n        this._activeRenderMode = defaultMode;\n        this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\n          if (!this._editor.hasModel()) {\n            return;\n          }\n          const newRenderMode = e.altKey && e.ctrlKey && !(e.shiftKey || e.metaKey) ? altMode : defaultMode;\n          if (newRenderMode !== this._activeRenderMode) {\n            this._activeRenderMode = newRenderMode;\n            const model = this._editor.getModel();\n            const copies = this._copyInlayHintsWithCurrentAnchor(model);\n            this._updateHintsDecorators([model.getFullModelRange()], copies);\n            scheduler.schedule(0);\n          }\n        }));\n      }\n      // iff possible, quickly update from cache\n      const cached = this._inlayHintsCache.get(model);\n      if (cached) {\n        this._updateHintsDecorators([model.getFullModelRange()], cached);\n      }\n      this._sessionDisposables.add(toDisposable(() => {\n        // cache items when switching files etc\n        if (!model.isDisposed()) {\n          this._cacheHintsForFastRestore(model);\n        }\n      }));\n      let cts;\n      const watchedProviders = new Set();\n      const scheduler = new RunOnceScheduler(async () => {\n        const t1 = Date.now();\n        cts?.dispose(true);\n        cts = new CancellationTokenSource();\n        const listener = model.onWillDispose(() => cts?.cancel());\n        try {\n          const myToken = cts.token;\n          const inlayHints = await InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n          scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n          if (myToken.isCancellationRequested) {\n            inlayHints.dispose();\n            return;\n          }\n          // listen to provider changes\n          for (const provider of inlayHints.provider) {\n            if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n              watchedProviders.add(provider);\n              this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                if (!scheduler.isScheduled()) {\n                  // ignore event when request is already scheduled\n                  scheduler.schedule();\n                }\n              }));\n            }\n          }\n          this._sessionDisposables.add(inlayHints);\n          this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n          this._cacheHintsForFastRestore(model);\n        } catch (err) {\n          onUnexpectedError(err);\n        } finally {\n          cts.dispose();\n          listener.dispose();\n        }\n      }, this._debounceInfo.get(model));\n      this._sessionDisposables.add(scheduler);\n      this._sessionDisposables.add(toDisposable(() => cts?.dispose(true)));\n      scheduler.schedule(0);\n      this._sessionDisposables.add(this._editor.onDidScrollChange(e => {\n        // update when scroll position changes\n        // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n        // typing or due to \"actual\" scrolling\n        if (e.scrollTopChanged || !scheduler.isScheduled()) {\n          scheduler.schedule();\n        }\n      }));\n      this._sessionDisposables.add(this._editor.onDidChangeModelContent(e => {\n        cts?.cancel();\n        // update less aggressive when typing\n        const delay = Math.max(scheduler.delay, 1250);\n        scheduler.schedule(delay);\n      }));\n      // mouse gestures\n      this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\n      this._sessionDisposables.add(this._installLinkGesture());\n      this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n      const store = new DisposableStore();\n      const gesture = store.add(new ClickLinkGesture(this._editor));\n      // let removeHighlight = () => { };\n      const sessionStore = new DisposableStore();\n      store.add(sessionStore);\n      store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n        const [mouseEvent] = e;\n        const labelPart = this._getInlayHintLabelPart(mouseEvent);\n        const model = this._editor.getModel();\n        if (!labelPart || !model) {\n          sessionStore.clear();\n          return;\n        }\n        // resolve the item\n        const cts = new CancellationTokenSource();\n        sessionStore.add(toDisposable(() => cts.dispose(true)));\n        labelPart.item.resolve(cts.token);\n        // render link => when the modifier is pressed and when there is a command or location\n        this._activeInlayHintPart = labelPart.part.command || labelPart.part.location ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier) : undefined;\n        const lineNumber = model.validatePosition(labelPart.item.hint.position).lineNumber;\n        const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n        const lineHints = this._getInlineHintsForRange(range);\n        this._updateHintsDecorators([range], lineHints);\n        sessionStore.add(toDisposable(() => {\n          this._activeInlayHintPart = undefined;\n          this._updateHintsDecorators([range], lineHints);\n        }));\n      }));\n      store.add(gesture.onCancel(() => sessionStore.clear()));\n      store.add(gesture.onExecute(async e => {\n        const label = this._getInlayHintLabelPart(e);\n        if (label) {\n          const part = label.part;\n          if (part.location) {\n            // location -> execute go to def\n            this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n          } else if (languages.Command.is(part.command)) {\n            // command -> execute it\n            await this._invokeCommand(part.command, label.item);\n          }\n        }\n      }));\n      return store;\n    }\n    _getInlineHintsForRange(range) {\n      const lineHints = new Set();\n      for (const data of this._decorationsMetadata.values()) {\n        if (range.containsRange(data.item.anchor.range)) {\n          lineHints.add(data.item);\n        }\n      }\n      return Array.from(lineHints);\n    }\n    _installDblClickGesture(updateInlayHints) {\n      return this._editor.onMouseUp(async e => {\n        if (e.event.detail !== 2) {\n          return;\n        }\n        const part = this._getInlayHintLabelPart(e);\n        if (!part) {\n          return;\n        }\n        e.event.preventDefault();\n        await part.item.resolve(CancellationToken.None);\n        if (isNonEmptyArray(part.item.hint.textEdits)) {\n          const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\n          this._editor.executeEdits('inlayHint.default', edits);\n          updateInlayHints();\n        }\n      });\n    }\n    _installContextMenu() {\n      return this._editor.onContextMenu(async e => {\n        if (!isHTMLElement(e.event.target)) {\n          return;\n        }\n        const part = this._getInlayHintLabelPart(e);\n        if (part) {\n          await this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n        }\n      });\n    }\n    _getInlayHintLabelPart(e) {\n      if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n        return undefined;\n      }\n      const options = e.target.detail.injectedText?.options;\n      if (options instanceof ModelDecorationInjectedTextOptions && options?.attachedData instanceof RenderedInlayHintLabelPart) {\n        return options.attachedData;\n      }\n      return undefined;\n    }\n    async _invokeCommand(command, item) {\n      try {\n        await this._commandService.executeCommand(command.id, ...(command.arguments ?? []));\n      } catch (err) {\n        this._notificationService.notify({\n          severity: Severity.Error,\n          source: item.provider.displayName,\n          message: err\n        });\n      }\n    }\n    _cacheHintsForFastRestore(model) {\n      const hints = this._copyInlayHintsWithCurrentAnchor(model);\n      this._inlayHintsCache.set(model, hints);\n    }\n    // return inlay hints but with an anchor that reflects \"updates\"\n    // that happened after receiving them, e.g adding new lines before a hint\n    _copyInlayHintsWithCurrentAnchor(model) {\n      const items = new Map();\n      for (const [id, obj] of this._decorationsMetadata) {\n        if (items.has(obj.item)) {\n          // an inlay item can be rendered as multiple decorations\n          // but they will all uses the same range\n          continue;\n        }\n        const range = model.getDecorationRange(id);\n        if (range) {\n          // update range with whatever the editor has tweaked it to\n          const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n          const copy = obj.item.with({\n            anchor\n          });\n          items.set(obj.item, copy);\n        }\n      }\n      return Array.from(items.values());\n    }\n    _getHintsRanges() {\n      const extra = 30;\n      const model = this._editor.getModel();\n      const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n      const result = [];\n      for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n        const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n        if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n          result.push(extendedRange);\n        } else {\n          result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n        }\n      }\n      return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n      // utils to collect/create injected text decorations\n      const newDecorationsData = [];\n      const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n        const opts = {\n          content,\n          inlineClassNameAffectsLetterSpacing: true,\n          inlineClassName: ref.className,\n          cursorStops,\n          attachedData\n        };\n        newDecorationsData.push({\n          item,\n          classNameRef: ref,\n          decoration: {\n            range: item.anchor.range,\n            options: {\n              // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n              description: 'InlayHint',\n              showIfCollapsed: item.anchor.range.isEmpty(),\n              // \"original\" range is empty\n              collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n              stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n              [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\n            }\n          }\n        });\n      };\n      const addInjectedWhitespace = (item, isLast) => {\n        const marginRule = this._ruleFactory.createClassNameRef({\n          width: `${fontSize / 3 | 0}px`,\n          display: 'inline-block'\n        });\n        addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n      };\n      //\n      const {\n        fontSize,\n        fontFamily,\n        padding,\n        isUniform\n      } = this._getLayoutInfo();\n      const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n      this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n      let currentLineInfo = {\n        line: 0,\n        totalLen: 0\n      };\n      for (const item of items) {\n        if (currentLineInfo.line !== item.anchor.range.startLineNumber) {\n          currentLineInfo = {\n            line: item.anchor.range.startLineNumber,\n            totalLen: 0\n          };\n        }\n        if (currentLineInfo.totalLen > InlayHintsController_1._MAX_LABEL_LEN) {\n          continue;\n        }\n        // whitespace leading the actual label\n        if (item.hint.paddingLeft) {\n          addInjectedWhitespace(item, false);\n        }\n        // the label with its parts\n        const parts = typeof item.hint.label === 'string' ? [{\n          label: item.hint.label\n        }] : item.hint.label;\n        for (let i = 0; i < parts.length; i++) {\n          const part = parts[i];\n          const isFirst = i === 0;\n          const isLast = i === parts.length - 1;\n          const cssProperties = {\n            fontSize: `${fontSize}px`,\n            fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n            verticalAlign: isUniform ? 'baseline' : 'middle',\n            unicodeBidi: 'isolate'\n          };\n          if (isNonEmptyArray(item.hint.textEdits)) {\n            cssProperties.cursor = 'default';\n          }\n          this._fillInColors(cssProperties, item.hint);\n          if ((part.command || part.location) && this._activeInlayHintPart?.part.item === item && this._activeInlayHintPart.part.index === i) {\n            // active link!\n            cssProperties.textDecoration = 'underline';\n            if (this._activeInlayHintPart.hasTriggerModifier) {\n              cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n              cssProperties.cursor = 'pointer';\n            }\n          }\n          if (padding) {\n            if (isFirst && isLast) {\n              // only element\n              cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n              cssProperties.borderRadius = `${fontSize / 4 | 0}px`;\n            } else if (isFirst) {\n              // first element\n              cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n              cssProperties.borderRadius = `${fontSize / 4 | 0}px 0 0 ${fontSize / 4 | 0}px`;\n            } else if (isLast) {\n              // last element\n              cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n              cssProperties.borderRadius = `0 ${fontSize / 4 | 0}px ${fontSize / 4 | 0}px 0`;\n            } else {\n              cssProperties.padding = `1px 0 1px 0`;\n            }\n          }\n          let textlabel = part.label;\n          currentLineInfo.totalLen += textlabel.length;\n          let tooLong = false;\n          const over = currentLineInfo.totalLen - InlayHintsController_1._MAX_LABEL_LEN;\n          if (over > 0) {\n            textlabel = textlabel.slice(0, -over) + '';\n            tooLong = true;\n          }\n          addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(textlabel), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n          if (tooLong) {\n            break;\n          }\n        }\n        // whitespace trailing the actual label\n        if (item.hint.paddingRight) {\n          addInjectedWhitespace(item, true);\n        }\n        if (newDecorationsData.length > InlayHintsController_1._MAX_DECORATORS) {\n          break;\n        }\n      }\n      // collect all decoration ids that are affected by the ranges\n      // and only update those decorations\n      const decorationIdsToReplace = [];\n      for (const [id, metadata] of this._decorationsMetadata) {\n        const range = this._editor.getModel()?.getDecorationRange(id);\n        if (range && ranges.some(r => r.containsRange(range))) {\n          decorationIdsToReplace.push(id);\n          metadata.classNameRef.dispose();\n          this._decorationsMetadata.delete(id);\n        }\n      }\n      const scrollState = StableEditorScrollState.capture(this._editor);\n      this._editor.changeDecorations(accessor => {\n        const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n        for (let i = 0; i < newDecorationIds.length; i++) {\n          const data = newDecorationsData[i];\n          this._decorationsMetadata.set(newDecorationIds[i], data);\n        }\n      });\n      scrollState.restore(this._editor);\n    }\n    _fillInColors(props, hint) {\n      if (hint.kind === languages.InlayHintKind.Parameter) {\n        props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n        props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n      } else if (hint.kind === languages.InlayHintKind.Type) {\n        props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n        props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n      } else {\n        props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n        props.color = themeColorFromId(colors.editorInlayHintForeground);\n      }\n    }\n    _getLayoutInfo() {\n      const options = this._editor.getOption(142 /* EditorOption.inlayHints */);\n      const padding = options.padding;\n      const editorFontSize = this._editor.getOption(52 /* EditorOption.fontSize */);\n      const editorFontFamily = this._editor.getOption(49 /* EditorOption.fontFamily */);\n      let fontSize = options.fontSize;\n      if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n        fontSize = editorFontSize;\n      }\n      const fontFamily = options.fontFamily || editorFontFamily;\n      const isUniform = !padding && fontFamily === editorFontFamily && fontSize === editorFontSize;\n      return {\n        fontSize,\n        fontFamily,\n        padding,\n        isUniform\n      };\n    }\n    _removeAllDecorations() {\n      this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\n      for (const obj of this._decorationsMetadata.values()) {\n        obj.classNameRef.dispose();\n      }\n      this._decorationsMetadata.clear();\n    }\n  };\n  return InlayHintsController;\n})();\nInlayHintsController = InlayHintsController_1 = __decorate([__param(1, ILanguageFeaturesService), __param(2, ILanguageFeatureDebounceService), __param(3, IInlayHintsCache), __param(4, ICommandService), __param(5, INotificationService), __param(6, IInstantiationService)], InlayHintsController);\nexport { InlayHintsController };\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n  const noBreakWhitespace = '\\xa0';\n  return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', async (accessor, ...args) => {\n  const [uri, range] = args;\n  assertType(URI.isUri(uri));\n  assertType(Range.isIRange(range));\n  const {\n    inlayHintsProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const ref = await accessor.get(ITextModelService).createModelReference(uri);\n  try {\n    const model = await InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n    const result = model.items.map(i => i.hint);\n    setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n    return result;\n  } finally {\n    ref.dispose();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n  return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n  constructor(source, opts) {\n    this.target = source.target;\n    this.isLeftClick = source.event.leftButton;\n    this.isMiddleClick = source.event.middleButton;\n    this.isRightClick = source.event.rightButton;\n    this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n    this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n    this.isNoneOrSingleMouseDown = source.event.detail <= 1;\n  }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n  constructor(source, opts) {\n    this.keyCodeIsTriggerKey = source.keyCode === opts.triggerKey;\n    this.keyCodeIsSideBySideKey = source.keyCode === opts.triggerSideBySideKey;\n    this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n  }\n}\nexport class ClickLinkOptions {\n  constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n    this.triggerKey = triggerKey;\n    this.triggerModifier = triggerModifier;\n    this.triggerSideBySideKey = triggerSideBySideKey;\n    this.triggerSideBySideModifier = triggerSideBySideModifier;\n  }\n  equals(other) {\n    return this.triggerKey === other.triggerKey && this.triggerModifier === other.triggerModifier && this.triggerSideBySideKey === other.triggerSideBySideKey && this.triggerSideBySideModifier === other.triggerSideBySideModifier;\n  }\n}\nfunction createOptions(multiCursorModifier) {\n  if (multiCursorModifier === 'altKey') {\n    if (platform.isMacintosh) {\n      return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n  }\n  if (platform.isMacintosh) {\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n  }\n  return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n  constructor(editor, opts) {\n    super();\n    this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n    this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n    this._onExecute = this._register(new Emitter());\n    this.onExecute = this._onExecute.event;\n    this._onCancel = this._register(new Emitter());\n    this.onCancel = this._onCancel.event;\n    this._editor = editor;\n    this._extractLineNumberFromMouseEvent = opts?.extractLineNumberFromMouseEvent ?? (e => e.target.position ? e.target.position.lineNumber : 0);\n    this._opts = createOptions(this._editor.getOption(78 /* EditorOption.multiCursorModifier */));\n    this._lastMouseMoveEvent = null;\n    this._hasTriggerKeyOnMouseDown = false;\n    this._lineNumberOnMouseDown = 0;\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(78 /* EditorOption.multiCursorModifier */)) {\n        const newOpts = createOptions(this._editor.getOption(78 /* EditorOption.multiCursorModifier */));\n        if (this._opts.equals(newOpts)) {\n          return;\n        }\n        this._opts = newOpts;\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._onCancel.fire();\n      }\n    }));\n    this._register(this._editor.onMouseMove(e => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n    this._register(this._editor.onMouseDown(e => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n    this._register(this._editor.onMouseUp(e => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n    this._register(this._editor.onKeyDown(e => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n    this._register(this._editor.onKeyUp(e => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n    this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n    this._register(this._editor.onDidChangeCursorSelection(e => this._onDidChangeCursorSelection(e)));\n    this._register(this._editor.onDidChangeModel(e => this._resetHandler()));\n    this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n    this._register(this._editor.onDidScrollChange(e => {\n      if (e.scrollTopChanged || e.scrollLeftChanged) {\n        this._resetHandler();\n      }\n    }));\n  }\n  _onDidChangeCursorSelection(e) {\n    if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n      this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n    }\n  }\n  _onEditorMouseMove(mouseEvent) {\n    this._lastMouseMoveEvent = mouseEvent;\n    this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n  }\n  _onEditorMouseDown(mouseEvent) {\n    // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n    // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n    // release the mouse button without wanting to do the navigation.\n    // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n    this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n    this._lineNumberOnMouseDown = this._extractLineNumberFromMouseEvent(mouseEvent);\n  }\n  _onEditorMouseUp(mouseEvent) {\n    const currentLineNumber = this._extractLineNumberFromMouseEvent(mouseEvent);\n    if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n      this._onExecute.fire(mouseEvent);\n    }\n  }\n  _onEditorKeyDown(e) {\n    if (this._lastMouseMoveEvent && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n    || e.keyCodeIsSideBySideKey && e.hasTriggerModifier // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n    )) {\n      this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n    } else if (e.hasTriggerModifier) {\n      this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n    }\n  }\n  _onEditorKeyUp(e) {\n    if (e.keyCodeIsTriggerKey) {\n      this._onCancel.fire();\n    }\n  }\n  _resetHandler() {\n    this._lastMouseMoveEvent = null;\n    this._hasTriggerKeyOnMouseDown = false;\n    this._onCancel.fire();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n  constructor(range, direction) {\n    this.range = range;\n    this.direction = direction;\n  }\n}\nexport class InlayHintItem {\n  constructor(hint, anchor, provider) {\n    this.hint = hint;\n    this.anchor = anchor;\n    this.provider = provider;\n    this._isResolved = false;\n  }\n  with(delta) {\n    const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n    result._isResolved = this._isResolved;\n    result._currentResolve = this._currentResolve;\n    return result;\n  }\n  async resolve(token) {\n    if (typeof this.provider.resolveInlayHint !== 'function') {\n      return;\n    }\n    if (this._currentResolve) {\n      // wait for an active resolve operation and try again\n      // when that's done.\n      await this._currentResolve;\n      if (token.isCancellationRequested) {\n        return;\n      }\n      return this.resolve(token);\n    }\n    if (!this._isResolved) {\n      this._currentResolve = this._doResolve(token).finally(() => this._currentResolve = undefined);\n    }\n    await this._currentResolve;\n  }\n  async _doResolve(token) {\n    try {\n      const newHint = await Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n      this.hint.tooltip = newHint?.tooltip ?? this.hint.tooltip;\n      this.hint.label = newHint?.label ?? this.hint.label;\n      this.hint.textEdits = newHint?.textEdits ?? this.hint.textEdits;\n      this._isResolved = true;\n    } catch (err) {\n      onUnexpectedExternalError(err);\n      this._isResolved = false;\n    }\n  }\n}\nexport class InlayHintsFragments {\n  static {\n    this._emptyInlayHintList = Object.freeze({\n      dispose() {},\n      hints: []\n    });\n  }\n  static async create(registry, model, ranges, token) {\n    const data = [];\n    const promises = registry.ordered(model).reverse().map(provider => ranges.map(async range => {\n      try {\n        const result = await provider.provideInlayHints(model, range, token);\n        if (result?.hints.length || provider.onDidChangeInlayHints) {\n          data.push([result ?? InlayHintsFragments._emptyInlayHintList, provider]);\n        }\n      } catch (err) {\n        onUnexpectedExternalError(err);\n      }\n    }));\n    await Promise.all(promises.flat());\n    if (token.isCancellationRequested || model.isDisposed()) {\n      throw new CancellationError();\n    }\n    return new InlayHintsFragments(ranges, data, model);\n  }\n  constructor(ranges, data, model) {\n    this._disposables = new DisposableStore();\n    this.ranges = ranges;\n    this.provider = new Set();\n    const items = [];\n    for (const [list, provider] of data) {\n      this._disposables.add(list);\n      this.provider.add(provider);\n      for (const hint of list.hints) {\n        // compute the range to which the item should be attached to\n        const position = model.validatePosition(hint.position);\n        let direction = 'before';\n        const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n        let range;\n        if (wordRange.getStartPosition().isBefore(position)) {\n          range = Range.fromPositions(wordRange.getStartPosition(), position);\n          direction = 'after';\n        } else {\n          range = Range.fromPositions(position, wordRange.getEndPosition());\n          direction = 'before';\n        }\n        items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n      }\n    }\n    this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n  static _getRangeAtPosition(model, position) {\n    const line = position.lineNumber;\n    const word = model.getWordAtPosition(position);\n    if (word) {\n      // always prefer the word range\n      return new Range(line, word.startColumn, line, word.endColumn);\n    }\n    model.tokenization.tokenizeIfCheap(line);\n    const tokens = model.tokenization.getLineTokens(line);\n    const offset = position.column - 1;\n    const idx = tokens.findTokenIndexAtOffset(offset);\n    let start = tokens.getStartOffset(idx);\n    let end = tokens.getEndOffset(idx);\n    if (end - start === 1) {\n      // single character token, when at its end try leading/trailing token instead\n      if (start === offset && idx > 1) {\n        // leading token\n        start = tokens.getStartOffset(idx - 1);\n        end = tokens.getEndOffset(idx - 1);\n      } else if (end === offset && idx < tokens.getCount() - 1) {\n        // trailing token\n        start = tokens.getStartOffset(idx + 1);\n        end = tokens.getEndOffset(idx + 1);\n      }\n    }\n    return new Range(line, start + 1, line, end + 1);\n  }\n}\nexport function asCommandLink(command) {\n  return URI.from({\n    scheme: Schemas.command,\n    path: command.id,\n    query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n  }).toString();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport async function showGoToContextMenu(accessor, editor, anchor, part) {\n  const resolverService = accessor.get(ITextModelService);\n  const contextMenuService = accessor.get(IContextMenuService);\n  const commandService = accessor.get(ICommandService);\n  const instaService = accessor.get(IInstantiationService);\n  const notificationService = accessor.get(INotificationService);\n  await part.item.resolve(CancellationToken.None);\n  if (!part.part.location) {\n    return;\n  }\n  const location = part.part.location;\n  const menuActions = [];\n  // from all registered (not active) context menu actions select those\n  // that are a symbol navigation actions\n  const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext).map(item => isIMenuItem(item) ? item.command.id : generateUuid()));\n  for (const delegate of SymbolNavigationAction.all()) {\n    if (filter.has(delegate.desc.id)) {\n      menuActions.push(new Action(delegate.desc.id, MenuItemAction.label(delegate.desc, {\n        renderShortTitle: true\n      }), undefined, true, async () => {\n        const ref = await resolverService.createModelReference(location.uri);\n        try {\n          const symbolAnchor = new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range));\n          const range = part.item.anchor.range;\n          await instaService.invokeFunction(delegate.runEditorCommand.bind(delegate), editor, symbolAnchor, range);\n        } finally {\n          ref.dispose();\n        }\n      }));\n    }\n  }\n  if (part.part.command) {\n    const {\n      command\n    } = part.part;\n    menuActions.push(new Separator());\n    menuActions.push(new Action(command.id, command.title, undefined, true, async () => {\n      try {\n        await commandService.executeCommand(command.id, ...(command.arguments ?? []));\n      } catch (err) {\n        notificationService.notify({\n          severity: Severity.Error,\n          source: part.item.provider.displayName,\n          message: err\n        });\n      }\n    }));\n  }\n  // show context menu\n  const useShadowDOM = editor.getOption(128 /* EditorOption.useShadowDOM */);\n  contextMenuService.showContextMenu({\n    domForShadowRoot: useShadowDOM ? editor.getDomNode() ?? undefined : undefined,\n    getAnchor: () => {\n      const box = dom.getDomNodePagePosition(anchor);\n      return {\n        x: box.left,\n        y: box.top + box.height + 8\n      };\n    },\n    getActions: () => menuActions,\n    onHide: () => {\n      editor.focus();\n    },\n    autoSelectFirstItem: true\n  });\n}\nexport async function goToDefinitionWithLocation(accessor, event, editor, location) {\n  const resolverService = accessor.get(ITextModelService);\n  const ref = await resolverService.createModelReference(location.uri);\n  await editor.invokeWithinContext(async accessor => {\n    const openToSide = event.hasSideBySideModifier;\n    const contextKeyService = accessor.get(IContextKeyService);\n    const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n    const canPeek = !openToSide && editor.getOption(89 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n    const action = new DefinitionAction({\n      openToSide,\n      openInPeek: canPeek,\n      muteMessage: true\n    }, {\n      title: {\n        value: '',\n        original: ''\n      },\n      id: '',\n      precondition: undefined\n    });\n    return action.run(accessor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)), Range.lift(location.range));\n  });\n  ref.dispose();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n  submenu: MenuId.EditorContextPeek,\n  title: nls.localize('peek.submenu', \"Peek\"),\n  group: 'navigation',\n  order: 100\n});\nexport class SymbolNavigationAnchor {\n  static is(thing) {\n    if (!thing || typeof thing !== 'object') {\n      return false;\n    }\n    if (thing instanceof SymbolNavigationAnchor) {\n      return true;\n    }\n    if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n      return true;\n    }\n    return false;\n  }\n  constructor(model, position) {\n    this.model = model;\n    this.position = position;\n  }\n}\nexport class SymbolNavigationAction extends EditorAction2 {\n  static {\n    this._allSymbolNavigationCommands = new Map();\n  }\n  static {\n    this._activeAlternativeCommands = new Set();\n  }\n  static all() {\n    return SymbolNavigationAction._allSymbolNavigationCommands.values();\n  }\n  static _patchConfig(opts) {\n    const result = {\n      ...opts,\n      f1: true\n    };\n    // patch context menu when clause\n    if (result.menu) {\n      for (const item of Iterable.wrap(result.menu)) {\n        if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\n          item.when = ContextKeyExpr.and(opts.precondition, item.when);\n        }\n      }\n    }\n    return result;\n  }\n  constructor(configuration, opts) {\n    super(SymbolNavigationAction._patchConfig(opts));\n    this.configuration = configuration;\n    SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\n  }\n  runEditorCommand(accessor, editor, arg, range) {\n    if (!editor.hasModel()) {\n      return Promise.resolve(undefined);\n    }\n    const notificationService = accessor.get(INotificationService);\n    const editorService = accessor.get(ICodeEditorService);\n    const progressService = accessor.get(IEditorProgressService);\n    const symbolNavService = accessor.get(ISymbolNavigationService);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const instaService = accessor.get(IInstantiationService);\n    const model = editor.getModel();\n    const position = editor.getPosition();\n    const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n    const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n    const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then(async references => {\n      if (!references || cts.token.isCancellationRequested) {\n        return;\n      }\n      alert(references.ariaMessage);\n      let altAction;\n      if (references.referenceAt(model.uri, position)) {\n        const altActionId = this._getAlternativeCommand(editor);\n        if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\n          altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\n        }\n      }\n      const referenceCount = references.references.length;\n      if (referenceCount === 0) {\n        // no result -> show message\n        if (!this.configuration.muteMessage) {\n          const info = model.getWordAtPosition(position);\n          MessageController.get(editor)?.showMessage(this._getNoResultFoundMessage(info), position);\n        }\n      } else if (referenceCount === 1 && altAction) {\n        // already at the only result, run alternative\n        SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\n        instaService.invokeFunction(accessor => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\n          SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\n        }));\n      } else {\n        // normal results handling\n        return this._onResult(editorService, symbolNavService, editor, references, range);\n      }\n    }, err => {\n      // report an error\n      notificationService.error(err);\n    }).finally(() => {\n      cts.dispose();\n    });\n    progressService.showWhile(promise, 250);\n    return promise;\n  }\n  async _onResult(editorService, symbolNavService, editor, model, range) {\n    const gotoLocation = this._getGoToPreference(editor);\n    if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || gotoLocation === 'peek' && model.references.length > 1)) {\n      this._openInPeek(editor, model, range);\n    } else {\n      const next = model.firstReference();\n      const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n      const targetEditor = await this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n      if (peek && targetEditor) {\n        this._openInPeek(targetEditor, model, range);\n      } else {\n        model.dispose();\n      }\n      // keep remaining locations around when using\n      // 'goto'-mode\n      if (gotoLocation === 'goto') {\n        symbolNavService.put(next);\n      }\n    }\n  }\n  async _openReference(editor, editorService, reference, sideBySide, highlight) {\n    // range is the target-selection-range when we have one\n    // and the fallback is the 'full' range\n    let range = undefined;\n    if (isLocationLink(reference)) {\n      range = reference.targetSelectionRange;\n    }\n    if (!range) {\n      range = reference.range;\n    }\n    if (!range) {\n      return undefined;\n    }\n    const targetEditor = await editorService.openCodeEditor({\n      resource: reference.uri,\n      options: {\n        selection: Range.collapseToStart(range),\n        selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n        selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n      }\n    }, editor, sideBySide);\n    if (!targetEditor) {\n      return undefined;\n    }\n    if (highlight) {\n      const modelNow = targetEditor.getModel();\n      const decorations = targetEditor.createDecorationsCollection([{\n        range,\n        options: {\n          description: 'symbol-navigate-action-highlight',\n          className: 'symbolHighlight'\n        }\n      }]);\n      setTimeout(() => {\n        if (targetEditor.getModel() === modelNow) {\n          decorations.clear();\n        }\n      }, 350);\n    }\n    return targetEditor;\n  }\n  _openInPeek(target, model, range) {\n    const controller = ReferencesController.get(target);\n    if (controller && target.hasModel()) {\n      controller.toggleWidget(range ?? target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n    } else {\n      model.dispose();\n    }\n  }\n}\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, false, token), nls.localize('def.title', 'Definitions'));\n  }\n  _getNoResultFoundMessage(info) {\n    return info && info.word ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word) : nls.localize('generic.noResults', \"No definition found\");\n  }\n  _getAlternativeCommand(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n  }\n  _getGoToPreference(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDefinitions;\n  }\n}\nregisterAction2(class GoToDefinitionAction extends DefinitionAction {\n  static {\n    this.id = 'editor.action.revealDefinition';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToDefinitionAction.id,\n      title: {\n        ...nls.localize2('actions.goToDecl.label', \"Go to Definition\"),\n        mnemonicTitle: nls.localize({\n          key: 'miGotoDefinition',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Definition\")\n      },\n      precondition: EditorContextKeys.hasDefinitionProvider,\n      keybinding: [{\n        when: EditorContextKeys.editorTextFocus,\n        primary: 70 /* KeyCode.F12 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }, {\n        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }],\n      menu: [{\n        id: MenuId.EditorContext,\n        group: 'navigation',\n        order: 1.1\n      }, {\n        id: MenuId.MenubarGoMenu,\n        precondition: null,\n        group: '4_symbol_nav',\n        order: 2\n      }]\n    });\n    CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n  }\n});\nregisterAction2(class OpenDefinitionToSideAction extends DefinitionAction {\n  static {\n    this.id = 'editor.action.revealDefinitionAside';\n  }\n  constructor() {\n    super({\n      openToSide: true,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: OpenDefinitionToSideAction.id,\n      title: nls.localize2('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      keybinding: [{\n        when: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 70 /* KeyCode.F12 */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }, {\n        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }]\n    });\n    CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n  }\n});\nregisterAction2(class PeekDefinitionAction extends DefinitionAction {\n  static {\n    this.id = 'editor.action.peekDefinition';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekDefinitionAction.id,\n      title: nls.localize2('actions.previewDecl.label', \"Peek Definition\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      keybinding: {\n        when: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menu: {\n        id: MenuId.EditorContextPeek,\n        group: 'peek',\n        order: 2\n      }\n    });\n    CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n  }\n});\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, false, token), nls.localize('decl.title', 'Declarations'));\n  }\n  _getNoResultFoundMessage(info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  }\n  _getAlternativeCommand(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n  }\n  _getGoToPreference(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDeclarations;\n  }\n}\nregisterAction2(class GoToDeclarationAction extends DeclarationAction {\n  static {\n    this.id = 'editor.action.revealDeclaration';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToDeclarationAction.id,\n      title: {\n        ...nls.localize2('actions.goToDeclaration.label', \"Go to Declaration\"),\n        mnemonicTitle: nls.localize({\n          key: 'miGotoDeclaration',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Declaration\")\n      },\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menu: [{\n        id: MenuId.EditorContext,\n        group: 'navigation',\n        order: 1.3\n      }, {\n        id: MenuId.MenubarGoMenu,\n        precondition: null,\n        group: '4_symbol_nav',\n        order: 3\n      }]\n    });\n  }\n  _getNoResultFoundMessage(info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  }\n});\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: 'editor.action.peekDeclaration',\n      title: nls.localize2('actions.peekDecl.label', \"Peek Declaration\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menu: {\n        id: MenuId.EditorContextPeek,\n        group: 'peek',\n        order: 3\n      }\n    });\n  }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, false, token), nls.localize('typedef.title', 'Type Definitions'));\n  }\n  _getNoResultFoundMessage(info) {\n    return info && info.word ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word) : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n  }\n  _getAlternativeCommand(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n  }\n  _getGoToPreference(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n  }\n}\nregisterAction2(class GoToTypeDefinitionAction extends TypeDefinitionAction {\n  static {\n    this.ID = 'editor.action.goToTypeDefinition';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToTypeDefinitionAction.ID,\n      title: {\n        ...nls.localize2('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n        mnemonicTitle: nls.localize({\n          key: 'miGotoTypeDefinition',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Type Definition\")\n      },\n      precondition: EditorContextKeys.hasTypeDefinitionProvider,\n      keybinding: {\n        when: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menu: [{\n        id: MenuId.EditorContext,\n        group: 'navigation',\n        order: 1.4\n      }, {\n        id: MenuId.MenubarGoMenu,\n        precondition: null,\n        group: '4_symbol_nav',\n        order: 3\n      }]\n    });\n  }\n});\nregisterAction2(class PeekTypeDefinitionAction extends TypeDefinitionAction {\n  static {\n    this.ID = 'editor.action.peekTypeDefinition';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekTypeDefinitionAction.ID,\n      title: nls.localize2('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menu: {\n        id: MenuId.EditorContextPeek,\n        group: 'peek',\n        order: 4\n      }\n    });\n  }\n});\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, false, token), nls.localize('impl.title', 'Implementations'));\n  }\n  _getNoResultFoundMessage(info) {\n    return info && info.word ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word) : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n  }\n  _getAlternativeCommand(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n  }\n  _getGoToPreference(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).multipleImplementations;\n  }\n}\nregisterAction2(class GoToImplementationAction extends ImplementationAction {\n  static {\n    this.ID = 'editor.action.goToImplementation';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToImplementationAction.ID,\n      title: {\n        ...nls.localize2('actions.goToImplementation.label', \"Go to Implementations\"),\n        mnemonicTitle: nls.localize({\n          key: 'miGotoImplementation',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Implementations\")\n      },\n      precondition: EditorContextKeys.hasImplementationProvider,\n      keybinding: {\n        when: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menu: [{\n        id: MenuId.EditorContext,\n        group: 'navigation',\n        order: 1.45\n      }, {\n        id: MenuId.MenubarGoMenu,\n        precondition: null,\n        group: '4_symbol_nav',\n        order: 4\n      }]\n    });\n  }\n});\nregisterAction2(class PeekImplementationAction extends ImplementationAction {\n  static {\n    this.ID = 'editor.action.peekImplementation';\n  }\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekImplementationAction.ID,\n      title: nls.localize2('actions.peekImplementation.label', \"Peek Implementations\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      keybinding: {\n        when: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menu: {\n        id: MenuId.EditorContextPeek,\n        group: 'peek',\n        order: 5\n      }\n    });\n  }\n});\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n  _getNoResultFoundMessage(info) {\n    return info ? nls.localize('references.no', \"No references found for '{0}'\", info.word) : nls.localize('references.noGeneric', \"No references found\");\n  }\n  _getAlternativeCommand(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n  }\n  _getGoToPreference(editor) {\n    return editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n  }\n}\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: 'editor.action.goToReferences',\n      title: {\n        ...nls.localize2('goToReferences.label', \"Go to References\"),\n        mnemonicTitle: nls.localize({\n          key: 'miGotoReference',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&References\")\n      },\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      keybinding: {\n        when: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menu: [{\n        id: MenuId.EditorContext,\n        group: 'navigation',\n        order: 1.45\n      }, {\n        id: MenuId.MenubarGoMenu,\n        precondition: null,\n        group: '4_symbol_nav',\n        order: 5\n      }]\n    });\n  }\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, false, token), nls.localize('ref.title', 'References'));\n  }\n});\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\n  constructor() {\n    super({\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: 'editor.action.referenceSearch.trigger',\n      title: nls.localize2('references.action.label', \"Peek References\"),\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menu: {\n        id: MenuId.EditorContextPeek,\n        group: 'peek',\n        order: 6\n      }\n    });\n  }\n  async _getLocationModel(languageFeaturesService, model, position, token) {\n    return new ReferencesModel(await getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, false, token), nls.localize('ref.title', 'References'));\n  }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n  constructor(config, _references, _gotoMultipleBehaviour) {\n    super(config, {\n      id: 'editor.action.goToLocation',\n      title: nls.localize2('label.generic', \"Go to Any Symbol\"),\n      precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated())\n    });\n    this._references = _references;\n    this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n  }\n  async _getLocationModel(languageFeaturesService, _model, _position, _token) {\n    return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n  }\n  _getNoResultFoundMessage(info) {\n    return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n  }\n  _getGoToPreference(editor) {\n    return this._gotoMultipleBehaviour ?? editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n  }\n  _getAlternativeCommand() {\n    return '';\n  }\n}\nCommandsRegistry.registerCommand({\n  id: 'editor.action.goToLocations',\n  metadata: {\n    description: 'Go to locations from a position in a file',\n    args: [{\n      name: 'uri',\n      description: 'The text document in which to start',\n      constraint: URI\n    }, {\n      name: 'position',\n      description: 'The position at which to start',\n      constraint: corePosition.Position.isIPosition\n    }, {\n      name: 'locations',\n      description: 'An array of locations.',\n      constraint: Array\n    }, {\n      name: 'multiple',\n      description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`'\n    }, {\n      name: 'noResultsMessage',\n      description: 'Human readable message that shows when locations is empty.'\n    }]\n  },\n  handler: async (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => {\n    assertType(URI.isUri(resource));\n    assertType(corePosition.Position.isIPosition(position));\n    assertType(Array.isArray(references));\n    assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n    assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n    const editorService = accessor.get(ICodeEditorService);\n    const editor = await editorService.openCodeEditor({\n      resource\n    }, editorService.getFocusedCodeEditor());\n    if (isCodeEditor(editor)) {\n      editor.setPosition(position);\n      editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n      return editor.invokeWithinContext(accessor => {\n        const command = new class extends GenericGoToLocationAction {\n          _getNoResultFoundMessage(info) {\n            return noResultsMessage || super._getNoResultFoundMessage(info);\n          }\n        }({\n          muteMessage: !Boolean(noResultsMessage),\n          openInPeek: Boolean(openInPeek),\n          openToSide: false\n        }, references, multiple);\n        accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n      });\n    }\n  }\n});\nCommandsRegistry.registerCommand({\n  id: 'editor.action.peekLocations',\n  metadata: {\n    description: 'Peek locations from a position in a file',\n    args: [{\n      name: 'uri',\n      description: 'The text document in which to start',\n      constraint: URI\n    }, {\n      name: 'position',\n      description: 'The position at which to start',\n      constraint: corePosition.Position.isIPosition\n    }, {\n      name: 'locations',\n      description: 'An array of locations.',\n      constraint: Array\n    }, {\n      name: 'multiple',\n      description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`'\n    }]\n  },\n  handler: async (accessor, resource, position, references, multiple) => {\n    accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n  }\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n  id: 'editor.action.findReferences',\n  handler: (accessor, resource, position) => {\n    assertType(URI.isUri(resource));\n    assertType(corePosition.Position.isIPosition(position));\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const codeEditorService = accessor.get(ICodeEditorService);\n    return codeEditorService.openCodeEditor({\n      resource\n    }, codeEditorService.getFocusedCodeEditor()).then(control => {\n      if (!isCodeEditor(control) || !control.hasModel()) {\n        return undefined;\n      }\n      const controller = ReferencesController.get(control);\n      if (!controller) {\n        return undefined;\n      }\n      const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n      const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n      return Promise.resolve(controller.toggleWidget(range, references, false));\n    });\n  }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as objects from '../../../../base/common/objects.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n  constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n    super(domElement, {\n      ...parentEditor.getRawOptions(),\n      overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode()\n    }, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n    this._parentEditor = parentEditor;\n    this._overwriteOptions = options;\n    // Overwrite parent's options\n    super.updateOptions(this._overwriteOptions);\n    this._register(parentEditor.onDidChangeConfiguration(e => this._onParentConfigurationChanged(e)));\n  }\n  getParentEditor() {\n    return this._parentEditor;\n  }\n  _onParentConfigurationChanged(e) {\n    super.updateOptions(this._parentEditor.getRawOptions());\n    super.updateOptions(this._overwriteOptions);\n  }\n  updateOptions(newOptions) {\n    objects.mixin(this._overwriteOptions, newOptions, true);\n    super.updateOptions(this._overwriteOptions);\n  }\n};\nEmbeddedCodeEditorWidget = __decorate([__param(4, IInstantiationService), __param(5, ICodeEditorService), __param(6, ICommandService), __param(7, IContextKeyService), __param(8, IThemeService), __param(9, INotificationService), __param(10, IAccessibilityService), __param(11, ILanguageConfigurationService), __param(12, ILanguageFeaturesService)], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ReferencesController_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nimport { EditorContextKeys } from '../../../../common/editorContextKeys.js';\nimport { InputFocusedContext } from '../../../../../platform/contextkey/common/contextkeys.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = /*#__PURE__*/(() => {\n  let ReferencesController = class ReferencesController {\n    static {\n      ReferencesController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.referencesController';\n    }\n    static get(editor) {\n      return editor.getContribution(ReferencesController_1.ID);\n    }\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n      this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n      this._editor = _editor;\n      this._editorService = _editorService;\n      this._notificationService = _notificationService;\n      this._instantiationService = _instantiationService;\n      this._storageService = _storageService;\n      this._configurationService = _configurationService;\n      this._disposables = new DisposableStore();\n      this._requestIdPool = 0;\n      this._ignoreModelChangeEvent = false;\n      this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    dispose() {\n      this._referenceSearchVisible.reset();\n      this._disposables.dispose();\n      this._widget?.dispose();\n      this._model?.dispose();\n      this._widget = undefined;\n      this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n      // close current widget and return early is position didn't change\n      let widgetPosition;\n      if (this._widget) {\n        widgetPosition = this._widget.position;\n      }\n      this.closeWidget();\n      if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n        return;\n      }\n      this._peekMode = peekMode;\n      this._referenceSearchVisible.set(true);\n      // close the widget on model/mode changes\n      this._disposables.add(this._editor.onDidChangeModelLanguage(() => {\n        this.closeWidget();\n      }));\n      this._disposables.add(this._editor.onDidChangeModel(() => {\n        if (!this._ignoreModelChangeEvent) {\n          this.closeWidget();\n        }\n      }));\n      const storageKey = 'peekViewLayout';\n      const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n      this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n      this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n      this._widget.show(range);\n      this._disposables.add(this._widget.onDidClose(() => {\n        modelPromise.cancel();\n        if (this._widget) {\n          this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n          if (!this._widget.isClosing) {\n            // to prevent calling this too many times, check whether it was already closing.\n            this.closeWidget();\n          }\n          this._widget = undefined;\n        } else {\n          this.closeWidget();\n        }\n      }));\n      this._disposables.add(this._widget.onDidSelectReference(event => {\n        const {\n          element,\n          kind\n        } = event;\n        if (!element) {\n          return;\n        }\n        switch (kind) {\n          case 'open':\n            if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n              // when stable peek is configured we don't close\n              // the peek window on selecting the editor\n              this.openReference(element, false, false);\n            }\n            break;\n          case 'side':\n            this.openReference(element, true, false);\n            break;\n          case 'goto':\n            if (peekMode) {\n              this._gotoReference(element, true);\n            } else {\n              this.openReference(element, false, true);\n            }\n            break;\n        }\n      }));\n      const requestId = ++this._requestIdPool;\n      modelPromise.then(model => {\n        // still current request? widget still open?\n        if (requestId !== this._requestIdPool || !this._widget) {\n          model.dispose();\n          return undefined;\n        }\n        this._model?.dispose();\n        this._model = model;\n        // show widget\n        return this._widget.setModel(this._model).then(() => {\n          if (this._widget && this._model && this._editor.hasModel()) {\n            // might have been closed\n            // set title\n            if (!this._model.isEmpty) {\n              this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n            } else {\n              this._widget.setMetaTitle('');\n            }\n            // set 'best' selection\n            const uri = this._editor.getModel().uri;\n            const pos = new Position(range.startLineNumber, range.startColumn);\n            const selection = this._model.nearestReference(uri, pos);\n            if (selection) {\n              return this._widget.setSelection(selection).then(() => {\n                if (this._widget && this._editor.getOption(87 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                  this._widget.focusOnPreviewEditor();\n                }\n              });\n            }\n          }\n          return undefined;\n        });\n      }, error => {\n        this._notificationService.error(error);\n      });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n      if (!this._widget) {\n        // can be called while still resolving...\n        return;\n      }\n      if (this._widget.isPreviewEditorFocused()) {\n        this._widget.focusOnReferenceTree();\n      } else {\n        this._widget.focusOnPreviewEditor();\n      }\n    }\n    async goToNextOrPreviousReference(fwd) {\n      if (!this._editor.hasModel() || !this._model || !this._widget) {\n        // can be called while still resolving...\n        return;\n      }\n      const currentPosition = this._widget.position;\n      if (!currentPosition) {\n        return;\n      }\n      const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n      if (!source) {\n        return;\n      }\n      const target = this._model.nextOrPreviousReference(source, fwd);\n      const editorFocus = this._editor.hasTextFocus();\n      const previewEditorFocus = this._widget.isPreviewEditorFocused();\n      await this._widget.setSelection(target);\n      await this._gotoReference(target, false);\n      if (editorFocus) {\n        this._editor.focus();\n      } else if (this._widget && previewEditorFocus) {\n        this._widget.focusOnPreviewEditor();\n      }\n    }\n    async revealReference(reference) {\n      if (!this._editor.hasModel() || !this._model || !this._widget) {\n        // can be called while still resolving...\n        return;\n      }\n      await this._widget.revealReference(reference);\n    }\n    closeWidget(focusEditor = true) {\n      this._widget?.dispose();\n      this._model?.dispose();\n      this._referenceSearchVisible.reset();\n      this._disposables.clear();\n      this._widget = undefined;\n      this._model = undefined;\n      if (focusEditor) {\n        this._editor.focus();\n      }\n      this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref, pinned) {\n      this._widget?.hide();\n      this._ignoreModelChangeEvent = true;\n      const range = Range.lift(ref.range).collapseToStart();\n      return this._editorService.openCodeEditor({\n        resource: ref.uri,\n        options: {\n          selection: range,\n          selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */,\n          pinned\n        }\n      }, this._editor).then(openedEditor => {\n        this._ignoreModelChangeEvent = false;\n        if (!openedEditor || !this._widget) {\n          // something went wrong...\n          this.closeWidget();\n          return;\n        }\n        if (this._editor === openedEditor) {\n          //\n          this._widget.show(range);\n          this._widget.focusOnReferenceTree();\n        } else {\n          // we opened a different editor instance which means a different controller instance.\n          // therefore we stop with this controller and continue with the other\n          const other = ReferencesController_1.get(openedEditor);\n          const model = this._model.clone();\n          this.closeWidget();\n          openedEditor.focus();\n          other?.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), this._peekMode ?? false);\n        }\n      }, err => {\n        this._ignoreModelChangeEvent = false;\n        onUnexpectedError(err);\n      });\n    }\n    openReference(ref, sideBySide, pinned) {\n      // clear stage\n      if (!sideBySide) {\n        this.closeWidget();\n      }\n      const {\n        uri,\n        range\n      } = ref;\n      this._editorService.openCodeEditor({\n        resource: uri,\n        options: {\n          selection: range,\n          selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */,\n          pinned\n        }\n      }, this._editor, sideBySide);\n    }\n  };\n  return ReferencesController;\n})();\nReferencesController = ReferencesController_1 = __decorate([__param(2, IContextKeyService), __param(3, ICodeEditorService), __param(4, INotificationService), __param(5, IInstantiationService), __param(6, IStorageService), __param(7, IConfigurationService)], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n  const outerEditor = getOuterEditor(accessor);\n  if (!outerEditor) {\n    return;\n  }\n  const controller = ReferencesController.get(outerEditor);\n  if (controller) {\n    fn(controller);\n  }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'togglePeekWidgetFocus',\n  weight: 100 /* KeybindingWeight.EditorContrib */,\n  primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n  when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n  handler(accessor) {\n    withController(accessor, controller => {\n      controller.changeFocusBetweenPreviewAndReferences();\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToNextReference',\n  weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n  primary: 62 /* KeyCode.F4 */,\n  secondary: [70 /* KeyCode.F12 */],\n  when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n  handler(accessor) {\n    withController(accessor, controller => {\n      controller.goToNextOrPreviousReference(true);\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToPreviousReference',\n  weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n  primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n  secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n  when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n  handler(accessor) {\n    withController(accessor, controller => {\n      controller.goToNextOrPreviousReference(false);\n    });\n  }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n  id: 'closeReferenceSearch',\n  weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n  primary: 9 /* KeyCode.Escape */,\n  secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n  when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n  id: 'closeReferenceSearch',\n  weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n  primary: 9 /* KeyCode.Escape */,\n  secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n  when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'), ContextKeyExpr.or(EditorContextKeys.editorTextFocus, InputFocusedContext.negate()))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'revealReference',\n  weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n  primary: 3 /* KeyCode.Enter */,\n  mac: {\n    primary: 3 /* KeyCode.Enter */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n  },\n  when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n  handler(accessor) {\n    const listService = accessor.get(IListService);\n    const focus = listService.lastFocusedList?.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n      withController(accessor, controller => controller.revealReference(focus[0]));\n    }\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'openReferenceToSide',\n  weight: 100 /* KeybindingWeight.EditorContrib */,\n  primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n  mac: {\n    primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n  },\n  when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n  handler(accessor) {\n    const listService = accessor.get(IListService);\n    const focus = listService.lastFocusedList?.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n      withController(accessor, controller => controller.openReference(focus[0], true, true));\n    }\n  }\n});\nCommandsRegistry.registerCommand('openReference', accessor => {\n  const listService = accessor.get(IListService);\n  const focus = listService.lastFocusedList?.getFocus();\n  if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n    withController(accessor, controller => controller.openReference(focus[0], false, true));\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n  constructor() {\n    this._widgets = new Map();\n  }\n  addExclusiveWidget(editor, widget) {\n    const existing = this._widgets.get(editor);\n    if (existing) {\n      existing.listener.dispose();\n      existing.widget.dispose();\n    }\n    const remove = () => {\n      const data = this._widgets.get(editor);\n      if (data && data.widget === widget) {\n        data.listener.dispose();\n        this._widgets.delete(editor);\n      }\n    };\n    this._widgets.set(editor, {\n      widget,\n      listener: widget.onDidClose(remove)\n    });\n  }\n}, 1 /* InstantiationType.Delayed */);\nexport var PeekContext;\n(function (PeekContext) {\n  PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n  PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n  static {\n    this.ID = 'editor.contrib.referenceController';\n  }\n  constructor(editor, contextKeyService) {\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n      PeekContext.inPeekEditor.bindTo(contextKeyService);\n    }\n  }\n  dispose() {}\n};\nPeekContextController = __decorate([__param(1, IContextKeyService)], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to define a context key\nexport function getOuterEditor(accessor) {\n  const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n  if (editor instanceof EmbeddedCodeEditorWidget) {\n    return editor.getParentEditor();\n  }\n  return editor;\n}\nconst defaultOptions = {\n  headerBackgroundColor: Color.white,\n  primaryHeadingColor: Color.fromHex('#333333'),\n  secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n  constructor(editor, options, instantiationService) {\n    super(editor, options);\n    this.instantiationService = instantiationService;\n    this._onDidClose = new Emitter();\n    this.onDidClose = this._onDidClose.event;\n    objects.mixin(this.options, defaultOptions, false);\n  }\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n      super.dispose();\n      this._onDidClose.fire(this);\n    }\n  }\n  style(styles) {\n    const options = this.options;\n    if (styles.headerBackgroundColor) {\n      options.headerBackgroundColor = styles.headerBackgroundColor;\n    }\n    if (styles.primaryHeadingColor) {\n      options.primaryHeadingColor = styles.primaryHeadingColor;\n    }\n    if (styles.secondaryHeadingColor) {\n      options.secondaryHeadingColor = styles.secondaryHeadingColor;\n    }\n    super.style(styles);\n  }\n  _applyStyles() {\n    super._applyStyles();\n    const options = this.options;\n    if (this._headElement && options.headerBackgroundColor) {\n      this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n    }\n    if (this._primaryHeading && options.primaryHeadingColor) {\n      this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n    }\n    if (this._secondaryHeading && options.secondaryHeadingColor) {\n      this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n    }\n    if (this._bodyElement && options.frameColor) {\n      this._bodyElement.style.borderColor = options.frameColor.toString();\n    }\n  }\n  _fillContainer(container) {\n    this.setCssClass('peekview-widget');\n    this._headElement = dom.$('.head');\n    this._bodyElement = dom.$('.body');\n    this._fillHead(this._headElement);\n    this._fillBody(this._bodyElement);\n    container.appendChild(this._headElement);\n    container.appendChild(this._bodyElement);\n  }\n  _fillHead(container, noCloseAction) {\n    this._titleElement = dom.$('.peekview-title');\n    if (this.options.supportOnTitleClick) {\n      this._titleElement.classList.add('clickable');\n      dom.addStandardDisposableListener(this._titleElement, 'click', event => this._onTitleClick(event));\n    }\n    dom.append(this._headElement, this._titleElement);\n    this._fillTitleIcon(this._titleElement);\n    this._primaryHeading = dom.$('span.filename');\n    this._secondaryHeading = dom.$('span.dirname');\n    this._metaHeading = dom.$('span.meta');\n    dom.append(this._titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n    const actionsContainer = dom.$('.peekview-actions');\n    dom.append(this._headElement, actionsContainer);\n    const actionBarOptions = this._getActionBarOptions();\n    this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n    this._disposables.add(this._actionbarWidget);\n    if (!noCloseAction) {\n      this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), ThemeIcon.asClassName(Codicon.close), true, () => {\n        this.dispose();\n        return Promise.resolve();\n      }), {\n        label: false,\n        icon: true\n      });\n    }\n  }\n  _fillTitleIcon(container) {}\n  _getActionBarOptions() {\n    return {\n      actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n      orientation: 0 /* ActionsOrientation.HORIZONTAL */\n    };\n  }\n  _onTitleClick(event) {\n    // implement me if supportOnTitleClick option is set\n  }\n  setTitle(primaryHeading, secondaryHeading) {\n    if (this._primaryHeading && this._secondaryHeading) {\n      this._primaryHeading.innerText = primaryHeading;\n      this._primaryHeading.setAttribute('title', primaryHeading);\n      if (secondaryHeading) {\n        this._secondaryHeading.innerText = secondaryHeading;\n      } else {\n        dom.clearNode(this._secondaryHeading);\n      }\n    }\n  }\n  setMetaTitle(value) {\n    if (this._metaHeading) {\n      if (value) {\n        this._metaHeading.innerText = value;\n        dom.show(this._metaHeading);\n      } else {\n        dom.hide(this._metaHeading);\n      }\n    }\n  }\n  _doLayout(heightInPixel, widthInPixel) {\n    if (!this._isShowing && heightInPixel < 0) {\n      // Looks like the view zone got folded away!\n      this.dispose();\n      return;\n    }\n    const headHeight = Math.ceil(this.editor.getOption(67 /* EditorOption.lineHeight */) * 1.2);\n    const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n    this._doLayoutHead(headHeight, widthInPixel);\n    this._doLayoutBody(bodyHeight, widthInPixel);\n  }\n  _doLayoutHead(heightInPixel, widthInPixel) {\n    if (this._headElement) {\n      this._headElement.style.height = `${heightInPixel}px`;\n      this._headElement.style.lineHeight = this._headElement.style.height;\n    }\n  }\n  _doLayoutBody(heightInPixel, widthInPixel) {\n    if (this._bodyElement) {\n      this._bodyElement.style.height = `${heightInPixel}px`;\n    }\n  }\n};\nPeekViewWidget = __decorate([__param(2, IInstantiationService)], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', {\n  dark: '#252526',\n  light: '#F3F3F3',\n  hcDark: Color.black,\n  hcLight: Color.white\n}, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', {\n  dark: Color.white,\n  light: Color.black,\n  hcDark: Color.white,\n  hcLight: editorForeground\n}, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', {\n  dark: '#ccccccb3',\n  light: '#616161',\n  hcDark: '#FFFFFF99',\n  hcLight: '#292929'\n}, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', {\n  dark: editorInfoForeground,\n  light: editorInfoForeground,\n  hcDark: contrastBorder,\n  hcLight: contrastBorder\n}, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', {\n  dark: '#252526',\n  light: '#F3F3F3',\n  hcDark: Color.black,\n  hcLight: Color.white\n}, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', {\n  dark: '#bbbbbb',\n  light: '#646465',\n  hcDark: Color.white,\n  hcLight: editorForeground\n}, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', {\n  dark: Color.white,\n  light: '#1E1E1E',\n  hcDark: Color.white,\n  hcLight: editorForeground\n}, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', {\n  dark: '#3399ff33',\n  light: '#3399ff33',\n  hcDark: null,\n  hcLight: null\n}, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', {\n  dark: Color.white,\n  light: '#6C6C6C',\n  hcDark: Color.white,\n  hcLight: editorForeground\n}, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', {\n  dark: '#001F33',\n  light: '#F2F8FC',\n  hcDark: Color.black,\n  hcLight: Color.white\n}, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', peekViewEditorBackground, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewEditorStickyScrollBackground = registerColor('peekViewEditorStickyScroll.background', peekViewEditorBackground, nls.localize('peekViewEditorStickScrollBackground', 'Background color of sticky scroll in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', {\n  dark: '#ea5c004d',\n  light: '#ea5c004d',\n  hcDark: null,\n  hcLight: null\n}, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', {\n  dark: '#ff8f0099',\n  light: '#f5d802de',\n  hcDark: null,\n  hcLight: null\n}, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', {\n  dark: null,\n  light: null,\n  hcDark: activeContrastBorder,\n  hcLight: activeContrastBorder\n}, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nconst defaultColor = new Color(new RGBA(0, 122, 204));\nconst defaultOptions = {\n  showArrow: true,\n  showFrame: true,\n  className: '',\n  frameColor: defaultColor,\n  arrowColor: defaultColor,\n  keepEditorSelection: false\n};\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\nclass ViewZoneDelegate {\n  constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight, showInHiddenAreas, ordinal) {\n    this.id = ''; // A valid zone id should be greater than 0\n    this.domNode = domNode;\n    this.afterLineNumber = afterLineNumber;\n    this.afterColumn = afterColumn;\n    this.heightInLines = heightInLines;\n    this.showInHiddenAreas = showInHiddenAreas;\n    this.ordinal = ordinal;\n    this._onDomNodeTop = onDomNodeTop;\n    this._onComputedHeight = onComputedHeight;\n  }\n  onDomNodeTop(top) {\n    this._onDomNodeTop(top);\n  }\n  onComputedHeight(height) {\n    this._onComputedHeight(height);\n  }\n}\nexport class OverlayWidgetDelegate {\n  constructor(id, domNode) {\n    this._id = id;\n    this._domNode = domNode;\n  }\n  getId() {\n    return this._id;\n  }\n  getDomNode() {\n    return this._domNode;\n  }\n  getPosition() {\n    return null;\n  }\n}\nclass Arrow {\n  static {\n    this._IdGenerator = new IdGenerator('.arrow-decoration-');\n  }\n  constructor(_editor) {\n    this._editor = _editor;\n    this._ruleName = Arrow._IdGenerator.nextId();\n    this._decorations = this._editor.createDecorationsCollection();\n    this._color = null;\n    this._height = -1;\n  }\n  dispose() {\n    this.hide();\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n  }\n  set color(value) {\n    if (this._color !== value) {\n      this._color = value;\n      this._updateStyle();\n    }\n  }\n  set height(value) {\n    if (this._height !== value) {\n      this._height = value;\n      this._updateStyle();\n    }\n  }\n  _updateStyle() {\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n    dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `);\n  }\n  show(where) {\n    if (where.column === 1) {\n      // the arrow isn't pretty at column 1 and we need to push it out a little\n      where = {\n        lineNumber: where.lineNumber,\n        column: 2\n      };\n    }\n    this._decorations.set([{\n      range: Range.fromPositions(where),\n      options: {\n        description: 'zone-widget-arrow',\n        className: this._ruleName,\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n      }\n    }]);\n  }\n  hide() {\n    this._decorations.clear();\n  }\n}\nexport class ZoneWidget {\n  constructor(editor, options = {}) {\n    this._arrow = null;\n    this._overlayWidget = null;\n    this._resizeSash = null;\n    this._viewZone = null;\n    this._disposables = new DisposableStore();\n    this.container = null;\n    this._isShowing = false;\n    this.editor = editor;\n    this._positionMarkerId = this.editor.createDecorationsCollection();\n    this.options = objects.deepClone(options);\n    objects.mixin(this.options, defaultOptions, false);\n    this.domNode = document.createElement('div');\n    if (!this.options.isAccessible) {\n      this.domNode.setAttribute('aria-hidden', 'true');\n      this.domNode.setAttribute('role', 'presentation');\n    }\n    this._disposables.add(this.editor.onDidLayoutChange(info => {\n      const width = this._getWidth(info);\n      this.domNode.style.width = width + 'px';\n      this.domNode.style.left = this._getLeft(info) + 'px';\n      this._onWidth(width);\n    }));\n  }\n  dispose() {\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n    if (this._viewZone) {\n      this.editor.changeViewZones(accessor => {\n        if (this._viewZone) {\n          accessor.removeZone(this._viewZone.id);\n        }\n        this._viewZone = null;\n      });\n    }\n    this._positionMarkerId.clear();\n    this._disposables.dispose();\n  }\n  create() {\n    this.domNode.classList.add('zone-widget');\n    if (this.options.className) {\n      this.domNode.classList.add(this.options.className);\n    }\n    this.container = document.createElement('div');\n    this.container.classList.add('zone-widget-container');\n    this.domNode.appendChild(this.container);\n    if (this.options.showArrow) {\n      this._arrow = new Arrow(this.editor);\n      this._disposables.add(this._arrow);\n    }\n    this._fillContainer(this.container);\n    this._initSash();\n    this._applyStyles();\n  }\n  style(styles) {\n    if (styles.frameColor) {\n      this.options.frameColor = styles.frameColor;\n    }\n    if (styles.arrowColor) {\n      this.options.arrowColor = styles.arrowColor;\n    }\n    this._applyStyles();\n  }\n  _applyStyles() {\n    if (this.container && this.options.frameColor) {\n      const frameColor = this.options.frameColor.toString();\n      this.container.style.borderTopColor = frameColor;\n      this.container.style.borderBottomColor = frameColor;\n    }\n    if (this._arrow && this.options.arrowColor) {\n      const arrowColor = this.options.arrowColor.toString();\n      this._arrow.color = arrowColor;\n    }\n  }\n  _getWidth(info) {\n    return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n  }\n  _getLeft(info) {\n    // If minimap is to the left, we move beyond it\n    if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n      return info.minimap.minimapWidth;\n    }\n    return 0;\n  }\n  _onViewZoneTop(top) {\n    this.domNode.style.top = top + 'px';\n  }\n  _onViewZoneHeight(height) {\n    this.domNode.style.height = `${height}px`;\n    if (this.container) {\n      const containerHeight = height - this._decoratingElementsHeight();\n      this.container.style.height = `${containerHeight}px`;\n      const layoutInfo = this.editor.getLayoutInfo();\n      this._doLayout(containerHeight, this._getWidth(layoutInfo));\n    }\n    this._resizeSash?.layout();\n  }\n  get position() {\n    const range = this._positionMarkerId.getRange(0);\n    if (!range) {\n      return undefined;\n    }\n    return range.getStartPosition();\n  }\n  show(rangeOrPos, heightInLines) {\n    const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n    this._isShowing = true;\n    this._showImpl(range, heightInLines);\n    this._isShowing = false;\n    this._positionMarkerId.set([{\n      range,\n      options: ModelDecorationOptions.EMPTY\n    }]);\n  }\n  hide() {\n    if (this._viewZone) {\n      this.editor.changeViewZones(accessor => {\n        if (this._viewZone) {\n          accessor.removeZone(this._viewZone.id);\n        }\n      });\n      this._viewZone = null;\n    }\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n    this._arrow?.hide();\n    this._positionMarkerId.clear();\n  }\n  _decoratingElementsHeight() {\n    const lineHeight = this.editor.getOption(67 /* EditorOption.lineHeight */);\n    let result = 0;\n    if (this.options.showArrow) {\n      const arrowHeight = Math.round(lineHeight / 3);\n      result += 2 * arrowHeight;\n    }\n    if (this.options.showFrame) {\n      const frameThickness = Math.round(lineHeight / 9);\n      result += 2 * frameThickness;\n    }\n    return result;\n  }\n  _showImpl(where, heightInLines) {\n    const position = where.getStartPosition();\n    const layoutInfo = this.editor.getLayoutInfo();\n    const width = this._getWidth(layoutInfo);\n    this.domNode.style.width = `${width}px`;\n    this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n    // Render the widget as zone (rendering) and widget (lifecycle)\n    const viewZoneDomNode = document.createElement('div');\n    viewZoneDomNode.style.overflow = 'hidden';\n    const lineHeight = this.editor.getOption(67 /* EditorOption.lineHeight */);\n    // adjust heightInLines to viewport\n    if (!this.options.allowUnlimitedHeight) {\n      const maxHeightInLines = Math.max(12, this.editor.getLayoutInfo().height / lineHeight * 0.8);\n      heightInLines = Math.min(heightInLines, maxHeightInLines);\n    }\n    let arrowHeight = 0;\n    let frameThickness = 0;\n    // Render the arrow one 1/3 of an editor line height\n    if (this._arrow && this.options.showArrow) {\n      arrowHeight = Math.round(lineHeight / 3);\n      this._arrow.height = arrowHeight;\n      this._arrow.show(position);\n    }\n    // Render the frame as 1/9 of an editor line height\n    if (this.options.showFrame) {\n      frameThickness = Math.round(lineHeight / 9);\n    }\n    // insert zone widget\n    this.editor.changeViewZones(accessor => {\n      if (this._viewZone) {\n        accessor.removeZone(this._viewZone.id);\n      }\n      if (this._overlayWidget) {\n        this.editor.removeOverlayWidget(this._overlayWidget);\n        this._overlayWidget = null;\n      }\n      this.domNode.style.top = '-1000px';\n      this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, top => this._onViewZoneTop(top), height => this._onViewZoneHeight(height), this.options.showInHiddenAreas, this.options.ordinal);\n      this._viewZone.id = accessor.addZone(this._viewZone);\n      this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n      this.editor.addOverlayWidget(this._overlayWidget);\n    });\n    if (this.container && this.options.showFrame) {\n      const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n      this.container.style.borderTopWidth = width + 'px';\n      this.container.style.borderBottomWidth = width + 'px';\n    }\n    const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n    if (this.container) {\n      this.container.style.top = arrowHeight + 'px';\n      this.container.style.height = containerHeight + 'px';\n      this.container.style.overflow = 'hidden';\n    }\n    this._doLayout(containerHeight, width);\n    if (!this.options.keepEditorSelection) {\n      this.editor.setSelection(where);\n    }\n    const model = this.editor.getModel();\n    if (model) {\n      const range = model.validateRange(new Range(where.startLineNumber, 1, where.endLineNumber + 1, 1));\n      this.revealRange(range, range.startLineNumber === model.getLineCount());\n    }\n  }\n  revealRange(range, isLastLine) {\n    if (isLastLine) {\n      this.editor.revealLineNearTop(range.endLineNumber, 0 /* ScrollType.Smooth */);\n    } else {\n      this.editor.revealRange(range, 0 /* ScrollType.Smooth */);\n    }\n  }\n  setCssClass(className, classToReplace) {\n    if (!this.container) {\n      return;\n    }\n    if (classToReplace) {\n      this.container.classList.remove(classToReplace);\n    }\n    this.container.classList.add(className);\n  }\n  _onWidth(widthInPixel) {\n    // implement in subclass\n  }\n  _doLayout(heightInPixel, widthInPixel) {\n    // implement in subclass\n  }\n  _relayout(newHeightInLines) {\n    if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n      this.editor.changeViewZones(accessor => {\n        if (this._viewZone) {\n          this._viewZone.heightInLines = newHeightInLines;\n          accessor.layoutZone(this._viewZone.id);\n        }\n      });\n    }\n  }\n  // --- sash\n  _initSash() {\n    if (this._resizeSash) {\n      return;\n    }\n    this._resizeSash = this._disposables.add(new Sash(this.domNode, this, {\n      orientation: 1 /* Orientation.HORIZONTAL */\n    }));\n    if (!this.options.isResizeable) {\n      this._resizeSash.state = 0 /* SashState.Disabled */;\n    }\n    let data;\n    this._disposables.add(this._resizeSash.onDidStart(e => {\n      if (this._viewZone) {\n        data = {\n          startY: e.startY,\n          heightInLines: this._viewZone.heightInLines\n        };\n      }\n    }));\n    this._disposables.add(this._resizeSash.onDidEnd(() => {\n      data = undefined;\n    }));\n    this._disposables.add(this._resizeSash.onDidChange(evt => {\n      if (data) {\n        const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(67 /* EditorOption.lineHeight */);\n        const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n        const newHeightInLines = data.heightInLines + roundedLineDelta;\n        if (newHeightInLines > 5 && newHeightInLines < 35) {\n          this._relayout(newHeightInLines);\n        }\n      }\n    }));\n  }\n  getHorizontalSashLeft() {\n    return 0;\n  }\n  getHorizontalSashTop() {\n    return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - this._decoratingElementsHeight() / 2;\n  }\n  getHorizontalSashWidth() {\n    const layoutInfo = this.editor.getLayoutInfo();\n    return layoutInfo.width - layoutInfo.minimap.minimapWidth;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n  constructor(isProviderFirst, parent, link, _rangeCallback) {\n    this.isProviderFirst = isProviderFirst;\n    this.parent = parent;\n    this.link = link;\n    this._rangeCallback = _rangeCallback;\n    this.id = defaultGenerator.nextId();\n  }\n  get uri() {\n    return this.link.uri;\n  }\n  get range() {\n    return this._range ?? this.link.targetSelectionRange ?? this.link.range;\n  }\n  set range(value) {\n    this._range = value;\n    this._rangeCallback(this);\n  }\n  get ariaMessage() {\n    const preview = this.parent.getPreview(this)?.preview(this.range);\n    if (!preview) {\n      return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n    } else {\n      return localize({\n        key: 'aria.oneReference.preview',\n        comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code']\n      }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n    }\n  }\n}\nexport class FilePreview {\n  constructor(_modelReference) {\n    this._modelReference = _modelReference;\n  }\n  dispose() {\n    this._modelReference.dispose();\n  }\n  preview(range, n = 8) {\n    const model = this._modelReference.object.textEditorModel;\n    if (!model) {\n      return undefined;\n    }\n    const {\n      startLineNumber,\n      startColumn,\n      endLineNumber,\n      endColumn\n    } = range;\n    const word = model.getWordUntilPosition({\n      lineNumber: startLineNumber,\n      column: startColumn - n\n    });\n    const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n    const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n    const inside = model.getValueInRange(range);\n    const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n    return {\n      value: before + inside + after,\n      highlight: {\n        start: before.length,\n        end: before.length + inside.length\n      }\n    };\n  }\n}\nexport class FileReferences {\n  constructor(parent, uri) {\n    this.parent = parent;\n    this.uri = uri;\n    this.children = [];\n    this._previews = new ResourceMap();\n  }\n  dispose() {\n    dispose(this._previews.values());\n    this._previews.clear();\n  }\n  getPreview(child) {\n    return this._previews.get(child.uri);\n  }\n  get ariaMessage() {\n    const len = this.children.length;\n    if (len === 1) {\n      return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n    } else {\n      return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n    }\n  }\n  async resolve(textModelResolverService) {\n    if (this._previews.size !== 0) {\n      return this;\n    }\n    for (const child of this.children) {\n      if (this._previews.has(child.uri)) {\n        continue;\n      }\n      try {\n        const ref = await textModelResolverService.createModelReference(child.uri);\n        this._previews.set(child.uri, new FilePreview(ref));\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    return this;\n  }\n}\nexport class ReferencesModel {\n  constructor(links, title) {\n    this.groups = [];\n    this.references = [];\n    this._onDidChangeReferenceRange = new Emitter();\n    this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n    this._links = links;\n    this._title = title;\n    // grouping and sorting\n    const [providersFirst] = links;\n    links.sort(ReferencesModel._compareReferences);\n    let current;\n    for (const link of links) {\n      if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n        // new group\n        current = new FileReferences(this, link.uri);\n        this.groups.push(current);\n      }\n      // append, check for equality first!\n      if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n        const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n        this.references.push(oneRef);\n        current.children.push(oneRef);\n      }\n    }\n  }\n  dispose() {\n    dispose(this.groups);\n    this._onDidChangeReferenceRange.dispose();\n    this.groups.length = 0;\n  }\n  clone() {\n    return new ReferencesModel(this._links, this._title);\n  }\n  get title() {\n    return this._title;\n  }\n  get isEmpty() {\n    return this.groups.length === 0;\n  }\n  get ariaMessage() {\n    if (this.isEmpty) {\n      return localize('aria.result.0', \"No results found\");\n    } else if (this.references.length === 1) {\n      return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n    } else if (this.groups.length === 1) {\n      return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n    } else {\n      return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n    }\n  }\n  nextOrPreviousReference(reference, next) {\n    const {\n      parent\n    } = reference;\n    let idx = parent.children.indexOf(reference);\n    const childCount = parent.children.length;\n    const groupCount = parent.parent.groups.length;\n    if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n      // cycling within one file\n      if (next) {\n        idx = (idx + 1) % childCount;\n      } else {\n        idx = (idx + childCount - 1) % childCount;\n      }\n      return parent.children[idx];\n    }\n    idx = parent.parent.groups.indexOf(parent);\n    if (next) {\n      idx = (idx + 1) % groupCount;\n      return parent.parent.groups[idx].children[0];\n    } else {\n      idx = (idx + groupCount - 1) % groupCount;\n      return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n    }\n  }\n  nearestReference(resource, position) {\n    const nearest = this.references.map((ref, idx) => {\n      return {\n        idx,\n        prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n        offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n      };\n    }).sort((a, b) => {\n      if (a.prefixLen > b.prefixLen) {\n        return -1;\n      } else if (a.prefixLen < b.prefixLen) {\n        return 1;\n      } else if (a.offsetDist < b.offsetDist) {\n        return -1;\n      } else if (a.offsetDist > b.offsetDist) {\n        return 1;\n      } else {\n        return 0;\n      }\n    })[0];\n    if (nearest) {\n      return this.references[nearest.idx];\n    }\n    return undefined;\n  }\n  referenceAt(resource, position) {\n    for (const ref of this.references) {\n      if (ref.uri.toString() === resource.toString()) {\n        if (Range.containsPosition(ref.range, position)) {\n          return ref;\n        }\n      }\n    }\n    return undefined;\n  }\n  firstReference() {\n    for (const ref of this.references) {\n      if (ref.isProviderFirst) {\n        return ref;\n      }\n    }\n    return this.references[0];\n  }\n  static _compareReferences(a, b) {\n    return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n  static {\n    this.DecorationOptions = ModelDecorationOptions.register({\n      description: 'reference-decoration',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      className: 'reference-decoration'\n    });\n  }\n  constructor(_editor, _model) {\n    this._editor = _editor;\n    this._model = _model;\n    this._decorations = new Map();\n    this._decorationIgnoreSet = new Set();\n    this._callOnDispose = new DisposableStore();\n    this._callOnModelChange = new DisposableStore();\n    this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n    this._onModelChanged();\n  }\n  dispose() {\n    this._callOnModelChange.dispose();\n    this._callOnDispose.dispose();\n    this.removeDecorations();\n  }\n  _onModelChanged() {\n    this._callOnModelChange.clear();\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (const ref of this._model.references) {\n      if (ref.uri.toString() === model.uri.toString()) {\n        this._addDecorations(ref.parent);\n        return;\n      }\n    }\n  }\n  _addDecorations(reference) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n    const newDecorations = [];\n    const newDecorationsActualIndex = [];\n    for (let i = 0, len = reference.children.length; i < len; i++) {\n      const oneReference = reference.children[i];\n      if (this._decorationIgnoreSet.has(oneReference.id)) {\n        continue;\n      }\n      if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n        continue;\n      }\n      newDecorations.push({\n        range: oneReference.range,\n        options: DecorationsManager.DecorationOptions\n      });\n      newDecorationsActualIndex.push(i);\n    }\n    this._editor.changeDecorations(changeAccessor => {\n      const decorations = changeAccessor.deltaDecorations([], newDecorations);\n      for (let i = 0; i < decorations.length; i++) {\n        this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n      }\n    });\n  }\n  _onDecorationChanged() {\n    const toRemove = [];\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (const [decorationId, reference] of this._decorations) {\n      const newRange = model.getDecorationRange(decorationId);\n      if (!newRange) {\n        continue;\n      }\n      let ignore = false;\n      if (Range.equalsRange(newRange, reference.range)) {\n        continue;\n      }\n      if (Range.spansMultipleLines(newRange)) {\n        ignore = true;\n      } else {\n        const lineLength = reference.range.endColumn - reference.range.startColumn;\n        const newLineLength = newRange.endColumn - newRange.startColumn;\n        if (lineLength !== newLineLength) {\n          ignore = true;\n        }\n      }\n      if (ignore) {\n        this._decorationIgnoreSet.add(reference.id);\n        toRemove.push(decorationId);\n      } else {\n        reference.range = newRange;\n      }\n    }\n    for (let i = 0, len = toRemove.length; i < len; i++) {\n      this._decorations.delete(toRemove[i]);\n    }\n    this._editor.removeDecorations(toRemove);\n  }\n  removeDecorations() {\n    this._editor.removeDecorations([...this._decorations.keys()]);\n    this._decorations.clear();\n  }\n}\nexport class LayoutData {\n  constructor() {\n    this.ratio = 0.7;\n    this.heightInLines = 18;\n  }\n  static fromJSON(raw) {\n    let ratio;\n    let heightInLines;\n    try {\n      const data = JSON.parse(raw);\n      ratio = data.ratio;\n      heightInLines = data.heightInLines;\n    } catch {\n      //\n    }\n    return {\n      ratio: ratio || 0.7,\n      heightInLines: heightInLines || 18\n    };\n  }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n  constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _keybindingService) {\n    super(editor, {\n      showFrame: false,\n      showArrow: true,\n      isResizeable: true,\n      isAccessible: true,\n      supportOnTitleClick: true\n    }, _instantiationService);\n    this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n    this.layoutData = layoutData;\n    this._textModelResolverService = _textModelResolverService;\n    this._instantiationService = _instantiationService;\n    this._peekViewService = _peekViewService;\n    this._uriLabel = _uriLabel;\n    this._keybindingService = _keybindingService;\n    this._disposeOnNewModel = new DisposableStore();\n    this._callOnDispose = new DisposableStore();\n    this._onDidSelectReference = new Emitter();\n    this.onDidSelectReference = this._onDidSelectReference.event;\n    this._dim = new dom.Dimension(0, 0);\n    this._isClosing = false; // whether or not a dispose is already in progress\n    this._applyTheme(themeService.getColorTheme());\n    this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    this._peekViewService.addExclusiveWidget(editor, this);\n    this.create();\n  }\n  get isClosing() {\n    return this._isClosing;\n  }\n  dispose() {\n    this._isClosing = true;\n    this.setModel(undefined);\n    this._callOnDispose.dispose();\n    this._disposeOnNewModel.dispose();\n    dispose(this._preview);\n    dispose(this._previewNotAvailableMessage);\n    dispose(this._tree);\n    dispose(this._previewModelReference);\n    this._splitView.dispose();\n    super.dispose();\n  }\n  _applyTheme(theme) {\n    const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n    this.style({\n      arrowColor: borderColor,\n      frameColor: borderColor,\n      headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n      primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n    });\n  }\n  show(where) {\n    super.show(where, this.layoutData.heightInLines || 18);\n  }\n  focusOnReferenceTree() {\n    this._tree.domFocus();\n  }\n  focusOnPreviewEditor() {\n    this._preview.focus();\n  }\n  isPreviewEditorFocused() {\n    return this._preview.hasTextFocus();\n  }\n  _onTitleClick(e) {\n    if (this._preview && this._preview.getModel()) {\n      this._onDidSelectReference.fire({\n        element: this._getFocusedReference(),\n        kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n        source: 'title'\n      });\n    }\n  }\n  _fillBody(containerElement) {\n    this.setCssClass('reference-zone-widget');\n    // message pane\n    this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n    dom.hide(this._messageContainer);\n    this._splitView = new SplitView(containerElement, {\n      orientation: 1 /* Orientation.HORIZONTAL */\n    });\n    // editor\n    this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n    const options = {\n      scrollBeyondLastLine: false,\n      scrollbar: {\n        verticalScrollbarSize: 14,\n        horizontal: 'auto',\n        useShadows: true,\n        verticalHasArrows: false,\n        horizontalHasArrows: false,\n        alwaysConsumeMouseWheel: true\n      },\n      overviewRulerLanes: 2,\n      fixedOverflowWidgets: true,\n      minimap: {\n        enabled: false\n      }\n    };\n    this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n    dom.hide(this._previewContainer);\n    this._previewNotAvailableMessage = this._instantiationService.createInstance(TextModel, nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null);\n    // tree\n    this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n    const treeOptions = {\n      keyboardSupport: this._defaultTreeKeyboardSupport,\n      accessibilityProvider: new AccessibilityProvider(),\n      keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n      identityProvider: new IdentityProvider(),\n      openOnSingleClick: true,\n      selectionNavigation: true,\n      overrideStyles: {\n        listBackground: peekView.peekViewResultsBackground\n      }\n    };\n    if (this._defaultTreeKeyboardSupport) {\n      // the tree will consume `Escape` and prevent the widget from closing\n      this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', e => {\n        if (e.equals(9 /* KeyCode.Escape */)) {\n          this._keybindingService.dispatchEvent(e, e.target);\n          e.stopPropagation();\n        }\n      }, true));\n    }\n    this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [this._instantiationService.createInstance(FileReferencesRenderer), this._instantiationService.createInstance(OneReferenceRenderer)], this._instantiationService.createInstance(DataSource), treeOptions);\n    // split stuff\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._previewContainer,\n      minimumSize: 200,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._preview.layout({\n          height: this._dim.height,\n          width\n        });\n      }\n    }, Sizing.Distribute);\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._treeContainer,\n      minimumSize: 100,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._treeContainer.style.height = `${this._dim.height}px`;\n        this._treeContainer.style.width = `${width}px`;\n        this._tree.layout(this._dim.height, width);\n      }\n    }, Sizing.Distribute);\n    this._disposables.add(this._splitView.onDidSashChange(() => {\n      if (this._dim.width) {\n        this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n      }\n    }, undefined));\n    // listen on selection and focus\n    const onEvent = (element, kind) => {\n      if (element instanceof OneReference) {\n        if (kind === 'show') {\n          this._revealReference(element, false);\n        }\n        this._onDidSelectReference.fire({\n          element,\n          kind,\n          source: 'tree'\n        });\n      }\n    };\n    this._disposables.add(this._tree.onDidOpen(e => {\n      if (e.sideBySide) {\n        onEvent(e.element, 'side');\n      } else if (e.editorOptions.pinned) {\n        onEvent(e.element, 'goto');\n      } else {\n        onEvent(e.element, 'show');\n      }\n    }));\n    dom.hide(this._treeContainer);\n  }\n  _onWidth(width) {\n    if (this._dim) {\n      this._doLayoutBody(this._dim.height, width);\n    }\n  }\n  _doLayoutBody(heightInPixel, widthInPixel) {\n    super._doLayoutBody(heightInPixel, widthInPixel);\n    this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n    this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n    this._splitView.layout(widthInPixel);\n    this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n  }\n  setSelection(selection) {\n    return this._revealReference(selection, true).then(() => {\n      if (!this._model) {\n        // disposed\n        return;\n      }\n      // show in tree\n      this._tree.setSelection([selection]);\n      this._tree.setFocus([selection]);\n    });\n  }\n  setModel(newModel) {\n    // clean up\n    this._disposeOnNewModel.clear();\n    this._model = newModel;\n    if (this._model) {\n      return this._onNewModel();\n    }\n    return Promise.resolve();\n  }\n  _onNewModel() {\n    if (!this._model) {\n      return Promise.resolve(undefined);\n    }\n    if (this._model.isEmpty) {\n      this.setTitle('');\n      this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n      dom.show(this._messageContainer);\n      return Promise.resolve(undefined);\n    }\n    dom.hide(this._messageContainer);\n    this._decorationsManager = new DecorationsManager(this._preview, this._model);\n    this._disposeOnNewModel.add(this._decorationsManager);\n    // listen on model changes\n    this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n    // listen on editor\n    this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n      const {\n        event,\n        target\n      } = e;\n      if (event.detail !== 2) {\n        return;\n      }\n      const element = this._getFocusedReference();\n      if (!element) {\n        return;\n      }\n      this._onDidSelectReference.fire({\n        element: {\n          uri: element.uri,\n          range: target.range\n        },\n        kind: event.ctrlKey || event.metaKey || event.altKey ? 'side' : 'open',\n        source: 'editor'\n      });\n    }));\n    // make sure things are rendered\n    this.container.classList.add('results-loaded');\n    dom.show(this._treeContainer);\n    dom.show(this._previewContainer);\n    this._splitView.layout(this._dim.width);\n    this.focusOnReferenceTree();\n    // pick input and a reference to begin with\n    return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n  }\n  _getFocusedReference() {\n    const [element] = this._tree.getFocus();\n    if (element instanceof OneReference) {\n      return element;\n    } else if (element instanceof FileReferences) {\n      if (element.children.length > 0) {\n        return element.children[0];\n      }\n    }\n    return undefined;\n  }\n  async revealReference(reference) {\n    await this._revealReference(reference, false);\n    this._onDidSelectReference.fire({\n      element: reference,\n      kind: 'goto',\n      source: 'tree'\n    });\n  }\n  async _revealReference(reference, revealParent) {\n    // check if there is anything to do...\n    if (this._revealedReference === reference) {\n      return;\n    }\n    this._revealedReference = reference;\n    // Update widget header\n    if (reference.uri.scheme !== Schemas.inMemory) {\n      this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n    } else {\n      this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n    }\n    const promise = this._textModelResolverService.createModelReference(reference.uri);\n    if (this._tree.getInput() === reference.parent) {\n      this._tree.reveal(reference);\n    } else {\n      if (revealParent) {\n        this._tree.reveal(reference.parent);\n      }\n      await this._tree.expand(reference.parent);\n      this._tree.reveal(reference);\n    }\n    const ref = await promise;\n    if (!this._model) {\n      // disposed\n      ref.dispose();\n      return;\n    }\n    dispose(this._previewModelReference);\n    // show in editor\n    const model = ref.object;\n    if (model) {\n      const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n      const sel = Range.lift(reference.range).collapseToStart();\n      this._previewModelReference = ref;\n      this._preview.setModel(model.textEditorModel);\n      this._preview.setSelection(sel);\n      this._preview.revealRangeInCenter(sel, scrollType);\n    } else {\n      this._preview.setModel(this._previewNotAvailableMessage);\n      ref.dispose();\n    }\n  }\n};\nReferenceWidget = __decorate([__param(3, IThemeService), __param(4, ITextModelService), __param(5, IInstantiationService), __param(6, peekView.IPeekViewService), __param(7, ILabelService), __param(8, IKeybindingService)], ReferenceWidget);\nexport { ReferenceWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar FileReferencesRenderer_1;\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n  constructor(_resolverService) {\n    this._resolverService = _resolverService;\n  }\n  hasChildren(element) {\n    if (element instanceof ReferencesModel) {\n      return true;\n    }\n    if (element instanceof FileReferences) {\n      return true;\n    }\n    return false;\n  }\n  getChildren(element) {\n    if (element instanceof ReferencesModel) {\n      return element.groups;\n    }\n    if (element instanceof FileReferences) {\n      return element.resolve(this._resolverService).then(val => {\n        // if (element.failure) {\n        // \t// refresh the element on failure so that\n        // \t// we can update its rendering\n        // \treturn tree.refresh(element).then(() => val.children);\n        // }\n        return val.children;\n      });\n    }\n    throw new Error('bad tree');\n  }\n};\nDataSource = __decorate([__param(0, ITextModelService)], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n  getHeight() {\n    return 23;\n  }\n  getTemplateId(element) {\n    if (element instanceof FileReferences) {\n      return FileReferencesRenderer.id;\n    } else {\n      return OneReferenceRenderer.id;\n    }\n  }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n  constructor(_keybindingService) {\n    this._keybindingService = _keybindingService;\n  }\n  getKeyboardNavigationLabel(element) {\n    if (element instanceof OneReference) {\n      const parts = element.parent.getPreview(element)?.preview(element.range);\n      if (parts) {\n        return parts.value;\n      }\n    }\n    // FileReferences or unresolved OneReference\n    return basename(element.uri);\n  }\n};\nStringRepresentationProvider = __decorate([__param(0, IKeybindingService)], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n  getId(element) {\n    return element instanceof OneReference ? element.id : element.uri;\n  }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n  constructor(container, _labelService) {\n    super();\n    this._labelService = _labelService;\n    const parent = document.createElement('div');\n    parent.classList.add('reference-file');\n    this.file = this._register(new IconLabel(parent, {\n      supportHighlights: true\n    }));\n    this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\n    container.appendChild(parent);\n  }\n  set(element, matches) {\n    const parent = dirname(element.uri);\n    this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, {\n      relative: true\n    }), {\n      title: this._labelService.getUriLabel(element.uri),\n      matches\n    });\n    const len = element.children.length;\n    this.badge.setCount(len);\n    if (len > 1) {\n      this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n    } else {\n      this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n    }\n  }\n};\nFileReferencesTemplate = __decorate([__param(1, ILabelService)], FileReferencesTemplate);\nlet FileReferencesRenderer = /*#__PURE__*/(() => {\n  let FileReferencesRenderer = class FileReferencesRenderer {\n    static {\n      FileReferencesRenderer_1 = this;\n    }\n    static {\n      this.id = 'FileReferencesRenderer';\n    }\n    constructor(_instantiationService) {\n      this._instantiationService = _instantiationService;\n      this.templateId = FileReferencesRenderer_1.id;\n    }\n    renderTemplate(container) {\n      return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n      template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n      templateData.dispose();\n    }\n  };\n  return FileReferencesRenderer;\n})();\nFileReferencesRenderer = FileReferencesRenderer_1 = __decorate([__param(0, IInstantiationService)], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate extends Disposable {\n  constructor(container) {\n    super();\n    this.label = this._register(new HighlightedLabel(container));\n  }\n  set(element, score) {\n    const preview = element.parent.getPreview(element)?.preview(element.range);\n    if (!preview || !preview.value) {\n      // this means we FAILED to resolve the document or the value is the empty string\n      this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n    } else {\n      // render search match as highlight unless\n      // we have score, then render the score\n      const {\n        value,\n        highlight\n      } = preview;\n      if (score && !FuzzyScore.isDefault(score)) {\n        this.label.element.classList.toggle('referenceMatch', false);\n        this.label.set(value, createMatches(score));\n      } else {\n        this.label.element.classList.toggle('referenceMatch', true);\n        this.label.set(value, [highlight]);\n      }\n    }\n  }\n}\nexport let OneReferenceRenderer = /*#__PURE__*/(() => {\n  class OneReferenceRenderer {\n    constructor() {\n      this.templateId = OneReferenceRenderer.id;\n    }\n    static {\n      this.id = 'OneReferenceRenderer';\n    }\n    renderTemplate(container) {\n      return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n      templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate(templateData) {\n      templateData.dispose();\n    }\n  }\n  return OneReferenceRenderer;\n})();\n//#endregion\nexport class AccessibilityProvider {\n  getWidgetAriaLabel() {\n    return localize('treeAriaLabel', \"References\");\n  }\n  getAriaLabel(element) {\n    return element.ariaMessage;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n  constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n    this._editorService = _editorService;\n    this._notificationService = _notificationService;\n    this._keybindingService = _keybindingService;\n    this._currentModel = undefined;\n    this._currentIdx = -1;\n    this._ignoreEditorChange = false;\n    this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n  }\n  reset() {\n    this._ctxHasSymbols.reset();\n    this._currentState?.dispose();\n    this._currentMessage?.dispose();\n    this._currentModel = undefined;\n    this._currentIdx = -1;\n  }\n  put(anchor) {\n    const refModel = anchor.parent.parent;\n    if (refModel.references.length <= 1) {\n      this.reset();\n      return;\n    }\n    this._currentModel = refModel;\n    this._currentIdx = refModel.references.indexOf(anchor);\n    this._ctxHasSymbols.set(true);\n    this._showMessage();\n    const editorState = new EditorState(this._editorService);\n    const listener = editorState.onDidChange(_ => {\n      if (this._ignoreEditorChange) {\n        return;\n      }\n      const editor = this._editorService.getActiveCodeEditor();\n      if (!editor) {\n        return;\n      }\n      const model = editor.getModel();\n      const position = editor.getPosition();\n      if (!model || !position) {\n        return;\n      }\n      let seenUri = false;\n      let seenPosition = false;\n      for (const reference of refModel.references) {\n        if (isEqual(reference.uri, model.uri)) {\n          seenUri = true;\n          seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n        } else if (seenUri) {\n          break;\n        }\n      }\n      if (!seenUri || !seenPosition) {\n        this.reset();\n      }\n    });\n    this._currentState = combinedDisposable(editorState, listener);\n  }\n  revealNext(source) {\n    if (!this._currentModel) {\n      return Promise.resolve();\n    }\n    // get next result and advance\n    this._currentIdx += 1;\n    this._currentIdx %= this._currentModel.references.length;\n    const reference = this._currentModel.references[this._currentIdx];\n    // status\n    this._showMessage();\n    // open editor, ignore events while that happens\n    this._ignoreEditorChange = true;\n    return this._editorService.openCodeEditor({\n      resource: reference.uri,\n      options: {\n        selection: Range.collapseToStart(reference.range),\n        selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n      }\n    }, source).finally(() => {\n      this._ignoreEditorChange = false;\n    });\n  }\n  _showMessage() {\n    this._currentMessage?.dispose();\n    const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n    const message = kb ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel()) : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n    this._currentMessage = this._notificationService.status(message);\n  }\n};\nSymbolNavigationService = __decorate([__param(0, IContextKeyService), __param(1, ICodeEditorService), __param(2, INotificationService), __param(3, IKeybindingService)], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\nregisterEditorCommand(new class extends EditorCommand {\n  constructor() {\n    super({\n      id: 'editor.gotoNextSymbolFromResult',\n      precondition: ctxHasSymbols,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 70 /* KeyCode.F12 */\n      }\n    });\n  }\n  runEditorCommand(accessor, editor) {\n    return accessor.get(ISymbolNavigationService).revealNext(editor);\n  }\n}());\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'editor.gotoNextSymbolFromResult.cancel',\n  weight: 100 /* KeybindingWeight.EditorContrib */,\n  when: ctxHasSymbols,\n  primary: 9 /* KeyCode.Escape */,\n  handler(accessor) {\n    accessor.get(ISymbolNavigationService).reset();\n  }\n});\n//\nlet EditorState = class EditorState {\n  constructor(editorService) {\n    this._listener = new Map();\n    this._disposables = new DisposableStore();\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n    this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n    this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n    editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._onDidChange.dispose();\n    dispose(this._listener.values());\n  }\n  _onDidAddEditor(editor) {\n    this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({\n      editor\n    })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({\n      editor\n    }))));\n  }\n  _onDidRemoveEditor(editor) {\n    this._listener.get(editor)?.dispose();\n    this._listener.delete(editor);\n  }\n};\nEditorState = __decorate([__param(0, ICodeEditorService)], EditorState);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { matchesSomeScheme, Schemas } from '../../../../base/common/network.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ReferencesModel } from './referencesModel.js';\nfunction shouldIncludeLocationLink(sourceModel, loc) {\n  // Always allow the location if the request comes from a document with the same scheme.\n  if (loc.uri.scheme === sourceModel.uri.scheme) {\n    return true;\n  }\n  // Otherwise filter out locations from internal schemes\n  if (matchesSomeScheme(loc.uri, Schemas.walkThroughSnippet, Schemas.vscodeChatCodeBlock, Schemas.vscodeChatCodeCompareBlock)) {\n    return false;\n  }\n  return true;\n}\nasync function getLocationLinks(model, position, registry, recursive, provide) {\n  const provider = registry.ordered(model, recursive);\n  // get results\n  const promises = provider.map(provider => {\n    return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n      onUnexpectedExternalError(err);\n      return undefined;\n    });\n  });\n  const values = await Promise.all(promises);\n  return coalesce(values.flat()).filter(loc => shouldIncludeLocationLink(model, loc));\n}\nexport function getDefinitionsAtPosition(registry, model, position, recursive, token) {\n  return getLocationLinks(model, position, registry, recursive, (provider, model, position) => {\n    return provider.provideDefinition(model, position, token);\n  });\n}\nexport function getDeclarationsAtPosition(registry, model, position, recursive, token) {\n  return getLocationLinks(model, position, registry, recursive, (provider, model, position) => {\n    return provider.provideDeclaration(model, position, token);\n  });\n}\nexport function getImplementationsAtPosition(registry, model, position, recursive, token) {\n  return getLocationLinks(model, position, registry, recursive, (provider, model, position) => {\n    return provider.provideImplementation(model, position, token);\n  });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, recursive, token) {\n  return getLocationLinks(model, position, registry, recursive, (provider, model, position) => {\n    return provider.provideTypeDefinition(model, position, token);\n  });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, recursive, token) {\n  return getLocationLinks(model, position, registry, recursive, async (provider, model, position) => {\n    const result = (await provider.provideReferences(model, position, {\n      includeDeclaration: true\n    }, token))?.filter(ref => shouldIncludeLocationLink(model, ref));\n    if (!compact || !result || result.length !== 2) {\n      return result;\n    }\n    const resultWithoutDeclaration = (await provider.provideReferences(model, position, {\n      includeDeclaration: false\n    }, token))?.filter(ref => shouldIncludeLocationLink(model, ref));\n    if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n      return resultWithoutDeclaration;\n    }\n    return result;\n  });\n}\n// -- API commands ----\nasync function _sortedAndDeduped(callback) {\n  const rawLinks = await callback();\n  const model = new ReferencesModel(rawLinks, '');\n  const modelLinks = model.references.map(ref => ref.link);\n  model.dispose();\n  return modelLinks;\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, false, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDefinitionProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, true, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, false, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, true, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, false, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, true, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, false, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, true, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, false, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider_recursive', (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, true, CancellationToken.None);\n  return _sortedAndDeduped(() => promise);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorAction2, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { StandaloneColorPickerController } from './standaloneColorPickerWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport './colorPicker.css';\nexport class ShowOrFocusStandaloneColorPicker extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.showOrFocusStandaloneColorPicker',\n      title: {\n        ...localize2('showOrFocusStandaloneColorPicker', \"Show or Focus Standalone Color Picker\"),\n        mnemonicTitle: localize({\n          key: 'mishowOrFocusStandaloneColorPicker',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Show or Focus Standalone Color Picker\")\n      },\n      precondition: undefined,\n      menu: [{\n        id: MenuId.CommandPalette\n      }],\n      metadata: {\n        description: localize2('showOrFocusStandaloneColorPickerDescription', \"Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.\")\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StandaloneColorPickerController.get(editor)?.showOrFocus();\n  }\n}\nclass HideStandaloneColorPicker extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.hideColorPicker',\n      label: localize({\n        key: 'hideColorPicker',\n        comment: ['Action that hides the color picker']\n      }, \"Hide the Color Picker\"),\n      alias: 'Hide the Color Picker',\n      precondition: EditorContextKeys.standaloneColorPickerVisible.isEqualTo(true),\n      kbOpts: {\n        primary: 9 /* KeyCode.Escape */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: localize2('hideColorPickerDescription', \"Hide the standalone color picker.\")\n      }\n    });\n  }\n  run(_accessor, editor) {\n    StandaloneColorPickerController.get(editor)?.hide();\n  }\n}\nclass InsertColorWithStandaloneColorPicker extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertColorWithStandaloneColorPicker',\n      label: localize({\n        key: 'insertColorWithStandaloneColorPicker',\n        comment: ['Action that inserts color with standalone color picker']\n      }, \"Insert Color with Standalone Color Picker\"),\n      alias: 'Insert Color with Standalone Color Picker',\n      precondition: EditorContextKeys.standaloneColorPickerFocused.isEqualTo(true),\n      kbOpts: {\n        primary: 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: localize2('insertColorWithStandaloneColorPickerDescription', \"Insert hex/rgb/hsl colors with the focused standalone color picker.\")\n      }\n    });\n  }\n  run(_accessor, editor) {\n    StandaloneColorPickerController.get(editor)?.insertColor();\n  }\n}\nregisterEditorAction(HideStandaloneColorPicker);\nregisterEditorAction(InsertColorWithStandaloneColorPicker);\nregisterAction2(ShowOrFocusStandaloneColorPicker);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar StandaloneColorPickerController_1, StandaloneColorPickerWidget_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StandaloneColorPickerParticipant } from './colorHoverParticipant.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { EditorHoverStatusBar } from '../../hover/browser/contentHoverStatusBar.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport './colorPicker.css';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nlet StandaloneColorPickerController = /*#__PURE__*/(() => {\n  let StandaloneColorPickerController = class StandaloneColorPickerController extends Disposable {\n    static {\n      StandaloneColorPickerController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.standaloneColorPickerController';\n    }\n    constructor(_editor, _contextKeyService, _instantiationService) {\n      super();\n      this._editor = _editor;\n      this._instantiationService = _instantiationService;\n      this._standaloneColorPickerWidget = null;\n      this._standaloneColorPickerVisible = EditorContextKeys.standaloneColorPickerVisible.bindTo(_contextKeyService);\n      this._standaloneColorPickerFocused = EditorContextKeys.standaloneColorPickerFocused.bindTo(_contextKeyService);\n    }\n    showOrFocus() {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (!this._standaloneColorPickerVisible.get()) {\n        this._standaloneColorPickerWidget = this._instantiationService.createInstance(StandaloneColorPickerWidget, this._editor, this._standaloneColorPickerVisible, this._standaloneColorPickerFocused);\n      } else if (!this._standaloneColorPickerFocused.get()) {\n        this._standaloneColorPickerWidget?.focus();\n      }\n    }\n    hide() {\n      this._standaloneColorPickerFocused.set(false);\n      this._standaloneColorPickerVisible.set(false);\n      this._standaloneColorPickerWidget?.hide();\n      this._editor.focus();\n    }\n    insertColor() {\n      this._standaloneColorPickerWidget?.updateEditor();\n      this.hide();\n    }\n    static get(editor) {\n      return editor.getContribution(StandaloneColorPickerController_1.ID);\n    }\n  };\n  return StandaloneColorPickerController;\n})();\nStandaloneColorPickerController = StandaloneColorPickerController_1 = __decorate([__param(1, IContextKeyService), __param(2, IInstantiationService)], StandaloneColorPickerController);\nexport { StandaloneColorPickerController };\nregisterEditorContribution(StandaloneColorPickerController.ID, StandaloneColorPickerController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nconst PADDING = 8;\nconst CLOSE_BUTTON_WIDTH = 22;\nlet StandaloneColorPickerWidget = /*#__PURE__*/(() => {\n  let StandaloneColorPickerWidget = class StandaloneColorPickerWidget extends Disposable {\n    static {\n      StandaloneColorPickerWidget_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.standaloneColorPickerWidget';\n    }\n    constructor(_editor, _standaloneColorPickerVisible, _standaloneColorPickerFocused, _instantiationService, _keybindingService, _languageFeaturesService, _editorWorkerService) {\n      super();\n      this._editor = _editor;\n      this._standaloneColorPickerVisible = _standaloneColorPickerVisible;\n      this._standaloneColorPickerFocused = _standaloneColorPickerFocused;\n      this._keybindingService = _keybindingService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._editorWorkerService = _editorWorkerService;\n      this.allowEditorOverflow = true;\n      this._position = undefined;\n      this._body = document.createElement('div');\n      this._colorHover = null;\n      this._selectionSetInEditor = false;\n      this._onResult = this._register(new Emitter());\n      this.onResult = this._onResult.event;\n      this._standaloneColorPickerVisible.set(true);\n      this._standaloneColorPickerParticipant = _instantiationService.createInstance(StandaloneColorPickerParticipant, this._editor);\n      this._position = this._editor._getViewModel()?.getPrimaryCursorState().modelState.position;\n      const editorSelection = this._editor.getSelection();\n      const selection = editorSelection ? {\n        startLineNumber: editorSelection.startLineNumber,\n        startColumn: editorSelection.startColumn,\n        endLineNumber: editorSelection.endLineNumber,\n        endColumn: editorSelection.endColumn\n      } : {\n        startLineNumber: 0,\n        endLineNumber: 0,\n        endColumn: 0,\n        startColumn: 0\n      };\n      const focusTracker = this._register(dom.trackFocus(this._body));\n      this._register(focusTracker.onDidBlur(_ => {\n        this.hide();\n      }));\n      this._register(focusTracker.onDidFocus(_ => {\n        this.focus();\n      }));\n      // When the cursor position changes, hide the color picker\n      this._register(this._editor.onDidChangeCursorPosition(() => {\n        // Do not hide the color picker when the cursor changes position due to the keybindings\n        if (!this._selectionSetInEditor) {\n          this.hide();\n        } else {\n          this._selectionSetInEditor = false;\n        }\n      }));\n      this._register(this._editor.onMouseMove(e => {\n        const classList = e.target.element?.classList;\n        if (classList && classList.contains('colorpicker-color-decoration')) {\n          this.hide();\n        }\n      }));\n      this._register(this.onResult(result => {\n        this._render(result.value, result.foundInEditor);\n      }));\n      this._start(selection);\n      this._body.style.zIndex = '50';\n      this._editor.addContentWidget(this);\n    }\n    updateEditor() {\n      if (this._colorHover) {\n        this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover);\n      }\n    }\n    getId() {\n      return StandaloneColorPickerWidget_1.ID;\n    }\n    getDomNode() {\n      return this._body;\n    }\n    getPosition() {\n      if (!this._position) {\n        return null;\n      }\n      const positionPreference = this._editor.getOption(60 /* EditorOption.hover */).above;\n      return {\n        position: this._position,\n        secondaryPosition: this._position,\n        preference: positionPreference ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */] : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */],\n        positionAffinity: 2 /* PositionAffinity.None */\n      };\n    }\n    hide() {\n      this.dispose();\n      this._standaloneColorPickerVisible.set(false);\n      this._standaloneColorPickerFocused.set(false);\n      this._editor.removeContentWidget(this);\n      this._editor.focus();\n    }\n    focus() {\n      this._standaloneColorPickerFocused.set(true);\n      this._body.focus();\n    }\n    async _start(selection) {\n      const computeAsyncResult = await this._computeAsync(selection);\n      if (!computeAsyncResult) {\n        return;\n      }\n      this._onResult.fire(new StandaloneColorPickerResult(computeAsyncResult.result, computeAsyncResult.foundInEditor));\n    }\n    async _computeAsync(range) {\n      if (!this._editor.hasModel()) {\n        return null;\n      }\n      const colorInfo = {\n        range: range,\n        color: {\n          red: 0,\n          green: 0,\n          blue: 0,\n          alpha: 1\n        }\n      };\n      const colorHoverResult = await this._standaloneColorPickerParticipant.createColorHover(colorInfo, new DefaultDocumentColorProvider(this._editorWorkerService), this._languageFeaturesService.colorProvider);\n      if (!colorHoverResult) {\n        return null;\n      }\n      return {\n        result: colorHoverResult.colorHover,\n        foundInEditor: colorHoverResult.foundInEditor\n      };\n    }\n    _render(colorHover, foundInEditor) {\n      const fragment = document.createDocumentFragment();\n      const statusBar = this._register(new EditorHoverStatusBar(this._keybindingService));\n      const context = {\n        fragment,\n        statusBar,\n        onContentsChanged: () => {},\n        hide: () => this.hide()\n      };\n      this._colorHover = colorHover;\n      const renderedHoverPart = this._standaloneColorPickerParticipant.renderHoverParts(context, [colorHover]);\n      if (!renderedHoverPart) {\n        return;\n      }\n      this._register(renderedHoverPart.disposables);\n      const colorPicker = renderedHoverPart.colorPicker;\n      this._body.classList.add('standalone-colorpicker-body');\n      this._body.style.maxHeight = Math.max(this._editor.getLayoutInfo().height / 4, 250) + 'px';\n      this._body.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + 'px';\n      this._body.tabIndex = 0;\n      this._body.appendChild(fragment);\n      colorPicker.layout();\n      const colorPickerBody = colorPicker.body;\n      const saturationBoxWidth = colorPickerBody.saturationBox.domNode.clientWidth;\n      const widthOfOriginalColorBox = colorPickerBody.domNode.clientWidth - saturationBoxWidth - CLOSE_BUTTON_WIDTH - PADDING;\n      const enterButton = colorPicker.body.enterButton;\n      enterButton?.onClicked(() => {\n        this.updateEditor();\n        this.hide();\n      });\n      const colorPickerHeader = colorPicker.header;\n      const pickedColorNode = colorPickerHeader.pickedColorNode;\n      pickedColorNode.style.width = saturationBoxWidth + PADDING + 'px';\n      const originalColorNode = colorPickerHeader.originalColorNode;\n      originalColorNode.style.width = widthOfOriginalColorBox + 'px';\n      const closeButton = colorPicker.header.closeButton;\n      closeButton?.onClicked(() => {\n        this.hide();\n      });\n      // When found in the editor, highlight the selection in the editor\n      if (foundInEditor) {\n        if (enterButton) {\n          enterButton.button.textContent = 'Replace';\n        }\n        this._selectionSetInEditor = true;\n        this._editor.setSelection(colorHover.range);\n      }\n      this._editor.layoutContentWidget(this);\n    }\n  };\n  return StandaloneColorPickerWidget;\n})();\nStandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = __decorate([__param(3, IInstantiationService), __param(4, IKeybindingService), __param(5, ILanguageFeaturesService), __param(6, IEditorWorkerService)], StandaloneColorPickerWidget);\nexport { StandaloneColorPickerWidget };\nclass StandaloneColorPickerResult {\n  // The color picker result consists of: an array of color results and a boolean indicating if the color was found in the editor\n  constructor(value, foundInEditor) {\n    this.value = value;\n    this.foundInEditor = foundInEditor;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n  constructor(type, opts) {\n    super(opts);\n    this._type = type;\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    const commands = [];\n    const modelOptions = model.getOptions();\n    const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n    const selections = editor.getSelections().map((selection, index) => ({\n      selection,\n      index,\n      ignoreFirstLine: false\n    }));\n    selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n    // Remove selections that would result in copying the same line\n    let prev = selections[0];\n    for (let i = 1; i < selections.length; i++) {\n      const curr = selections[i];\n      if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n        // these two selections would copy the same line\n        if (prev.index < curr.index) {\n          // prev wins\n          curr.ignoreFirstLine = true;\n        } else {\n          // curr wins\n          prev.ignoreFirstLine = true;\n          prev = curr;\n        }\n      }\n    }\n    for (const selection of selections) {\n      commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.indentSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n  constructor() {\n    super(0 /* Type.Toggle */, {\n      id: 'editor.action.commentLine',\n      label: nls.localize('comment.line', \"Toggle Line Comment\"),\n      alias: 'Toggle Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '5_insert',\n        title: nls.localize({\n          key: 'miToggleLineComment',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Toggle Line Comment\"),\n        order: 1\n      }\n    });\n  }\n}\nclass AddLineCommentAction extends CommentLineAction {\n  constructor() {\n    super(1 /* Type.ForceAdd */, {\n      id: 'editor.action.addCommentLine',\n      label: nls.localize('comment.line.add', \"Add Line Comment\"),\n      alias: 'Add Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n  constructor() {\n    super(2 /* Type.ForceRemove */, {\n      id: 'editor.action.removeCommentLine',\n      label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n      alias: 'Remove Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nclass BlockCommentAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.blockComment',\n      label: nls.localize('comment.block', \"Toggle Block Comment\"),\n      alias: 'Toggle Block Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '5_insert',\n        title: nls.localize({\n          key: 'miToggleBlockComment',\n          comment: ['&& denotes a mnemonic']\n        }, \"Toggle &&Block Comment\"),\n        order: 2\n      }\n    });\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    if (!editor.hasModel()) {\n      return;\n    }\n    const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n    const commands = [];\n    const selections = editor.getSelections();\n    for (const selection of selections) {\n      commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n  constructor(selection, insertSpace, languageConfigurationService) {\n    this.languageConfigurationService = languageConfigurationService;\n    this._selection = selection;\n    this._insertSpace = insertSpace;\n    this._usedEndToken = null;\n  }\n  static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n    if (offset < 0) {\n      return false;\n    }\n    const needleLength = needle.length;\n    const haystackLength = haystack.length;\n    if (offset + needleLength > haystackLength) {\n      return false;\n    }\n    for (let i = 0; i < needleLength; i++) {\n      const codeA = haystack.charCodeAt(offset + i);\n      const codeB = needle.charCodeAt(i);\n      if (codeA === codeB) {\n        continue;\n      }\n      if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n        // codeA is upper-case variant of codeB\n        continue;\n      }\n      if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n        // codeB is upper-case variant of codeA\n        continue;\n      }\n      return false;\n    }\n    return true;\n  }\n  _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n    const startLineNumber = selection.startLineNumber;\n    const startColumn = selection.startColumn;\n    const endLineNumber = selection.endLineNumber;\n    const endColumn = selection.endColumn;\n    const startLineText = model.getLineContent(startLineNumber);\n    const endLineText = model.getLineContent(endLineNumber);\n    let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n    let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      if (startLineNumber === endLineNumber) {\n        const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n        if (lineBetweenTokens.indexOf(endToken) >= 0) {\n          // force to add a block comment\n          startTokenIndex = -1;\n          endTokenIndex = -1;\n        }\n      } else {\n        const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n        const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n        if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n          // force to add a block comment\n          startTokenIndex = -1;\n          endTokenIndex = -1;\n        }\n      }\n    }\n    let ops;\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      // Consider spaces as part of the comment tokens\n      if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n        // Pretend the start token contains a trailing space\n        startToken = startToken + ' ';\n      }\n      if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n        // Pretend the end token contains a leading space\n        endToken = ' ' + endToken;\n        endTokenIndex -= 1;\n      }\n      ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n    } else {\n      ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n      this._usedEndToken = ops.length === 1 ? endToken : null;\n    }\n    for (const op of ops) {\n      builder.addTrackedEditOperation(op.range, op.text);\n    }\n  }\n  static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n    const res = [];\n    if (!Range.isEmpty(r)) {\n      // Remove block comment start\n      res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n      // Remove block comment end\n      res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n    } else {\n      // Remove both continuously\n      res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n    }\n    return res;\n  }\n  static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n    const res = [];\n    if (!Range.isEmpty(r)) {\n      // Insert block comment start\n      res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n      // Insert block comment end\n      res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n    } else {\n      // Insert both continuously\n      res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n    }\n    return res;\n  }\n  getEditOperations(model, builder) {\n    const startLineNumber = this._selection.startLineNumber;\n    const startColumn = this._selection.startColumn;\n    model.tokenization.tokenizeIfCheap(startLineNumber);\n    const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n    const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n    if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n      // Mode does not support block comments\n      return;\n    }\n    this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n  }\n  computeCursorState(model, helper) {\n    const inverseEditOperations = helper.getInverseEditOperations();\n    if (inverseEditOperations.length === 2) {\n      const startTokenEditOperation = inverseEditOperations[0];\n      const endTokenEditOperation = inverseEditOperations[1];\n      return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n    } else {\n      const srcRange = inverseEditOperations[0].range;\n      const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n      return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n  constructor(languageConfigurationService, selection, indentSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n    this.languageConfigurationService = languageConfigurationService;\n    this._selection = selection;\n    this._indentSize = indentSize;\n    this._type = type;\n    this._insertSpace = insertSpace;\n    this._selectionId = null;\n    this._deltaColumn = 0;\n    this._moveEndPositionDown = false;\n    this._ignoreEmptyLines = ignoreEmptyLines;\n    this._ignoreFirstLine = ignoreFirstLine || false;\n  }\n  /**\n   * Do an initial pass over the lines and gather info about the line comment string.\n   * Returns null if any of the lines doesn't support a line comment string.\n   */\n  static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n    model.tokenization.tokenizeIfCheap(startLineNumber);\n    const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n    const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n    const commentStr = config ? config.lineCommentToken : null;\n    if (!commentStr) {\n      // Mode does not support line comments\n      return null;\n    }\n    const lines = [];\n    for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n      lines[i] = {\n        ignore: false,\n        commentStr: commentStr,\n        commentStrOffset: 0,\n        commentStrLength: commentStr.length\n      };\n    }\n    return lines;\n  }\n  /**\n   * Analyze lines and decide which lines are relevant and what the toggle should do.\n   * Also, build up several offsets and lengths useful in the generation of editor operations.\n   */\n  static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n    let onlyWhitespaceLines = true;\n    let shouldRemoveComments;\n    if (type === 0 /* Type.Toggle */) {\n      shouldRemoveComments = true;\n    } else if (type === 1 /* Type.ForceAdd */) {\n      shouldRemoveComments = false;\n    } else {\n      shouldRemoveComments = true;\n    }\n    for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n      const lineData = lines[i];\n      const lineNumber = startLineNumber + i;\n      if (lineNumber === startLineNumber && ignoreFirstLine) {\n        // first line ignored\n        lineData.ignore = true;\n        continue;\n      }\n      const lineContent = model.getLineContent(lineNumber);\n      const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n      if (lineContentStartOffset === -1) {\n        // Empty or whitespace only line\n        lineData.ignore = ignoreEmptyLines;\n        lineData.commentStrOffset = lineContent.length;\n        continue;\n      }\n      onlyWhitespaceLines = false;\n      lineData.ignore = false;\n      lineData.commentStrOffset = lineContentStartOffset;\n      if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n        if (type === 0 /* Type.Toggle */) {\n          // Every line so far has been a line comment, but this one is not\n          shouldRemoveComments = false;\n        } else if (type === 1 /* Type.ForceAdd */) {\n          // Will not happen\n        } else {\n          lineData.ignore = true;\n        }\n      }\n      if (shouldRemoveComments && insertSpace) {\n        // Remove a following space if present\n        const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n        if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n          lineData.commentStrLength += 1;\n        }\n      }\n    }\n    if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n      // For only whitespace lines, we insert comments\n      shouldRemoveComments = false;\n      // Also, no longer ignore them\n      for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n        lines[i].ignore = false;\n      }\n    }\n    return {\n      supported: true,\n      shouldRemoveComments: shouldRemoveComments,\n      lines: lines\n    };\n  }\n  /**\n   * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n   */\n  static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n    const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n    if (lines === null) {\n      return {\n        supported: false\n      };\n    }\n    return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n  }\n  /**\n   * Given a successful analysis, execute either insert line comments, either remove line comments\n   */\n  _executeLineComments(model, builder, data, s) {\n    let ops;\n    if (data.shouldRemoveComments) {\n      ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n    } else {\n      LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._indentSize);\n      ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n    }\n    const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n    for (let i = 0, len = ops.length; i < len; i++) {\n      builder.addEditOperation(ops[i].range, ops[i].text);\n      if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n        const lineContent = model.getLineContent(cursorPosition.lineNumber);\n        if (lineContent.length + 1 === cursorPosition.column) {\n          this._deltaColumn = (ops[i].text || '').length;\n        }\n      }\n    }\n    this._selectionId = builder.trackSelection(s);\n  }\n  _attemptRemoveBlockComment(model, s, startToken, endToken) {\n    let startLineNumber = s.startLineNumber;\n    let endLineNumber = s.endLineNumber;\n    const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n    let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n    let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n    if (startTokenIndex !== -1 && endTokenIndex === -1) {\n      endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n      endLineNumber = startLineNumber;\n    }\n    if (startTokenIndex === -1 && endTokenIndex !== -1) {\n      startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n      startLineNumber = endLineNumber;\n    }\n    if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n      startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n      if (startTokenIndex !== -1) {\n        endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n      }\n    }\n    // We have to adjust to possible inner white space.\n    // For Space after startToken, add Space to startToken - range math will work out.\n    if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n      startToken += ' ';\n    }\n    // For Space before endToken, add Space before endToken and shift index one left.\n    if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n      endToken = ' ' + endToken;\n      endTokenIndex -= 1;\n    }\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n    }\n    return null;\n  }\n  /**\n   * Given an unsuccessful analysis, delegate to the block comment command\n   */\n  _executeBlockComment(model, builder, s) {\n    model.tokenization.tokenizeIfCheap(s.startLineNumber);\n    const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n    const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n    if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n      // Mode does not support block comments\n      return;\n    }\n    const startToken = config.blockCommentStartToken;\n    const endToken = config.blockCommentEndToken;\n    let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n    if (!ops) {\n      if (s.isEmpty()) {\n        const lineContent = model.getLineContent(s.startLineNumber);\n        let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n        if (firstNonWhitespaceIndex === -1) {\n          // Line is empty or contains only whitespace\n          firstNonWhitespaceIndex = lineContent.length;\n        }\n        ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n      } else {\n        ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n      }\n      if (ops.length === 1) {\n        // Leave cursor after token and Space\n        this._deltaColumn = startToken.length + 1;\n      }\n    }\n    this._selectionId = builder.trackSelection(s);\n    for (const op of ops) {\n      builder.addEditOperation(op.range, op.text);\n    }\n  }\n  getEditOperations(model, builder) {\n    let s = this._selection;\n    this._moveEndPositionDown = false;\n    if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n      builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n      this._selectionId = builder.trackSelection(s);\n      return;\n    }\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._moveEndPositionDown = true;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n    const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n    if (data.supported) {\n      return this._executeLineComments(model, builder, data, s);\n    }\n    return this._executeBlockComment(model, builder, s);\n  }\n  computeCursorState(model, helper) {\n    let result = helper.getTrackedSelection(this._selectionId);\n    if (this._moveEndPositionDown) {\n      result = result.setEndPosition(result.endLineNumber + 1, 1);\n    }\n    return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n  }\n  /**\n   * Generate edit operations in the remove line comment case\n   */\n  static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n    const res = [];\n    for (let i = 0, len = lines.length; i < len; i++) {\n      const lineData = lines[i];\n      if (lineData.ignore) {\n        continue;\n      }\n      res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n    }\n    return res;\n  }\n  /**\n   * Generate edit operations in the add line comment case\n   */\n  _createAddLineCommentsOperations(lines, startLineNumber) {\n    const res = [];\n    const afterCommentStr = this._insertSpace ? ' ' : '';\n    for (let i = 0, len = lines.length; i < len; i++) {\n      const lineData = lines[i];\n      if (lineData.ignore) {\n        continue;\n      }\n      res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n    }\n    return res;\n  }\n  static nextVisibleColumn(currentVisibleColumn, indentSize, isTab, columnSize) {\n    if (isTab) {\n      return currentVisibleColumn + (indentSize - currentVisibleColumn % indentSize);\n    }\n    return currentVisibleColumn + columnSize;\n  }\n  /**\n   * Adjust insertion points to have them vertically aligned in the add line comment case\n   */\n  static _normalizeInsertionPoint(model, lines, startLineNumber, indentSize) {\n    let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n    let j;\n    let lenJ;\n    for (let i = 0, len = lines.length; i < len; i++) {\n      if (lines[i].ignore) {\n        continue;\n      }\n      const lineContent = model.getLineContent(startLineNumber + i);\n      let currentVisibleColumn = 0;\n      for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n        currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, indentSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n      }\n      if (currentVisibleColumn < minVisibleColumn) {\n        minVisibleColumn = currentVisibleColumn;\n      }\n    }\n    minVisibleColumn = Math.floor(minVisibleColumn / indentSize) * indentSize;\n    for (let i = 0, len = lines.length; i < len; i++) {\n      if (lines[i].ignore) {\n        continue;\n      }\n      const lineContent = model.getLineContent(startLineNumber + i);\n      let currentVisibleColumn = 0;\n      for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n        currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, indentSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n      }\n      if (currentVisibleColumn > minVisibleColumn) {\n        lines[i].commentStrOffset = j - 1;\n      } else {\n        lines[i].commentStrOffset = j;\n      }\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = /*#__PURE__*/(() => {\n  let ContextMenuController = class ContextMenuController {\n    static {\n      ContextMenuController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.contextmenu';\n    }\n    static get(editor) {\n      return editor.getContribution(ContextMenuController_1.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n      this._contextMenuService = _contextMenuService;\n      this._contextViewService = _contextViewService;\n      this._contextKeyService = _contextKeyService;\n      this._keybindingService = _keybindingService;\n      this._menuService = _menuService;\n      this._configurationService = _configurationService;\n      this._workspaceContextService = _workspaceContextService;\n      this._toDispose = new DisposableStore();\n      this._contextMenuIsBeingShownCount = 0;\n      this._editor = editor;\n      this._toDispose.add(this._editor.onContextMenu(e => this._onContextMenu(e)));\n      this._toDispose.add(this._editor.onMouseWheel(e => {\n        if (this._contextMenuIsBeingShownCount > 0) {\n          const view = this._contextViewService.getContextViewElement();\n          const target = e.srcElement;\n          // Event triggers on shadow root host first\n          // Check if the context view is under this host before hiding it #103169\n          if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n            this._contextViewService.hideContextView();\n          }\n        }\n      }));\n      this._toDispose.add(this._editor.onKeyDown(e => {\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n          return; // Context menu is turned off through configuration\n        }\n        if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n          // Chrome is funny like that\n          e.preventDefault();\n          e.stopPropagation();\n          this.showContextMenu();\n        }\n      }));\n    }\n    _onContextMenu(e) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n          this._editor.setPosition(e.target.position);\n        }\n        return; // Context menu is turned off through configuration\n      }\n      if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n        return; // allow native menu on widgets to support right click on input field for example in find\n      }\n      if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n        return; // allow native menu on injected text\n      }\n      e.event.preventDefault();\n      e.event.stopPropagation();\n      if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n        return this._showScrollbarContextMenu(e.event);\n      }\n      if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n        return; // only support mouse click into text or native context menu key for now\n      }\n      // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n      this._editor.focus();\n      // Ensure the cursor is at the position of the mouse click\n      if (e.target.position) {\n        let hasSelectionAtPosition = false;\n        for (const selection of this._editor.getSelections()) {\n          if (selection.containsPosition(e.target.position)) {\n            hasSelectionAtPosition = true;\n            break;\n          }\n        }\n        if (!hasSelectionAtPosition) {\n          this._editor.setPosition(e.target.position);\n        }\n      }\n      // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n      let anchor = null;\n      if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n        anchor = e.event;\n      }\n      // Show the context menu\n      this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n      if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        return; // Context menu is turned off through configuration\n      }\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      // Find actions available for menu\n      const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.contextMenuId);\n      // Show menu if we have actions to show\n      if (menuActions.length > 0) {\n        this._doShowContextMenu(menuActions, anchor);\n      }\n    }\n    _getMenuActions(model, menuId) {\n      const result = [];\n      // get menu groups\n      const groups = this._menuService.getMenuActions(menuId, this._contextKeyService, {\n        arg: model.uri\n      });\n      // translate them into other actions\n      for (const group of groups) {\n        const [, actions] = group;\n        let addedItems = 0;\n        for (const action of actions) {\n          if (action instanceof SubmenuItemAction) {\n            const subActions = this._getMenuActions(model, action.item.submenu);\n            if (subActions.length > 0) {\n              result.push(new SubmenuAction(action.id, action.label, subActions));\n              addedItems++;\n            }\n          } else {\n            result.push(action);\n            addedItems++;\n          }\n        }\n        if (addedItems) {\n          result.push(new Separator());\n        }\n      }\n      if (result.length) {\n        result.pop(); // remove last separator\n      }\n      return result;\n    }\n    _doShowContextMenu(actions, event = null) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      // Disable hover\n      const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n      this._editor.updateOptions({\n        hover: {\n          enabled: false\n        }\n      });\n      let anchor = event;\n      if (!anchor) {\n        // Ensure selection is visible\n        this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n        // Translate to absolute editor position\n        const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const posx = editorCoords.left + cursorCoords.left;\n        const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        anchor = {\n          x: posx,\n          y: posy\n        };\n      }\n      const useShadowDOM = this._editor.getOption(128 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n      // Show menu\n      this._contextMenuIsBeingShownCount++;\n      this._contextMenuService.showContextMenu({\n        domForShadowRoot: useShadowDOM ? this._editor.getOverflowWidgetsDomNode() ?? this._editor.getDomNode() : undefined,\n        getAnchor: () => anchor,\n        getActions: () => actions,\n        getActionViewItem: action => {\n          const keybinding = this._keybindingFor(action);\n          if (keybinding) {\n            return new ActionViewItem(action, action, {\n              label: true,\n              keybinding: keybinding.getLabel(),\n              isMenu: true\n            });\n          }\n          const customActionViewItem = action;\n          if (typeof customActionViewItem.getActionViewItem === 'function') {\n            return customActionViewItem.getActionViewItem();\n          }\n          return new ActionViewItem(action, action, {\n            icon: true,\n            label: true,\n            isMenu: true\n          });\n        },\n        getKeyBinding: action => {\n          return this._keybindingFor(action);\n        },\n        onHide: wasCancelled => {\n          this._contextMenuIsBeingShownCount--;\n          this._editor.updateOptions({\n            hover: oldHoverSetting\n          });\n        }\n      });\n    }\n    _showScrollbarContextMenu(anchor) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n        // can't update the configuration properly in the standalone editor\n        return;\n      }\n      const minimapOptions = this._editor.getOption(73 /* EditorOption.minimap */);\n      let lastId = 0;\n      const createAction = opts => {\n        return {\n          id: `menu-action-${++lastId}`,\n          label: opts.label,\n          tooltip: '',\n          class: undefined,\n          enabled: typeof opts.enabled === 'undefined' ? true : opts.enabled,\n          checked: opts.checked,\n          run: opts.run\n        };\n      };\n      const createSubmenuAction = (label, actions) => {\n        return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n      };\n      const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n        if (!enabled) {\n          return createAction({\n            label,\n            enabled,\n            run: () => {}\n          });\n        }\n        const createRunner = value => {\n          return () => {\n            this._configurationService.updateValue(configName, value);\n          };\n        };\n        const actions = [];\n        for (const option of options) {\n          actions.push(createAction({\n            label: option.label,\n            checked: configuredValue === option.value,\n            run: createRunner(option.value)\n          }));\n        }\n        return createSubmenuAction(label, actions);\n      };\n      const actions = [];\n      actions.push(createAction({\n        label: nls.localize('context.minimap.minimap', \"Minimap\"),\n        checked: minimapOptions.enabled,\n        run: () => {\n          this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n        }\n      }));\n      actions.push(new Separator());\n      actions.push(createAction({\n        label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n        enabled: minimapOptions.enabled,\n        checked: minimapOptions.renderCharacters,\n        run: () => {\n          this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n        }\n      }));\n      actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n        label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n        value: 'proportional'\n      }, {\n        label: nls.localize('context.minimap.size.fill', \"Fill\"),\n        value: 'fill'\n      }, {\n        label: nls.localize('context.minimap.size.fit', \"Fit\"),\n        value: 'fit'\n      }]));\n      actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n        label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n        value: 'mouseover'\n      }, {\n        label: nls.localize('context.minimap.slider.always', \"Always\"),\n        value: 'always'\n      }]));\n      const useShadowDOM = this._editor.getOption(128 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n      this._contextMenuIsBeingShownCount++;\n      this._contextMenuService.showContextMenu({\n        domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n        getAnchor: () => anchor,\n        getActions: () => actions,\n        onHide: wasCancelled => {\n          this._contextMenuIsBeingShownCount--;\n          this._editor.focus();\n        }\n      });\n    }\n    _keybindingFor(action) {\n      return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n      if (this._contextMenuIsBeingShownCount > 0) {\n        this._contextViewService.hideContextView();\n      }\n      this._toDispose.dispose();\n    }\n  };\n  return ContextMenuController;\n})();\nContextMenuController = ContextMenuController_1 = __decorate([__param(1, IContextMenuService), __param(2, IContextViewService), __param(3, IContextKeyService), __param(4, IKeybindingService), __param(5, IMenuService), __param(6, IConfigurationService), __param(7, IWorkspaceContextService)], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showContextMenu',\n      label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n      alias: 'Show Editor Context Menu',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    ContextMenuController.get(editor)?.showContextMenu();\n  }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n  constructor(selections) {\n    this.selections = selections;\n  }\n  equals(other) {\n    const thisLen = this.selections.length;\n    const otherLen = other.selections.length;\n    if (thisLen !== otherLen) {\n      return false;\n    }\n    for (let i = 0; i < thisLen; i++) {\n      if (!this.selections[i].equalsSelection(other.selections[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nclass StackElement {\n  constructor(cursorState, scrollTop, scrollLeft) {\n    this.cursorState = cursorState;\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n  }\n}\nexport let CursorUndoRedoController = /*#__PURE__*/(() => {\n  class CursorUndoRedoController extends Disposable {\n    static {\n      this.ID = 'editor.contrib.cursorUndoRedoController';\n    }\n    static get(editor) {\n      return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n      super();\n      this._editor = editor;\n      this._isCursorUndoRedo = false;\n      this._undoStack = [];\n      this._redoStack = [];\n      this._register(editor.onDidChangeModel(e => {\n        this._undoStack = [];\n        this._redoStack = [];\n      }));\n      this._register(editor.onDidChangeModelContent(e => {\n        this._undoStack = [];\n        this._redoStack = [];\n      }));\n      this._register(editor.onDidChangeCursorSelection(e => {\n        if (this._isCursorUndoRedo) {\n          return;\n        }\n        if (!e.oldSelections) {\n          return;\n        }\n        if (e.oldModelVersionId !== e.modelVersionId) {\n          return;\n        }\n        const prevState = new CursorState(e.oldSelections);\n        const isEqualToLastUndoStack = this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState);\n        if (!isEqualToLastUndoStack) {\n          this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n          this._redoStack = [];\n          if (this._undoStack.length > 50) {\n            // keep the cursor undo stack bounded\n            this._undoStack.shift();\n          }\n        }\n      }));\n    }\n    cursorUndo() {\n      if (!this._editor.hasModel() || this._undoStack.length === 0) {\n        return;\n      }\n      this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n      this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n      if (!this._editor.hasModel() || this._redoStack.length === 0) {\n        return;\n      }\n      this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n      this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n      this._isCursorUndoRedo = true;\n      this._editor.setSelections(stackElement.cursorState.selections);\n      this._editor.setScrollPosition({\n        scrollTop: stackElement.scrollTop,\n        scrollLeft: stackElement.scrollLeft\n      });\n      this._isCursorUndoRedo = false;\n    }\n  }\n  return CursorUndoRedoController;\n})();\nexport class CursorUndo extends EditorAction {\n  constructor() {\n    super({\n      id: 'cursorUndo',\n      label: nls.localize('cursor.undo', \"Cursor Undo\"),\n      alias: 'Cursor Undo',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    CursorUndoRedoController.get(editor)?.cursorUndo();\n  }\n}\nexport class CursorRedo extends EditorAction {\n  constructor() {\n    super({\n      id: 'cursorRedo',\n      label: nls.localize('cursor.redo', \"Cursor Redo\"),\n      alias: 'Cursor Redo',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor, args) {\n    CursorUndoRedoController.get(editor)?.cursorRedo();\n  }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n  if (isMacintosh) {\n    return e.altKey;\n  } else {\n    return e.ctrlKey;\n  }\n}\nexport class DragAndDropController extends Disposable {\n  static {\n    this.ID = 'editor.contrib.dragAndDrop';\n  }\n  static {\n    this.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\n  }\n  constructor(editor) {\n    super();\n    this._editor = editor;\n    this._dndDecorationIds = this._editor.createDecorationsCollection();\n    this._register(this._editor.onMouseDown(e => this._onEditorMouseDown(e)));\n    this._register(this._editor.onMouseUp(e => this._onEditorMouseUp(e)));\n    this._register(this._editor.onMouseDrag(e => this._onEditorMouseDrag(e)));\n    this._register(this._editor.onMouseDrop(e => this._onEditorMouseDrop(e)));\n    this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n    this._register(this._editor.onKeyDown(e => this.onEditorKeyDown(e)));\n    this._register(this._editor.onKeyUp(e => this.onEditorKeyUp(e)));\n    this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n    this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n    this._mouseDown = false;\n    this._modifierPressed = false;\n    this._dragSelection = null;\n  }\n  onEditorBlur() {\n    this._removeDecoration();\n    this._dragSelection = null;\n    this._mouseDown = false;\n    this._modifierPressed = false;\n  }\n  onEditorKeyDown(e) {\n    if (!this._editor.getOption(35 /* EditorOption.dragAndDrop */) || this._editor.getOption(22 /* EditorOption.columnSelection */)) {\n      return;\n    }\n    if (hasTriggerModifier(e)) {\n      this._modifierPressed = true;\n    }\n    if (this._mouseDown && hasTriggerModifier(e)) {\n      this._editor.updateOptions({\n        mouseStyle: 'copy'\n      });\n    }\n  }\n  onEditorKeyUp(e) {\n    if (!this._editor.getOption(35 /* EditorOption.dragAndDrop */) || this._editor.getOption(22 /* EditorOption.columnSelection */)) {\n      return;\n    }\n    if (hasTriggerModifier(e)) {\n      this._modifierPressed = false;\n    }\n    if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n      this._editor.updateOptions({\n        mouseStyle: 'default'\n      });\n    }\n  }\n  _onEditorMouseDown(mouseEvent) {\n    this._mouseDown = true;\n  }\n  _onEditorMouseUp(mouseEvent) {\n    this._mouseDown = false;\n    // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n    this._editor.updateOptions({\n      mouseStyle: 'text'\n    });\n  }\n  _onEditorMouseDrag(mouseEvent) {\n    const target = mouseEvent.target;\n    if (this._dragSelection === null) {\n      const selections = this._editor.getSelections() || [];\n      const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n      if (possibleSelections.length === 1) {\n        this._dragSelection = possibleSelections[0];\n      } else {\n        return;\n      }\n    }\n    if (hasTriggerModifier(mouseEvent.event)) {\n      this._editor.updateOptions({\n        mouseStyle: 'copy'\n      });\n    } else {\n      this._editor.updateOptions({\n        mouseStyle: 'default'\n      });\n    }\n    if (target.position) {\n      if (this._dragSelection.containsPosition(target.position)) {\n        this._removeDecoration();\n      } else {\n        this.showAt(target.position);\n      }\n    }\n  }\n  _onEditorMouseDropCanceled() {\n    this._editor.updateOptions({\n      mouseStyle: 'text'\n    });\n    this._removeDecoration();\n    this._dragSelection = null;\n    this._mouseDown = false;\n  }\n  _onEditorMouseDrop(mouseEvent) {\n    if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n      const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n      if (this._dragSelection === null) {\n        let newSelections = null;\n        if (mouseEvent.event.shiftKey) {\n          const primarySelection = this._editor.getSelection();\n          if (primarySelection) {\n            const {\n              selectionStartLineNumber,\n              selectionStartColumn\n            } = primarySelection;\n            newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n          }\n        } else {\n          newSelections = (this._editor.getSelections() || []).map(selection => {\n            if (selection.containsPosition(newCursorPosition)) {\n              return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            } else {\n              return selection;\n            }\n          });\n        }\n        // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n        this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n      } else if (!this._dragSelection.containsPosition(newCursorPosition) || (hasTriggerModifier(mouseEvent.event) || this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n      ) {\n        this._editor.pushUndoStop();\n        this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n        this._editor.pushUndoStop();\n      }\n    }\n    this._editor.updateOptions({\n      mouseStyle: 'text'\n    });\n    this._removeDecoration();\n    this._dragSelection = null;\n    this._mouseDown = false;\n  }\n  static {\n    this._DECORATION_OPTIONS = ModelDecorationOptions.register({\n      description: 'dnd-target',\n      className: 'dnd-target'\n    });\n  }\n  showAt(position) {\n    this._dndDecorationIds.set([{\n      range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n      options: DragAndDropController._DECORATION_OPTIONS\n    }]);\n    this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n  }\n  _removeDecoration() {\n    this._dndDecorationIds.clear();\n  }\n  _hitContent(target) {\n    return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ || target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n  }\n  _hitMargin(target) {\n    return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ || target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ || target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n  }\n  dispose() {\n    this._removeDecoration();\n    this._dragSelection = null;\n    this._mouseDown = false;\n    this._modifierPressed = false;\n    super.dispose();\n  }\n}\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n  constructor(selection, targetPosition, copy) {\n    this.selection = selection;\n    this.targetPosition = targetPosition;\n    this.copy = copy;\n    this.targetSelection = null;\n  }\n  getEditOperations(model, builder) {\n    const text = model.getValueInRange(this.selection);\n    if (!this.copy) {\n      builder.addEditOperation(this.selection, null);\n    }\n    builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n    if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n    )) {\n      this.targetSelection = this.selection;\n      return;\n    }\n    if (this.copy) {\n      this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    }\n    if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n      // Drag the selection downwards\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    }\n    if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n      // Drag the selection upwards\n      this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    }\n    // The target position is at the same line as the selection's end position.\n    if (this.selection.endColumn <= this.targetPosition.column) {\n      // The target position is after the selection's end position\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column - this.selection.endColumn + this.selection.startColumn : this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column : this.selection.endColumn);\n    } else {\n      // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n    }\n  }\n  computeCursorState(model, helper) {\n    return this.targetSelection;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { CopyPasteController, changePasteTypeCommandId, pasteWidgetVisibleCtx } from './copyPasteController.js';\nimport { DefaultPasteProvidersFeature, DefaultTextPasteOrDropEditProvider } from './defaultProviders.js';\nimport * as nls from '../../../../nls.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController, 0 /* EditorContributionInstantiation.Eager */); // eager because it listens to events on the container dom node of the editor\nregisterEditorFeature(DefaultPasteProvidersFeature);\nregisterEditorCommand(new class extends EditorCommand {\n  constructor() {\n    super({\n      id: changePasteTypeCommandId,\n      precondition: pasteWidgetVisibleCtx,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    return CopyPasteController.get(editor)?.changePasteType();\n  }\n}());\nregisterEditorCommand(new class extends EditorCommand {\n  constructor() {\n    super({\n      id: 'editor.hidePasteWidget',\n      precondition: pasteWidgetVisibleCtx,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 9 /* KeyCode.Escape */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    CopyPasteController.get(editor)?.clearWidgets();\n  }\n}());\nregisterEditorAction(class PasteAsAction extends EditorAction {\n  static {\n    this.argsSchema = {\n      type: 'object',\n      properties: {\n        kind: {\n          type: 'string',\n          description: nls.localize('pasteAs.kind', \"The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.\")\n        }\n      }\n    };\n  }\n  constructor() {\n    super({\n      id: 'editor.action.pasteAs',\n      label: nls.localize('pasteAs', \"Paste As...\"),\n      alias: 'Paste As...',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: 'Paste as',\n        args: [{\n          name: 'args',\n          schema: PasteAsAction.argsSchema\n        }]\n      }\n    });\n  }\n  run(_accessor, editor, args) {\n    let kind = typeof args?.kind === 'string' ? args.kind : undefined;\n    if (!kind && args) {\n      // Support old id property\n      // TODO: remove this in the future\n      kind = typeof args.id === 'string' ? args.id : undefined;\n    }\n    return CopyPasteController.get(editor)?.pasteAs(kind ? new HierarchicalKind(kind) : undefined);\n  }\n});\nregisterEditorAction(class extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.pasteAsText',\n      label: nls.localize('pasteAsText', \"Paste as Text\"),\n      alias: 'Paste as Text',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  run(_accessor, editor) {\n    return CopyPasteController.get(editor)?.pasteAs({\n      providerId: DefaultTextPasteOrDropEditProvider.id\n    });\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { DefaultDropProvidersFeature } from './defaultProviders.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions as ConfigurationExtensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { DropIntoEditorController, changeDropTypeCommandId, defaultProviderConfig, dropWidgetVisibleCtx } from './dropIntoEditorController.js';\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorFeature(DefaultDropProvidersFeature);\nregisterEditorCommand(new class extends EditorCommand {\n  constructor() {\n    super({\n      id: changeDropTypeCommandId,\n      precondition: dropWidgetVisibleCtx,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor, _args) {\n    DropIntoEditorController.get(editor)?.changeDropType();\n  }\n}());\nregisterEditorCommand(new class extends EditorCommand {\n  constructor() {\n    super({\n      id: 'editor.hideDropWidget',\n      precondition: dropWidgetVisibleCtx,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 9 /* KeyCode.Escape */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor, _args) {\n    DropIntoEditorController.get(editor)?.clearWidgets();\n  }\n}());\nRegistry.as(ConfigurationExtensions.Configuration).registerConfiguration({\n  ...editorConfigurationBaseNode,\n  properties: {\n    [defaultProviderConfig]: {\n      type: 'object',\n      scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n      description: nls.localize('defaultProviderDescription', \"Configures the default drop provider to use for content of a given mime type.\"),\n      default: {},\n      additionalProperties: {\n        type: 'string'\n      }\n    }\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport const changeDropTypeCommandId = 'editor.changeDropType';\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nlet DropIntoEditorController = /*#__PURE__*/(() => {\n  let DropIntoEditorController = class DropIntoEditorController extends Disposable {\n    static {\n      DropIntoEditorController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.dropIntoEditorController';\n    }\n    static get(editor) {\n      return editor.getContribution(DropIntoEditorController_1.ID);\n    }\n    constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n      super();\n      this._configService = _configService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n      this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n      this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n      this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, {\n        id: changeDropTypeCommandId,\n        label: localize('postDropWidgetTitle', \"Show drop options...\")\n      }));\n      this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n    }\n    clearWidgets() {\n      this._postDropWidgetManager.clear();\n    }\n    changeDropType() {\n      this._postDropWidgetManager.tryShowSelector();\n    }\n    async onDropIntoEditor(editor, position, dragEvent) {\n      if (!dragEvent.dataTransfer || !editor.hasModel()) {\n        return;\n      }\n      this._currentOperation?.cancel();\n      editor.focus();\n      editor.setPosition(position);\n      const p = createCancelablePromise(async token => {\n        const disposables = new DisposableStore();\n        const tokenSource = disposables.add(new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token));\n        try {\n          const ourDataTransfer = await this.extractDataTransferData(dragEvent);\n          if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\n            return;\n          }\n          const model = editor.getModel();\n          if (!model) {\n            return;\n          }\n          const providers = this._languageFeaturesService.documentDropEditProvider.ordered(model).filter(provider => {\n            if (!provider.dropMimeTypes) {\n              // Keep all providers that don't specify mime types\n              return true;\n            }\n            return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\n          });\n          const editSession = disposables.add(await this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource));\n          if (tokenSource.token.isCancellationRequested) {\n            return;\n          }\n          if (editSession.edits.length) {\n            const activeEditIndex = this.getInitialActiveEditIndex(model, editSession.edits);\n            const canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\n            // Pass in the parent token here as it tracks cancelling the entire drop operation\n            await this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], {\n              activeEditIndex,\n              allEdits: editSession.edits\n            }, canShowWidget, async edit => edit, token);\n          }\n        } finally {\n          disposables.dispose();\n          if (this._currentOperation === p) {\n            this._currentOperation = undefined;\n          }\n        }\n      });\n      this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p, {\n        cancel: () => p.cancel()\n      });\n      this._currentOperation = p;\n    }\n    async getDropEdits(providers, model, position, dataTransfer, tokenSource) {\n      const disposables = new DisposableStore();\n      const results = await raceCancellation(Promise.all(providers.map(async provider => {\n        try {\n          const edits = await provider.provideDocumentDropEdits(model, position, dataTransfer, tokenSource.token);\n          if (edits) {\n            disposables.add(edits);\n          }\n          return edits?.edits.map(edit => ({\n            ...edit,\n            providerId: provider.id\n          }));\n        } catch (err) {\n          console.error(err);\n        }\n        return undefined;\n      })), tokenSource.token);\n      const edits = coalesce(results ?? []).flat();\n      return {\n        edits: sortEditsByYieldTo(edits),\n        dispose: () => disposables.dispose()\n      };\n    }\n    getInitialActiveEditIndex(model, edits) {\n      const preferredProviders = this._configService.getValue(defaultProviderConfig, {\n        resource: model.uri\n      });\n      for (const [configMime, desiredKindStr] of Object.entries(preferredProviders)) {\n        const desiredKind = new HierarchicalKind(desiredKindStr);\n        const editIndex = edits.findIndex(edit => desiredKind.value === edit.providerId && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\n        if (editIndex >= 0) {\n          return editIndex;\n        }\n      }\n      return 0;\n    }\n    async extractDataTransferData(dragEvent) {\n      if (!dragEvent.dataTransfer) {\n        return new VSDataTransfer();\n      }\n      const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n      if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n        const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n        if (Array.isArray(data)) {\n          for (const id of data) {\n            const treeDataTransfer = await this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n            if (treeDataTransfer) {\n              for (const [type, value] of treeDataTransfer) {\n                dataTransfer.replace(type, value);\n              }\n            }\n          }\n        }\n      }\n      return dataTransfer;\n    }\n  };\n  return DropIntoEditorController;\n})();\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([__param(1, IInstantiationService), __param(2, IConfigurationService), __param(3, ILanguageFeaturesService), __param(4, ITreeViewsDnDService)], DropIntoEditorController);\nexport { DropIntoEditorController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class TreeViewsDnDService {\n  constructor() {\n    this._dragOperations = new Map();\n  }\n  removeDragOperationTransfer(uuid) {\n    if (uuid && this._dragOperations.has(uuid)) {\n      const operation = this._dragOperations.get(uuid);\n      this._dragOperations.delete(uuid);\n      return operation;\n    }\n    return undefined;\n  }\n}\nexport class DraggedTreeItemsIdentifier {\n  constructor(identifier) {\n    this.identifier = identifier;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { TreeViewsDnDService } from './treeViewsDnd.js';\nexport const ITreeViewsDnDService = createDecorator('treeViewsDndService');\nregisterSingleton(ITreeViewsDnDService, TreeViewsDnDService, 1 /* InstantiationType.Delayed */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar CommonFindController_1;\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n  if (!editor.hasModel()) {\n    return null;\n  }\n  const selection = editor.getSelection();\n  // if selection spans multiple lines, default search string to empty\n  if (seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber || seedSearchStringFromSelection === 'multiple') {\n    if (selection.isEmpty()) {\n      const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n      if (wordAtPosition && false === seedSearchStringFromNonEmptySelection) {\n        return wordAtPosition.word;\n      }\n    } else {\n      if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n        return editor.getModel().getValueInRange(selection);\n      }\n    }\n  }\n  return null;\n}\nlet CommonFindController = /*#__PURE__*/(() => {\n  let CommonFindController = class CommonFindController extends Disposable {\n    static {\n      CommonFindController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.findController';\n    }\n    get editor() {\n      return this._editor;\n    }\n    static get(editor) {\n      return editor.getContribution(CommonFindController_1.ID);\n    }\n    constructor(editor, contextKeyService, storageService, clipboardService, notificationService, hoverService) {\n      super();\n      this._editor = editor;\n      this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n      this._contextKeyService = contextKeyService;\n      this._storageService = storageService;\n      this._clipboardService = clipboardService;\n      this._notificationService = notificationService;\n      this._hoverService = hoverService;\n      this._updateHistoryDelayer = new Delayer(500);\n      this._state = this._register(new FindReplaceState());\n      this.loadQueryState();\n      this._register(this._state.onFindReplaceStateChange(e => this._onStateChanged(e)));\n      this._model = null;\n      this._register(this._editor.onDidChangeModel(() => {\n        const shouldRestartFind = this._editor.getModel() && this._state.isRevealed;\n        this.disposeModel();\n        this._state.change({\n          searchScope: null,\n          matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n          wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n          isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n          preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n        }, false);\n        if (shouldRestartFind) {\n          this._start({\n            forceRevealReplace: false,\n            seedSearchStringFromSelection: 'none',\n            seedSearchStringFromNonEmptySelection: false,\n            seedSearchStringFromGlobalClipboard: false,\n            shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n            shouldAnimate: false,\n            updateSearchScope: false,\n            loop: this._editor.getOption(41 /* EditorOption.find */).loop\n          });\n        }\n      }));\n    }\n    dispose() {\n      this.disposeModel();\n      super.dispose();\n    }\n    disposeModel() {\n      if (this._model) {\n        this._model.dispose();\n        this._model = null;\n      }\n    }\n    _onStateChanged(e) {\n      this.saveQueryState(e);\n      if (e.isRevealed) {\n        if (this._state.isRevealed) {\n          this._findWidgetVisible.set(true);\n        } else {\n          this._findWidgetVisible.reset();\n          this.disposeModel();\n        }\n      }\n      if (e.searchString) {\n        this.setGlobalBufferTerm(this._state.searchString);\n      }\n    }\n    saveQueryState(e) {\n      if (e.isRegex) {\n        this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n      }\n      if (e.wholeWord) {\n        this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n      }\n      if (e.matchCase) {\n        this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n      }\n      if (e.preserveCase) {\n        this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n      }\n    }\n    loadQueryState() {\n      this._state.change({\n        matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n        wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n        isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n        preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n      }, false);\n    }\n    isFindInputFocused() {\n      return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n      return this._state;\n    }\n    closeFindWidget() {\n      this._state.change({\n        isRevealed: false,\n        searchScope: null\n      }, false);\n      this._editor.focus();\n    }\n    toggleCaseSensitive() {\n      this._state.change({\n        matchCase: !this._state.matchCase\n      }, false);\n      if (!this._state.isRevealed) {\n        this.highlightFindOptions();\n      }\n    }\n    toggleWholeWords() {\n      this._state.change({\n        wholeWord: !this._state.wholeWord\n      }, false);\n      if (!this._state.isRevealed) {\n        this.highlightFindOptions();\n      }\n    }\n    toggleRegex() {\n      this._state.change({\n        isRegex: !this._state.isRegex\n      }, false);\n      if (!this._state.isRevealed) {\n        this.highlightFindOptions();\n      }\n    }\n    togglePreserveCase() {\n      this._state.change({\n        preserveCase: !this._state.preserveCase\n      }, false);\n      if (!this._state.isRevealed) {\n        this.highlightFindOptions();\n      }\n    }\n    toggleSearchScope() {\n      if (this._state.searchScope) {\n        this._state.change({\n          searchScope: null\n        }, true);\n      } else {\n        if (this._editor.hasModel()) {\n          let selections = this._editor.getSelections();\n          selections = selections.map(selection => {\n            if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n              selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n            }\n            if (!selection.isEmpty()) {\n              return selection;\n            }\n            return null;\n          }).filter(element => !!element);\n          if (selections.length) {\n            this._state.change({\n              searchScope: selections\n            }, true);\n          }\n        }\n      }\n    }\n    setSearchString(searchString) {\n      if (this._state.isRegex) {\n        searchString = strings.escapeRegExpCharacters(searchString);\n      }\n      this._state.change({\n        searchString: searchString\n      }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n      // overwritten in subclass\n    }\n    async _start(opts, newState) {\n      this.disposeModel();\n      if (!this._editor.hasModel()) {\n        // cannot do anything with an editor that doesn't have a model...\n        return;\n      }\n      const stateChanges = {\n        ...newState,\n        isRevealed: true\n      };\n      if (opts.seedSearchStringFromSelection === 'single') {\n        const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n        if (selectionSearchString) {\n          if (this._state.isRegex) {\n            stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n          } else {\n            stateChanges.searchString = selectionSearchString;\n          }\n        }\n      } else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n        const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n        if (selectionSearchString) {\n          stateChanges.searchString = selectionSearchString;\n        }\n      }\n      if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n        const selectionSearchString = await this.getGlobalBufferTerm();\n        if (!this._editor.hasModel()) {\n          // the editor has lost its model in the meantime\n          return;\n        }\n        if (selectionSearchString) {\n          stateChanges.searchString = selectionSearchString;\n        }\n      }\n      // Overwrite isReplaceRevealed\n      if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n        stateChanges.isReplaceRevealed = true;\n      } else if (!this._findWidgetVisible.get()) {\n        stateChanges.isReplaceRevealed = false;\n      }\n      if (opts.updateSearchScope) {\n        const currentSelections = this._editor.getSelections();\n        if (currentSelections.some(selection => !selection.isEmpty())) {\n          stateChanges.searchScope = currentSelections;\n        }\n      }\n      stateChanges.loop = opts.loop;\n      this._state.change(stateChanges, false);\n      if (!this._model) {\n        this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n      }\n    }\n    start(opts, newState) {\n      return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n      if (this._model) {\n        this._model.moveToNextMatch();\n        return true;\n      }\n      return false;\n    }\n    moveToPrevMatch() {\n      if (this._model) {\n        this._model.moveToPrevMatch();\n        return true;\n      }\n      return false;\n    }\n    goToMatch(index) {\n      if (this._model) {\n        this._model.moveToMatch(index);\n        return true;\n      }\n      return false;\n    }\n    replace() {\n      if (this._model) {\n        this._model.replace();\n        return true;\n      }\n      return false;\n    }\n    replaceAll() {\n      if (this._model) {\n        if (this._editor.getModel()?.isTooLargeForHeapOperation()) {\n          this._notificationService.warn(nls.localize('too.large.for.replaceall', \"The file is too large to perform a replace all operation.\"));\n          return false;\n        }\n        this._model.replaceAll();\n        return true;\n      }\n      return false;\n    }\n    selectAllMatches() {\n      if (this._model) {\n        this._model.selectAllMatches();\n        this._editor.focus();\n        return true;\n      }\n      return false;\n    }\n    async getGlobalBufferTerm() {\n      if (this._editor.getOption(41 /* EditorOption.find */).globalFindClipboard && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n        return this._clipboardService.readFindText();\n      }\n      return '';\n    }\n    setGlobalBufferTerm(text) {\n      if (this._editor.getOption(41 /* EditorOption.find */).globalFindClipboard && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n        // intentionally not awaited\n        this._clipboardService.writeFindText(text);\n      }\n    }\n  };\n  return CommonFindController;\n})();\nCommonFindController = CommonFindController_1 = __decorate([__param(1, IContextKeyService), __param(2, IStorageService), __param(3, IClipboardService), __param(4, INotificationService), __param(5, IHoverService)], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n  constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, notificationService, _storageService, clipboardService, hoverService) {\n    super(editor, _contextKeyService, _storageService, clipboardService, notificationService, hoverService);\n    this._contextViewService = _contextViewService;\n    this._keybindingService = _keybindingService;\n    this._themeService = _themeService;\n    this._widget = null;\n    this._findOptionsWidget = null;\n  }\n  async _start(opts, newState) {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n    const selection = this._editor.getSelection();\n    let updateSearchScope = false;\n    switch (this._editor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\n      case 'always':\n        updateSearchScope = true;\n        break;\n      case 'never':\n        updateSearchScope = false;\n        break;\n      case 'multiline':\n        {\n          const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n          updateSearchScope = isSelectionMultipleLine;\n          break;\n        }\n      default:\n        break;\n    }\n    opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n    await super._start(opts, newState);\n    if (this._widget) {\n      if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n        this._widget.focusReplaceInput();\n      } else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n        this._widget.focusFindInput();\n      }\n    }\n  }\n  highlightFindOptions(ignoreWhenVisible = false) {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n    if (this._state.isRevealed && !ignoreWhenVisible) {\n      this._widget.highlightFindOptions();\n    } else {\n      this._findOptionsWidget.highlightFindOptions();\n    }\n  }\n  _createFindWidget() {\n    this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService, this._hoverService));\n    this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService));\n  }\n};\nFindController = __decorate([__param(1, IContextViewService), __param(2, IContextKeyService), __param(3, IKeybindingService), __param(4, IThemeService), __param(5, INotificationService), __param(6, IStorageService), __param(7, IClipboardService), __param(8, IHoverService)], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n  id: FIND_IDS.StartFindAction,\n  label: nls.localize('startFindAction', \"Find\"),\n  alias: 'Find',\n  precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n  kbOpts: {\n    kbExpr: null,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n    weight: 100 /* KeybindingWeight.EditorContrib */\n  },\n  menuOpts: {\n    menuId: MenuId.MenubarEditMenu,\n    group: '3_find',\n    title: nls.localize({\n      key: 'miFind',\n      comment: ['&& denotes a mnemonic']\n    }, \"&&Find\"),\n    order: 1\n  }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n  const controller = CommonFindController.get(editor);\n  if (!controller) {\n    return false;\n  }\n  return controller.start({\n    forceRevealReplace: false,\n    seedSearchStringFromSelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n    seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n    seedSearchStringFromGlobalClipboard: editor.getOption(41 /* EditorOption.find */).globalFindClipboard,\n    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n    shouldAnimate: true,\n    updateSearchScope: false,\n    loop: editor.getOption(41 /* EditorOption.find */).loop\n  });\n});\nconst findArgDescription = {\n  description: 'Open a new In-Editor Find Widget.',\n  args: [{\n    name: 'Open a new In-Editor Find Widget args',\n    schema: {\n      properties: {\n        searchString: {\n          type: 'string'\n        },\n        replaceString: {\n          type: 'string'\n        },\n        isRegex: {\n          type: 'boolean'\n        },\n        matchWholeWord: {\n          type: 'boolean'\n        },\n        isCaseSensitive: {\n          type: 'boolean'\n        },\n        preserveCase: {\n          type: 'boolean'\n        },\n        findInSelection: {\n          type: 'boolean'\n        }\n      }\n    }\n  }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n  constructor() {\n    super({\n      id: FIND_IDS.StartFindWithArgs,\n      label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n      alias: 'Find With Arguments',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: null,\n        primary: 0,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: findArgDescription\n    });\n  }\n  async run(accessor, editor, args) {\n    const controller = CommonFindController.get(editor);\n    if (controller) {\n      const newState = args ? {\n        searchString: args.searchString,\n        replaceString: args.replaceString,\n        isReplaceRevealed: args.replaceString !== undefined,\n        isRegex: args.isRegex,\n        // isRegexOverride: args.regexOverride,\n        wholeWord: args.matchWholeWord,\n        // wholeWordOverride: args.wholeWordOverride,\n        matchCase: args.isCaseSensitive,\n        // matchCaseOverride: args.matchCaseOverride,\n        preserveCase: args.preserveCase\n        // preserveCaseOverride: args.preserveCaseOverride,\n      } : {};\n      await controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: controller.getState().searchString.length === 0 && editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: true,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: args?.findInSelection || false,\n        loop: editor.getOption(41 /* EditorOption.find */).loop\n      }, newState);\n      controller.setGlobalBufferTerm(controller.getState().searchString);\n    }\n  }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n  constructor() {\n    super({\n      id: FIND_IDS.StartFindWithSelection,\n      label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n      alias: 'Find With Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: null,\n        primary: 0,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  async run(accessor, editor) {\n    const controller = CommonFindController.get(editor);\n    if (controller) {\n      await controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: 'multiple',\n        seedSearchStringFromNonEmptySelection: false,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(41 /* EditorOption.find */).loop\n      });\n      controller.setGlobalBufferTerm(controller.getState().searchString);\n    }\n  }\n}\nexport class MatchFindAction extends EditorAction {\n  async run(accessor, editor) {\n    const controller = CommonFindController.get(editor);\n    if (controller && !this._run(controller)) {\n      await controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: controller.getState().searchString.length === 0 && editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: true,\n        shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(41 /* EditorOption.find */).loop\n      });\n      this._run(controller);\n    }\n  }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n  constructor() {\n    super({\n      id: FIND_IDS.NextMatchFindAction,\n      label: nls.localize('findNextMatchAction', \"Find Next\"),\n      alias: 'Find Next',\n      precondition: undefined,\n      kbOpts: [{\n        kbExpr: EditorContextKeys.focus,\n        primary: 61 /* KeyCode.F3 */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n          secondary: [61 /* KeyCode.F3 */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }, {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }]\n    });\n  }\n  _run(controller) {\n    const result = controller.moveToNextMatch();\n    if (result) {\n      controller.editor.pushUndoStop();\n      return true;\n    }\n    return false;\n  }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n  constructor() {\n    super({\n      id: FIND_IDS.PreviousMatchFindAction,\n      label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n      alias: 'Find Previous',\n      precondition: undefined,\n      kbOpts: [{\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */,\n          secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }, {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }]\n    });\n  }\n  _run(controller) {\n    return controller.moveToPrevMatch();\n  }\n}\nexport class MoveToMatchFindAction extends EditorAction {\n  constructor() {\n    super({\n      id: FIND_IDS.GoToMatchFindAction,\n      label: nls.localize('findMatchAction.goToMatch', \"Go to Match...\"),\n      alias: 'Go to Match...',\n      precondition: CONTEXT_FIND_WIDGET_VISIBLE\n    });\n    this._highlightDecorations = [];\n  }\n  run(accessor, editor, args) {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n      return;\n    }\n    const matchesCount = controller.getState().matchesCount;\n    if (matchesCount < 1) {\n      const notificationService = accessor.get(INotificationService);\n      notificationService.notify({\n        severity: Severity.Warning,\n        message: nls.localize('findMatchAction.noResults', \"No matches. Try searching for something else.\")\n      });\n      return;\n    }\n    const quickInputService = accessor.get(IQuickInputService);\n    const disposables = new DisposableStore();\n    const inputBox = disposables.add(quickInputService.createInputBox());\n    inputBox.placeholder = nls.localize('findMatchAction.inputPlaceHolder', \"Type a number to go to a specific match (between 1 and {0})\", matchesCount);\n    const toFindMatchIndex = value => {\n      const index = parseInt(value);\n      if (isNaN(index)) {\n        return undefined;\n      }\n      const matchCount = controller.getState().matchesCount;\n      if (index > 0 && index <= matchCount) {\n        return index - 1; // zero based\n      } else if (index < 0 && index >= -matchCount) {\n        return matchCount + index;\n      }\n      return undefined;\n    };\n    const updatePickerAndEditor = value => {\n      const index = toFindMatchIndex(value);\n      if (typeof index === 'number') {\n        // valid\n        inputBox.validationMessage = undefined;\n        controller.goToMatch(index);\n        const currentMatch = controller.getState().currentMatch;\n        if (currentMatch) {\n          this.addDecorations(editor, currentMatch);\n        }\n      } else {\n        inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n        this.clearDecorations(editor);\n      }\n    };\n    disposables.add(inputBox.onDidChangeValue(value => {\n      updatePickerAndEditor(value);\n    }));\n    disposables.add(inputBox.onDidAccept(() => {\n      const index = toFindMatchIndex(inputBox.value);\n      if (typeof index === 'number') {\n        controller.goToMatch(index);\n        inputBox.hide();\n      } else {\n        inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n      }\n    }));\n    disposables.add(inputBox.onDidHide(() => {\n      this.clearDecorations(editor);\n      disposables.dispose();\n    }));\n    inputBox.show();\n  }\n  clearDecorations(editor) {\n    editor.changeDecorations(changeAccessor => {\n      this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, []);\n    });\n  }\n  addDecorations(editor, range) {\n    editor.changeDecorations(changeAccessor => {\n      this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, [{\n        range,\n        options: {\n          description: 'find-match-quick-access-range-highlight',\n          className: 'rangeHighlight',\n          isWholeLine: true\n        }\n      }, {\n        range,\n        options: {\n          description: 'find-match-quick-access-range-highlight-overview',\n          overviewRuler: {\n            color: themeColorFromId(overviewRulerRangeHighlight),\n            position: OverviewRulerLane.Full\n          }\n        }\n      }]);\n    });\n  }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n  async run(accessor, editor) {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n      return;\n    }\n    const selectionSearchString = getSelectionSearchString(editor, 'single', false);\n    if (selectionSearchString) {\n      controller.setSearchString(selectionSearchString);\n    }\n    if (!this._run(controller)) {\n      await controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: 'none',\n        seedSearchStringFromNonEmptySelection: false,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(41 /* EditorOption.find */).loop\n      });\n      this._run(controller);\n    }\n  }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n  constructor() {\n    super({\n      id: FIND_IDS.NextSelectionMatchFindAction,\n      label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n      alias: 'Find Next Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _run(controller) {\n    return controller.moveToNextMatch();\n  }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n  constructor() {\n    super({\n      id: FIND_IDS.PreviousSelectionMatchFindAction,\n      label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n      alias: 'Find Previous Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _run(controller) {\n    return controller.moveToPrevMatch();\n  }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n  id: FIND_IDS.StartFindReplaceAction,\n  label: nls.localize('startReplace', \"Replace\"),\n  alias: 'Replace',\n  precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n  kbOpts: {\n    kbExpr: null,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n    mac: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */\n    },\n    weight: 100 /* KeybindingWeight.EditorContrib */\n  },\n  menuOpts: {\n    menuId: MenuId.MenubarEditMenu,\n    group: '3_find',\n    title: nls.localize({\n      key: 'miReplace',\n      comment: ['&& denotes a mnemonic']\n    }, \"&&Replace\"),\n    order: 2\n  }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n  if (!editor.hasModel() || editor.getOption(92 /* EditorOption.readOnly */)) {\n    return false;\n  }\n  const controller = CommonFindController.get(editor);\n  if (!controller) {\n    return false;\n  }\n  const currentSelection = editor.getSelection();\n  const findInputFocused = controller.isFindInputFocused();\n  // we only seed search string from selection when the current selection is single line and not empty,\n  // + the find input is not focused\n  const seedSearchStringFromSelection = !currentSelection.isEmpty() && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' && !findInputFocused;\n  /*\n  * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n   * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n  * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n  * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n  */\n  const shouldFocus = findInputFocused || seedSearchStringFromSelection ? 2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n  return controller.start({\n    forceRevealReplace: true,\n    seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n    seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n    seedSearchStringFromGlobalClipboard: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n    shouldFocus: shouldFocus,\n    shouldAnimate: true,\n    updateSearchScope: false,\n    loop: editor.getOption(41 /* EditorOption.find */).loop\n  });\n});\nregisterEditorContribution(CommonFindController.ID, FindController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(MoveToMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.CloseFindWidgetCommand,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.closeFindWidget(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleCaseSensitiveCommand,\n  precondition: undefined,\n  handler: x => x.toggleCaseSensitive(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleCaseSensitiveKeybinding.primary,\n    mac: ToggleCaseSensitiveKeybinding.mac,\n    win: ToggleCaseSensitiveKeybinding.win,\n    linux: ToggleCaseSensitiveKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleWholeWordCommand,\n  precondition: undefined,\n  handler: x => x.toggleWholeWords(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleWholeWordKeybinding.primary,\n    mac: ToggleWholeWordKeybinding.mac,\n    win: ToggleWholeWordKeybinding.win,\n    linux: ToggleWholeWordKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleRegexCommand,\n  precondition: undefined,\n  handler: x => x.toggleRegex(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleRegexKeybinding.primary,\n    mac: ToggleRegexKeybinding.mac,\n    win: ToggleRegexKeybinding.win,\n    linux: ToggleRegexKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleSearchScopeCommand,\n  precondition: undefined,\n  handler: x => x.toggleSearchScope(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleSearchScopeKeybinding.primary,\n    mac: ToggleSearchScopeKeybinding.mac,\n    win: ToggleSearchScopeKeybinding.win,\n    linux: ToggleSearchScopeKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.TogglePreserveCaseCommand,\n  precondition: undefined,\n  handler: x => x.togglePreserveCase(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: TogglePreserveCaseKeybinding.primary,\n    mac: TogglePreserveCaseKeybinding.mac,\n    win: TogglePreserveCaseKeybinding.win,\n    linux: TogglePreserveCaseKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceOneAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.replace(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceOneAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.replace(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n    primary: 3 /* KeyCode.Enter */\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceAllAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.replaceAll(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceAllAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.replaceAll(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n    primary: undefined,\n    mac: {\n      primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */\n    }\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.SelectAllMatchesAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: x => x.selectAllMatches(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstIdxMonotonousOrArrLen } from '../../../../base/common/arraysFind.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n  primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n  mac: {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */\n  }\n};\nexport const ToggleWholeWordKeybinding = {\n  primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n  mac: {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */\n  }\n};\nexport const ToggleRegexKeybinding = {\n  primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n  mac: {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */\n  }\n};\nexport const ToggleSearchScopeKeybinding = {\n  primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n  mac: {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */\n  }\n};\nexport const TogglePreserveCaseKeybinding = {\n  primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n  mac: {\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */\n  }\n};\nexport const FIND_IDS = {\n  StartFindAction: 'actions.find',\n  StartFindWithSelection: 'actions.findWithSelection',\n  StartFindWithArgs: 'editor.actions.findWithArgs',\n  NextMatchFindAction: 'editor.action.nextMatchFindAction',\n  PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n  GoToMatchFindAction: 'editor.action.goToMatchFindAction',\n  NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n  PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n  StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n  CloseFindWidgetCommand: 'closeFindWidget',\n  ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n  ToggleWholeWordCommand: 'toggleFindWholeWord',\n  ToggleRegexCommand: 'toggleFindRegex',\n  ToggleSearchScopeCommand: 'toggleFindInSelection',\n  TogglePreserveCaseCommand: 'togglePreserveCase',\n  ReplaceOneAction: 'editor.action.replaceOne',\n  ReplaceAllAction: 'editor.action.replaceAll',\n  SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n  constructor(editor, state) {\n    this._toDispose = new DisposableStore();\n    this._editor = editor;\n    this._state = state;\n    this._isDisposed = false;\n    this._startSearchingTimer = new TimeoutTimer();\n    this._decorations = new FindDecorations(editor);\n    this._toDispose.add(this._decorations);\n    this._updateDecorationsScheduler = new RunOnceScheduler(() => {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      return this.research(false);\n    }, 100);\n    this._toDispose.add(this._updateDecorationsScheduler);\n    this._toDispose.add(this._editor.onDidChangeCursorPosition(e => {\n      if (e.reason === 3 /* CursorChangeReason.Explicit */ || e.reason === 5 /* CursorChangeReason.Undo */ || e.reason === 6 /* CursorChangeReason.Redo */) {\n        this._decorations.setStartPosition(this._editor.getPosition());\n      }\n    }));\n    this._ignoreModelContentChanged = false;\n    this._toDispose.add(this._editor.onDidChangeModelContent(e => {\n      if (this._ignoreModelContentChanged) {\n        return;\n      }\n      if (e.isFlush) {\n        // a model.setValue() was called\n        this._decorations.reset();\n      }\n      this._decorations.setStartPosition(this._editor.getPosition());\n      this._updateDecorationsScheduler.schedule();\n    }));\n    this._toDispose.add(this._state.onFindReplaceStateChange(e => this._onStateChanged(e)));\n    this.research(false, this._state.searchScope);\n  }\n  dispose() {\n    this._isDisposed = true;\n    dispose(this._startSearchingTimer);\n    this._toDispose.dispose();\n  }\n  _onStateChanged(e) {\n    if (this._isDisposed) {\n      // The find model is disposed during a find state changed event\n      return;\n    }\n    if (!this._editor.hasModel()) {\n      // The find model will be disposed momentarily\n      return;\n    }\n    if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n      const model = this._editor.getModel();\n      if (model.isTooLargeForSyncing()) {\n        this._startSearchingTimer.cancel();\n        this._startSearchingTimer.setIfNotSet(() => {\n          if (e.searchScope) {\n            this.research(e.moveCursor, this._state.searchScope);\n          } else {\n            this.research(e.moveCursor);\n          }\n        }, RESEARCH_DELAY);\n      } else {\n        if (e.searchScope) {\n          this.research(e.moveCursor, this._state.searchScope);\n        } else {\n          this.research(e.moveCursor);\n        }\n      }\n    }\n  }\n  static _getSearchRange(model, findScope) {\n    // If we have set now or before a find scope, use it for computing the search range\n    if (findScope) {\n      return findScope;\n    }\n    return model.getFullModelRange();\n  }\n  research(moveCursor, newFindScope) {\n    let findScopes = null;\n    if (typeof newFindScope !== 'undefined') {\n      if (newFindScope !== null) {\n        if (!Array.isArray(newFindScope)) {\n          findScopes = [newFindScope];\n        } else {\n          findScopes = newFindScope;\n        }\n      }\n    } else {\n      findScopes = this._decorations.getFindScopes();\n    }\n    if (findScopes !== null) {\n      findScopes = findScopes.map(findScope => {\n        if (findScope.startLineNumber !== findScope.endLineNumber) {\n          let endLineNumber = findScope.endLineNumber;\n          if (findScope.endColumn === 1) {\n            endLineNumber = endLineNumber - 1;\n          }\n          return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n        }\n        return findScope;\n      });\n    }\n    const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n    this._decorations.set(findMatches, findScopes);\n    const editorSelection = this._editor.getSelection();\n    let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n    if (currentMatchesPosition === 0 && findMatches.length > 0) {\n      // current selection is not on top of a match\n      // try to find its nearest result from the top of the document\n      const matchAfterSelection = findFirstIdxMonotonousOrArrLen(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n      currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n    }\n    this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n    if (moveCursor && this._editor.getOption(41 /* EditorOption.find */).cursorMoveOnType) {\n      this._moveToNextMatch(this._decorations.getStartPosition());\n    }\n  }\n  _hasMatches() {\n    return this._state.matchesCount > 0;\n  }\n  _cannotFind() {\n    if (!this._hasMatches()) {\n      const findScope = this._decorations.getFindScope();\n      if (findScope) {\n        // Reveal the selection so user is reminded that 'selection find' is on.\n        this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n      }\n      return true;\n    }\n    return false;\n  }\n  _setCurrentFindMatch(match) {\n    const matchesPosition = this._decorations.setCurrentFindMatch(match);\n    this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n    this._editor.setSelection(match);\n    this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n  }\n  _prevSearchPosition(before) {\n    const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    let {\n      lineNumber,\n      column\n    } = before;\n    const model = this._editor.getModel();\n    if (isUsingLineStops || column === 1) {\n      if (lineNumber === 1) {\n        lineNumber = model.getLineCount();\n      } else {\n        lineNumber--;\n      }\n      column = model.getLineMaxColumn(lineNumber);\n    } else {\n      column--;\n    }\n    return new Position(lineNumber, column);\n  }\n  _moveToPrevMatch(before, isRecursed = false) {\n    if (!this._state.canNavigateBack()) {\n      // we are beyond the first matched find result\n      // instead of doing nothing, we should refocus the first item\n      const nextMatchRange = this._decorations.matchAfterPosition(before);\n      if (nextMatchRange) {\n        this._setCurrentFindMatch(nextMatchRange);\n      }\n      return;\n    }\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      let prevMatchRange = this._decorations.matchBeforePosition(before);\n      if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n        before = this._prevSearchPosition(before);\n        prevMatchRange = this._decorations.matchBeforePosition(before);\n      }\n      if (prevMatchRange) {\n        this._setCurrentFindMatch(prevMatchRange);\n      }\n      return;\n    }\n    if (this._cannotFind()) {\n      return;\n    }\n    const findScope = this._decorations.getFindScope();\n    const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n    // ...(----)...|...\n    if (searchRange.getEndPosition().isBefore(before)) {\n      before = searchRange.getEndPosition();\n    }\n    // ...|...(----)...\n    if (before.isBefore(searchRange.getStartPosition())) {\n      before = searchRange.getEndPosition();\n    }\n    const {\n      lineNumber,\n      column\n    } = before;\n    const model = this._editor.getModel();\n    let position = new Position(lineNumber, column);\n    let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false);\n    if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._prevSearchPosition(position);\n      prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false);\n    }\n    if (!prevMatch) {\n      // there is precisely one match and selection is on top of it\n      return;\n    }\n    if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n      return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n    }\n    this._setCurrentFindMatch(prevMatch.range);\n  }\n  moveToPrevMatch() {\n    this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n  }\n  _nextSearchPosition(after) {\n    const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    let {\n      lineNumber,\n      column\n    } = after;\n    const model = this._editor.getModel();\n    if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n      if (lineNumber === model.getLineCount()) {\n        lineNumber = 1;\n      } else {\n        lineNumber++;\n      }\n      column = 1;\n    } else {\n      column++;\n    }\n    return new Position(lineNumber, column);\n  }\n  _moveToNextMatch(after) {\n    if (!this._state.canNavigateForward()) {\n      // we are beyond the last matched find result\n      // instead of doing nothing, we should refocus the last item\n      const prevMatchRange = this._decorations.matchBeforePosition(after);\n      if (prevMatchRange) {\n        this._setCurrentFindMatch(prevMatchRange);\n      }\n      return;\n    }\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      let nextMatchRange = this._decorations.matchAfterPosition(after);\n      if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n        // Looks like we're stuck at this position, unacceptable!\n        after = this._nextSearchPosition(after);\n        nextMatchRange = this._decorations.matchAfterPosition(after);\n      }\n      if (nextMatchRange) {\n        this._setCurrentFindMatch(nextMatchRange);\n      }\n      return;\n    }\n    const nextMatch = this._getNextMatch(after, false, true);\n    if (nextMatch) {\n      this._setCurrentFindMatch(nextMatch.range);\n    }\n  }\n  _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n    if (this._cannotFind()) {\n      return null;\n    }\n    const findScope = this._decorations.getFindScope();\n    const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n    // ...(----)...|...\n    if (searchRange.getEndPosition().isBefore(after)) {\n      after = searchRange.getStartPosition();\n    }\n    // ...|...(----)...\n    if (after.isBefore(searchRange.getStartPosition())) {\n      after = searchRange.getStartPosition();\n    }\n    const {\n      lineNumber,\n      column\n    } = after;\n    const model = this._editor.getModel();\n    let position = new Position(lineNumber, column);\n    let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, captureMatches);\n    if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._nextSearchPosition(position);\n      nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, captureMatches);\n    }\n    if (!nextMatch) {\n      // there is precisely one match and selection is on top of it\n      return null;\n    }\n    if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n      return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n    }\n    return nextMatch;\n  }\n  moveToNextMatch() {\n    this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n  }\n  _moveToMatch(index) {\n    const decorationRange = this._decorations.getDecorationRangeAt(index);\n    if (decorationRange) {\n      this._setCurrentFindMatch(decorationRange);\n    }\n  }\n  moveToMatch(index) {\n    this._moveToMatch(index);\n  }\n  _getReplacePattern() {\n    if (this._state.isRegex) {\n      return parseReplaceString(this._state.replaceString);\n    }\n    return ReplacePattern.fromStaticValue(this._state.replaceString);\n  }\n  replace() {\n    if (!this._hasMatches()) {\n      return;\n    }\n    const replacePattern = this._getReplacePattern();\n    const selection = this._editor.getSelection();\n    const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n    if (nextMatch) {\n      if (selection.equalsRange(nextMatch.range)) {\n        // selection sits on a find match => replace it!\n        const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n        const command = new ReplaceCommand(selection, replaceString);\n        this._executeEditorCommand('replace', command);\n        this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n        this.research(true);\n      } else {\n        this._decorations.setStartPosition(this._editor.getPosition());\n        this._setCurrentFindMatch(nextMatch.range);\n      }\n    }\n  }\n  _findMatches(findScopes, captureMatches, limitResultCount) {\n    const searchRanges = (findScopes || [null]).map(scope => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n    return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n  }\n  replaceAll() {\n    if (!this._hasMatches()) {\n      return;\n    }\n    const findScopes = this._decorations.getFindScopes();\n    if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n      // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n      this._largeReplaceAll();\n    } else {\n      this._regularReplaceAll(findScopes);\n    }\n    this.research(false);\n  }\n  _largeReplaceAll() {\n    const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null);\n    const searchData = searchParams.parseSearchRequest();\n    if (!searchData) {\n      return;\n    }\n    let searchRegex = searchData.regex;\n    if (!searchRegex.multiline) {\n      let mod = 'mu';\n      if (searchRegex.ignoreCase) {\n        mod += 'i';\n      }\n      if (searchRegex.global) {\n        mod += 'g';\n      }\n      searchRegex = new RegExp(searchRegex.source, mod);\n    }\n    const model = this._editor.getModel();\n    const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n    const fullModelRange = model.getFullModelRange();\n    const replacePattern = this._getReplacePattern();\n    let resultText;\n    const preserveCase = this._state.preserveCase;\n    if (replacePattern.hasReplacementPatterns || preserveCase) {\n      resultText = modelText.replace(searchRegex, function () {\n        return replacePattern.buildReplaceString(arguments, preserveCase);\n      });\n    } else {\n      resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n    }\n    const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n    this._executeEditorCommand('replaceAll', command);\n  }\n  _regularReplaceAll(findScopes) {\n    const replacePattern = this._getReplacePattern();\n    // Get all the ranges (even more than the highlighted ones)\n    const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    const replaceStrings = [];\n    for (let i = 0, len = matches.length; i < len; i++) {\n      replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n    }\n    const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n    this._executeEditorCommand('replaceAll', command);\n  }\n  selectAllMatches() {\n    if (!this._hasMatches()) {\n      return;\n    }\n    const findScopes = this._decorations.getFindScopes();\n    // Get all the ranges (even more than the highlighted ones)\n    const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n    // If one of the ranges is the editor selection, then maintain it as primary\n    const editorSelection = this._editor.getSelection();\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const sel = selections[i];\n      if (sel.equalsRange(editorSelection)) {\n        selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n        break;\n      }\n    }\n    this._editor.setSelections(selections);\n  }\n  _executeEditorCommand(source, command) {\n    try {\n      this._ignoreModelContentChanged = true;\n      this._editor.pushUndoStop();\n      this._editor.executeCommand(source, command);\n      this._editor.pushUndoStop();\n    } finally {\n      this._ignoreModelContentChanged = false;\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n  constructor(editor) {\n    this._editor = editor;\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationIds = [];\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n    this._startPosition = this._editor.getPosition();\n  }\n  dispose() {\n    this._editor.removeDecorations(this._allDecorations());\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationIds = [];\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  }\n  reset() {\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationIds = [];\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  }\n  getCount() {\n    return this._decorations.length;\n  }\n  /** @deprecated use getFindScopes to support multiple selections */\n  getFindScope() {\n    if (this._findScopeDecorationIds[0]) {\n      return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n    }\n    return null;\n  }\n  getFindScopes() {\n    if (this._findScopeDecorationIds.length) {\n      const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n      if (scopes.length) {\n        return scopes;\n      }\n    }\n    return null;\n  }\n  getStartPosition() {\n    return this._startPosition;\n  }\n  setStartPosition(newStartPosition) {\n    this._startPosition = newStartPosition;\n    this.setCurrentFindMatch(null);\n  }\n  _getDecorationIndex(decorationId) {\n    const index = this._decorations.indexOf(decorationId);\n    if (index >= 0) {\n      return index + 1;\n    }\n    return 1;\n  }\n  getDecorationRangeAt(index) {\n    const decorationId = index < this._decorations.length ? this._decorations[index] : null;\n    if (decorationId) {\n      return this._editor.getModel().getDecorationRange(decorationId);\n    }\n    return null;\n  }\n  getCurrentMatchesPosition(desiredRange) {\n    const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n    for (const candidate of candidates) {\n      const candidateOpts = candidate.options;\n      if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n        return this._getDecorationIndex(candidate.id);\n      }\n    }\n    // We don't know the current match position, so returns zero to show '?' in find widget\n    return 0;\n  }\n  setCurrentFindMatch(nextMatch) {\n    let newCurrentDecorationId = null;\n    let matchPosition = 0;\n    if (nextMatch) {\n      for (let i = 0, len = this._decorations.length; i < len; i++) {\n        const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n        if (nextMatch.equalsRange(range)) {\n          newCurrentDecorationId = this._decorations[i];\n          matchPosition = i + 1;\n          break;\n        }\n      }\n    }\n    if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n      this._editor.changeDecorations(changeAccessor => {\n        if (this._highlightedDecorationId !== null) {\n          changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n          this._highlightedDecorationId = null;\n        }\n        if (newCurrentDecorationId !== null) {\n          this._highlightedDecorationId = newCurrentDecorationId;\n          changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n        }\n        if (this._rangeHighlightDecorationId !== null) {\n          changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n          this._rangeHighlightDecorationId = null;\n        }\n        if (newCurrentDecorationId !== null) {\n          let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n          if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n            const lineBeforeEnd = rng.endLineNumber - 1;\n            const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n            rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n          }\n          this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n        }\n      });\n    }\n    return matchPosition;\n  }\n  set(findMatches, findScopes) {\n    this._editor.changeDecorations(accessor => {\n      let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n      const newOverviewRulerApproximateDecorations = [];\n      if (findMatches.length > 1000) {\n        // we go into a mode where the overview ruler gets \"approximate\" decorations\n        // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n        findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n        // approximate a distance in lines where matches should be merged\n        const lineCount = this._editor.getModel().getLineCount();\n        const height = this._editor.getLayoutInfo().height;\n        const approxPixelsPerLine = height / lineCount;\n        const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n        // merge decorations as much as possible\n        let prevStartLineNumber = findMatches[0].range.startLineNumber;\n        let prevEndLineNumber = findMatches[0].range.endLineNumber;\n        for (let i = 1, len = findMatches.length; i < len; i++) {\n          const range = findMatches[i].range;\n          if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n            if (range.endLineNumber > prevEndLineNumber) {\n              prevEndLineNumber = range.endLineNumber;\n            }\n          } else {\n            newOverviewRulerApproximateDecorations.push({\n              range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n              options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n            });\n            prevStartLineNumber = range.startLineNumber;\n            prevEndLineNumber = range.endLineNumber;\n          }\n        }\n        newOverviewRulerApproximateDecorations.push({\n          range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n          options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n        });\n      }\n      // Find matches\n      const newFindMatchesDecorations = new Array(findMatches.length);\n      for (let i = 0, len = findMatches.length; i < len; i++) {\n        newFindMatchesDecorations[i] = {\n          range: findMatches[i].range,\n          options: findMatchesOptions\n        };\n      }\n      this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n      // Overview ruler approximate decorations\n      this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n      // Range highlight\n      if (this._rangeHighlightDecorationId) {\n        accessor.removeDecoration(this._rangeHighlightDecorationId);\n        this._rangeHighlightDecorationId = null;\n      }\n      // Find scope\n      if (this._findScopeDecorationIds.length) {\n        this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n        this._findScopeDecorationIds = [];\n      }\n      if (findScopes?.length) {\n        this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n      }\n    });\n  }\n  matchBeforePosition(position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n    for (let i = this._decorations.length - 1; i >= 0; i--) {\n      const decorationId = this._decorations[i];\n      const r = this._editor.getModel().getDecorationRange(decorationId);\n      if (!r || r.endLineNumber > position.lineNumber) {\n        continue;\n      }\n      if (r.endLineNumber < position.lineNumber) {\n        return r;\n      }\n      if (r.endColumn > position.column) {\n        continue;\n      }\n      return r;\n    }\n    return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n  }\n  matchAfterPosition(position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n    for (let i = 0, len = this._decorations.length; i < len; i++) {\n      const decorationId = this._decorations[i];\n      const r = this._editor.getModel().getDecorationRange(decorationId);\n      if (!r || r.startLineNumber < position.lineNumber) {\n        continue;\n      }\n      if (r.startLineNumber > position.lineNumber) {\n        return r;\n      }\n      if (r.startColumn < position.column) {\n        continue;\n      }\n      return r;\n    }\n    return this._editor.getModel().getDecorationRange(this._decorations[0]);\n  }\n  _allDecorations() {\n    let result = [];\n    result = result.concat(this._decorations);\n    result = result.concat(this._overviewRulerApproximateDecorations);\n    if (this._findScopeDecorationIds.length) {\n      result.push(...this._findScopeDecorationIds);\n    }\n    if (this._rangeHighlightDecorationId) {\n      result.push(this._rangeHighlightDecorationId);\n    }\n    return result;\n  }\n  static {\n    this._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n      description: 'current-find-match',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      zIndex: 13,\n      className: 'currentFindMatch',\n      inlineClassName: 'currentFindMatchInline',\n      showIfCollapsed: true,\n      overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n      },\n      minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: 1 /* MinimapPosition.Inline */\n      }\n    });\n  }\n  static {\n    this._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n      description: 'find-match',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      zIndex: 10,\n      className: 'findMatch',\n      inlineClassName: 'findMatchInline',\n      showIfCollapsed: true,\n      overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n      },\n      minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: 1 /* MinimapPosition.Inline */\n      }\n    });\n  }\n  static {\n    this._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n      description: 'find-match-no-overview',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      className: 'findMatch',\n      showIfCollapsed: true\n    });\n  }\n  static {\n    this._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n      description: 'find-match-only-overview',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n      }\n    });\n  }\n  static {\n    this._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n      description: 'find-range-highlight',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      className: 'rangeHighlight',\n      isWholeLine: true\n    });\n  }\n  static {\n    this._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n      description: 'find-scope',\n      className: 'findScope',\n      isWholeLine: true\n    });\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n  constructor(editorSelection, ranges, replaceStrings) {\n    this._editorSelection = editorSelection;\n    this._ranges = ranges;\n    this._replaceStrings = replaceStrings;\n    this._trackedEditorSelectionId = null;\n  }\n  getEditOperations(model, builder) {\n    if (this._ranges.length > 0) {\n      // Collect all edit operations\n      const ops = [];\n      for (let i = 0; i < this._ranges.length; i++) {\n        ops.push({\n          range: this._ranges[i],\n          text: this._replaceStrings[i]\n        });\n      }\n      // Sort them in ascending order by range starts\n      ops.sort((o1, o2) => {\n        return Range.compareRangesUsingStarts(o1.range, o2.range);\n      });\n      // Merge operations that touch each other\n      const resultOps = [];\n      let previousOp = ops[0];\n      for (let i = 1; i < ops.length; i++) {\n        if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n          // These operations are one after another and can be merged\n          previousOp.range = previousOp.range.plusRange(ops[i].range);\n          previousOp.text = previousOp.text + ops[i].text;\n        } else {\n          resultOps.push(previousOp);\n          previousOp = ops[i];\n        }\n      }\n      resultOps.push(previousOp);\n      for (const op of resultOps) {\n        builder.addEditOperation(op.range, op.text);\n      }\n    }\n    this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this._trackedEditorSelectionId);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\n  if (matches && matches[0] !== '') {\n    const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\n    const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\n    if (containsHyphens && !containsUnderscores) {\n      return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\n    } else if (!containsHyphens && containsUnderscores) {\n      return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\n    }\n    if (matches[0].toUpperCase() === matches[0]) {\n      return pattern.toUpperCase();\n    } else if (matches[0].toLowerCase() === matches[0]) {\n      return pattern.toLowerCase();\n    } else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\n      return pattern[0].toUpperCase() + pattern.substr(1);\n    } else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\n      return pattern[0].toLowerCase() + pattern.substr(1);\n    } else {\n      // we don't understand its pattern yet.\n      return pattern;\n    }\n  } else {\n    return pattern;\n  }\n}\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n  const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\n  return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\n}\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n  const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\n  const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\n  let replaceString = '';\n  splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\n    replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\n  });\n  return replaceString.slice(0, -1);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n  constructor(staticValue) {\n    this.staticValue = staticValue;\n    this.kind = 0 /* ReplacePatternKind.StaticValue */;\n  }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n  constructor(pieces) {\n    this.pieces = pieces;\n    this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n  }\n}\nexport class ReplacePattern {\n  static fromStaticValue(value) {\n    return new ReplacePattern([ReplacePiece.staticValue(value)]);\n  }\n  get hasReplacementPatterns() {\n    return this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */;\n  }\n  constructor(pieces) {\n    if (!pieces || pieces.length === 0) {\n      this._state = new StaticValueReplacePattern('');\n    } else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n      this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n    } else {\n      this._state = new DynamicPiecesReplacePattern(pieces);\n    }\n  }\n  buildReplaceString(matches, preserveCase) {\n    if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n      if (preserveCase) {\n        return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n      } else {\n        return this._state.staticValue;\n      }\n    }\n    let result = '';\n    for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n      const piece = this._state.pieces[i];\n      if (piece.staticValue !== null) {\n        // static value ReplacePiece\n        result += piece.staticValue;\n        continue;\n      }\n      // match index ReplacePiece\n      let match = ReplacePattern._substitute(piece.matchIndex, matches);\n      if (piece.caseOps !== null && piece.caseOps.length > 0) {\n        const repl = [];\n        const lenOps = piece.caseOps.length;\n        let opIdx = 0;\n        for (let idx = 0, len = match.length; idx < len; idx++) {\n          if (opIdx >= lenOps) {\n            repl.push(match.slice(idx));\n            break;\n          }\n          switch (piece.caseOps[opIdx]) {\n            case 'U':\n              repl.push(match[idx].toUpperCase());\n              break;\n            case 'u':\n              repl.push(match[idx].toUpperCase());\n              opIdx++;\n              break;\n            case 'L':\n              repl.push(match[idx].toLowerCase());\n              break;\n            case 'l':\n              repl.push(match[idx].toLowerCase());\n              opIdx++;\n              break;\n            default:\n              repl.push(match[idx]);\n          }\n        }\n        match = repl.join('');\n      }\n      result += match;\n    }\n    return result;\n  }\n  static _substitute(matchIndex, matches) {\n    if (matches === null) {\n      return '';\n    }\n    if (matchIndex === 0) {\n      return matches[0];\n    }\n    let remainder = '';\n    while (matchIndex > 0) {\n      if (matchIndex < matches.length) {\n        // A match can be undefined\n        const match = matches[matchIndex] || '';\n        return match + remainder;\n      }\n      remainder = String(matchIndex % 10) + remainder;\n      matchIndex = Math.floor(matchIndex / 10);\n    }\n    return '$' + remainder;\n  }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n  static staticValue(value) {\n    return new ReplacePiece(value, -1, null);\n  }\n  static caseOps(index, caseOps) {\n    return new ReplacePiece(null, index, caseOps);\n  }\n  constructor(staticValue, matchIndex, caseOps) {\n    this.staticValue = staticValue;\n    this.matchIndex = matchIndex;\n    if (!caseOps || caseOps.length === 0) {\n      this.caseOps = null;\n    } else {\n      this.caseOps = caseOps.slice(0);\n    }\n  }\n}\nclass ReplacePieceBuilder {\n  constructor(source) {\n    this._source = source;\n    this._lastCharIndex = 0;\n    this._result = [];\n    this._resultLen = 0;\n    this._currentStaticPiece = '';\n  }\n  emitUnchanged(toCharIndex) {\n    this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n    this._lastCharIndex = toCharIndex;\n  }\n  emitStatic(value, toCharIndex) {\n    this._emitStatic(value);\n    this._lastCharIndex = toCharIndex;\n  }\n  _emitStatic(value) {\n    if (value.length === 0) {\n      return;\n    }\n    this._currentStaticPiece += value;\n  }\n  emitMatchIndex(index, toCharIndex, caseOps) {\n    if (this._currentStaticPiece.length !== 0) {\n      this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n      this._currentStaticPiece = '';\n    }\n    this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n    this._lastCharIndex = toCharIndex;\n  }\n  finalize() {\n    this.emitUnchanged(this._source.length);\n    if (this._currentStaticPiece.length !== 0) {\n      this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n      this._currentStaticPiece = '';\n    }\n    return new ReplacePattern(this._result);\n  }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n  if (!replaceString || replaceString.length === 0) {\n    return new ReplacePattern(null);\n  }\n  const caseOps = [];\n  const result = new ReplacePieceBuilder(replaceString);\n  for (let i = 0, len = replaceString.length; i < len; i++) {\n    const chCode = replaceString.charCodeAt(i);\n    if (chCode === 92 /* CharCode.Backslash */) {\n      // move to next char\n      i++;\n      if (i >= len) {\n        // string ends with a \\\n        break;\n      }\n      const nextChCode = replaceString.charCodeAt(i);\n      // let replaceWithCharacter: string | null = null;\n      switch (nextChCode) {\n        case 92 /* CharCode.Backslash */:\n          // \\\\ => inserts a \"\\\"\n          result.emitUnchanged(i - 1);\n          result.emitStatic('\\\\', i + 1);\n          break;\n        case 110 /* CharCode.n */:\n          // \\n => inserts a LF\n          result.emitUnchanged(i - 1);\n          result.emitStatic('\\n', i + 1);\n          break;\n        case 116 /* CharCode.t */:\n          // \\t => inserts a TAB\n          result.emitUnchanged(i - 1);\n          result.emitStatic('\\t', i + 1);\n          break;\n        // Case modification of string replacements, patterned after Boost, but only applied\n        // to the replacement text, not subsequent content.\n        case 117 /* CharCode.u */:\n        // \\u => upper-cases one character.\n        case 85 /* CharCode.U */:\n        // \\U => upper-cases ALL following characters.\n        case 108 /* CharCode.l */:\n        // \\l => lower-cases one character.\n        case 76 /* CharCode.L */:\n          // \\L => lower-cases ALL following characters.\n          result.emitUnchanged(i - 1);\n          result.emitStatic('', i + 1);\n          caseOps.push(String.fromCharCode(nextChCode));\n          break;\n      }\n      continue;\n    }\n    if (chCode === 36 /* CharCode.DollarSign */) {\n      // move to next char\n      i++;\n      if (i >= len) {\n        // string ends with a $\n        break;\n      }\n      const nextChCode = replaceString.charCodeAt(i);\n      if (nextChCode === 36 /* CharCode.DollarSign */) {\n        // $$ => inserts a \"$\"\n        result.emitUnchanged(i - 1);\n        result.emitStatic('$', i + 1);\n        continue;\n      }\n      if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n        // $& and $0 => inserts the matched substring.\n        result.emitUnchanged(i - 1);\n        result.emitMatchIndex(0, i + 1, caseOps);\n        caseOps.length = 0;\n        continue;\n      }\n      if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n        // $n\n        let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n        // peek next char to probe for $nn\n        if (i + 1 < len) {\n          const nextNextChCode = replaceString.charCodeAt(i + 1);\n          if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n            // $nn\n            // move to next char\n            i++;\n            matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n            result.emitUnchanged(i - 2);\n            result.emitMatchIndex(matchIndex, i + 1, caseOps);\n            caseOps.length = 0;\n            continue;\n          }\n        }\n        result.emitUnchanged(i - 1);\n        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n        caseOps.length = 0;\n        continue;\n      }\n    }\n  }\n  return result.finalize();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport './findOptionsWidget.css';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { createInstantHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nexport let FindOptionsWidget = /*#__PURE__*/(() => {\n  class FindOptionsWidget extends Widget {\n    static {\n      this.ID = 'editor.contrib.findOptionsWidget';\n    }\n    constructor(editor, state, keybindingService) {\n      super();\n      this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n      this._isVisible = false;\n      this._editor = editor;\n      this._state = state;\n      this._keybindingService = keybindingService;\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'findOptionsWidget';\n      this._domNode.style.display = 'none';\n      this._domNode.style.top = '10px';\n      this._domNode.style.zIndex = '12';\n      this._domNode.setAttribute('role', 'presentation');\n      this._domNode.setAttribute('aria-hidden', 'true');\n      const toggleStyles = {\n        inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n        inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n        inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground)\n      };\n      const hoverDelegate = this._register(createInstantHoverDelegate());\n      this.caseSensitive = this._register(new CaseSensitiveToggle({\n        appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n        isChecked: this._state.matchCase,\n        hoverDelegate,\n        ...toggleStyles\n      }));\n      this._domNode.appendChild(this.caseSensitive.domNode);\n      this._register(this.caseSensitive.onChange(() => {\n        this._state.change({\n          matchCase: this.caseSensitive.checked\n        }, false);\n      }));\n      this.wholeWords = this._register(new WholeWordsToggle({\n        appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n        isChecked: this._state.wholeWord,\n        hoverDelegate,\n        ...toggleStyles\n      }));\n      this._domNode.appendChild(this.wholeWords.domNode);\n      this._register(this.wholeWords.onChange(() => {\n        this._state.change({\n          wholeWord: this.wholeWords.checked\n        }, false);\n      }));\n      this.regex = this._register(new RegexToggle({\n        appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n        isChecked: this._state.isRegex,\n        hoverDelegate,\n        ...toggleStyles\n      }));\n      this._domNode.appendChild(this.regex.domNode);\n      this._register(this.regex.onChange(() => {\n        this._state.change({\n          isRegex: this.regex.checked\n        }, false);\n      }));\n      this._editor.addOverlayWidget(this);\n      this._register(this._state.onFindReplaceStateChange(e => {\n        let somethingChanged = false;\n        if (e.isRegex) {\n          this.regex.checked = this._state.isRegex;\n          somethingChanged = true;\n        }\n        if (e.wholeWord) {\n          this.wholeWords.checked = this._state.wholeWord;\n          somethingChanged = true;\n        }\n        if (e.matchCase) {\n          this.caseSensitive.checked = this._state.matchCase;\n          somethingChanged = true;\n        }\n        if (!this._state.isRevealed && somethingChanged) {\n          this._revealTemporarily();\n        }\n      }));\n      this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, e => this._onMouseLeave()));\n      this._register(dom.addDisposableListener(this._domNode, 'mouseover', e => this._onMouseOver()));\n    }\n    _keybindingLabelFor(actionId) {\n      const kb = this._keybindingService.lookupKeybinding(actionId);\n      if (!kb) {\n        return '';\n      }\n      return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n      this._editor.removeOverlayWidget(this);\n      super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n      return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n      return this._domNode;\n    }\n    getPosition() {\n      return {\n        preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n      };\n    }\n    highlightFindOptions() {\n      this._revealTemporarily();\n    }\n    _revealTemporarily() {\n      this._show();\n      this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n      this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n      this._hideSoon.cancel();\n    }\n    _show() {\n      if (this._isVisible) {\n        return;\n      }\n      this._isVisible = true;\n      this._domNode.style.display = 'block';\n    }\n    _hide() {\n      if (!this._isVisible) {\n        return;\n      }\n      this._isVisible = false;\n      this._domNode.style.display = 'none';\n    }\n  }\n  return FindOptionsWidget;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n  if (override === 1 /* FindOptionOverride.True */) {\n    return true;\n  }\n  if (override === 2 /* FindOptionOverride.False */) {\n    return false;\n  }\n  return value;\n}\nexport class FindReplaceState extends Disposable {\n  get searchString() {\n    return this._searchString;\n  }\n  get replaceString() {\n    return this._replaceString;\n  }\n  get isRevealed() {\n    return this._isRevealed;\n  }\n  get isReplaceRevealed() {\n    return this._isReplaceRevealed;\n  }\n  get isRegex() {\n    return effectiveOptionValue(this._isRegexOverride, this._isRegex);\n  }\n  get wholeWord() {\n    return effectiveOptionValue(this._wholeWordOverride, this._wholeWord);\n  }\n  get matchCase() {\n    return effectiveOptionValue(this._matchCaseOverride, this._matchCase);\n  }\n  get preserveCase() {\n    return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase);\n  }\n  get actualIsRegex() {\n    return this._isRegex;\n  }\n  get actualWholeWord() {\n    return this._wholeWord;\n  }\n  get actualMatchCase() {\n    return this._matchCase;\n  }\n  get actualPreserveCase() {\n    return this._preserveCase;\n  }\n  get searchScope() {\n    return this._searchScope;\n  }\n  get matchesPosition() {\n    return this._matchesPosition;\n  }\n  get matchesCount() {\n    return this._matchesCount;\n  }\n  get currentMatch() {\n    return this._currentMatch;\n  }\n  constructor() {\n    super();\n    this._onFindReplaceStateChange = this._register(new Emitter());\n    this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n    this._searchString = '';\n    this._replaceString = '';\n    this._isRevealed = false;\n    this._isReplaceRevealed = false;\n    this._isRegex = false;\n    this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n    this._wholeWord = false;\n    this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n    this._matchCase = false;\n    this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n    this._preserveCase = false;\n    this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n    this._searchScope = null;\n    this._matchesPosition = 0;\n    this._matchesCount = 0;\n    this._currentMatch = null;\n    this._loop = true;\n    this._isSearching = false;\n    this._filters = null;\n  }\n  changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n    const changeEvent = {\n      moveCursor: false,\n      updateHistory: false,\n      searchString: false,\n      replaceString: false,\n      isRevealed: false,\n      isReplaceRevealed: false,\n      isRegex: false,\n      wholeWord: false,\n      matchCase: false,\n      preserveCase: false,\n      searchScope: false,\n      matchesPosition: false,\n      matchesCount: false,\n      currentMatch: false,\n      loop: false,\n      isSearching: false,\n      filters: false\n    };\n    let somethingChanged = false;\n    if (matchesCount === 0) {\n      matchesPosition = 0;\n    }\n    if (matchesPosition > matchesCount) {\n      matchesPosition = matchesCount;\n    }\n    if (this._matchesPosition !== matchesPosition) {\n      this._matchesPosition = matchesPosition;\n      changeEvent.matchesPosition = true;\n      somethingChanged = true;\n    }\n    if (this._matchesCount !== matchesCount) {\n      this._matchesCount = matchesCount;\n      changeEvent.matchesCount = true;\n      somethingChanged = true;\n    }\n    if (typeof currentMatch !== 'undefined') {\n      if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n        this._currentMatch = currentMatch;\n        changeEvent.currentMatch = true;\n        somethingChanged = true;\n      }\n    }\n    if (somethingChanged) {\n      this._onFindReplaceStateChange.fire(changeEvent);\n    }\n  }\n  change(newState, moveCursor, updateHistory = true) {\n    const changeEvent = {\n      moveCursor: moveCursor,\n      updateHistory: updateHistory,\n      searchString: false,\n      replaceString: false,\n      isRevealed: false,\n      isReplaceRevealed: false,\n      isRegex: false,\n      wholeWord: false,\n      matchCase: false,\n      preserveCase: false,\n      searchScope: false,\n      matchesPosition: false,\n      matchesCount: false,\n      currentMatch: false,\n      loop: false,\n      isSearching: false,\n      filters: false\n    };\n    let somethingChanged = false;\n    const oldEffectiveIsRegex = this.isRegex;\n    const oldEffectiveWholeWords = this.wholeWord;\n    const oldEffectiveMatchCase = this.matchCase;\n    const oldEffectivePreserveCase = this.preserveCase;\n    if (typeof newState.searchString !== 'undefined') {\n      if (this._searchString !== newState.searchString) {\n        this._searchString = newState.searchString;\n        changeEvent.searchString = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.replaceString !== 'undefined') {\n      if (this._replaceString !== newState.replaceString) {\n        this._replaceString = newState.replaceString;\n        changeEvent.replaceString = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.isRevealed !== 'undefined') {\n      if (this._isRevealed !== newState.isRevealed) {\n        this._isRevealed = newState.isRevealed;\n        changeEvent.isRevealed = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.isReplaceRevealed !== 'undefined') {\n      if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n        this._isReplaceRevealed = newState.isReplaceRevealed;\n        changeEvent.isReplaceRevealed = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.isRegex !== 'undefined') {\n      this._isRegex = newState.isRegex;\n    }\n    if (typeof newState.wholeWord !== 'undefined') {\n      this._wholeWord = newState.wholeWord;\n    }\n    if (typeof newState.matchCase !== 'undefined') {\n      this._matchCase = newState.matchCase;\n    }\n    if (typeof newState.preserveCase !== 'undefined') {\n      this._preserveCase = newState.preserveCase;\n    }\n    if (typeof newState.searchScope !== 'undefined') {\n      if (!newState.searchScope?.every(newSearchScope => {\n        return this._searchScope?.some(existingSearchScope => {\n          return !Range.equalsRange(existingSearchScope, newSearchScope);\n        });\n      })) {\n        this._searchScope = newState.searchScope;\n        changeEvent.searchScope = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.loop !== 'undefined') {\n      if (this._loop !== newState.loop) {\n        this._loop = newState.loop;\n        changeEvent.loop = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.isSearching !== 'undefined') {\n      if (this._isSearching !== newState.isSearching) {\n        this._isSearching = newState.isSearching;\n        changeEvent.isSearching = true;\n        somethingChanged = true;\n      }\n    }\n    if (typeof newState.filters !== 'undefined') {\n      if (this._filters) {\n        this._filters.update(newState.filters);\n      } else {\n        this._filters = newState.filters;\n      }\n      changeEvent.filters = true;\n      somethingChanged = true;\n    }\n    // Overrides get set when they explicitly come in and get reset anytime something else changes\n    this._isRegexOverride = typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */;\n    this._wholeWordOverride = typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */;\n    this._matchCaseOverride = typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */;\n    this._preserveCaseOverride = typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */;\n    if (oldEffectiveIsRegex !== this.isRegex) {\n      somethingChanged = true;\n      changeEvent.isRegex = true;\n    }\n    if (oldEffectiveWholeWords !== this.wholeWord) {\n      somethingChanged = true;\n      changeEvent.wholeWord = true;\n    }\n    if (oldEffectiveMatchCase !== this.matchCase) {\n      somethingChanged = true;\n      changeEvent.matchCase = true;\n    }\n    if (oldEffectivePreserveCase !== this.preserveCase) {\n      somethingChanged = true;\n      changeEvent.preserveCase = true;\n    }\n    if (somethingChanged) {\n      this._onFindReplaceStateChange.fire(changeEvent);\n    }\n  }\n  canNavigateBack() {\n    return this.canNavigateInLoop() || this.matchesPosition !== 1;\n  }\n  canNavigateForward() {\n    return this.canNavigateInLoop() || this.matchesPosition < this.matchesCount;\n  }\n  canNavigateInLoop() {\n    return this._loop || this.matchesCount >= MATCHES_LIMIT;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { asCssVariable, contrastBorder, editorFindMatchForeground, editorFindMatchHighlightBorder, editorFindMatchHighlightForeground, editorFindRangeHighlightBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { createInstantHoverDelegate, getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_DIALOG_LABEL = nls.localize('label.findDialog', \"Find / Replace\");\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */;\nexport class FindWidgetViewZone {\n  constructor(afterLineNumber) {\n    this.afterLineNumber = afterLineNumber;\n    this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n    this.suppressMouseDown = false;\n    this.domNode = document.createElement('div');\n    this.domNode.className = 'dock-find-viewzone';\n  }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n  const isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionStart > 0) {\n    event.stopPropagation();\n    return;\n  }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n  const isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n    event.stopPropagation();\n    return;\n  }\n}\nexport let FindWidget = /*#__PURE__*/(() => {\n  class FindWidget extends Widget {\n    static {\n      this.ID = 'editor.contrib.findWidget';\n    }\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService, _hoverService) {\n      super();\n      this._hoverService = _hoverService;\n      this._cachedHeight = null;\n      this._revealTimeouts = [];\n      this._codeEditor = codeEditor;\n      this._controller = controller;\n      this._state = state;\n      this._contextViewProvider = contextViewProvider;\n      this._keybindingService = keybindingService;\n      this._contextKeyService = contextKeyService;\n      this._storageService = storageService;\n      this._notificationService = notificationService;\n      this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n      this._isVisible = false;\n      this._isReplaceVisible = false;\n      this._ignoreChangeEvent = false;\n      this._updateHistoryDelayer = new Delayer(500);\n      this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n      this._register(this._state.onFindReplaceStateChange(e => this._onStateChanged(e)));\n      this._buildDomNode();\n      this._updateButtons();\n      this._tryUpdateWidgetWidth();\n      this._findInput.inputBox.layout();\n      this._register(this._codeEditor.onDidChangeConfiguration(e => {\n        if (e.hasChanged(92 /* EditorOption.readOnly */)) {\n          if (this._codeEditor.getOption(92 /* EditorOption.readOnly */)) {\n            // Hide replace part if editor becomes read only\n            this._state.change({\n              isReplaceRevealed: false\n            }, false);\n          }\n          this._updateButtons();\n        }\n        if (e.hasChanged(146 /* EditorOption.layoutInfo */)) {\n          this._tryUpdateWidgetWidth();\n        }\n        if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n          this.updateAccessibilitySupport();\n        }\n        if (e.hasChanged(41 /* EditorOption.find */)) {\n          const supportLoop = this._codeEditor.getOption(41 /* EditorOption.find */).loop;\n          this._state.change({\n            loop: supportLoop\n          }, false);\n          const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n          if (addExtraSpaceOnTop && !this._viewZone) {\n            this._viewZone = new FindWidgetViewZone(0);\n            this._showViewZone();\n          }\n          if (!addExtraSpaceOnTop && this._viewZone) {\n            this._removeViewZone();\n          }\n        }\n      }));\n      this.updateAccessibilitySupport();\n      this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n        if (this._isVisible) {\n          this._updateToggleSelectionFindButton();\n        }\n      }));\n      this._register(this._codeEditor.onDidFocusEditorWidget(async () => {\n        if (this._isVisible) {\n          const globalBufferTerm = await this._controller.getGlobalBufferTerm();\n          if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n            this._state.change({\n              searchString: globalBufferTerm\n            }, false);\n            this._findInput.select();\n          }\n        }\n      }));\n      this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n      this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n      this._register(this._findFocusTracker.onDidFocus(() => {\n        this._findInputFocused.set(true);\n        this._updateSearchScope();\n      }));\n      this._register(this._findFocusTracker.onDidBlur(() => {\n        this._findInputFocused.set(false);\n      }));\n      this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n      this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n      this._register(this._replaceFocusTracker.onDidFocus(() => {\n        this._replaceInputFocused.set(true);\n        this._updateSearchScope();\n      }));\n      this._register(this._replaceFocusTracker.onDidBlur(() => {\n        this._replaceInputFocused.set(false);\n      }));\n      this._codeEditor.addOverlayWidget(this);\n      if (this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop) {\n        this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n      }\n      this._register(this._codeEditor.onDidChangeModel(() => {\n        if (!this._isVisible) {\n          return;\n        }\n        this._viewZoneId = undefined;\n      }));\n      this._register(this._codeEditor.onDidScrollChange(e => {\n        if (e.scrollTopChanged) {\n          this._layoutViewZone();\n          return;\n        }\n        // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n        setTimeout(() => {\n          this._layoutViewZone();\n        }, 0);\n      }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n      return FindWidget.ID;\n    }\n    getDomNode() {\n      return this._domNode;\n    }\n    getPosition() {\n      if (this._isVisible) {\n        return {\n          preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n      }\n      return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n      if (e.searchString) {\n        try {\n          this._ignoreChangeEvent = true;\n          this._findInput.setValue(this._state.searchString);\n        } finally {\n          this._ignoreChangeEvent = false;\n        }\n        this._updateButtons();\n      }\n      if (e.replaceString) {\n        this._replaceInput.inputBox.value = this._state.replaceString;\n      }\n      if (e.isRevealed) {\n        if (this._state.isRevealed) {\n          this._reveal();\n        } else {\n          this._hide(true);\n        }\n      }\n      if (e.isReplaceRevealed) {\n        if (this._state.isReplaceRevealed) {\n          if (!this._codeEditor.getOption(92 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n            this._isReplaceVisible = true;\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            this._updateButtons();\n            this._replaceInput.inputBox.layout();\n          }\n        } else {\n          if (this._isReplaceVisible) {\n            this._isReplaceVisible = false;\n            this._updateButtons();\n          }\n        }\n      }\n      if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n        if (this._tryUpdateHeight()) {\n          this._showViewZone();\n        }\n      }\n      if (e.isRegex) {\n        this._findInput.setRegex(this._state.isRegex);\n      }\n      if (e.wholeWord) {\n        this._findInput.setWholeWords(this._state.wholeWord);\n      }\n      if (e.matchCase) {\n        this._findInput.setCaseSensitive(this._state.matchCase);\n      }\n      if (e.preserveCase) {\n        this._replaceInput.setPreserveCase(this._state.preserveCase);\n      }\n      if (e.searchScope) {\n        if (this._state.searchScope) {\n          this._toggleSelectionFind.checked = true;\n        } else {\n          this._toggleSelectionFind.checked = false;\n        }\n        this._updateToggleSelectionFindButton();\n      }\n      if (e.searchString || e.matchesCount || e.matchesPosition) {\n        const showRedOutline = this._state.searchString.length > 0 && this._state.matchesCount === 0;\n        this._domNode.classList.toggle('no-results', showRedOutline);\n        this._updateMatchesCount();\n        this._updateButtons();\n      }\n      if (e.searchString || e.currentMatch) {\n        this._layoutViewZone();\n      }\n      if (e.updateHistory) {\n        this._delayedUpdateHistory();\n      }\n      if (e.loop) {\n        this._updateButtons();\n      }\n    }\n    _delayedUpdateHistory() {\n      this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n      if (this._state.searchString) {\n        this._findInput.inputBox.addToHistory();\n      }\n      if (this._state.replaceString) {\n        this._replaceInput.inputBox.addToHistory();\n      }\n    }\n    _updateMatchesCount() {\n      this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n      if (this._state.matchesCount >= MATCHES_LIMIT) {\n        this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n      } else {\n        this._matchesCount.title = '';\n      }\n      // remove previous content\n      this._matchesCount.firstChild?.remove();\n      let label;\n      if (this._state.matchesCount > 0) {\n        let matchesCount = String(this._state.matchesCount);\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n          matchesCount += '+';\n        }\n        let matchesPosition = String(this._state.matchesPosition);\n        if (matchesPosition === '0') {\n          matchesPosition = '?';\n        }\n        label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n      } else {\n        label = NLS_NO_RESULTS;\n      }\n      this._matchesCount.appendChild(document.createTextNode(label));\n      alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n      MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n      if (label === NLS_NO_RESULTS) {\n        return searchString === '' ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label) : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n      }\n      if (currentMatch) {\n        const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n        const model = this._codeEditor.getModel();\n        if (model && currentMatch.startLineNumber <= model.getLineCount() && currentMatch.startLineNumber >= 1) {\n          const lineContent = model.getLineContent(currentMatch.startLineNumber);\n          return `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n      }\n      return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n      const selection = this._codeEditor.getSelection();\n      const isSelection = selection ? selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn : false;\n      const isChecked = this._toggleSelectionFind.checked;\n      if (this._isVisible && (isChecked || isSelection)) {\n        this._toggleSelectionFind.enable();\n      } else {\n        this._toggleSelectionFind.disable();\n      }\n    }\n    _updateButtons() {\n      this._findInput.setEnabled(this._isVisible);\n      this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n      this._updateToggleSelectionFindButton();\n      this._closeBtn.setEnabled(this._isVisible);\n      const findInputIsNonEmpty = this._state.searchString.length > 0;\n      const matchesCount = this._state.matchesCount ? true : false;\n      this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n      this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n      this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n      this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n      this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n      this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n      const canReplace = !this._codeEditor.getOption(92 /* EditorOption.readOnly */);\n      this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n      this._revealTimeouts.forEach(e => {\n        clearTimeout(e);\n      });\n      this._revealTimeouts = [];\n      if (!this._isVisible) {\n        this._isVisible = true;\n        const selection = this._codeEditor.getSelection();\n        switch (this._codeEditor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\n          case 'always':\n            this._toggleSelectionFind.checked = true;\n            break;\n          case 'never':\n            this._toggleSelectionFind.checked = false;\n            break;\n          case 'multiline':\n            {\n              const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n              this._toggleSelectionFind.checked = isSelectionMultipleLine;\n              break;\n            }\n          default:\n            break;\n        }\n        this._tryUpdateWidgetWidth();\n        this._updateButtons();\n        this._revealTimeouts.push(setTimeout(() => {\n          this._domNode.classList.add('visible');\n          this._domNode.setAttribute('aria-hidden', 'false');\n        }, 0));\n        // validate query again as it's being dismissed when we hide the find widget.\n        this._revealTimeouts.push(setTimeout(() => {\n          this._findInput.validate();\n        }, 200));\n        this._codeEditor.layoutOverlayWidget(this);\n        let adjustEditorScrollTop = true;\n        if (this._codeEditor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n          const domNode = this._codeEditor.getDomNode();\n          if (domNode) {\n            const editorCoords = dom.getDomNodePagePosition(domNode);\n            const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n            const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n            const startTop = startCoords ? startCoords.top : 0;\n            if (this._viewZone && startTop < this._viewZone.heightInPx) {\n              if (selection.endLineNumber > selection.startLineNumber) {\n                adjustEditorScrollTop = false;\n              }\n              const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n              if (startLeft > leftOfFindWidget) {\n                adjustEditorScrollTop = false;\n              }\n              const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n              const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n              if (endLeft > leftOfFindWidget) {\n                adjustEditorScrollTop = false;\n              }\n            }\n          }\n        }\n        this._showViewZone(adjustEditorScrollTop);\n      }\n    }\n    _hide(focusTheEditor) {\n      this._revealTimeouts.forEach(e => {\n        clearTimeout(e);\n      });\n      this._revealTimeouts = [];\n      if (this._isVisible) {\n        this._isVisible = false;\n        this._updateButtons();\n        this._domNode.classList.remove('visible');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._findInput.clearMessage();\n        if (focusTheEditor) {\n          this._codeEditor.focus();\n        }\n        this._codeEditor.layoutOverlayWidget(this);\n        this._removeViewZone();\n      }\n    }\n    _layoutViewZone(targetScrollTop) {\n      const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n      if (!addExtraSpaceOnTop) {\n        this._removeViewZone();\n        return;\n      }\n      if (!this._isVisible) {\n        return;\n      }\n      const viewZone = this._viewZone;\n      if (this._viewZoneId !== undefined || !viewZone) {\n        return;\n      }\n      this._codeEditor.changeViewZones(accessor => {\n        viewZone.heightInPx = this._getHeight();\n        this._viewZoneId = accessor.addZone(viewZone);\n        // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n        this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n      });\n    }\n    _showViewZone(adjustScroll = true) {\n      if (!this._isVisible) {\n        return;\n      }\n      const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n      if (!addExtraSpaceOnTop) {\n        return;\n      }\n      if (this._viewZone === undefined) {\n        this._viewZone = new FindWidgetViewZone(0);\n      }\n      const viewZone = this._viewZone;\n      this._codeEditor.changeViewZones(accessor => {\n        if (this._viewZoneId !== undefined) {\n          // the view zone already exists, we need to update the height\n          const newHeight = this._getHeight();\n          if (newHeight === viewZone.heightInPx) {\n            return;\n          }\n          const scrollAdjustment = newHeight - viewZone.heightInPx;\n          viewZone.heightInPx = newHeight;\n          accessor.layoutZone(this._viewZoneId);\n          if (adjustScroll) {\n            this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n          }\n          return;\n        } else {\n          let scrollAdjustment = this._getHeight();\n          // if the editor has top padding, factor that into the zone height\n          scrollAdjustment -= this._codeEditor.getOption(84 /* EditorOption.padding */).top;\n          if (scrollAdjustment <= 0) {\n            return;\n          }\n          viewZone.heightInPx = scrollAdjustment;\n          this._viewZoneId = accessor.addZone(viewZone);\n          if (adjustScroll) {\n            this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n          }\n        }\n      });\n    }\n    _removeViewZone() {\n      this._codeEditor.changeViewZones(accessor => {\n        if (this._viewZoneId !== undefined) {\n          accessor.removeZone(this._viewZoneId);\n          this._viewZoneId = undefined;\n          if (this._viewZone) {\n            this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n            this._viewZone = undefined;\n          }\n        }\n      });\n    }\n    _tryUpdateWidgetWidth() {\n      if (!this._isVisible) {\n        return;\n      }\n      if (!this._domNode.isConnected) {\n        // the widget is not in the DOM\n        return;\n      }\n      const layoutInfo = this._codeEditor.getLayoutInfo();\n      const editorContentWidth = layoutInfo.contentWidth;\n      if (editorContentWidth <= 0) {\n        // for example, diff view original editor\n        this._domNode.classList.add('hiddenEditor');\n        return;\n      } else if (this._domNode.classList.contains('hiddenEditor')) {\n        this._domNode.classList.remove('hiddenEditor');\n      }\n      const editorWidth = layoutInfo.width;\n      const minimapWidth = layoutInfo.minimap.minimapWidth;\n      let collapsedFindWidget = false;\n      let reducedFindWidget = false;\n      let narrowFindWidget = false;\n      if (this._resized) {\n        const widgetWidth = dom.getTotalWidth(this._domNode);\n        if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n          // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n          this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n          this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n          return;\n        }\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n        reducedFindWidget = true;\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n        narrowFindWidget = true;\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n        collapsedFindWidget = true;\n      }\n      this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n      this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n      this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n      if (!narrowFindWidget && !collapsedFindWidget) {\n        // the minimal left offset of findwidget is 15px.\n        this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n      }\n      this._findInput.layout({\n        collapsedFindWidget,\n        narrowFindWidget,\n        reducedFindWidget\n      });\n      if (this._resized) {\n        const findInputWidth = this._findInput.inputBox.element.clientWidth;\n        if (findInputWidth > 0) {\n          this._replaceInput.width = findInputWidth;\n        }\n      } else if (this._isReplaceVisible) {\n        this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n      }\n    }\n    _getHeight() {\n      let totalheight = 0;\n      // find input margin top\n      totalheight += 4;\n      // find input height\n      totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n      if (this._isReplaceVisible) {\n        // replace input margin\n        totalheight += 4;\n        totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n      }\n      // margin bottom\n      totalheight += 4;\n      return totalheight;\n    }\n    _tryUpdateHeight() {\n      const totalHeight = this._getHeight();\n      if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n        return false;\n      }\n      this._cachedHeight = totalHeight;\n      this._domNode.style.height = `${totalHeight}px`;\n      return true;\n    }\n    // ----- Public\n    focusFindInput() {\n      this._findInput.select();\n      // Edge browser requires focus() in addition to select()\n      this._findInput.focus();\n    }\n    focusReplaceInput() {\n      this._replaceInput.select();\n      // Edge browser requires focus() in addition to select()\n      this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n      this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n      if (!this._codeEditor.hasModel()) {\n        return;\n      }\n      if (this._toggleSelectionFind.checked) {\n        const selections = this._codeEditor.getSelections();\n        selections.map(selection => {\n          if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n          }\n          const currentMatch = this._state.currentMatch;\n          if (selection.startLineNumber !== selection.endLineNumber) {\n            if (!Range.equalsRange(selection, currentMatch)) {\n              return selection;\n            }\n          }\n          return null;\n        }).filter(element => !!element);\n        if (selections.length) {\n          this._state.change({\n            searchScope: selections\n          }, true);\n        }\n      }\n    }\n    _onFindInputMouseDown(e) {\n      // on linux, middle key does pasting.\n      if (e.middleButton) {\n        e.stopPropagation();\n      }\n    }\n    _onFindInputKeyDown(e) {\n      if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n        if (this._keybindingService.dispatchEvent(e, e.target)) {\n          e.preventDefault();\n          return;\n        } else {\n          this._findInput.inputBox.insertAtCursor('\\n');\n          e.preventDefault();\n          return;\n        }\n      }\n      if (e.equals(2 /* KeyCode.Tab */)) {\n        if (this._isReplaceVisible) {\n          this._replaceInput.focus();\n        } else {\n          this._findInput.focusOnCaseSensitive();\n        }\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n        this._codeEditor.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */)) {\n        return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n      }\n      if (e.equals(18 /* KeyCode.DownArrow */)) {\n        return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n      }\n    }\n    _onReplaceInputKeyDown(e) {\n      if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n        if (this._keybindingService.dispatchEvent(e, e.target)) {\n          e.preventDefault();\n          return;\n        } else {\n          if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n            // this is the first time when users press Ctrl + Enter to replace all\n            this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n            this._ctrlEnterReplaceAllWarningPrompted = true;\n            this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n          }\n          this._replaceInput.inputBox.insertAtCursor('\\n');\n          e.preventDefault();\n          return;\n        }\n      }\n      if (e.equals(2 /* KeyCode.Tab */)) {\n        this._findInput.focusOnCaseSensitive();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n        this._findInput.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n        this._codeEditor.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */)) {\n        return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n      }\n      if (e.equals(18 /* KeyCode.DownArrow */)) {\n        return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n      }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n      return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n      const kb = this._keybindingService.lookupKeybinding(actionId);\n      if (!kb) {\n        return '';\n      }\n      return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n      const flexibleHeight = true;\n      const flexibleWidth = true;\n      // Find input\n      this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n        width: FIND_INPUT_AREA_WIDTH,\n        label: NLS_FIND_INPUT_LABEL,\n        placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n        appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n        appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n        appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n        validation: value => {\n          if (value.length === 0 || !this._findInput.getRegex()) {\n            return null;\n          }\n          try {\n            // use `g` and `u` which are also used by the TextModel search\n            new RegExp(value, 'gu');\n            return null;\n          } catch (e) {\n            return {\n              content: e.message\n            };\n          }\n        },\n        flexibleHeight,\n        flexibleWidth,\n        flexibleMaxHeight: 118,\n        showCommonFindToggles: true,\n        showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n        inputBoxStyles: defaultInputBoxStyles,\n        toggleStyles: defaultToggleStyles\n      }, this._contextKeyService));\n      this._findInput.setRegex(!!this._state.isRegex);\n      this._findInput.setCaseSensitive(!!this._state.matchCase);\n      this._findInput.setWholeWords(!!this._state.wholeWord);\n      this._register(this._findInput.onKeyDown(e => this._onFindInputKeyDown(e)));\n      this._register(this._findInput.inputBox.onDidChange(() => {\n        if (this._ignoreChangeEvent) {\n          return;\n        }\n        this._state.change({\n          searchString: this._findInput.getValue()\n        }, true);\n      }));\n      this._register(this._findInput.onDidOptionChange(() => {\n        this._state.change({\n          isRegex: this._findInput.getRegex(),\n          wholeWord: this._findInput.getWholeWords(),\n          matchCase: this._findInput.getCaseSensitive()\n        }, true);\n      }));\n      this._register(this._findInput.onCaseSensitiveKeyDown(e => {\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n          if (this._isReplaceVisible) {\n            this._replaceInput.focus();\n            e.preventDefault();\n          }\n        }\n      }));\n      this._register(this._findInput.onRegexKeyDown(e => {\n        if (e.equals(2 /* KeyCode.Tab */)) {\n          if (this._isReplaceVisible) {\n            this._replaceInput.focusOnPreserve();\n            e.preventDefault();\n          }\n        }\n      }));\n      this._register(this._findInput.inputBox.onDidHeightChange(e => {\n        if (this._tryUpdateHeight()) {\n          this._showViewZone();\n        }\n      }));\n      if (platform.isLinux) {\n        this._register(this._findInput.onMouseDown(e => this._onFindInputMouseDown(e)));\n      }\n      this._matchesCount = document.createElement('div');\n      this._matchesCount.className = 'matchesCount';\n      this._updateMatchesCount();\n      // Create a scoped hover delegate for all find related buttons\n      const hoverDelegate = this._register(createInstantHoverDelegate());\n      // Previous button\n      this._prevBtn = this._register(new SimpleButton({\n        label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n        icon: findPreviousMatchIcon,\n        hoverDelegate,\n        onTrigger: () => {\n          assertIsDefined(this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\n        }\n      }, this._hoverService));\n      // Next button\n      this._nextBtn = this._register(new SimpleButton({\n        label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n        icon: findNextMatchIcon,\n        hoverDelegate,\n        onTrigger: () => {\n          assertIsDefined(this._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\n        }\n      }, this._hoverService));\n      const findPart = document.createElement('div');\n      findPart.className = 'find-part';\n      findPart.appendChild(this._findInput.domNode);\n      const actionsContainer = document.createElement('div');\n      actionsContainer.className = 'find-actions';\n      findPart.appendChild(actionsContainer);\n      actionsContainer.appendChild(this._matchesCount);\n      actionsContainer.appendChild(this._prevBtn.domNode);\n      actionsContainer.appendChild(this._nextBtn.domNode);\n      // Toggle selection button\n      this._toggleSelectionFind = this._register(new Toggle({\n        icon: findSelectionIcon,\n        title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n        isChecked: false,\n        hoverDelegate: hoverDelegate,\n        inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n        inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n        inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground)\n      }));\n      this._register(this._toggleSelectionFind.onChange(() => {\n        if (this._toggleSelectionFind.checked) {\n          if (this._codeEditor.hasModel()) {\n            let selections = this._codeEditor.getSelections();\n            selections = selections.map(selection => {\n              if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n              }\n              if (!selection.isEmpty()) {\n                return selection;\n              }\n              return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n              this._state.change({\n                searchScope: selections\n              }, true);\n            }\n          }\n        } else {\n          this._state.change({\n            searchScope: null\n          }, true);\n        }\n      }));\n      actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n      // Close button\n      this._closeBtn = this._register(new SimpleButton({\n        label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n        icon: widgetClose,\n        hoverDelegate,\n        onTrigger: () => {\n          this._state.change({\n            isRevealed: false,\n            searchScope: null\n          }, false);\n        },\n        onKeyDown: e => {\n          if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n              if (this._replaceBtn.isEnabled()) {\n                this._replaceBtn.focus();\n              } else {\n                this._codeEditor.focus();\n              }\n              e.preventDefault();\n            }\n          }\n        }\n      }, this._hoverService));\n      // Replace input\n      this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n        label: NLS_REPLACE_INPUT_LABEL,\n        placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n        appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n        history: [],\n        flexibleHeight,\n        flexibleWidth,\n        flexibleMaxHeight: 118,\n        showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n        inputBoxStyles: defaultInputBoxStyles,\n        toggleStyles: defaultToggleStyles\n      }, this._contextKeyService, true));\n      this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n      this._register(this._replaceInput.onKeyDown(e => this._onReplaceInputKeyDown(e)));\n      this._register(this._replaceInput.inputBox.onDidChange(() => {\n        this._state.change({\n          replaceString: this._replaceInput.inputBox.value\n        }, false);\n      }));\n      this._register(this._replaceInput.inputBox.onDidHeightChange(e => {\n        if (this._isReplaceVisible && this._tryUpdateHeight()) {\n          this._showViewZone();\n        }\n      }));\n      this._register(this._replaceInput.onDidOptionChange(() => {\n        this._state.change({\n          preserveCase: this._replaceInput.getPreserveCase()\n        }, true);\n      }));\n      this._register(this._replaceInput.onPreserveCaseKeyDown(e => {\n        if (e.equals(2 /* KeyCode.Tab */)) {\n          if (this._prevBtn.isEnabled()) {\n            this._prevBtn.focus();\n          } else if (this._nextBtn.isEnabled()) {\n            this._nextBtn.focus();\n          } else if (this._toggleSelectionFind.enabled) {\n            this._toggleSelectionFind.focus();\n          } else if (this._closeBtn.isEnabled()) {\n            this._closeBtn.focus();\n          }\n          e.preventDefault();\n        }\n      }));\n      // Create scoped hover delegate for replace actions\n      const replaceHoverDelegate = this._register(createInstantHoverDelegate());\n      // Replace one button\n      this._replaceBtn = this._register(new SimpleButton({\n        label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n        icon: findReplaceIcon,\n        hoverDelegate: replaceHoverDelegate,\n        onTrigger: () => {\n          this._controller.replace();\n        },\n        onKeyDown: e => {\n          if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._closeBtn.focus();\n            e.preventDefault();\n          }\n        }\n      }, this._hoverService));\n      // Replace all button\n      this._replaceAllBtn = this._register(new SimpleButton({\n        label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n        icon: findReplaceAllIcon,\n        hoverDelegate: replaceHoverDelegate,\n        onTrigger: () => {\n          this._controller.replaceAll();\n        }\n      }, this._hoverService));\n      const replacePart = document.createElement('div');\n      replacePart.className = 'replace-part';\n      replacePart.appendChild(this._replaceInput.domNode);\n      const replaceActionsContainer = document.createElement('div');\n      replaceActionsContainer.className = 'replace-actions';\n      replacePart.appendChild(replaceActionsContainer);\n      replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n      replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n      // Toggle replace button\n      this._toggleReplaceBtn = this._register(new SimpleButton({\n        label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n        className: 'codicon toggle left',\n        onTrigger: () => {\n          this._state.change({\n            isReplaceRevealed: !this._isReplaceVisible\n          }, false);\n          if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            this._replaceInput.inputBox.layout();\n          }\n          this._showViewZone();\n        }\n      }, this._hoverService));\n      this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n      // Widget\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'editor-widget find-widget';\n      this._domNode.setAttribute('aria-hidden', 'true');\n      this._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\n      this._domNode.role = 'dialog';\n      // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n      this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n      this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n      this._domNode.appendChild(findPart);\n      this._domNode.appendChild(this._closeBtn.domNode);\n      this._domNode.appendChild(replacePart);\n      this._resizeSash = this._register(new Sash(this._domNode, this, {\n        orientation: 0 /* Orientation.VERTICAL */,\n        size: 2\n      }));\n      this._resized = false;\n      let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n      this._register(this._resizeSash.onDidStart(() => {\n        originalWidth = dom.getTotalWidth(this._domNode);\n      }));\n      this._register(this._resizeSash.onDidChange(evt => {\n        this._resized = true;\n        const width = originalWidth + evt.startX - evt.currentX;\n        if (width < FIND_WIDGET_INITIAL_WIDTH) {\n          // narrow down the find widget should be handled by CSS.\n          return;\n        }\n        const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n        if (width > maxWidth) {\n          return;\n        }\n        this._domNode.style.width = `${width}px`;\n        if (this._isReplaceVisible) {\n          this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n        this._findInput.inputBox.layout();\n        this._tryUpdateHeight();\n      }));\n      this._register(this._resizeSash.onDidReset(() => {\n        // users double click on the sash\n        const currentWidth = dom.getTotalWidth(this._domNode);\n        if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n          // The editor is narrow and the width of the find widget is controlled fully by CSS.\n          return;\n        }\n        let width = FIND_WIDGET_INITIAL_WIDTH;\n        if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n          // 1. never resized before, double click should maximizes it\n          // 2. users resized it already but its width is the same as default\n          const layoutInfo = this._codeEditor.getLayoutInfo();\n          width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n          this._resized = true;\n        } else {\n          /**\n           * no op, the find widget should be shrinked to its default size.\n           */\n        }\n        this._domNode.style.width = `${width}px`;\n        if (this._isReplaceVisible) {\n          this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n        this._findInput.inputBox.layout();\n      }));\n    }\n    updateAccessibilitySupport() {\n      const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n      this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n  }\n  return FindWidget;\n})();\nexport class SimpleButton extends Widget {\n  constructor(opts, hoverService) {\n    super();\n    this._opts = opts;\n    let className = 'button';\n    if (this._opts.className) {\n      className = className + ' ' + this._opts.className;\n    }\n    if (this._opts.icon) {\n      className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n    }\n    this._domNode = document.createElement('div');\n    this._domNode.tabIndex = 0;\n    this._domNode.className = className;\n    this._domNode.setAttribute('role', 'button');\n    this._domNode.setAttribute('aria-label', this._opts.label);\n    this._register(hoverService.setupManagedHover(opts.hoverDelegate ?? getDefaultHoverDelegate('element'), this._domNode, this._opts.label));\n    this.onclick(this._domNode, e => {\n      this._opts.onTrigger();\n      e.preventDefault();\n    });\n    this.onkeydown(this._domNode, e => {\n      if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n        this._opts.onTrigger();\n        e.preventDefault();\n        return;\n      }\n      this._opts.onKeyDown?.(e);\n    });\n  }\n  get domNode() {\n    return this._domNode;\n  }\n  isEnabled() {\n    return this._domNode.tabIndex >= 0;\n  }\n  focus() {\n    this._domNode.focus();\n  }\n  setEnabled(enabled) {\n    this._domNode.classList.toggle('disabled', !enabled);\n    this._domNode.setAttribute('aria-disabled', String(!enabled));\n    this._domNode.tabIndex = enabled ? 0 : -1;\n  }\n  setExpanded(expanded) {\n    this._domNode.setAttribute('aria-expanded', String(!!expanded));\n    if (expanded) {\n      this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n      this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n    } else {\n      this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n      this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n    }\n  }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n  const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n  if (findMatchHighlightBorder) {\n    collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n  }\n  const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n  if (findRangeHighlightBorder) {\n    collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n  }\n  const hcBorder = theme.getColor(contrastBorder);\n  if (hcBorder) {\n    collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n  }\n  const findMatchForeground = theme.getColor(editorFindMatchForeground);\n  if (findMatchForeground) {\n    collector.addRule(`.monaco-editor .findMatchInline { color: ${findMatchForeground}; }`);\n  }\n  const findMatchHighlightForeground = theme.getColor(editorFindMatchHighlightForeground);\n  if (findMatchHighlightForeground) {\n    collector.addRule(`.monaco-editor .currentFindMatchInline { color: ${findMatchHighlightForeground}; }`);\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nclass PreserveCaseToggle extends Toggle {\n  constructor(opts) {\n    super({\n      // TODO: does this need its own icon?\n      icon: Codicon.preserveCase,\n      title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n      isChecked: opts.isChecked,\n      hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n      inputActiveOptionBorder: opts.inputActiveOptionBorder,\n      inputActiveOptionForeground: opts.inputActiveOptionForeground,\n      inputActiveOptionBackground: opts.inputActiveOptionBackground\n    });\n  }\n}\nexport class ReplaceInput extends Widget {\n  constructor(parent, contextViewProvider, _showOptionButtons, options) {\n    super();\n    this._showOptionButtons = _showOptionButtons;\n    this.fixFocusOnOptionClickEnabled = true;\n    this.cachedOptionsWidth = 0;\n    this._onDidOptionChange = this._register(new Emitter());\n    this.onDidOptionChange = this._onDidOptionChange.event;\n    this._onKeyDown = this._register(new Emitter());\n    this.onKeyDown = this._onKeyDown.event;\n    this._onMouseDown = this._register(new Emitter());\n    this._onInput = this._register(new Emitter());\n    this._onKeyUp = this._register(new Emitter());\n    this._onPreserveCaseKeyDown = this._register(new Emitter());\n    this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n    this.contextViewProvider = contextViewProvider;\n    this.placeholder = options.placeholder || '';\n    this.validation = options.validation;\n    this.label = options.label || NLS_DEFAULT_LABEL;\n    const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n    const history = options.history || [];\n    const flexibleHeight = !!options.flexibleHeight;\n    const flexibleWidth = !!options.flexibleWidth;\n    const flexibleMaxHeight = options.flexibleMaxHeight;\n    this.domNode = document.createElement('div');\n    this.domNode.classList.add('monaco-findInput');\n    this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n      ariaLabel: this.label || '',\n      placeholder: this.placeholder || '',\n      validationOptions: {\n        validation: this.validation\n      },\n      history,\n      showHistoryHint: options.showHistoryHint,\n      flexibleHeight,\n      flexibleWidth,\n      flexibleMaxHeight,\n      inputBoxStyles: options.inputBoxStyles\n    }));\n    this.preserveCase = this._register(new PreserveCaseToggle({\n      appendTitle: appendPreserveCaseLabel,\n      isChecked: false,\n      ...options.toggleStyles\n    }));\n    this._register(this.preserveCase.onChange(viaKeyboard => {\n      this._onDidOptionChange.fire(viaKeyboard);\n      if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n        this.inputBox.focus();\n      }\n      this.validate();\n    }));\n    this._register(this.preserveCase.onKeyDown(e => {\n      this._onPreserveCaseKeyDown.fire(e);\n    }));\n    if (this._showOptionButtons) {\n      this.cachedOptionsWidth = this.preserveCase.width();\n    } else {\n      this.cachedOptionsWidth = 0;\n    }\n    // Arrow-Key support to navigate between options\n    const indexes = [this.preserveCase.domNode];\n    this.onkeydown(this.domNode, event => {\n      if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n        const index = indexes.indexOf(this.domNode.ownerDocument.activeElement);\n        if (index >= 0) {\n          let newIndex = -1;\n          if (event.equals(17 /* KeyCode.RightArrow */)) {\n            newIndex = (index + 1) % indexes.length;\n          } else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n            if (index === 0) {\n              newIndex = indexes.length - 1;\n            } else {\n              newIndex = index - 1;\n            }\n          }\n          if (event.equals(9 /* KeyCode.Escape */)) {\n            indexes[index].blur();\n            this.inputBox.focus();\n          } else if (newIndex >= 0) {\n            indexes[newIndex].focus();\n          }\n          dom.EventHelper.stop(event, true);\n        }\n      }\n    });\n    const controls = document.createElement('div');\n    controls.className = 'controls';\n    controls.style.display = this._showOptionButtons ? 'block' : 'none';\n    controls.appendChild(this.preserveCase.domNode);\n    this.domNode.appendChild(controls);\n    parent?.appendChild(this.domNode);\n    this.onkeydown(this.inputBox.inputElement, e => this._onKeyDown.fire(e));\n    this.onkeyup(this.inputBox.inputElement, e => this._onKeyUp.fire(e));\n    this.oninput(this.inputBox.inputElement, e => this._onInput.fire());\n    this.onmousedown(this.inputBox.inputElement, e => this._onMouseDown.fire(e));\n  }\n  enable() {\n    this.domNode.classList.remove('disabled');\n    this.inputBox.enable();\n    this.preserveCase.enable();\n  }\n  disable() {\n    this.domNode.classList.add('disabled');\n    this.inputBox.disable();\n    this.preserveCase.disable();\n  }\n  setEnabled(enabled) {\n    if (enabled) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n  }\n  select() {\n    this.inputBox.select();\n  }\n  focus() {\n    this.inputBox.focus();\n  }\n  getPreserveCase() {\n    return this.preserveCase.checked;\n  }\n  setPreserveCase(value) {\n    this.preserveCase.checked = value;\n  }\n  focusOnPreserve() {\n    this.preserveCase.focus();\n  }\n  validate() {\n    this.inputBox?.validate();\n  }\n  set width(newWidth) {\n    this.inputBox.paddingRight = this.cachedOptionsWidth;\n    this.domNode.style.width = newWidth + 'px';\n  }\n  dispose() {\n    super.dispose();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nimport { localize } from '../../../nls.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isActiveElement } from '../../../base/browser/dom.js';\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\nconst HistoryNavigationWidgetFocusContext = 'historyNavigationWidgetFocus';\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\nlet lastFocusedWidget = undefined;\nconst widgets = [];\nexport function registerAndCreateHistoryNavigationContext(scopedContextKeyService, widget) {\n  if (widgets.includes(widget)) {\n    throw new Error('Cannot register the same widget multiple times');\n  }\n  widgets.push(widget);\n  const disposableStore = new DisposableStore();\n  const historyNavigationWidgetFocus = new RawContextKey(HistoryNavigationWidgetFocusContext, false).bindTo(scopedContextKeyService);\n  const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\n  const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\n  const onDidFocus = () => {\n    historyNavigationWidgetFocus.set(true);\n    lastFocusedWidget = widget;\n  };\n  const onDidBlur = () => {\n    historyNavigationWidgetFocus.set(false);\n    if (lastFocusedWidget === widget) {\n      lastFocusedWidget = undefined;\n    }\n  };\n  // Check for currently being focused\n  if (isActiveElement(widget.element)) {\n    onDidFocus();\n  }\n  disposableStore.add(widget.onDidFocus(() => onDidFocus()));\n  disposableStore.add(widget.onDidBlur(() => onDidBlur()));\n  disposableStore.add(toDisposable(() => {\n    widgets.splice(widgets.indexOf(widget), 1);\n    onDidBlur();\n  }));\n  return {\n    historyNavigationForwardsEnablement,\n    historyNavigationBackwardsEnablement,\n    dispose() {\n      disposableStore.dispose();\n    }\n  };\n}\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\n  constructor(container, contextViewProvider, options, contextKeyService) {\n    super(container, contextViewProvider, options);\n    const scopedContextKeyService = this._register(contextKeyService.createScoped(this.inputBox.element));\n    this._register(registerAndCreateHistoryNavigationContext(scopedContextKeyService, this.inputBox));\n  }\n};\nContextScopedFindInput = __decorate([__param(3, IContextKeyService)], ContextScopedFindInput);\nexport { ContextScopedFindInput };\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\n  constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\n    super(container, contextViewProvider, showReplaceOptions, options);\n    const scopedContextKeyService = this._register(contextKeyService.createScoped(this.inputBox.element));\n    this._register(registerAndCreateHistoryNavigationContext(scopedContextKeyService, this.inputBox));\n  }\n};\nContextScopedReplaceInput = __decorate([__param(3, IContextKeyService)], ContextScopedReplaceInput);\nexport { ContextScopedReplaceInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'history.showPrevious',\n  weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n  when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), ContextKeyExpr.not('isComposing'), historyNavigationVisible.isEqualTo(false)),\n  primary: 16 /* KeyCode.UpArrow */,\n  secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n  handler: accessor => {\n    lastFocusedWidget?.showPreviousValue();\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'history.showNext',\n  weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n  when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), ContextKeyExpr.not('isComposing'), historyNavigationVisible.isEqualTo(false)),\n  primary: 18 /* KeyCode.DownArrow */,\n  secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n  handler: accessor => {\n    lastFocusedWidget?.showNextValue();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function showHistoryKeybindingHint(keybindingService) {\n  return keybindingService.lookupKeybinding('history.showPrevious')?.getElectronAccelerator() === 'Up' && keybindingService.lookupKeybinding('history.showNext')?.getElectronAccelerator() === 'Down';\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar FoldingController_1;\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { FoldingDecorationProvider } from './foldingDecorations.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = /*#__PURE__*/(() => {\n  let FoldingController = class FoldingController extends Disposable {\n    static {\n      FoldingController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.folding';\n    }\n    static get(editor) {\n      return editor.getContribution(FoldingController_1.ID);\n    }\n    static getFoldingRangeProviders(languageFeaturesService, model) {\n      const foldingRangeProviders = languageFeaturesService.foldingRangeProvider.ordered(model);\n      return FoldingController_1._foldingRangeSelector?.(foldingRangeProviders, model) ?? foldingRangeProviders;\n    }\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n      super();\n      this.contextKeyService = contextKeyService;\n      this.languageConfigurationService = languageConfigurationService;\n      this.languageFeaturesService = languageFeaturesService;\n      this.localToDispose = this._register(new DisposableStore());\n      this.editor = editor;\n      this._foldingLimitReporter = new RangesLimitReporter(editor);\n      const options = this.editor.getOptions();\n      this._isEnabled = options.get(43 /* EditorOption.folding */);\n      this._useFoldingProviders = options.get(44 /* EditorOption.foldingStrategy */) !== 'indentation';\n      this._unfoldOnClickAfterEndOfLine = options.get(48 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n      this._restoringViewState = false;\n      this._currentModelHasFoldedImports = false;\n      this._foldingImportsByDefault = options.get(46 /* EditorOption.foldingImportsByDefault */);\n      this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', {\n        min: 200\n      });\n      this.foldingModel = null;\n      this.hiddenRangeModel = null;\n      this.rangeProvider = null;\n      this.foldingRegionPromise = null;\n      this.foldingModelPromise = null;\n      this.updateScheduler = null;\n      this.cursorChangedScheduler = null;\n      this.mouseDownInfo = null;\n      this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n      this.foldingDecorationProvider.showFoldingControls = options.get(111 /* EditorOption.showFoldingControls */);\n      this.foldingDecorationProvider.showFoldingHighlights = options.get(45 /* EditorOption.foldingHighlight */);\n      this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n      this.foldingEnabled.set(this._isEnabled);\n      this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n      this._register(this.editor.onDidChangeConfiguration(e => {\n        if (e.hasChanged(43 /* EditorOption.folding */)) {\n          this._isEnabled = this.editor.getOptions().get(43 /* EditorOption.folding */);\n          this.foldingEnabled.set(this._isEnabled);\n          this.onModelChanged();\n        }\n        if (e.hasChanged(47 /* EditorOption.foldingMaximumRegions */)) {\n          this.onModelChanged();\n        }\n        if (e.hasChanged(111 /* EditorOption.showFoldingControls */) || e.hasChanged(45 /* EditorOption.foldingHighlight */)) {\n          const options = this.editor.getOptions();\n          this.foldingDecorationProvider.showFoldingControls = options.get(111 /* EditorOption.showFoldingControls */);\n          this.foldingDecorationProvider.showFoldingHighlights = options.get(45 /* EditorOption.foldingHighlight */);\n          this.triggerFoldingModelChanged();\n        }\n        if (e.hasChanged(44 /* EditorOption.foldingStrategy */)) {\n          this._useFoldingProviders = this.editor.getOptions().get(44 /* EditorOption.foldingStrategy */) !== 'indentation';\n          this.onFoldingStrategyChanged();\n        }\n        if (e.hasChanged(48 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\n          this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(48 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n        }\n        if (e.hasChanged(46 /* EditorOption.foldingImportsByDefault */)) {\n          this._foldingImportsByDefault = this.editor.getOptions().get(46 /* EditorOption.foldingImportsByDefault */);\n        }\n      }));\n      this.onModelChanged();\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n      const model = this.editor.getModel();\n      if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n        return {};\n      }\n      if (this.foldingModel) {\n        // disposed ?\n        const collapsedRegions = this.foldingModel.getMemento();\n        const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n        return {\n          collapsedRegions,\n          lineCount: model.getLineCount(),\n          provider,\n          foldedImports: this._currentModelHasFoldedImports\n        };\n      }\n      return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n      const model = this.editor.getModel();\n      if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n        return;\n      }\n      if (!state) {\n        return;\n      }\n      this._currentModelHasFoldedImports = !!state.foldedImports;\n      if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\n        this._restoringViewState = true;\n        try {\n          this.foldingModel.applyMemento(state.collapsedRegions);\n        } finally {\n          this._restoringViewState = false;\n        }\n      }\n    }\n    onModelChanged() {\n      this.localToDispose.clear();\n      const model = this.editor.getModel();\n      if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n        // huge files get no view model, so they cannot support hidden areas\n        return;\n      }\n      this._currentModelHasFoldedImports = false;\n      this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n      this.localToDispose.add(this.foldingModel);\n      this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n      this.localToDispose.add(this.hiddenRangeModel);\n      this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n      this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n      this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n      this.localToDispose.add(this.cursorChangedScheduler);\n      this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n      this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n      this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n      this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n      this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n      this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n      this.localToDispose.add({\n        dispose: () => {\n          if (this.foldingRegionPromise) {\n            this.foldingRegionPromise.cancel();\n            this.foldingRegionPromise = null;\n          }\n          this.updateScheduler?.cancel();\n          this.updateScheduler = null;\n          this.foldingModel = null;\n          this.foldingModelPromise = null;\n          this.hiddenRangeModel = null;\n          this.cursorChangedScheduler = null;\n          this.rangeProvider?.dispose();\n          this.rangeProvider = null;\n        }\n      });\n      this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n      this.rangeProvider?.dispose();\n      this.rangeProvider = null;\n      this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n      if (this.rangeProvider) {\n        return this.rangeProvider;\n      }\n      const indentRangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._foldingLimitReporter);\n      this.rangeProvider = indentRangeProvider; // fallback\n      if (this._useFoldingProviders && this.foldingModel) {\n        const selectedProviders = FoldingController_1.getFoldingRangeProviders(this.languageFeaturesService, editorModel);\n        if (selectedProviders.length > 0) {\n          this.rangeProvider = new SyntaxRangeProvider(editorModel, selectedProviders, () => this.triggerFoldingModelChanged(), this._foldingLimitReporter, indentRangeProvider);\n        }\n      }\n      return this.rangeProvider;\n    }\n    getFoldingModel() {\n      return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n      this.hiddenRangeModel?.notifyChangeModelContent(e);\n      this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n      if (this.updateScheduler) {\n        if (this.foldingRegionPromise) {\n          this.foldingRegionPromise.cancel();\n          this.foldingRegionPromise = null;\n        }\n        this.foldingModelPromise = this.updateScheduler.trigger(() => {\n          const foldingModel = this.foldingModel;\n          if (!foldingModel) {\n            // null if editor has been disposed, or folding turned off\n            return null;\n          }\n          const sw = new StopWatch();\n          const provider = this.getRangeProvider(foldingModel.textModel);\n          const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token));\n          return foldingRegionPromise.then(foldingRanges => {\n            if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) {\n              // new request or cancelled in the meantime?\n              let scrollState;\n              if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                if (hasChanges) {\n                  scrollState = StableEditorScrollState.capture(this.editor);\n                  this._currentModelHasFoldedImports = hasChanges;\n                }\n              }\n              // some cursors might have moved into hidden regions, make sure they are in expanded regions\n              const selections = this.editor.getSelections();\n              foldingModel.update(foldingRanges, toSelectedLines(selections));\n              scrollState?.restore(this.editor);\n              // update debounce info\n              const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n              if (this.updateScheduler) {\n                this.updateScheduler.defaultDelay = newValue;\n              }\n            }\n            return foldingModel;\n          });\n        }).then(undefined, err => {\n          onUnexpectedError(err);\n          return null;\n        });\n      }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n      if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n        const selections = this.editor.getSelections();\n        if (selections) {\n          if (this.hiddenRangeModel.adjustSelections(selections)) {\n            this.editor.setSelections(selections);\n          }\n        }\n      }\n      this.editor.setHiddenAreas(hiddenRanges, this);\n    }\n    onCursorPositionChanged() {\n      if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n        this.cursorChangedScheduler.schedule();\n      }\n    }\n    revealCursor() {\n      const foldingModel = this.getFoldingModel();\n      if (!foldingModel) {\n        return;\n      }\n      foldingModel.then(foldingModel => {\n        if (foldingModel) {\n          const selections = this.editor.getSelections();\n          if (selections && selections.length > 0) {\n            const toToggle = [];\n            for (const selection of selections) {\n              const lineNumber = selection.selectionStartLineNumber;\n              if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n              }\n            }\n            if (toToggle.length) {\n              foldingModel.toggleCollapseState(toToggle);\n              this.reveal(selections[0].getPosition());\n            }\n          }\n        }\n      }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n      this.mouseDownInfo = null;\n      if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n        return;\n      }\n      if (!e.event.leftButton && !e.event.middleButton) {\n        return;\n      }\n      const range = e.target.range;\n      let iconClicked = false;\n      switch (e.target.type) {\n        case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */:\n          {\n            const data = e.target.detail;\n            const offsetLeftInGutter = e.target.element.offsetLeft;\n            const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n            // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n            // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n            if (gutterOffsetX < 4) {\n              // the whitespace between the border and the real folding icon border is 4px\n              return;\n            }\n            iconClicked = true;\n            break;\n          }\n        case 7 /* MouseTargetType.CONTENT_EMPTY */:\n          {\n            if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n              const data = e.target.detail;\n              if (!data.isAfterLines) {\n                break;\n              }\n            }\n            return;\n          }\n        case 6 /* MouseTargetType.CONTENT_TEXT */:\n          {\n            if (this.hiddenRangeModel.hasRanges()) {\n              const model = this.editor.getModel();\n              if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                break;\n              }\n            }\n            return;\n          }\n        default:\n          return;\n      }\n      this.mouseDownInfo = {\n        lineNumber: range.startLineNumber,\n        iconClicked\n      };\n    }\n    onEditorMouseUp(e) {\n      const foldingModel = this.foldingModel;\n      if (!foldingModel || !this.mouseDownInfo || !e.target) {\n        return;\n      }\n      const lineNumber = this.mouseDownInfo.lineNumber;\n      const iconClicked = this.mouseDownInfo.iconClicked;\n      const range = e.target.range;\n      if (!range || range.startLineNumber !== lineNumber) {\n        return;\n      }\n      if (iconClicked) {\n        if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n          return;\n        }\n      } else {\n        const model = this.editor.getModel();\n        if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n          return;\n        }\n      }\n      const region = foldingModel.getRegionAtLine(lineNumber);\n      if (region && region.startLineNumber === lineNumber) {\n        const isCollapsed = region.isCollapsed;\n        if (iconClicked || isCollapsed) {\n          const surrounding = e.event.altKey;\n          let toToggle = [];\n          if (surrounding) {\n            const filter = otherRegion => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n            const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n            for (const r of toMaybeToggle) {\n              if (r.isCollapsed) {\n                toToggle.push(r);\n              }\n            }\n            // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n            if (toToggle.length === 0) {\n              toToggle = toMaybeToggle;\n            }\n          } else {\n            const recursive = e.event.middleButton || e.event.shiftKey;\n            if (recursive) {\n              for (const r of foldingModel.getRegionsInside(region)) {\n                if (r.isCollapsed === isCollapsed) {\n                  toToggle.push(r);\n                }\n              }\n            }\n            // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n            if (isCollapsed || !recursive || toToggle.length === 0) {\n              toToggle.push(region);\n            }\n          }\n          foldingModel.toggleCollapseState(toToggle);\n          this.reveal({\n            lineNumber,\n            column: 1\n          });\n        }\n      }\n    }\n    reveal(position) {\n      this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n    }\n  };\n  return FoldingController;\n})();\nFoldingController = FoldingController_1 = __decorate([__param(1, IContextKeyService), __param(2, ILanguageConfigurationService), __param(3, INotificationService), __param(4, ILanguageFeatureDebounceService), __param(5, ILanguageFeaturesService)], FoldingController);\nexport { FoldingController };\nexport class RangesLimitReporter {\n  constructor(editor) {\n    this.editor = editor;\n    this._onDidChange = new Emitter();\n    this._computed = 0;\n    this._limited = false;\n  }\n  get limit() {\n    return this.editor.getOptions().get(47 /* EditorOption.foldingMaximumRegions */);\n  }\n  update(computed, limited) {\n    if (computed !== this._computed || limited !== this._limited) {\n      this._computed = computed;\n      this._limited = limited;\n      this._onDidChange.fire();\n    }\n  }\n}\nclass FoldingAction extends EditorAction {\n  runEditorCommand(accessor, editor, args) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const foldingController = FoldingController.get(editor);\n    if (!foldingController) {\n      return;\n    }\n    const foldingModelPromise = foldingController.getFoldingModel();\n    if (foldingModelPromise) {\n      this.reportTelemetry(accessor, editor);\n      return foldingModelPromise.then(foldingModel => {\n        if (foldingModel) {\n          this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n          const selection = editor.getSelection();\n          if (selection) {\n            foldingController.reveal(selection.getStartPosition());\n          }\n        }\n      });\n    }\n  }\n  getSelectedLines(editor) {\n    const selections = editor.getSelections();\n    return selections ? selections.map(s => s.startLineNumber) : [];\n  }\n  getLineNumbers(args, editor) {\n    if (args && args.selectionLines) {\n      return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n    }\n    return this.getSelectedLines(editor);\n  }\n  run(_accessor, _editor) {}\n}\nexport function toSelectedLines(selections) {\n  if (!selections || selections.length === 0) {\n    return {\n      startsInside: () => false\n    };\n  }\n  return {\n    startsInside(startLine, endLine) {\n      for (const s of selections) {\n        const line = s.startLineNumber;\n        if (line >= startLine && line <= endLine) {\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n}\nfunction foldingArgumentsConstraint(args) {\n  if (!types.isUndefined(args)) {\n    if (!types.isObject(args)) {\n      return false;\n    }\n    const foldingArgs = args;\n    if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n      return false;\n    }\n    if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n      return false;\n    }\n    if (!types.isUndefined(foldingArgs.selectionLines) && (!Array.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n      return false;\n    }\n  }\n  return true;\n}\nclass UnfoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.unfold',\n      label: nls.localize('unfoldAction.label', \"Unfold\"),\n      alias: 'Unfold',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 94 /* KeyCode.BracketRight */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: 'Unfold the content in the editor',\n        args: [{\n          name: 'Unfold editor argument',\n          description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n          constraint: foldingArgumentsConstraint,\n          schema: {\n            'type': 'object',\n            'properties': {\n              'levels': {\n                'type': 'number',\n                'default': 1\n              },\n              'direction': {\n                'type': 'string',\n                'enum': ['up', 'down'],\n                'default': 'down'\n              },\n              'selectionLines': {\n                'type': 'array',\n                'items': {\n                  'type': 'number'\n                }\n              }\n            }\n          }\n        }]\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, args) {\n    const levels = args && args.levels || 1;\n    const lineNumbers = this.getLineNumbers(args, editor);\n    if (args && args.direction === 'up') {\n      setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n    } else {\n      setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n    }\n  }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.unfoldRecursively',\n      label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n      alias: 'Unfold Recursively',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, _args) {\n    setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n  }\n}\nclass FoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.fold',\n      label: nls.localize('foldAction.label', \"Fold\"),\n      alias: 'Fold',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 92 /* KeyCode.BracketLeft */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: 'Fold the content in the editor',\n        args: [{\n          name: 'Fold editor argument',\n          description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n          constraint: foldingArgumentsConstraint,\n          schema: {\n            'type': 'object',\n            'properties': {\n              'levels': {\n                'type': 'number'\n              },\n              'direction': {\n                'type': 'string',\n                'enum': ['up', 'down']\n              },\n              'selectionLines': {\n                'type': 'array',\n                'items': {\n                  'type': 'number'\n                }\n              }\n            }\n          }\n        }]\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, args) {\n    const lineNumbers = this.getLineNumbers(args, editor);\n    const levels = args && args.levels;\n    const direction = args && args.direction;\n    if (typeof levels !== 'number' && typeof direction !== 'string') {\n      // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n      setCollapseStateUp(foldingModel, true, lineNumbers);\n    } else {\n      if (direction === 'up') {\n        setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n      } else {\n        setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n      }\n    }\n  }\n}\nclass ToggleFoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.toggleFold',\n      label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n      alias: 'Toggle Fold',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    toggleCollapseState(foldingModel, 1, selectedLines);\n  }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.foldRecursively',\n      label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n      alias: 'Fold Recursively',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n  }\n}\nclass ToggleFoldRecursivelyAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.toggleFoldRecursively',\n      label: nls.localize('toggleFoldRecursivelyAction.label', \"Toggle Fold Recursively\"),\n      alias: 'Toggle Fold Recursively',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    toggleCollapseState(foldingModel, Number.MAX_VALUE, selectedLines);\n  }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.foldAllBlockComments',\n      label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n      alias: 'Fold All Block Comments',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n    } else {\n      const editorModel = editor.getModel();\n      if (!editorModel) {\n        return;\n      }\n      const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n      if (comments && comments.blockCommentStartToken) {\n        const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n        setCollapseStateForMatchingLines(foldingModel, regExp, true);\n      }\n    }\n  }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.foldAllMarkerRegions',\n      label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n      alias: 'Fold All Regions',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n    } else {\n      const editorModel = editor.getModel();\n      if (!editorModel) {\n        return;\n      }\n      const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n      if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n        const regExp = new RegExp(foldingRules.markers.start);\n        setCollapseStateForMatchingLines(foldingModel, regExp, true);\n      }\n    }\n  }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.unfoldAllMarkerRegions',\n      label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n      alias: 'Unfold All Regions',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n    } else {\n      const editorModel = editor.getModel();\n      if (!editorModel) {\n        return;\n      }\n      const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n      if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n        const regExp = new RegExp(foldingRules.markers.start);\n        setCollapseStateForMatchingLines(foldingModel, regExp, false);\n      }\n    }\n  }\n}\nclass FoldAllExceptAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.foldAllExcept',\n      label: nls.localize('foldAllExcept.label', \"Fold All Except Selected\"),\n      alias: 'Fold All Except Selected',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 88 /* KeyCode.Minus */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    setCollapseStateForRest(foldingModel, true, selectedLines);\n  }\n}\nclass UnfoldAllExceptAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.unfoldAllExcept',\n      label: nls.localize('unfoldAllExcept.label', \"Unfold All Except Selected\"),\n      alias: 'Unfold All Except Selected',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 86 /* KeyCode.Equal */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    setCollapseStateForRest(foldingModel, false, selectedLines);\n  }\n}\nclass FoldAllAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.foldAll',\n      label: nls.localize('foldAllAction.label', \"Fold All\"),\n      alias: 'Fold All',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, _editor) {\n    setCollapseStateLevelsDown(foldingModel, true);\n  }\n}\nclass UnfoldAllAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.unfoldAll',\n      label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n      alias: 'Unfold All',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, _editor) {\n    setCollapseStateLevelsDown(foldingModel, false);\n  }\n}\nlet FoldLevelAction = /*#__PURE__*/(() => {\n  class FoldLevelAction extends FoldingAction {\n    static {\n      this.ID_PREFIX = 'editor.foldLevel';\n    }\n    static {\n      this.ID = level => FoldLevelAction.ID_PREFIX + level;\n    }\n    getFoldingLevel() {\n      return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n      setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n  }\n  return FoldLevelAction;\n})();\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.gotoParentFold',\n      label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n      alias: 'Go to Parent Fold',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    if (selectedLines.length > 0) {\n      const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n      if (startLineNumber !== null) {\n        editor.setSelection({\n          startLineNumber: startLineNumber,\n          startColumn: 1,\n          endLineNumber: startLineNumber,\n          endColumn: 1\n        });\n      }\n    }\n  }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.gotoPreviousFold',\n      label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n      alias: 'Go to Previous Folding Range',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    if (selectedLines.length > 0) {\n      const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n      if (startLineNumber !== null) {\n        editor.setSelection({\n          startLineNumber: startLineNumber,\n          startColumn: 1,\n          endLineNumber: startLineNumber,\n          endColumn: 1\n        });\n      }\n    }\n  }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.gotoNextFold',\n      label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n      alias: 'Go to Next Folding Range',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const selectedLines = this.getSelectedLines(editor);\n    if (selectedLines.length > 0) {\n      const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n      if (startLineNumber !== null) {\n        editor.setSelection({\n          startLineNumber: startLineNumber,\n          startColumn: 1,\n          endLineNumber: startLineNumber,\n          endColumn: 1\n        });\n      }\n    }\n  }\n}\nclass FoldRangeFromSelectionAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.createFoldingRangeFromSelection',\n      label: nls.localize('createManualFoldRange.label', \"Create Folding Range from Selection\"),\n      alias: 'Create Folding Range from Selection',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.Comma */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(_foldingController, foldingModel, editor) {\n    const collapseRanges = [];\n    const selections = editor.getSelections();\n    if (selections) {\n      for (const selection of selections) {\n        let endLineNumber = selection.endLineNumber;\n        if (selection.endColumn === 1) {\n          --endLineNumber;\n        }\n        if (endLineNumber > selection.startLineNumber) {\n          collapseRanges.push({\n            startLineNumber: selection.startLineNumber,\n            endLineNumber: endLineNumber,\n            type: undefined,\n            isCollapsed: true,\n            source: 1 /* FoldSource.userDefined */\n          });\n          editor.setSelection({\n            startLineNumber: selection.startLineNumber,\n            startColumn: 1,\n            endLineNumber: selection.startLineNumber,\n            endColumn: 1\n          });\n        }\n      }\n      if (collapseRanges.length > 0) {\n        collapseRanges.sort((a, b) => {\n          return a.startLineNumber - b.startLineNumber;\n        });\n        const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, editor.getModel()?.getLineCount());\n        foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n      }\n    }\n  }\n}\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\n  constructor() {\n    super({\n      id: 'editor.removeManualFoldingRanges',\n      label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\n      alias: 'Remove Manual Folding Ranges',\n      precondition: CONTEXT_FOLDING_ENABLED,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  invoke(foldingController, foldingModel, editor) {\n    const selections = editor.getSelections();\n    if (selections) {\n      const ranges = [];\n      for (const selection of selections) {\n        const {\n          startLineNumber,\n          endLineNumber\n        } = selection;\n        ranges.push(endLineNumber >= startLineNumber ? {\n          startLineNumber,\n          endLineNumber\n        } : {\n          endLineNumber,\n          startLineNumber\n        });\n      }\n      foldingModel.removeManualRanges(ranges);\n      foldingController.triggerFoldingModelChanged();\n    }\n  }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(ToggleFoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllExceptAction);\nregisterEditorAction(UnfoldAllExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nregisterEditorAction(FoldRangeFromSelectionAction);\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\nfor (let i = 1; i <= 7; i++) {\n  registerInstantiatedEditorAction(new FoldLevelAction({\n    id: FoldLevelAction.ID(i),\n    label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n    alias: `Fold Level ${i}`,\n    precondition: CONTEXT_FOLDING_ENABLED,\n    kbOpts: {\n      kbExpr: EditorContextKeys.editorTextFocus,\n      primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */ + i),\n      weight: 100 /* KeybindingWeight.EditorContrib */\n    }\n  }));\n}\nCommandsRegistry.registerCommand('_executeFoldingRangeProvider', async function (accessor, ...args) {\n  const [resource] = args;\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument();\n  }\n  const configurationService = accessor.get(IConfigurationService);\n  if (!configurationService.getValue('editor.folding', {\n    resource\n  })) {\n    return [];\n  }\n  const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n  const strategy = configurationService.getValue('editor.foldingStrategy', {\n    resource\n  });\n  const foldingLimitReporter = {\n    get limit() {\n      return configurationService.getValue('editor.foldingMaximumRegions', {\n        resource\n      });\n    },\n    update: (computed, limited) => {}\n  };\n  const indentRangeProvider = new IndentRangeProvider(model, languageConfigurationService, foldingLimitReporter);\n  let rangeProvider = indentRangeProvider;\n  if (strategy !== 'indentation') {\n    const providers = FoldingController.getFoldingRangeProviders(languageFeaturesService, model);\n    if (providers.length) {\n      rangeProvider = new SyntaxRangeProvider(model, providers, () => {}, foldingLimitReporter, indentRangeProvider);\n    }\n  }\n  const ranges = await rangeProvider.compute(CancellationToken.None);\n  const result = [];\n  try {\n    if (ranges) {\n      for (let i = 0; i < ranges.length; i++) {\n        const type = ranges.getType(i);\n        result.push({\n          start: ranges.getStartLineNumber(i),\n          end: ranges.getEndLineNumber(i),\n          kind: type ? FoldingRangeKind.fromValue(type) : undefined\n        });\n      }\n    }\n    return result;\n  } finally {\n    rangeProvider.dispose();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { hash } from '../../../../base/common/hash.js';\nexport class FoldingModel {\n  get regions() {\n    return this._regions;\n  }\n  get textModel() {\n    return this._textModel;\n  }\n  constructor(textModel, decorationProvider) {\n    this._updateEventEmitter = new Emitter();\n    this.onDidChange = this._updateEventEmitter.event;\n    this._textModel = textModel;\n    this._decorationProvider = decorationProvider;\n    this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n    this._editorDecorationIds = [];\n  }\n  toggleCollapseState(toggledRegions) {\n    if (!toggledRegions.length) {\n      return;\n    }\n    toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n    const processed = {};\n    this._decorationProvider.changeDecorations(accessor => {\n      let k = 0; // index from [0 ... this.regions.length]\n      let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n      let lastHiddenLine = -1; // the end of the last hidden lines\n      const updateDecorationsUntil = index => {\n        while (k < index) {\n          const endLineNumber = this._regions.getEndLineNumber(k);\n          const isCollapsed = this._regions.isCollapsed(k);\n          if (endLineNumber <= dirtyRegionEndLine) {\n            const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\n            accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\n          }\n          if (isCollapsed && endLineNumber > lastHiddenLine) {\n            lastHiddenLine = endLineNumber;\n          }\n          k++;\n        }\n      };\n      for (const region of toggledRegions) {\n        const index = region.regionIndex;\n        const editorDecorationId = this._editorDecorationIds[index];\n        if (editorDecorationId && !processed[editorDecorationId]) {\n          processed[editorDecorationId] = true;\n          updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n          const newCollapseState = !this._regions.isCollapsed(index);\n          this._regions.setCollapsed(index, newCollapseState);\n          dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n        }\n      }\n      updateDecorationsUntil(this._regions.length);\n    });\n    this._updateEventEmitter.fire({\n      model: this,\n      collapseStateChanged: toggledRegions\n    });\n  }\n  removeManualRanges(ranges) {\n    const newFoldingRanges = new Array();\n    const intersects = foldRange => {\n      for (const range of ranges) {\n        if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    for (let i = 0; i < this._regions.length; i++) {\n      const foldRange = this._regions.toFoldRange(i);\n      if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\n        newFoldingRanges.push(foldRange);\n      }\n    }\n    this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\n  }\n  update(newRegions, selection) {\n    const foldedOrManualRanges = this._currentFoldedOrManualRanges(selection);\n    const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount(), selection);\n    this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n  }\n  updatePost(newRegions) {\n    const newEditorDecorations = [];\n    let lastHiddenLine = -1;\n    for (let index = 0, limit = newRegions.length; index < limit; index++) {\n      const startLineNumber = newRegions.getStartLineNumber(index);\n      const endLineNumber = newRegions.getEndLineNumber(index);\n      const isCollapsed = newRegions.isCollapsed(index);\n      const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\n      const decorationRange = {\n        startLineNumber: startLineNumber,\n        startColumn: this._textModel.getLineMaxColumn(startLineNumber),\n        endLineNumber: endLineNumber,\n        endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\n      };\n      newEditorDecorations.push({\n        range: decorationRange,\n        options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual)\n      });\n      if (isCollapsed && endLineNumber > lastHiddenLine) {\n        lastHiddenLine = endLineNumber;\n      }\n    }\n    this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\n    this._regions = newRegions;\n    this._updateEventEmitter.fire({\n      model: this\n    });\n  }\n  _currentFoldedOrManualRanges(selection) {\n    const foldedRanges = [];\n    for (let i = 0, limit = this._regions.length; i < limit; i++) {\n      let isCollapsed = this.regions.isCollapsed(i);\n      const source = this.regions.getSource(i);\n      if (isCollapsed || source !== 0 /* FoldSource.provider */) {\n        const foldRange = this._regions.toFoldRange(i);\n        const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n        if (decRange) {\n          if (isCollapsed && selection?.startsInside(decRange.startLineNumber + 1, decRange.endLineNumber)) {\n            isCollapsed = false; // uncollapse is the range is blocked\n          }\n          foldedRanges.push({\n            startLineNumber: decRange.startLineNumber,\n            endLineNumber: decRange.endLineNumber,\n            type: foldRange.type,\n            isCollapsed,\n            source\n          });\n        }\n      }\n    }\n    return foldedRanges;\n  }\n  /**\n   * Collapse state memento, for persistence only\n   */\n  getMemento() {\n    const foldedOrManualRanges = this._currentFoldedOrManualRanges();\n    const result = [];\n    const maxLineNumber = this._textModel.getLineCount();\n    for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\n      const range = foldedOrManualRanges[i];\n      if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n        continue;\n      }\n      const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n      result.push({\n        startLineNumber: range.startLineNumber,\n        endLineNumber: range.endLineNumber,\n        isCollapsed: range.isCollapsed,\n        source: range.source,\n        checksum: checksum\n      });\n    }\n    return result.length > 0 ? result : undefined;\n  }\n  /**\n   * Apply persisted state, for persistence only\n   */\n  applyMemento(state) {\n    if (!Array.isArray(state)) {\n      return;\n    }\n    const rangesToRestore = [];\n    const maxLineNumber = this._textModel.getLineCount();\n    for (const range of state) {\n      if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n        continue;\n      }\n      const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n      if (!range.checksum || checksum === range.checksum) {\n        rangesToRestore.push({\n          startLineNumber: range.startLineNumber,\n          endLineNumber: range.endLineNumber,\n          type: undefined,\n          isCollapsed: range.isCollapsed ?? true,\n          source: range.source ?? 0 /* FoldSource.provider */\n        });\n      }\n    }\n    const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\n    this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n  }\n  _getLinesChecksum(lineNumber1, lineNumber2) {\n    const h = hash(this._textModel.getLineContent(lineNumber1) + this._textModel.getLineContent(lineNumber2));\n    return h % 1000000; // 6 digits is plenty\n  }\n  dispose() {\n    this._decorationProvider.removeDecorations(this._editorDecorationIds);\n  }\n  getAllRegionsAtLine(lineNumber, filter) {\n    const result = [];\n    if (this._regions) {\n      let index = this._regions.findRange(lineNumber);\n      let level = 1;\n      while (index >= 0) {\n        const current = this._regions.toRegion(index);\n        if (!filter || filter(current, level)) {\n          result.push(current);\n        }\n        level++;\n        index = current.parentIndex;\n      }\n    }\n    return result;\n  }\n  getRegionAtLine(lineNumber) {\n    if (this._regions) {\n      const index = this._regions.findRange(lineNumber);\n      if (index >= 0) {\n        return this._regions.toRegion(index);\n      }\n    }\n    return null;\n  }\n  getRegionsInside(region, filter) {\n    const result = [];\n    const index = region ? region.regionIndex + 1 : 0;\n    const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n    if (filter && filter.length === 2) {\n      const levelStack = [];\n      for (let i = index, len = this._regions.length; i < len; i++) {\n        const current = this._regions.toRegion(i);\n        if (this._regions.getStartLineNumber(i) < endLineNumber) {\n          while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n            levelStack.pop();\n          }\n          levelStack.push(current);\n          if (filter(current, levelStack.length)) {\n            result.push(current);\n          }\n        } else {\n          break;\n        }\n      }\n    } else {\n      for (let i = index, len = this._regions.length; i < len; i++) {\n        const current = this._regions.toRegion(i);\n        if (this._regions.getStartLineNumber(i) < endLineNumber) {\n          if (!filter || filter(current)) {\n            result.push(current);\n          }\n        } else {\n          break;\n        }\n      }\n    }\n    return result;\n  }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n  const toToggle = [];\n  for (const lineNumber of lineNumbers) {\n    const region = foldingModel.getRegionAtLine(lineNumber);\n    if (region) {\n      const doCollapse = !region.isCollapsed;\n      toToggle.push(region);\n      if (levels > 1) {\n        const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n      }\n    }\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n  const toToggle = [];\n  if (lineNumbers && lineNumbers.length > 0) {\n    for (const lineNumber of lineNumbers) {\n      const region = foldingModel.getRegionAtLine(lineNumber);\n      if (region) {\n        if (region.isCollapsed !== doCollapse) {\n          toToggle.push(region);\n        }\n        if (levels > 1) {\n          const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n          toToggle.push(...regionsInside);\n        }\n      }\n    }\n  } else {\n    const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n    toToggle.push(...regionsInside);\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n  const toToggle = [];\n  for (const lineNumber of lineNumbers) {\n    const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n    toToggle.push(...regions);\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n  const toToggle = [];\n  for (const lineNumber of lineNumbers) {\n    const regions = foldingModel.getAllRegionsAtLine(lineNumber, region => region.isCollapsed !== doCollapse);\n    if (regions.length > 0) {\n      toToggle.push(regions[0]);\n    }\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n  const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n  const toToggle = foldingModel.getRegionsInside(null, filter);\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n  const filteredRegions = [];\n  for (const lineNumber of blockedLineNumbers) {\n    const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n    if (regions.length > 0) {\n      filteredRegions.push(regions[0]);\n    }\n  }\n  const filter = region => filteredRegions.every(filteredRegion => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n  const toToggle = foldingModel.getRegionsInside(null, filter);\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n  const editorModel = foldingModel.textModel;\n  const regions = foldingModel.regions;\n  const toToggle = [];\n  for (let i = regions.length - 1; i >= 0; i--) {\n    if (doCollapse !== regions.isCollapsed(i)) {\n      const startLineNumber = regions.getStartLineNumber(i);\n      if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n        toToggle.push(regions.toRegion(i));\n      }\n    }\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n  const regions = foldingModel.regions;\n  const toToggle = [];\n  for (let i = regions.length - 1; i >= 0; i--) {\n    if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n      toToggle.push(regions.toRegion(i));\n    }\n  }\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n  let startLineNumber = null;\n  const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n  if (foldingRegion !== null) {\n    startLineNumber = foldingRegion.startLineNumber;\n    // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n    if (lineNumber === startLineNumber) {\n      const parentFoldingIdx = foldingRegion.parentIndex;\n      if (parentFoldingIdx !== -1) {\n        startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n      } else {\n        startLineNumber = null;\n      }\n    }\n  }\n  return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n  let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n  // If on the folding range start line, go to previous sibling.\n  if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n    // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n    if (lineNumber !== foldingRegion.startLineNumber) {\n      return foldingRegion.startLineNumber;\n    } else {\n      // Find min line number to stay within parent.\n      const expectedParentIndex = foldingRegion.parentIndex;\n      let minLineNumber = 0;\n      if (expectedParentIndex !== -1) {\n        minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n      }\n      // Find fold at same level.\n      while (foldingRegion !== null) {\n        if (foldingRegion.regionIndex > 0) {\n          foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n          // Keep at same level.\n          if (foldingRegion.startLineNumber <= minLineNumber) {\n            return null;\n          } else if (foldingRegion.parentIndex === expectedParentIndex) {\n            return foldingRegion.startLineNumber;\n          }\n        } else {\n          return null;\n        }\n      }\n    }\n  } else {\n    // Go to last fold that's before the current line.\n    if (foldingModel.regions.length > 0) {\n      foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n      while (foldingRegion !== null) {\n        // Found fold before current line.\n        if (foldingRegion.startLineNumber < lineNumber) {\n          return foldingRegion.startLineNumber;\n        }\n        if (foldingRegion.regionIndex > 0) {\n          foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n        } else {\n          foldingRegion = null;\n        }\n      }\n    }\n  }\n  return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n  let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n  // If on the folding range start line, go to next sibling.\n  if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n    // Find max line number to stay within parent.\n    const expectedParentIndex = foldingRegion.parentIndex;\n    let maxLineNumber = 0;\n    if (expectedParentIndex !== -1) {\n      maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n    } else if (foldingModel.regions.length === 0) {\n      return null;\n    } else {\n      maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n    }\n    // Find fold at same level.\n    while (foldingRegion !== null) {\n      if (foldingRegion.regionIndex < foldingModel.regions.length) {\n        foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n        // Keep at same level.\n        if (foldingRegion.startLineNumber >= maxLineNumber) {\n          return null;\n        } else if (foldingRegion.parentIndex === expectedParentIndex) {\n          return foldingRegion.startLineNumber;\n        }\n      } else {\n        return null;\n      }\n    }\n  } else {\n    // Go to first fold that's after the current line.\n    if (foldingModel.regions.length > 0) {\n      foldingRegion = foldingModel.regions.toRegion(0);\n      while (foldingRegion !== null) {\n        // Found fold after current line.\n        if (foldingRegion.startLineNumber > lineNumber) {\n          return foldingRegion.startLineNumber;\n        }\n        if (foldingRegion.regionIndex < foldingModel.regions.length) {\n          foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n        } else {\n          foldingRegion = null;\n        }\n      }\n    }\n  }\n  return null;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const foldSourceAbbr = {\n  [0 /* FoldSource.provider */]: ' ',\n  [1 /* FoldSource.userDefined */]: 'u',\n  [2 /* FoldSource.recovered */]: 'r'\n};\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nclass BitField {\n  constructor(size) {\n    const numWords = Math.ceil(size / 32);\n    this._states = new Uint32Array(numWords);\n  }\n  get(index) {\n    const arrayIndex = index / 32 | 0;\n    const bit = index % 32;\n    return (this._states[arrayIndex] & 1 << bit) !== 0;\n  }\n  set(index, newState) {\n    const arrayIndex = index / 32 | 0;\n    const bit = index % 32;\n    const value = this._states[arrayIndex];\n    if (newState) {\n      this._states[arrayIndex] = value | 1 << bit;\n    } else {\n      this._states[arrayIndex] = value & ~(1 << bit);\n    }\n  }\n}\nexport class FoldingRegions {\n  constructor(startIndexes, endIndexes, types) {\n    if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n      throw new Error('invalid startIndexes or endIndexes size');\n    }\n    this._startIndexes = startIndexes;\n    this._endIndexes = endIndexes;\n    this._collapseStates = new BitField(startIndexes.length);\n    this._userDefinedStates = new BitField(startIndexes.length);\n    this._recoveredStates = new BitField(startIndexes.length);\n    this._types = types;\n    this._parentsComputed = false;\n  }\n  ensureParentIndices() {\n    if (!this._parentsComputed) {\n      this._parentsComputed = true;\n      const parentIndexes = [];\n      const isInsideLast = (startLineNumber, endLineNumber) => {\n        const index = parentIndexes[parentIndexes.length - 1];\n        return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n      };\n      for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n        const startLineNumber = this._startIndexes[i];\n        const endLineNumber = this._endIndexes[i];\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n          throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n        }\n        while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n          parentIndexes.pop();\n        }\n        const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n        parentIndexes.push(i);\n        this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n        this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n      }\n    }\n  }\n  get length() {\n    return this._startIndexes.length;\n  }\n  getStartLineNumber(index) {\n    return this._startIndexes[index] & MAX_LINE_NUMBER;\n  }\n  getEndLineNumber(index) {\n    return this._endIndexes[index] & MAX_LINE_NUMBER;\n  }\n  getType(index) {\n    return this._types ? this._types[index] : undefined;\n  }\n  hasTypes() {\n    return !!this._types;\n  }\n  isCollapsed(index) {\n    return this._collapseStates.get(index);\n  }\n  setCollapsed(index, newState) {\n    this._collapseStates.set(index, newState);\n  }\n  isUserDefined(index) {\n    return this._userDefinedStates.get(index);\n  }\n  setUserDefined(index, newState) {\n    return this._userDefinedStates.set(index, newState);\n  }\n  isRecovered(index) {\n    return this._recoveredStates.get(index);\n  }\n  setRecovered(index, newState) {\n    return this._recoveredStates.set(index, newState);\n  }\n  getSource(index) {\n    if (this.isUserDefined(index)) {\n      return 1 /* FoldSource.userDefined */;\n    } else if (this.isRecovered(index)) {\n      return 2 /* FoldSource.recovered */;\n    }\n    return 0 /* FoldSource.provider */;\n  }\n  setSource(index, source) {\n    if (source === 1 /* FoldSource.userDefined */) {\n      this.setUserDefined(index, true);\n      this.setRecovered(index, false);\n    } else if (source === 2 /* FoldSource.recovered */) {\n      this.setUserDefined(index, false);\n      this.setRecovered(index, true);\n    } else {\n      this.setUserDefined(index, false);\n      this.setRecovered(index, false);\n    }\n  }\n  setCollapsedAllOfType(type, newState) {\n    let hasChanged = false;\n    if (this._types) {\n      for (let i = 0; i < this._types.length; i++) {\n        if (this._types[i] === type) {\n          this.setCollapsed(i, newState);\n          hasChanged = true;\n        }\n      }\n    }\n    return hasChanged;\n  }\n  toRegion(index) {\n    return new FoldingRegion(this, index);\n  }\n  getParentIndex(index) {\n    this.ensureParentIndices();\n    const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n    if (parent === MAX_FOLDING_REGIONS) {\n      return -1;\n    }\n    return parent;\n  }\n  contains(index, line) {\n    return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n  }\n  findIndex(line) {\n    let low = 0,\n      high = this._startIndexes.length;\n    if (high === 0) {\n      return -1; // no children\n    }\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      if (line < this.getStartLineNumber(mid)) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n    return low - 1;\n  }\n  findRange(line) {\n    let index = this.findIndex(line);\n    if (index >= 0) {\n      const endLineNumber = this.getEndLineNumber(index);\n      if (endLineNumber >= line) {\n        return index;\n      }\n      index = this.getParentIndex(index);\n      while (index !== -1) {\n        if (this.contains(index, line)) {\n          return index;\n        }\n        index = this.getParentIndex(index);\n      }\n    }\n    return -1;\n  }\n  toString() {\n    const res = [];\n    for (let i = 0; i < this.length; i++) {\n      res[i] = `[${foldSourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n    }\n    return res.join(', ');\n  }\n  toFoldRange(index) {\n    return {\n      startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\n      endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\n      type: this._types ? this._types[index] : undefined,\n      isCollapsed: this.isCollapsed(index),\n      source: this.getSource(index)\n    };\n  }\n  static fromFoldRanges(ranges) {\n    const rangesLength = ranges.length;\n    const startIndexes = new Uint32Array(rangesLength);\n    const endIndexes = new Uint32Array(rangesLength);\n    let types = [];\n    let gotTypes = false;\n    for (let i = 0; i < rangesLength; i++) {\n      const range = ranges[i];\n      startIndexes[i] = range.startLineNumber;\n      endIndexes[i] = range.endLineNumber;\n      types.push(range.type);\n      if (range.type) {\n        gotTypes = true;\n      }\n    }\n    if (!gotTypes) {\n      types = undefined;\n    }\n    const regions = new FoldingRegions(startIndexes, endIndexes, types);\n    for (let i = 0; i < rangesLength; i++) {\n      if (ranges[i].isCollapsed) {\n        regions.setCollapsed(i, true);\n      }\n      regions.setSource(i, ranges[i].source);\n    }\n    return regions;\n  }\n  /**\n   * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\n   * Each input must be pre-sorted on startLineNumber.\n   * The first list is assumed to always include all regions currently defined by range providers.\n   * The second list only contains the previously collapsed and all manual ranges.\n   * If the line position matches, the range of the new range is taken, and the range is no longer manual\n   * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\n   * overlapping entries in the first list are discarded.\n   * Invalid entries are discarded. An entry is invalid if:\n   * \t\tthe start and end line numbers aren't a valid range of line numbers,\n   * \t\tit is out of sequence or has the same start line as a preceding entry,\n   * \t\tit overlaps a preceding entry and is not fully contained by that entry.\n   */\n  static sanitizeAndMerge(rangesA, rangesB, maxLineNumber, selection) {\n    maxLineNumber = maxLineNumber ?? Number.MAX_VALUE;\n    const getIndexedFunction = (r, limit) => {\n      return Array.isArray(r) ? i => {\n        return i < limit ? r[i] : undefined;\n      } : i => {\n        return i < limit ? r.toFoldRange(i) : undefined;\n      };\n    };\n    const getA = getIndexedFunction(rangesA, rangesA.length);\n    const getB = getIndexedFunction(rangesB, rangesB.length);\n    let indexA = 0;\n    let indexB = 0;\n    let nextA = getA(0);\n    let nextB = getB(0);\n    const stackedRanges = [];\n    let topStackedRange;\n    let prevLineNumber = 0;\n    const resultRanges = [];\n    while (nextA || nextB) {\n      let useRange = undefined;\n      if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\n        if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\n          if (nextB.source === 1 /* FoldSource.userDefined */) {\n            // a user defined range (possibly unfolded)\n            useRange = nextB;\n          } else {\n            // a previously folded range or a (possibly unfolded) recovered range\n            useRange = nextA;\n            // stays collapsed if the range still has the same number of lines or the selection is not in the range or after it\n            useRange.isCollapsed = nextB.isCollapsed && (nextA.endLineNumber === nextB.endLineNumber || !selection?.startsInside(nextA.startLineNumber + 1, nextA.endLineNumber + 1));\n            useRange.source = 0 /* FoldSource.provider */;\n          }\n          nextA = getA(++indexA); // not necessary, just for speed\n        } else {\n          useRange = nextB;\n          if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\n            // a previously collapsed range\n            useRange.source = 2 /* FoldSource.recovered */;\n          }\n        }\n        nextB = getB(++indexB);\n      } else {\n        // nextA is next. The user folded B set takes precedence and we sometimes need to look\n        // ahead in it to check for an upcoming conflict.\n        let scanIndex = indexB;\n        let prescanB = nextB;\n        while (true) {\n          if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\n            useRange = nextA;\n            break; // no conflict, use this nextA\n          }\n          if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\n            // we found a user folded range, it wins\n            break; // without setting nextResult, so this nextA gets skipped\n          }\n          prescanB = getB(++scanIndex);\n        }\n        nextA = getA(++indexA);\n      }\n      if (useRange) {\n        while (topStackedRange && topStackedRange.endLineNumber < useRange.startLineNumber) {\n          topStackedRange = stackedRanges.pop();\n        }\n        if (useRange.endLineNumber > useRange.startLineNumber && useRange.startLineNumber > prevLineNumber && useRange.endLineNumber <= maxLineNumber && (!topStackedRange || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\n          resultRanges.push(useRange);\n          prevLineNumber = useRange.startLineNumber;\n          if (topStackedRange) {\n            stackedRanges.push(topStackedRange);\n          }\n          topStackedRange = useRange;\n        }\n      }\n    }\n    return resultRanges;\n  }\n}\nexport class FoldingRegion {\n  constructor(ranges, index) {\n    this.ranges = ranges;\n    this.index = index;\n  }\n  get startLineNumber() {\n    return this.ranges.getStartLineNumber(this.index);\n  }\n  get endLineNumber() {\n    return this.ranges.getEndLineNumber(this.index);\n  }\n  get regionIndex() {\n    return this.index;\n  }\n  get parentIndex() {\n    return this.ranges.getParentIndex(this.index);\n  }\n  get isCollapsed() {\n    return this.ranges.isCollapsed(this.index);\n  }\n  containedBy(range) {\n    return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n  }\n  containsLine(lineNumber) {\n    return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstIdxMonotonousOrArrLen } from '../../../../base/common/arraysFind.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n  get onDidChange() {\n    return this._updateEventEmitter.event;\n  }\n  get hiddenRanges() {\n    return this._hiddenRanges;\n  }\n  constructor(model) {\n    this._updateEventEmitter = new Emitter();\n    this._hasLineChanges = false;\n    this._foldingModel = model;\n    this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n    this._hiddenRanges = [];\n    if (model.regions.length) {\n      this.updateHiddenRanges();\n    }\n  }\n  notifyChangeModelContent(e) {\n    if (this._hiddenRanges.length && !this._hasLineChanges) {\n      this._hasLineChanges = e.changes.some(change => {\n        return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n      });\n    }\n  }\n  updateHiddenRanges() {\n    let updateHiddenAreas = false;\n    const newHiddenAreas = [];\n    let i = 0; // index into hidden\n    let k = 0;\n    let lastCollapsedStart = Number.MAX_VALUE;\n    let lastCollapsedEnd = -1;\n    const ranges = this._foldingModel.regions;\n    for (; i < ranges.length; i++) {\n      if (!ranges.isCollapsed(i)) {\n        continue;\n      }\n      const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n      const endLineNumber = ranges.getEndLineNumber(i);\n      if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n        // ignore ranges contained in collapsed regions\n        continue;\n      }\n      if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n        // reuse the old ranges\n        newHiddenAreas.push(this._hiddenRanges[k]);\n        k++;\n      } else {\n        updateHiddenAreas = true;\n        newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n      }\n      lastCollapsedStart = startLineNumber;\n      lastCollapsedEnd = endLineNumber;\n    }\n    if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n      this.applyHiddenRanges(newHiddenAreas);\n    }\n  }\n  applyHiddenRanges(newHiddenAreas) {\n    this._hiddenRanges = newHiddenAreas;\n    this._hasLineChanges = false;\n    this._updateEventEmitter.fire(newHiddenAreas);\n  }\n  hasRanges() {\n    return this._hiddenRanges.length > 0;\n  }\n  isHidden(line) {\n    return findRange(this._hiddenRanges, line) !== null;\n  }\n  adjustSelections(selections) {\n    let hasChanges = false;\n    const editorModel = this._foldingModel.textModel;\n    let lastRange = null;\n    const adjustLine = line => {\n      if (!lastRange || !isInside(line, lastRange)) {\n        lastRange = findRange(this._hiddenRanges, line);\n      }\n      if (lastRange) {\n        return lastRange.startLineNumber - 1;\n      }\n      return null;\n    };\n    for (let i = 0, len = selections.length; i < len; i++) {\n      let selection = selections[i];\n      const adjustedStartLine = adjustLine(selection.startLineNumber);\n      if (adjustedStartLine) {\n        selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n        hasChanges = true;\n      }\n      const adjustedEndLine = adjustLine(selection.endLineNumber);\n      if (adjustedEndLine) {\n        selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n        hasChanges = true;\n      }\n      selections[i] = selection;\n    }\n    return hasChanges;\n  }\n  dispose() {\n    if (this.hiddenRanges.length > 0) {\n      this._hiddenRanges = [];\n      this._updateEventEmitter.fire(this._hiddenRanges);\n    }\n    if (this._foldingModelListener) {\n      this._foldingModelListener.dispose();\n      this._foldingModelListener = null;\n    }\n  }\n}\nfunction isInside(line, range) {\n  return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n  const i = findFirstIdxMonotonousOrArrLen(ranges, r => line < r.startLineNumber) - 1;\n  if (i >= 0 && ranges[i].endLineNumber >= line) {\n    return ranges[i];\n  }\n  return null;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nconst ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n  constructor(editorModel, languageConfigurationService, foldingRangesLimit) {\n    this.editorModel = editorModel;\n    this.languageConfigurationService = languageConfigurationService;\n    this.foldingRangesLimit = foldingRangesLimit;\n    this.id = ID_INDENT_PROVIDER;\n  }\n  dispose() {}\n  compute(cancelationToken) {\n    const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n    const offSide = foldingRules && !!foldingRules.offSide;\n    const markers = foldingRules && foldingRules.markers;\n    return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.foldingRangesLimit));\n  }\n}\n// public only for testing\nexport class RangesCollector {\n  constructor(foldingRangesLimit) {\n    this._startIndexes = [];\n    this._endIndexes = [];\n    this._indentOccurrences = [];\n    this._length = 0;\n    this._foldingRangesLimit = foldingRangesLimit;\n  }\n  insertFirst(startLineNumber, endLineNumber, indent) {\n    if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n      return;\n    }\n    const index = this._length;\n    this._startIndexes[index] = startLineNumber;\n    this._endIndexes[index] = endLineNumber;\n    this._length++;\n    if (indent < 1000) {\n      this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n    }\n  }\n  toIndentRanges(model) {\n    const limit = this._foldingRangesLimit.limit;\n    if (this._length <= limit) {\n      this._foldingRangesLimit.update(this._length, false);\n      // reverse and create arrays of the exact length\n      const startIndexes = new Uint32Array(this._length);\n      const endIndexes = new Uint32Array(this._length);\n      for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n        startIndexes[k] = this._startIndexes[i];\n        endIndexes[k] = this._endIndexes[i];\n      }\n      return new FoldingRegions(startIndexes, endIndexes);\n    } else {\n      this._foldingRangesLimit.update(this._length, limit);\n      let entries = 0;\n      let maxIndent = this._indentOccurrences.length;\n      for (let i = 0; i < this._indentOccurrences.length; i++) {\n        const n = this._indentOccurrences[i];\n        if (n) {\n          if (n + entries > limit) {\n            maxIndent = i;\n            break;\n          }\n          entries += n;\n        }\n      }\n      const tabSize = model.getOptions().tabSize;\n      // reverse and create arrays of the exact length\n      const startIndexes = new Uint32Array(limit);\n      const endIndexes = new Uint32Array(limit);\n      for (let i = this._length - 1, k = 0; i >= 0; i--) {\n        const startIndex = this._startIndexes[i];\n        const lineContent = model.getLineContent(startIndex);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        if (indent < maxIndent || indent === maxIndent && entries++ < limit) {\n          startIndexes[k] = startIndex;\n          endIndexes[k] = this._endIndexes[i];\n          k++;\n        }\n      }\n      return new FoldingRegions(startIndexes, endIndexes);\n    }\n  }\n}\nconst foldingRangesLimitDefault = {\n  limit: MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT,\n  update: () => {}\n};\nexport function computeRanges(model, offSide, markers, foldingRangesLimit = foldingRangesLimitDefault) {\n  const tabSize = model.getOptions().tabSize;\n  const result = new RangesCollector(foldingRangesLimit);\n  let pattern = undefined;\n  if (markers) {\n    pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n  }\n  const previousRegions = [];\n  const line = model.getLineCount() + 1;\n  previousRegions.push({\n    indent: -1,\n    endAbove: line,\n    line\n  }); // sentinel, to make sure there's at least one entry\n  for (let line = model.getLineCount(); line > 0; line--) {\n    const lineContent = model.getLineContent(line);\n    const indent = computeIndentLevel(lineContent, tabSize);\n    let previous = previousRegions[previousRegions.length - 1];\n    if (indent === -1) {\n      if (offSide) {\n        // for offSide languages, empty lines are associated to the previous block\n        // note: the next block is already written to the results, so this only\n        // impacts the end position of the block before\n        previous.endAbove = line;\n      }\n      continue; // only whitespace\n    }\n    let m;\n    if (pattern && (m = lineContent.match(pattern))) {\n      // folding pattern match\n      if (m[1]) {\n        // start pattern match\n        // discard all regions until the folding pattern\n        let i = previousRegions.length - 1;\n        while (i > 0 && previousRegions[i].indent !== -2) {\n          i--;\n        }\n        if (i > 0) {\n          previousRegions.length = i + 1;\n          previous = previousRegions[i];\n          // new folding range from pattern, includes the end line\n          result.insertFirst(line, previous.line, indent);\n          previous.line = line;\n          previous.indent = indent;\n          previous.endAbove = line;\n          continue;\n        } else {\n          // no end marker found, treat line as a regular line\n        }\n      } else {\n        // end pattern match\n        previousRegions.push({\n          indent: -2,\n          endAbove: line,\n          line\n        });\n        continue;\n      }\n    }\n    if (previous.indent > indent) {\n      // discard all regions with larger indent\n      do {\n        previousRegions.pop();\n        previous = previousRegions[previousRegions.length - 1];\n      } while (previous.indent > indent);\n      // new folding range\n      const endLineNumber = previous.endAbove - 1;\n      if (endLineNumber - line >= 1) {\n        // needs at east size 1\n        result.insertFirst(line, endLineNumber, indent);\n      }\n    }\n    if (previous.indent === indent) {\n      previous.endAbove = line;\n    } else {\n      // previous.indent < indent\n      // new region with a bigger indent\n      previousRegions.push({\n        indent,\n        endAbove: line,\n        line\n      });\n    }\n  }\n  return result.toIndentRanges(model);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst foldBackground = registerColor('editor.foldBackground', {\n  light: transparent(editorSelectionBackground, 0.3),\n  dark: transparent(editorSelectionBackground, 0.3),\n  hcDark: null,\n  hcLight: null\n}, localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nregisterColor('editor.foldPlaceholderForeground', {\n  light: '#808080',\n  dark: '#808080',\n  hcDark: null,\n  hcLight: null\n}, localize('collapsedTextColor', \"Color of the collapsed text after the first line of a folded range.\"));\nregisterColor('editorGutter.foldingControlForeground', iconForeground, localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\nconst foldedBackgroundMinimap = {\n  color: themeColorFromId(foldBackground),\n  position: 1 /* MinimapPosition.Inline */\n};\nconst collapsed = localize('linesCollapsed', \"Click to expand the range.\");\nconst expanded = localize('linesExpanded', \"Click to collapse the range.\");\nexport class FoldingDecorationProvider {\n  static {\n    this.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-collapsed-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n    });\n  }\n  static {\n    this.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-collapsed-highlighted-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      className: 'folded-background',\n      minimap: foldedBackgroundMinimap,\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n    });\n  }\n  static {\n    this.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-manually-collapsed-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n    });\n  }\n  static {\n    this.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-manually-collapsed-highlighted-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      className: 'folded-background',\n      minimap: foldedBackgroundMinimap,\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n    });\n  }\n  static {\n    this.NO_CONTROLS_COLLAPSED_RANGE_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-no-controls-range-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed\n    });\n  }\n  static {\n    this.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-no-controls-range-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      afterContentClassName: 'inline-folded',\n      className: 'folded-background',\n      minimap: foldedBackgroundMinimap,\n      isWholeLine: true,\n      linesDecorationsTooltip: collapsed\n    });\n  }\n  static {\n    this.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-expanded-visual-decoration',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      isWholeLine: true,\n      firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon),\n      linesDecorationsTooltip: expanded\n    });\n  }\n  static {\n    this.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-expanded-auto-hide-visual-decoration',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n      isWholeLine: true,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon),\n      linesDecorationsTooltip: expanded\n    });\n  }\n  static {\n    this.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-manually-expanded-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      isWholeLine: true,\n      firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon),\n      linesDecorationsTooltip: expanded\n    });\n  }\n  static {\n    this.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-manually-expanded-auto-hide-visual-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      isWholeLine: true,\n      firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon),\n      linesDecorationsTooltip: expanded\n    });\n  }\n  static {\n    this.NO_CONTROLS_EXPANDED_RANGE_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-no-controls-range-decoration',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      isWholeLine: true\n    });\n  }\n  static {\n    this.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n      description: 'folding-hidden-range-decoration',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n    });\n  }\n  constructor(editor) {\n    this.editor = editor;\n    this.showFoldingControls = 'mouseover';\n    this.showFoldingHighlights = true;\n  }\n  getDecorationOption(isCollapsed, isHidden, isManual) {\n    if (isHidden) {\n      // is inside another collapsed region\n      return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n    }\n    if (this.showFoldingControls === 'never') {\n      if (isCollapsed) {\n        return this.showFoldingHighlights ? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION : FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\n      }\n      return FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\n    }\n    if (isCollapsed) {\n      return isManual ? this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION : this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION;\n    } else if (this.showFoldingControls === 'mouseover') {\n      return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n    } else {\n      return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n    }\n  }\n  changeDecorations(callback) {\n    return this.editor.changeDecorations(callback);\n  }\n  removeDecorations(decorationIds) {\n    this.editor.removeDecorations(decorationIds);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nconst ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n  constructor(editorModel, providers, handleFoldingRangesChange, foldingRangesLimit, fallbackRangeProvider // used when all providers return null\n  ) {\n    this.editorModel = editorModel;\n    this.providers = providers;\n    this.handleFoldingRangesChange = handleFoldingRangesChange;\n    this.foldingRangesLimit = foldingRangesLimit;\n    this.fallbackRangeProvider = fallbackRangeProvider;\n    this.id = ID_SYNTAX_PROVIDER;\n    this.disposables = new DisposableStore();\n    if (fallbackRangeProvider) {\n      this.disposables.add(fallbackRangeProvider);\n    }\n    for (const provider of providers) {\n      if (typeof provider.onDidChange === 'function') {\n        this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n      }\n    }\n  }\n  compute(cancellationToken) {\n    return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n      if (ranges) {\n        const res = sanitizeRanges(ranges, this.foldingRangesLimit);\n        return res;\n      }\n      return this.fallbackRangeProvider?.compute(cancellationToken) ?? null;\n    });\n  }\n  dispose() {\n    this.disposables.dispose();\n  }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n  let rangeData = null;\n  const promises = providers.map((provider, i) => {\n    return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n      if (cancellationToken.isCancellationRequested) {\n        return;\n      }\n      if (Array.isArray(ranges)) {\n        if (!Array.isArray(rangeData)) {\n          rangeData = [];\n        }\n        const nLines = model.getLineCount();\n        for (const r of ranges) {\n          if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n            rangeData.push({\n              start: r.start,\n              end: r.end,\n              rank: i,\n              kind: r.kind\n            });\n          }\n        }\n      }\n    }, onUnexpectedExternalError);\n  });\n  return Promise.all(promises).then(_ => {\n    return rangeData;\n  });\n}\nclass RangesCollector {\n  constructor(foldingRangesLimit) {\n    this._startIndexes = [];\n    this._endIndexes = [];\n    this._nestingLevels = [];\n    this._nestingLevelCounts = [];\n    this._types = [];\n    this._length = 0;\n    this._foldingRangesLimit = foldingRangesLimit;\n  }\n  add(startLineNumber, endLineNumber, type, nestingLevel) {\n    if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n      return;\n    }\n    const index = this._length;\n    this._startIndexes[index] = startLineNumber;\n    this._endIndexes[index] = endLineNumber;\n    this._nestingLevels[index] = nestingLevel;\n    this._types[index] = type;\n    this._length++;\n    if (nestingLevel < 30) {\n      this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n    }\n  }\n  toIndentRanges() {\n    const limit = this._foldingRangesLimit.limit;\n    if (this._length <= limit) {\n      this._foldingRangesLimit.update(this._length, false);\n      const startIndexes = new Uint32Array(this._length);\n      const endIndexes = new Uint32Array(this._length);\n      for (let i = 0; i < this._length; i++) {\n        startIndexes[i] = this._startIndexes[i];\n        endIndexes[i] = this._endIndexes[i];\n      }\n      return new FoldingRegions(startIndexes, endIndexes, this._types);\n    } else {\n      this._foldingRangesLimit.update(this._length, limit);\n      let entries = 0;\n      let maxLevel = this._nestingLevelCounts.length;\n      for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n        const n = this._nestingLevelCounts[i];\n        if (n) {\n          if (n + entries > limit) {\n            maxLevel = i;\n            break;\n          }\n          entries += n;\n        }\n      }\n      const startIndexes = new Uint32Array(limit);\n      const endIndexes = new Uint32Array(limit);\n      const types = [];\n      for (let i = 0, k = 0; i < this._length; i++) {\n        const level = this._nestingLevels[i];\n        if (level < maxLevel || level === maxLevel && entries++ < limit) {\n          startIndexes[k] = this._startIndexes[i];\n          endIndexes[k] = this._endIndexes[i];\n          types[k] = this._types[i];\n          k++;\n        }\n      }\n      return new FoldingRegions(startIndexes, endIndexes, types);\n    }\n  }\n}\nexport function sanitizeRanges(rangeData, foldingRangesLimit) {\n  const sorted = rangeData.sort((d1, d2) => {\n    let diff = d1.start - d2.start;\n    if (diff === 0) {\n      diff = d1.rank - d2.rank;\n    }\n    return diff;\n  });\n  const collector = new RangesCollector(foldingRangesLimit);\n  let top = undefined;\n  const previous = [];\n  for (const entry of sorted) {\n    if (!top) {\n      top = entry;\n      collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n    } else {\n      if (entry.start > top.start) {\n        if (entry.end <= top.end) {\n          previous.push(top);\n          top = entry;\n          collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        } else {\n          if (entry.start > top.end) {\n            do {\n              top = previous.pop();\n            } while (top && entry.start > top.end);\n            if (top) {\n              previous.push(top);\n            }\n            top = entry;\n          }\n          collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n      }\n    }\n  }\n  return collector.toIndentRanges();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.fontZoomIn',\n      label: nls.localize('EditorFontZoomIn.label', \"Increase Editor Font Size\"),\n      alias: 'Increase Editor Font Size',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n  }\n}\nclass EditorFontZoomOut extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.fontZoomOut',\n      label: nls.localize('EditorFontZoomOut.label', \"Decrease Editor Font Size\"),\n      alias: 'Decrease Editor Font Size',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n  }\n}\nclass EditorFontZoomReset extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.fontZoomReset',\n      label: nls.localize('EditorFontZoomReset.label', \"Reset Editor Font Size\"),\n      alias: 'Reset Editor Font Size',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    EditorZoom.setZoomLevel(0);\n  }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n  static {\n    this.ID = 'editor.contrib.autoFormat';\n  }\n  constructor(_editor, _languageFeaturesService, _workerService, _accessibilitySignalService) {\n    this._editor = _editor;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._workerService = _workerService;\n    this._accessibilitySignalService = _accessibilitySignalService;\n    this._disposables = new DisposableStore();\n    this._sessionDisposables = new DisposableStore();\n    this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n    this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n    this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n    this._disposables.add(_editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(56 /* EditorOption.formatOnType */)) {\n        this._update();\n      }\n    }));\n    this._update();\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._sessionDisposables.dispose();\n  }\n  _update() {\n    // clean up\n    this._sessionDisposables.clear();\n    // we are disabled\n    if (!this._editor.getOption(56 /* EditorOption.formatOnType */)) {\n      return;\n    }\n    // no model\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    // no support\n    const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (!support || !support.autoFormatTriggerCharacters) {\n      return;\n    }\n    // register typing listeners that will trigger the format\n    const triggerChars = new CharacterSet();\n    for (const ch of support.autoFormatTriggerCharacters) {\n      triggerChars.add(ch.charCodeAt(0));\n    }\n    this._sessionDisposables.add(this._editor.onDidType(text => {\n      const lastCharCode = text.charCodeAt(text.length - 1);\n      if (triggerChars.has(lastCharCode)) {\n        this._trigger(String.fromCharCode(lastCharCode));\n      }\n    }));\n  }\n  _trigger(ch) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const position = this._editor.getPosition();\n    const cts = new CancellationTokenSource();\n    // install a listener that checks if edits happens before the\n    // position on which we format right now. If so, we won't\n    // apply the format edits\n    const unbind = this._editor.onDidChangeModelContent(e => {\n      if (e.isFlush) {\n        // a model.setValue() was called\n        // cancel only once\n        cts.cancel();\n        unbind.dispose();\n        return;\n      }\n      for (let i = 0, len = e.changes.length; i < len; i++) {\n        const change = e.changes[i];\n        if (change.range.endLineNumber <= position.lineNumber) {\n          // cancel only once\n          cts.cancel();\n          unbind.dispose();\n          return;\n        }\n      }\n    });\n    getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n      if (cts.token.isCancellationRequested) {\n        return;\n      }\n      if (isNonEmptyArray(edits)) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.format, {\n          userGesture: false\n        });\n        FormattingEdit.execute(this._editor, edits, true);\n      }\n    }).finally(() => {\n      unbind.dispose();\n    });\n  }\n};\nFormatOnType = __decorate([__param(1, ILanguageFeaturesService), __param(2, IEditorWorkerService), __param(3, IAccessibilitySignalService)], FormatOnType);\nexport { FormatOnType };\nlet FormatOnPaste = class FormatOnPaste {\n  static {\n    this.ID = 'editor.contrib.formatOnPaste';\n  }\n  constructor(editor, _languageFeaturesService, _instantiationService) {\n    this.editor = editor;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._instantiationService = _instantiationService;\n    this._callOnDispose = new DisposableStore();\n    this._callOnModel = new DisposableStore();\n    this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n    this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n    this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n    this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n  }\n  dispose() {\n    this._callOnDispose.dispose();\n    this._callOnModel.dispose();\n  }\n  _update() {\n    // clean up\n    this._callOnModel.clear();\n    // we are disabled\n    if (!this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n      return;\n    }\n    // no model\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    // no formatter\n    if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n      return;\n    }\n    this._callOnModel.add(this.editor.onDidPaste(({\n      range\n    }) => this._trigger(range)));\n  }\n  _trigger(range) {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    if (this.editor.getSelections().length > 1) {\n      return;\n    }\n    this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None, false).catch(onUnexpectedError);\n  }\n};\nFormatOnPaste = __decorate([__param(1, ILanguageFeaturesService), __param(2, IInstantiationService)], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.formatDocument',\n      label: nls.localize('formatDocument.label', \"Format Document\"),\n      alias: 'Format Document',\n      precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 1.3\n      }\n    });\n  }\n  async run(accessor, editor) {\n    if (editor.hasModel()) {\n      const instaService = accessor.get(IInstantiationService);\n      const progressService = accessor.get(IEditorProgressService);\n      await progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None, true), 250);\n    }\n  }\n}\nclass FormatSelectionAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.formatSelection',\n      label: nls.localize('formatSelection.label', \"Format Selection\"),\n      alias: 'Format Selection',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      contextMenuOpts: {\n        when: EditorContextKeys.hasNonEmptySelection,\n        group: '1_modification',\n        order: 1.31\n      }\n    });\n  }\n  async run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const instaService = accessor.get(IInstantiationService);\n    const model = editor.getModel();\n    const ranges = editor.getSelections().map(range => {\n      return range.isEmpty() ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber)) : range;\n    });\n    const progressService = accessor.get(IEditorProgressService);\n    await progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None, true), 250);\n  }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', async accessor => {\n  const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n  if (!editor || !editor.hasModel()) {\n    return;\n  }\n  const commandService = accessor.get(ICommandService);\n  if (editor.getSelection().isEmpty()) {\n    await commandService.executeCommand('editor.action.formatDocument');\n  } else {\n    await commandService.executeCommand('editor.action.formatSelection');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', async function (accessor, ...args) {\n  const [resource] = args;\n  assertType(URI.isUri(resource));\n  const outlineService = accessor.get(IOutlineModelService);\n  const modelService = accessor.get(ITextModelService);\n  const reference = await modelService.createModelReference(resource);\n  try {\n    return (await outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n  } finally {\n    reference.dispose();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { TriggerInlineSuggestionAction, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, AcceptNextWordOfInlineCompletion, AcceptInlineCompletion, HideInlineCompletion, ToggleAlwaysShowInlineSuggestionToolbar, AcceptNextLineOfInlineCompletion } from './controller/commands.js';\nimport { InlineCompletionsHoverParticipant } from './hintsWidget/hoverParticipant.js';\nimport { InlineCompletionsAccessibleView } from './inlineCompletionsAccessibleView.js';\nimport { InlineCompletionsController } from './controller/inlineCompletionsController.js';\nimport { AccessibleViewRegistry } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(InlineCompletionsController.ID, InlineCompletionsController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nregisterEditorAction(AcceptNextWordOfInlineCompletion);\nregisterEditorAction(AcceptNextLineOfInlineCompletion);\nregisterEditorAction(AcceptInlineCompletion);\nregisterEditorAction(HideInlineCompletion);\nregisterAction2(ToggleAlwaysShowInlineSuggestionToolbar);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\nAccessibleViewRegistry.register(new InlineCompletionsAccessibleView());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { transaction } from '../../../../../base/common/observable.js';\nimport { asyncTransaction } from '../../../../../base/common/observableInternal/base.js';\nimport { EditorAction } from '../../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../../common/editorContextKeys.js';\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId, inlineSuggestCommitId } from './commandIds.js';\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { Context as SuggestContext } from '../../../suggest/browser/suggest.js';\nimport * as nls from '../../../../../nls.js';\nimport { MenuId, Action2 } from '../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nexport let ShowNextInlineSuggestionAction = /*#__PURE__*/(() => {\n  class ShowNextInlineSuggestionAction extends EditorAction {\n    static {\n      this.ID = showNextInlineSuggestionActionId;\n    }\n    constructor() {\n      super({\n        id: ShowNextInlineSuggestionAction.ID,\n        label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n        alias: 'Show Next Inline Suggestion',\n        precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n        kbOpts: {\n          weight: 100,\n          primary: 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineCompletionsController.get(editor);\n      controller?.model.get()?.next();\n    }\n  }\n  return ShowNextInlineSuggestionAction;\n})();\nexport let ShowPreviousInlineSuggestionAction = /*#__PURE__*/(() => {\n  class ShowPreviousInlineSuggestionAction extends EditorAction {\n    static {\n      this.ID = showPreviousInlineSuggestionActionId;\n    }\n    constructor() {\n      super({\n        id: ShowPreviousInlineSuggestionAction.ID,\n        label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n        alias: 'Show Previous Inline Suggestion',\n        precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n        kbOpts: {\n          weight: 100,\n          primary: 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineCompletionsController.get(editor);\n      controller?.model.get()?.previous();\n    }\n  }\n  return ShowPreviousInlineSuggestionAction;\n})();\nexport class TriggerInlineSuggestionAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inlineSuggest.trigger',\n      label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n      alias: 'Trigger Inline Suggestion',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineCompletionsController.get(editor);\n    await asyncTransaction(async tx => {\n      /** @description triggerExplicitly from command */\n      await controller?.model.get()?.triggerExplicitly(tx);\n      controller?.playAccessibilitySignal(tx);\n    });\n  }\n}\nexport class AcceptNextWordOfInlineCompletion extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inlineSuggest.acceptNextWord',\n      label: nls.localize('action.inlineSuggest.acceptNextWord', \"Accept Next Word Of Inline Suggestion\"),\n      alias: 'Accept Next Word Of Inline Suggestion',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible)\n      },\n      menuOpts: [{\n        menuId: MenuId.InlineSuggestionToolbar,\n        title: nls.localize('acceptWord', 'Accept Word'),\n        group: 'primary',\n        order: 2\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineCompletionsController.get(editor);\n    await controller?.model.get()?.acceptNextWord(controller.editor);\n  }\n}\nexport class AcceptNextLineOfInlineCompletion extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inlineSuggest.acceptNextLine',\n      label: nls.localize('action.inlineSuggest.acceptNextLine', \"Accept Next Line Of Inline Suggestion\"),\n      alias: 'Accept Next Line Of Inline Suggestion',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 1\n      },\n      menuOpts: [{\n        menuId: MenuId.InlineSuggestionToolbar,\n        title: nls.localize('acceptLine', 'Accept Line'),\n        group: 'secondary',\n        order: 2\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineCompletionsController.get(editor);\n    await controller?.model.get()?.acceptNextLine(controller.editor);\n  }\n}\nexport class AcceptInlineCompletion extends EditorAction {\n  constructor() {\n    super({\n      id: inlineSuggestCommitId,\n      label: nls.localize('action.inlineSuggest.accept', \"Accept Inline Suggestion\"),\n      alias: 'Accept Inline Suggestion',\n      precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n      menuOpts: [{\n        menuId: MenuId.InlineSuggestionToolbar,\n        title: nls.localize('accept', \"Accept\"),\n        group: 'primary',\n        order: 1\n      }],\n      kbOpts: {\n        primary: 2 /* KeyCode.Tab */,\n        weight: 200,\n        kbExpr: ContextKeyExpr.and(InlineCompletionContextKeys.inlineSuggestionVisible, EditorContextKeys.tabMovesFocus.toNegated(), InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize, SuggestContext.Visible.toNegated(), EditorContextKeys.hoverFocused.toNegated())\n      }\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineCompletionsController.get(editor);\n    if (controller) {\n      controller.model.get()?.accept(controller.editor);\n      controller.editor.focus();\n    }\n  }\n}\nexport let HideInlineCompletion = /*#__PURE__*/(() => {\n  class HideInlineCompletion extends EditorAction {\n    static {\n      this.ID = 'editor.action.inlineSuggest.hide';\n    }\n    constructor() {\n      super({\n        id: HideInlineCompletion.ID,\n        label: nls.localize('action.inlineSuggest.hide', \"Hide Inline Suggestion\"),\n        alias: 'Hide Inline Suggestion',\n        precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n        kbOpts: {\n          weight: 100,\n          primary: 9 /* KeyCode.Escape */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineCompletionsController.get(editor);\n      transaction(tx => {\n        controller?.model.get()?.stop(tx);\n      });\n    }\n  }\n  return HideInlineCompletion;\n})();\nexport let ToggleAlwaysShowInlineSuggestionToolbar = /*#__PURE__*/(() => {\n  class ToggleAlwaysShowInlineSuggestionToolbar extends Action2 {\n    static {\n      this.ID = 'editor.action.inlineSuggest.toggleAlwaysShowToolbar';\n    }\n    constructor() {\n      super({\n        id: ToggleAlwaysShowInlineSuggestionToolbar.ID,\n        title: nls.localize('action.inlineSuggest.alwaysShowToolbar', \"Always Show Toolbar\"),\n        f1: false,\n        precondition: undefined,\n        menu: [{\n          id: MenuId.InlineSuggestionToolbar,\n          group: 'secondary',\n          order: 10\n        }],\n        toggled: ContextKeyExpr.equals('config.editor.inlineSuggest.showToolbar', 'always')\n      });\n    }\n    async run(accessor, editor) {\n      const configService = accessor.get(IConfigurationService);\n      const currentValue = configService.getValue('editor.inlineSuggest.showToolbar');\n      const newValue = currentValue === 'always' ? 'onHover' : 'always';\n      configService.updateValue('editor.inlineSuggest.showToolbar', newValue);\n    }\n  }\n  return ToggleAlwaysShowInlineSuggestionToolbar;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { autorun } from '../../../../../base/common/observable.js';\nimport { firstNonWhitespaceIndex } from '../../../../../base/common/strings.js';\nimport { CursorColumns } from '../../../../common/core/cursorColumns.js';\nimport { RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../../nls.js';\nexport class InlineCompletionContextKeys extends Disposable {\n  static {\n    this.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\n  }\n  static {\n    this.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\n  }\n  static {\n    this.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\n  }\n  static {\n    this.suppressSuggestions = new RawContextKey('inlineSuggestionSuppressSuggestions', undefined, localize('suppressSuggestions', \"Whether suggestions should be suppressed for the current suggestion\"));\n  }\n  constructor(contextKeyService, model) {\n    super();\n    this.contextKeyService = contextKeyService;\n    this.model = model;\n    this.inlineCompletionVisible = InlineCompletionContextKeys.inlineSuggestionVisible.bindTo(this.contextKeyService);\n    this.inlineCompletionSuggestsIndentation = InlineCompletionContextKeys.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n    this.inlineCompletionSuggestsIndentationLessThanTabSize = InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n    this.suppressSuggestions = InlineCompletionContextKeys.suppressSuggestions.bindTo(this.contextKeyService);\n    this._register(autorun(reader => {\n      /** @description update context key: inlineCompletionVisible, suppressSuggestions */\n      const model = this.model.read(reader);\n      const state = model?.state.read(reader);\n      const isInlineCompletionVisible = !!state?.inlineCompletion && state?.primaryGhostText !== undefined && !state?.primaryGhostText.isEmpty();\n      this.inlineCompletionVisible.set(isInlineCompletionVisible);\n      if (state?.primaryGhostText && state?.inlineCompletion) {\n        this.suppressSuggestions.set(state.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions);\n      }\n    }));\n    this._register(autorun(reader => {\n      /** @description update context key: inlineCompletionSuggestsIndentation, inlineCompletionSuggestsIndentationLessThanTabSize */\n      const model = this.model.read(reader);\n      let startsWithIndentation = false;\n      let startsWithIndentationLessThanTabSize = true;\n      const ghostText = model?.primaryGhostText.read(reader);\n      if (!!model?.selectedSuggestItem && ghostText && ghostText.parts.length > 0) {\n        const {\n          column,\n          lines\n        } = ghostText.parts[0];\n        const firstLine = lines[0];\n        const indentationEndColumn = model.textModel.getLineIndentColumn(ghostText.lineNumber);\n        const inIndentation = column <= indentationEndColumn;\n        if (inIndentation) {\n          let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n          if (firstNonWsIdx === -1) {\n            firstNonWsIdx = firstLine.length - 1;\n          }\n          startsWithIndentation = firstNonWsIdx > 0;\n          const tabSize = model.textModel.getOptions().tabSize;\n          const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n          startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n        }\n      }\n      this.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n      this.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n    }));\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createStyleSheet2 } from './dom.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { autorun } from '../common/observable.js';\nexport function createStyleSheetFromObservable(css) {\n  const store = new DisposableStore();\n  const w = store.add(createStyleSheet2());\n  store.add(autorun(reader => {\n    w.setStyle(css.read(reader));\n  }));\n  return store;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineCompletionsController_1;\nimport { createStyleSheetFromObservable } from '../../../../../base/browser/domObservable.js';\nimport { alert } from '../../../../../base/browser/ui/aria/aria.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { cancelOnDispose } from '../../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, derived, observableFromEvent, observableSignal, observableValue, transaction, waitForState } from '../../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../../base/common/observableInternal/derived.js';\nimport { derivedObservableWithCache, mapObservableArrayCached } from '../../../../../base/common/observableInternal/utils.js';\nimport { isUndefined } from '../../../../../base/common/types.js';\nimport { CoreEditingCommands } from '../../../../browser/coreCommands.js';\nimport { observableCodeEditor, reactToChange, reactToChangeWithStore } from '../../../../browser/observableCodeEditor.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { ILanguageFeatureDebounceService } from '../../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { inlineSuggestCommitId } from './commandIds.js';\nimport { GhostTextView } from '../view/ghostTextView.js';\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\nimport { InlineCompletionsHintsWidget, InlineSuggestionHintsContentWidget } from '../hintsWidget/inlineCompletionsHintsWidget.js';\nimport { InlineCompletionsModel } from '../model/inlineCompletionsModel.js';\nimport { SuggestWidgetAdaptor } from '../model/suggestWidgetAdaptor.js';\nimport { localize } from '../../../../../nls.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nlet InlineCompletionsController = /*#__PURE__*/(() => {\n  let InlineCompletionsController = class InlineCompletionsController extends Disposable {\n    static {\n      InlineCompletionsController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.inlineCompletionsController';\n    }\n    static get(editor) {\n      return editor.getContribution(InlineCompletionsController_1.ID);\n    }\n    constructor(editor, _instantiationService, _contextKeyService, _configurationService, _commandService, _debounceService, _languageFeaturesService, _accessibilitySignalService, _keybindingService, _accessibilityService) {\n      super();\n      this.editor = editor;\n      this._instantiationService = _instantiationService;\n      this._contextKeyService = _contextKeyService;\n      this._configurationService = _configurationService;\n      this._commandService = _commandService;\n      this._debounceService = _debounceService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._accessibilitySignalService = _accessibilitySignalService;\n      this._keybindingService = _keybindingService;\n      this._accessibilityService = _accessibilityService;\n      this._editorObs = observableCodeEditor(this.editor);\n      this._positions = derived(this, reader => this._editorObs.selections.read(reader)?.map(s => s.getEndPosition()) ?? [new Position(1, 1)]);\n      this._suggestWidgetAdaptor = this._register(new SuggestWidgetAdaptor(this.editor, () => {\n        this._editorObs.forceUpdate();\n        return this.model.get()?.selectedInlineCompletion.get()?.toSingleTextEdit(undefined);\n      }, item => this._editorObs.forceUpdate(_tx => {\n        /** @description InlineCompletionsController.handleSuggestAccepted */\n        this.model.get()?.handleSuggestAccepted(item);\n      })));\n      this._suggestWidgetSelectedItem = observableFromEvent(this, cb => this._suggestWidgetAdaptor.onDidSelectedItemChange(() => {\n        this._editorObs.forceUpdate(_tx => cb(undefined));\n      }), () => this._suggestWidgetAdaptor.selectedItem);\n      this._enabledInConfig = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).enabled);\n      this._isScreenReaderEnabled = observableFromEvent(this, this._accessibilityService.onDidChangeScreenReaderOptimized, () => this._accessibilityService.isScreenReaderOptimized());\n      this._editorDictationInProgress = observableFromEvent(this, this._contextKeyService.onDidChangeContext, () => this._contextKeyService.getContext(this.editor.getDomNode()).getValue('editorDictation.inProgress') === true);\n      this._enabled = derived(this, reader => this._enabledInConfig.read(reader) && (!this._isScreenReaderEnabled.read(reader) || !this._editorDictationInProgress.read(reader)));\n      this._debounceValue = this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', {\n        min: 50,\n        max: 50\n      });\n      this.model = derivedDisposable(this, reader => {\n        if (this._editorObs.isReadonly.read(reader)) {\n          return undefined;\n        }\n        const textModel = this._editorObs.model.read(reader);\n        if (!textModel) {\n          return undefined;\n        }\n        const model = this._instantiationService.createInstance(InlineCompletionsModel, textModel, this._suggestWidgetSelectedItem, this._editorObs.versionId, this._positions, this._debounceValue, observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(119 /* EditorOption.suggest */).preview), observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(119 /* EditorOption.suggest */).previewMode), observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).mode), this._enabled);\n        return model;\n      }).recomputeInitiallyAndOnChange(this._store);\n      this._ghostTexts = derived(this, reader => {\n        const model = this.model.read(reader);\n        return model?.ghostTexts.read(reader) ?? [];\n      });\n      this._stablizedGhostTexts = convertItemsToStableObservables(this._ghostTexts, this._store);\n      this._ghostTextWidgets = mapObservableArrayCached(this, this._stablizedGhostTexts, (ghostText, store) => store.add(this._instantiationService.createInstance(GhostTextView, this.editor, {\n        ghostText: ghostText,\n        minReservedLineCount: constObservable(0),\n        targetTextModel: this.model.map(v => v?.textModel)\n      }))).recomputeInitiallyAndOnChange(this._store);\n      this._playAccessibilitySignal = observableSignal(this);\n      this._fontFamily = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).fontFamily);\n      this._register(new InlineCompletionContextKeys(this._contextKeyService, this.model));\n      this._register(reactToChange(this._editorObs.onDidType, (_value, _changes) => {\n        if (this._enabled.get()) {\n          this.model.get()?.trigger();\n        }\n      }));\n      this._register(this._commandService.onDidExecuteCommand(e => {\n        // These commands don't trigger onDidType.\n        const commands = new Set([CoreEditingCommands.Tab.id, CoreEditingCommands.DeleteLeft.id, CoreEditingCommands.DeleteRight.id, inlineSuggestCommitId, 'acceptSelectedSuggestion']);\n        if (commands.has(e.commandId) && editor.hasTextFocus() && this._enabled.get()) {\n          this._editorObs.forceUpdate(tx => {\n            /** @description onDidExecuteCommand */\n            this.model.get()?.trigger(tx);\n          });\n        }\n      }));\n      this._register(reactToChange(this._editorObs.selections, (_value, changes) => {\n        if (changes.some(e => e.reason === 3 /* CursorChangeReason.Explicit */ || e.source === 'api')) {\n          this.model.get()?.stop();\n        }\n      }));\n      this._register(this.editor.onDidBlurEditorWidget(() => {\n        // This is a hidden setting very useful for debugging\n        if (this._contextKeyService.getContextKeyValue('accessibleViewIsShown') || this._configurationService.getValue('editor.inlineSuggest.keepOnBlur') || editor.getOption(62 /* EditorOption.inlineSuggest */).keepOnBlur || InlineSuggestionHintsContentWidget.dropDownVisible) {\n          return;\n        }\n        transaction(tx => {\n          /** @description InlineCompletionsController.onDidBlurEditorWidget */\n          this.model.get()?.stop(tx);\n        });\n      }));\n      this._register(autorun(reader => {\n        /** @description InlineCompletionsController.forceRenderingAbove */\n        const state = this.model.read(reader)?.state.read(reader);\n        if (state?.suggestItem) {\n          if (state.primaryGhostText.lineCount >= 2) {\n            this._suggestWidgetAdaptor.forceRenderingAbove();\n          }\n        } else {\n          this._suggestWidgetAdaptor.stopForceRenderingAbove();\n        }\n      }));\n      this._register(toDisposable(() => {\n        this._suggestWidgetAdaptor.stopForceRenderingAbove();\n      }));\n      const currentInlineCompletionBySemanticId = derivedObservableWithCache(this, (reader, last) => {\n        const model = this.model.read(reader);\n        const state = model?.state.read(reader);\n        if (this._suggestWidgetSelectedItem.get()) {\n          return last;\n        }\n        return state?.inlineCompletion?.semanticId;\n      });\n      this._register(reactToChangeWithStore(derived(reader => {\n        this._playAccessibilitySignal.read(reader);\n        currentInlineCompletionBySemanticId.read(reader);\n        return {};\n      }), async (_value, _deltas, store) => {\n        /** @description InlineCompletionsController.playAccessibilitySignalAndReadSuggestion */\n        const model = this.model.get();\n        const state = model?.state.get();\n        if (!state || !model) {\n          return;\n        }\n        const lineText = model.textModel.getLineContent(state.primaryGhostText.lineNumber);\n        await timeout(50, cancelOnDispose(store));\n        await waitForState(this._suggestWidgetSelectedItem, isUndefined, () => false, cancelOnDispose(store));\n        await this._accessibilitySignalService.playSignal(AccessibilitySignal.inlineSuggestion);\n        if (this.editor.getOption(8 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\n          this._provideScreenReaderUpdate(state.primaryGhostText.renderForScreenReader(lineText));\n        }\n      }));\n      this._register(new InlineCompletionsHintsWidget(this.editor, this.model, this._instantiationService));\n      this._register(createStyleSheetFromObservable(derived(reader => {\n        const fontFamily = this._fontFamily.read(reader);\n        if (fontFamily === '' || fontFamily === 'default') {\n          return '';\n        }\n        return `\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ${fontFamily};\n}`;\n      })));\n      // TODO@hediet\n      this._register(this._configurationService.onDidChangeConfiguration(e => {\n        if (e.affectsConfiguration('accessibility.verbosity.inlineCompletions')) {\n          this.editor.updateOptions({\n            inlineCompletionsAccessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.inlineCompletions')\n          });\n        }\n      }));\n      this.editor.updateOptions({\n        inlineCompletionsAccessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.inlineCompletions')\n      });\n    }\n    playAccessibilitySignal(tx) {\n      this._playAccessibilitySignal.trigger(tx);\n    }\n    _provideScreenReaderUpdate(content) {\n      const accessibleViewShowing = this._contextKeyService.getContextKeyValue('accessibleViewIsShown');\n      const accessibleViewKeybinding = this._keybindingService.lookupKeybinding('editor.action.accessibleView');\n      let hint;\n      if (!accessibleViewShowing && accessibleViewKeybinding && this.editor.getOption(150 /* EditorOption.inlineCompletionsAccessibilityVerbose */)) {\n        hint = localize('showAccessibleViewHint', \"Inspect this in the accessible view ({0})\", accessibleViewKeybinding.getAriaLabel());\n      }\n      alert(hint ? content + ', ' + hint : content);\n    }\n    shouldShowHoverAt(range) {\n      const ghostText = this.model.get()?.primaryGhostText.get();\n      if (ghostText) {\n        return ghostText.parts.some(p => range.containsPosition(new Position(ghostText.lineNumber, p.column)));\n      }\n      return false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n      return this._ghostTextWidgets.get()[0]?.ownsViewZone(viewZoneId) ?? false;\n    }\n  };\n  return InlineCompletionsController;\n})();\nInlineCompletionsController = InlineCompletionsController_1 = __decorate([__param(1, IInstantiationService), __param(2, IContextKeyService), __param(3, IConfigurationService), __param(4, ICommandService), __param(5, ILanguageFeatureDebounceService), __param(6, ILanguageFeaturesService), __param(7, IAccessibilitySignalService), __param(8, IKeybindingService), __param(9, IAccessibilityService)], InlineCompletionsController);\nexport { InlineCompletionsController };\nfunction convertItemsToStableObservables(items, store) {\n  const result = observableValue('result', []);\n  const innerObservables = [];\n  store.add(autorun(reader => {\n    const itemsValue = items.read(reader);\n    transaction(tx => {\n      if (itemsValue.length !== innerObservables.length) {\n        innerObservables.length = itemsValue.length;\n        for (let i = 0; i < innerObservables.length; i++) {\n          if (!innerObservables[i]) {\n            innerObservables[i] = observableValue('item', itemsValue[i]);\n          }\n        }\n        result.set([...innerObservables], tx);\n      }\n      innerObservables.forEach((o, i) => o.set(itemsValue[i], tx));\n    });\n  }));\n  return result;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent, observableSignalFromEvent, observableValue } from '../../../../../base/common/observable.js';\nimport * as strings from '../../../../../base/common/strings.js';\nimport './ghostTextView.css';\nimport { applyFontInfo } from '../../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { StringBuilder } from '../../../../common/core/stringBuilder.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { InjectedTextCursorStops } from '../../../../common/model.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { LineDecoration } from '../../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { GhostTextReplacement } from '../model/ghostText.js';\nimport { ColumnRange, applyObservableDecorations } from '../utils.js';\nexport const GHOST_TEXT_DESCRIPTION = 'ghost-text';\nlet GhostTextView = class GhostTextView extends Disposable {\n  constructor(editor, model, languageService) {\n    super();\n    this.editor = editor;\n    this.model = model;\n    this.languageService = languageService;\n    this.isDisposed = observableValue(this, false);\n    this.currentTextModel = observableFromEvent(this, this.editor.onDidChangeModel, () => /** @description editor.model */this.editor.getModel());\n    this.uiState = derived(this, reader => {\n      if (this.isDisposed.read(reader)) {\n        return undefined;\n      }\n      const textModel = this.currentTextModel.read(reader);\n      if (textModel !== this.model.targetTextModel.read(reader)) {\n        return undefined;\n      }\n      const ghostText = this.model.ghostText.read(reader);\n      if (!ghostText) {\n        return undefined;\n      }\n      const replacedRange = ghostText instanceof GhostTextReplacement ? ghostText.columnRange : undefined;\n      const inlineTexts = [];\n      const additionalLines = [];\n      function addToAdditionalLines(lines, className) {\n        if (additionalLines.length > 0) {\n          const lastLine = additionalLines[additionalLines.length - 1];\n          if (className) {\n            lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n          }\n          lastLine.content += lines[0];\n          lines = lines.slice(1);\n        }\n        for (const line of lines) {\n          additionalLines.push({\n            content: line,\n            decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n          });\n        }\n      }\n      const textBufferLine = textModel.getLineContent(ghostText.lineNumber);\n      let hiddenTextStartColumn = undefined;\n      let lastIdx = 0;\n      for (const part of ghostText.parts) {\n        let lines = part.lines;\n        if (hiddenTextStartColumn === undefined) {\n          inlineTexts.push({\n            column: part.column,\n            text: lines[0],\n            preview: part.preview\n          });\n          lines = lines.slice(1);\n        } else {\n          addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n        }\n        if (lines.length > 0) {\n          addToAdditionalLines(lines, GHOST_TEXT_DESCRIPTION);\n          if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n            hiddenTextStartColumn = part.column;\n          }\n        }\n        lastIdx = part.column - 1;\n      }\n      if (hiddenTextStartColumn !== undefined) {\n        addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n      }\n      const hiddenRange = hiddenTextStartColumn !== undefined ? new ColumnRange(hiddenTextStartColumn, textBufferLine.length + 1) : undefined;\n      return {\n        replacedRange,\n        inlineTexts,\n        additionalLines,\n        hiddenRange,\n        lineNumber: ghostText.lineNumber,\n        additionalReservedLineCount: this.model.minReservedLineCount.read(reader),\n        targetTextModel: textModel\n      };\n    });\n    this.decorations = derived(this, reader => {\n      const uiState = this.uiState.read(reader);\n      if (!uiState) {\n        return [];\n      }\n      const decorations = [];\n      if (uiState.replacedRange) {\n        decorations.push({\n          range: uiState.replacedRange.toRange(uiState.lineNumber),\n          options: {\n            inlineClassName: 'inline-completion-text-to-replace',\n            description: 'GhostTextReplacement'\n          }\n        });\n      }\n      if (uiState.hiddenRange) {\n        decorations.push({\n          range: uiState.hiddenRange.toRange(uiState.lineNumber),\n          options: {\n            inlineClassName: 'ghost-text-hidden',\n            description: 'ghost-text-hidden'\n          }\n        });\n      }\n      for (const p of uiState.inlineTexts) {\n        decorations.push({\n          range: Range.fromPositions(new Position(uiState.lineNumber, p.column)),\n          options: {\n            description: GHOST_TEXT_DESCRIPTION,\n            after: {\n              content: p.text,\n              inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration',\n              cursorStops: InjectedTextCursorStops.Left\n            },\n            showIfCollapsed: true\n          }\n        });\n      }\n      return decorations;\n    });\n    this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec, derived(reader => {\n      /** @description lines */\n      const uiState = this.uiState.read(reader);\n      return uiState ? {\n        lineNumber: uiState.lineNumber,\n        additionalLines: uiState.additionalLines,\n        minReservedLineCount: uiState.additionalReservedLineCount,\n        targetTextModel: uiState.targetTextModel\n      } : undefined;\n    })));\n    this._register(toDisposable(() => {\n      this.isDisposed.set(true, undefined);\n    }));\n    this._register(applyObservableDecorations(this.editor, this.decorations));\n  }\n  ownsViewZone(viewZoneId) {\n    return this.additionalLinesWidget.viewZoneId === viewZoneId;\n  }\n};\nGhostTextView = __decorate([__param(2, ILanguageService)], GhostTextView);\nexport { GhostTextView };\nexport class AdditionalLinesWidget extends Disposable {\n  get viewZoneId() {\n    return this._viewZoneId;\n  }\n  constructor(editor, languageIdCodec, lines) {\n    super();\n    this.editor = editor;\n    this.languageIdCodec = languageIdCodec;\n    this.lines = lines;\n    this._viewZoneId = undefined;\n    this.editorOptionsChanged = observableSignalFromEvent('editorOptionChanged', Event.filter(this.editor.onDidChangeConfiguration, e => e.hasChanged(33 /* EditorOption.disableMonospaceOptimizations */) || e.hasChanged(118 /* EditorOption.stopRenderingLineAfter */) || e.hasChanged(100 /* EditorOption.renderWhitespace */) || e.hasChanged(95 /* EditorOption.renderControlCharacters */) || e.hasChanged(51 /* EditorOption.fontLigatures */) || e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(67 /* EditorOption.lineHeight */)));\n    this._register(autorun(reader => {\n      /** @description update view zone */\n      const lines = this.lines.read(reader);\n      this.editorOptionsChanged.read(reader);\n      if (lines) {\n        this.updateLines(lines.lineNumber, lines.additionalLines, lines.minReservedLineCount);\n      } else {\n        this.clear();\n      }\n    }));\n  }\n  dispose() {\n    super.dispose();\n    this.clear();\n  }\n  clear() {\n    this.editor.changeViewZones(changeAccessor => {\n      if (this._viewZoneId) {\n        changeAccessor.removeZone(this._viewZoneId);\n        this._viewZoneId = undefined;\n      }\n    });\n  }\n  updateLines(lineNumber, additionalLines, minReservedLineCount) {\n    const textModel = this.editor.getModel();\n    if (!textModel) {\n      return;\n    }\n    const {\n      tabSize\n    } = textModel.getOptions();\n    this.editor.changeViewZones(changeAccessor => {\n      if (this._viewZoneId) {\n        changeAccessor.removeZone(this._viewZoneId);\n        this._viewZoneId = undefined;\n      }\n      const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n      if (heightInLines > 0) {\n        const domNode = document.createElement('div');\n        renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n        this._viewZoneId = changeAccessor.addZone({\n          afterLineNumber: lineNumber,\n          heightInLines: heightInLines,\n          domNode,\n          afterColumnAffinity: 1 /* PositionAffinity.Right */\n        });\n      }\n    });\n  }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n  const disableMonospaceOptimizations = opts.get(33 /* EditorOption.disableMonospaceOptimizations */);\n  const stopRenderingLineAfter = opts.get(118 /* EditorOption.stopRenderingLineAfter */);\n  // To avoid visual confusion, we don't want to render visible whitespace\n  const renderWhitespace = 'none';\n  const renderControlCharacters = opts.get(95 /* EditorOption.renderControlCharacters */);\n  const fontLigatures = opts.get(51 /* EditorOption.fontLigatures */);\n  const fontInfo = opts.get(50 /* EditorOption.fontInfo */);\n  const lineHeight = opts.get(67 /* EditorOption.lineHeight */);\n  const sb = new StringBuilder(10000);\n  sb.appendString('<div class=\"suggest-preview-text\">');\n  for (let i = 0, len = lines.length; i < len; i++) {\n    const lineData = lines[i];\n    const line = lineData.content;\n    sb.appendString('<div class=\"view-line');\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(i * lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const isBasicASCII = strings.isBasicASCII(line);\n    const containsRTL = strings.containsRTL(line);\n    const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n    renderViewLine(new RenderLineInput(fontInfo.isMonospace && !disableMonospaceOptimizations, fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n    sb.appendString('</div>');\n  }\n  sb.appendString('</div>');\n  applyFontInfo(domNode, fontInfo);\n  const html = sb.build();\n  const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n  domNode.innerHTML = trustedhtml;\n}\nexport const ttPolicy = createTrustedTypesPolicy('editorGhostText', {\n  createHTML: value => value\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals } from '../../../../../base/common/arrays.js';\nimport { splitLines } from '../../../../../base/common/strings.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { SingleTextEdit, TextEdit } from '../../../../common/core/textEdit.js';\nexport class GhostText {\n  constructor(lineNumber, parts) {\n    this.lineNumber = lineNumber;\n    this.parts = parts;\n  }\n  equals(other) {\n    return this.lineNumber === other.lineNumber && this.parts.length === other.parts.length && this.parts.every((part, index) => part.equals(other.parts[index]));\n  }\n  renderForScreenReader(lineText) {\n    if (this.parts.length === 0) {\n      return '';\n    }\n    const lastPart = this.parts[this.parts.length - 1];\n    const cappedLineText = lineText.substr(0, lastPart.column - 1);\n    const text = new TextEdit([...this.parts.map(p => new SingleTextEdit(Range.fromPositions(new Position(1, p.column)), p.lines.join('\\n')))]).applyToString(cappedLineText);\n    return text.substring(this.parts[0].column - 1);\n  }\n  isEmpty() {\n    return this.parts.every(p => p.lines.length === 0);\n  }\n  get lineCount() {\n    return 1 + this.parts.reduce((r, p) => r + p.lines.length - 1, 0);\n  }\n}\nexport class GhostTextPart {\n  constructor(column, text,\n  /**\n   * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n  */\n  preview) {\n    this.column = column;\n    this.text = text;\n    this.preview = preview;\n    this.lines = splitLines(this.text);\n  }\n  equals(other) {\n    return this.column === other.column && this.lines.length === other.lines.length && this.lines.every((line, index) => line === other.lines[index]);\n  }\n}\nexport class GhostTextReplacement {\n  constructor(lineNumber, columnRange, text, additionalReservedLineCount = 0) {\n    this.lineNumber = lineNumber;\n    this.columnRange = columnRange;\n    this.text = text;\n    this.additionalReservedLineCount = additionalReservedLineCount;\n    this.parts = [new GhostTextPart(this.columnRange.endColumnExclusive, this.text, false)];\n    this.newLines = splitLines(this.text);\n  }\n  renderForScreenReader(_lineText) {\n    return this.newLines.join('\\n');\n  }\n  get lineCount() {\n    return this.newLines.length;\n  }\n  isEmpty() {\n    return this.parts.every(p => p.lines.length === 0);\n  }\n  equals(other) {\n    return this.lineNumber === other.lineNumber && this.columnRange.equals(other.columnRange) && this.newLines.length === other.newLines.length && this.newLines.every((line, index) => line === other.newLines[index]) && this.additionalReservedLineCount === other.additionalReservedLineCount;\n  }\n}\nexport function ghostTextsOrReplacementsEqual(a, b) {\n  return equals(a, b, ghostTextOrReplacementEquals);\n}\nexport function ghostTextOrReplacementEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  if (a instanceof GhostText && b instanceof GhostText) {\n    return a.equals(b);\n  }\n  if (a instanceof GhostTextReplacement && b instanceof GhostTextReplacement) {\n    return a.equals(b);\n  }\n  return false;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorunOpts } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nconst array = [];\nexport function getReadonlyEmptyArray() {\n  return array;\n}\nexport class ColumnRange {\n  constructor(startColumn, endColumnExclusive) {\n    this.startColumn = startColumn;\n    this.endColumnExclusive = endColumnExclusive;\n    if (startColumn > endColumnExclusive) {\n      throw new BugIndicatingError(`startColumn ${startColumn} cannot be after endColumnExclusive ${endColumnExclusive}`);\n    }\n  }\n  toRange(lineNumber) {\n    return new Range(lineNumber, this.startColumn, lineNumber, this.endColumnExclusive);\n  }\n  equals(other) {\n    return this.startColumn === other.startColumn && this.endColumnExclusive === other.endColumnExclusive;\n  }\n}\nexport function applyObservableDecorations(editor, decorations) {\n  const d = new DisposableStore();\n  const decorationsCollection = editor.createDecorationsCollection();\n  d.add(autorunOpts({\n    debugName: () => `Apply decorations from ${decorations.debugName}`\n  }, reader => {\n    const d = decorations.read(reader);\n    decorationsCollection.set(d);\n  }));\n  d.add({\n    dispose: () => {\n      decorationsCollection.clear();\n    }\n  });\n  return d;\n}\nexport function addPositions(pos1, pos2) {\n  return new Position(pos1.lineNumber + pos2.lineNumber - 1, pos2.lineNumber === 1 ? pos1.column + pos2.column - 1 : pos2.column);\n}\nexport function subtractPositions(pos1, pos2) {\n  return new Position(pos1.lineNumber - pos2.lineNumber + 1, pos1.lineNumber - pos2.lineNumber === 0 ? pos1.column - pos2.column + 1 : pos1.column);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { compareBy, Permutation } from '../../../../../base/common/arrays.js';\nimport { mapFindFirst } from '../../../../../base/common/arraysFind.js';\nimport { itemsEquals } from '../../../../../base/common/equals.js';\nimport { BugIndicatingError, onUnexpectedError, onUnexpectedExternalError } from '../../../../../base/common/errors.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedHandleChanges, derivedOpts, observableSignal, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { commonPrefixLength, splitLinesIncludeSeparators } from '../../../../../base/common/strings.js';\nimport { isDefined } from '../../../../../base/common/types.js';\nimport { EditOperation } from '../../../../common/core/editOperation.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { SingleTextEdit, TextEdit } from '../../../../common/core/textEdit.js';\nimport { TextLength } from '../../../../common/core/textLength.js';\nimport { InlineCompletionTriggerKind } from '../../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { GhostText, ghostTextOrReplacementEquals, ghostTextsOrReplacementsEqual } from './ghostText.js';\nimport { InlineCompletionsSource } from './inlineCompletionsSource.js';\nimport { computeGhostText, singleTextEditAugments, singleTextRemoveCommonPrefix } from './singleTextEdit.js';\nimport { addPositions, subtractPositions } from '../utils.js';\nimport { SnippetController2 } from '../../../snippet/browser/snippetController2.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n  get isAcceptingPartially() {\n    return this._isAcceptingPartially;\n  }\n  constructor(textModel, selectedSuggestItem, _textModelVersionId, _positions, _debounceValue, _suggestPreviewEnabled, _suggestPreviewMode, _inlineSuggestMode, _enabled, _instantiationService, _commandService, _languageConfigurationService) {\n    super();\n    this.textModel = textModel;\n    this.selectedSuggestItem = selectedSuggestItem;\n    this._textModelVersionId = _textModelVersionId;\n    this._positions = _positions;\n    this._debounceValue = _debounceValue;\n    this._suggestPreviewEnabled = _suggestPreviewEnabled;\n    this._suggestPreviewMode = _suggestPreviewMode;\n    this._inlineSuggestMode = _inlineSuggestMode;\n    this._enabled = _enabled;\n    this._instantiationService = _instantiationService;\n    this._commandService = _commandService;\n    this._languageConfigurationService = _languageConfigurationService;\n    this._source = this._register(this._instantiationService.createInstance(InlineCompletionsSource, this.textModel, this._textModelVersionId, this._debounceValue));\n    this._isActive = observableValue(this, false);\n    this._forceUpdateExplicitlySignal = observableSignal(this);\n    // We use a semantic id to keep the same inline completion selected even if the provider reorders the completions.\n    this._selectedInlineCompletionId = observableValue(this, undefined);\n    this._primaryPosition = derived(this, reader => this._positions.read(reader)[0] ?? new Position(1, 1));\n    this._isAcceptingPartially = false;\n    this._preserveCurrentCompletionReasons = new Set([VersionIdChangeReason.Redo, VersionIdChangeReason.Undo, VersionIdChangeReason.AcceptWord]);\n    this._fetchInlineCompletionsPromise = derivedHandleChanges({\n      owner: this,\n      createEmptyChangeSummary: () => ({\n        preserveCurrentCompletion: false,\n        inlineCompletionTriggerKind: InlineCompletionTriggerKind.Automatic\n      }),\n      handleChange: (ctx, changeSummary) => {\n        /** @description fetch inline completions */\n        if (ctx.didChange(this._textModelVersionId) && this._preserveCurrentCompletionReasons.has(this._getReason(ctx.change))) {\n          changeSummary.preserveCurrentCompletion = true;\n        } else if (ctx.didChange(this._forceUpdateExplicitlySignal)) {\n          changeSummary.inlineCompletionTriggerKind = InlineCompletionTriggerKind.Explicit;\n        }\n        return true;\n      }\n    }, (reader, changeSummary) => {\n      this._forceUpdateExplicitlySignal.read(reader);\n      const shouldUpdate = this._enabled.read(reader) && this.selectedSuggestItem.read(reader) || this._isActive.read(reader);\n      if (!shouldUpdate) {\n        this._source.cancelUpdate();\n        return undefined;\n      }\n      this._textModelVersionId.read(reader); // Refetch on text change\n      const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.get();\n      const suggestItem = this.selectedSuggestItem.read(reader);\n      if (suggestWidgetInlineCompletions && !suggestItem) {\n        const inlineCompletions = this._source.inlineCompletions.get();\n        transaction(tx => {\n          /** @description Seed inline completions with (newer) suggest widget inline completions */\n          if (!inlineCompletions || suggestWidgetInlineCompletions.request.versionId > inlineCompletions.request.versionId) {\n            this._source.inlineCompletions.set(suggestWidgetInlineCompletions.clone(), tx);\n          }\n          this._source.clearSuggestWidgetInlineCompletions(tx);\n        });\n      }\n      const cursorPosition = this._primaryPosition.read(reader);\n      const context = {\n        triggerKind: changeSummary.inlineCompletionTriggerKind,\n        selectedSuggestionInfo: suggestItem?.toSelectedSuggestionInfo()\n      };\n      const itemToPreserveCandidate = this.selectedInlineCompletion.get();\n      const itemToPreserve = changeSummary.preserveCurrentCompletion || itemToPreserveCandidate?.forwardStable ? itemToPreserveCandidate : undefined;\n      return this._source.fetch(cursorPosition, context, itemToPreserve);\n    });\n    this._filteredInlineCompletionItems = derivedOpts({\n      owner: this,\n      equalsFn: itemsEquals()\n    }, reader => {\n      const c = this._source.inlineCompletions.read(reader);\n      if (!c) {\n        return [];\n      }\n      const cursorPosition = this._primaryPosition.read(reader);\n      const filteredCompletions = c.inlineCompletions.filter(c => c.isVisible(this.textModel, cursorPosition, reader));\n      return filteredCompletions;\n    });\n    this.selectedInlineCompletionIndex = derived(this, reader => {\n      const selectedInlineCompletionId = this._selectedInlineCompletionId.read(reader);\n      const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\n      const idx = this._selectedInlineCompletionId === undefined ? -1 : filteredCompletions.findIndex(v => v.semanticId === selectedInlineCompletionId);\n      if (idx === -1) {\n        // Reset the selection so that the selection does not jump back when it appears again\n        this._selectedInlineCompletionId.set(undefined, undefined);\n        return 0;\n      }\n      return idx;\n    });\n    this.selectedInlineCompletion = derived(this, reader => {\n      const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\n      const idx = this.selectedInlineCompletionIndex.read(reader);\n      return filteredCompletions[idx];\n    });\n    this.activeCommands = derivedOpts({\n      owner: this,\n      equalsFn: itemsEquals()\n    }, r => this.selectedInlineCompletion.read(r)?.inlineCompletion.source.inlineCompletions.commands ?? []);\n    this.lastTriggerKind = this._source.inlineCompletions.map(this, v => v?.request.context.triggerKind);\n    this.inlineCompletionsCount = derived(this, reader => {\n      if (this.lastTriggerKind.read(reader) === InlineCompletionTriggerKind.Explicit) {\n        return this._filteredInlineCompletionItems.read(reader).length;\n      } else {\n        return undefined;\n      }\n    });\n    this.state = derivedOpts({\n      owner: this,\n      equalsFn: (a, b) => {\n        if (!a || !b) {\n          return a === b;\n        }\n        return ghostTextsOrReplacementsEqual(a.ghostTexts, b.ghostTexts) && a.inlineCompletion === b.inlineCompletion && a.suggestItem === b.suggestItem;\n      }\n    }, reader => {\n      const model = this.textModel;\n      const suggestItem = this.selectedSuggestItem.read(reader);\n      if (suggestItem) {\n        const suggestCompletionEdit = singleTextRemoveCommonPrefix(suggestItem.toSingleTextEdit(), model);\n        const augmentation = this._computeAugmentation(suggestCompletionEdit, reader);\n        const isSuggestionPreviewEnabled = this._suggestPreviewEnabled.read(reader);\n        if (!isSuggestionPreviewEnabled && !augmentation) {\n          return undefined;\n        }\n        const fullEdit = augmentation?.edit ?? suggestCompletionEdit;\n        const fullEditPreviewLength = augmentation ? augmentation.edit.text.length - suggestCompletionEdit.text.length : 0;\n        const mode = this._suggestPreviewMode.read(reader);\n        const positions = this._positions.read(reader);\n        const edits = [fullEdit, ...getSecondaryEdits(this.textModel, positions, fullEdit)];\n        const ghostTexts = edits.map((edit, idx) => computeGhostText(edit, model, mode, positions[idx], fullEditPreviewLength)).filter(isDefined);\n        const primaryGhostText = ghostTexts[0] ?? new GhostText(fullEdit.range.endLineNumber, []);\n        return {\n          edits,\n          primaryGhostText,\n          ghostTexts,\n          inlineCompletion: augmentation?.completion,\n          suggestItem\n        };\n      } else {\n        if (!this._isActive.read(reader)) {\n          return undefined;\n        }\n        const inlineCompletion = this.selectedInlineCompletion.read(reader);\n        if (!inlineCompletion) {\n          return undefined;\n        }\n        const replacement = inlineCompletion.toSingleTextEdit(reader);\n        const mode = this._inlineSuggestMode.read(reader);\n        const positions = this._positions.read(reader);\n        const edits = [replacement, ...getSecondaryEdits(this.textModel, positions, replacement)];\n        const ghostTexts = edits.map((edit, idx) => computeGhostText(edit, model, mode, positions[idx], 0)).filter(isDefined);\n        if (!ghostTexts[0]) {\n          return undefined;\n        }\n        return {\n          edits,\n          primaryGhostText: ghostTexts[0],\n          ghostTexts,\n          inlineCompletion,\n          suggestItem: undefined\n        };\n      }\n    });\n    this.ghostTexts = derivedOpts({\n      owner: this,\n      equalsFn: ghostTextsOrReplacementsEqual\n    }, reader => {\n      const v = this.state.read(reader);\n      if (!v) {\n        return undefined;\n      }\n      return v.ghostTexts;\n    });\n    this.primaryGhostText = derivedOpts({\n      owner: this,\n      equalsFn: ghostTextOrReplacementEquals\n    }, reader => {\n      const v = this.state.read(reader);\n      if (!v) {\n        return undefined;\n      }\n      return v?.primaryGhostText;\n    });\n    this._register(recomputeInitiallyAndOnChange(this._fetchInlineCompletionsPromise));\n    let lastItem = undefined;\n    this._register(autorun(reader => {\n      /** @description call handleItemDidShow */\n      const item = this.state.read(reader);\n      const completion = item?.inlineCompletion;\n      if (completion?.semanticId !== lastItem?.semanticId) {\n        lastItem = completion;\n        if (completion) {\n          const i = completion.inlineCompletion;\n          const src = i.source;\n          src.provider.handleItemDidShow?.(src.inlineCompletions, i.sourceInlineCompletion, i.insertText);\n        }\n      }\n    }));\n  }\n  _getReason(e) {\n    if (e?.isUndoing) {\n      return VersionIdChangeReason.Undo;\n    }\n    if (e?.isRedoing) {\n      return VersionIdChangeReason.Redo;\n    }\n    if (this.isAcceptingPartially) {\n      return VersionIdChangeReason.AcceptWord;\n    }\n    return VersionIdChangeReason.Other;\n  }\n  async trigger(tx) {\n    this._isActive.set(true, tx);\n    await this._fetchInlineCompletionsPromise.get();\n  }\n  async triggerExplicitly(tx) {\n    subtransaction(tx, tx => {\n      this._isActive.set(true, tx);\n      this._forceUpdateExplicitlySignal.trigger(tx);\n    });\n    await this._fetchInlineCompletionsPromise.get();\n  }\n  stop(tx) {\n    subtransaction(tx, tx => {\n      this._isActive.set(false, tx);\n      this._source.clear(tx);\n    });\n  }\n  _computeAugmentation(suggestCompletion, reader) {\n    const model = this.textModel;\n    const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.read(reader);\n    const candidateInlineCompletions = suggestWidgetInlineCompletions ? suggestWidgetInlineCompletions.inlineCompletions : [this.selectedInlineCompletion.read(reader)].filter(isDefined);\n    const augmentedCompletion = mapFindFirst(candidateInlineCompletions, completion => {\n      let r = completion.toSingleTextEdit(reader);\n      r = singleTextRemoveCommonPrefix(r, model, Range.fromPositions(r.range.getStartPosition(), suggestCompletion.range.getEndPosition()));\n      return singleTextEditAugments(r, suggestCompletion) ? {\n        completion,\n        edit: r\n      } : undefined;\n    });\n    return augmentedCompletion;\n  }\n  async _deltaSelectedInlineCompletionIndex(delta) {\n    await this.triggerExplicitly();\n    const completions = this._filteredInlineCompletionItems.get() || [];\n    if (completions.length > 0) {\n      const newIdx = (this.selectedInlineCompletionIndex.get() + delta + completions.length) % completions.length;\n      this._selectedInlineCompletionId.set(completions[newIdx].semanticId, undefined);\n    } else {\n      this._selectedInlineCompletionId.set(undefined, undefined);\n    }\n  }\n  async next() {\n    await this._deltaSelectedInlineCompletionIndex(1);\n  }\n  async previous() {\n    await this._deltaSelectedInlineCompletionIndex(-1);\n  }\n  async accept(editor) {\n    if (editor.getModel() !== this.textModel) {\n      throw new BugIndicatingError();\n    }\n    const state = this.state.get();\n    if (!state || state.primaryGhostText.isEmpty() || !state.inlineCompletion) {\n      return;\n    }\n    const completion = state.inlineCompletion.toInlineCompletion(undefined);\n    if (completion.command) {\n      // Make sure the completion list will not be disposed.\n      completion.source.addRef();\n    }\n    editor.pushUndoStop();\n    if (completion.snippetInfo) {\n      editor.executeEdits('inlineSuggestion.accept', [EditOperation.replace(completion.range, ''), ...completion.additionalTextEdits]);\n      editor.setPosition(completion.snippetInfo.range.getStartPosition(), 'inlineCompletionAccept');\n      SnippetController2.get(editor)?.insert(completion.snippetInfo.snippet, {\n        undoStopBefore: false\n      });\n    } else {\n      const edits = state.edits;\n      const selections = getEndPositionsAfterApplying(edits).map(p => Selection.fromPositions(p));\n      editor.executeEdits('inlineSuggestion.accept', [...edits.map(edit => EditOperation.replace(edit.range, edit.text)), ...completion.additionalTextEdits]);\n      editor.setSelections(selections, 'inlineCompletionAccept');\n    }\n    // Reset before invoking the command, as the command might cause a follow up trigger (which we don't want to reset).\n    this.stop();\n    if (completion.command) {\n      await this._commandService.executeCommand(completion.command.id, ...(completion.command.arguments || [])).then(undefined, onUnexpectedExternalError);\n      completion.source.removeRef();\n    }\n  }\n  async acceptNextWord(editor) {\n    await this._acceptNext(editor, (pos, text) => {\n      const langId = this.textModel.getLanguageIdAtPosition(pos.lineNumber, pos.column);\n      const config = this._languageConfigurationService.getLanguageConfiguration(langId);\n      const wordRegExp = new RegExp(config.wordDefinition.source, config.wordDefinition.flags.replace('g', ''));\n      const m1 = text.match(wordRegExp);\n      let acceptUntilIndexExclusive = 0;\n      if (m1 && m1.index !== undefined) {\n        if (m1.index === 0) {\n          acceptUntilIndexExclusive = m1[0].length;\n        } else {\n          acceptUntilIndexExclusive = m1.index;\n        }\n      } else {\n        acceptUntilIndexExclusive = text.length;\n      }\n      const wsRegExp = /\\s+/g;\n      const m2 = wsRegExp.exec(text);\n      if (m2 && m2.index !== undefined) {\n        if (m2.index + m2[0].length < acceptUntilIndexExclusive) {\n          acceptUntilIndexExclusive = m2.index + m2[0].length;\n        }\n      }\n      return acceptUntilIndexExclusive;\n    }, 0 /* PartialAcceptTriggerKind.Word */);\n  }\n  async acceptNextLine(editor) {\n    await this._acceptNext(editor, (pos, text) => {\n      const m = text.match(/\\n/);\n      if (m && m.index !== undefined) {\n        return m.index + 1;\n      }\n      return text.length;\n    }, 1 /* PartialAcceptTriggerKind.Line */);\n  }\n  async _acceptNext(editor, getAcceptUntilIndex, kind) {\n    if (editor.getModel() !== this.textModel) {\n      throw new BugIndicatingError();\n    }\n    const state = this.state.get();\n    if (!state || state.primaryGhostText.isEmpty() || !state.inlineCompletion) {\n      return;\n    }\n    const ghostText = state.primaryGhostText;\n    const completion = state.inlineCompletion.toInlineCompletion(undefined);\n    if (completion.snippetInfo || completion.filterText !== completion.insertText) {\n      // not in WYSIWYG mode, partial commit might change completion, thus it is not supported\n      await this.accept(editor);\n      return;\n    }\n    const firstPart = ghostText.parts[0];\n    const ghostTextPos = new Position(ghostText.lineNumber, firstPart.column);\n    const ghostTextVal = firstPart.text;\n    const acceptUntilIndexExclusive = getAcceptUntilIndex(ghostTextPos, ghostTextVal);\n    if (acceptUntilIndexExclusive === ghostTextVal.length && ghostText.parts.length === 1) {\n      this.accept(editor);\n      return;\n    }\n    const partialGhostTextVal = ghostTextVal.substring(0, acceptUntilIndexExclusive);\n    const positions = this._positions.get();\n    const cursorPosition = positions[0];\n    // Executing the edit might free the completion, so we have to hold a reference on it.\n    completion.source.addRef();\n    try {\n      this._isAcceptingPartially = true;\n      try {\n        editor.pushUndoStop();\n        const replaceRange = Range.fromPositions(cursorPosition, ghostTextPos);\n        const newText = editor.getModel().getValueInRange(replaceRange) + partialGhostTextVal;\n        const primaryEdit = new SingleTextEdit(replaceRange, newText);\n        const edits = [primaryEdit, ...getSecondaryEdits(this.textModel, positions, primaryEdit)];\n        const selections = getEndPositionsAfterApplying(edits).map(p => Selection.fromPositions(p));\n        editor.executeEdits('inlineSuggestion.accept', edits.map(edit => EditOperation.replace(edit.range, edit.text)));\n        editor.setSelections(selections, 'inlineCompletionPartialAccept');\n        editor.revealPositionInCenterIfOutsideViewport(editor.getPosition(), 1 /* ScrollType.Immediate */);\n      } finally {\n        this._isAcceptingPartially = false;\n      }\n      if (completion.source.provider.handlePartialAccept) {\n        const acceptedRange = Range.fromPositions(completion.range.getStartPosition(), TextLength.ofText(partialGhostTextVal).addToPosition(ghostTextPos));\n        // This assumes that the inline completion and the model use the same EOL style.\n        const text = editor.getModel().getValueInRange(acceptedRange, 1 /* EndOfLinePreference.LF */);\n        completion.source.provider.handlePartialAccept(completion.source.inlineCompletions, completion.sourceInlineCompletion, text.length, {\n          kind\n        });\n      }\n    } finally {\n      completion.source.removeRef();\n    }\n  }\n  handleSuggestAccepted(item) {\n    const itemEdit = singleTextRemoveCommonPrefix(item.toSingleTextEdit(), this.textModel);\n    const augmentedCompletion = this._computeAugmentation(itemEdit, undefined);\n    if (!augmentedCompletion) {\n      return;\n    }\n    const inlineCompletion = augmentedCompletion.completion.inlineCompletion;\n    inlineCompletion.source.provider.handlePartialAccept?.(inlineCompletion.source.inlineCompletions, inlineCompletion.sourceInlineCompletion, itemEdit.text.length, {\n      kind: 2 /* PartialAcceptTriggerKind.Suggest */\n    });\n  }\n};\nInlineCompletionsModel = __decorate([__param(9, IInstantiationService), __param(10, ICommandService), __param(11, ILanguageConfigurationService)], InlineCompletionsModel);\nexport { InlineCompletionsModel };\nexport var VersionIdChangeReason = /*#__PURE__*/function (VersionIdChangeReason) {\n  VersionIdChangeReason[VersionIdChangeReason[\"Undo\"] = 0] = \"Undo\";\n  VersionIdChangeReason[VersionIdChangeReason[\"Redo\"] = 1] = \"Redo\";\n  VersionIdChangeReason[VersionIdChangeReason[\"AcceptWord\"] = 2] = \"AcceptWord\";\n  VersionIdChangeReason[VersionIdChangeReason[\"Other\"] = 3] = \"Other\";\n  return VersionIdChangeReason;\n}(VersionIdChangeReason || {});\nexport function getSecondaryEdits(textModel, positions, primaryEdit) {\n  if (positions.length === 1) {\n    // No secondary cursor positions\n    return [];\n  }\n  const primaryPosition = positions[0];\n  const secondaryPositions = positions.slice(1);\n  const primaryEditStartPosition = primaryEdit.range.getStartPosition();\n  const primaryEditEndPosition = primaryEdit.range.getEndPosition();\n  const replacedTextAfterPrimaryCursor = textModel.getValueInRange(Range.fromPositions(primaryPosition, primaryEditEndPosition));\n  const positionWithinTextEdit = subtractPositions(primaryPosition, primaryEditStartPosition);\n  if (positionWithinTextEdit.lineNumber < 1) {\n    onUnexpectedError(new BugIndicatingError(`positionWithinTextEdit line number should be bigger than 0.\n\t\t\tInvalid subtraction between ${primaryPosition.toString()} and ${primaryEditStartPosition.toString()}`));\n    return [];\n  }\n  const secondaryEditText = substringPos(primaryEdit.text, positionWithinTextEdit);\n  return secondaryPositions.map(pos => {\n    const posEnd = addPositions(subtractPositions(pos, primaryEditStartPosition), primaryEditEndPosition);\n    const textAfterSecondaryCursor = textModel.getValueInRange(Range.fromPositions(pos, posEnd));\n    const l = commonPrefixLength(replacedTextAfterPrimaryCursor, textAfterSecondaryCursor);\n    const range = Range.fromPositions(pos, pos.delta(0, l));\n    return new SingleTextEdit(range, secondaryEditText);\n  });\n}\nfunction substringPos(text, pos) {\n  let subtext = '';\n  const lines = splitLinesIncludeSeparators(text);\n  for (let i = pos.lineNumber - 1; i < lines.length; i++) {\n    subtext += lines[i].substring(i === pos.lineNumber - 1 ? pos.column - 1 : 0);\n  }\n  return subtext;\n}\nfunction getEndPositionsAfterApplying(edits) {\n  const sortPerm = Permutation.createSortPermutation(edits, compareBy(e => e.range, Range.compareRangesUsingStarts));\n  const edit = new TextEdit(sortPerm.apply(edits));\n  const sortedNewRanges = edit.getNewRanges();\n  const newRanges = sortPerm.inverse().apply(sortedNewRanges);\n  return newRanges.map(range => range.getEndPosition());\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { equalsIfDefined, itemEquals } from '../../../../../base/common/equals.js';\nimport { matchesSubString } from '../../../../../base/common/filters.js';\nimport { Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { derivedOpts, disposableObservableValue, transaction } from '../../../../../base/common/observable.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { SingleTextEdit } from '../../../../common/core/textEdit.js';\nimport { TextLength } from '../../../../common/core/textLength.js';\nimport { InlineCompletionTriggerKind } from '../../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { provideInlineCompletions } from './provideInlineCompletions.js';\nimport { singleTextRemoveCommonPrefix } from './singleTextEdit.js';\nlet InlineCompletionsSource = class InlineCompletionsSource extends Disposable {\n  constructor(textModel, versionId, _debounceValue, languageFeaturesService, languageConfigurationService) {\n    super();\n    this.textModel = textModel;\n    this.versionId = versionId;\n    this._debounceValue = _debounceValue;\n    this.languageFeaturesService = languageFeaturesService;\n    this.languageConfigurationService = languageConfigurationService;\n    this._updateOperation = this._register(new MutableDisposable());\n    this.inlineCompletions = disposableObservableValue('inlineCompletions', undefined);\n    this.suggestWidgetInlineCompletions = disposableObservableValue('suggestWidgetInlineCompletions', undefined);\n    this._register(this.textModel.onDidChangeContent(() => {\n      this._updateOperation.clear();\n    }));\n  }\n  fetch(position, context, activeInlineCompletion) {\n    const request = new UpdateRequest(position, context, this.textModel.getVersionId());\n    const target = context.selectedSuggestionInfo ? this.suggestWidgetInlineCompletions : this.inlineCompletions;\n    if (this._updateOperation.value?.request.satisfies(request)) {\n      return this._updateOperation.value.promise;\n    } else if (target.get()?.request.satisfies(request)) {\n      return Promise.resolve(true);\n    }\n    const updateOngoing = !!this._updateOperation.value;\n    this._updateOperation.clear();\n    const source = new CancellationTokenSource();\n    const promise = (async () => {\n      const shouldDebounce = updateOngoing || context.triggerKind === InlineCompletionTriggerKind.Automatic;\n      if (shouldDebounce) {\n        // This debounces the operation\n        await wait(this._debounceValue.get(this.textModel), source.token);\n      }\n      if (source.token.isCancellationRequested || this._store.isDisposed || this.textModel.getVersionId() !== request.versionId) {\n        return false;\n      }\n      const startTime = new Date();\n      const updatedCompletions = await provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.textModel, context, source.token, this.languageConfigurationService);\n      if (source.token.isCancellationRequested || this._store.isDisposed || this.textModel.getVersionId() !== request.versionId) {\n        return false;\n      }\n      const endTime = new Date();\n      this._debounceValue.update(this.textModel, endTime.getTime() - startTime.getTime());\n      const completions = new UpToDateInlineCompletions(updatedCompletions, request, this.textModel, this.versionId);\n      if (activeInlineCompletion) {\n        const asInlineCompletion = activeInlineCompletion.toInlineCompletion(undefined);\n        if (activeInlineCompletion.canBeReused(this.textModel, position) && !updatedCompletions.has(asInlineCompletion)) {\n          completions.prepend(activeInlineCompletion.inlineCompletion, asInlineCompletion.range, true);\n        }\n      }\n      this._updateOperation.clear();\n      transaction(tx => {\n        /** @description Update completions with provider result */\n        target.set(completions, tx);\n      });\n      return true;\n    })();\n    const updateOperation = new UpdateOperation(request, source, promise);\n    this._updateOperation.value = updateOperation;\n    return promise;\n  }\n  clear(tx) {\n    this._updateOperation.clear();\n    this.inlineCompletions.set(undefined, tx);\n    this.suggestWidgetInlineCompletions.set(undefined, tx);\n  }\n  clearSuggestWidgetInlineCompletions(tx) {\n    if (this._updateOperation.value?.request.context.selectedSuggestionInfo) {\n      this._updateOperation.clear();\n    }\n    this.suggestWidgetInlineCompletions.set(undefined, tx);\n  }\n  cancelUpdate() {\n    this._updateOperation.clear();\n  }\n};\nInlineCompletionsSource = __decorate([__param(3, ILanguageFeaturesService), __param(4, ILanguageConfigurationService)], InlineCompletionsSource);\nexport { InlineCompletionsSource };\nfunction wait(ms, cancellationToken) {\n  return new Promise(resolve => {\n    let d = undefined;\n    const handle = setTimeout(() => {\n      if (d) {\n        d.dispose();\n      }\n      resolve();\n    }, ms);\n    if (cancellationToken) {\n      d = cancellationToken.onCancellationRequested(() => {\n        clearTimeout(handle);\n        if (d) {\n          d.dispose();\n        }\n        resolve();\n      });\n    }\n  });\n}\nclass UpdateRequest {\n  constructor(position, context, versionId) {\n    this.position = position;\n    this.context = context;\n    this.versionId = versionId;\n  }\n  satisfies(other) {\n    return this.position.equals(other.position) && equalsIfDefined(this.context.selectedSuggestionInfo, other.context.selectedSuggestionInfo, itemEquals()) && (other.context.triggerKind === InlineCompletionTriggerKind.Automatic || this.context.triggerKind === InlineCompletionTriggerKind.Explicit) && this.versionId === other.versionId;\n  }\n}\nclass UpdateOperation {\n  constructor(request, cancellationTokenSource, promise) {\n    this.request = request;\n    this.cancellationTokenSource = cancellationTokenSource;\n    this.promise = promise;\n  }\n  dispose() {\n    this.cancellationTokenSource.cancel();\n  }\n}\nexport class UpToDateInlineCompletions {\n  get inlineCompletions() {\n    return this._inlineCompletions;\n  }\n  constructor(inlineCompletionProviderResult, request, _textModel, _versionId) {\n    this.inlineCompletionProviderResult = inlineCompletionProviderResult;\n    this.request = request;\n    this._textModel = _textModel;\n    this._versionId = _versionId;\n    this._refCount = 1;\n    this._prependedInlineCompletionItems = [];\n    const ids = _textModel.deltaDecorations([], inlineCompletionProviderResult.completions.map(i => ({\n      range: i.range,\n      options: {\n        description: 'inline-completion-tracking-range'\n      }\n    })));\n    this._inlineCompletions = inlineCompletionProviderResult.completions.map((i, index) => new InlineCompletionWithUpdatedRange(i, ids[index], this._textModel, this._versionId));\n  }\n  clone() {\n    this._refCount++;\n    return this;\n  }\n  dispose() {\n    this._refCount--;\n    if (this._refCount === 0) {\n      setTimeout(() => {\n        // To fix https://github.com/microsoft/vscode/issues/188348\n        if (!this._textModel.isDisposed()) {\n          // This is just cleanup. It's ok if it happens with a delay.\n          this._textModel.deltaDecorations(this._inlineCompletions.map(i => i.decorationId), []);\n        }\n      }, 0);\n      this.inlineCompletionProviderResult.dispose();\n      for (const i of this._prependedInlineCompletionItems) {\n        i.source.removeRef();\n      }\n    }\n  }\n  prepend(inlineCompletion, range, addRefToSource) {\n    if (addRefToSource) {\n      inlineCompletion.source.addRef();\n    }\n    const id = this._textModel.deltaDecorations([], [{\n      range,\n      options: {\n        description: 'inline-completion-tracking-range'\n      }\n    }])[0];\n    this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(inlineCompletion, id, this._textModel, this._versionId));\n    this._prependedInlineCompletionItems.push(inlineCompletion);\n  }\n}\nexport class InlineCompletionWithUpdatedRange {\n  get forwardStable() {\n    return this.inlineCompletion.source.inlineCompletions.enableForwardStability ?? false;\n  }\n  constructor(inlineCompletion, decorationId, _textModel, _modelVersion) {\n    this.inlineCompletion = inlineCompletion;\n    this.decorationId = decorationId;\n    this._textModel = _textModel;\n    this._modelVersion = _modelVersion;\n    this.semanticId = JSON.stringify([this.inlineCompletion.filterText, this.inlineCompletion.insertText, this.inlineCompletion.range.getStartPosition().toString()]);\n    this._updatedRange = derivedOpts({\n      owner: this,\n      equalsFn: Range.equalsRange\n    }, reader => {\n      this._modelVersion.read(reader);\n      return this._textModel.getDecorationRange(this.decorationId);\n    });\n  }\n  toInlineCompletion(reader) {\n    return this.inlineCompletion.withRange(this._updatedRange.read(reader) ?? emptyRange);\n  }\n  toSingleTextEdit(reader) {\n    return new SingleTextEdit(this._updatedRange.read(reader) ?? emptyRange, this.inlineCompletion.insertText);\n  }\n  isVisible(model, cursorPosition, reader) {\n    const minimizedReplacement = singleTextRemoveCommonPrefix(this._toFilterTextReplacement(reader), model);\n    const updatedRange = this._updatedRange.read(reader);\n    if (!updatedRange || !this.inlineCompletion.range.getStartPosition().equals(updatedRange.getStartPosition()) || cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber) {\n      return false;\n    }\n    // We might consider comparing by .toLowerText, but this requires GhostTextReplacement\n    const originalValue = model.getValueInRange(minimizedReplacement.range, 1 /* EndOfLinePreference.LF */);\n    const filterText = minimizedReplacement.text;\n    const cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\n    let filterTextBefore = filterText.substring(0, cursorPosIndex);\n    let filterTextAfter = filterText.substring(cursorPosIndex);\n    let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n    let originalValueAfter = originalValue.substring(cursorPosIndex);\n    const originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\n    if (minimizedReplacement.range.startColumn <= originalValueIndent) {\n      // Remove indentation\n      originalValueBefore = originalValueBefore.trimStart();\n      if (originalValueBefore.length === 0) {\n        originalValueAfter = originalValueAfter.trimStart();\n      }\n      filterTextBefore = filterTextBefore.trimStart();\n      if (filterTextBefore.length === 0) {\n        filterTextAfter = filterTextAfter.trimStart();\n      }\n    }\n    return filterTextBefore.startsWith(originalValueBefore) && !!matchesSubString(originalValueAfter, filterTextAfter);\n  }\n  canBeReused(model, position) {\n    const updatedRange = this._updatedRange.read(undefined);\n    const result = !!updatedRange && updatedRange.containsPosition(position) && this.isVisible(model, position, undefined) && TextLength.ofRange(updatedRange).isGreaterThanOrEqualTo(TextLength.ofRange(this.inlineCompletion.range));\n    return result;\n  }\n  _toFilterTextReplacement(reader) {\n    return new SingleTextEdit(this._updatedRange.read(reader) ?? emptyRange, this.inlineCompletion.filterText);\n  }\n}\nconst emptyRange = new Range(1, 1, 1, 1);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { assertNever } from '../../../../../base/common/assert.js';\nimport { DeferredPromise } from '../../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { SetMap } from '../../../../../base/common/map.js';\nimport { onUnexpectedExternalError } from '../../../../../base/common/errors.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { fixBracketsInLine } from '../../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { SingleTextEdit } from '../../../../common/core/textEdit.js';\nimport { getReadonlyEmptyArray } from '../utils.js';\nimport { SnippetParser, Text } from '../../../snippet/browser/snippetParser.js';\nexport async function provideInlineCompletions(registry, positionOrRange, model, context, token = CancellationToken.None, languageConfigurationService) {\n  // Important: Don't use position after the await calls, as the model could have been changed in the meantime!\n  const defaultReplaceRange = positionOrRange instanceof Position ? getDefaultRange(positionOrRange, model) : positionOrRange;\n  const providers = registry.all(model);\n  const multiMap = new SetMap();\n  for (const provider of providers) {\n    if (provider.groupId) {\n      multiMap.add(provider.groupId, provider);\n    }\n  }\n  function getPreferredProviders(provider) {\n    if (!provider.yieldsToGroupIds) {\n      return [];\n    }\n    const result = [];\n    for (const groupId of provider.yieldsToGroupIds || []) {\n      const providers = multiMap.get(groupId);\n      for (const p of providers) {\n        result.push(p);\n      }\n    }\n    return result;\n  }\n  const states = new Map();\n  const seen = new Set();\n  function findPreferredProviderCircle(provider, stack) {\n    stack = [...stack, provider];\n    if (seen.has(provider)) {\n      return stack;\n    }\n    seen.add(provider);\n    try {\n      const preferred = getPreferredProviders(provider);\n      for (const p of preferred) {\n        const c = findPreferredProviderCircle(p, stack);\n        if (c) {\n          return c;\n        }\n      }\n    } finally {\n      seen.delete(provider);\n    }\n    return undefined;\n  }\n  function processProvider(provider) {\n    const state = states.get(provider);\n    if (state) {\n      return state;\n    }\n    const circle = findPreferredProviderCircle(provider, []);\n    if (circle) {\n      onUnexpectedExternalError(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${circle.map(s => s.toString ? s.toString() : '' + s).join(' -> ')}`));\n    }\n    const deferredPromise = new DeferredPromise();\n    states.set(provider, deferredPromise.p);\n    (async () => {\n      if (!circle) {\n        const preferred = getPreferredProviders(provider);\n        for (const p of preferred) {\n          const result = await processProvider(p);\n          if (result && result.items.length > 0) {\n            // Skip provider\n            return undefined;\n          }\n        }\n      }\n      try {\n        if (positionOrRange instanceof Position) {\n          const completions = await provider.provideInlineCompletions(model, positionOrRange, context, token);\n          return completions;\n        } else {\n          const completions = await provider.provideInlineEdits?.(model, positionOrRange, context, token);\n          return completions;\n        }\n      } catch (e) {\n        onUnexpectedExternalError(e);\n        return undefined;\n      }\n    })().then(c => deferredPromise.complete(c), e => deferredPromise.error(e));\n    return deferredPromise.p;\n  }\n  const providerResults = await Promise.all(providers.map(async provider => ({\n    provider,\n    completions: await processProvider(provider)\n  })));\n  const itemsByHash = new Map();\n  const lists = [];\n  for (const result of providerResults) {\n    const completions = result.completions;\n    if (!completions) {\n      continue;\n    }\n    const list = new InlineCompletionList(completions, result.provider);\n    lists.push(list);\n    for (const item of completions.items) {\n      const inlineCompletionItem = InlineCompletionItem.from(item, list, defaultReplaceRange, model, languageConfigurationService);\n      itemsByHash.set(inlineCompletionItem.hash(), inlineCompletionItem);\n    }\n  }\n  return new InlineCompletionProviderResult(Array.from(itemsByHash.values()), new Set(itemsByHash.keys()), lists);\n}\nexport class InlineCompletionProviderResult {\n  constructor(\n  /**\n   * Free of duplicates.\n   */\n  completions, hashs, providerResults) {\n    this.completions = completions;\n    this.hashs = hashs;\n    this.providerResults = providerResults;\n  }\n  has(item) {\n    return this.hashs.has(item.hash());\n  }\n  dispose() {\n    for (const result of this.providerResults) {\n      result.removeRef();\n    }\n  }\n}\n/**\n * A ref counted pointer to the computed `InlineCompletions` and the `InlineCompletionsProvider` that\n * computed them.\n */\nexport class InlineCompletionList {\n  constructor(inlineCompletions, provider) {\n    this.inlineCompletions = inlineCompletions;\n    this.provider = provider;\n    this.refCount = 1;\n  }\n  addRef() {\n    this.refCount++;\n  }\n  removeRef() {\n    this.refCount--;\n    if (this.refCount === 0) {\n      this.provider.freeInlineCompletions(this.inlineCompletions);\n    }\n  }\n}\nexport class InlineCompletionItem {\n  static from(inlineCompletion, source, defaultReplaceRange, textModel, languageConfigurationService) {\n    let insertText;\n    let snippetInfo;\n    let range = inlineCompletion.range ? Range.lift(inlineCompletion.range) : defaultReplaceRange;\n    if (typeof inlineCompletion.insertText === 'string') {\n      insertText = inlineCompletion.insertText;\n      if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\n        insertText = closeBrackets(insertText, range.getStartPosition(), textModel, languageConfigurationService);\n        // Modify range depending on if brackets are added or removed\n        const diff = insertText.length - inlineCompletion.insertText.length;\n        if (diff !== 0) {\n          range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n        }\n      }\n      snippetInfo = undefined;\n    } else if ('snippet' in inlineCompletion.insertText) {\n      const preBracketCompletionLength = inlineCompletion.insertText.snippet.length;\n      if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\n        inlineCompletion.insertText.snippet = closeBrackets(inlineCompletion.insertText.snippet, range.getStartPosition(), textModel, languageConfigurationService);\n        // Modify range depending on if brackets are added or removed\n        const diff = inlineCompletion.insertText.snippet.length - preBracketCompletionLength;\n        if (diff !== 0) {\n          range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n        }\n      }\n      const snippet = new SnippetParser().parse(inlineCompletion.insertText.snippet);\n      if (snippet.children.length === 1 && snippet.children[0] instanceof Text) {\n        insertText = snippet.children[0].value;\n        snippetInfo = undefined;\n      } else {\n        insertText = snippet.toString();\n        snippetInfo = {\n          snippet: inlineCompletion.insertText.snippet,\n          range: range\n        };\n      }\n    } else {\n      assertNever(inlineCompletion.insertText);\n    }\n    return new InlineCompletionItem(insertText, inlineCompletion.command, range, insertText, snippetInfo, inlineCompletion.additionalTextEdits || getReadonlyEmptyArray(), inlineCompletion, source);\n  }\n  constructor(filterText, command, range, insertText, snippetInfo, additionalTextEdits,\n  /**\n   * A reference to the original inline completion this inline completion has been constructed from.\n   * Used for event data to ensure referential equality.\n  */\n  sourceInlineCompletion,\n  /**\n   * A reference to the original inline completion list this inline completion has been constructed from.\n   * Used for event data to ensure referential equality.\n  */\n  source) {\n    this.filterText = filterText;\n    this.command = command;\n    this.range = range;\n    this.insertText = insertText;\n    this.snippetInfo = snippetInfo;\n    this.additionalTextEdits = additionalTextEdits;\n    this.sourceInlineCompletion = sourceInlineCompletion;\n    this.source = source;\n    filterText = filterText.replace(/\\r\\n|\\r/g, '\\n');\n    insertText = filterText.replace(/\\r\\n|\\r/g, '\\n');\n  }\n  withRange(updatedRange) {\n    return new InlineCompletionItem(this.filterText, this.command, updatedRange, this.insertText, this.snippetInfo, this.additionalTextEdits, this.sourceInlineCompletion, this.source);\n  }\n  hash() {\n    return JSON.stringify({\n      insertText: this.insertText,\n      range: this.range.toString()\n    });\n  }\n  toSingleTextEdit() {\n    return new SingleTextEdit(this.range, this.insertText);\n  }\n}\nfunction getDefaultRange(position, model) {\n  const word = model.getWordAtPosition(position);\n  const maxColumn = model.getLineMaxColumn(position.lineNumber);\n  // By default, always replace up until the end of the current line.\n  // This default might be subject to change!\n  return word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn) : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n  const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n  const newLine = lineStart + text;\n  const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n  const slicedTokens = newTokens?.sliceAndInflate(position.column - 1, newLine.length, 0);\n  if (!slicedTokens) {\n    return text;\n  }\n  const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n  return newText;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\n  const denseKeyProvider = new DenseKeyProvider();\n  const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, languageId => languageConfigurationService.getLanguageConfiguration(languageId));\n  const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\n  const node = parseDocument(tokenizer, [], undefined, true);\n  let str = '';\n  const line = tokens.getLineContent();\n  function processNode(node, offset) {\n    if (node.kind === 2 /* AstNodeKind.Pair */) {\n      processNode(node.openingBracket, offset);\n      offset = lengthAdd(offset, node.openingBracket.length);\n      if (node.child) {\n        processNode(node.child, offset);\n        offset = lengthAdd(offset, node.child.length);\n      }\n      if (node.closingBracket) {\n        processNode(node.closingBracket, offset);\n        offset = lengthAdd(offset, node.closingBracket.length);\n      } else {\n        const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n        const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n        str += closingTokenText;\n      }\n    } else if (node.kind === 3 /* AstNodeKind.UnexpectedClosingBracket */) {\n      // remove the bracket\n    } else if (node.kind === 0 /* AstNodeKind.Text */ || node.kind === 1 /* AstNodeKind.Bracket */) {\n      str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\n    } else if (node.kind === 4 /* AstNodeKind.List */) {\n      for (const child of node.children) {\n        processNode(child, offset);\n        offset = lengthAdd(offset, child.length);\n      }\n    }\n  }\n  processNode(node, lengthZero);\n  return str;\n}\nclass StaticTokenizerSource {\n  constructor(lines) {\n    this.lines = lines;\n    this.tokenization = {\n      getLineTokens: lineNumber => {\n        return this.lines[lineNumber - 1];\n      }\n    };\n  }\n  getLineCount() {\n    return this.lines.length;\n  }\n  getLineLength(lineNumber) {\n    return this.lines[lineNumber - 1].getLineContent().length;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../../base/common/diff/diff.js';\nimport { commonPrefixLength, getLeadingWhitespace } from '../../../../../base/common/strings.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextLength } from '../../../../common/core/textLength.js';\nimport { SingleTextEdit } from '../../../../common/core/textEdit.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nexport function singleTextRemoveCommonPrefix(edit, model, validModelRange) {\n  const modelRange = validModelRange ? edit.range.intersectRanges(validModelRange) : edit.range;\n  if (!modelRange) {\n    return edit;\n  }\n  const valueToReplace = model.getValueInRange(modelRange, 1 /* EndOfLinePreference.LF */);\n  const commonPrefixLen = commonPrefixLength(valueToReplace, edit.text);\n  const start = TextLength.ofText(valueToReplace.substring(0, commonPrefixLen)).addToPosition(edit.range.getStartPosition());\n  const text = edit.text.substring(commonPrefixLen);\n  const range = Range.fromPositions(start, edit.range.getEndPosition());\n  return new SingleTextEdit(range, text);\n}\nexport function singleTextEditAugments(edit, base) {\n  // The augmented completion must replace the base range, but can replace even more\n  return edit.text.startsWith(base.text) && rangeExtends(edit.range, base.range);\n}\n/**\n * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n*/\nexport function computeGhostText(edit, model, mode, cursorPosition, previewSuffixLength = 0) {\n  let e = singleTextRemoveCommonPrefix(edit, model);\n  if (e.range.endLineNumber !== e.range.startLineNumber) {\n    // This edit might span multiple lines, but the first lines must be a common prefix.\n    return undefined;\n  }\n  const sourceLine = model.getLineContent(e.range.startLineNumber);\n  const sourceIndentationLength = getLeadingWhitespace(sourceLine).length;\n  const suggestionTouchesIndentation = e.range.startColumn - 1 <= sourceIndentationLength;\n  if (suggestionTouchesIndentation) {\n    // source:      [abc]\n    //                         ^^^^^^^^^ inlineCompletion.range\n    //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n    //                         ^^^^^^ replacedIndentation.length\n    //                               ^^^ rangeThatDoesNotReplaceIndentation\n    // inlineCompletion.text: 'foo'\n    //                         ^^ suggestionAddedIndentationLength\n    const suggestionAddedIndentationLength = getLeadingWhitespace(e.text).length;\n    const replacedIndentation = sourceLine.substring(e.range.startColumn - 1, sourceIndentationLength);\n    const [startPosition, endPosition] = [e.range.getStartPosition(), e.range.getEndPosition()];\n    const newStartPosition = startPosition.column + replacedIndentation.length <= endPosition.column ? startPosition.delta(0, replacedIndentation.length) : endPosition;\n    const rangeThatDoesNotReplaceIndentation = Range.fromPositions(newStartPosition, endPosition);\n    const suggestionWithoutIndentationChange = e.text.startsWith(replacedIndentation)\n    // Adds more indentation without changing existing indentation: We can add ghost text for this\n    ? e.text.substring(replacedIndentation.length)\n    // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n    : e.text.substring(suggestionAddedIndentationLength);\n    e = new SingleTextEdit(rangeThatDoesNotReplaceIndentation, suggestionWithoutIndentationChange);\n  }\n  // This is a single line string\n  const valueToBeReplaced = model.getValueInRange(e.range);\n  const changes = cachingDiff(valueToBeReplaced, e.text);\n  if (!changes) {\n    // No ghost text in case the diff would be too slow to compute\n    return undefined;\n  }\n  const lineNumber = e.range.startLineNumber;\n  const parts = new Array();\n  if (mode === 'prefix') {\n    const filteredChanges = changes.filter(c => c.originalLength === 0);\n    if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n      // Prefixes only have a single change.\n      return undefined;\n    }\n  }\n  const previewStartInCompletionText = e.text.length - previewSuffixLength;\n  for (const c of changes) {\n    const insertColumn = e.range.startColumn + c.originalStart + c.originalLength;\n    if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === e.range.startLineNumber && insertColumn < cursorPosition.column) {\n      // No ghost text before cursor\n      return undefined;\n    }\n    if (c.originalLength > 0) {\n      return undefined;\n    }\n    if (c.modifiedLength === 0) {\n      continue;\n    }\n    const modifiedEnd = c.modifiedStart + c.modifiedLength;\n    const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n    const nonPreviewText = e.text.substring(c.modifiedStart, nonPreviewTextEnd);\n    const italicText = e.text.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n    if (nonPreviewText.length > 0) {\n      parts.push(new GhostTextPart(insertColumn, nonPreviewText, false));\n    }\n    if (italicText.length > 0) {\n      parts.push(new GhostTextPart(insertColumn, italicText, true));\n    }\n  }\n  return new GhostText(lineNumber, parts);\n}\nfunction rangeExtends(extendingRange, rangeToExtend) {\n  return rangeToExtend.getStartPosition().equals(extendingRange.getStartPosition()) && rangeToExtend.getEndPosition().isBeforeOrEqual(extendingRange.getEndPosition());\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n  if (lastRequest?.originalValue === originalValue && lastRequest?.newValue === newValue) {\n    return lastRequest?.changes;\n  } else {\n    let changes = smartDiff(originalValue, newValue, true);\n    if (changes) {\n      const deletedChars = deletedCharacters(changes);\n      if (deletedChars > 0) {\n        // For performance reasons, don't compute diff if there is nothing to improve\n        const newChanges = smartDiff(originalValue, newValue, false);\n        if (newChanges && deletedCharacters(newChanges) < deletedChars) {\n          // Disabling smartness seems to be better here\n          changes = newChanges;\n        }\n      }\n    }\n    lastRequest = {\n      originalValue,\n      newValue,\n      changes\n    };\n    return changes;\n  }\n}\nfunction deletedCharacters(changes) {\n  let sum = 0;\n  for (const c of changes) {\n    sum += c.originalLength;\n  }\n  return sum;\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\n  if (originalValue.length > 5000 || newValue.length > 5000) {\n    // We don't want to work on strings that are too big\n    return undefined;\n  }\n  function getMaxCharCode(val) {\n    let maxCharCode = 0;\n    for (let i = 0, len = val.length; i < len; i++) {\n      const charCode = val.charCodeAt(i);\n      if (charCode > maxCharCode) {\n        maxCharCode = charCode;\n      }\n    }\n    return maxCharCode;\n  }\n  const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n  function getUniqueCharCode(id) {\n    if (id < 0) {\n      throw new Error('unexpected');\n    }\n    return maxCharCode + id + 1;\n  }\n  function getElements(source) {\n    let level = 0;\n    let group = 0;\n    const characters = new Int32Array(source.length);\n    for (let i = 0, len = source.length; i < len; i++) {\n      // TODO support more brackets\n      if (smartBracketMatching && source[i] === '(') {\n        const id = group * 100 + level;\n        characters[i] = getUniqueCharCode(2 * id);\n        level++;\n      } else if (smartBracketMatching && source[i] === ')') {\n        level = Math.max(level - 1, 0);\n        const id = group * 100 + level;\n        characters[i] = getUniqueCharCode(2 * id + 1);\n        if (level === 0) {\n          group++;\n        }\n      } else {\n        characters[i] = source.charCodeAt(i);\n      }\n    }\n    return characters;\n  }\n  const elements1 = getElements(originalValue);\n  const elements2 = getElements(newValue);\n  return new LcsDiff({\n    getElements: () => elements1\n  }, {\n    getElements: () => elements2\n  }).ComputeDiff(false).changes;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SnippetController2_1;\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n  overwriteBefore: 0,\n  overwriteAfter: 0,\n  undoStopBefore: true,\n  undoStopAfter: true,\n  adjustWhitespace: true,\n  clipboardText: undefined,\n  overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n  static {\n    SnippetController2_1 = this;\n  }\n  static {\n    this.ID = 'snippetController2';\n  }\n  static get(editor) {\n    return editor.getContribution(SnippetController2_1.ID);\n  }\n  static {\n    this.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\n  }\n  static {\n    this.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\n  }\n  static {\n    this.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\n  }\n  constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n    this._editor = _editor;\n    this._logService = _logService;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._languageConfigurationService = _languageConfigurationService;\n    this._snippetListener = new DisposableStore();\n    this._modelVersionId = -1;\n    this._inSnippet = SnippetController2_1.InSnippetMode.bindTo(contextKeyService);\n    this._hasNextTabstop = SnippetController2_1.HasNextTabstop.bindTo(contextKeyService);\n    this._hasPrevTabstop = SnippetController2_1.HasPrevTabstop.bindTo(contextKeyService);\n  }\n  dispose() {\n    this._inSnippet.reset();\n    this._hasPrevTabstop.reset();\n    this._hasNextTabstop.reset();\n    this._session?.dispose();\n    this._snippetListener.dispose();\n  }\n  insert(template, opts) {\n    // this is here to find out more about the yet-not-understood\n    // error that sometimes happens when we fail to inserted a nested\n    // snippet\n    try {\n      this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : {\n        ..._defaultOptions,\n        ...opts\n      });\n    } catch (e) {\n      this.cancel();\n      this._logService.error(e);\n      this._logService.error('snippet_error');\n      this._logService.error('insert_template=', template);\n      this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n    }\n  }\n  _doInsert(template, opts) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    // don't listen while inserting the snippet\n    // as that is the inflight state causing cancelation\n    this._snippetListener.clear();\n    if (opts.undoStopBefore) {\n      this._editor.getModel().pushStackElement();\n    }\n    // don't merge\n    if (this._session && typeof template !== 'string') {\n      this.cancel();\n    }\n    if (!this._session) {\n      this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n      this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n      this._session.insert();\n    } else {\n      assertType(typeof template === 'string');\n      this._session.merge(template, opts);\n    }\n    if (opts.undoStopAfter) {\n      this._editor.getModel().pushStackElement();\n    }\n    // regster completion item provider when there is any choice element\n    if (this._session?.hasChoice) {\n      const provider = {\n        _debugDisplayName: 'snippetChoiceCompletions',\n        provideCompletionItems: (model, position) => {\n          if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n            return undefined;\n          }\n          const {\n            activeChoice\n          } = this._session;\n          if (!activeChoice || activeChoice.choice.options.length === 0) {\n            return undefined;\n          }\n          const word = model.getValueInRange(activeChoice.range);\n          const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n          const suggestions = [];\n          for (let i = 0; i < activeChoice.choice.options.length; i++) {\n            const option = activeChoice.choice.options[i];\n            suggestions.push({\n              kind: 13 /* CompletionItemKind.Value */,\n              label: option.value,\n              insertText: option.value,\n              sortText: 'a'.repeat(i + 1),\n              range: activeChoice.range,\n              filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n              command: {\n                id: 'jumpToNextSnippetPlaceholder',\n                title: localize('next', 'Go to next placeholder...')\n              }\n            });\n          }\n          return {\n            suggestions\n          };\n        }\n      };\n      const model = this._editor.getModel();\n      let registration;\n      let isRegistered = false;\n      const disable = () => {\n        registration?.dispose();\n        isRegistered = false;\n      };\n      const enable = () => {\n        if (!isRegistered) {\n          registration = this._languageFeaturesService.completionProvider.register({\n            language: model.getLanguageId(),\n            pattern: model.uri.fsPath,\n            scheme: model.uri.scheme,\n            exclusive: true\n          }, provider);\n          this._snippetListener.add(registration);\n          isRegistered = true;\n        }\n      };\n      this._choiceCompletions = {\n        provider,\n        enable,\n        disable\n      };\n    }\n    this._updateState();\n    this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n    this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n    this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n  }\n  _updateState() {\n    if (!this._session || !this._editor.hasModel()) {\n      // canceled in the meanwhile\n      return;\n    }\n    if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n      // undo until the 'before' state happened\n      // and makes use cancel snippet mode\n      return this.cancel();\n    }\n    if (!this._session.hasPlaceholder) {\n      // don't listen for selection changes and don't\n      // update context keys when the snippet is plain text\n      return this.cancel();\n    }\n    if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n      this._editor.getModel().pushStackElement();\n      return this.cancel();\n    }\n    this._inSnippet.set(true);\n    this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n    this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n    this._handleChoice();\n  }\n  _handleChoice() {\n    if (!this._session || !this._editor.hasModel()) {\n      this._currentChoice = undefined;\n      return;\n    }\n    const {\n      activeChoice\n    } = this._session;\n    if (!activeChoice || !this._choiceCompletions) {\n      this._choiceCompletions?.disable();\n      this._currentChoice = undefined;\n      return;\n    }\n    if (this._currentChoice !== activeChoice.choice) {\n      this._currentChoice = activeChoice.choice;\n      this._choiceCompletions.enable();\n      // trigger suggest with the special choice completion provider\n      queueMicrotask(() => {\n        showSimpleSuggestions(this._editor, this._choiceCompletions.provider);\n      });\n    }\n  }\n  finish() {\n    while (this._inSnippet.get()) {\n      this.next();\n    }\n  }\n  cancel(resetSelection = false) {\n    this._inSnippet.reset();\n    this._hasPrevTabstop.reset();\n    this._hasNextTabstop.reset();\n    this._snippetListener.clear();\n    this._currentChoice = undefined;\n    this._session?.dispose();\n    this._session = undefined;\n    this._modelVersionId = -1;\n    if (resetSelection) {\n      // reset selection to the primary cursor when being asked\n      // for. this happens when explicitly cancelling snippet mode,\n      // e.g. when pressing ESC\n      this._editor.setSelections([this._editor.getSelection()]);\n    }\n  }\n  prev() {\n    this._session?.prev();\n    this._updateState();\n  }\n  next() {\n    this._session?.next();\n    this._updateState();\n  }\n  isInSnippet() {\n    return Boolean(this._inSnippet.get());\n  }\n};\nSnippetController2 = SnippetController2_1 = __decorate([__param(1, ILogService), __param(2, ILanguageFeaturesService), __param(3, IContextKeyService), __param(4, ILanguageConfigurationService)], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2, 4 /* EditorContributionInstantiation.Lazy */);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n  id: 'jumpToNextSnippetPlaceholder',\n  precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n  handler: ctrl => ctrl.next(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2 /* KeyCode.Tab */\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'jumpToPrevSnippetPlaceholder',\n  precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n  handler: ctrl => ctrl.prev(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'leaveSnippet',\n  precondition: SnippetController2.InSnippetMode,\n  handler: ctrl => ctrl.cancel(true),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'acceptSnippet',\n  precondition: SnippetController2.InSnippetMode,\n  handler: ctrl => ctrl.finish()\n  // kbOpts: {\n  // \tweight: KeybindingWeight.EditorContrib + 30,\n  // \tkbExpr: EditorContextKeys.textFocus,\n  // \tprimary: KeyCode.Enter,\n  // }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n  Visible: historyNavigationVisible,\n  HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n  DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n  MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n  MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n  AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n  HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n  InsertMode: new RawContextKey('suggestionInsertMode', undefined, {\n    type: 'string',\n    description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\")\n  }),\n  CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\"))\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n  constructor(position, completion, container, provider) {\n    this.position = position;\n    this.completion = completion;\n    this.container = container;\n    this.provider = provider;\n    // validation\n    this.isInvalid = false;\n    // sorting, filtering\n    this.score = FuzzyScore.Default;\n    this.distance = 0;\n    this.textLabel = typeof completion.label === 'string' ? completion.label : completion.label?.label;\n    // ensure lower-variants (perf)\n    this.labelLow = this.textLabel.toLowerCase();\n    // validate label\n    this.isInvalid = !this.textLabel;\n    this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n    this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n    this.extensionId = completion.extensionId;\n    // normalize ranges\n    if (Range.isIRange(completion.range)) {\n      this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n      this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n      this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n      // validate range\n      this.isInvalid = this.isInvalid || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n    } else {\n      this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n      this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n      this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n      // validate ranges\n      this.isInvalid = this.isInvalid || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace) || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n    }\n    // create the suggestion resolver\n    if (typeof provider.resolveCompletionItem !== 'function') {\n      this._resolveCache = Promise.resolve();\n      this._resolveDuration = 0;\n    }\n  }\n  // ---- resolving\n  get isResolved() {\n    return this._resolveDuration !== undefined;\n  }\n  get resolveDuration() {\n    return this._resolveDuration !== undefined ? this._resolveDuration : -1;\n  }\n  async resolve(token) {\n    if (!this._resolveCache) {\n      const sub = token.onCancellationRequested(() => {\n        this._resolveCache = undefined;\n        this._resolveDuration = undefined;\n      });\n      const sw = new StopWatch(true);\n      this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n        Object.assign(this.completion, value);\n        this._resolveDuration = sw.elapsed();\n      }, err => {\n        if (isCancellationError(err)) {\n          // the IPC queue will reject the request with the\n          // cancellation error -> reset cached\n          this._resolveCache = undefined;\n          this._resolveDuration = undefined;\n        }\n      }).finally(() => {\n        sub.dispose();\n      });\n    }\n    return this._resolveCache;\n  }\n}\nexport class CompletionOptions {\n  static {\n    this.default = new CompletionOptions();\n  }\n  constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\n    this.snippetSortOrder = snippetSortOrder;\n    this.kindFilter = kindFilter;\n    this.providerFilter = providerFilter;\n    this.providerItemsToReuse = providerItemsToReuse;\n    this.showDeprecated = showDeprecated;\n  }\n}\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n  return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n  constructor(items, needsClipboard, durations, disposable) {\n    this.items = items;\n    this.needsClipboard = needsClipboard;\n    this.durations = durations;\n    this.disposable = disposable;\n  }\n}\nexport async function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = {\n  triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */\n}, token = CancellationToken.None) {\n  const sw = new StopWatch();\n  position = position.clone();\n  const word = model.getWordAtPosition(position);\n  const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n  const defaultRange = {\n    replace: defaultReplaceRange,\n    insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column)\n  };\n  const result = [];\n  const disposables = new DisposableStore();\n  const durations = [];\n  let needsClipboard = false;\n  const onCompletionList = (provider, container, sw) => {\n    let didAddResult = false;\n    if (!container) {\n      return didAddResult;\n    }\n    for (const suggestion of container.suggestions) {\n      if (!options.kindFilter.has(suggestion.kind)) {\n        // skip if not showing deprecated suggestions\n        if (!options.showDeprecated && suggestion?.tags?.includes(1 /* languages.CompletionItemTag.Deprecated */)) {\n          continue;\n        }\n        // fill in default range when missing\n        if (!suggestion.range) {\n          suggestion.range = defaultRange;\n        }\n        // fill in default sortText when missing\n        if (!suggestion.sortText) {\n          suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n        }\n        if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n          needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n        }\n        result.push(new CompletionItem(position, suggestion, container, provider));\n        didAddResult = true;\n      }\n    }\n    if (isDisposable(container)) {\n      disposables.add(container);\n    }\n    durations.push({\n      providerName: provider._debugDisplayName ?? 'unknown_provider',\n      elapsedProvider: container.duration ?? -1,\n      elapsedOverall: sw.elapsed()\n    });\n    return didAddResult;\n  };\n  // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n  // do so - no snippet filter, no special-providers-only request\n  const snippetCompletions = (async () => {\n    if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n      return;\n    }\n    // we have items from a previous session that we can reuse\n    const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\n    if (reuseItems) {\n      reuseItems.forEach(item => result.push(item));\n      return;\n    }\n    if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n      return;\n    }\n    const sw = new StopWatch();\n    const list = await _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n    onCompletionList(_snippetSuggestSupport, list, sw);\n  })();\n  // add suggestions from contributed providers - providers are ordered in groups of\n  // equal score and once a group produces a result the process stops\n  // get provider groups, always add snippet suggestion provider\n  for (const providerGroup of registry.orderedGroups(model)) {\n    // for each support in the group ask for suggestions\n    let didAddResult = false;\n    await Promise.all(providerGroup.map(async provider => {\n      // we have items from a previous session that we can reuse\n      if (options.providerItemsToReuse.has(provider)) {\n        const items = options.providerItemsToReuse.get(provider);\n        items.forEach(item => result.push(item));\n        didAddResult = didAddResult || items.length > 0;\n        return;\n      }\n      // check if this provider is filtered out\n      if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n        return;\n      }\n      try {\n        const sw = new StopWatch();\n        const list = await provider.provideCompletionItems(model, position, context, token);\n        didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n      } catch (err) {\n        onUnexpectedExternalError(err);\n      }\n    }));\n    if (didAddResult || token.isCancellationRequested) {\n      break;\n    }\n  }\n  await snippetCompletions;\n  if (token.isCancellationRequested) {\n    disposables.dispose();\n    return Promise.reject(new CancellationError());\n  }\n  return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, {\n    entries: durations,\n    elapsed: sw.elapsed()\n  }, disposables);\n}\nfunction defaultComparator(a, b) {\n  // check with 'sortText'\n  if (a.sortTextLow && b.sortTextLow) {\n    if (a.sortTextLow < b.sortTextLow) {\n      return -1;\n    } else if (a.sortTextLow > b.sortTextLow) {\n      return 1;\n    }\n  }\n  // check with 'label'\n  if (a.textLabel < b.textLabel) {\n    return -1;\n  } else if (a.textLabel > b.textLabel) {\n    return 1;\n  }\n  // check with 'type'\n  return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n  if (a.completion.kind !== b.completion.kind) {\n    if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n      return -1;\n    } else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n      return 1;\n    }\n  }\n  return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n  if (a.completion.kind !== b.completion.kind) {\n    if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n      return 1;\n    } else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n      return -1;\n    }\n  }\n  return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n  return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', async (accessor, ...args) => {\n  const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n  assertType(URI.isUri(uri));\n  assertType(Position.isIPosition(position));\n  assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n  assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n  const {\n    completionProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const ref = await accessor.get(ITextModelService).createModelReference(uri);\n  try {\n    const result = {\n      incomplete: false,\n      suggestions: []\n    };\n    const resolving = [];\n    const actualPosition = ref.object.textEditorModel.validatePosition(position);\n    const completions = await provideSuggestionItems(completionProvider, ref.object.textEditorModel, actualPosition, undefined, {\n      triggerCharacter: triggerCharacter ?? undefined,\n      triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */\n    });\n    for (const item of completions.items) {\n      if (resolving.length < (maxItemsToResolve ?? 0)) {\n        resolving.push(item.resolve(CancellationToken.None));\n      }\n      result.incomplete = result.incomplete || item.container.incomplete;\n      result.suggestions.push(item.completion);\n    }\n    try {\n      await Promise.all(resolving);\n      return result;\n    } finally {\n      setTimeout(() => completions.disposable.dispose(), 100);\n    }\n  } finally {\n    ref.dispose();\n  }\n});\nexport function showSimpleSuggestions(editor, provider) {\n  editor.getContribution('editor.contrib.suggestController')?.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n  static isAllOff(config) {\n    return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n  }\n  static isAllOn(config) {\n    return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n  }\n  static valueFor(config, tokenType) {\n    switch (tokenType) {\n      case 1 /* StandardTokenType.Comment */:\n        return config.comments;\n      case 2 /* StandardTokenType.String */:\n        return config.strings;\n      default:\n        return config.other;\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SnippetSession_1;\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n  static {\n    this._decor = {\n      active: ModelDecorationOptions.register({\n        description: 'snippet-placeholder-1',\n        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n        className: 'snippet-placeholder'\n      }),\n      inactive: ModelDecorationOptions.register({\n        description: 'snippet-placeholder-2',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        className: 'snippet-placeholder'\n      }),\n      activeFinal: ModelDecorationOptions.register({\n        description: 'snippet-placeholder-3',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        className: 'finish-snippet-placeholder'\n      }),\n      inactiveFinal: ModelDecorationOptions.register({\n        description: 'snippet-placeholder-4',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        className: 'finish-snippet-placeholder'\n      })\n    };\n  }\n  constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n    this._editor = _editor;\n    this._snippet = _snippet;\n    this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n    this._offset = -1;\n    this._nestingLevel = 1;\n    this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n    this._placeholderGroupsIdx = -1;\n  }\n  initialize(textChange) {\n    this._offset = textChange.newPosition;\n  }\n  dispose() {\n    if (this._placeholderDecorations) {\n      this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n    }\n    this._placeholderGroups.length = 0;\n  }\n  _initDecorations() {\n    if (this._offset === -1) {\n      throw new Error(`Snippet not initialized!`);\n    }\n    if (this._placeholderDecorations) {\n      // already initialized\n      return;\n    }\n    this._placeholderDecorations = new Map();\n    const model = this._editor.getModel();\n    this._editor.changeDecorations(accessor => {\n      // create a decoration for each placeholder\n      for (const placeholder of this._snippet.placeholders) {\n        const placeholderOffset = this._snippet.offset(placeholder);\n        const placeholderLen = this._snippet.fullLen(placeholder);\n        const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n        const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n        const handle = accessor.addDecoration(range, options);\n        this._placeholderDecorations.set(placeholder, handle);\n      }\n    });\n  }\n  move(fwd) {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n    this._initDecorations();\n    // Transform placeholder text if necessary\n    if (this._placeholderGroupsIdx >= 0) {\n      const operations = [];\n      for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n        // Check if the placeholder has a transformation\n        if (placeholder.transform) {\n          const id = this._placeholderDecorations.get(placeholder);\n          const range = this._editor.getModel().getDecorationRange(id);\n          const currentValue = this._editor.getModel().getValueInRange(range);\n          const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n          // fix indentation for transformed lines\n          for (let i = 1; i < transformedValueLines.length; i++) {\n            transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n          }\n          operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n        }\n      }\n      if (operations.length > 0) {\n        this._editor.executeEdits('snippet.placeholderTransform', operations);\n      }\n    }\n    let couldSkipThisPlaceholder = false;\n    if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n      this._placeholderGroupsIdx += 1;\n      couldSkipThisPlaceholder = true;\n    } else if (fwd === false && this._placeholderGroupsIdx > 0) {\n      this._placeholderGroupsIdx -= 1;\n      couldSkipThisPlaceholder = true;\n    } else {\n      // the selection of the current placeholder might\n      // not acurate any more -> simply restore it\n    }\n    const newSelections = this._editor.getModel().changeDecorations(accessor => {\n      const activePlaceholders = new Set();\n      // change stickiness to always grow when typing at its edges\n      // because these decorations represent the currently active\n      // tabstop.\n      // Special case #1: reaching the final tabstop\n      // Special case #2: placeholders enclosing active placeholders\n      const selections = [];\n      for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n        const id = this._placeholderDecorations.get(placeholder);\n        const range = this._editor.getModel().getDecorationRange(id);\n        selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n        // consider to skip this placeholder index when the decoration\n        // range is empty but when the placeholder wasn't. that's a strong\n        // hint that the placeholder has been deleted. (all placeholder must match this)\n        couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n        accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n        activePlaceholders.add(placeholder);\n        for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n          const id = this._placeholderDecorations.get(enclosingPlaceholder);\n          accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n          activePlaceholders.add(enclosingPlaceholder);\n        }\n      }\n      // change stickness to never grow when typing at its edges\n      // so that in-active tabstops never grow\n      for (const [placeholder, id] of this._placeholderDecorations) {\n        if (!activePlaceholders.has(placeholder)) {\n          accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n        }\n      }\n      return selections;\n    });\n    return !couldSkipThisPlaceholder ? newSelections ?? [] : this.move(fwd);\n  }\n  _hasPlaceholderBeenCollapsed(placeholder) {\n    // A placeholder is empty when it wasn't empty when authored but\n    // when its tracking decoration is empty. This also applies to all\n    // potential parent placeholders\n    let marker = placeholder;\n    while (marker) {\n      if (marker instanceof Placeholder) {\n        const id = this._placeholderDecorations.get(marker);\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (range.isEmpty() && marker.toString().length > 0) {\n          return true;\n        }\n      }\n      marker = marker.parent;\n    }\n    return false;\n  }\n  get isAtFirstPlaceholder() {\n    return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n  }\n  get isAtLastPlaceholder() {\n    return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n  }\n  get hasPlaceholder() {\n    return this._snippet.placeholders.length > 0;\n  }\n  /**\n   * A snippet is trivial when it has no placeholder or only a final placeholder at\n   * its very end\n   */\n  get isTrivialSnippet() {\n    if (this._snippet.placeholders.length === 0) {\n      return true;\n    }\n    if (this._snippet.placeholders.length === 1) {\n      const [placeholder] = this._snippet.placeholders;\n      if (placeholder.isFinalTabstop) {\n        if (this._snippet.rightMostDescendant === placeholder) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  computePossibleSelections() {\n    const result = new Map();\n    for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n      let ranges;\n      for (const placeholder of placeholdersWithEqualIndex) {\n        if (placeholder.isFinalTabstop) {\n          // ignore those\n          break;\n        }\n        if (!ranges) {\n          ranges = [];\n          result.set(placeholder.index, ranges);\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n          // one of the placeholder lost its decoration and\n          // therefore we bail out and pretend the placeholder\n          // (with its mirrors) doesn't exist anymore.\n          result.delete(placeholder.index);\n          break;\n        }\n        ranges.push(range);\n      }\n    }\n    return result;\n  }\n  get activeChoice() {\n    if (!this._placeholderDecorations) {\n      return undefined;\n    }\n    const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n    if (!placeholder?.choice) {\n      return undefined;\n    }\n    const id = this._placeholderDecorations.get(placeholder);\n    if (!id) {\n      return undefined;\n    }\n    const range = this._editor.getModel().getDecorationRange(id);\n    if (!range) {\n      return undefined;\n    }\n    return {\n      range,\n      choice: placeholder.choice\n    };\n  }\n  get hasChoice() {\n    let result = false;\n    this._snippet.walk(marker => {\n      result = marker instanceof Choice;\n      return !result;\n    });\n    return result;\n  }\n  merge(others) {\n    const model = this._editor.getModel();\n    this._nestingLevel *= 10;\n    this._editor.changeDecorations(accessor => {\n      // For each active placeholder take one snippet and merge it\n      // in that the placeholder (can be many for `$1foo$1foo`). Because\n      // everything is sorted by editor selection we can simply remove\n      // elements from the beginning of the array\n      for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n        const nested = others.shift();\n        console.assert(nested._offset !== -1);\n        console.assert(!nested._placeholderDecorations);\n        // Massage placeholder-indicies of the nested snippet to be\n        // sorted right after the insertion point. This ensures we move\n        // through the placeholders in the correct order\n        const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n        for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n          if (nestedPlaceholder.isFinalTabstop) {\n            nestedPlaceholder.index = placeholder.index + (indexLastPlaceholder + 1) / this._nestingLevel;\n          } else {\n            nestedPlaceholder.index = placeholder.index + nestedPlaceholder.index / this._nestingLevel;\n          }\n        }\n        this._snippet.replace(placeholder, nested._snippet.children);\n        // Remove the placeholder at which position are inserting\n        // the snippet and also remove its decoration.\n        const id = this._placeholderDecorations.get(placeholder);\n        accessor.removeDecoration(id);\n        this._placeholderDecorations.delete(placeholder);\n        // For each *new* placeholder we create decoration to monitor\n        // how and if it grows/shrinks.\n        for (const placeholder of nested._snippet.placeholders) {\n          const placeholderOffset = nested._snippet.offset(placeholder);\n          const placeholderLen = nested._snippet.fullLen(placeholder);\n          const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n          const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n          this._placeholderDecorations.set(placeholder, handle);\n        }\n      }\n      // Last, re-create the placeholder groups by sorting placeholders by their index.\n      this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n    });\n  }\n}\nconst _defaultOptions = {\n  overwriteBefore: 0,\n  overwriteAfter: 0,\n  adjustWhitespace: true,\n  clipboardText: undefined,\n  overtypingCapturer: undefined\n};\nlet SnippetSession = SnippetSession_1 = class SnippetSession {\n  static adjustWhitespace(model, position, adjustIndentation, snippet, filter) {\n    const line = model.getLineContent(position.lineNumber);\n    const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n    // the snippet as inserted\n    let snippetTextString;\n    snippet.walk(marker => {\n      // all text elements that are not inside choice\n      if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n        return true;\n      }\n      // check with filter (iff provided)\n      if (filter && !filter.has(marker)) {\n        return true;\n      }\n      const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n      if (adjustIndentation) {\n        // adjust indentation of snippet test\n        // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n        // -all N+1 lines get extra-indented and normalized\n        // -the text start get extra-indented and normalized when following a linebreak\n        const offset = snippet.offset(marker);\n        if (offset === 0) {\n          // snippet start\n          lines[0] = model.normalizeIndentation(lines[0]);\n        } else {\n          // check if text start is after a linebreak\n          snippetTextString = snippetTextString ?? snippet.toString();\n          const prevChar = snippetTextString.charCodeAt(offset - 1);\n          if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n            lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n          }\n        }\n        for (let i = 1; i < lines.length; i++) {\n          lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n        }\n      }\n      const newValue = lines.join(model.getEOL());\n      if (newValue !== marker.value) {\n        marker.parent.replace(marker, [new Text(newValue)]);\n        snippetTextString = undefined;\n      }\n      return true;\n    });\n    return lineLeadingWhitespace;\n  }\n  static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n    if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n      // overwrite[Before|After] is compute using the position, not the whole\n      // selection. therefore we adjust the selection around that position\n      const {\n        positionLineNumber,\n        positionColumn\n      } = selection;\n      const positionColumnBefore = positionColumn - overwriteBefore;\n      const positionColumnAfter = positionColumn + overwriteAfter;\n      const range = model.validateRange({\n        startLineNumber: positionLineNumber,\n        startColumn: positionColumnBefore,\n        endLineNumber: positionLineNumber,\n        endColumn: positionColumnAfter\n      });\n      selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n    }\n    return selection;\n  }\n  static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n    const edits = [];\n    const snippets = [];\n    if (!editor.hasModel()) {\n      return {\n        edits,\n        snippets\n      };\n    }\n    const model = editor.getModel();\n    const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n    const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n    const readClipboardText = () => clipboardText;\n    // know what text the overwrite[Before|After] extensions\n    // of the primary curser have selected because only when\n    // secondary selections extend to the same text we can grow them\n    const firstBeforeText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n    const firstAfterText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n    // remember the first non-whitespace column to decide if\n    // `keepWhitespace` should be overruled for secondary selections\n    const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n    // sort selections by their start position but remeber\n    // the original index. that allows you to create correct\n    // offset-based selection logic without changing the\n    // primary selection\n    const indexedSelections = editor.getSelections().map((selection, idx) => ({\n      selection,\n      idx\n    })).sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n    for (const {\n      selection,\n      idx\n    } of indexedSelections) {\n      // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n      // compare if this matches the extensions of the primary selection\n      let extensionBefore = SnippetSession_1.adjustSelection(model, selection, overwriteBefore, 0);\n      let extensionAfter = SnippetSession_1.adjustSelection(model, selection, 0, overwriteAfter);\n      if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n        extensionBefore = selection;\n      }\n      if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n        extensionAfter = selection;\n      }\n      // merge the before and after selection into one\n      const snippetSelection = selection.setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn).setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n      const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n      // adjust the template string to match the indentation and\n      // whitespace rules of this insert location (can be different for each cursor)\n      // happens when being asked for (default) or when this is a secondary\n      // cursor and the leading whitespace is different\n      const start = snippetSelection.getStartPosition();\n      const snippetLineLeadingWhitespace = SnippetSession_1.adjustWhitespace(model, start, adjustWhitespace || idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber), snippet);\n      snippet.resolveVariables(new CompositeSnippetVariableResolver([modelBasedVariableResolver, new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(79 /* EditorOption.multiCursorPaste */) === 'spread'), new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer), new CommentBasedVariableResolver(model, selection, languageConfigurationService), new TimeBasedVariableResolver(), new WorkspaceBasedVariableResolver(workspaceService), new RandomBasedVariableResolver()]));\n      // store snippets with the index of their originating selection.\n      // that ensures the primiary cursor stays primary despite not being\n      // the one with lowest start position\n      edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n      edits[idx].identifier = {\n        major: idx,\n        minor: 0\n      }; // mark the edit so only our undo edits will be used to generate end cursors\n      edits[idx]._isTracked = true;\n      snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n    }\n    return {\n      edits,\n      snippets\n    };\n  }\n  static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n    if (!editor.hasModel() || snippetEdits.length === 0) {\n      return {\n        edits: [],\n        snippets: []\n      };\n    }\n    const edits = [];\n    const model = editor.getModel();\n    const parser = new SnippetParser();\n    const snippet = new TextmateSnippet();\n    // snippet variables resolver\n    const resolver = new CompositeSnippetVariableResolver([editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)), new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(79 /* EditorOption.multiCursorPaste */) === 'spread'), new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer), new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService), new TimeBasedVariableResolver(), new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))), new RandomBasedVariableResolver()]);\n    //\n    snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    let offset = 0;\n    for (let i = 0; i < snippetEdits.length; i++) {\n      const {\n        range,\n        template\n      } = snippetEdits[i];\n      // gaps between snippet edits are appended as text nodes. this\n      // ensures placeholder-offsets are later correct\n      if (i > 0) {\n        const lastRange = snippetEdits[i - 1].range;\n        const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n        const textNode = new Text(model.getValueInRange(textRange));\n        snippet.appendChild(textNode);\n        offset += textNode.value.length;\n      }\n      const newNodes = parser.parseFragment(template, snippet);\n      SnippetSession_1.adjustWhitespace(model, range.getStartPosition(), true, snippet, new Set(newNodes));\n      snippet.resolveVariables(resolver);\n      const snippetText = snippet.toString();\n      const snippetFragmentText = snippetText.slice(offset);\n      offset = snippetText.length;\n      // make edit\n      const edit = EditOperation.replace(range, snippetFragmentText);\n      edit.identifier = {\n        major: i,\n        minor: 0\n      }; // mark the edit so only our undo edits will be used to generate end cursors\n      edit._isTracked = true;\n      edits.push(edit);\n    }\n    //\n    parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n    return {\n      edits,\n      snippets: [new OneSnippet(editor, snippet, '')]\n    };\n  }\n  constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n    this._editor = _editor;\n    this._template = _template;\n    this._options = _options;\n    this._languageConfigurationService = _languageConfigurationService;\n    this._templateMerges = [];\n    this._snippets = [];\n  }\n  dispose() {\n    dispose(this._snippets);\n  }\n  _logInfo() {\n    return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n  }\n  insert() {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    // make insert edit and start with first selections\n    const {\n      edits,\n      snippets\n    } = typeof this._template === 'string' ? SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService) : SnippetSession_1.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n    this._snippets = snippets;\n    this._editor.executeEdits('snippet', edits, _undoEdits => {\n      // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n      // so we need to look only at the undo edits relevant for us.\n      // Our edits have an identifier set so that's how we can distinguish them\n      const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n      for (let idx = 0; idx < snippets.length; idx++) {\n        snippets[idx].initialize(undoEdits[idx].textChange);\n      }\n      if (this._snippets[0].hasPlaceholder) {\n        return this._move(true);\n      } else {\n        return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n      }\n    });\n    this._editor.revealRange(this._editor.getSelections()[0]);\n  }\n  merge(template, options = _defaultOptions) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n    const {\n      edits,\n      snippets\n    } = SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n    this._editor.executeEdits('snippet', edits, _undoEdits => {\n      // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n      // so we need to look only at the undo edits relevant for us.\n      // Our edits have an identifier set so that's how we can distinguish them\n      const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n      for (let idx = 0; idx < snippets.length; idx++) {\n        snippets[idx].initialize(undoEdits[idx].textChange);\n      }\n      // Trivial snippets have no placeholder or are just the final placeholder. That means they\n      // are just text insertions and we don't need to merge the nested snippet into the existing\n      // snippet\n      const isTrivialSnippet = snippets[0].isTrivialSnippet;\n      if (!isTrivialSnippet) {\n        for (const snippet of this._snippets) {\n          snippet.merge(snippets);\n        }\n        console.assert(snippets.length === 0);\n      }\n      if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n        return this._move(undefined);\n      } else {\n        return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n      }\n    });\n  }\n  next() {\n    const newSelections = this._move(true);\n    this._editor.setSelections(newSelections);\n    this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n  }\n  prev() {\n    const newSelections = this._move(false);\n    this._editor.setSelections(newSelections);\n    this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n  }\n  _move(fwd) {\n    const selections = [];\n    for (const snippet of this._snippets) {\n      const oneSelection = snippet.move(fwd);\n      selections.push(...oneSelection);\n    }\n    return selections;\n  }\n  get isAtFirstPlaceholder() {\n    return this._snippets[0].isAtFirstPlaceholder;\n  }\n  get isAtLastPlaceholder() {\n    return this._snippets[0].isAtLastPlaceholder;\n  }\n  get hasPlaceholder() {\n    return this._snippets[0].hasPlaceholder;\n  }\n  get hasChoice() {\n    return this._snippets[0].hasChoice;\n  }\n  get activeChoice() {\n    return this._snippets[0].activeChoice;\n  }\n  isSelectionWithinPlaceholders() {\n    if (!this.hasPlaceholder) {\n      return false;\n    }\n    const selections = this._editor.getSelections();\n    if (selections.length < this._snippets.length) {\n      // this means we started snippet mode with N\n      // selections and have M (N > M) selections.\n      // So one snippet is without selection -> cancel\n      return false;\n    }\n    const allPossibleSelections = new Map();\n    for (const snippet of this._snippets) {\n      const possibleSelections = snippet.computePossibleSelections();\n      // for the first snippet find the placeholder (and its ranges)\n      // that contain at least one selection. for all remaining snippets\n      // the same placeholder (and their ranges) must be used.\n      if (allPossibleSelections.size === 0) {\n        for (const [index, ranges] of possibleSelections) {\n          ranges.sort(Range.compareRangesUsingStarts);\n          for (const selection of selections) {\n            if (ranges[0].containsRange(selection)) {\n              allPossibleSelections.set(index, []);\n              break;\n            }\n          }\n        }\n      }\n      if (allPossibleSelections.size === 0) {\n        // return false if we couldn't associate a selection to\n        // this (the first) snippet\n        return false;\n      }\n      // add selections from 'this' snippet so that we know all\n      // selections for this placeholder\n      allPossibleSelections.forEach((array, index) => {\n        array.push(...possibleSelections.get(index));\n      });\n    }\n    // sort selections (and later placeholder-ranges). then walk both\n    // arrays and make sure the placeholder-ranges contain the corresponding\n    // selection\n    selections.sort(Range.compareRangesUsingStarts);\n    for (const [index, ranges] of allPossibleSelections) {\n      if (ranges.length !== selections.length) {\n        allPossibleSelections.delete(index);\n        continue;\n      }\n      ranges.sort(Range.compareRangesUsingStarts);\n      for (let i = 0; i < ranges.length; i++) {\n        if (!ranges[i].containsRange(selections[i])) {\n          allPossibleSelections.delete(index);\n          continue;\n        }\n      }\n    }\n    // from all possible selections we have deleted those\n    // that don't match with the current selection. if we don't\n    // have any left, we don't have a selection anymore\n    return allPossibleSelections.size > 0;\n  }\n};\nSnippetSession = SnippetSession_1 = __decorate([__param(3, ILanguageConfigurationService)], SnippetSession);\nexport { SnippetSession };","import { hasDriveLetter } from './extpath.js';\nimport { isWindows } from './platform.js';\nexport function normalizeDriveLetter(path, isWindowsOS = isWindows) {\n  if (hasDriveLetter(path, isWindowsOS)) {\n    return path.charAt(0).toUpperCase() + path.slice(1);\n  }\n  return path;\n}\nlet normalizedUserHomeCached = Object.create(null);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, isEmptyWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n  'CURRENT_YEAR': true,\n  'CURRENT_YEAR_SHORT': true,\n  'CURRENT_MONTH': true,\n  'CURRENT_DATE': true,\n  'CURRENT_HOUR': true,\n  'CURRENT_MINUTE': true,\n  'CURRENT_SECOND': true,\n  'CURRENT_DAY_NAME': true,\n  'CURRENT_DAY_NAME_SHORT': true,\n  'CURRENT_MONTH_NAME': true,\n  'CURRENT_MONTH_NAME_SHORT': true,\n  'CURRENT_SECONDS_UNIX': true,\n  'CURRENT_TIMEZONE_OFFSET': true,\n  'SELECTION': true,\n  'CLIPBOARD': true,\n  'TM_SELECTED_TEXT': true,\n  'TM_CURRENT_LINE': true,\n  'TM_CURRENT_WORD': true,\n  'TM_LINE_INDEX': true,\n  'TM_LINE_NUMBER': true,\n  'TM_FILENAME': true,\n  'TM_FILENAME_BASE': true,\n  'TM_DIRECTORY': true,\n  'TM_FILEPATH': true,\n  'CURSOR_INDEX': true,\n  // 0-offset\n  'CURSOR_NUMBER': true,\n  // 1-offset\n  'RELATIVE_FILEPATH': true,\n  'BLOCK_COMMENT_START': true,\n  'BLOCK_COMMENT_END': true,\n  'LINE_COMMENT': true,\n  'WORKSPACE_NAME': true,\n  'WORKSPACE_FOLDER': true,\n  'RANDOM': true,\n  'RANDOM_HEX': true,\n  'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n  constructor(_delegates) {\n    this._delegates = _delegates;\n    //\n  }\n  resolve(variable) {\n    for (const delegate of this._delegates) {\n      const value = delegate.resolve(variable);\n      if (value !== undefined) {\n        return value;\n      }\n    }\n    return undefined;\n  }\n}\nexport class SelectionBasedVariableResolver {\n  constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n    this._model = _model;\n    this._selection = _selection;\n    this._selectionIdx = _selectionIdx;\n    this._overtypingCapturer = _overtypingCapturer;\n    //\n  }\n  resolve(variable) {\n    const {\n      name\n    } = variable;\n    if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n      let value = this._model.getValueInRange(this._selection) || undefined;\n      let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n      // If there was no selected text, try to get last overtyped text\n      if (!value && this._overtypingCapturer) {\n        const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n        if (info) {\n          value = info.value;\n          isMultiline = info.multiline;\n        }\n      }\n      if (value && isMultiline && variable.snippet) {\n        // Selection is a multiline string which we indentation we now\n        // need to adjust. We compare the indentation of this variable\n        // with the indentation at the editor position and add potential\n        // extra indentation to the value\n        const line = this._model.getLineContent(this._selection.startLineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n        let varLeadingWhitespace = lineLeadingWhitespace;\n        variable.snippet.walk(marker => {\n          if (marker === variable) {\n            return false;\n          }\n          if (marker instanceof Text) {\n            varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n          }\n          return true;\n        });\n        const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n        value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n      }\n      return value;\n    } else if (name === 'TM_CURRENT_LINE') {\n      return this._model.getLineContent(this._selection.positionLineNumber);\n    } else if (name === 'TM_CURRENT_WORD') {\n      const info = this._model.getWordAtPosition({\n        lineNumber: this._selection.positionLineNumber,\n        column: this._selection.positionColumn\n      });\n      return info && info.word || undefined;\n    } else if (name === 'TM_LINE_INDEX') {\n      return String(this._selection.positionLineNumber - 1);\n    } else if (name === 'TM_LINE_NUMBER') {\n      return String(this._selection.positionLineNumber);\n    } else if (name === 'CURSOR_INDEX') {\n      return String(this._selectionIdx);\n    } else if (name === 'CURSOR_NUMBER') {\n      return String(this._selectionIdx + 1);\n    }\n    return undefined;\n  }\n}\nexport class ModelBasedVariableResolver {\n  constructor(_labelService, _model) {\n    this._labelService = _labelService;\n    this._model = _model;\n    //\n  }\n  resolve(variable) {\n    const {\n      name\n    } = variable;\n    if (name === 'TM_FILENAME') {\n      return path.basename(this._model.uri.fsPath);\n    } else if (name === 'TM_FILENAME_BASE') {\n      const name = path.basename(this._model.uri.fsPath);\n      const idx = name.lastIndexOf('.');\n      if (idx <= 0) {\n        return name;\n      } else {\n        return name.slice(0, idx);\n      }\n    } else if (name === 'TM_DIRECTORY') {\n      if (path.dirname(this._model.uri.fsPath) === '.') {\n        return '';\n      }\n      return this._labelService.getUriLabel(dirname(this._model.uri));\n    } else if (name === 'TM_FILEPATH') {\n      return this._labelService.getUriLabel(this._model.uri);\n    } else if (name === 'RELATIVE_FILEPATH') {\n      return this._labelService.getUriLabel(this._model.uri, {\n        relative: true,\n        noPrefix: true\n      });\n    }\n    return undefined;\n  }\n}\nexport class ClipboardBasedVariableResolver {\n  constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n    this._readClipboardText = _readClipboardText;\n    this._selectionIdx = _selectionIdx;\n    this._selectionCount = _selectionCount;\n    this._spread = _spread;\n    //\n  }\n  resolve(variable) {\n    if (variable.name !== 'CLIPBOARD') {\n      return undefined;\n    }\n    const clipboardText = this._readClipboardText();\n    if (!clipboardText) {\n      return undefined;\n    }\n    // `spread` is assigning each cursor a line of the clipboard\n    // text whenever there the line count equals the cursor count\n    // and when enabled\n    if (this._spread) {\n      const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n      if (lines.length === this._selectionCount) {\n        return lines[this._selectionIdx];\n      }\n    }\n    return clipboardText;\n  }\n}\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\n  constructor(_model, _selection, _languageConfigurationService) {\n    this._model = _model;\n    this._selection = _selection;\n    this._languageConfigurationService = _languageConfigurationService;\n    //\n  }\n  resolve(variable) {\n    const {\n      name\n    } = variable;\n    const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n    const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n    if (!config) {\n      return undefined;\n    }\n    if (name === 'LINE_COMMENT') {\n      return config.lineCommentToken || undefined;\n    } else if (name === 'BLOCK_COMMENT_START') {\n      return config.blockCommentStartToken || undefined;\n    } else if (name === 'BLOCK_COMMENT_END') {\n      return config.blockCommentEndToken || undefined;\n    }\n    return undefined;\n  }\n};\nCommentBasedVariableResolver = __decorate([__param(2, ILanguageConfigurationService)], CommentBasedVariableResolver);\nexport { CommentBasedVariableResolver };\nexport class TimeBasedVariableResolver {\n  constructor() {\n    this._date = new Date();\n  }\n  static {\n    this.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\n  }\n  static {\n    this.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\n  }\n  static {\n    this.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\n  }\n  static {\n    this.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\n  }\n  resolve(variable) {\n    const {\n      name\n    } = variable;\n    if (name === 'CURRENT_YEAR') {\n      return String(this._date.getFullYear());\n    } else if (name === 'CURRENT_YEAR_SHORT') {\n      return String(this._date.getFullYear()).slice(-2);\n    } else if (name === 'CURRENT_MONTH') {\n      return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n    } else if (name === 'CURRENT_DATE') {\n      return String(this._date.getDate().valueOf()).padStart(2, '0');\n    } else if (name === 'CURRENT_HOUR') {\n      return String(this._date.getHours().valueOf()).padStart(2, '0');\n    } else if (name === 'CURRENT_MINUTE') {\n      return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n    } else if (name === 'CURRENT_SECOND') {\n      return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n    } else if (name === 'CURRENT_DAY_NAME') {\n      return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n    } else if (name === 'CURRENT_DAY_NAME_SHORT') {\n      return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n    } else if (name === 'CURRENT_MONTH_NAME') {\n      return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n    } else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n      return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n    } else if (name === 'CURRENT_SECONDS_UNIX') {\n      return String(Math.floor(this._date.getTime() / 1000));\n    } else if (name === 'CURRENT_TIMEZONE_OFFSET') {\n      const rawTimeOffset = this._date.getTimezoneOffset();\n      const sign = rawTimeOffset > 0 ? '-' : '+';\n      const hours = Math.trunc(Math.abs(rawTimeOffset / 60));\n      const hoursString = hours < 10 ? '0' + hours : hours;\n      const minutes = Math.abs(rawTimeOffset) - hours * 60;\n      const minutesString = minutes < 10 ? '0' + minutes : minutes;\n      return sign + hoursString + ':' + minutesString;\n    }\n    return undefined;\n  }\n}\nexport class WorkspaceBasedVariableResolver {\n  constructor(_workspaceService) {\n    this._workspaceService = _workspaceService;\n    //\n  }\n  resolve(variable) {\n    if (!this._workspaceService) {\n      return undefined;\n    }\n    const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n    if (isEmptyWorkspaceIdentifier(workspaceIdentifier)) {\n      return undefined;\n    }\n    if (variable.name === 'WORKSPACE_NAME') {\n      return this._resolveWorkspaceName(workspaceIdentifier);\n    } else if (variable.name === 'WORKSPACE_FOLDER') {\n      return this._resoveWorkspacePath(workspaceIdentifier);\n    }\n    return undefined;\n  }\n  _resolveWorkspaceName(workspaceIdentifier) {\n    if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n      return path.basename(workspaceIdentifier.uri.path);\n    }\n    let filename = path.basename(workspaceIdentifier.configPath.path);\n    if (filename.endsWith(WORKSPACE_EXTENSION)) {\n      filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n    }\n    return filename;\n  }\n  _resoveWorkspacePath(workspaceIdentifier) {\n    if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n      return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n    }\n    const filename = path.basename(workspaceIdentifier.configPath.path);\n    let folderpath = workspaceIdentifier.configPath.fsPath;\n    if (folderpath.endsWith(filename)) {\n      folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n    }\n    return folderpath ? normalizeDriveLetter(folderpath) : '/';\n  }\n}\nexport class RandomBasedVariableResolver {\n  resolve(variable) {\n    const {\n      name\n    } = variable;\n    if (name === 'RANDOM') {\n      return Math.random().toString().slice(-6);\n    } else if (name === 'RANDOM_HEX') {\n      return Math.random().toString(16).slice(-6);\n    } else if (name === 'UUID') {\n      return generateUuid();\n    }\n    return undefined;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { compareBy, numberComparator } from '../../../../../base/common/arrays.js';\nimport { findFirstMax } from '../../../../../base/common/arraysFind.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { SingleTextEdit } from '../../../../common/core/textEdit.js';\nimport { SelectedSuggestionInfo } from '../../../../common/languages.js';\nimport { singleTextEditAugments, singleTextRemoveCommonPrefix } from './singleTextEdit.js';\nimport { SnippetParser } from '../../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../../suggest/browser/suggestController.js';\nexport class SuggestWidgetAdaptor extends Disposable {\n  get selectedItem() {\n    return this._currentSuggestItemInfo;\n  }\n  constructor(editor, suggestControllerPreselector, onWillAccept) {\n    super();\n    this.editor = editor;\n    this.suggestControllerPreselector = suggestControllerPreselector;\n    this.onWillAccept = onWillAccept;\n    this.isSuggestWidgetVisible = false;\n    this.isShiftKeyPressed = false;\n    this._isActive = false;\n    this._currentSuggestItemInfo = undefined;\n    this._onDidSelectedItemChange = this._register(new Emitter());\n    this.onDidSelectedItemChange = this._onDidSelectedItemChange.event;\n    // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n    this._register(editor.onKeyDown(e => {\n      if (e.shiftKey && !this.isShiftKeyPressed) {\n        this.isShiftKeyPressed = true;\n        this.update(this._isActive);\n      }\n    }));\n    this._register(editor.onKeyUp(e => {\n      if (e.shiftKey && this.isShiftKeyPressed) {\n        this.isShiftKeyPressed = false;\n        this.update(this._isActive);\n      }\n    }));\n    const suggestController = SuggestController.get(this.editor);\n    if (suggestController) {\n      this._register(suggestController.registerSelector({\n        priority: 100,\n        select: (model, pos, suggestItems) => {\n          const textModel = this.editor.getModel();\n          if (!textModel) {\n            // Should not happen\n            return -1;\n          }\n          const i = this.suggestControllerPreselector();\n          const itemToPreselect = i ? singleTextRemoveCommonPrefix(i, textModel) : undefined;\n          if (!itemToPreselect) {\n            return -1;\n          }\n          const position = Position.lift(pos);\n          const candidates = suggestItems.map((suggestItem, index) => {\n            const suggestItemInfo = SuggestItemInfo.fromSuggestion(suggestController, textModel, position, suggestItem, this.isShiftKeyPressed);\n            const suggestItemTextEdit = singleTextRemoveCommonPrefix(suggestItemInfo.toSingleTextEdit(), textModel);\n            const valid = singleTextEditAugments(itemToPreselect, suggestItemTextEdit);\n            return {\n              index,\n              valid,\n              prefixLength: suggestItemTextEdit.text.length,\n              suggestItem\n            };\n          }).filter(item => item && item.valid && item.prefixLength > 0);\n          const result = findFirstMax(candidates, compareBy(s => s.prefixLength, numberComparator));\n          return result ? result.index : -1;\n        }\n      }));\n      let isBoundToSuggestWidget = false;\n      const bindToSuggestWidget = () => {\n        if (isBoundToSuggestWidget) {\n          return;\n        }\n        isBoundToSuggestWidget = true;\n        this._register(suggestController.widget.value.onDidShow(() => {\n          this.isSuggestWidgetVisible = true;\n          this.update(true);\n        }));\n        this._register(suggestController.widget.value.onDidHide(() => {\n          this.isSuggestWidgetVisible = false;\n          this.update(false);\n        }));\n        this._register(suggestController.widget.value.onDidFocus(() => {\n          this.isSuggestWidgetVisible = true;\n          this.update(true);\n        }));\n      };\n      this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n        bindToSuggestWidget();\n      }));\n      this._register(suggestController.onWillInsertSuggestItem(e => {\n        const position = this.editor.getPosition();\n        const model = this.editor.getModel();\n        if (!position || !model) {\n          return undefined;\n        }\n        const suggestItemInfo = SuggestItemInfo.fromSuggestion(suggestController, model, position, e.item, this.isShiftKeyPressed);\n        this.onWillAccept(suggestItemInfo);\n      }));\n    }\n    this.update(this._isActive);\n  }\n  update(newActive) {\n    const newInlineCompletion = this.getSuggestItemInfo();\n    if (this._isActive !== newActive || !suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n      this._isActive = newActive;\n      this._currentSuggestItemInfo = newInlineCompletion;\n      this._onDidSelectedItemChange.fire();\n    }\n  }\n  getSuggestItemInfo() {\n    const suggestController = SuggestController.get(this.editor);\n    if (!suggestController || !this.isSuggestWidgetVisible) {\n      return undefined;\n    }\n    const focusedItem = suggestController.widget.value.getFocusedItem();\n    const position = this.editor.getPosition();\n    const model = this.editor.getModel();\n    if (!focusedItem || !position || !model) {\n      return undefined;\n    }\n    return SuggestItemInfo.fromSuggestion(suggestController, model, position, focusedItem.item, this.isShiftKeyPressed);\n  }\n  stopForceRenderingAbove() {\n    const suggestController = SuggestController.get(this.editor);\n    suggestController?.stopForceRenderingAbove();\n  }\n  forceRenderingAbove() {\n    const suggestController = SuggestController.get(this.editor);\n    suggestController?.forceRenderingAbove();\n  }\n}\nexport class SuggestItemInfo {\n  static fromSuggestion(suggestController, model, position, item, toggleMode) {\n    let {\n      insertText\n    } = item.completion;\n    let isSnippetText = false;\n    if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\n      const snippet = new SnippetParser().parse(insertText);\n      if (snippet.children.length < 100) {\n        // Adjust whitespace is expensive.\n        SnippetSession.adjustWhitespace(model, position, true, snippet);\n      }\n      insertText = snippet.toString();\n      isSnippetText = true;\n    }\n    const info = suggestController.getOverwriteInfo(item, toggleMode);\n    return new SuggestItemInfo(Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))), insertText, item.completion.kind, isSnippetText);\n  }\n  constructor(range, insertText, completionItemKind, isSnippetText) {\n    this.range = range;\n    this.insertText = insertText;\n    this.completionItemKind = completionItemKind;\n    this.isSnippetText = isSnippetText;\n  }\n  equals(other) {\n    return this.range.equalsRange(other.range) && this.insertText === other.insertText && this.completionItemKind === other.completionItemKind && this.isSnippetText === other.isSnippetText;\n  }\n  toSelectedSuggestionInfo() {\n    return new SelectedSuggestionInfo(this.range, this.insertText, this.completionItemKind, this.isSnippetText);\n  }\n  toSingleTextEdit() {\n    return new SingleTextEdit(this.range, this.insertText);\n  }\n}\nfunction suggestItemInfoEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.equals(b);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SuggestController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { WindowIdleValue, getWindow } from '../../../../base/browser/dom.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\nclass LineSuffix {\n  constructor(_model, _position) {\n    this._model = _model;\n    this._position = _position;\n    this._decorationOptions = ModelDecorationOptions.register({\n      description: 'suggest-line-suffix',\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n    });\n    // spy on what's happening right of the cursor. two cases:\n    // 1. end of line -> check that it's still end of line\n    // 2. mid of line -> add a marker and compute the delta\n    const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n    if (maxColumn !== _position.column) {\n      const offset = _model.getOffsetAt(_position);\n      const end = _model.getPositionAt(offset + 1);\n      _model.changeDecorations(accessor => {\n        if (this._marker) {\n          accessor.removeDecoration(this._marker);\n        }\n        this._marker = accessor.addDecoration(Range.fromPositions(_position, end), this._decorationOptions);\n      });\n    }\n  }\n  dispose() {\n    if (this._marker && !this._model.isDisposed()) {\n      this._model.changeDecorations(accessor => {\n        accessor.removeDecoration(this._marker);\n        this._marker = undefined;\n      });\n    }\n  }\n  delta(position) {\n    if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n      // bail out early if things seems fishy\n      return 0;\n    }\n    // read the marker (in case suggest was triggered at line end) or compare\n    // the cursor to the line end.\n    if (this._marker) {\n      const range = this._model.getDecorationRange(this._marker);\n      const end = this._model.getOffsetAt(range.getStartPosition());\n      return end - this._model.getOffsetAt(position);\n    } else {\n      return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n    }\n  }\n}\nlet SuggestController = /*#__PURE__*/(() => {\n  let SuggestController = class SuggestController {\n    static {\n      SuggestController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.suggestController';\n    }\n    static get(editor) {\n      return editor.getContribution(SuggestController_1.ID);\n    }\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n      this._memoryService = _memoryService;\n      this._commandService = _commandService;\n      this._contextKeyService = _contextKeyService;\n      this._instantiationService = _instantiationService;\n      this._logService = _logService;\n      this._telemetryService = _telemetryService;\n      this._lineSuffix = new MutableDisposable();\n      this._toDispose = new DisposableStore();\n      this._selectors = new PriorityRegistry(s => s.priority);\n      this._onWillInsertSuggestItem = new Emitter();\n      this.onWillInsertSuggestItem = this._onWillInsertSuggestItem.event;\n      this.editor = editor;\n      this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n      // default selector\n      this._selectors.register({\n        priority: 0,\n        select: (model, pos, items) => this._memoryService.select(model, pos, items)\n      });\n      // context key: update insert/replace mode\n      const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n      ctxInsertMode.set(editor.getOption(119 /* EditorOption.suggest */).insertMode);\n      this._toDispose.add(this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(119 /* EditorOption.suggest */).insertMode)));\n      this.widget = this._toDispose.add(new WindowIdleValue(getWindow(editor.getDomNode()), () => {\n        const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n        this._toDispose.add(widget);\n        this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\n        // Wire up logic to accept a suggestion on certain characters\n        const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n        this._toDispose.add(commitCharacterController);\n        // Wire up makes text edit context key\n        const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n        const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n        const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n        this._toDispose.add(toDisposable(() => {\n          ctxMakesTextEdit.reset();\n          ctxHasInsertAndReplace.reset();\n          ctxCanResolve.reset();\n        }));\n        this._toDispose.add(widget.onDidFocus(({\n          item\n        }) => {\n          // (ctx: makesTextEdit)\n          const position = this.editor.getPosition();\n          const startColumn = item.editStart.column;\n          const endColumn = position.column;\n          let value = true;\n          if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart' && this.model.state === 2 /* State.Auto */ && !item.completion.additionalTextEdits && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) && endColumn - startColumn === item.completion.insertText.length) {\n            const oldText = this.editor.getModel().getValueInRange({\n              startLineNumber: position.lineNumber,\n              startColumn,\n              endLineNumber: position.lineNumber,\n              endColumn\n            });\n            value = oldText !== item.completion.insertText;\n          }\n          ctxMakesTextEdit.set(value);\n          // (ctx: hasInsertAndReplaceRange)\n          ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n          // (ctx: canResolve)\n          ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n        }));\n        this._toDispose.add(widget.onDetailsKeyDown(e => {\n          // cmd + c on macOS, ctrl + c on Win / Linux\n          if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) || platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */))) {\n            e.stopPropagation();\n            return;\n          }\n          if (!e.toKeyCodeChord().isModifierKey()) {\n            this.editor.focus();\n          }\n        }));\n        return widget;\n      }));\n      // Wire up text overtyping capture\n      this._overtypingCapturer = this._toDispose.add(new WindowIdleValue(getWindow(editor.getDomNode()), () => {\n        return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n      }));\n      this._alternatives = this._toDispose.add(new WindowIdleValue(getWindow(editor.getDomNode()), () => {\n        return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n      }));\n      this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n      this._toDispose.add(this.model.onDidTrigger(e => {\n        this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n        this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n      }));\n      this._toDispose.add(this.model.onDidSuggest(e => {\n        if (e.triggerOptions.shy) {\n          return;\n        }\n        let index = -1;\n        for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n          index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n          if (index !== -1) {\n            break;\n          }\n        }\n        if (index === -1) {\n          index = 0;\n        }\n        if (this.model.state === 0 /* State.Idle */) {\n          // selecting an item can \"pump\" out selection/cursor change events\n          // which can cancel suggest halfway through this function. therefore\n          // we need to check again and bail if the session has been canceled\n          return;\n        }\n        let noFocus = false;\n        if (e.triggerOptions.auto) {\n          // don't \"focus\" item when configured to do\n          const options = this.editor.getOption(119 /* EditorOption.suggest */);\n          if (options.selectionMode === 'never' || options.selectionMode === 'always') {\n            // simple: always or never\n            noFocus = options.selectionMode === 'never';\n          } else if (options.selectionMode === 'whenTriggerCharacter') {\n            // on with trigger character\n            noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\n          } else if (options.selectionMode === 'whenQuickSuggestion') {\n            // without trigger character or when refiltering\n            noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\n          }\n        }\n        this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\n      }));\n      this._toDispose.add(this.model.onDidCancel(e => {\n        if (!e.retrigger) {\n          this.widget.value.hideWidget();\n        }\n      }));\n      this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n        if (!_sticky) {\n          this.model.cancel();\n          this.model.clear();\n        }\n      }));\n      // Manage the acceptSuggestionsOnEnter context key\n      const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n      const updateFromConfig = () => {\n        const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n        acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n      };\n      this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n      updateFromConfig();\n    }\n    dispose() {\n      this._alternatives.dispose();\n      this._toDispose.dispose();\n      this.widget.dispose();\n      this.model.dispose();\n      this._lineSuffix.dispose();\n      this._onWillInsertSuggestItem.dispose();\n    }\n    _insertSuggestion(event, flags) {\n      if (!event || !event.item) {\n        this._alternatives.value.reset();\n        this.model.cancel();\n        this.model.clear();\n        return;\n      }\n      if (!this.editor.hasModel()) {\n        return;\n      }\n      const snippetController = SnippetController2.get(this.editor);\n      if (!snippetController) {\n        return;\n      }\n      this._onWillInsertSuggestItem.fire({\n        item: event.item\n      });\n      const model = this.editor.getModel();\n      const modelVersionNow = model.getAlternativeVersionId();\n      const {\n        item\n      } = event;\n      //\n      const tasks = [];\n      const cts = new CancellationTokenSource();\n      // pushing undo stops *before* additional text edits and\n      // *after* the main edit\n      if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n        this.editor.pushUndoStop();\n      }\n      // compute overwrite[Before|After] deltas BEFORE applying extra edits\n      const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n      // keep item in memory\n      this._memoryService.memorize(model, this.editor.getPosition(), item);\n      const isResolved = item.isResolved;\n      // telemetry data points: duration of command execution, info about async additional edits (-1=n/a, -2=none, 1=success, 0=failed)\n      let _commandExectionDuration = -1;\n      let _additionalEditsAppliedAsync = -1;\n      if (Array.isArray(item.completion.additionalTextEdits)) {\n        // cancel -> stops all listening and closes widget\n        this.model.cancel();\n        // sync additional edits\n        const scrollState = StableEditorScrollState.capture(this.editor);\n        this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => {\n          let range = Range.lift(edit.range);\n          if (range.startLineNumber === item.position.lineNumber && range.startColumn > item.position.column) {\n            // shift additional edit when it is \"after\" the completion insertion position\n            const columnDelta = this.editor.getPosition().column - item.position.column;\n            const startColumnDelta = columnDelta;\n            const endColumnDelta = Range.spansMultipleLines(range) ? 0 : columnDelta;\n            range = new Range(range.startLineNumber, range.startColumn + startColumnDelta, range.endLineNumber, range.endColumn + endColumnDelta);\n          }\n          return EditOperation.replaceMove(range, edit.text);\n        }));\n        scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n      } else if (!isResolved) {\n        // async additional edits\n        const sw = new StopWatch();\n        let position;\n        const docListener = model.onDidChangeContent(e => {\n          if (e.isFlush) {\n            cts.cancel();\n            docListener.dispose();\n            return;\n          }\n          for (const change of e.changes) {\n            const thisPosition = Range.getEndPosition(change.range);\n            if (!position || Position.isBefore(thisPosition, position)) {\n              position = thisPosition;\n            }\n          }\n        });\n        const oldFlags = flags;\n        flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n        let didType = false;\n        const typeListener = this.editor.onWillType(() => {\n          typeListener.dispose();\n          didType = true;\n          if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n          }\n        });\n        tasks.push(item.resolve(cts.token).then(() => {\n          if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n            return undefined;\n          }\n          if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n            return false;\n          }\n          if (didType) {\n            this.editor.pushUndoStop();\n          }\n          const scrollState = StableEditorScrollState.capture(this.editor);\n          this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n          scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n          if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n          }\n          return true;\n        }).then(applied => {\n          this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n          _additionalEditsAppliedAsync = applied === true ? 1 : applied === false ? 0 : -2;\n        }).finally(() => {\n          docListener.dispose();\n          typeListener.dispose();\n        }));\n      }\n      let {\n        insertText\n      } = item.completion;\n      if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n        insertText = SnippetParser.escape(insertText);\n      }\n      // cancel -> stops all listening and closes widget\n      this.model.cancel();\n      snippetController.insert(insertText, {\n        overwriteBefore: info.overwriteBefore,\n        overwriteAfter: info.overwriteAfter,\n        undoStopBefore: false,\n        undoStopAfter: false,\n        adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n        clipboardText: event.model.clipboardText,\n        overtypingCapturer: this._overtypingCapturer.value\n      });\n      if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n        this.editor.pushUndoStop();\n      }\n      if (item.completion.command) {\n        if (item.completion.command.id === TriggerSuggestAction.id) {\n          // retigger\n          this.model.trigger({\n            auto: true,\n            retrigger: true\n          });\n        } else {\n          // exec command, done\n          const sw = new StopWatch();\n          tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(e => {\n            if (item.completion.extensionId) {\n              onUnexpectedExternalError(e);\n            } else {\n              onUnexpectedError(e);\n            }\n          }).finally(() => {\n            _commandExectionDuration = sw.elapsed();\n          }));\n        }\n      }\n      if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n        this._alternatives.value.set(event, next => {\n          // cancel resolving of additional edits\n          cts.cancel();\n          // this is not so pretty. when inserting the 'next'\n          // suggestion we undo until we are at the state at\n          // which we were before inserting the previous suggestion...\n          while (model.canUndo()) {\n            if (modelVersionNow !== model.getAlternativeVersionId()) {\n              model.undo();\n            }\n            this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n            break;\n          }\n        });\n      }\n      this._alertCompletionItem(item);\n      // clear only now - after all tasks are done\n      Promise.all(tasks).finally(() => {\n        this._reportSuggestionAcceptedTelemetry(item, model, isResolved, _commandExectionDuration, _additionalEditsAppliedAsync, event.index, event.model.items);\n        this.model.clear();\n        cts.dispose();\n      });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, itemResolved, commandExectionDuration, additionalEditsAppliedAsync, index, completionItems) {\n      if (Math.floor(Math.random() * 100) === 0) {\n        // throttle telemetry event because accepting completions happens a lot\n        return;\n      }\n      const labelMap = new Map();\n      for (let i = 0; i < Math.min(30, completionItems.length); i++) {\n        const label = completionItems[i].textLabel;\n        if (labelMap.has(label)) {\n          labelMap.get(label).push(i);\n        } else {\n          labelMap.set(label, [i]);\n        }\n      }\n      const firstIndexArray = labelMap.get(item.textLabel);\n      const hasDuplicates = firstIndexArray && firstIndexArray.length > 1;\n      const firstIndex = hasDuplicates ? firstIndexArray[0] : -1;\n      this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n        extensionId: item.extensionId?.value ?? 'unknown',\n        providerId: item.provider._debugDisplayName ?? 'unknown',\n        kind: item.completion.kind,\n        basenameHash: hash(basename(model.uri)).toString(16),\n        languageId: model.getLanguageId(),\n        fileExtension: extname(model.uri),\n        resolveInfo: !item.provider.resolveCompletionItem ? -1 : itemResolved ? 1 : 0,\n        resolveDuration: item.resolveDuration,\n        commandDuration: commandExectionDuration,\n        additionalEditsAsync: additionalEditsAppliedAsync,\n        index,\n        firstIndex\n      });\n    }\n    getOverwriteInfo(item, toggleMode) {\n      assertType(this.editor.hasModel());\n      let replace = this.editor.getOption(119 /* EditorOption.suggest */).insertMode === 'replace';\n      if (toggleMode) {\n        replace = !replace;\n      }\n      const overwriteBefore = item.position.column - item.editStart.column;\n      const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n      const columnDelta = this.editor.getPosition().column - item.position.column;\n      const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n      return {\n        overwriteBefore: overwriteBefore + columnDelta,\n        overwriteAfter: overwriteAfter + suffixDelta\n      };\n    }\n    _alertCompletionItem(item) {\n      if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n        const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n        alert(msg);\n      }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter) {\n      if (this.editor.hasModel()) {\n        this.model.trigger({\n          auto: auto ?? false,\n          completionOptions: {\n            providerFilter: onlyFrom,\n            kindFilter: noFilter ? new Set() : undefined\n          }\n        });\n        this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n      }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n      if (!this.editor.hasModel()) {\n        return;\n      }\n      const positionNow = this.editor.getPosition();\n      const fallback = () => {\n        if (positionNow.equals(this.editor.getPosition())) {\n          this._commandService.executeCommand(arg.fallback);\n        }\n      };\n      const makesTextEdit = item => {\n        if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n          // snippet, other editor -> makes edit\n          return true;\n        }\n        const position = this.editor.getPosition();\n        const startColumn = item.editStart.column;\n        const endColumn = position.column;\n        if (endColumn - startColumn !== item.completion.insertText.length) {\n          // unequal lengths -> makes edit\n          return true;\n        }\n        const textNow = this.editor.getModel().getValueInRange({\n          startLineNumber: position.lineNumber,\n          startColumn,\n          endLineNumber: position.lineNumber,\n          endColumn\n        });\n        // unequal text -> makes edit\n        return textNow !== item.completion.insertText;\n      };\n      Event.once(this.model.onDidTrigger)(_ => {\n        // wait for trigger because only then the cancel-event is trustworthy\n        const listener = [];\n        Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n          // retrigger or cancel -> try to type default text\n          dispose(listener);\n          fallback();\n        }, undefined, listener);\n        this.model.onDidSuggest(({\n          completionModel\n        }) => {\n          dispose(listener);\n          if (completionModel.items.length === 0) {\n            fallback();\n            return;\n          }\n          const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n          const item = completionModel.items[index];\n          if (!makesTextEdit(item)) {\n            fallback();\n            return;\n          }\n          this.editor.pushUndoStop();\n          this._insertSuggestion({\n            index,\n            item,\n            model: completionModel\n          }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n        }, undefined, listener);\n      });\n      this.model.trigger({\n        auto: false,\n        shy: true\n      });\n      this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n      this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n      const item = this.widget.value.getFocusedItem();\n      let flags = 0;\n      if (keepAlternativeSuggestions) {\n        flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n      }\n      if (alternativeOverwriteConfig) {\n        flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n      }\n      this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n      this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n      this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n      this.model.cancel();\n      this.model.clear();\n      this.widget.value.hideWidget();\n    }\n    focusSuggestion() {\n      this.widget.value.focusSelected();\n    }\n    selectNextSuggestion() {\n      this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n      this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n      this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n      this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n      this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n      this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n      this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n      this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n      this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n      this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n      this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n      if (!this.widget.isInitialized) {\n        // This method has no effect if the widget is not initialized yet.\n        return;\n      }\n      this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n      return this._selectors.register(selector);\n    }\n  };\n  return SuggestController;\n})();\nSuggestController = SuggestController_1 = __decorate([__param(1, ISuggestMemoryService), __param(2, ICommandService), __param(3, IContextKeyService), __param(4, IInstantiationService), __param(5, ILogService), __param(6, ITelemetryService)], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n  constructor(prioritySelector) {\n    this.prioritySelector = prioritySelector;\n    this._items = new Array();\n  }\n  register(value) {\n    if (this._items.indexOf(value) !== -1) {\n      throw new Error('Value is already registered');\n    }\n    this._items.push(value);\n    this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n    return {\n      dispose: () => {\n        const idx = this._items.indexOf(value);\n        if (idx >= 0) {\n          this._items.splice(idx, 1);\n        }\n      }\n    };\n  }\n  get itemsOrderedByPriorityDesc() {\n    return this._items;\n  }\n}\nexport let TriggerSuggestAction = /*#__PURE__*/(() => {\n  class TriggerSuggestAction extends EditorAction {\n    static {\n      this.id = 'editor.action.triggerSuggest';\n    }\n    constructor() {\n      super({\n        id: TriggerSuggestAction.id,\n        label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n        alias: 'Trigger Suggest',\n        precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\n        kbOpts: {\n          kbExpr: EditorContextKeys.textInputFocus,\n          primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n          mac: {\n            primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */,\n            secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */]\n          },\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n      });\n    }\n    run(_accessor, editor, args) {\n      const controller = SuggestController.get(editor);\n      if (!controller) {\n        return;\n      }\n      let auto;\n      if (args && typeof args === 'object') {\n        if (args.auto === true) {\n          auto = true;\n        }\n      }\n      controller.triggerSuggest(undefined, auto, undefined);\n    }\n  }\n  return TriggerSuggestAction;\n})();\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptSelectedSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n  handler(x) {\n    x.acceptSelectedSuggestion(true, false);\n  },\n  kbOpts: [{\n    // normal tab\n    primary: 2 /* KeyCode.Tab */,\n    kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    weight\n  }, {\n    // accept on enter has special rules\n    primary: 3 /* KeyCode.Enter */,\n    kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n    weight\n  }],\n  menuOpts: [{\n    menuId: suggestWidgetStatusbarMenu,\n    title: nls.localize('accept.insert', \"Insert\"),\n    group: 'left',\n    order: 1,\n    when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n  }, {\n    menuId: suggestWidgetStatusbarMenu,\n    title: nls.localize('accept.insert', \"Insert\"),\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n  }, {\n    menuId: suggestWidgetStatusbarMenu,\n    title: nls.localize('accept.replace', \"Replace\"),\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n  }]\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptAlternativeSelectedSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n    secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */]\n  },\n  handler(x) {\n    x.acceptSelectedSuggestion(false, true);\n  },\n  menuOpts: [{\n    menuId: suggestWidgetStatusbarMenu,\n    group: 'left',\n    order: 2,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n    title: nls.localize('accept.replace', \"Replace\")\n  }, {\n    menuId: suggestWidgetStatusbarMenu,\n    group: 'left',\n    order: 2,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n    title: nls.localize('accept.insert', \"Insert\")\n  }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n  id: 'hideSuggestWidget',\n  precondition: SuggestContext.Visible,\n  handler: x => x.cancelSuggestWidget(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectNextSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 18 /* KeyCode.DownArrow */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n    mac: {\n      primary: 18 /* KeyCode.DownArrow */,\n      secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */]\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectNextPageSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 12 /* KeyCode.PageDown */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectLastSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectPrevSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 16 /* KeyCode.UpArrow */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n    mac: {\n      primary: 16 /* KeyCode.UpArrow */,\n      secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */]\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectPrevPageSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 11 /* KeyCode.PageUp */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectFirstSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n  handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'focusSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n  handler: x => x.focusSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n    mac: {\n      primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */,\n      secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */]\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'focusAndAcceptSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n  handler: c => {\n    c.focusSuggestion();\n    c.acceptSelectedSuggestion(true, false);\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionDetails',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n  handler: x => x.toggleSuggestionDetails(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n    secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n    mac: {\n      primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */,\n      secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */]\n    }\n  },\n  menuOpts: [{\n    menuId: suggestWidgetStatusbarMenu,\n    group: 'right',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n    title: nls.localize('detail.more', \"Show Less\")\n  }, {\n    menuId: suggestWidgetStatusbarMenu,\n    group: 'right',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n    title: nls.localize('detail.less', \"Show More\")\n  }]\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleExplainMode',\n  precondition: SuggestContext.Visible,\n  handler: x => x.toggleExplainMode(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionFocus',\n  precondition: SuggestContext.Visible,\n  handler: x => x.toggleSuggestionFocus(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n    mac: {\n      primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */\n    }\n  }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertBestCompletion',\n  precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: (x, arg) => {\n    x.triggerSuggestAndAcceptBest(isObject(arg) ? {\n      fallback: 'tab',\n      ...arg\n    } : {\n      fallback: 'tab'\n    });\n  },\n  kbOpts: {\n    weight,\n    primary: 2 /* KeyCode.Tab */\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertNextSuggestion',\n  precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: x => x.acceptNextSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2 /* KeyCode.Tab */\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertPrevSuggestion',\n  precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: x => x.acceptPrevSuggestion(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n  }\n}));\nregisterEditorAction(class extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.resetSuggestSize',\n      label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n      alias: 'Reset Suggest Widget Size',\n      precondition: undefined\n    });\n  }\n  run(_accessor, editor) {\n    SuggestController.get(editor)?.resetWidgetSize();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SuggestMemoryService_1;\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n  constructor(name) {\n    this.name = name;\n  }\n  select(model, pos, items) {\n    if (items.length === 0) {\n      return 0;\n    }\n    const topScore = items[0].score[0];\n    for (let i = 0; i < items.length; i++) {\n      const {\n        score,\n        completion: suggestion\n      } = items[i];\n      if (score[0] !== topScore) {\n        // stop when leaving the group of top matches\n        break;\n      }\n      if (suggestion.preselect) {\n        // stop when seeing an auto-select-item\n        return i;\n      }\n    }\n    return 0;\n  }\n}\nexport class NoMemory extends Memory {\n  constructor() {\n    super('first');\n  }\n  memorize(model, pos, item) {\n    // no-op\n  }\n  toJSON() {\n    return undefined;\n  }\n  fromJSON() {\n    //\n  }\n}\nexport class LRUMemory extends Memory {\n  constructor() {\n    super('recentlyUsed');\n    this._cache = new LRUCache(300, 0.66);\n    this._seq = 0;\n  }\n  memorize(model, pos, item) {\n    const key = `${model.getLanguageId()}/${item.textLabel}`;\n    this._cache.set(key, {\n      touch: this._seq++,\n      type: item.completion.kind,\n      insertText: item.completion.insertText\n    });\n  }\n  select(model, pos, items) {\n    if (items.length === 0) {\n      return 0;\n    }\n    const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n    if (/\\s$/.test(lineSuffix)) {\n      return super.select(model, pos, items);\n    }\n    const topScore = items[0].score[0];\n    let indexPreselect = -1;\n    let indexRecency = -1;\n    let seq = -1;\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].score[0] !== topScore) {\n        // consider only top items\n        break;\n      }\n      const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n      const item = this._cache.peek(key);\n      if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n        seq = item.touch;\n        indexRecency = i;\n      }\n      if (items[i].completion.preselect && indexPreselect === -1) {\n        // stop when seeing an auto-select-item\n        return indexPreselect = i;\n      }\n    }\n    if (indexRecency !== -1) {\n      return indexRecency;\n    } else if (indexPreselect !== -1) {\n      return indexPreselect;\n    } else {\n      return 0;\n    }\n  }\n  toJSON() {\n    return this._cache.toJSON();\n  }\n  fromJSON(data) {\n    this._cache.clear();\n    const seq = 0;\n    for (const [key, value] of data) {\n      value.touch = seq;\n      value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n      this._cache.set(key, value);\n    }\n    this._seq = this._cache.size;\n  }\n}\nexport class PrefixMemory extends Memory {\n  constructor() {\n    super('recentlyUsedByPrefix');\n    this._trie = TernarySearchTree.forStrings();\n    this._seq = 0;\n  }\n  memorize(model, pos, item) {\n    const {\n      word\n    } = model.getWordUntilPosition(pos);\n    const key = `${model.getLanguageId()}/${word}`;\n    this._trie.set(key, {\n      type: item.completion.kind,\n      insertText: item.completion.insertText,\n      touch: this._seq++\n    });\n  }\n  select(model, pos, items) {\n    const {\n      word\n    } = model.getWordUntilPosition(pos);\n    if (!word) {\n      return super.select(model, pos, items);\n    }\n    const key = `${model.getLanguageId()}/${word}`;\n    let item = this._trie.get(key);\n    if (!item) {\n      item = this._trie.findSubstr(key);\n    }\n    if (item) {\n      for (let i = 0; i < items.length; i++) {\n        const {\n          kind,\n          insertText\n        } = items[i].completion;\n        if (kind === item.type && insertText === item.insertText) {\n          return i;\n        }\n      }\n    }\n    return super.select(model, pos, items);\n  }\n  toJSON() {\n    const entries = [];\n    this._trie.forEach((value, key) => entries.push([key, value]));\n    // sort by last recently used (touch), then\n    // take the top 200 item and normalize their\n    // touch\n    entries.sort((a, b) => -(a[1].touch - b[1].touch)).forEach((value, i) => value[1].touch = i);\n    return entries.slice(0, 200);\n  }\n  fromJSON(data) {\n    this._trie.clear();\n    if (data.length > 0) {\n      this._seq = data[0][1].touch + 1;\n      for (const [key, value] of data) {\n        value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n        this._trie.set(key, value);\n      }\n    }\n  }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n  static {\n    SuggestMemoryService_1 = this;\n  }\n  static {\n    this._strategyCtors = new Map([['recentlyUsedByPrefix', PrefixMemory], ['recentlyUsed', LRUMemory], ['first', NoMemory]]);\n  }\n  static {\n    this._storagePrefix = 'suggest/memories';\n  }\n  constructor(_storageService, _configService) {\n    this._storageService = _storageService;\n    this._configService = _configService;\n    this._disposables = new DisposableStore();\n    this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n    this._disposables.add(_storageService.onWillSaveState(e => {\n      if (e.reason === WillSaveStateReason.SHUTDOWN) {\n        this._saveState();\n      }\n    }));\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._persistSoon.dispose();\n  }\n  memorize(model, pos, item) {\n    this._withStrategy(model, pos).memorize(model, pos, item);\n    this._persistSoon.schedule();\n  }\n  select(model, pos, items) {\n    return this._withStrategy(model, pos).select(model, pos, items);\n  }\n  _withStrategy(model, pos) {\n    const mode = this._configService.getValue('editor.suggestSelection', {\n      overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n      resource: model.uri\n    });\n    if (this._strategy?.name !== mode) {\n      this._saveState();\n      const ctor = SuggestMemoryService_1._strategyCtors.get(mode) || NoMemory;\n      this._strategy = new ctor();\n      try {\n        const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n        const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n        const raw = this._storageService.get(`${SuggestMemoryService_1._storagePrefix}/${mode}`, scope);\n        if (raw) {\n          this._strategy.fromJSON(JSON.parse(raw));\n        }\n      } catch (e) {\n        // things can go wrong with JSON...\n      }\n    }\n    return this._strategy;\n  }\n  _saveState() {\n    if (this._strategy) {\n      const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n      const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n      const raw = JSON.stringify(this._strategy);\n      this._storageService.store(`${SuggestMemoryService_1._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n    }\n  }\n};\nSuggestMemoryService = SuggestMemoryService_1 = __decorate([__param(0, IStorageService), __param(1, IConfigurationService)], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar WordContextKey_1;\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n  static {\n    WordContextKey_1 = this;\n  }\n  static {\n    this.AtEnd = new RawContextKey('atEndOfWord', false);\n  }\n  constructor(_editor, contextKeyService) {\n    this._editor = _editor;\n    this._enabled = false;\n    this._ckAtEnd = WordContextKey_1.AtEnd.bindTo(contextKeyService);\n    this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(124 /* EditorOption.tabCompletion */) && this._update());\n    this._update();\n  }\n  dispose() {\n    this._configListener.dispose();\n    this._selectionListener?.dispose();\n    this._ckAtEnd.reset();\n  }\n  _update() {\n    // only update this when tab completions are enabled\n    const enabled = this._editor.getOption(124 /* EditorOption.tabCompletion */) === 'on';\n    if (this._enabled === enabled) {\n      return;\n    }\n    this._enabled = enabled;\n    if (this._enabled) {\n      const checkForWordEnd = () => {\n        if (!this._editor.hasModel()) {\n          this._ckAtEnd.set(false);\n          return;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        const word = model.getWordAtPosition(selection.getStartPosition());\n        if (!word) {\n          this._ckAtEnd.set(false);\n          return;\n        }\n        this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n      };\n      this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n      checkForWordEnd();\n    } else if (this._selectionListener) {\n      this._ckAtEnd.reset();\n      this._selectionListener.dispose();\n      this._selectionListener = undefined;\n    }\n  }\n};\nWordContextKey = WordContextKey_1 = __decorate([__param(1, IContextKeyService)], WordContextKey);\nexport { WordContextKey };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SuggestAlternatives_1;\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n  static {\n    SuggestAlternatives_1 = this;\n  }\n  static {\n    this.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\n  }\n  constructor(_editor, contextKeyService) {\n    this._editor = _editor;\n    this._index = 0;\n    this._ckOtherSuggestions = SuggestAlternatives_1.OtherSuggestions.bindTo(contextKeyService);\n  }\n  dispose() {\n    this.reset();\n  }\n  reset() {\n    this._ckOtherSuggestions.reset();\n    this._listener?.dispose();\n    this._model = undefined;\n    this._acceptNext = undefined;\n    this._ignore = false;\n  }\n  set({\n    model,\n    index\n  }, acceptNext) {\n    // no suggestions -> nothing to do\n    if (model.items.length === 0) {\n      this.reset();\n      return;\n    }\n    // no alternative suggestions -> nothing to do\n    const nextIndex = SuggestAlternatives_1._moveIndex(true, model, index);\n    if (nextIndex === index) {\n      this.reset();\n      return;\n    }\n    this._acceptNext = acceptNext;\n    this._model = model;\n    this._index = index;\n    this._listener = this._editor.onDidChangeCursorPosition(() => {\n      if (!this._ignore) {\n        this.reset();\n      }\n    });\n    this._ckOtherSuggestions.set(true);\n  }\n  static _moveIndex(fwd, model, index) {\n    let newIndex = index;\n    for (let rounds = model.items.length; rounds > 0; rounds--) {\n      newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n      if (newIndex === index) {\n        break;\n      }\n      if (!model.items[newIndex].completion.additionalTextEdits) {\n        break;\n      }\n    }\n    return newIndex;\n  }\n  next() {\n    this._move(true);\n  }\n  prev() {\n    this._move(false);\n  }\n  _move(fwd) {\n    if (!this._model) {\n      // nothing to reason about\n      return;\n    }\n    try {\n      this._ignore = true;\n      this._index = SuggestAlternatives_1._moveIndex(fwd, this._model, this._index);\n      this._acceptNext({\n        index: this._index,\n        item: this._model.items[this._index],\n        model: this._model\n      });\n    } finally {\n      this._ignore = false;\n    }\n  }\n};\nSuggestAlternatives = SuggestAlternatives_1 = __decorate([__param(1, IContextKeyService)], SuggestAlternatives);\nexport { SuggestAlternatives };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n  constructor(editor, widget, model, accept) {\n    this._disposables = new DisposableStore();\n    this._disposables.add(model.onDidSuggest(e => {\n      if (e.completionModel.items.length === 0) {\n        this.reset();\n      }\n    }));\n    this._disposables.add(model.onDidCancel(e => {\n      this.reset();\n    }));\n    this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n    this._disposables.add(widget.onDidFocus(this._onItem, this));\n    this._disposables.add(widget.onDidHide(this.reset, this));\n    this._disposables.add(editor.onWillType(text => {\n      if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\n        const ch = text.charCodeAt(text.length - 1);\n        if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n          accept(this._active.item);\n        }\n      }\n    }));\n  }\n  _onItem(selected) {\n    if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n      // no item or no commit characters\n      this.reset();\n      return;\n    }\n    if (this._active && this._active.item.item === selected.item) {\n      // still the same item\n      return;\n    }\n    // keep item and its commit characters\n    const acceptCharacters = new CharacterSet();\n    for (const ch of selected.item.completion.commitCharacters) {\n      if (ch.length > 0) {\n        acceptCharacters.add(ch.charCodeAt(0));\n      }\n    }\n    this._active = {\n      acceptCharacters,\n      item: selected\n    };\n  }\n  reset() {\n    this._active = undefined;\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SuggestModel_1;\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { InlineCompletionContextKeys } from '../../inlineCompletions/browser/controller/inlineCompletionContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nexport class LineContext {\n  static shouldAutoTrigger(editor) {\n    if (!editor.hasModel()) {\n      return false;\n    }\n    const model = editor.getModel();\n    const pos = editor.getPosition();\n    model.tokenization.tokenizeIfCheap(pos.lineNumber);\n    const word = model.getWordAtPosition(pos);\n    if (!word) {\n      return false;\n    }\n    if (word.endColumn !== pos.column && word.startColumn + 1 !== pos.column /* after typing a single character before a word */) {\n      return false;\n    }\n    if (!isNaN(Number(word.word))) {\n      return false;\n    }\n    return true;\n  }\n  constructor(model, position, triggerOptions) {\n    this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n    this.leadingWord = model.getWordUntilPosition(position);\n    this.lineNumber = position.lineNumber;\n    this.column = position.column;\n    this.triggerOptions = triggerOptions;\n  }\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n  if (!Boolean(contextKeyService.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))) {\n    // Allow if there is no inline suggestion.\n    return true;\n  }\n  const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n  if (suppressSuggestions !== undefined) {\n    return !suppressSuggestions;\n  }\n  return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n  if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n    // Allow if there is no inline suggestion.\n    return true;\n  }\n  const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n  if (suppressSuggestions !== undefined) {\n    return !suppressSuggestions;\n  }\n  return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nlet SuggestModel = SuggestModel_1 = class SuggestModel {\n  constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService, _envService) {\n    this._editor = _editor;\n    this._editorWorkerService = _editorWorkerService;\n    this._clipboardService = _clipboardService;\n    this._telemetryService = _telemetryService;\n    this._logService = _logService;\n    this._contextKeyService = _contextKeyService;\n    this._configurationService = _configurationService;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._envService = _envService;\n    this._toDispose = new DisposableStore();\n    this._triggerCharacterListener = new DisposableStore();\n    this._triggerQuickSuggest = new TimeoutTimer();\n    this._triggerState = undefined;\n    this._completionDisposables = new DisposableStore();\n    this._onDidCancel = new Emitter();\n    this._onDidTrigger = new Emitter();\n    this._onDidSuggest = new Emitter();\n    this.onDidCancel = this._onDidCancel.event;\n    this.onDidTrigger = this._onDidTrigger.event;\n    this.onDidSuggest = this._onDidSuggest.event;\n    this._telemetryGate = 0;\n    this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n    // wire up various listeners\n    this._toDispose.add(this._editor.onDidChangeModel(() => {\n      this._updateTriggerCharacters();\n      this.cancel();\n    }));\n    this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n      this._updateTriggerCharacters();\n      this.cancel();\n    }));\n    this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n      this._updateTriggerCharacters();\n    }));\n    this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n      this._updateTriggerCharacters();\n      this._updateActiveSuggestSession();\n    }));\n    let editorIsComposing = false;\n    this._toDispose.add(this._editor.onDidCompositionStart(() => {\n      editorIsComposing = true;\n    }));\n    this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n      editorIsComposing = false;\n      this._onCompositionEnd();\n    }));\n    this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n      // only trigger suggest when the editor isn't composing a character\n      if (!editorIsComposing) {\n        this._onCursorChange(e);\n      }\n    }));\n    this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n      // only filter completions when the editor isn't composing a character\n      // allow-any-unicode-next-line\n      // e.g.  + u makes  but just  cannot be used for filtering\n      if (!editorIsComposing && this._triggerState !== undefined) {\n        this._refilterCompletionItems();\n      }\n    }));\n    this._updateTriggerCharacters();\n  }\n  dispose() {\n    dispose(this._triggerCharacterListener);\n    dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n    this._toDispose.dispose();\n    this._completionDisposables.dispose();\n    this.cancel();\n  }\n  _updateTriggerCharacters() {\n    this._triggerCharacterListener.clear();\n    if (this._editor.getOption(92 /* EditorOption.readOnly */) || !this._editor.hasModel() || !this._editor.getOption(122 /* EditorOption.suggestOnTriggerCharacters */)) {\n      return;\n    }\n    const supportsByTriggerCharacter = new Map();\n    for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n      for (const ch of support.triggerCharacters || []) {\n        let set = supportsByTriggerCharacter.get(ch);\n        if (!set) {\n          set = new Set();\n          const suggestSupport = getSnippetSuggestSupport();\n          if (suggestSupport) {\n            set.add(suggestSupport);\n          }\n          supportsByTriggerCharacter.set(ch, set);\n        }\n        set.add(support);\n      }\n    }\n    const checkTriggerCharacter = text => {\n      if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n        return;\n      }\n      if (LineContext.shouldAutoTrigger(this._editor)) {\n        // don't trigger by trigger characters when this is a case for quick suggest\n        return;\n      }\n      if (!text) {\n        // came here from the compositionEnd-event\n        const position = this._editor.getPosition();\n        const model = this._editor.getModel();\n        text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n      }\n      let lastChar = '';\n      if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n        if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n          lastChar = text.substr(text.length - 2);\n        }\n      } else {\n        lastChar = text.charAt(text.length - 1);\n      }\n      const supports = supportsByTriggerCharacter.get(lastChar);\n      if (supports) {\n        // keep existing items that where not computed by the\n        // supports/providers that want to trigger now\n        const providerItemsToReuse = new Map();\n        if (this._completionModel) {\n          for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n            if (!supports.has(provider)) {\n              providerItemsToReuse.set(provider, items);\n            }\n          }\n        }\n        this.trigger({\n          auto: true,\n          triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n          triggerCharacter: lastChar,\n          retrigger: Boolean(this._completionModel),\n          clipboardText: this._completionModel?.clipboardText,\n          completionOptions: {\n            providerFilter: supports,\n            providerItemsToReuse\n          }\n        });\n      }\n    };\n    this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n    this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n  }\n  // --- trigger/retrigger/cancel suggest\n  get state() {\n    if (!this._triggerState) {\n      return 0 /* State.Idle */;\n    } else if (!this._triggerState.auto) {\n      return 1 /* State.Manual */;\n    } else {\n      return 2 /* State.Auto */;\n    }\n  }\n  cancel(retrigger = false) {\n    if (this._triggerState !== undefined) {\n      this._triggerQuickSuggest.cancel();\n      this._requestToken?.cancel();\n      this._requestToken = undefined;\n      this._triggerState = undefined;\n      this._completionModel = undefined;\n      this._context = undefined;\n      this._onDidCancel.fire({\n        retrigger\n      });\n    }\n  }\n  clear() {\n    this._completionDisposables.clear();\n  }\n  _updateActiveSuggestSession() {\n    if (this._triggerState !== undefined) {\n      if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n        this.cancel();\n      } else {\n        this.trigger({\n          auto: this._triggerState.auto,\n          retrigger: true\n        });\n      }\n    }\n  }\n  _onCursorChange(e) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const prevSelection = this._currentSelection;\n    this._currentSelection = this._editor.getSelection();\n    if (!e.selection.isEmpty() || e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */ || e.source !== 'keyboard' && e.source !== 'deleteLeft') {\n      // Early exit if nothing needs to be done!\n      // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n      this.cancel();\n      return;\n    }\n    if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\n      if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n        // cursor did move RIGHT due to typing -> trigger quick suggest\n        this._doTriggerQuickSuggest();\n      }\n    } else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\n      // suggest is active and something like cursor keys are used to move\n      // the cursor. this means we can refilter at the new position\n      this._refilterCompletionItems();\n    }\n  }\n  _onCompositionEnd() {\n    // trigger or refilter when composition ends\n    if (this._triggerState === undefined) {\n      this._doTriggerQuickSuggest();\n    } else {\n      this._refilterCompletionItems();\n    }\n  }\n  _doTriggerQuickSuggest() {\n    if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(90 /* EditorOption.quickSuggestions */))) {\n      // not enabled\n      return;\n    }\n    if (this._editor.getOption(119 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && SnippetController2.get(this._editor)?.isInSnippet()) {\n      // no quick suggestion when in snippet mode\n      return;\n    }\n    this.cancel();\n    this._triggerQuickSuggest.cancelAndSet(() => {\n      if (this._triggerState !== undefined) {\n        return;\n      }\n      if (!LineContext.shouldAutoTrigger(this._editor)) {\n        return;\n      }\n      if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n        return;\n      }\n      const model = this._editor.getModel();\n      const pos = this._editor.getPosition();\n      // validate enabled now\n      const config = this._editor.getOption(90 /* EditorOption.quickSuggestions */);\n      if (QuickSuggestionsOptions.isAllOff(config)) {\n        return;\n      }\n      if (!QuickSuggestionsOptions.isAllOn(config)) {\n        // Check the type of the token that triggered this\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n        const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n        if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n          return;\n        }\n      }\n      if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n        // do not trigger quick suggestions if inline suggestions are shown\n        return;\n      }\n      if (!this._languageFeaturesService.completionProvider.has(model)) {\n        return;\n      }\n      // we made it till here -> trigger now\n      this.trigger({\n        auto: true\n      });\n    }, this._editor.getOption(91 /* EditorOption.quickSuggestionsDelay */));\n  }\n  _refilterCompletionItems() {\n    assertType(this._editor.hasModel());\n    assertType(this._triggerState !== undefined);\n    const model = this._editor.getModel();\n    const position = this._editor.getPosition();\n    const ctx = new LineContext(model, position, {\n      ...this._triggerState,\n      refilter: true\n    });\n    this._onNewContext(ctx);\n  }\n  trigger(options) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const ctx = new LineContext(model, this._editor.getPosition(), options);\n    // Cancel previous requests, change state & update UI\n    this.cancel(options.retrigger);\n    this._triggerState = options;\n    this._onDidTrigger.fire({\n      auto: options.auto,\n      shy: options.shy ?? false,\n      position: this._editor.getPosition()\n    });\n    // Capture context when request was sent\n    this._context = ctx;\n    // Build context for request\n    let suggestCtx = {\n      triggerKind: options.triggerKind ?? 0 /* CompletionTriggerKind.Invoke */\n    };\n    if (options.triggerCharacter) {\n      suggestCtx = {\n        triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n        triggerCharacter: options.triggerCharacter\n      };\n    }\n    this._requestToken = new CancellationTokenSource();\n    // kind filter and snippet sort rules\n    const snippetSuggestions = this._editor.getOption(113 /* EditorOption.snippetSuggestions */);\n    let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n    switch (snippetSuggestions) {\n      case 'top':\n        snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n        break;\n      // \t that's the default anyways...\n      // case 'inline':\n      // \tsnippetSortOrder = SnippetSortOrder.Inline;\n      // \tbreak;\n      case 'bottom':\n        snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n        break;\n    }\n    const {\n      itemKind: itemKindFilter,\n      showDeprecated\n    } = SuggestModel_1.createSuggestFilter(this._editor);\n    const completionOptions = new CompletionOptions(snippetSortOrder, options.completionOptions?.kindFilter ?? itemKindFilter, options.completionOptions?.providerFilter, options.completionOptions?.providerItemsToReuse, showDeprecated);\n    const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n    const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n    Promise.all([completions, wordDistance]).then(async ([completions, wordDistance]) => {\n      this._requestToken?.dispose();\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      let clipboardText = options?.clipboardText;\n      if (!clipboardText && completions.needsClipboard) {\n        clipboardText = await this._clipboardService.readText();\n      }\n      if (this._triggerState === undefined) {\n        return;\n      }\n      const model = this._editor.getModel();\n      // const items = completions.items;\n      // if (existing) {\n      // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\n      // \titems = items.concat(existing.items).sort(cmpFn);\n      // }\n      const ctx = new LineContext(model, this._editor.getPosition(), options);\n      const fuzzySearchOptions = {\n        ...FuzzyScoreOptions.default,\n        firstMatchCanBeWeak: !this._editor.getOption(119 /* EditorOption.suggest */).matchOnWordStartOnly\n      };\n      this._completionModel = new CompletionModel(completions.items, this._context.column, {\n        leadingLineContent: ctx.leadingLineContent,\n        characterCountDelta: ctx.column - this._context.column\n      }, wordDistance, this._editor.getOption(119 /* EditorOption.suggest */), this._editor.getOption(113 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\n      // store containers so that they can be disposed later\n      this._completionDisposables.add(completions.disposable);\n      this._onNewContext(ctx);\n      // finally report telemetry about durations\n      this._reportDurationsTelemetry(completions.durations);\n      // report invalid completions by source\n      if (!this._envService.isBuilt || this._envService.isExtensionDevelopment) {\n        for (const item of completions.items) {\n          if (item.isInvalid) {\n            this._logService.warn(`[suggest] did IGNORE invalid completion item from ${item.provider._debugDisplayName}`, item.completion);\n          }\n        }\n      }\n    }).catch(onUnexpectedError);\n  }\n  _reportDurationsTelemetry(durations) {\n    if (this._telemetryGate++ % 230 !== 0) {\n      return;\n    }\n    setTimeout(() => {\n      this._telemetryService.publicLog2('suggest.durations.json', {\n        data: JSON.stringify(durations)\n      });\n      this._logService.debug('suggest.durations.json', durations);\n    });\n  }\n  static createSuggestFilter(editor) {\n    // kind filter and snippet sort rules\n    const result = new Set();\n    // snippet setting\n    const snippetSuggestions = editor.getOption(113 /* EditorOption.snippetSuggestions */);\n    if (snippetSuggestions === 'none') {\n      result.add(27 /* CompletionItemKind.Snippet */);\n    }\n    // type setting\n    const suggestOptions = editor.getOption(119 /* EditorOption.suggest */);\n    if (!suggestOptions.showMethods) {\n      result.add(0 /* CompletionItemKind.Method */);\n    }\n    if (!suggestOptions.showFunctions) {\n      result.add(1 /* CompletionItemKind.Function */);\n    }\n    if (!suggestOptions.showConstructors) {\n      result.add(2 /* CompletionItemKind.Constructor */);\n    }\n    if (!suggestOptions.showFields) {\n      result.add(3 /* CompletionItemKind.Field */);\n    }\n    if (!suggestOptions.showVariables) {\n      result.add(4 /* CompletionItemKind.Variable */);\n    }\n    if (!suggestOptions.showClasses) {\n      result.add(5 /* CompletionItemKind.Class */);\n    }\n    if (!suggestOptions.showStructs) {\n      result.add(6 /* CompletionItemKind.Struct */);\n    }\n    if (!suggestOptions.showInterfaces) {\n      result.add(7 /* CompletionItemKind.Interface */);\n    }\n    if (!suggestOptions.showModules) {\n      result.add(8 /* CompletionItemKind.Module */);\n    }\n    if (!suggestOptions.showProperties) {\n      result.add(9 /* CompletionItemKind.Property */);\n    }\n    if (!suggestOptions.showEvents) {\n      result.add(10 /* CompletionItemKind.Event */);\n    }\n    if (!suggestOptions.showOperators) {\n      result.add(11 /* CompletionItemKind.Operator */);\n    }\n    if (!suggestOptions.showUnits) {\n      result.add(12 /* CompletionItemKind.Unit */);\n    }\n    if (!suggestOptions.showValues) {\n      result.add(13 /* CompletionItemKind.Value */);\n    }\n    if (!suggestOptions.showConstants) {\n      result.add(14 /* CompletionItemKind.Constant */);\n    }\n    if (!suggestOptions.showEnums) {\n      result.add(15 /* CompletionItemKind.Enum */);\n    }\n    if (!suggestOptions.showEnumMembers) {\n      result.add(16 /* CompletionItemKind.EnumMember */);\n    }\n    if (!suggestOptions.showKeywords) {\n      result.add(17 /* CompletionItemKind.Keyword */);\n    }\n    if (!suggestOptions.showWords) {\n      result.add(18 /* CompletionItemKind.Text */);\n    }\n    if (!suggestOptions.showColors) {\n      result.add(19 /* CompletionItemKind.Color */);\n    }\n    if (!suggestOptions.showFiles) {\n      result.add(20 /* CompletionItemKind.File */);\n    }\n    if (!suggestOptions.showReferences) {\n      result.add(21 /* CompletionItemKind.Reference */);\n    }\n    if (!suggestOptions.showColors) {\n      result.add(22 /* CompletionItemKind.Customcolor */);\n    }\n    if (!suggestOptions.showFolders) {\n      result.add(23 /* CompletionItemKind.Folder */);\n    }\n    if (!suggestOptions.showTypeParameters) {\n      result.add(24 /* CompletionItemKind.TypeParameter */);\n    }\n    if (!suggestOptions.showSnippets) {\n      result.add(27 /* CompletionItemKind.Snippet */);\n    }\n    if (!suggestOptions.showUsers) {\n      result.add(25 /* CompletionItemKind.User */);\n    }\n    if (!suggestOptions.showIssues) {\n      result.add(26 /* CompletionItemKind.Issue */);\n    }\n    return {\n      itemKind: result,\n      showDeprecated: suggestOptions.showDeprecated\n    };\n  }\n  _onNewContext(ctx) {\n    if (!this._context) {\n      // happens when 24x7 IntelliSense is enabled and still in its delay\n      return;\n    }\n    if (ctx.lineNumber !== this._context.lineNumber) {\n      // e.g. happens when pressing Enter while IntelliSense is computed\n      this.cancel();\n      return;\n    }\n    if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n      // cancel IntelliSense when line start changes\n      // happens when the current word gets outdented\n      this.cancel();\n      return;\n    }\n    if (ctx.column < this._context.column) {\n      // typed -> moved cursor LEFT -> retrigger if still on a word\n      if (ctx.leadingWord.word) {\n        this.trigger({\n          auto: this._context.triggerOptions.auto,\n          retrigger: true\n        });\n      } else {\n        this.cancel();\n      }\n      return;\n    }\n    if (!this._completionModel) {\n      // happens when IntelliSense is not yet computed\n      return;\n    }\n    if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n      // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\n      const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n      if (shouldAutoTrigger && this._context) {\n        // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n        // suggestions to be cancelled, which causes `this._context` to be undefined\n        const map = this._completionModel.getItemsByProvider();\n        this.trigger({\n          auto: this._context.triggerOptions.auto,\n          retrigger: true,\n          clipboardText: this._completionModel.clipboardText,\n          completionOptions: {\n            providerItemsToReuse: map\n          }\n        });\n      }\n      return;\n    }\n    if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\n      // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n      const providerItemsToReuse = new Map();\n      const providerFilter = new Set();\n      for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n        if (items.length > 0 && items[0].container.incomplete) {\n          providerFilter.add(provider);\n        } else {\n          providerItemsToReuse.set(provider, items);\n        }\n      }\n      this.trigger({\n        auto: this._context.triggerOptions.auto,\n        triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\n        retrigger: true,\n        clipboardText: this._completionModel.clipboardText,\n        completionOptions: {\n          providerFilter,\n          providerItemsToReuse\n        }\n      });\n    } else {\n      // typed -> moved cursor RIGHT -> update UI\n      const oldLineContext = this._completionModel.lineContext;\n      let isFrozen = false;\n      this._completionModel.lineContext = {\n        leadingLineContent: ctx.leadingLineContent,\n        characterCountDelta: ctx.column - this._context.column\n      };\n      if (this._completionModel.items.length === 0) {\n        const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n        if (!this._context) {\n          // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n          // suggestions to be cancelled, which causes `this._context` to be undefined\n          this.cancel();\n          return;\n        }\n        if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n          // retrigger when heading into a new word\n          this.trigger({\n            auto: this._context.triggerOptions.auto,\n            retrigger: true\n          });\n          return;\n        }\n        if (!this._context.triggerOptions.auto) {\n          // freeze when IntelliSense was manually requested\n          this._completionModel.lineContext = oldLineContext;\n          isFrozen = this._completionModel.items.length > 0;\n          if (isFrozen && ctx.leadingWord.word.length === 0) {\n            // there were results before but now there aren't\n            // and also we are not on a word anymore -> cancel\n            this.cancel();\n            return;\n          }\n        } else {\n          // nothing left\n          this.cancel();\n          return;\n        }\n      }\n      this._onDidSuggest.fire({\n        completionModel: this._completionModel,\n        triggerOptions: ctx.triggerOptions,\n        isFrozen\n      });\n    }\n  }\n};\nSuggestModel = SuggestModel_1 = __decorate([__param(1, IEditorWorkerService), __param(2, IClipboardService), __param(3, ITelemetryService), __param(4, ILogService), __param(5, IContextKeyService), __param(6, IConfigurationService), __param(7, ILanguageFeaturesService), __param(8, IEnvironmentService)], SuggestModel);\nexport { SuggestModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n  static {\n    this.None = new class extends WordDistance {\n      distance() {\n        return 0;\n      }\n    }();\n  }\n  static async create(service, editor) {\n    if (!editor.getOption(119 /* EditorOption.suggest */).localityBonus) {\n      return WordDistance.None;\n    }\n    if (!editor.hasModel()) {\n      return WordDistance.None;\n    }\n    const model = editor.getModel();\n    const position = editor.getPosition();\n    if (!service.canComputeWordRanges(model.uri)) {\n      return WordDistance.None;\n    }\n    const [ranges] = await new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n    if (ranges.length === 0) {\n      return WordDistance.None;\n    }\n    const wordRanges = await service.computeWordRanges(model.uri, ranges[0].range);\n    if (!wordRanges) {\n      return WordDistance.None;\n    }\n    // remove current word\n    const wordUntilPos = model.getWordUntilPosition(position);\n    delete wordRanges[wordUntilPos.word];\n    return new class extends WordDistance {\n      distance(anchor, item) {\n        if (!position.equals(editor.getPosition())) {\n          return 0;\n        }\n        if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n          return 2 << 20;\n        }\n        const word = typeof item.label === 'string' ? item.label : item.label.label;\n        const wordLines = wordRanges[word];\n        if (isFalsyOrEmpty(wordLines)) {\n          return 2 << 20;\n        }\n        const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n        const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n        let blockDistance = ranges.length;\n        for (const range of ranges) {\n          if (!Range.containsRange(range.range, bestWordRange)) {\n            break;\n          }\n          blockDistance -= 1;\n        }\n        return blockDistance;\n      }\n    }();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport let BracketSelectionRangeProvider = /*#__PURE__*/(() => {\n  class BracketSelectionRangeProvider {\n    async provideSelectionRanges(model, positions) {\n      const result = [];\n      for (const position of positions) {\n        const bucket = [];\n        result.push(bucket);\n        const ranges = new Map();\n        await new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n        await new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n      }\n      return result;\n    }\n    static {\n      this._maxDuration = 30;\n    }\n    static {\n      this._maxRounds = 2;\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n      const counts = new Map();\n      const t1 = Date.now();\n      while (true) {\n        if (round >= BracketSelectionRangeProvider._maxRounds) {\n          resolve();\n          break;\n        }\n        if (!pos) {\n          resolve();\n          break;\n        }\n        const bracket = model.bracketPairs.findNextBracket(pos);\n        if (!bracket) {\n          resolve();\n          break;\n        }\n        const d = Date.now() - t1;\n        if (d > BracketSelectionRangeProvider._maxDuration) {\n          setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n          break;\n        }\n        if (bracket.bracketInfo.isOpeningBracket) {\n          const key = bracket.bracketInfo.bracketText;\n          // wait for closing\n          const val = counts.has(key) ? counts.get(key) : 0;\n          counts.set(key, val + 1);\n        } else {\n          const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n          // process closing\n          let val = counts.has(key) ? counts.get(key) : 0;\n          val -= 1;\n          counts.set(key, Math.max(0, val));\n          if (val < 0) {\n            let list = ranges.get(key);\n            if (!list) {\n              list = new LinkedList();\n              ranges.set(key, list);\n            }\n            list.push(bracket.range);\n          }\n        }\n        pos = bracket.range.getEndPosition();\n      }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n      const counts = new Map();\n      const t1 = Date.now();\n      while (true) {\n        if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n          resolve();\n          break;\n        }\n        if (!pos) {\n          resolve();\n          break;\n        }\n        const bracket = model.bracketPairs.findPrevBracket(pos);\n        if (!bracket) {\n          resolve();\n          break;\n        }\n        const d = Date.now() - t1;\n        if (d > BracketSelectionRangeProvider._maxDuration) {\n          setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n          break;\n        }\n        if (!bracket.bracketInfo.isOpeningBracket) {\n          const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n          // wait for opening\n          const val = counts.has(key) ? counts.get(key) : 0;\n          counts.set(key, val + 1);\n        } else {\n          const key = bracket.bracketInfo.bracketText;\n          // opening\n          let val = counts.has(key) ? counts.get(key) : 0;\n          val -= 1;\n          counts.set(key, Math.max(0, val));\n          if (val < 0) {\n            const list = ranges.get(key);\n            if (list) {\n              const closing = list.shift();\n              if (list.size === 0) {\n                ranges.delete(key);\n              }\n              const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n              const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n              bucket.push({\n                range: innerBracket\n              });\n              bucket.push({\n                range: outerBracket\n              });\n              BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n            }\n          }\n        }\n        pos = bracket.range.getStartPosition();\n      }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n      if (bracket.startLineNumber === bracket.endLineNumber) {\n        return;\n      }\n      // xxxxxxxx {\n      //\n      // }\n      const startLine = bracket.startLineNumber;\n      const column = model.getLineFirstNonWhitespaceColumn(startLine);\n      if (column !== 0 && column !== bracket.startColumn) {\n        bucket.push({\n          range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition())\n        });\n        bucket.push({\n          range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition())\n        });\n      }\n      // xxxxxxxx\n      // {\n      //\n      // }\n      const aboveLine = startLine - 1;\n      if (aboveLine > 0) {\n        const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n        if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n          bucket.push({\n            range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition())\n          });\n          bucket.push({\n            range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition())\n          });\n        }\n      }\n    }\n  }\n  return BracketSelectionRangeProvider;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n  constructor(leadingLineContent, characterCountDelta) {\n    this.leadingLineContent = leadingLineContent;\n    this.characterCountDelta = characterCountDelta;\n  }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n  constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n    this.clipboardText = clipboardText;\n    this._snippetCompareFn = CompletionModel._compareCompletionItems;\n    this._items = items;\n    this._column = column;\n    this._wordDistance = wordDistance;\n    this._options = options;\n    this._refilterKind = 1 /* Refilter.All */;\n    this._lineContext = lineContext;\n    this._fuzzyScoreOptions = fuzzyScoreOptions;\n    if (snippetSuggestions === 'top') {\n      this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n    } else if (snippetSuggestions === 'bottom') {\n      this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n    }\n  }\n  get lineContext() {\n    return this._lineContext;\n  }\n  set lineContext(value) {\n    if (this._lineContext.leadingLineContent !== value.leadingLineContent || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n      this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n      this._lineContext = value;\n    }\n  }\n  get items() {\n    this._ensureCachedState();\n    return this._filteredItems;\n  }\n  getItemsByProvider() {\n    this._ensureCachedState();\n    return this._itemsByProvider;\n  }\n  getIncompleteProvider() {\n    this._ensureCachedState();\n    const result = new Set();\n    for (const [provider, items] of this.getItemsByProvider()) {\n      if (items.length > 0 && items[0].container.incomplete) {\n        result.add(provider);\n      }\n    }\n    return result;\n  }\n  get stats() {\n    this._ensureCachedState();\n    return this._stats;\n  }\n  _ensureCachedState() {\n    if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n      this._createCachedState();\n    }\n  }\n  _createCachedState() {\n    this._itemsByProvider = new Map();\n    const labelLengths = [];\n    const {\n      leadingLineContent,\n      characterCountDelta\n    } = this._lineContext;\n    let word = '';\n    let wordLow = '';\n    // incrementally filter less\n    const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n    const target = [];\n    // picks a score function based on the number of\n    // items that we have to score/filter and based on the\n    // user-configuration\n    const scoreFn = !this._options.filterGraceful || source.length > 2000 ? fuzzyScore : fuzzyScoreGracefulAggressive;\n    for (let i = 0; i < source.length; i++) {\n      const item = source[i];\n      if (item.isInvalid) {\n        continue; // SKIP invalid items\n      }\n      // keep all items by their provider\n      const arr = this._itemsByProvider.get(item.provider);\n      if (arr) {\n        arr.push(item);\n      } else {\n        this._itemsByProvider.set(item.provider, [item]);\n      }\n      // 'word' is that remainder of the current line that we\n      // filter and score against. In theory each suggestion uses a\n      // different word, but in practice not - that's why we cache\n      const overwriteBefore = item.position.column - item.editStart.column;\n      const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n      if (word.length !== wordLen) {\n        word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n        wordLow = word.toLowerCase();\n      }\n      // remember the word against which this item was\n      // scored\n      item.word = word;\n      if (wordLen === 0) {\n        // when there is nothing to score against, don't\n        // event try to do. Use a const rank and rely on\n        // the fallback-sort using the initial sort order.\n        // use a score of `-100` because that is out of the\n        // bound of values `fuzzyScore` will return\n        item.score = FuzzyScore.Default;\n      } else {\n        // skip word characters that are whitespace until\n        // we have hit the replace range (overwriteBefore)\n        let wordPos = 0;\n        while (wordPos < overwriteBefore) {\n          const ch = word.charCodeAt(wordPos);\n          if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n            wordPos += 1;\n          } else {\n            break;\n          }\n        }\n        if (wordPos >= wordLen) {\n          // the wordPos at which scoring starts is the whole word\n          // and therefore the same rules as not having a word apply\n          item.score = FuzzyScore.Default;\n        } else if (typeof item.completion.filterText === 'string') {\n          // when there is a `filterText` it must match the `word`.\n          // if it matches we check with the label to compute highlights\n          // and if that doesn't yield a result we have no highlights,\n          // despite having the match\n          const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n          if (!match) {\n            continue; // NO match\n          }\n          if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n            // filterText and label are actually the same -> use good highlights\n            item.score = match;\n          } else {\n            // re-run the scorer on the label in the hope of a result BUT use the rank\n            // of the filterText-match\n            item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n            item.score[0] = match[0]; // use score from filterText\n          }\n        } else {\n          // by default match `word` against the `label`\n          const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n          if (!match) {\n            continue; // NO match\n          }\n          item.score = match;\n        }\n      }\n      item.idx = i;\n      item.distance = this._wordDistance.distance(item.position, item.completion);\n      target.push(item);\n      // update stats\n      labelLengths.push(item.textLabel.length);\n    }\n    this._filteredItems = target.sort(this._snippetCompareFn);\n    this._refilterKind = 0 /* Refilter.Nothing */;\n    this._stats = {\n      pLabelLen: labelLengths.length ? quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b) : 0\n    };\n  }\n  static _compareCompletionItems(a, b) {\n    if (a.score[0] > b.score[0]) {\n      return -1;\n    } else if (a.score[0] < b.score[0]) {\n      return 1;\n    } else if (a.distance < b.distance) {\n      return -1;\n    } else if (a.distance > b.distance) {\n      return 1;\n    } else if (a.idx < b.idx) {\n      return -1;\n    } else if (a.idx > b.idx) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n  static _compareCompletionItemsSnippetsDown(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n      if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n        return 1;\n      } else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n        return -1;\n      }\n    }\n    return CompletionModel._compareCompletionItems(a, b);\n  }\n  static _compareCompletionItemsSnippetsUp(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n      if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n        return -1;\n      } else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n        return 1;\n      }\n    }\n    return CompletionModel._compareCompletionItems(a, b);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport let OvertypingCapturer = /*#__PURE__*/(() => {\n  class OvertypingCapturer {\n    static {\n      this._maxSelectionLength = 51200;\n    }\n    constructor(editor, suggestModel) {\n      this._disposables = new DisposableStore();\n      this._lastOvertyped = [];\n      this._locked = false;\n      this._disposables.add(editor.onWillType(() => {\n        if (this._locked || !editor.hasModel()) {\n          return;\n        }\n        const selections = editor.getSelections();\n        const selectionsLength = selections.length;\n        // Check if it will overtype any selections\n        let willOvertype = false;\n        for (let i = 0; i < selectionsLength; i++) {\n          if (!selections[i].isEmpty()) {\n            willOvertype = true;\n            break;\n          }\n        }\n        if (!willOvertype) {\n          if (this._lastOvertyped.length !== 0) {\n            this._lastOvertyped.length = 0;\n          }\n          return;\n        }\n        this._lastOvertyped = [];\n        const model = editor.getModel();\n        for (let i = 0; i < selectionsLength; i++) {\n          const selection = selections[i];\n          // Check for overtyping capturer restrictions\n          if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n            return;\n          }\n          this._lastOvertyped[i] = {\n            value: model.getValueInRange(selection),\n            multiline: selection.startLineNumber !== selection.endLineNumber\n          };\n        }\n      }));\n      this._disposables.add(suggestModel.onDidTrigger(e => {\n        this._locked = true;\n      }));\n      this._disposables.add(suggestModel.onDidCancel(e => {\n        this._locked = false;\n      }));\n    }\n    getLastOvertypedInfo(idx) {\n      if (idx >= 0 && idx < this._lastOvertyped.length) {\n        return this._lastOvertyped[idx];\n      }\n      return undefined;\n    }\n    dispose() {\n      this._disposables.dispose();\n    }\n  }\n  return OvertypingCapturer;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SuggestWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', editorWidgetBackground, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', editorWidgetBorder, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', editorForeground, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', quickInputListFocusForeground, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', quickInputListFocusIconForeground, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', quickInputListFocusBackground, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', listHighlightForeground, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', listFocusHighlightForeground, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', transparent(editorSuggestWidgetForeground, .5), nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n  constructor(_service, editor) {\n    this._service = _service;\n    this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n  }\n  restore() {\n    const raw = this._service.get(this._key, 0 /* StorageScope.PROFILE */) ?? '';\n    try {\n      const obj = JSON.parse(raw);\n      if (dom.Dimension.is(obj)) {\n        return dom.Dimension.lift(obj);\n      }\n    } catch {\n      // ignore\n    }\n    return undefined;\n  }\n  store(size) {\n    this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n  }\n  reset() {\n    this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n  }\n}\nlet SuggestWidget = class SuggestWidget {\n  static {\n    SuggestWidget_1 = this;\n  }\n  static {\n    this.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\n  }\n  static {\n    this.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n  }\n  constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n    this.editor = editor;\n    this._storageService = _storageService;\n    this._state = 0 /* State.Hidden */;\n    this._isAuto = false;\n    this._pendingLayout = new MutableDisposable();\n    this._pendingShowDetails = new MutableDisposable();\n    this._ignoreFocusEvents = false;\n    this._forceRenderingAbove = false;\n    this._explainMode = false;\n    this._showTimeout = new TimeoutTimer();\n    this._disposables = new DisposableStore();\n    this._onDidSelect = new PauseableEmitter();\n    this._onDidFocus = new PauseableEmitter();\n    this._onDidHide = new Emitter();\n    this._onDidShow = new Emitter();\n    this.onDidSelect = this._onDidSelect.event;\n    this.onDidFocus = this._onDidFocus.event;\n    this.onDidHide = this._onDidHide.event;\n    this.onDidShow = this._onDidShow.event;\n    this._onDetailsKeydown = new Emitter();\n    this.onDetailsKeyDown = this._onDetailsKeydown.event;\n    this.element = new ResizableHTMLElement();\n    this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n    this._contentWidget = new SuggestContentWidget(this, editor);\n    this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n    class ResizeState {\n      constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n        this.persistedSize = persistedSize;\n        this.currentSize = currentSize;\n        this.persistHeight = persistHeight;\n        this.persistWidth = persistWidth;\n      }\n    }\n    let state;\n    this._disposables.add(this.element.onDidWillResize(() => {\n      this._contentWidget.lockPreference();\n      state = new ResizeState(this._persistedSize.restore(), this.element.size);\n    }));\n    this._disposables.add(this.element.onDidResize(e => {\n      this._resize(e.dimension.width, e.dimension.height);\n      if (state) {\n        state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n        state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n      }\n      if (!e.done) {\n        return;\n      }\n      if (state) {\n        // only store width or height value that have changed and also\n        // only store changes that are above a certain threshold\n        const {\n          itemHeight,\n          defaultSize\n        } = this.getLayoutInfo();\n        const threshold = Math.round(itemHeight / 2);\n        let {\n          width,\n          height\n        } = this.element.size;\n        if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n          height = state.persistedSize?.height ?? defaultSize.height;\n        }\n        if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n          width = state.persistedSize?.width ?? defaultSize.width;\n        }\n        this._persistedSize.store(new dom.Dimension(width, height));\n      }\n      // reset working state\n      this._contentWidget.unlockPreference();\n      state = undefined;\n    }));\n    this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n    this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n    const details = this._disposables.add(instantiationService.createInstance(SuggestDetailsWidget, this.editor));\n    details.onDidClose(this.toggleDetails, this, this._disposables);\n    this._details = new SuggestDetailsOverlay(details, this.editor);\n    const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(119 /* EditorOption.suggest */).showIcons);\n    applyIconStyle();\n    const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n    this._disposables.add(renderer);\n    this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n    this._list = new List('SuggestWidget', this._listElement, {\n      getHeight: _element => this.getLayoutInfo().itemHeight,\n      getTemplateId: _element => 'suggestion'\n    }, [renderer], {\n      alwaysConsumeMouseWheel: true,\n      useShadows: false,\n      mouseSupport: false,\n      multipleSelectionSupport: false,\n      accessibilityProvider: {\n        getRole: () => 'option',\n        getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n        getWidgetRole: () => 'listbox',\n        getAriaLabel: item => {\n          let label = item.textLabel;\n          if (typeof item.completion.label !== 'string') {\n            const {\n              detail,\n              description\n            } = item.completion.label;\n            if (detail && description) {\n              label = nls.localize('label.full', '{0} {1}, {2}', label, detail, description);\n            } else if (detail) {\n              label = nls.localize('label.detail', '{0} {1}', label, detail);\n            } else if (description) {\n              label = nls.localize('label.desc', '{0}, {1}', label, description);\n            }\n          }\n          if (!item.isResolved || !this._isDetailsVisible()) {\n            return label;\n          }\n          const {\n            documentation,\n            detail\n          } = item.completion;\n          const docs = strings.format('{0}{1}', detail || '', documentation ? typeof documentation === 'string' ? documentation : documentation.value : '');\n          return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n        }\n      }\n    });\n    this._list.style(getListStyles({\n      listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n      listInactiveFocusOutline: activeContrastBorder\n    }));\n    this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n    const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(119 /* EditorOption.suggest */).showStatusBar);\n    applyStatusBarStyle();\n    this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n    this._onThemeChange(_themeService.getColorTheme());\n    this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n    this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n    this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n    this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n    this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n    this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(119 /* EditorOption.suggest */)) {\n        applyStatusBarStyle();\n        applyIconStyle();\n      }\n      if (this._completionModel && (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(120 /* EditorOption.suggestFontSize */) || e.hasChanged(121 /* EditorOption.suggestLineHeight */))) {\n        this._list.splice(0, this._list.length, this._completionModel.items);\n      }\n    }));\n    this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n    this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n    this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n    this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n    this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n      this._onDetailsKeydown.fire(e);\n    }));\n    this._disposables.add(this.editor.onMouseDown(e => this._onEditorMouseDown(e)));\n  }\n  dispose() {\n    this._details.widget.dispose();\n    this._details.dispose();\n    this._list.dispose();\n    this._status.dispose();\n    this._disposables.dispose();\n    this._loadingTimeout?.dispose();\n    this._pendingLayout.dispose();\n    this._pendingShowDetails.dispose();\n    this._showTimeout.dispose();\n    this._contentWidget.dispose();\n    this.element.dispose();\n  }\n  _onEditorMouseDown(mouseEvent) {\n    if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n      // Clicking inside details\n      this._details.widget.domNode.focus();\n    } else {\n      // Clicking outside details and inside suggest\n      if (this.element.domNode.contains(mouseEvent.target.element)) {\n        this.editor.focus();\n      }\n    }\n  }\n  _onCursorSelectionChanged() {\n    if (this._state !== 0 /* State.Hidden */) {\n      this._contentWidget.layout();\n    }\n  }\n  _onListMouseDownOrTap(e) {\n    if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n      return;\n    }\n    // prevent stealing browser focus from the editor\n    e.browserEvent.preventDefault();\n    e.browserEvent.stopPropagation();\n    this._select(e.element, e.index);\n  }\n  _onListSelection(e) {\n    if (e.elements.length) {\n      this._select(e.elements[0], e.indexes[0]);\n    }\n  }\n  _select(item, index) {\n    const completionModel = this._completionModel;\n    if (completionModel) {\n      this._onDidSelect.fire({\n        item,\n        index,\n        model: completionModel\n      });\n      this.editor.focus();\n    }\n  }\n  _onThemeChange(theme) {\n    this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n  }\n  _onListFocus(e) {\n    if (this._ignoreFocusEvents) {\n      return;\n    }\n    if (!e.elements.length) {\n      if (this._currentSuggestionDetails) {\n        this._currentSuggestionDetails.cancel();\n        this._currentSuggestionDetails = undefined;\n        this._focusedItem = undefined;\n      }\n      this.editor.setAriaOptions({\n        activeDescendant: undefined\n      });\n      this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n      return;\n    }\n    if (!this._completionModel) {\n      return;\n    }\n    this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n    const item = e.elements[0];\n    const index = e.indexes[0];\n    if (item !== this._focusedItem) {\n      this._currentSuggestionDetails?.cancel();\n      this._currentSuggestionDetails = undefined;\n      this._focusedItem = item;\n      this._list.reveal(index);\n      this._currentSuggestionDetails = createCancelablePromise(async token => {\n        const loading = disposableTimeout(() => {\n          if (this._isDetailsVisible()) {\n            this.showDetails(true);\n          }\n        }, 250);\n        const sub = token.onCancellationRequested(() => loading.dispose());\n        try {\n          return await item.resolve(token);\n        } finally {\n          loading.dispose();\n          sub.dispose();\n        }\n      });\n      this._currentSuggestionDetails.then(() => {\n        if (index >= this._list.length || item !== this._list.element(index)) {\n          return;\n        }\n        // item can have extra information, so re-render\n        this._ignoreFocusEvents = true;\n        this._list.splice(index, 1, [item]);\n        this._list.setFocus([index]);\n        this._ignoreFocusEvents = false;\n        if (this._isDetailsVisible()) {\n          this.showDetails(false);\n        } else {\n          this.element.domNode.classList.remove('docs-side');\n        }\n        this.editor.setAriaOptions({\n          activeDescendant: getAriaId(index)\n        });\n      }).catch(onUnexpectedError);\n    }\n    // emit an event\n    this._onDidFocus.fire({\n      item,\n      index,\n      model: this._completionModel\n    });\n  }\n  _setState(state) {\n    if (this._state === state) {\n      return;\n    }\n    this._state = state;\n    this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n    this.element.domNode.classList.remove('message');\n    switch (state) {\n      case 0 /* State.Hidden */:\n        dom.hide(this._messageElement, this._listElement, this._status.element);\n        this._details.hide(true);\n        this._status.hide();\n        this._contentWidget.hide();\n        this._ctxSuggestWidgetVisible.reset();\n        this._ctxSuggestWidgetMultipleSuggestions.reset();\n        this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n        this._showTimeout.cancel();\n        this.element.domNode.classList.remove('visible');\n        this._list.splice(0, this._list.length);\n        this._focusedItem = undefined;\n        this._cappedHeight = undefined;\n        this._explainMode = false;\n        break;\n      case 1 /* State.Loading */:\n        this.element.domNode.classList.add('message');\n        this._messageElement.textContent = SuggestWidget_1.LOADING_MESSAGE;\n        dom.hide(this._listElement, this._status.element);\n        dom.show(this._messageElement);\n        this._details.hide();\n        this._show();\n        this._focusedItem = undefined;\n        status(SuggestWidget_1.LOADING_MESSAGE);\n        break;\n      case 2 /* State.Empty */:\n        this.element.domNode.classList.add('message');\n        this._messageElement.textContent = SuggestWidget_1.NO_SUGGESTIONS_MESSAGE;\n        dom.hide(this._listElement, this._status.element);\n        dom.show(this._messageElement);\n        this._details.hide();\n        this._show();\n        this._focusedItem = undefined;\n        status(SuggestWidget_1.NO_SUGGESTIONS_MESSAGE);\n        break;\n      case 3 /* State.Open */:\n        dom.hide(this._messageElement);\n        dom.show(this._listElement, this._status.element);\n        this._show();\n        break;\n      case 4 /* State.Frozen */:\n        dom.hide(this._messageElement);\n        dom.show(this._listElement, this._status.element);\n        this._show();\n        break;\n      case 5 /* State.Details */:\n        dom.hide(this._messageElement);\n        dom.show(this._listElement, this._status.element);\n        this._details.show();\n        this._show();\n        break;\n    }\n  }\n  _show() {\n    this._status.show();\n    this._contentWidget.show();\n    this._layout(this._persistedSize.restore());\n    this._ctxSuggestWidgetVisible.set(true);\n    this._showTimeout.cancelAndSet(() => {\n      this.element.domNode.classList.add('visible');\n      this._onDidShow.fire(this);\n    }, 100);\n  }\n  showTriggered(auto, delay) {\n    if (this._state !== 0 /* State.Hidden */) {\n      return;\n    }\n    this._contentWidget.setPosition(this.editor.getPosition());\n    this._isAuto = !!auto;\n    if (!this._isAuto) {\n      this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n    }\n  }\n  showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\n    this._contentWidget.setPosition(this.editor.getPosition());\n    this._loadingTimeout?.dispose();\n    this._currentSuggestionDetails?.cancel();\n    this._currentSuggestionDetails = undefined;\n    if (this._completionModel !== completionModel) {\n      this._completionModel = completionModel;\n    }\n    if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n      this._setState(4 /* State.Frozen */);\n      return;\n    }\n    const visibleCount = this._completionModel.items.length;\n    const isEmpty = visibleCount === 0;\n    this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n    if (isEmpty) {\n      this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n      this._completionModel = undefined;\n      return;\n    }\n    this._focusedItem = undefined;\n    // calling list.splice triggers focus event which this widget forwards. That can lead to\n    // suggestions being cancelled and the widget being cleared (and hidden). All this happens\n    // before revealing and focusing is done which means revealing and focusing will fail when\n    // they get run.\n    this._onDidFocus.pause();\n    this._onDidSelect.pause();\n    try {\n      this._list.splice(0, this._list.length, this._completionModel.items);\n      this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n      this._list.reveal(selectionIndex, 0);\n      this._list.setFocus(noFocus ? [] : [selectionIndex]);\n    } finally {\n      this._onDidFocus.resume();\n      this._onDidSelect.resume();\n    }\n    this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(dom.getWindow(this.element.domNode), () => {\n      this._pendingLayout.clear();\n      this._layout(this.element.size);\n      // Reset focus border\n      this._details.widget.domNode.classList.remove('focused');\n    });\n  }\n  focusSelected() {\n    if (this._list.length > 0) {\n      this._list.setFocus([0]);\n    }\n  }\n  selectNextPage() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 5 /* State.Details */:\n        this._details.widget.pageDown();\n        return true;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusNextPage();\n        return true;\n    }\n  }\n  selectNext() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusNext(1, true);\n        return true;\n    }\n  }\n  selectLast() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 5 /* State.Details */:\n        this._details.widget.scrollBottom();\n        return true;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusLast();\n        return true;\n    }\n  }\n  selectPreviousPage() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 5 /* State.Details */:\n        this._details.widget.pageUp();\n        return true;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusPreviousPage();\n        return true;\n    }\n  }\n  selectPrevious() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusPrevious(1, true);\n        return false;\n    }\n  }\n  selectFirst() {\n    switch (this._state) {\n      case 0 /* State.Hidden */:\n        return false;\n      case 5 /* State.Details */:\n        this._details.widget.scrollTop();\n        return true;\n      case 1 /* State.Loading */:\n        return !this._isAuto;\n      default:\n        this._list.focusFirst();\n        return true;\n    }\n  }\n  getFocusedItem() {\n    if (this._state !== 0 /* State.Hidden */ && this._state !== 2 /* State.Empty */ && this._state !== 1 /* State.Loading */ && this._completionModel && this._list.getFocus().length > 0) {\n      return {\n        item: this._list.getFocusedElements()[0],\n        index: this._list.getFocus()[0],\n        model: this._completionModel\n      };\n    }\n    return undefined;\n  }\n  toggleDetailsFocus() {\n    if (this._state === 5 /* State.Details */) {\n      this._setState(3 /* State.Open */);\n      this._details.widget.domNode.classList.remove('focused');\n    } else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n      this._setState(5 /* State.Details */);\n      this._details.widget.domNode.classList.add('focused');\n    }\n  }\n  toggleDetails() {\n    if (this._isDetailsVisible()) {\n      // hide details widget\n      this._pendingShowDetails.clear();\n      this._ctxSuggestWidgetDetailsVisible.set(false);\n      this._setDetailsVisible(false);\n      this._details.hide();\n      this.element.domNode.classList.remove('shows-details');\n    } else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n      // show details widget (iff possible)\n      this._ctxSuggestWidgetDetailsVisible.set(true);\n      this._setDetailsVisible(true);\n      this.showDetails(false);\n    }\n  }\n  showDetails(loading) {\n    this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(dom.getWindow(this.element.domNode), () => {\n      this._pendingShowDetails.clear();\n      this._details.show();\n      if (loading) {\n        this._details.widget.renderLoading();\n      } else {\n        this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n      }\n      if (!this._details.widget.isEmpty) {\n        this._positionDetails();\n        this.element.domNode.classList.add('shows-details');\n      } else {\n        this._details.hide();\n      }\n      this.editor.focus();\n    });\n  }\n  toggleExplainMode() {\n    if (this._list.getFocusedElements()[0]) {\n      this._explainMode = !this._explainMode;\n      if (!this._isDetailsVisible()) {\n        this.toggleDetails();\n      } else {\n        this.showDetails(false);\n      }\n    }\n  }\n  resetPersistedSize() {\n    this._persistedSize.reset();\n  }\n  hideWidget() {\n    this._pendingLayout.clear();\n    this._pendingShowDetails.clear();\n    this._loadingTimeout?.dispose();\n    this._setState(0 /* State.Hidden */);\n    this._onDidHide.fire(this);\n    this.element.clearSashHoverState();\n    // ensure that a reasonable widget height is persisted so that\n    // accidential \"resize-to-single-items\" cases aren't happening\n    const dim = this._persistedSize.restore();\n    const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n    if (dim && dim.height < minPersistedHeight) {\n      this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n    }\n  }\n  isFrozen() {\n    return this._state === 4 /* State.Frozen */;\n  }\n  _afterRender(position) {\n    if (position === null) {\n      if (this._isDetailsVisible()) {\n        this._details.hide(); //todo@jrieken soft-hide\n      }\n      return;\n    }\n    if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n      // no special positioning when widget isn't showing list\n      return;\n    }\n    if (this._isDetailsVisible() && !this._details.widget.isEmpty) {\n      this._details.show();\n    }\n    this._positionDetails();\n  }\n  _layout(size) {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    if (!this.editor.getDomNode()) {\n      // happens when running tests\n      return;\n    }\n    const bodyBox = dom.getClientArea(this.element.domNode.ownerDocument.body);\n    const info = this.getLayoutInfo();\n    if (!size) {\n      size = info.defaultSize;\n    }\n    let height = size.height;\n    let width = size.width;\n    // status bar\n    this._status.element.style.height = `${info.itemHeight}px`;\n    if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n      // showing a message only\n      height = info.itemHeight + info.borderHeight;\n      width = info.defaultSize.width / 2;\n      this.element.enableSashes(false, false, false, false);\n      this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n      this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n    } else {\n      // showing items\n      // width math\n      const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n      if (width > maxWidth) {\n        width = maxWidth;\n      }\n      const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n      // height math\n      const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n      const minHeight = info.itemHeight + info.statusBarHeight;\n      const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n      const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n      const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n      const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n      const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n      const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n      let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n      if (height === this._cappedHeight?.capped) {\n        // Restore the old (wanted) height when the current\n        // height is capped to fit\n        height = this._cappedHeight.wanted;\n      }\n      if (height < minHeight) {\n        height = minHeight;\n      }\n      if (height > maxHeight) {\n        height = maxHeight;\n      }\n      const forceRenderingAboveRequiredSpace = 150;\n      if (height > maxHeightBelow || this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace) {\n        this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n        this.element.enableSashes(true, true, false, false);\n        maxHeight = maxHeightAbove;\n      } else {\n        this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        this.element.enableSashes(false, true, true, false);\n        maxHeight = maxHeightBelow;\n      }\n      this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n      this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n      this.element.minSize = new dom.Dimension(220, minHeight);\n      // Know when the height was capped to fit and remember\n      // the wanted height for later. This is required when going\n      // left to widen suggestions.\n      this._cappedHeight = height === fullHeight ? {\n        wanted: this._cappedHeight?.wanted ?? size.height,\n        capped: height\n      } : undefined;\n    }\n    this._resize(width, height);\n  }\n  _resize(width, height) {\n    const {\n      width: maxWidth,\n      height: maxHeight\n    } = this.element.maxSize;\n    width = Math.min(maxWidth, width);\n    height = Math.min(maxHeight, height);\n    const {\n      statusBarHeight\n    } = this.getLayoutInfo();\n    this._list.layout(height - statusBarHeight, width);\n    this._listElement.style.height = `${height - statusBarHeight}px`;\n    this.element.layout(height, width);\n    this._contentWidget.layout();\n    this._positionDetails();\n  }\n  _positionDetails() {\n    if (this._isDetailsVisible()) {\n      this._details.placeAtAnchor(this.element.domNode, this._contentWidget.getPosition()?.preference[0] === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n  }\n  getLayoutInfo() {\n    const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\n    const itemHeight = clamp(this.editor.getOption(121 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n    const statusBarHeight = !this.editor.getOption(119 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n    const borderWidth = this._details.widget.borderWidth;\n    const borderHeight = 2 * borderWidth;\n    return {\n      itemHeight,\n      statusBarHeight,\n      borderWidth,\n      borderHeight,\n      typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n      verticalPadding: 22,\n      horizontalPadding: 14,\n      defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n    };\n  }\n  _isDetailsVisible() {\n    return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n  }\n  _setDetailsVisible(value) {\n    this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n  }\n  forceRenderingAbove() {\n    if (!this._forceRenderingAbove) {\n      this._forceRenderingAbove = true;\n      this._layout(this._persistedSize.restore());\n    }\n  }\n  stopForceRenderingAbove() {\n    this._forceRenderingAbove = false;\n  }\n};\nSuggestWidget = SuggestWidget_1 = __decorate([__param(1, IStorageService), __param(2, IContextKeyService), __param(3, IThemeService), __param(4, IInstantiationService)], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n  constructor(_widget, _editor) {\n    this._widget = _widget;\n    this._editor = _editor;\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this._preferenceLocked = false;\n    this._added = false;\n    this._hidden = false;\n  }\n  dispose() {\n    if (this._added) {\n      this._added = false;\n      this._editor.removeContentWidget(this);\n    }\n  }\n  getId() {\n    return 'editor.widget.suggestWidget';\n  }\n  getDomNode() {\n    return this._widget.element.domNode;\n  }\n  show() {\n    this._hidden = false;\n    if (!this._added) {\n      this._added = true;\n      this._editor.addContentWidget(this);\n    }\n  }\n  hide() {\n    if (!this._hidden) {\n      this._hidden = true;\n      this.layout();\n    }\n  }\n  layout() {\n    this._editor.layoutContentWidget(this);\n  }\n  getPosition() {\n    if (this._hidden || !this._position || !this._preference) {\n      return null;\n    }\n    return {\n      position: this._position,\n      preference: [this._preference]\n    };\n  }\n  beforeRender() {\n    const {\n      height,\n      width\n    } = this._widget.element.size;\n    const {\n      borderWidth,\n      horizontalPadding\n    } = this._widget.getLayoutInfo();\n    return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n  }\n  afterRender(position) {\n    this._widget._afterRender(position);\n  }\n  setPreference(preference) {\n    if (!this._preferenceLocked) {\n      this._preference = preference;\n    }\n  }\n  lockPreference() {\n    this._preferenceLocked = true;\n  }\n  unlockPreference() {\n    this._preferenceLocked = false;\n  }\n  setPosition(position) {\n    this._position = position;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { TextOnlyMenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n  constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\n    this._menuId = _menuId;\n    this._menuService = _menuService;\n    this._contextKeyService = _contextKeyService;\n    this._menuDisposables = new DisposableStore();\n    this.element = dom.append(container, dom.$('.suggest-status-bar'));\n    const actionViewItemProvider = action => {\n      return action instanceof MenuItemAction ? instantiationService.createInstance(TextOnlyMenuEntryActionViewItem, action, {\n        useComma: true\n      }) : undefined;\n    };\n    this._leftActions = new ActionBar(this.element, {\n      actionViewItemProvider\n    });\n    this._rightActions = new ActionBar(this.element, {\n      actionViewItemProvider\n    });\n    this._leftActions.domNode.classList.add('left');\n    this._rightActions.domNode.classList.add('right');\n  }\n  dispose() {\n    this._menuDisposables.dispose();\n    this._leftActions.dispose();\n    this._rightActions.dispose();\n    this.element.remove();\n  }\n  show() {\n    const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\n    const renderMenu = () => {\n      const left = [];\n      const right = [];\n      for (const [group, actions] of menu.getActions()) {\n        if (group === 'left') {\n          left.push(...actions);\n        } else {\n          right.push(...actions);\n        }\n      }\n      this._leftActions.clear();\n      this._leftActions.push(left);\n      this._rightActions.clear();\n      this._rightActions.push(right);\n    };\n    this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n    this._menuDisposables.add(menu);\n  }\n  hide() {\n    this._menuDisposables.clear();\n  }\n};\nSuggestWidgetStatus = __decorate([__param(2, IInstantiationService), __param(3, IMenuService), __param(4, IContextKeyService)], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n  return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n  constructor(_editor, instaService) {\n    this._editor = _editor;\n    this._onDidClose = new Emitter();\n    this.onDidClose = this._onDidClose.event;\n    this._onDidChangeContents = new Emitter();\n    this.onDidChangeContents = this._onDidChangeContents.event;\n    this._disposables = new DisposableStore();\n    this._renderDisposeable = new DisposableStore();\n    this._borderWidth = 1;\n    this._size = new dom.Dimension(330, 0);\n    this.domNode = dom.$('.suggest-details');\n    this.domNode.classList.add('no-docs');\n    this._markdownRenderer = instaService.createInstance(MarkdownRenderer, {\n      editor: _editor\n    });\n    this._body = dom.$('.body');\n    this._scrollbar = new DomScrollableElement(this._body, {\n      alwaysConsumeMouseWheel: true\n    });\n    dom.append(this.domNode, this._scrollbar.getDomNode());\n    this._disposables.add(this._scrollbar);\n    this._header = dom.append(this._body, dom.$('.header'));\n    this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\n    this._close.title = nls.localize('details.close', \"Close\");\n    this._type = dom.append(this._header, dom.$('p.type'));\n    this._docs = dom.append(this._body, dom.$('p.docs'));\n    this._configureFont();\n    this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n        this._configureFont();\n      }\n    }));\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._renderDisposeable.dispose();\n  }\n  _configureFont() {\n    const options = this._editor.getOptions();\n    const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n    const fontFamily = fontInfo.getMassagedFontFamily();\n    const fontSize = options.get(120 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n    const lineHeight = options.get(121 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n    const fontWeight = fontInfo.fontWeight;\n    const fontSizePx = `${fontSize}px`;\n    const lineHeightPx = `${lineHeight}px`;\n    this.domNode.style.fontSize = fontSizePx;\n    this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n    this.domNode.style.fontWeight = fontWeight;\n    this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n    this._type.style.fontFamily = fontFamily;\n    this._close.style.height = lineHeightPx;\n    this._close.style.width = lineHeightPx;\n  }\n  getLayoutInfo() {\n    const lineHeight = this._editor.getOption(121 /* EditorOption.suggestLineHeight */) || this._editor.getOption(50 /* EditorOption.fontInfo */).lineHeight;\n    const borderWidth = this._borderWidth;\n    const borderHeight = borderWidth * 2;\n    return {\n      lineHeight,\n      borderWidth,\n      borderHeight,\n      verticalPadding: 22,\n      horizontalPadding: 14\n    };\n  }\n  renderLoading() {\n    this._type.textContent = nls.localize('loading', \"Loading...\");\n    this._docs.textContent = '';\n    this.domNode.classList.remove('no-docs', 'no-type');\n    this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n    this._onDidChangeContents.fire(this);\n  }\n  renderItem(item, explainMode) {\n    this._renderDisposeable.clear();\n    let {\n      detail,\n      documentation\n    } = item.completion;\n    if (explainMode) {\n      let md = '';\n      md += `score: ${item.score[0]}\\n`;\n      md += `prefix: ${item.word ?? '(no prefix)'}\\n`;\n      md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n      md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n      md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n      md += `commit_chars: ${item.completion.commitCharacters?.join('')}\\n`;\n      documentation = new MarkdownString().appendCodeblock('empty', md);\n      detail = `Provider: ${item.provider._debugDisplayName}`;\n    }\n    if (!explainMode && !canExpandCompletionItem(item)) {\n      this.clearContents();\n      return;\n    }\n    this.domNode.classList.remove('no-docs', 'no-type');\n    // --- details\n    if (detail) {\n      const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n      this._type.textContent = cappedDetail;\n      this._type.title = cappedDetail;\n      dom.show(this._type);\n      this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n    } else {\n      dom.clearNode(this._type);\n      this._type.title = '';\n      dom.hide(this._type);\n      this.domNode.classList.add('no-type');\n    }\n    // --- documentation\n    dom.clearNode(this._docs);\n    if (typeof documentation === 'string') {\n      this._docs.classList.remove('markdown-docs');\n      this._docs.textContent = documentation;\n    } else if (documentation) {\n      this._docs.classList.add('markdown-docs');\n      dom.clearNode(this._docs);\n      const renderedContents = this._markdownRenderer.render(documentation);\n      this._docs.appendChild(renderedContents.element);\n      this._renderDisposeable.add(renderedContents);\n      this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n      }));\n    }\n    this.domNode.style.userSelect = 'text';\n    this.domNode.tabIndex = -1;\n    this._close.onmousedown = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    this._close.onclick = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this._onDidClose.fire();\n    };\n    this._body.scrollTop = 0;\n    this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n    this._onDidChangeContents.fire(this);\n  }\n  clearContents() {\n    this.domNode.classList.add('no-docs');\n    this._type.textContent = '';\n    this._docs.textContent = '';\n  }\n  get isEmpty() {\n    return this.domNode.classList.contains('no-docs');\n  }\n  get size() {\n    return this._size;\n  }\n  layout(width, height) {\n    const newSize = new dom.Dimension(width, height);\n    if (!dom.Dimension.equals(newSize, this._size)) {\n      this._size = newSize;\n      dom.size(this.domNode, width, height);\n    }\n    this._scrollbar.scanDomNode();\n  }\n  scrollDown(much = 8) {\n    this._body.scrollTop += much;\n  }\n  scrollUp(much = 8) {\n    this._body.scrollTop -= much;\n  }\n  scrollTop() {\n    this._body.scrollTop = 0;\n  }\n  scrollBottom() {\n    this._body.scrollTop = this._body.scrollHeight;\n  }\n  pageDown() {\n    this.scrollDown(80);\n  }\n  pageUp() {\n    this.scrollUp(80);\n  }\n  set borderWidth(width) {\n    this._borderWidth = width;\n  }\n  get borderWidth() {\n    return this._borderWidth;\n  }\n};\nSuggestDetailsWidget = __decorate([__param(1, IInstantiationService)], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n  constructor(widget, _editor) {\n    this.widget = widget;\n    this._editor = _editor;\n    this.allowEditorOverflow = true;\n    this._disposables = new DisposableStore();\n    this._added = false;\n    this._preferAlignAtTop = true;\n    this._resizable = new ResizableHTMLElement();\n    this._resizable.domNode.classList.add('suggest-details-container');\n    this._resizable.domNode.appendChild(widget.domNode);\n    this._resizable.enableSashes(false, true, true, false);\n    let topLeftNow;\n    let sizeNow;\n    let deltaTop = 0;\n    let deltaLeft = 0;\n    this._disposables.add(this._resizable.onDidWillResize(() => {\n      topLeftNow = this._topLeft;\n      sizeNow = this._resizable.size;\n    }));\n    this._disposables.add(this._resizable.onDidResize(e => {\n      if (topLeftNow && sizeNow) {\n        this.widget.layout(e.dimension.width, e.dimension.height);\n        let updateTopLeft = false;\n        if (e.west) {\n          deltaLeft = sizeNow.width - e.dimension.width;\n          updateTopLeft = true;\n        }\n        if (e.north) {\n          deltaTop = sizeNow.height - e.dimension.height;\n          updateTopLeft = true;\n        }\n        if (updateTopLeft) {\n          this._applyTopLeft({\n            top: topLeftNow.top + deltaTop,\n            left: topLeftNow.left + deltaLeft\n          });\n        }\n      }\n      if (e.done) {\n        topLeftNow = undefined;\n        sizeNow = undefined;\n        deltaTop = 0;\n        deltaLeft = 0;\n        this._userSize = e.dimension;\n      }\n    }));\n    this._disposables.add(this.widget.onDidChangeContents(() => {\n      if (this._anchorBox) {\n        this._placeAtAnchor(this._anchorBox, this._userSize ?? this.widget.size, this._preferAlignAtTop);\n      }\n    }));\n  }\n  dispose() {\n    this._resizable.dispose();\n    this._disposables.dispose();\n    this.hide();\n  }\n  getId() {\n    return 'suggest.details';\n  }\n  getDomNode() {\n    return this._resizable.domNode;\n  }\n  getPosition() {\n    return this._topLeft ? {\n      preference: this._topLeft\n    } : null;\n  }\n  show() {\n    if (!this._added) {\n      this._editor.addOverlayWidget(this);\n      this._added = true;\n    }\n  }\n  hide(sessionEnded = false) {\n    this._resizable.clearSashHoverState();\n    if (this._added) {\n      this._editor.removeOverlayWidget(this);\n      this._added = false;\n      this._anchorBox = undefined;\n      this._topLeft = undefined;\n    }\n    if (sessionEnded) {\n      this._userSize = undefined;\n      this.widget.clearContents();\n    }\n  }\n  placeAtAnchor(anchor, preferAlignAtTop) {\n    const anchorBox = anchor.getBoundingClientRect();\n    this._anchorBox = anchorBox;\n    this._preferAlignAtTop = preferAlignAtTop;\n    this._placeAtAnchor(this._anchorBox, this._userSize ?? this.widget.size, preferAlignAtTop);\n  }\n  _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n    const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n    const info = this.widget.getLayoutInfo();\n    const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n    const defaultTop = anchorBox.top;\n    // EAST\n    const eastPlacement = function () {\n      const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n      const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n      const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n      const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n      return {\n        top: defaultTop,\n        left,\n        fit: width - size.width,\n        maxSizeTop,\n        maxSizeBottom,\n        minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width))\n      };\n    }();\n    // WEST\n    const westPlacement = function () {\n      const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n      const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n      const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n      const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n      return {\n        top: defaultTop,\n        left,\n        fit: width - size.width,\n        maxSizeTop,\n        maxSizeBottom,\n        minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width))\n      };\n    }();\n    // SOUTH\n    const southPacement = function () {\n      const left = anchorBox.left;\n      const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n      const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n      return {\n        top,\n        left,\n        fit: maxSizeBottom.height - size.height,\n        maxSizeBottom,\n        maxSizeTop: maxSizeBottom,\n        minSize: defaultMinSize.with(maxSizeBottom.width)\n      };\n    }();\n    // take first placement that fits or the first with \"least bad\" fit\n    const placements = [eastPlacement, westPlacement, southPacement];\n    const placement = placements.find(p => p.fit >= 0) ?? placements.sort((a, b) => b.fit - a.fit)[0];\n    // top/bottom placement\n    const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n    let alignAtTop;\n    let height = size.height;\n    const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n    if (height > maxHeight) {\n      height = maxHeight;\n    }\n    let maxSize;\n    if (preferAlignAtTop) {\n      if (height <= placement.maxSizeTop.height) {\n        alignAtTop = true;\n        maxSize = placement.maxSizeTop;\n      } else {\n        alignAtTop = false;\n        maxSize = placement.maxSizeBottom;\n      }\n    } else {\n      if (height <= placement.maxSizeBottom.height) {\n        alignAtTop = false;\n        maxSize = placement.maxSizeBottom;\n      } else {\n        alignAtTop = true;\n        maxSize = placement.maxSizeTop;\n      }\n    }\n    let {\n      top,\n      left\n    } = placement;\n    if (!alignAtTop && height > anchorBox.height) {\n      top = bottom - height;\n    }\n    const editorDomNode = this._editor.getDomNode();\n    if (editorDomNode) {\n      // get bounding rectangle of the suggest widget relative to the editor\n      const editorBoundingBox = editorDomNode.getBoundingClientRect();\n      top -= editorBoundingBox.top;\n      left -= editorBoundingBox.left;\n    }\n    this._applyTopLeft({\n      left,\n      top\n    });\n    this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n    this._resizable.minSize = placement.minSize;\n    this._resizable.maxSize = maxSize;\n    this._resizable.layout(height, Math.min(maxSize.width, size.width));\n    this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n  }\n  _applyTopLeft(topLeft) {\n    this._topLeft = topLeft;\n    this._editor.layoutOverlayWidget(this);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n  return `suggest-aria-id:${index}`;\n}\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new class ColorExtractor {\n  static {\n    this._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/;\n  }\n  static {\n    this._regexStrict = new RegExp(`^${ColorExtractor._regexRelaxed.source}$`, 'i');\n  }\n  extract(item, out) {\n    if (item.textLabel.match(ColorExtractor._regexStrict)) {\n      out[0] = item.textLabel;\n      return true;\n    }\n    if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n      out[0] = item.completion.detail;\n      return true;\n    }\n    if (item.completion.documentation) {\n      const value = typeof item.completion.documentation === 'string' ? item.completion.documentation : item.completion.documentation.value;\n      const match = ColorExtractor._regexRelaxed.exec(value);\n      if (match && (match.index === 0 || match.index + match[0].length === value.length)) {\n        out[0] = match[0];\n        return true;\n      }\n    }\n    return false;\n  }\n}();\nlet ItemRenderer = class ItemRenderer {\n  constructor(_editor, _modelService, _languageService, _themeService) {\n    this._editor = _editor;\n    this._modelService = _modelService;\n    this._languageService = _languageService;\n    this._themeService = _themeService;\n    this._onDidToggleDetails = new Emitter();\n    this.onDidToggleDetails = this._onDidToggleDetails.event;\n    this.templateId = 'suggestion';\n  }\n  dispose() {\n    this._onDidToggleDetails.dispose();\n  }\n  renderTemplate(container) {\n    const disposables = new DisposableStore();\n    const root = container;\n    root.classList.add('show-file-icons');\n    const icon = append(container, $('.icon'));\n    const colorspan = append(icon, $('span.colorspan'));\n    const text = append(container, $('.contents'));\n    const main = append(text, $('.main'));\n    const iconContainer = append(main, $('.icon-label.codicon'));\n    const left = append(main, $('span.left'));\n    const right = append(main, $('span.right'));\n    const iconLabel = new IconLabel(left, {\n      supportHighlights: true,\n      supportIcons: true\n    });\n    disposables.add(iconLabel);\n    const parametersLabel = append(left, $('span.signature-label'));\n    const qualifierLabel = append(left, $('span.qualifier-label'));\n    const detailsLabel = append(right, $('span.details-label'));\n    const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n    readMore.title = nls.localize('readMore', \"Read More\");\n    const configureFont = () => {\n      const options = this._editor.getOptions();\n      const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n      const fontFamily = fontInfo.getMassagedFontFamily();\n      const fontFeatureSettings = fontInfo.fontFeatureSettings;\n      const fontSize = options.get(120 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n      const lineHeight = options.get(121 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n      const fontWeight = fontInfo.fontWeight;\n      const letterSpacing = fontInfo.letterSpacing;\n      const fontSizePx = `${fontSize}px`;\n      const lineHeightPx = `${lineHeight}px`;\n      const letterSpacingPx = `${letterSpacing}px`;\n      root.style.fontSize = fontSizePx;\n      root.style.fontWeight = fontWeight;\n      root.style.letterSpacing = letterSpacingPx;\n      main.style.fontFamily = fontFamily;\n      main.style.fontFeatureSettings = fontFeatureSettings;\n      main.style.lineHeight = lineHeightPx;\n      icon.style.height = lineHeightPx;\n      icon.style.width = lineHeightPx;\n      readMore.style.height = lineHeightPx;\n      readMore.style.width = lineHeightPx;\n    };\n    return {\n      root,\n      left,\n      right,\n      icon,\n      colorspan,\n      iconLabel,\n      iconContainer,\n      parametersLabel,\n      qualifierLabel,\n      detailsLabel,\n      readMore,\n      disposables,\n      configureFont\n    };\n  }\n  renderElement(element, index, data) {\n    data.configureFont();\n    const {\n      completion\n    } = element;\n    data.root.id = getAriaId(index);\n    data.colorspan.style.backgroundColor = '';\n    const labelOptions = {\n      labelEscapeNewLines: true,\n      matches: createMatches(element.score)\n    };\n    const color = [];\n    if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n      // special logic for 'color' completion items\n      data.icon.className = 'icon customcolor';\n      data.iconContainer.className = 'icon hide';\n      data.colorspan.style.backgroundColor = color[0];\n    } else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n      // special logic for 'file' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({\n        scheme: 'fake',\n        path: element.textLabel\n      }), FileKind.FILE);\n      const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({\n        scheme: 'fake',\n        path: completion.detail\n      }), FileKind.FILE);\n      labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n    } else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n      // special logic for 'folder' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      labelOptions.extraClasses = [getIconClasses(this._modelService, this._languageService, URI.from({\n        scheme: 'fake',\n        path: element.textLabel\n      }), FileKind.FOLDER), getIconClasses(this._modelService, this._languageService, URI.from({\n        scheme: 'fake',\n        path: completion.detail\n      }), FileKind.FOLDER)].flat();\n    } else {\n      // normal icon\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = '';\n      data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n    }\n    if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n      labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n      labelOptions.matches = [];\n    }\n    data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n    if (typeof completion.label === 'string') {\n      data.parametersLabel.textContent = '';\n      data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n      data.root.classList.add('string-label');\n    } else {\n      data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n      data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n      data.root.classList.remove('string-label');\n    }\n    if (this._editor.getOption(119 /* EditorOption.suggest */).showInlineDetails) {\n      show(data.detailsLabel);\n    } else {\n      hide(data.detailsLabel);\n    }\n    if (canExpandCompletionItem(element)) {\n      data.right.classList.add('can-expand-details');\n      show(data.readMore);\n      data.readMore.onmousedown = e => {\n        e.stopPropagation();\n        e.preventDefault();\n      };\n      data.readMore.onclick = e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._onDidToggleDetails.fire();\n      };\n    } else {\n      data.right.classList.remove('can-expand-details');\n      hide(data.readMore);\n      data.readMore.onmousedown = null;\n      data.readMore.onclick = null;\n    }\n  }\n  disposeTemplate(templateData) {\n    templateData.disposables.dispose();\n  }\n};\nItemRenderer = __decorate([__param(1, IModelService), __param(2, ILanguageService), __param(3, IThemeService)], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n  return str.replace(/\\r\\n|\\r|\\n/g, '');\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind, icon) {\n  if (ThemeIcon.isThemeIcon(icon)) {\n    return [`codicon-${icon.id}`, 'predefined-file-icon'];\n  }\n  if (URI.isUri(icon)) {\n    return [];\n  }\n  // we always set these base classes even if we do not have a path\n  const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n  if (resource) {\n    // Get the path and name of the resource. For data-URIs, we need to parse specially\n    let name;\n    if (resource.scheme === Schemas.data) {\n      const metadata = DataUri.parseMetaData(resource);\n      name = metadata.get(DataUri.META_DATA_LABEL);\n    } else {\n      const match = resource.path.match(fileIconDirectoryRegex);\n      if (match) {\n        name = cssEscape(match[2].toLowerCase());\n        if (match[1]) {\n          classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n        }\n      } else {\n        name = cssEscape(resource.authority.toLowerCase());\n      }\n    }\n    // Root Folders\n    if (fileKind === FileKind.ROOT_FOLDER) {\n      classes.push(`${name}-root-name-folder-icon`);\n    }\n    // Folders\n    else if (fileKind === FileKind.FOLDER) {\n      classes.push(`${name}-name-folder-icon`);\n    }\n    // Files\n    else {\n      // Name & Extension(s)\n      if (name) {\n        classes.push(`${name}-name-file-icon`);\n        classes.push(`name-file-icon`); // extra segment to increase file-name score\n        // Avoid doing an explosive combination of extensions for very long filenames\n        // (most file systems do not allow files > 255 length) with lots of `.` characters\n        // https://github.com/microsoft/vscode/issues/116199\n        if (name.length <= 255) {\n          const dotSegments = name.split('.');\n          for (let i = 1; i < dotSegments.length; i++) {\n            classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n          }\n        }\n        classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n      }\n      // Detected Mode\n      const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n      if (detectedLanguageId) {\n        classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n      }\n    }\n  }\n  return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n  if (!resource) {\n    return null; // we need a resource at least\n  }\n  let languageId = null;\n  // Data URI: check for encoded metadata\n  if (resource.scheme === Schemas.data) {\n    const metadata = DataUri.parseMetaData(resource);\n    const mime = metadata.get(DataUri.META_DATA_MIME);\n    if (mime) {\n      languageId = languageService.getLanguageIdByMimeType(mime);\n    }\n  }\n  // Any other URI: check for model if existing\n  else {\n    const model = modelService.getModel(resource);\n    if (model) {\n      languageId = model.getLanguageId();\n    }\n  }\n  // only take if the language id is specific (aka no just plain text)\n  if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n    return languageId;\n  }\n  // otherwise fallback to path based detection\n  return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nfunction cssEscape(str) {\n  return str.replace(/[\\s]/g, '/'); // HTML class names can not contain certain whitespace characters (https://dom.spec.whatwg.org/#interface-domtokenlist), use / instead, which doesn't exist in file names.\n}","//#endregion\n//#region Utilities\nexport var FileKind = /*#__PURE__*/function (FileKind) {\n  FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n  FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n  FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n  return FileKind;\n}(FileKind || {});\n\n//#endregion","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { autorun, constObservable } from '../../../../../base/common/observable.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { HoverForeignElementAnchor, RenderedHoverParts } from '../../../hover/browser/hoverTypes.js';\nimport { InlineCompletionsController } from '../controller/inlineCompletionsController.js';\nimport { InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\nimport { MarkdownRenderer } from '../../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport * as nls from '../../../../../nls.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nexport class InlineCompletionsHover {\n  constructor(owner, range, controller) {\n    this.owner = owner;\n    this.range = range;\n    this.controller = controller;\n  }\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1 /* HoverAnchorType.Range */ && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n  constructor(_editor, _languageService, _openerService, accessibilityService, _instantiationService, _telemetryService) {\n    this._editor = _editor;\n    this._languageService = _languageService;\n    this._openerService = _openerService;\n    this.accessibilityService = accessibilityService;\n    this._instantiationService = _instantiationService;\n    this._telemetryService = _telemetryService;\n    this.hoverOrdinal = 4;\n  }\n  suggestHoverAnchor(mouseEvent) {\n    const controller = InlineCompletionsController.get(this._editor);\n    if (!controller) {\n      return null;\n    }\n    const target = mouseEvent.target;\n    if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n      // handle the case where the mouse is over the view zone\n      const viewZoneData = target.detail;\n      if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n        return new HoverForeignElementAnchor(1000, this, Range.fromPositions(this._editor.getModel().validatePosition(viewZoneData.positionBefore || viewZoneData.position)), mouseEvent.event.posx, mouseEvent.event.posy, false);\n      }\n    }\n    if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n      // handle the case where the mouse is over the empty portion of a line following ghost text\n      if (controller.shouldShowHoverAt(target.range)) {\n        return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n      }\n    }\n    if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n      // handle the case where the mouse is directly over ghost text\n      const mightBeForeignElement = target.detail.mightBeForeignElement;\n      if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n        return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n      }\n    }\n    return null;\n  }\n  computeSync(anchor, lineDecorations) {\n    if (this._editor.getOption(62 /* EditorOption.inlineSuggest */).showToolbar !== 'onHover') {\n      return [];\n    }\n    const controller = InlineCompletionsController.get(this._editor);\n    if (controller && controller.shouldShowHoverAt(anchor.range)) {\n      return [new InlineCompletionsHover(this, anchor.range, controller)];\n    }\n    return [];\n  }\n  renderHoverParts(context, hoverParts) {\n    const disposables = new DisposableStore();\n    const part = hoverParts[0];\n    this._telemetryService.publicLog2('inlineCompletionHover.shown');\n    if (this.accessibilityService.isScreenReaderOptimized() && !this._editor.getOption(8 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\n      disposables.add(this.renderScreenReaderText(context, part));\n    }\n    const model = part.controller.model.get();\n    const w = this._instantiationService.createInstance(InlineSuggestionHintsContentWidget, this._editor, false, constObservable(null), model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.activeCommands);\n    const widgetNode = w.getDomNode();\n    context.fragment.appendChild(widgetNode);\n    model.triggerExplicitly();\n    disposables.add(w);\n    const renderedHoverPart = {\n      hoverPart: part,\n      hoverElement: widgetNode,\n      dispose() {\n        disposables.dispose();\n      }\n    };\n    return new RenderedHoverParts([renderedHoverPart]);\n  }\n  renderScreenReaderText(context, part) {\n    const disposables = new DisposableStore();\n    const $ = dom.$;\n    const markdownHoverElement = $('div.hover-row.markdown-hover');\n    const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents', {\n      ['aria-live']: 'assertive'\n    }));\n    const renderer = disposables.add(new MarkdownRenderer({\n      editor: this._editor\n    }, this._languageService, this._openerService));\n    const render = code => {\n      disposables.add(renderer.onDidRenderAsync(() => {\n        hoverContentsElement.className = 'hover-contents code-hover-contents';\n        context.onContentsChanged();\n      }));\n      const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n      const renderedContents = disposables.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n      hoverContentsElement.replaceChildren(renderedContents.element);\n    };\n    disposables.add(autorun(reader => {\n      /** @description update hover */\n      const ghostText = part.controller.model.read(reader)?.primaryGhostText.read(reader);\n      if (ghostText) {\n        const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n        render(ghostText.renderForScreenReader(lineText));\n      } else {\n        dom.reset(hoverContentsElement);\n      }\n    }));\n    context.fragment.appendChild(markdownHoverElement);\n    return disposables;\n  }\n};\nInlineCompletionsHoverParticipant = __decorate([__param(1, ILanguageService), __param(2, IOpenerService), __param(3, IAccessibilityService), __param(4, IInstantiationService), __param(5, ITelemetryService)], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };","export class InlineCompletionsAccessibleView {}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const AccessibleViewRegistry = new class AccessibleViewRegistry {\n  constructor() {\n    this._implementations = [];\n  }\n  register(implementation) {\n    this._implementations.push(implementation);\n    return {\n      dispose: () => {\n        const idx = this._implementations.indexOf(implementation);\n        if (idx !== -1) {\n          this._implementations.splice(idx, 1);\n        }\n      }\n    };\n  }\n  getImplementations() {\n    return this._implementations;\n  }\n}();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = /*#__PURE__*/(() => {\n  let GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    static {\n      GotoDefinitionAtPositionEditorContribution_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.gotodefinitionatposition';\n    }\n    static {\n      this.MAX_SOURCE_PREVIEW_LINES = 8;\n    }\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n      this.textModelResolverService = textModelResolverService;\n      this.languageService = languageService;\n      this.languageFeaturesService = languageFeaturesService;\n      this.toUnhook = new DisposableStore();\n      this.toUnhookForKeyboard = new DisposableStore();\n      this.currentWordAtPosition = null;\n      this.previousPromise = null;\n      this.editor = editor;\n      this.linkDecorations = this.editor.createDecorationsCollection();\n      const linkGesture = new ClickLinkGesture(editor);\n      this.toUnhook.add(linkGesture);\n      this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n        this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent ?? undefined);\n      }));\n      this.toUnhook.add(linkGesture.onExecute(mouseEvent => {\n        if (this.isEnabled(mouseEvent)) {\n          this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).catch(error => {\n            onUnexpectedError(error);\n          }).finally(() => {\n            this.removeLinkDecorations();\n          });\n        }\n      }));\n      this.toUnhook.add(linkGesture.onCancel(() => {\n        this.removeLinkDecorations();\n        this.currentWordAtPosition = null;\n      }));\n    }\n    static get(editor) {\n      return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    async startFindDefinitionFromCursor(position) {\n      // For issue: https://github.com/microsoft/vscode/issues/46257\n      // equivalent to mouse move with meta/ctrl key\n      // First find the definition and add decorations\n      // to the editor to be shown with the content hover widget\n      await this.startFindDefinition(position);\n      // Add listeners for editor cursor move and key down events\n      // Dismiss the \"extended\" editor decorations when the user hides\n      // the hover widget. There is no event for the widget itself so these\n      // serve as a best effort. After removing the link decorations, the hover\n      // widget is clean and will only show declarations per next request.\n      this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n        this.currentWordAtPosition = null;\n        this.removeLinkDecorations();\n        this.toUnhookForKeyboard.clear();\n      }));\n      this.toUnhookForKeyboard.add(this.editor.onKeyDown(e => {\n        if (e) {\n          this.currentWordAtPosition = null;\n          this.removeLinkDecorations();\n          this.toUnhookForKeyboard.clear();\n        }\n      }));\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n      // check if we are active and on a content widget\n      if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n        return;\n      }\n      if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n        this.currentWordAtPosition = null;\n        this.removeLinkDecorations();\n        return;\n      }\n      const position = mouseEvent.target.position;\n      this.startFindDefinition(position);\n    }\n    async startFindDefinition(position) {\n      // Dispose listeners for updating decorations when using keyboard to show definition hover\n      this.toUnhookForKeyboard.clear();\n      // Find word at mouse position\n      const word = position ? this.editor.getModel()?.getWordAtPosition(position) : null;\n      if (!word) {\n        this.currentWordAtPosition = null;\n        this.removeLinkDecorations();\n        return;\n      }\n      // Return early if word at position is still the same\n      if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n        return;\n      }\n      this.currentWordAtPosition = word;\n      // Find definition and decorate word if found\n      const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n      if (this.previousPromise) {\n        this.previousPromise.cancel();\n        this.previousPromise = null;\n      }\n      this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n      let results;\n      try {\n        results = await this.previousPromise;\n      } catch (error) {\n        onUnexpectedError(error);\n        return;\n      }\n      if (!results || !results.length || !state.validate(this.editor)) {\n        this.removeLinkDecorations();\n        return;\n      }\n      const linkRange = results[0].originSelectionRange ? Range.lift(results[0].originSelectionRange) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n      // Multiple results\n      if (results.length > 1) {\n        let combinedRange = linkRange;\n        for (const {\n          originSelectionRange\n        } of results) {\n          if (originSelectionRange) {\n            combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n          }\n        }\n        this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n      } else {\n        // Single result\n        const result = results[0];\n        if (!result.uri) {\n          return;\n        }\n        this.textModelResolverService.createModelReference(result.uri).then(ref => {\n          if (!ref.object || !ref.object.textEditorModel) {\n            ref.dispose();\n            return;\n          }\n          const {\n            object: {\n              textEditorModel\n            }\n          } = ref;\n          const {\n            startLineNumber\n          } = result.range;\n          if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n            // invalid range\n            ref.dispose();\n            return;\n          }\n          const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n          const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n          this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n          ref.dispose();\n        });\n      }\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n      let rangeToUse = result.range;\n      const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n      if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n        rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n      }\n      const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n      return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n      const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      let minIndent = startIndent;\n      for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n        const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        minIndent = Math.min(minIndent, endIndent);\n      }\n      const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n      return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n      const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n      let endLineNumber = startLineNumber + 1;\n      for (; endLineNumber < maxLineNumber; endLineNumber++) {\n        const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        if (startIndent === endIndent) {\n          break;\n        }\n      }\n      return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n      const newDecorations = {\n        range: range,\n        options: {\n          description: 'goto-definition-link',\n          inlineClassName: 'goto-definition-link',\n          hoverMessage\n        }\n      };\n      this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n      this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n      return this.editor.hasModel() && mouseEvent.isLeftClick && mouseEvent.isNoneOrSingleMouseDown && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && !(mouseEvent.target.detail.injectedText?.options instanceof ModelDecorationInjectedTextOptions) && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n      const model = this.editor.getModel();\n      if (!model) {\n        return Promise.resolve(null);\n      }\n      return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, false, token);\n    }\n    gotoDefinition(position, openToSide) {\n      this.editor.setPosition(position);\n      return this.editor.invokeWithinContext(accessor => {\n        const canPeek = !openToSide && this.editor.getOption(89 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n        const action = new DefinitionAction({\n          openToSide,\n          openInPeek: canPeek,\n          muteMessage: true\n        }, {\n          title: {\n            value: '',\n            original: ''\n          },\n          id: '',\n          precondition: undefined\n        });\n        return action.run(accessor);\n      });\n    }\n    isInPeekEditor(accessor) {\n      const contextKeyService = accessor.get(IContextKeyService);\n      return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n      this.toUnhook.dispose();\n      this.toUnhookForKeyboard.dispose();\n    }\n  };\n  return GotoDefinitionAtPositionEditorContribution;\n})();\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([__param(1, ITextModelService), __param(2, ILanguageService), __param(3, ILanguageFeaturesService)], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar MarkerController_1;\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = /*#__PURE__*/(() => {\n  let MarkerController = class MarkerController {\n    static {\n      MarkerController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.markerController';\n    }\n    static get(editor) {\n      return editor.getContribution(MarkerController_1.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n      this._markerNavigationService = _markerNavigationService;\n      this._contextKeyService = _contextKeyService;\n      this._editorService = _editorService;\n      this._instantiationService = _instantiationService;\n      this._sessionDispoables = new DisposableStore();\n      this._editor = editor;\n      this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n      this._cleanUp();\n      this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n      this._widgetVisible.reset();\n      this._sessionDispoables.clear();\n      this._widget = undefined;\n      this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n      if (this._model && this._model.matches(uri)) {\n        return this._model;\n      }\n      let reusePosition = false;\n      if (this._model) {\n        reusePosition = true;\n        this._cleanUp();\n      }\n      this._model = this._markerNavigationService.getMarkerList(uri);\n      if (reusePosition) {\n        this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n      }\n      this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n      this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n      this._widgetVisible.set(true);\n      this._sessionDispoables.add(this._model);\n      this._sessionDispoables.add(this._widget);\n      // follow cursor\n      this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n        if (!this._model?.selected || !Range.containsPosition(this._model?.selected.marker, e.position)) {\n          this._model?.resetIndex();\n        }\n      }));\n      // update markers\n      this._sessionDispoables.add(this._model.onDidChange(() => {\n        if (!this._widget || !this._widget.position || !this._model) {\n          return;\n        }\n        const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n        if (info) {\n          this._widget.updateMarker(info.marker);\n        } else {\n          this._widget.showStale();\n        }\n      }));\n      // open related\n      this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n        this._editorService.openCodeEditor({\n          resource: related.resource,\n          options: {\n            pinned: true,\n            revealIfOpened: true,\n            selection: Range.lift(related).collapseToStart()\n          }\n        }, this._editor);\n        this.close(false);\n      }));\n      this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n      return this._model;\n    }\n    close(focusEditor = true) {\n      this._cleanUp();\n      if (focusEditor) {\n        this._editor.focus();\n      }\n    }\n    showAtMarker(marker) {\n      if (this._editor.hasModel()) {\n        const model = this._getOrCreateModel(this._editor.getModel().uri);\n        model.resetIndex();\n        model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n        if (model.selected) {\n          this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n        }\n      }\n    }\n    async nagivate(next, multiFile) {\n      if (this._editor.hasModel()) {\n        const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n        model.move(next, this._editor.getModel(), this._editor.getPosition());\n        if (!model.selected) {\n          return;\n        }\n        if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n          // show in different editor\n          this._cleanUp();\n          const otherEditor = await this._editorService.openCodeEditor({\n            resource: model.selected.marker.resource,\n            options: {\n              pinned: false,\n              revealIfOpened: true,\n              selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */,\n              selection: model.selected.marker\n            }\n          }, this._editor);\n          if (otherEditor) {\n            MarkerController_1.get(otherEditor)?.close();\n            MarkerController_1.get(otherEditor)?.nagivate(next, multiFile);\n          }\n        } else {\n          // show in this editor\n          this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n        }\n      }\n    }\n  };\n  return MarkerController;\n})();\nMarkerController = MarkerController_1 = __decorate([__param(1, IMarkerNavigationService), __param(2, IContextKeyService), __param(3, ICodeEditorService), __param(4, IInstantiationService)], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n  constructor(_next, _multiFile, opts) {\n    super(opts);\n    this._next = _next;\n    this._multiFile = _multiFile;\n  }\n  async run(_accessor, editor) {\n    if (editor.hasModel()) {\n      MarkerController.get(editor)?.nagivate(this._next, this._multiFile);\n    }\n  }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n  static {\n    this.ID = 'editor.action.marker.next';\n  }\n  static {\n    this.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\n  }\n  constructor() {\n    super(true, false, {\n      id: NextMarkerAction.ID,\n      label: NextMarkerAction.LABEL,\n      alias: 'Go to Next Problem (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MarkerNavigationWidget.TitleMenu,\n        title: NextMarkerAction.LABEL,\n        icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n        group: 'navigation',\n        order: 1\n      }\n    });\n  }\n}\nclass PrevMarkerAction extends MarkerNavigationAction {\n  static {\n    this.ID = 'editor.action.marker.prev';\n  }\n  static {\n    this.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\n  }\n  constructor() {\n    super(false, false, {\n      id: PrevMarkerAction.ID,\n      label: PrevMarkerAction.LABEL,\n      alias: 'Go to Previous Problem (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MarkerNavigationWidget.TitleMenu,\n        title: PrevMarkerAction.LABEL,\n        icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n        group: 'navigation',\n        order: 2\n      }\n    });\n  }\n}\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n  constructor() {\n    super(true, true, {\n      id: 'editor.action.marker.nextInFiles',\n      label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 66 /* KeyCode.F8 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarGoMenu,\n        title: nls.localize({\n          key: 'miGotoNextProblem',\n          comment: ['&& denotes a mnemonic']\n        }, \"Next &&Problem\"),\n        group: '6_problem_nav',\n        order: 1\n      }\n    });\n  }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n  constructor() {\n    super(false, true, {\n      id: 'editor.action.marker.prevInFiles',\n      label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarGoMenu,\n        title: nls.localize({\n          key: 'miGotoPreviousProblem',\n          comment: ['&& denotes a mnemonic']\n        }, \"Previous &&Problem\"),\n        group: '6_problem_nav',\n        order: 2\n      }\n    });\n  }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n  id: 'closeMarkersNavigation',\n  precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n  handler: x => x.close(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n  constructor(marker, index, total) {\n    this.marker = marker;\n    this.index = index;\n    this.total = total;\n  }\n}\nlet MarkerList = class MarkerList {\n  constructor(resourceFilter, _markerService, _configService) {\n    this._markerService = _markerService;\n    this._configService = _configService;\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n    this._dispoables = new DisposableStore();\n    this._markers = [];\n    this._nextIdx = -1;\n    if (URI.isUri(resourceFilter)) {\n      this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n    } else if (resourceFilter) {\n      this._resourceFilter = resourceFilter;\n    }\n    const compareOrder = this._configService.getValue('problems.sortOrder');\n    const compareMarker = (a, b) => {\n      let res = compare(a.resource.toString(), b.resource.toString());\n      if (res === 0) {\n        if (compareOrder === 'position') {\n          res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n        } else {\n          res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n        }\n      }\n      return res;\n    };\n    const updateMarker = () => {\n      this._markers = this._markerService.read({\n        resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n        severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n      });\n      if (typeof resourceFilter === 'function') {\n        this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n      }\n      this._markers.sort(compareMarker);\n    };\n    updateMarker();\n    this._dispoables.add(_markerService.onMarkerChanged(uris => {\n      if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n        updateMarker();\n        this._nextIdx = -1;\n        this._onDidChange.fire();\n      }\n    }));\n  }\n  dispose() {\n    this._dispoables.dispose();\n    this._onDidChange.dispose();\n  }\n  matches(uri) {\n    if (!this._resourceFilter && !uri) {\n      return true;\n    }\n    if (!this._resourceFilter || !uri) {\n      return false;\n    }\n    return this._resourceFilter(uri);\n  }\n  get selected() {\n    const marker = this._markers[this._nextIdx];\n    return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n  }\n  _initIdx(model, position, fwd) {\n    let found = false;\n    let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n    if (idx < 0) {\n      idx = binarySearch(this._markers, {\n        resource: model.uri\n      }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n      if (idx < 0) {\n        idx = ~idx;\n      }\n    }\n    for (let i = idx; i < this._markers.length; i++) {\n      let range = Range.lift(this._markers[i]);\n      if (range.isEmpty()) {\n        const word = model.getWordAtPosition(range.getStartPosition());\n        if (word) {\n          range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n        }\n      }\n      if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n        this._nextIdx = i;\n        found = true;\n        break;\n      }\n      if (this._markers[i].resource.toString() !== model.uri.toString()) {\n        break;\n      }\n    }\n    if (!found) {\n      // after the last change\n      this._nextIdx = fwd ? 0 : this._markers.length - 1;\n    }\n    if (this._nextIdx < 0) {\n      this._nextIdx = this._markers.length - 1;\n    }\n  }\n  resetIndex() {\n    this._nextIdx = -1;\n  }\n  move(fwd, model, position) {\n    if (this._markers.length === 0) {\n      return false;\n    }\n    const oldIdx = this._nextIdx;\n    if (this._nextIdx === -1) {\n      this._initIdx(model, position, fwd);\n    } else if (fwd) {\n      this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n    } else if (!fwd) {\n      this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n    }\n    if (oldIdx !== this._nextIdx) {\n      return true;\n    }\n    return false;\n  }\n  find(uri, position) {\n    let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n    if (idx < 0) {\n      return undefined;\n    }\n    for (; idx < this._markers.length; idx++) {\n      if (Range.containsPosition(this._markers[idx], position)) {\n        return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n      }\n    }\n    return undefined;\n  }\n};\nMarkerList = __decorate([__param(1, IMarkerService), __param(2, IConfigurationService)], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n  constructor(_markerService, _configService) {\n    this._markerService = _markerService;\n    this._configService = _configService;\n    this._provider = new LinkedList();\n  }\n  getMarkerList(resource) {\n    for (const provider of this._provider) {\n      const result = provider.getMarkerList(resource);\n      if (result) {\n        return result;\n      }\n    }\n    // default\n    return new MarkerList(resource, this._markerService, this._configService);\n  }\n};\nMarkerNavigationService = __decorate([__param(0, IMarkerService), __param(1, IConfigurationService)], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar MarkerNavigationWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n  constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n    this._openerService = _openerService;\n    this._labelService = _labelService;\n    this._lines = 0;\n    this._longestLineLength = 0;\n    this._relatedDiagnostics = new WeakMap();\n    this._disposables = new DisposableStore();\n    this._editor = editor;\n    const domNode = document.createElement('div');\n    domNode.className = 'descriptioncontainer';\n    this._messageBlock = document.createElement('div');\n    this._messageBlock.classList.add('message');\n    this._messageBlock.setAttribute('aria-live', 'assertive');\n    this._messageBlock.setAttribute('role', 'alert');\n    domNode.appendChild(this._messageBlock);\n    this._relatedBlock = document.createElement('div');\n    domNode.appendChild(this._relatedBlock);\n    this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n      event.preventDefault();\n      const related = this._relatedDiagnostics.get(event.target);\n      if (related) {\n        onRelatedInformation(related);\n      }\n    }));\n    this._scrollable = new ScrollableElement(domNode, {\n      horizontal: 1 /* ScrollbarVisibility.Auto */,\n      vertical: 1 /* ScrollbarVisibility.Auto */,\n      useShadows: false,\n      horizontalScrollbarSize: 6,\n      verticalScrollbarSize: 6\n    });\n    parent.appendChild(this._scrollable.getDomNode());\n    this._disposables.add(this._scrollable.onScroll(e => {\n      domNode.style.left = `-${e.scrollLeft}px`;\n      domNode.style.top = `-${e.scrollTop}px`;\n    }));\n    this._disposables.add(this._scrollable);\n  }\n  dispose() {\n    dispose(this._disposables);\n  }\n  update(marker) {\n    const {\n      source,\n      message,\n      relatedInformation,\n      code\n    } = marker;\n    let sourceAndCodeLength = (source?.length || 0) + '()'.length;\n    if (code) {\n      if (typeof code === 'string') {\n        sourceAndCodeLength += code.length;\n      } else {\n        sourceAndCodeLength += code.value.length;\n      }\n    }\n    const lines = splitLines(message);\n    this._lines = lines.length;\n    this._longestLineLength = 0;\n    for (const line of lines) {\n      this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n    }\n    dom.clearNode(this._messageBlock);\n    this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n    this._editor.applyFontInfo(this._messageBlock);\n    let lastLineElement = this._messageBlock;\n    for (const line of lines) {\n      lastLineElement = document.createElement('div');\n      lastLineElement.innerText = line;\n      if (line === '') {\n        lastLineElement.style.height = this._messageBlock.style.lineHeight;\n      }\n      this._messageBlock.appendChild(lastLineElement);\n    }\n    if (source || code) {\n      const detailsElement = document.createElement('span');\n      detailsElement.classList.add('details');\n      lastLineElement.appendChild(detailsElement);\n      if (source) {\n        const sourceElement = document.createElement('span');\n        sourceElement.innerText = source;\n        sourceElement.classList.add('source');\n        detailsElement.appendChild(sourceElement);\n      }\n      if (code) {\n        if (typeof code === 'string') {\n          const codeElement = document.createElement('span');\n          codeElement.innerText = `(${code})`;\n          codeElement.classList.add('code');\n          detailsElement.appendChild(codeElement);\n        } else {\n          this._codeLink = dom.$('a.code-link');\n          this._codeLink.setAttribute('href', `${code.target.toString()}`);\n          this._codeLink.onclick = e => {\n            this._openerService.open(code.target, {\n              allowCommands: true\n            });\n            e.preventDefault();\n            e.stopPropagation();\n          };\n          const codeElement = dom.append(this._codeLink, dom.$('span'));\n          codeElement.innerText = code.value;\n          detailsElement.appendChild(this._codeLink);\n        }\n      }\n    }\n    dom.clearNode(this._relatedBlock);\n    this._editor.applyFontInfo(this._relatedBlock);\n    if (isNonEmptyArray(relatedInformation)) {\n      const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n      relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(67 /* EditorOption.lineHeight */) * 0.66)}px`;\n      this._lines += 1;\n      for (const related of relatedInformation) {\n        const container = document.createElement('div');\n        const relatedResource = document.createElement('a');\n        relatedResource.classList.add('filename');\n        relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n        relatedResource.title = this._labelService.getUriLabel(related.resource);\n        this._relatedDiagnostics.set(relatedResource, related);\n        const relatedMessage = document.createElement('span');\n        relatedMessage.innerText = related.message;\n        container.appendChild(relatedResource);\n        container.appendChild(relatedMessage);\n        this._lines += 1;\n        relatedInformationNode.appendChild(container);\n      }\n    }\n    const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n    const scrollHeight = fontInfo.lineHeight * this._lines;\n    this._scrollable.setScrollDimensions({\n      scrollWidth,\n      scrollHeight\n    });\n  }\n  layout(height, width) {\n    this._scrollable.getDomNode().style.height = `${height}px`;\n    this._scrollable.getDomNode().style.width = `${width}px`;\n    this._scrollable.setScrollDimensions({\n      width,\n      height\n    });\n  }\n  getHeightInLines() {\n    return Math.min(17, this._lines);\n  }\n  getAriaLabel(marker) {\n    let severityLabel = '';\n    switch (marker.severity) {\n      case MarkerSeverity.Error:\n        severityLabel = nls.localize('Error', \"Error\");\n        break;\n      case MarkerSeverity.Warning:\n        severityLabel = nls.localize('Warning', \"Warning\");\n        break;\n      case MarkerSeverity.Info:\n        severityLabel = nls.localize('Info', \"Info\");\n        break;\n      case MarkerSeverity.Hint:\n        severityLabel = nls.localize('Hint', \"Hint\");\n        break;\n    }\n    let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n    const model = this._editor.getModel();\n    if (model && marker.startLineNumber <= model.getLineCount() && marker.startLineNumber >= 1) {\n      const lineContent = model.getLineContent(marker.startLineNumber);\n      ariaLabel = `${lineContent}, ${ariaLabel}`;\n    }\n    return ariaLabel;\n  }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n  static {\n    MarkerNavigationWidget_1 = this;\n  }\n  static {\n    this.TitleMenu = new MenuId('gotoErrorTitleMenu');\n  }\n  constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n    super(editor, {\n      showArrow: true,\n      showFrame: true,\n      isAccessible: true,\n      frameWidth: 1\n    }, instantiationService);\n    this._themeService = _themeService;\n    this._openerService = _openerService;\n    this._menuService = _menuService;\n    this._contextKeyService = _contextKeyService;\n    this._labelService = _labelService;\n    this._callOnDispose = new DisposableStore();\n    this._onDidSelectRelatedInformation = new Emitter();\n    this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n    this._severity = MarkerSeverity.Warning;\n    this._backgroundColor = Color.white;\n    this._applyTheme(_themeService.getColorTheme());\n    this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    this.create();\n  }\n  _applyTheme(theme) {\n    this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n    let colorId = editorMarkerNavigationError;\n    let headerBackground = editorMarkerNavigationErrorHeader;\n    if (this._severity === MarkerSeverity.Warning) {\n      colorId = editorMarkerNavigationWarning;\n      headerBackground = editorMarkerNavigationWarningHeader;\n    } else if (this._severity === MarkerSeverity.Info) {\n      colorId = editorMarkerNavigationInfo;\n      headerBackground = editorMarkerNavigationInfoHeader;\n    }\n    const frameColor = theme.getColor(colorId);\n    const headerBg = theme.getColor(headerBackground);\n    this.style({\n      arrowColor: frameColor,\n      frameColor: frameColor,\n      headerBackgroundColor: headerBg,\n      primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n    }); // style() will trigger _applyStyles\n  }\n  _applyStyles() {\n    if (this._parentContainer) {\n      this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n    }\n    super._applyStyles();\n  }\n  dispose() {\n    this._callOnDispose.dispose();\n    super.dispose();\n  }\n  _fillHead(container) {\n    super._fillHead(container);\n    this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n    const actions = [];\n    const menu = this._menuService.getMenuActions(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\n    createAndFillInActionBarActions(menu, actions);\n    this._actionbarWidget.push(actions, {\n      label: false,\n      icon: true,\n      index: 0\n    });\n  }\n  _fillTitleIcon(container) {\n    this._icon = dom.append(container, dom.$(''));\n  }\n  _fillBody(container) {\n    this._parentContainer = container;\n    container.classList.add('marker-widget');\n    this._parentContainer.tabIndex = 0;\n    this._parentContainer.setAttribute('role', 'tooltip');\n    this._container = document.createElement('div');\n    container.appendChild(this._container);\n    this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n    this._disposables.add(this._message);\n  }\n  show() {\n    throw new Error('call showAtMarker');\n  }\n  showAtMarker(marker, markerIdx, markerCount) {\n    // update:\n    // * title\n    // * message\n    this._container.classList.remove('stale');\n    this._message.update(marker);\n    // update frame color (only applied on 'show')\n    this._severity = marker.severity;\n    this._applyTheme(this._themeService.getColorTheme());\n    // show\n    const range = Range.lift(marker);\n    const editorPosition = this.editor.getPosition();\n    const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n    super.show(position, this.computeRequiredHeight());\n    const model = this.editor.getModel();\n    if (model) {\n      const detail = markerCount > 1 ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount) : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n      this.setTitle(basename(model.uri), detail);\n    }\n    this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n    this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n    this.editor.focus();\n  }\n  updateMarker(marker) {\n    this._container.classList.remove('stale');\n    this._message.update(marker);\n  }\n  showStale() {\n    this._container.classList.add('stale');\n    this._relayout();\n  }\n  _doLayoutBody(heightInPixel, widthInPixel) {\n    super._doLayoutBody(heightInPixel, widthInPixel);\n    this._heightInPixel = heightInPixel;\n    this._message.layout(heightInPixel, widthInPixel);\n    this._container.style.height = `${heightInPixel}px`;\n  }\n  _onWidth(widthInPixel) {\n    this._message.layout(this._heightInPixel, widthInPixel);\n  }\n  _relayout() {\n    super._relayout(this.computeRequiredHeight());\n  }\n  computeRequiredHeight() {\n    return 3 + this._message.getHeightInLines();\n  }\n};\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([__param(1, IThemeService), __param(2, IOpenerService), __param(3, IMenuService), __param(4, IInstantiationService), __param(5, IContextKeyService), __param(6, ILabelService)], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', {\n  dark: errorDefault,\n  light: errorDefault,\n  hcDark: contrastBorder,\n  hcLight: contrastBorder\n}, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', {\n  dark: transparent(editorMarkerNavigationError, .1),\n  light: transparent(editorMarkerNavigationError, .1),\n  hcDark: null,\n  hcLight: null\n}, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', {\n  dark: warningDefault,\n  light: warningDefault,\n  hcDark: contrastBorder,\n  hcLight: contrastBorder\n}, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', {\n  dark: transparent(editorMarkerNavigationWarning, .1),\n  light: transparent(editorMarkerNavigationWarning, .1),\n  hcDark: '#0C141F',\n  hcLight: transparent(editorMarkerNavigationWarning, .2)\n}, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', {\n  dark: infoDefault,\n  light: infoDefault,\n  hcDark: contrastBorder,\n  hcLight: contrastBorder\n}, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', {\n  dark: transparent(editorMarkerNavigationInfo, .1),\n  light: transparent(editorMarkerNavigationInfo, .1),\n  hcDark: null,\n  hcLight: null\n}, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', editorBackground, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './media/severityIcon.css';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport Severity from '../../../base/common/severity.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n  function className(severity) {\n    switch (severity) {\n      case Severity.Ignore:\n        return 'severity-ignore ' + ThemeIcon.asClassName(Codicon.info);\n      case Severity.Info:\n        return ThemeIcon.asClassName(Codicon.info);\n      case Severity.Warning:\n        return ThemeIcon.asClassName(Codicon.warning);\n      case Severity.Error:\n        return ThemeIcon.asClassName(Codicon.error);\n      default:\n        return '';\n    }\n  }\n  SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DECREASE_HOVER_VERBOSITY_ACTION_ID, DECREASE_HOVER_VERBOSITY_ACTION_LABEL, GO_TO_BOTTOM_HOVER_ACTION_ID, GO_TO_TOP_HOVER_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_LABEL, PAGE_DOWN_HOVER_ACTION_ID, PAGE_UP_HOVER_ACTION_ID, SCROLL_DOWN_HOVER_ACTION_ID, SCROLL_LEFT_HOVER_ACTION_ID, SCROLL_RIGHT_HOVER_ACTION_ID, SCROLL_UP_HOVER_ACTION_ID, SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID, SHOW_OR_FOCUS_HOVER_ACTION_ID } from './hoverActionIds.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverController } from './contentHoverController2.js';\nimport { HoverVerbosityAction } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport './hover.css';\nvar HoverFocusBehavior = /*#__PURE__*/function (HoverFocusBehavior) {\n  HoverFocusBehavior[\"NoAutoFocus\"] = \"noAutoFocus\";\n  HoverFocusBehavior[\"FocusIfVisible\"] = \"focusIfVisible\";\n  HoverFocusBehavior[\"AutoFocusImmediately\"] = \"autoFocusImmediately\";\n  return HoverFocusBehavior;\n}(HoverFocusBehavior || {});\nexport class ShowOrFocusHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SHOW_OR_FOCUS_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'showOrFocusHover',\n        comment: ['Label for action that will trigger the showing/focusing of a hover in the editor.', 'If the hover is not visible, it will show the hover.', 'This allows for users to show the hover without using the mouse.']\n      }, \"Show or Focus Hover\"),\n      metadata: {\n        description: nls.localize2('showOrFocusHoverDescription', 'Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position.'),\n        args: [{\n          name: 'args',\n          schema: {\n            type: 'object',\n            properties: {\n              'focus': {\n                description: 'Controls if and when the hover should take focus upon being triggered by this action.',\n                enum: [HoverFocusBehavior.NoAutoFocus, HoverFocusBehavior.FocusIfVisible, HoverFocusBehavior.AutoFocusImmediately],\n                enumDescriptions: [nls.localize('showOrFocusHover.focus.noAutoFocus', 'The hover will not automatically take focus.'), nls.localize('showOrFocusHover.focus.focusIfVisible', 'The hover will take focus only if it is already visible.'), nls.localize('showOrFocusHover.focus.autoFocusImmediately', 'The hover will automatically take focus when it appears.')],\n                default: HoverFocusBehavior.FocusIfVisible\n              }\n            }\n          }\n        }]\n      },\n      alias: 'Show or Focus Hover',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    const focusArgument = args?.focus;\n    let focusOption = HoverFocusBehavior.FocusIfVisible;\n    if (Object.values(HoverFocusBehavior).includes(focusArgument)) {\n      focusOption = focusArgument;\n    } else if (typeof focusArgument === 'boolean' && focusArgument) {\n      focusOption = HoverFocusBehavior.AutoFocusImmediately;\n    }\n    const showContentHover = focus => {\n      const position = editor.getPosition();\n      const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n      controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, focus);\n    };\n    const accessibilitySupportEnabled = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */;\n    if (controller.isHoverVisible) {\n      if (focusOption !== HoverFocusBehavior.NoAutoFocus) {\n        controller.focus();\n      } else {\n        showContentHover(accessibilitySupportEnabled);\n      }\n    } else {\n      showContentHover(accessibilitySupportEnabled || focusOption === HoverFocusBehavior.AutoFocusImmediately);\n    }\n  }\n}\nexport class ShowDefinitionPreviewHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'showDefinitionPreviewHover',\n        comment: ['Label for action that will trigger the showing of definition preview hover in the editor.', 'This allows for users to show the definition preview hover without using the mouse.']\n      }, \"Show Definition Preview Hover\"),\n      alias: 'Show Definition Preview Hover',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('showDefinitionPreviewHoverDescription', 'Show the definition preview hover in the editor.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    const position = editor.getPosition();\n    if (!position) {\n      return;\n    }\n    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n    if (!goto) {\n      return;\n    }\n    const promise = goto.startFindDefinitionFromCursor(position);\n    promise.then(() => {\n      controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, true);\n    });\n  }\n}\nexport class ScrollUpHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SCROLL_UP_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'scrollUpHover',\n        comment: ['Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused.']\n      }, \"Scroll Up Hover\"),\n      alias: 'Scroll Up Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 16 /* KeyCode.UpArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('scrollUpHoverDescription', 'Scroll up the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.scrollUp();\n  }\n}\nexport class ScrollDownHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SCROLL_DOWN_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'scrollDownHover',\n        comment: ['Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused.']\n      }, \"Scroll Down Hover\"),\n      alias: 'Scroll Down Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 18 /* KeyCode.DownArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('scrollDownHoverDescription', 'Scroll down the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.scrollDown();\n  }\n}\nexport class ScrollLeftHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SCROLL_LEFT_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'scrollLeftHover',\n        comment: ['Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused.']\n      }, \"Scroll Left Hover\"),\n      alias: 'Scroll Left Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 15 /* KeyCode.LeftArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('scrollLeftHoverDescription', 'Scroll left the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.scrollLeft();\n  }\n}\nexport class ScrollRightHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: SCROLL_RIGHT_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'scrollRightHover',\n        comment: ['Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused.']\n      }, \"Scroll Right Hover\"),\n      alias: 'Scroll Right Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 17 /* KeyCode.RightArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('scrollRightHoverDescription', 'Scroll right the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.scrollRight();\n  }\n}\nexport class PageUpHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: PAGE_UP_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'pageUpHover',\n        comment: ['Action that allows to page up in the hover widget with the page up command when the hover widget is focused.']\n      }, \"Page Up Hover\"),\n      alias: 'Page Up Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('pageUpHoverDescription', 'Page up the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.pageUp();\n  }\n}\nexport class PageDownHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: PAGE_DOWN_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'pageDownHover',\n        comment: ['Action that allows to page down in the hover widget with the page down command when the hover widget is focused.']\n      }, \"Page Down Hover\"),\n      alias: 'Page Down Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('pageDownHoverDescription', 'Page down the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.pageDown();\n  }\n}\nexport class GoToTopHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: GO_TO_TOP_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'goToTopHover',\n        comment: ['Action that allows to go to the top of the hover widget with the home command when the hover widget is focused.']\n      }, \"Go To Top Hover\"),\n      alias: 'Go To Bottom Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 14 /* KeyCode.Home */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('goToTopHoverDescription', 'Go to the top of the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.goToTop();\n  }\n}\nexport class GoToBottomHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: GO_TO_BOTTOM_HOVER_ACTION_ID,\n      label: nls.localize({\n        key: 'goToBottomHover',\n        comment: ['Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused.']\n      }, \"Go To Bottom Hover\"),\n      alias: 'Go To Bottom Hover',\n      precondition: EditorContextKeys.hoverFocused,\n      kbOpts: {\n        kbExpr: EditorContextKeys.hoverFocused,\n        primary: 13 /* KeyCode.End */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      metadata: {\n        description: nls.localize2('goToBottomHoverDescription', 'Go to the bottom of the editor hover.')\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ContentHoverController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.goToBottom();\n  }\n}\nexport class IncreaseHoverVerbosityLevel extends EditorAction {\n  constructor() {\n    super({\n      id: INCREASE_HOVER_VERBOSITY_ACTION_ID,\n      label: INCREASE_HOVER_VERBOSITY_ACTION_LABEL,\n      alias: 'Increase Hover Verbosity Level',\n      precondition: EditorContextKeys.hoverVisible\n    });\n  }\n  run(accessor, editor, args) {\n    const hoverController = ContentHoverController.get(editor);\n    if (!hoverController) {\n      return;\n    }\n    const index = args?.index !== undefined ? args.index : hoverController.focusedHoverPartIndex();\n    hoverController.updateHoverVerbosityLevel(HoverVerbosityAction.Increase, index, args?.focus);\n  }\n}\nexport class DecreaseHoverVerbosityLevel extends EditorAction {\n  constructor() {\n    super({\n      id: DECREASE_HOVER_VERBOSITY_ACTION_ID,\n      label: DECREASE_HOVER_VERBOSITY_ACTION_LABEL,\n      alias: 'Decrease Hover Verbosity Level',\n      precondition: EditorContextKeys.hoverVisible\n    });\n  }\n  run(accessor, editor, args) {\n    const hoverController = ContentHoverController.get(editor);\n    if (!hoverController) {\n      return;\n    }\n    const index = args?.index !== undefined ? args.index : hoverController.focusedHoverPartIndex();\n    ContentHoverController.get(editor)?.updateHoverVerbosityLevel(HoverVerbosityAction.Decrease, index, args?.focus);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DecreaseHoverVerbosityLevel, GoToBottomHoverAction, GoToTopHoverAction, IncreaseHoverVerbosityLevel, PageDownHoverAction, PageUpHoverAction, ScrollDownHoverAction, ScrollLeftHoverAction, ScrollRightHoverAction, ScrollUpHoverAction, ShowDefinitionPreviewHoverAction, ShowOrFocusHoverAction } from './hoverActions.js';\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nimport { ContentHoverController } from './contentHoverController2.js';\nimport { MarginHoverController } from './marginHoverController.js';\nimport './hover.css';\nimport { AccessibleViewRegistry } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { ExtHoverAccessibleView, HoverAccessibilityHelp, HoverAccessibleView } from './hoverAccessibleViews.js';\nregisterEditorContribution(ContentHoverController.ID, ContentHoverController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(MarginHoverController.ID, MarginHoverController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowOrFocusHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nregisterEditorAction(ScrollUpHoverAction);\nregisterEditorAction(ScrollDownHoverAction);\nregisterEditorAction(ScrollLeftHoverAction);\nregisterEditorAction(ScrollRightHoverAction);\nregisterEditorAction(PageUpHoverAction);\nregisterEditorAction(PageDownHoverAction);\nregisterEditorAction(GoToTopHoverAction);\nregisterEditorAction(GoToBottomHoverAction);\nregisterEditorAction(IncreaseHoverVerbosityLevel);\nregisterEditorAction(DecreaseHoverVerbosityLevel);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n  const hoverBorder = theme.getColor(editorHoverBorder);\n  if (hoverBorder) {\n    collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n  }\n});\nAccessibleViewRegistry.register(new HoverAccessibleView());\nAccessibleViewRegistry.register(new HoverAccessibilityHelp());\nAccessibleViewRegistry.register(new ExtHoverAccessibleView());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions, quickFixCommandId } from '../../codeAction/browser/codeAction.js';\nimport { CodeActionController } from '../../codeAction/browser/codeActionController.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/common/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport { RenderedHoverParts } from './hoverTypes.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nconst $ = dom.$;\nexport class MarkerHover {\n  constructor(owner, range, marker) {\n    this.owner = owner;\n    this.range = range;\n    this.marker = marker;\n  }\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1 /* HoverAnchorType.Range */ && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n}\nconst markerCodeActionTrigger = {\n  type: 1 /* CodeActionTriggerType.Invoke */,\n  filter: {\n    include: CodeActionKind.QuickFix\n  },\n  triggerAction: CodeActionTriggerSource.QuickFixHover\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n  constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n    this._editor = _editor;\n    this._markerDecorationsService = _markerDecorationsService;\n    this._openerService = _openerService;\n    this._languageFeaturesService = _languageFeaturesService;\n    this.hoverOrdinal = 1;\n    this.recentMarkerCodeActionsInfo = undefined;\n  }\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\n      return [];\n    }\n    const model = this._editor.getModel();\n    const lineNumber = anchor.range.startLineNumber;\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    const result = [];\n    for (const d of lineDecorations) {\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n      const marker = this._markerDecorationsService.getMarker(model.uri, d);\n      if (!marker) {\n        continue;\n      }\n      const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n      result.push(new MarkerHover(this, range, marker));\n    }\n    return result;\n  }\n  renderHoverParts(context, hoverParts) {\n    if (!hoverParts.length) {\n      return new RenderedHoverParts([]);\n    }\n    const disposables = new DisposableStore();\n    const renderedHoverParts = [];\n    hoverParts.forEach(hoverPart => {\n      const renderedMarkerHover = this._renderMarkerHover(hoverPart);\n      context.fragment.appendChild(renderedMarkerHover.hoverElement);\n      renderedHoverParts.push(renderedMarkerHover);\n    });\n    const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n    this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n    return new RenderedHoverParts(renderedHoverParts);\n  }\n  _renderMarkerHover(markerHover) {\n    const disposables = new DisposableStore();\n    const hoverElement = $('div.hover-row');\n    const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n    const {\n      source,\n      message,\n      code,\n      relatedInformation\n    } = markerHover.marker;\n    this._editor.applyFontInfo(markerElement);\n    const messageElement = dom.append(markerElement, $('span'));\n    messageElement.style.whiteSpace = 'pre-wrap';\n    messageElement.innerText = message;\n    if (source || code) {\n      // Code has link\n      if (code && typeof code !== 'string') {\n        const sourceAndCodeElement = $('span');\n        if (source) {\n          const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n          sourceElement.innerText = source;\n        }\n        const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n        codeLink.setAttribute('href', code.target.toString());\n        disposables.add(dom.addDisposableListener(codeLink, 'click', e => {\n          this._openerService.open(code.target, {\n            allowCommands: true\n          });\n          e.preventDefault();\n          e.stopPropagation();\n        }));\n        const codeElement = dom.append(codeLink, $('span'));\n        codeElement.innerText = code.value;\n        const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n      } else {\n        const detailsElement = dom.append(markerElement, $('span'));\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n        detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n      }\n    }\n    if (isNonEmptyArray(relatedInformation)) {\n      for (const {\n        message,\n        resource,\n        startLineNumber,\n        startColumn\n      } of relatedInformation) {\n        const relatedInfoContainer = dom.append(markerElement, $('div'));\n        relatedInfoContainer.style.marginTop = '8px';\n        const a = dom.append(relatedInfoContainer, $('a'));\n        a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n        a.style.cursor = 'pointer';\n        disposables.add(dom.addDisposableListener(a, 'click', e => {\n          e.stopPropagation();\n          e.preventDefault();\n          if (this._openerService) {\n            const editorOptions = {\n              selection: {\n                startLineNumber,\n                startColumn\n              }\n            };\n            this._openerService.open(resource, {\n              fromUserGesture: true,\n              editorOptions\n            }).catch(onUnexpectedError);\n          }\n        }));\n        const messageElement = dom.append(relatedInfoContainer, $('span'));\n        messageElement.innerText = message;\n        this._editor.applyFontInfo(messageElement);\n      }\n    }\n    const renderedHoverPart = {\n      hoverPart: markerHover,\n      hoverElement,\n      dispose: () => disposables.dispose()\n    };\n    return renderedHoverPart;\n  }\n  renderMarkerStatusbar(context, markerHover, disposables) {\n    if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n      const markerController = MarkerController.get(this._editor);\n      if (markerController) {\n        context.statusBar.addAction({\n          label: nls.localize('view problem', \"View Problem\"),\n          commandId: NextMarkerAction.ID,\n          run: () => {\n            context.hide();\n            markerController.showAtMarker(markerHover.marker);\n            this._editor.focus();\n          }\n        });\n      }\n    }\n    if (!this._editor.getOption(92 /* EditorOption.readOnly */)) {\n      const quickfixPlaceholderElement = context.statusBar.append($('div'));\n      if (this.recentMarkerCodeActionsInfo) {\n        if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n          if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n            quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          }\n        } else {\n          this.recentMarkerCodeActionsInfo = undefined;\n        }\n      }\n      const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200, disposables);\n      if (!quickfixPlaceholderElement.textContent) {\n        // Have some content in here to avoid flickering\n        quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n      }\n      const codeActionsPromise = this.getCodeActions(markerHover.marker);\n      disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n      codeActionsPromise.then(actions => {\n        updatePlaceholderDisposable.dispose();\n        this.recentMarkerCodeActionsInfo = {\n          marker: markerHover.marker,\n          hasCodeActions: actions.validActions.length > 0\n        };\n        if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n          actions.dispose();\n          quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          return;\n        }\n        quickfixPlaceholderElement.style.display = 'none';\n        let showing = false;\n        disposables.add(toDisposable(() => {\n          if (!showing) {\n            actions.dispose();\n          }\n        }));\n        context.statusBar.addAction({\n          label: nls.localize('quick fixes', \"Quick Fix...\"),\n          commandId: quickFixCommandId,\n          run: target => {\n            showing = true;\n            const controller = CodeActionController.get(this._editor);\n            const elementPosition = dom.getDomNodePagePosition(target);\n            // Hide the hover pre-emptively, otherwise the editor can close the code actions\n            // context menu as well when using keyboard navigation\n            context.hide();\n            controller?.showCodeActions(markerCodeActionTrigger, actions, {\n              x: elementPosition.left,\n              y: elementPosition.top,\n              width: elementPosition.width,\n              height: elementPosition.height\n            });\n          }\n        });\n      }, onUnexpectedError);\n    }\n  }\n  getCodeActions(marker) {\n    return createCancelablePromise(cancellationToken => {\n      return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n    });\n  }\n};\nMarkerHoverParticipant = __decorate([__param(1, IMarkerDecorationsService), __param(2, IOpenerService), __param(3, ILanguageFeaturesService)], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nimport './hover.css';\nimport { MarginHoverWidget } from './marginHoverWidget.js';\n// sticky hover widget which doesn't disappear on focus out and such\nconst _sticky = false;\nlet MarginHoverController = class MarginHoverController extends Disposable {\n  static {\n    this.ID = 'editor.contrib.marginHover';\n  }\n  constructor(_editor, _instantiationService) {\n    super();\n    this._editor = _editor;\n    this._instantiationService = _instantiationService;\n    this.shouldKeepOpenOnEditorMouseMoveOrLeave = false;\n    this._listenersStore = new DisposableStore();\n    this._hoverState = {\n      mouseDown: false\n    };\n    this._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(() => this._reactToEditorMouseMove(this._mouseMoveEvent), 0));\n    this._hookListeners();\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(60 /* EditorOption.hover */)) {\n        this._unhookListeners();\n        this._hookListeners();\n      }\n    }));\n  }\n  _hookListeners() {\n    const hoverOpts = this._editor.getOption(60 /* EditorOption.hover */);\n    this._hoverSettings = {\n      enabled: hoverOpts.enabled,\n      sticky: hoverOpts.sticky,\n      hidingDelay: hoverOpts.hidingDelay\n    };\n    if (hoverOpts.enabled) {\n      this._listenersStore.add(this._editor.onMouseDown(e => this._onEditorMouseDown(e)));\n      this._listenersStore.add(this._editor.onMouseUp(() => this._onEditorMouseUp()));\n      this._listenersStore.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n      this._listenersStore.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n    } else {\n      this._listenersStore.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n      this._listenersStore.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n    }\n    this._listenersStore.add(this._editor.onMouseLeave(e => this._onEditorMouseLeave(e)));\n    this._listenersStore.add(this._editor.onDidChangeModel(() => {\n      this._cancelScheduler();\n      this._hideWidgets();\n    }));\n    this._listenersStore.add(this._editor.onDidChangeModelContent(() => this._cancelScheduler()));\n    this._listenersStore.add(this._editor.onDidScrollChange(e => this._onEditorScrollChanged(e)));\n  }\n  _unhookListeners() {\n    this._listenersStore.clear();\n  }\n  _cancelScheduler() {\n    this._mouseMoveEvent = undefined;\n    this._reactToEditorMouseMoveRunner.cancel();\n  }\n  _onEditorScrollChanged(e) {\n    if (e.scrollTopChanged || e.scrollLeftChanged) {\n      this._hideWidgets();\n    }\n  }\n  _onEditorMouseDown(mouseEvent) {\n    this._hoverState.mouseDown = true;\n    const shouldNotHideCurrentHoverWidget = this._isMouseOnMarginHoverWidget(mouseEvent);\n    if (shouldNotHideCurrentHoverWidget) {\n      return;\n    }\n    this._hideWidgets();\n  }\n  _isMouseOnMarginHoverWidget(mouseEvent) {\n    const marginHoverWidgetNode = this._glyphWidget?.getDomNode();\n    if (marginHoverWidgetNode) {\n      return isMousePositionWithinElement(marginHoverWidgetNode, mouseEvent.event.posx, mouseEvent.event.posy);\n    }\n    return false;\n  }\n  _onEditorMouseUp() {\n    this._hoverState.mouseDown = false;\n  }\n  _onEditorMouseLeave(mouseEvent) {\n    if (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n      return;\n    }\n    this._cancelScheduler();\n    const shouldNotHideCurrentHoverWidget = this._isMouseOnMarginHoverWidget(mouseEvent);\n    if (shouldNotHideCurrentHoverWidget) {\n      return;\n    }\n    if (_sticky) {\n      return;\n    }\n    this._hideWidgets();\n  }\n  _shouldNotRecomputeCurrentHoverWidget(mouseEvent) {\n    const isHoverSticky = this._hoverSettings.sticky;\n    const isMouseOnMarginHoverWidget = this._isMouseOnMarginHoverWidget(mouseEvent);\n    return isHoverSticky && isMouseOnMarginHoverWidget;\n  }\n  _onEditorMouseMove(mouseEvent) {\n    if (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n      return;\n    }\n    this._mouseMoveEvent = mouseEvent;\n    const shouldNotRecomputeCurrentHoverWidget = this._shouldNotRecomputeCurrentHoverWidget(mouseEvent);\n    if (shouldNotRecomputeCurrentHoverWidget) {\n      this._reactToEditorMouseMoveRunner.cancel();\n      return;\n    }\n    this._reactToEditorMouseMove(mouseEvent);\n  }\n  _reactToEditorMouseMove(mouseEvent) {\n    if (!mouseEvent) {\n      return;\n    }\n    const glyphWidgetShowsOrWillShow = this._tryShowHoverWidget(mouseEvent);\n    if (glyphWidgetShowsOrWillShow) {\n      return;\n    }\n    if (_sticky) {\n      return;\n    }\n    this._hideWidgets();\n  }\n  _tryShowHoverWidget(mouseEvent) {\n    const glyphWidget = this._getOrCreateGlyphWidget();\n    return glyphWidget.showsOrWillShow(mouseEvent);\n  }\n  _onKeyDown(e) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    if (e.keyCode === 5 /* KeyCode.Ctrl */ || e.keyCode === 6 /* KeyCode.Alt */ || e.keyCode === 57 /* KeyCode.Meta */ || e.keyCode === 4 /* KeyCode.Shift */) {\n      // Do not hide hover when a modifier key is pressed\n      return;\n    }\n    this._hideWidgets();\n  }\n  _hideWidgets() {\n    if (_sticky) {\n      return;\n    }\n    this._glyphWidget?.hide();\n  }\n  _getOrCreateGlyphWidget() {\n    if (!this._glyphWidget) {\n      this._glyphWidget = this._instantiationService.createInstance(MarginHoverWidget, this._editor);\n    }\n    return this._glyphWidget;\n  }\n  dispose() {\n    super.dispose();\n    this._unhookListeners();\n    this._listenersStore.dispose();\n    this._glyphWidget?.dispose();\n  }\n};\nMarginHoverController = __decorate([__param(1, IInstantiationService)], MarginHoverController);\nexport { MarginHoverController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar MarginHoverWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { MarginHoverComputer } from './marginHoverComputer.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nconst $ = dom.$;\nlet MarginHoverWidget = /*#__PURE__*/(() => {\n  let MarginHoverWidget = class MarginHoverWidget extends Disposable {\n    static {\n      MarginHoverWidget_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.modesGlyphHoverWidget';\n    }\n    constructor(editor, languageService, openerService) {\n      super();\n      this._renderDisposeables = this._register(new DisposableStore());\n      this._editor = editor;\n      this._isVisible = false;\n      this._messages = [];\n      this._hover = this._register(new HoverWidget());\n      this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n      this._markdownRenderer = this._register(new MarkdownRenderer({\n        editor: this._editor\n      }, languageService, openerService));\n      this._computer = new MarginHoverComputer(this._editor);\n      this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n      this._register(this._hoverOperation.onResult(result => {\n        this._withResult(result.value);\n      }));\n      this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n      this._register(this._editor.onDidChangeConfiguration(e => {\n        if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n          this._updateFont();\n        }\n      }));\n      this._register(dom.addStandardDisposableListener(this._hover.containerDomNode, 'mouseleave', e => {\n        this._onMouseLeave(e);\n      }));\n      this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n      this._editor.removeOverlayWidget(this);\n      super.dispose();\n    }\n    getId() {\n      return MarginHoverWidget_1.ID;\n    }\n    getDomNode() {\n      return this._hover.containerDomNode;\n    }\n    getPosition() {\n      return null;\n    }\n    _updateFont() {\n      const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n      codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n      if (this._isVisible) {\n        // The decorations have changed and the hover is visible,\n        // we need to recompute the displayed text\n        this._hoverOperation.cancel();\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n      }\n    }\n    showsOrWillShow(mouseEvent) {\n      const target = mouseEvent.target;\n      if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.detail.glyphMarginLane) {\n        this._startShowingAt(target.position.lineNumber, target.detail.glyphMarginLane);\n        return true;\n      }\n      if (target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */) {\n        this._startShowingAt(target.position.lineNumber, 'lineNo');\n        return true;\n      }\n      return false;\n    }\n    _startShowingAt(lineNumber, laneOrLine) {\n      if (this._computer.lineNumber === lineNumber && this._computer.lane === laneOrLine) {\n        // We have to show the widget at the exact same line number as before, so no work is needed\n        return;\n      }\n      this._hoverOperation.cancel();\n      this.hide();\n      this._computer.lineNumber = lineNumber;\n      this._computer.lane = laneOrLine;\n      this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n    }\n    hide() {\n      this._computer.lineNumber = -1;\n      this._hoverOperation.cancel();\n      if (!this._isVisible) {\n        return;\n      }\n      this._isVisible = false;\n      this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n      this._messages = result;\n      if (this._messages.length > 0) {\n        this._renderMessages(this._computer.lineNumber, this._messages);\n      } else {\n        this.hide();\n      }\n    }\n    _renderMessages(lineNumber, messages) {\n      this._renderDisposeables.clear();\n      const fragment = document.createDocumentFragment();\n      for (const msg of messages) {\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n        hoverContentsElement.appendChild(renderedContents.element);\n        fragment.appendChild(markdownHoverElement);\n      }\n      this._updateContents(fragment);\n      this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n      this._hover.contentsDomNode.textContent = '';\n      this._hover.contentsDomNode.appendChild(node);\n      this._updateFont();\n    }\n    _showAt(lineNumber) {\n      if (!this._isVisible) {\n        this._isVisible = true;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n      }\n      const editorLayout = this._editor.getLayoutInfo();\n      const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n      const editorScrollTop = this._editor.getScrollTop();\n      const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      const nodeHeight = this._hover.containerDomNode.clientHeight;\n      const top = topForLineNumber - editorScrollTop - (nodeHeight - lineHeight) / 2;\n      const left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + (this._computer.lane === 'lineNo' ? editorLayout.lineNumbersWidth : 0);\n      this._hover.containerDomNode.style.left = `${left}px`;\n      this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n    _onMouseLeave(e) {\n      const editorDomNode = this._editor.getDomNode();\n      const isMousePositionOutsideOfEditor = !editorDomNode || !isMousePositionWithinElement(editorDomNode, e.x, e.y);\n      if (isMousePositionOutsideOfEditor) {\n        this.hide();\n      }\n    }\n  };\n  return MarginHoverWidget;\n})();\nMarginHoverWidget = MarginHoverWidget_1 = __decorate([__param(1, ILanguageService), __param(2, IOpenerService)], MarginHoverWidget);\nexport { MarginHoverWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { GlyphMarginLane } from '../../../common/model.js';\nexport class MarginHoverComputer {\n  get lineNumber() {\n    return this._lineNumber;\n  }\n  set lineNumber(value) {\n    this._lineNumber = value;\n  }\n  get lane() {\n    return this._laneOrLine;\n  }\n  set lane(value) {\n    this._laneOrLine = value;\n  }\n  constructor(_editor) {\n    this._editor = _editor;\n    this._lineNumber = -1;\n    this._laneOrLine = GlyphMarginLane.Center;\n  }\n  computeSync() {\n    const toHoverMessage = contents => {\n      return {\n        value: contents\n      };\n    };\n    const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n    const result = [];\n    const isLineHover = this._laneOrLine === 'lineNo';\n    if (!lineDecorations) {\n      return result;\n    }\n    for (const d of lineDecorations) {\n      const lane = d.options.glyphMargin?.position ?? GlyphMarginLane.Center;\n      if (!isLineHover && lane !== this._laneOrLine) {\n        continue;\n      }\n      const hoverMessage = isLineHover ? d.options.lineNumberHoverMessage : d.options.glyphMarginHoverMessage;\n      if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n        continue;\n      }\n      result.push(...asArray(hoverMessage).map(toHoverMessage));\n    }\n    return result;\n  }\n}","export class HoverAccessibleView {}\nexport class HoverAccessibilityHelp {}\nexport class ExtHoverAccessibleView {}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from '../common/indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getReindentEditOperations } from '../common/indentation.js';\nimport { getStandardTokenTypeAtPosition } from '../../../common/tokens/lineTokens.js';\nexport let IndentationToSpacesAction = /*#__PURE__*/(() => {\n  class IndentationToSpacesAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.indentationToSpaces';\n    }\n    constructor() {\n      super({\n        id: IndentationToSpacesAction.ID,\n        label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n        alias: 'Convert Indentation to Spaces',\n        precondition: EditorContextKeys.writable,\n        metadata: {\n          description: nls.localize2('indentationToSpacesDescription', \"Convert the tab indentation to spaces.\")\n        }\n      });\n    }\n    run(accessor, editor) {\n      const model = editor.getModel();\n      if (!model) {\n        return;\n      }\n      const modelOpts = model.getOptions();\n      const selection = editor.getSelection();\n      if (!selection) {\n        return;\n      }\n      const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n      editor.pushUndoStop();\n      editor.executeCommands(this.id, [command]);\n      editor.pushUndoStop();\n      model.updateOptions({\n        insertSpaces: true\n      });\n    }\n  }\n  return IndentationToSpacesAction;\n})();\nexport let IndentationToTabsAction = /*#__PURE__*/(() => {\n  class IndentationToTabsAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.indentationToTabs';\n    }\n    constructor() {\n      super({\n        id: IndentationToTabsAction.ID,\n        label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n        alias: 'Convert Indentation to Tabs',\n        precondition: EditorContextKeys.writable,\n        metadata: {\n          description: nls.localize2('indentationToTabsDescription', \"Convert the spaces indentation to tabs.\")\n        }\n      });\n    }\n    run(accessor, editor) {\n      const model = editor.getModel();\n      if (!model) {\n        return;\n      }\n      const modelOpts = model.getOptions();\n      const selection = editor.getSelection();\n      if (!selection) {\n        return;\n      }\n      const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n      editor.pushUndoStop();\n      editor.executeCommands(this.id, [command]);\n      editor.pushUndoStop();\n      model.updateOptions({\n        insertSpaces: false\n      });\n    }\n  }\n  return IndentationToTabsAction;\n})();\nexport class ChangeIndentationSizeAction extends EditorAction {\n  constructor(insertSpaces, displaySizeOnly, opts) {\n    super(opts);\n    this.insertSpaces = insertSpaces;\n    this.displaySizeOnly = displaySizeOnly;\n  }\n  run(accessor, editor) {\n    const quickInputService = accessor.get(IQuickInputService);\n    const modelService = accessor.get(IModelService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n    const modelOpts = model.getOptions();\n    const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n      id: n.toString(),\n      label: n.toString(),\n      // add description for tabSize value set in the configuration\n      description: n === creationOpts.tabSize && n === modelOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : n === creationOpts.tabSize ? nls.localize('defaultTabSize', \"Default Tab Size\") : n === modelOpts.tabSize ? nls.localize('currentTabSize', \"Current Tab Size\") : undefined\n    }));\n    // auto focus the tabSize set for the current editor\n    const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n    setTimeout(() => {\n      quickInputService.pick(picks, {\n        placeHolder: nls.localize({\n          key: 'selectTabWidth',\n          comment: ['Tab corresponds to the tab key']\n        }, \"Select Tab Size for Current File\"),\n        activeItem: picks[autoFocusIndex]\n      }).then(pick => {\n        if (pick) {\n          if (model && !model.isDisposed()) {\n            const pickedVal = parseInt(pick.label, 10);\n            if (this.displaySizeOnly) {\n              model.updateOptions({\n                tabSize: pickedVal\n              });\n            } else {\n              model.updateOptions({\n                tabSize: pickedVal,\n                indentSize: pickedVal,\n                insertSpaces: this.insertSpaces\n              });\n            }\n          }\n        }\n      });\n    }, 50 /* quick input is sensitive to being opened so soon after another */);\n  }\n}\nexport let IndentUsingTabs = /*#__PURE__*/(() => {\n  class IndentUsingTabs extends ChangeIndentationSizeAction {\n    static {\n      this.ID = 'editor.action.indentUsingTabs';\n    }\n    constructor() {\n      super(false, false, {\n        id: IndentUsingTabs.ID,\n        label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n        alias: 'Indent Using Tabs',\n        precondition: undefined,\n        metadata: {\n          description: nls.localize2('indentUsingTabsDescription', \"Use indentation with tabs.\")\n        }\n      });\n    }\n  }\n  return IndentUsingTabs;\n})();\nexport let IndentUsingSpaces = /*#__PURE__*/(() => {\n  class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    static {\n      this.ID = 'editor.action.indentUsingSpaces';\n    }\n    constructor() {\n      super(true, false, {\n        id: IndentUsingSpaces.ID,\n        label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n        alias: 'Indent Using Spaces',\n        precondition: undefined,\n        metadata: {\n          description: nls.localize2('indentUsingSpacesDescription', \"Use indentation with spaces.\")\n        }\n      });\n    }\n  }\n  return IndentUsingSpaces;\n})();\nexport let ChangeTabDisplaySize = /*#__PURE__*/(() => {\n  class ChangeTabDisplaySize extends ChangeIndentationSizeAction {\n    static {\n      this.ID = 'editor.action.changeTabDisplaySize';\n    }\n    constructor() {\n      super(true, true, {\n        id: ChangeTabDisplaySize.ID,\n        label: nls.localize('changeTabDisplaySize', \"Change Tab Display Size\"),\n        alias: 'Change Tab Display Size',\n        precondition: undefined,\n        metadata: {\n          description: nls.localize2('changeTabDisplaySizeDescription', \"Change the space size equivalent of the tab.\")\n        }\n      });\n    }\n  }\n  return ChangeTabDisplaySize;\n})();\nexport let DetectIndentation = /*#__PURE__*/(() => {\n  class DetectIndentation extends EditorAction {\n    static {\n      this.ID = 'editor.action.detectIndentation';\n    }\n    constructor() {\n      super({\n        id: DetectIndentation.ID,\n        label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n        alias: 'Detect Indentation from Content',\n        precondition: undefined,\n        metadata: {\n          description: nls.localize2('detectIndentationDescription', \"Detect the indentation from content.\")\n        }\n      });\n    }\n    run(accessor, editor) {\n      const modelService = accessor.get(IModelService);\n      const model = editor.getModel();\n      if (!model) {\n        return;\n      }\n      const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n      model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n  }\n  return DetectIndentation;\n})();\nexport class ReindentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.reindentlines',\n      label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n      alias: 'Reindent Lines',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('editor.reindentlinesDescription', \"Reindent the lines of the editor.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n    if (edits.length > 0) {\n      editor.pushUndoStop();\n      editor.executeEdits(this.id, edits);\n      editor.pushUndoStop();\n    }\n  }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.reindentselectedlines',\n      label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n      alias: 'Reindent Selected Lines',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('editor.reindentselectedlinesDescription', \"Reindent the selected lines of the editor.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const edits = [];\n    for (const selection of selections) {\n      let startLineNumber = selection.startLineNumber;\n      let endLineNumber = selection.endLineNumber;\n      if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n        endLineNumber--;\n      }\n      if (startLineNumber === 1) {\n        if (startLineNumber === endLineNumber) {\n          continue;\n        }\n      } else {\n        startLineNumber--;\n      }\n      const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n      edits.push(...editOperations);\n    }\n    if (edits.length > 0) {\n      editor.pushUndoStop();\n      editor.executeEdits(this.id, edits);\n      editor.pushUndoStop();\n    }\n  }\n}\nexport class AutoIndentOnPasteCommand {\n  constructor(edits, initialSelection) {\n    this._initialSelection = initialSelection;\n    this._edits = [];\n    this._selectionId = null;\n    for (const edit of edits) {\n      if (edit.range && typeof edit.text === 'string') {\n        this._edits.push(edit);\n      }\n    }\n  }\n  getEditOperations(model, builder) {\n    for (const edit of this._edits) {\n      builder.addEditOperation(Range.lift(edit.range), edit.text);\n    }\n    let selectionIsSet = false;\n    if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n      if (this._edits[0].range.startColumn === this._initialSelection.endColumn && this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n        selectionIsSet = true;\n        this._selectionId = builder.trackSelection(this._initialSelection, true);\n      } else if (this._edits[0].range.endColumn === this._initialSelection.startColumn && this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n        selectionIsSet = true;\n        this._selectionId = builder.trackSelection(this._initialSelection, false);\n      }\n    }\n    if (!selectionIsSet) {\n      this._selectionId = builder.trackSelection(this._initialSelection);\n    }\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this._selectionId);\n  }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n  static {\n    this.ID = 'editor.contrib.autoIndentOnPaste';\n  }\n  constructor(editor, _languageConfigurationService) {\n    this.editor = editor;\n    this._languageConfigurationService = _languageConfigurationService;\n    this.callOnDispose = new DisposableStore();\n    this.callOnModel = new DisposableStore();\n    this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n    this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n    this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n  }\n  update() {\n    // clean up\n    this.callOnModel.clear();\n    // we are disabled\n    if (this.editor.getOption(12 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n      return;\n    }\n    // no model\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    this.callOnModel.add(this.editor.onDidPaste(({\n      range\n    }) => {\n      this.trigger(range);\n    }));\n  }\n  trigger(range) {\n    const selections = this.editor.getSelections();\n    if (selections === null || selections.length > 1) {\n      return;\n    }\n    const model = this.editor.getModel();\n    if (!model) {\n      return;\n    }\n    const containsOnlyWhitespace = this.rangeContainsOnlyWhitespaceCharacters(model, range);\n    if (containsOnlyWhitespace) {\n      return;\n    }\n    if (isStartOrEndInString(model, range)) {\n      return;\n    }\n    if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n      return;\n    }\n    const autoIndent = this.editor.getOption(12 /* EditorOption.autoIndent */);\n    const {\n      tabSize,\n      indentSize,\n      insertSpaces\n    } = model.getOptions();\n    const textEdits = [];\n    const indentConverter = {\n      shiftIndent: indentation => {\n        return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      },\n      unshiftIndent: indentation => {\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      }\n    };\n    let startLineNumber = range.startLineNumber;\n    while (startLineNumber <= range.endLineNumber) {\n      if (this.shouldIgnoreLine(model, startLineNumber)) {\n        startLineNumber++;\n        continue;\n      }\n      break;\n    }\n    if (startLineNumber > range.endLineNumber) {\n      return;\n    }\n    let firstLineText = model.getLineContent(startLineNumber);\n    if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n      const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n      if (indentOfFirstLine !== null) {\n        const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n        const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n        const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n        if (newSpaceCnt !== oldSpaceCnt) {\n          const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n          textEdits.push({\n            range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n            text: newIndent\n          });\n          firstLineText = newIndent + firstLineText.substring(oldIndentation.length);\n        } else {\n          const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n          if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n            // we paste content into a line where only contains whitespaces\n            // after pasting, the indentation of the first line is already correct\n            // the first line doesn't match any indentation rule\n            // then no-op.\n            return;\n          }\n        }\n      }\n    }\n    const firstLineNumber = startLineNumber;\n    // ignore empty or ignored lines\n    while (startLineNumber < range.endLineNumber) {\n      if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n        startLineNumber++;\n        continue;\n      }\n      break;\n    }\n    if (startLineNumber !== range.endLineNumber) {\n      const virtualModel = {\n        tokenization: {\n          getLineTokens: lineNumber => {\n            return model.tokenization.getLineTokens(lineNumber);\n          },\n          getLanguageId: () => {\n            return model.getLanguageId();\n          },\n          getLanguageIdAtPosition: (lineNumber, column) => {\n            return model.getLanguageIdAtPosition(lineNumber, column);\n          }\n        },\n        getLineContent: lineNumber => {\n          if (lineNumber === firstLineNumber) {\n            return firstLineText;\n          } else {\n            return model.getLineContent(lineNumber);\n          }\n        }\n      };\n      const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n      if (indentOfSecondLine !== null) {\n        const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n        const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n        if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n          const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n          for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n              textEdits.push({\n                range: new Range(i, 1, i, originalIndent.length + 1),\n                text: newIndent\n              });\n            }\n          }\n        }\n      }\n    }\n    if (textEdits.length > 0) {\n      this.editor.pushUndoStop();\n      const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n      this.editor.executeCommand('autoIndentOnPaste', cmd);\n      this.editor.pushUndoStop();\n    }\n  }\n  rangeContainsOnlyWhitespaceCharacters(model, range) {\n    const lineContainsOnlyWhitespace = content => {\n      return content.trim().length === 0;\n    };\n    let containsOnlyWhitespace = true;\n    if (range.startLineNumber === range.endLineNumber) {\n      const lineContent = model.getLineContent(range.startLineNumber);\n      const linePart = lineContent.substring(range.startColumn - 1, range.endColumn - 1);\n      containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n    } else {\n      for (let i = range.startLineNumber; i <= range.endLineNumber; i++) {\n        const lineContent = model.getLineContent(i);\n        if (i === range.startLineNumber) {\n          const linePart = lineContent.substring(range.startColumn - 1);\n          containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n        } else if (i === range.endLineNumber) {\n          const linePart = lineContent.substring(0, range.endColumn - 1);\n          containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n        } else {\n          containsOnlyWhitespace = model.getLineFirstNonWhitespaceColumn(i) === 0;\n        }\n        if (!containsOnlyWhitespace) {\n          break;\n        }\n      }\n    }\n    return containsOnlyWhitespace;\n  }\n  shouldIgnoreLine(model, lineNumber) {\n    model.tokenization.forceTokenization(lineNumber);\n    const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n    if (nonWhitespaceColumn === 0) {\n      return true;\n    }\n    const tokens = model.tokenization.getLineTokens(lineNumber);\n    if (tokens.getCount() > 0) {\n      const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n      if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n        return true;\n      }\n    }\n    return false;\n  }\n  dispose() {\n    this.callOnDispose.dispose();\n    this.callOnModel.dispose();\n  }\n};\nAutoIndentOnPaste = __decorate([__param(1, ILanguageConfigurationService)], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction isStartOrEndInString(model, range) {\n  const isPositionInString = position => {\n    const tokenType = getStandardTokenTypeAtPosition(model, position);\n    return tokenType === 2 /* StandardTokenType.String */;\n  };\n  return isPositionInString(range.getStartPosition()) || isPositionInString(range.getEndPosition());\n}\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n  if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n    // Model is empty\n    return;\n  }\n  let spaces = '';\n  for (let i = 0; i < tabSize; i++) {\n    spaces += ' ';\n  }\n  const spacesRegExp = new RegExp(spaces, 'gi');\n  for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n    let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n    if (lastIndentationColumn === 0) {\n      lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n    }\n    if (lastIndentationColumn === 1) {\n      continue;\n    }\n    const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n    const originalIndentation = model.getValueInRange(originalIndentationRange);\n    const newIndentation = tabsToSpaces ? originalIndentation.replace(/\\t/ig, spaces) : originalIndentation.replace(spacesRegExp, '\\t');\n    builder.addEditOperation(originalIndentationRange, newIndentation);\n  }\n}\nexport class IndentationToSpacesCommand {\n  constructor(selection, tabSize) {\n    this.selection = selection;\n    this.tabSize = tabSize;\n    this.selectionId = null;\n  }\n  getEditOperations(model, builder) {\n    this.selectionId = builder.trackSelection(this.selection);\n    getIndentationEditOperations(model, builder, this.tabSize, true);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  }\n}\nexport class IndentationToTabsCommand {\n  constructor(selection, tabSize) {\n    this.selection = selection;\n    this.tabSize = tabSize;\n    this.selectionId = null;\n  }\n  getEditOperations(model, builder) {\n    this.selectionId = builder.trackSelection(this.selection);\n    getIndentationEditOperations(model, builder, this.tabSize, false);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(ChangeTabDisplaySize);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n  let spacesCnt = 0;\n  for (let i = 0; i < str.length; i++) {\n    if (str.charAt(i) === '\\t') {\n      spacesCnt += tabSize;\n    } else {\n      spacesCnt++;\n    }\n  }\n  return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n  spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n  let result = '';\n  if (!insertSpaces) {\n    const tabsCnt = Math.floor(spacesCnt / tabSize);\n    spacesCnt = spacesCnt % tabSize;\n    for (let i = 0; i < tabsCnt; i++) {\n      result += '\\t';\n    }\n  }\n  for (let i = 0; i < spacesCnt; i++) {\n    result += ' ';\n  }\n  return result;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ProcessedIndentRulesSupport } from '../../../common/languages/supports/indentationLineProcessor.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber) {\n  if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n    // Model is empty\n    return [];\n  }\n  const indentationRulesSupport = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentRulesSupport;\n  if (!indentationRulesSupport) {\n    return [];\n  }\n  const processedIndentRulesSupport = new ProcessedIndentRulesSupport(model, indentationRulesSupport, languageConfigurationService);\n  endLineNumber = Math.min(endLineNumber, model.getLineCount());\n  // Skip `unIndentedLinePattern` lines\n  while (startLineNumber <= endLineNumber) {\n    if (!processedIndentRulesSupport.shouldIgnore(startLineNumber)) {\n      break;\n    }\n    startLineNumber++;\n  }\n  if (startLineNumber > endLineNumber - 1) {\n    return [];\n  }\n  const {\n    tabSize,\n    indentSize,\n    insertSpaces\n  } = model.getOptions();\n  const shiftIndent = (indentation, count) => {\n    count = count || 1;\n    return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n  };\n  const unshiftIndent = (indentation, count) => {\n    count = count || 1;\n    return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n  };\n  const indentEdits = [];\n  // indentation being passed to lines below\n  // Calculate indentation for the first line\n  // If there is no passed-in indentation, we use the indentation of the first line as base.\n  const currentLineText = model.getLineContent(startLineNumber);\n  let globalIndent = strings.getLeadingWhitespace(currentLineText);\n  // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n  let idealIndentForNextLine = globalIndent;\n  if (processedIndentRulesSupport.shouldIncrease(startLineNumber)) {\n    idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    globalIndent = shiftIndent(globalIndent);\n  } else if (processedIndentRulesSupport.shouldIndentNextLine(startLineNumber)) {\n    idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n  }\n  startLineNumber++;\n  // Calculate indentation adjustment for all following lines\n  for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n    if (doesLineStartWithString(model, lineNumber)) {\n      continue;\n    }\n    const text = model.getLineContent(lineNumber);\n    const oldIndentation = strings.getLeadingWhitespace(text);\n    const currentIdealIndent = idealIndentForNextLine;\n    if (processedIndentRulesSupport.shouldDecrease(lineNumber, currentIdealIndent)) {\n      idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n      globalIndent = unshiftIndent(globalIndent);\n    }\n    if (oldIndentation !== idealIndentForNextLine) {\n      indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n    }\n    // calculate idealIndentForNextLine\n    if (processedIndentRulesSupport.shouldIgnore(lineNumber)) {\n      // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n      // but don't change globalIndent and idealIndentForNextLine.\n      continue;\n    } else if (processedIndentRulesSupport.shouldIncrease(lineNumber, currentIdealIndent)) {\n      globalIndent = shiftIndent(globalIndent);\n      idealIndentForNextLine = globalIndent;\n    } else if (processedIndentRulesSupport.shouldIndentNextLine(lineNumber, currentIdealIndent)) {\n      idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    } else {\n      idealIndentForNextLine = globalIndent;\n    }\n  }\n  return indentEdits;\n}\nfunction doesLineStartWithString(model, lineNumber) {\n  if (!model.tokenization.isCheapToTokenize(lineNumber)) {\n    return false;\n  }\n  const lineTokens = model.tokenization.getLineTokens(lineNumber);\n  return lineTokens.getStandardTokenType(0) === 2 /* StandardTokenType.String */;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(InlayHintsHover);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './browser/coreCommands.js';\nimport './browser/widget/codeEditor/codeEditorWidget.js';\nimport './browser/widget/diffEditor/diffEditor.contribution.js';\nimport './contrib/anchorSelect/browser/anchorSelect.js';\nimport './contrib/bracketMatching/browser/bracketMatching.js';\nimport './contrib/caretOperations/browser/caretOperations.js';\nimport './contrib/caretOperations/browser/transpose.js';\nimport './contrib/clipboard/browser/clipboard.js';\nimport './contrib/codeAction/browser/codeActionContributions.js';\nimport './contrib/codelens/browser/codelensController.js';\nimport './contrib/colorPicker/browser/colorContributions.js';\nimport './contrib/colorPicker/browser/standaloneColorPickerActions.js';\nimport './contrib/comment/browser/comment.js';\nimport './contrib/contextmenu/browser/contextmenu.js';\nimport './contrib/cursorUndo/browser/cursorUndo.js';\nimport './contrib/dnd/browser/dnd.js';\nimport './contrib/dropOrPasteInto/browser/copyPasteContribution.js';\nimport './contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js';\nimport './contrib/find/browser/findController.js';\nimport './contrib/folding/browser/folding.js';\nimport './contrib/fontZoom/browser/fontZoom.js';\nimport './contrib/format/browser/formatActions.js';\nimport './contrib/documentSymbols/browser/documentSymbols.js';\nimport './contrib/inlineCompletions/browser/inlineCompletions.contribution.js';\nimport './contrib/inlineProgress/browser/inlineProgress.js';\nimport './contrib/gotoSymbol/browser/goToCommands.js';\nimport './contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport './contrib/gotoError/browser/gotoError.js';\nimport './contrib/hover/browser/hoverContribution.js';\nimport './contrib/indentation/browser/indentation.js';\nimport './contrib/inlayHints/browser/inlayHintsContribution.js';\nimport './contrib/inPlaceReplace/browser/inPlaceReplace.js';\nimport './contrib/lineSelection/browser/lineSelection.js';\nimport './contrib/linesOperations/browser/linesOperations.js';\nimport './contrib/linkedEditing/browser/linkedEditing.js';\nimport './contrib/links/browser/links.js';\nimport './contrib/longLinesHelper/browser/longLinesHelper.js';\nimport './contrib/multicursor/browser/multicursor.js';\nimport './contrib/inlineEdit/browser/inlineEdit.contribution.js';\nimport './contrib/inlineEdits/browser/inlineEdits.contribution.js';\nimport './contrib/parameterHints/browser/parameterHints.js';\nimport './contrib/placeholderText/browser/placeholderText.contribution.js';\nimport './contrib/rename/browser/rename.js';\nimport './contrib/sectionHeaders/browser/sectionHeaders.js';\nimport './contrib/semanticTokens/browser/documentSemanticTokens.js';\nimport './contrib/semanticTokens/browser/viewportSemanticTokens.js';\nimport './contrib/smartSelect/browser/smartSelect.js';\nimport './contrib/snippet/browser/snippetController2.js';\nimport './contrib/stickyScroll/browser/stickyScrollContribution.js';\nimport './contrib/suggest/browser/suggestController.js';\nimport './contrib/suggest/browser/suggestInlineCompletions.js';\nimport './contrib/tokenization/browser/tokenization.js';\nimport './contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport './contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\nimport './contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\nimport './contrib/wordHighlighter/browser/wordHighlighter.js';\nimport './contrib/wordOperations/browser/wordOperations.js';\nimport './contrib/wordPartOperations/browser/wordPartOperations.js';\nimport './contrib/readOnlyMessage/browser/contribution.js';\nimport './contrib/diffEditorBreadcrumbs/browser/contribution.js';\n// Load up these strings even in VSCode, even if they are not used\n// in order to get them translated\nimport './common/standaloneStrings.js';\nimport '../base/browser/ui/codicons/codiconStyles.js'; // The codicons are defined here and must be loaded","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'expandLineSelection',\n      label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n      alias: 'Expand Line Selection',\n      precondition: undefined,\n      kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n      }\n    });\n  }\n  run(_accessor, editor, args) {\n    args = args || {};\n    if (!editor.hasModel()) {\n      return;\n    }\n    const viewModel = editor._getViewModel();\n    viewModel.model.pushStackElement();\n    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n    viewModel.revealAllCursors(args.source, true);\n  }\n}\nregisterEditorAction(ExpandLineSelectionAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EnterOperation } from '../../../common/cursor/cursorTypeEditOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n  constructor(down, opts) {\n    super(opts);\n    this.down = down;\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections().map((selection, index) => ({\n      selection,\n      index,\n      ignore: false\n    }));\n    selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n    // Remove selections that would result in copying the same line\n    let prev = selections[0];\n    for (let i = 1; i < selections.length; i++) {\n      const curr = selections[i];\n      if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n        // these two selections would copy the same line\n        if (prev.index < curr.index) {\n          // prev wins\n          curr.ignore = true;\n        } else {\n          // curr wins\n          prev.ignore = true;\n          prev = curr;\n        }\n      }\n    }\n    const commands = [];\n    for (const selection of selections) {\n      commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.copyLinesUpAction',\n      label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n      alias: 'Copy Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Copy Line Up\"),\n        order: 1\n      }\n    });\n  }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.copyLinesDownAction',\n      label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n      alias: 'Copy Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Co&&py Line Down\"),\n        order: 2\n      }\n    });\n  }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.duplicateSelection',\n      label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n      alias: 'Duplicate Selection',\n      precondition: EditorContextKeys.writable,\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miDuplicateSelection',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Duplicate Selection\"),\n        order: 5\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const commands = [];\n    const selections = editor.getSelections();\n    const model = editor.getModel();\n    for (const selection of selections) {\n      if (selection.isEmpty()) {\n        commands.push(new CopyLinesCommand(selection, true));\n      } else {\n        const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n        commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n  constructor(down, opts) {\n    super(opts);\n    this.down = down;\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const commands = [];\n    const selections = editor.getSelections() || [];\n    const autoIndent = editor.getOption(12 /* EditorOption.autoIndent */);\n    for (const selection of selections) {\n      commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.moveLinesUpAction',\n      label: nls.localize('lines.moveUp', \"Move Line Up\"),\n      alias: 'Move Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n        linux: {\n          primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"Mo&&ve Line Up\"),\n        order: 3\n      }\n    });\n  }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.moveLinesDownAction',\n      label: nls.localize('lines.moveDown', \"Move Line Down\"),\n      alias: 'Move Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n        linux: {\n          primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Move &&Line Down\"),\n        order: 4\n      }\n    });\n  }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n  constructor(descending, opts) {\n    super(opts);\n    this.descending = descending;\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    let selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      // Apply to whole document.\n      selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n    }\n    for (const selection of selections) {\n      if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n        return;\n      }\n    }\n    const commands = [];\n    for (let i = 0, len = selections.length; i < len; i++) {\n      commands[i] = new SortLinesCommand(selections[i], this.descending);\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.sortLinesAscending',\n      label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n      alias: 'Sort Lines Ascending',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.sortLinesDescending',\n      label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n      alias: 'Sort Lines Descending',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.removeDuplicateLines',\n      label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n      alias: 'Delete Duplicate Lines',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n      return;\n    }\n    const edits = [];\n    const endCursorState = [];\n    let linesDeleted = 0;\n    let updateSelection = true;\n    let selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      // Apply to whole document.\n      selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n      updateSelection = false;\n    }\n    for (const selection of selections) {\n      const uniqueLines = new Set();\n      const lines = [];\n      for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n        const line = model.getLineContent(i);\n        if (uniqueLines.has(line)) {\n          continue;\n        }\n        lines.push(line);\n        uniqueLines.add(line);\n      }\n      const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n      const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n      const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n      edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n      endCursorState.push(finalSelection);\n      linesDeleted += selection.endLineNumber - selection.startLineNumber + 1 - lines.length;\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, updateSelection ? endCursorState : undefined);\n    editor.pushUndoStop();\n  }\n}\nexport let TrimTrailingWhitespaceAction = /*#__PURE__*/(() => {\n  class TrimTrailingWhitespaceAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.trimTrailingWhitespace';\n    }\n    constructor() {\n      super({\n        id: TrimTrailingWhitespaceAction.ID,\n        label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n        alias: 'Trim Trailing Whitespace',\n        precondition: EditorContextKeys.writable,\n        kbOpts: {\n          kbExpr: EditorContextKeys.editorTextFocus,\n          primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n      });\n    }\n    run(_accessor, editor, args) {\n      let cursors = [];\n      if (args.reason === 'auto-save') {\n        // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n        // It is very convenient for the editor config extension to invoke this action.\n        // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n        cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n      }\n      const selection = editor.getSelection();\n      if (selection === null) {\n        return;\n      }\n      const config = _accessor.get(IConfigurationService);\n      const model = editor.getModel();\n      const trimInRegexAndStrings = config.getValue('files.trimTrailingWhitespaceInRegexAndStrings', {\n        overrideIdentifier: model?.getLanguageId(),\n        resource: model?.uri\n      });\n      const command = new TrimTrailingWhitespaceCommand(selection, cursors, trimInRegexAndStrings);\n      editor.pushUndoStop();\n      editor.executeCommands(this.id, [command]);\n      editor.pushUndoStop();\n    }\n  }\n  return TrimTrailingWhitespaceAction;\n})();\nexport class DeleteLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.deleteLines',\n      label: nls.localize('lines.delete', \"Delete Line\"),\n      alias: 'Delete Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const ops = this._getLinesToRemove(editor);\n    const model = editor.getModel();\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n      // Model is empty\n      return;\n    }\n    let linesDeleted = 0;\n    const edits = [];\n    const cursorState = [];\n    for (let i = 0, len = ops.length; i < len; i++) {\n      const op = ops[i];\n      let startLineNumber = op.startLineNumber;\n      let endLineNumber = op.endLineNumber;\n      let startColumn = 1;\n      let endColumn = model.getLineMaxColumn(endLineNumber);\n      if (endLineNumber < model.getLineCount()) {\n        endLineNumber += 1;\n        endColumn = 1;\n      } else if (startLineNumber > 1) {\n        startLineNumber -= 1;\n        startColumn = model.getLineMaxColumn(startLineNumber);\n      }\n      edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n      cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n      linesDeleted += op.endLineNumber - op.startLineNumber + 1;\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, cursorState);\n    editor.pushUndoStop();\n  }\n  _getLinesToRemove(editor) {\n    // Construct delete operations\n    const operations = editor.getSelections().map(s => {\n      let endLineNumber = s.endLineNumber;\n      if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n        endLineNumber -= 1;\n      }\n      return {\n        startLineNumber: s.startLineNumber,\n        selectionStartColumn: s.selectionStartColumn,\n        endLineNumber: endLineNumber,\n        positionColumn: s.positionColumn\n      };\n    });\n    // Sort delete operations\n    operations.sort((a, b) => {\n      if (a.startLineNumber === b.startLineNumber) {\n        return a.endLineNumber - b.endLineNumber;\n      }\n      return a.startLineNumber - b.startLineNumber;\n    });\n    // Merge delete operations which are adjacent or overlapping\n    const mergedOperations = [];\n    let previousOperation = operations[0];\n    for (let i = 1; i < operations.length; i++) {\n      if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n        // Merge current operations into the previous one\n        previousOperation.endLineNumber = operations[i].endLineNumber;\n      } else {\n        // Push previous operation\n        mergedOperations.push(previousOperation);\n        previousOperation = operations[i];\n      }\n    }\n    // Push the last operation\n    mergedOperations.push(previousOperation);\n    return mergedOperations;\n  }\n}\nexport class IndentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.indentLines',\n      label: nls.localize('lines.indent', \"Indent Line\"),\n      alias: 'Indent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    editor.pushUndoStop();\n  }\n}\nclass OutdentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.outdentLines',\n      label: nls.localize('lines.outdent', \"Outdent Line\"),\n      alias: 'Outdent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n  }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertLineBefore',\n      label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n      alias: 'Insert Line Above',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, EnterOperation.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n  }\n}\nexport class InsertLineAfterAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertLineAfter',\n      label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n      alias: 'Insert Line Below',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, EnterOperation.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n  }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const primaryCursor = editor.getSelection();\n    const rangesToDelete = this._getRangesToDelete(editor);\n    // merge overlapping selections\n    const effectiveRanges = [];\n    for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n      const range = rangesToDelete[i];\n      const nextRange = rangesToDelete[i + 1];\n      if (Range.intersectRanges(range, nextRange) === null) {\n        effectiveRanges.push(range);\n      } else {\n        rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n      }\n    }\n    effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n    const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n    const edits = effectiveRanges.map(range => {\n      return EditOperation.replace(range, '');\n    });\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n  constructor() {\n    super({\n      id: 'deleteAllLeft',\n      label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n      alias: 'Delete All Left',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _getEndCursorState(primaryCursor, rangesToDelete) {\n    let endPrimaryCursor = null;\n    const endCursorState = [];\n    let deletedLines = 0;\n    rangesToDelete.forEach(range => {\n      let endCursor;\n      if (range.endColumn === 1 && deletedLines > 0) {\n        const newStartLine = range.startLineNumber - deletedLines;\n        endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n      } else {\n        endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n      }\n      deletedLines += range.endLineNumber - range.startLineNumber;\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    });\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n    return endCursorState;\n  }\n  _getRangesToDelete(editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return [];\n    }\n    let rangesToDelete = selections;\n    const model = editor.getModel();\n    if (model === null) {\n      return [];\n    }\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    rangesToDelete = rangesToDelete.map(selection => {\n      if (selection.isEmpty()) {\n        if (selection.startColumn === 1) {\n          const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n          const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineLength(deleteFromLine) + 1;\n          return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n        } else {\n          return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n        }\n      } else {\n        return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n      }\n    });\n    return rangesToDelete;\n  }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n  constructor() {\n    super({\n      id: 'deleteAllRight',\n      label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n      alias: 'Delete All Right',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _getEndCursorState(primaryCursor, rangesToDelete) {\n    let endPrimaryCursor = null;\n    const endCursorState = [];\n    for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n      const range = rangesToDelete[i];\n      const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    }\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n    return endCursorState;\n  }\n  _getRangesToDelete(editor) {\n    const model = editor.getModel();\n    if (model === null) {\n      return [];\n    }\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return [];\n    }\n    const rangesToDelete = selections.map(sel => {\n      if (sel.isEmpty()) {\n        const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n        if (sel.startColumn === maxColumn) {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n        } else {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n        }\n      }\n      return sel;\n    });\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    return rangesToDelete;\n  }\n}\nexport class JoinLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.joinLines',\n      label: nls.localize('lines.joinLines', \"Join Lines\"),\n      alias: 'Join Lines',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    let primaryCursor = editor.getSelection();\n    if (primaryCursor === null) {\n      return;\n    }\n    selections.sort(Range.compareRangesUsingStarts);\n    const reducedSelections = [];\n    const lastSelection = selections.reduce((previousValue, currentValue) => {\n      if (previousValue.isEmpty()) {\n        if (previousValue.endLineNumber === currentValue.startLineNumber) {\n          if (primaryCursor.equalsSelection(previousValue)) {\n            primaryCursor = currentValue;\n          }\n          return currentValue;\n        }\n        if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      } else {\n        if (currentValue.startLineNumber > previousValue.endLineNumber) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      }\n    });\n    reducedSelections.push(lastSelection);\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const edits = [];\n    const endCursorState = [];\n    let endPrimaryCursor = primaryCursor;\n    let lineOffset = 0;\n    for (let i = 0, len = reducedSelections.length; i < len; i++) {\n      const selection = reducedSelections[i];\n      const startLineNumber = selection.startLineNumber;\n      const startColumn = 1;\n      let columnDeltaOffset = 0;\n      let endLineNumber, endColumn;\n      const selectionEndPositionOffset = model.getLineLength(selection.endLineNumber) - selection.endColumn;\n      if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n        const position = selection.getStartPosition();\n        if (position.lineNumber < model.getLineCount()) {\n          endLineNumber = startLineNumber + 1;\n          endColumn = model.getLineMaxColumn(endLineNumber);\n        } else {\n          endLineNumber = position.lineNumber;\n          endColumn = model.getLineMaxColumn(position.lineNumber);\n        }\n      } else {\n        endLineNumber = selection.endLineNumber;\n        endColumn = model.getLineMaxColumn(endLineNumber);\n      }\n      let trimmedLinesContent = model.getLineContent(startLineNumber);\n      for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n        const lineText = model.getLineContent(i);\n        const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n        if (firstNonWhitespaceIdx >= 1) {\n          let insertSpace = true;\n          if (trimmedLinesContent === '') {\n            insertSpace = false;\n          }\n          if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' || trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n            insertSpace = false;\n            trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n          }\n          const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n          trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n          if (insertSpace) {\n            columnDeltaOffset = lineTextWithoutIndent.length + 1;\n          } else {\n            columnDeltaOffset = lineTextWithoutIndent.length;\n          }\n        } else {\n          columnDeltaOffset = 0;\n        }\n      }\n      const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n      if (!deleteSelection.isEmpty()) {\n        let resultSelection;\n        if (selection.isEmpty()) {\n          edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n          resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n        } else {\n          if (selection.startLineNumber === selection.endLineNumber) {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n          } else {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n          }\n        }\n        if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n          endPrimaryCursor = resultSelection;\n        } else {\n          endCursorState.push(resultSelection);\n        }\n      }\n      lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n    }\n    endCursorState.unshift(endPrimaryCursor);\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  }\n}\nexport class TransposeAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.transpose',\n      label: nls.localize('editor.transpose', \"Transpose Characters around the Cursor\"),\n      alias: 'Transpose Characters around the Cursor',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const commands = [];\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const selection = selections[i];\n      if (!selection.isEmpty()) {\n        continue;\n      }\n      const cursor = selection.getStartPosition();\n      const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n      if (cursor.column >= maxColumn) {\n        if (cursor.lineNumber === model.getLineCount()) {\n          continue;\n        }\n        // The cursor is at the end of current line and current line is not empty\n        // then we transpose the character before the cursor and the line break if there is any following line.\n        const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n        const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n      } else {\n        const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n        const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nexport class AbstractCaseAction extends EditorAction {\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const wordSeparators = editor.getOption(132 /* EditorOption.wordSeparators */);\n    const textEdits = [];\n    for (const selection of selections) {\n      if (selection.isEmpty()) {\n        const cursor = selection.getStartPosition();\n        const word = editor.getConfiguredWordAtPosition(cursor);\n        if (!word) {\n          continue;\n        }\n        const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n        const text = model.getValueInRange(wordRange);\n        textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n      } else {\n        const text = model.getValueInRange(selection);\n        textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, textEdits);\n    editor.pushUndoStop();\n  }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToUppercase',\n      label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n      alias: 'Transform to Uppercase',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    return text.toLocaleUpperCase();\n  }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToLowercase',\n      label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n      alias: 'Transform to Lowercase',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    return text.toLocaleLowerCase();\n  }\n}\nclass BackwardsCompatibleRegExp {\n  constructor(_pattern, _flags) {\n    this._pattern = _pattern;\n    this._flags = _flags;\n    this._actual = null;\n    this._evaluated = false;\n  }\n  get() {\n    if (!this._evaluated) {\n      this._evaluated = true;\n      try {\n        this._actual = new RegExp(this._pattern, this._flags);\n      } catch (err) {\n        // this browser does not support this regular expression\n      }\n    }\n    return this._actual;\n  }\n  isSupported() {\n    return this.get() !== null;\n  }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n  static {\n    this.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToTitlecase',\n      label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n      alias: 'Transform to Title Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const titleBoundary = TitleCaseAction.titleBoundary.get();\n    if (!titleBoundary) {\n      // cannot support this\n      return text;\n    }\n    return text.toLocaleLowerCase().replace(titleBoundary, b => b.toLocaleUpperCase());\n  }\n}\nexport class SnakeCaseAction extends AbstractCaseAction {\n  static {\n    this.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\n  }\n  static {\n    this.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToSnakecase',\n      label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n      alias: 'Transform to Snake Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const caseBoundary = SnakeCaseAction.caseBoundary.get();\n    const singleLetters = SnakeCaseAction.singleLetters.get();\n    if (!caseBoundary || !singleLetters) {\n      // cannot support this\n      return text;\n    }\n    return text.replace(caseBoundary, '$1_$2').replace(singleLetters, '$1_$2$3').toLocaleLowerCase();\n  }\n}\nexport class CamelCaseAction extends AbstractCaseAction {\n  static {\n    this.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToCamelcase',\n      label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\n      alias: 'Transform to Camel Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const wordBoundary = CamelCaseAction.wordBoundary.get();\n    if (!wordBoundary) {\n      // cannot support this\n      return text;\n    }\n    const words = text.split(wordBoundary);\n    const firstWord = words.shift();\n    return firstWord + words.map(word => word.substring(0, 1).toLocaleUpperCase() + word.substring(1)).join('');\n  }\n}\nexport class PascalCaseAction extends AbstractCaseAction {\n  static {\n    this.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\n  }\n  static {\n    this.wordBoundaryToMaintain = new BackwardsCompatibleRegExp('(?<=\\\\.)', 'gm');\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToPascalcase',\n      label: nls.localize('editor.transformToPascalcase', \"Transform to Pascal Case\"),\n      alias: 'Transform to Pascal Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const wordBoundary = PascalCaseAction.wordBoundary.get();\n    const wordBoundaryToMaintain = PascalCaseAction.wordBoundaryToMaintain.get();\n    if (!wordBoundary || !wordBoundaryToMaintain) {\n      // cannot support this\n      return text;\n    }\n    const wordsWithMaintainBoundaries = text.split(wordBoundaryToMaintain);\n    const words = wordsWithMaintainBoundaries.map(word => word.split(wordBoundary)).flat();\n    return words.map(word => word.substring(0, 1).toLocaleUpperCase() + word.substring(1)).join('');\n  }\n}\nexport class KebabCaseAction extends AbstractCaseAction {\n  static isSupported() {\n    const areAllRegexpsSupported = [this.caseBoundary, this.singleLetters, this.underscoreBoundary].every(regexp => regexp.isSupported());\n    return areAllRegexpsSupported;\n  }\n  static {\n    this.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\n  }\n  static {\n    this.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\n  }\n  static {\n    this.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToKebabcase',\n      label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n      alias: 'Transform to Kebab Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, _) {\n    const caseBoundary = KebabCaseAction.caseBoundary.get();\n    const singleLetters = KebabCaseAction.singleLetters.get();\n    const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n    if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n      // one or more regexps aren't supported\n      return text;\n    }\n    return text.replace(underscoreBoundary, '$1-$3').replace(caseBoundary, '$1-$2').replace(singleLetters, '$1-$2').toLocaleLowerCase();\n  }\n}\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n  registerEditorAction(SnakeCaseAction);\n}\nif (CamelCaseAction.wordBoundary.isSupported()) {\n  registerEditorAction(CamelCaseAction);\n}\nif (PascalCaseAction.wordBoundary.isSupported()) {\n  registerEditorAction(PascalCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n  registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n  registerEditorAction(KebabCaseAction);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n  constructor(selection, cursors, trimInRegexesAndStrings) {\n    this._selection = selection;\n    this._cursors = cursors;\n    this._selectionId = null;\n    this._trimInRegexesAndStrings = trimInRegexesAndStrings;\n  }\n  getEditOperations(model, builder) {\n    const ops = trimTrailingWhitespace(model, this._cursors, this._trimInRegexesAndStrings);\n    for (let i = 0, len = ops.length; i < len; i++) {\n      const op = ops[i];\n      builder.addEditOperation(op.range, op.text);\n    }\n    this._selectionId = builder.trackSelection(this._selection);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this._selectionId);\n  }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors, trimInRegexesAndStrings) {\n  // Sort cursors ascending\n  cursors.sort((a, b) => {\n    if (a.lineNumber === b.lineNumber) {\n      return a.column - b.column;\n    }\n    return a.lineNumber - b.lineNumber;\n  });\n  // Reduce multiple cursors on the same line and only keep the last one on the line\n  for (let i = cursors.length - 2; i >= 0; i--) {\n    if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n      // Remove cursor at `i`\n      cursors.splice(i, 1);\n    }\n  }\n  const r = [];\n  let rLen = 0;\n  let cursorIndex = 0;\n  const cursorLen = cursors.length;\n  for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n    const lineContent = model.getLineContent(lineNumber);\n    const maxLineColumn = lineContent.length + 1;\n    let minEditColumn = 0;\n    if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n      minEditColumn = cursors[cursorIndex].column;\n      cursorIndex++;\n      if (minEditColumn === maxLineColumn) {\n        // The cursor is at the end of the line => no edits for sure on this line\n        continue;\n      }\n    }\n    if (lineContent.length === 0) {\n      continue;\n    }\n    const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n    let fromColumn = 0;\n    if (lastNonWhitespaceIndex === -1) {\n      // Entire line is whitespace\n      fromColumn = 1;\n    } else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n      // There is trailing whitespace\n      fromColumn = lastNonWhitespaceIndex + 2;\n    } else {\n      // There is no trailing whitespace\n      continue;\n    }\n    if (!trimInRegexesAndStrings) {\n      if (!model.tokenization.hasAccurateTokensForLine(lineNumber)) {\n        // We don't want to force line tokenization, as that can be expensive, but we also don't want to trim\n        // trailing whitespace in lines that are not tokenized yet, as that can be wrong and trim whitespace from\n        // lines that the user requested we don't. So we bail out if the tokens are not accurate for this line.\n        continue;\n      }\n      const lineTokens = model.tokenization.getLineTokens(lineNumber);\n      const fromColumnType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(fromColumn));\n      if (fromColumnType === 2 /* StandardTokenType.String */ || fromColumnType === 3 /* StandardTokenType.RegEx */) {\n        continue;\n      }\n    }\n    fromColumn = Math.max(minEditColumn, fromColumn);\n    r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n  }\n  return r;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n  constructor(selection, isCopyingDown, noop) {\n    this._selection = selection;\n    this._isCopyingDown = isCopyingDown;\n    this._noop = noop || false;\n    this._selectionDirection = 0 /* SelectionDirection.LTR */;\n    this._selectionId = null;\n    this._startLineNumberDelta = 0;\n    this._endLineNumberDelta = 0;\n  }\n  getEditOperations(model, builder) {\n    let s = this._selection;\n    this._startLineNumberDelta = 0;\n    this._endLineNumberDelta = 0;\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._endLineNumberDelta = 1;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n    const sourceLines = [];\n    for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n      sourceLines.push(model.getLineContent(i));\n    }\n    const sourceText = sourceLines.join('\\n');\n    if (sourceText === '') {\n      // Duplicating empty line\n      if (this._isCopyingDown) {\n        this._startLineNumberDelta++;\n        this._endLineNumberDelta++;\n      }\n    }\n    if (this._noop) {\n      builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n    } else {\n      if (!this._isCopyingDown) {\n        builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n      } else {\n        builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n      }\n    }\n    this._selectionId = builder.trackSelection(s);\n    this._selectionDirection = this._selection.getDirection();\n  }\n  computeCursorState(model, helper) {\n    let result = helper.getTrackedSelection(this._selectionId);\n    if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n      let startLineNumber = result.startLineNumber;\n      let startColumn = result.startColumn;\n      let endLineNumber = result.endLineNumber;\n      let endColumn = result.endColumn;\n      if (this._startLineNumberDelta !== 0) {\n        startLineNumber = startLineNumber + this._startLineNumberDelta;\n        startColumn = 1;\n      }\n      if (this._endLineNumberDelta !== 0) {\n        endLineNumber = endLineNumber + this._endLineNumberDelta;\n        endColumn = 1;\n      }\n      result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n    }\n    return result;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/common/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nlet MoveLinesCommand = class MoveLinesCommand {\n  constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n    this._languageConfigurationService = _languageConfigurationService;\n    this._selection = selection;\n    this._isMovingDown = isMovingDown;\n    this._autoIndent = autoIndent;\n    this._selectionId = null;\n    this._moveEndLineSelectionShrink = false;\n  }\n  getEditOperations(model, builder) {\n    const getLanguageId = () => {\n      return model.getLanguageId();\n    };\n    const getLanguageIdAtPosition = (lineNumber, column) => {\n      return model.getLanguageIdAtPosition(lineNumber, column);\n    };\n    const modelLineCount = model.getLineCount();\n    if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n      this._selectionId = builder.trackSelection(this._selection);\n      return;\n    }\n    if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n      this._selectionId = builder.trackSelection(this._selection);\n      return;\n    }\n    this._moveEndPositionDown = false;\n    let s = this._selection;\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._moveEndPositionDown = true;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n    const {\n      tabSize,\n      indentSize,\n      insertSpaces\n    } = model.getOptions();\n    const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n    if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n      // Current line is empty\n      const lineNumber = s.startLineNumber;\n      const otherLineNumber = this._isMovingDown ? lineNumber + 1 : lineNumber - 1;\n      if (model.getLineMaxColumn(otherLineNumber) === 1) {\n        // Other line number is empty too, so no editing is needed\n        // Add a no-op to force running by the model\n        builder.addEditOperation(new Range(1, 1, 1, 1), null);\n      } else {\n        // Type content from other line number on line number\n        builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n        // Remove content from other line number\n        builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n      }\n      // Track selection at the other line number\n      s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n    } else {\n      let movingLineNumber;\n      let movingLineText;\n      if (this._isMovingDown) {\n        movingLineNumber = s.endLineNumber + 1;\n        movingLineText = model.getLineContent(movingLineNumber);\n        // Delete line that needs to be moved\n        builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n        let insertingText = movingLineText;\n        if (this.shouldAutoIndent(model, s)) {\n          const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n          // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n          if (movingLineMatchResult !== null) {\n            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n            const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n            const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n            insertingText = newIndentation + this.trimStart(movingLineText);\n          } else {\n            // no enter rule matches, let's check indentatin rules then.\n            const virtualModel = {\n              tokenization: {\n                getLineTokens: lineNumber => {\n                  if (lineNumber === s.startLineNumber) {\n                    return model.tokenization.getLineTokens(movingLineNumber);\n                  } else {\n                    return model.tokenization.getLineTokens(lineNumber);\n                  }\n                },\n                getLanguageId,\n                getLanguageIdAtPosition\n              },\n              getLineContent: lineNumber => {\n                if (lineNumber === s.startLineNumber) {\n                  return model.getLineContent(movingLineNumber);\n                } else {\n                  return model.getLineContent(lineNumber);\n                }\n              }\n            };\n            const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfMovingLine !== null) {\n              const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n              const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n              const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n              if (newSpaceCnt !== oldSpaceCnt) {\n                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                insertingText = newIndentation + this.trimStart(movingLineText);\n              }\n            }\n          }\n          // add edit operations for moving line first to make sure it's executed after we make indentation change\n          // to s.startLineNumber\n          builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n          const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n          // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n          if (ret !== null) {\n            if (ret !== 0) {\n              this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n            }\n          } else {\n            // it doesn't match onEnter rules, let's check indentation rules then.\n            const virtualModel = {\n              tokenization: {\n                getLineTokens: lineNumber => {\n                  if (lineNumber === s.startLineNumber) {\n                    // TODO@aiday-mar: the tokens here don't correspond exactly to the corresponding content (after indentation adjustment), have to fix this.\n                    return model.tokenization.getLineTokens(movingLineNumber);\n                  } else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                    return model.tokenization.getLineTokens(lineNumber - 1);\n                  } else {\n                    return model.tokenization.getLineTokens(lineNumber);\n                  }\n                },\n                getLanguageId,\n                getLanguageIdAtPosition\n              },\n              getLineContent: lineNumber => {\n                if (lineNumber === s.startLineNumber) {\n                  return insertingText;\n                } else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                  return model.getLineContent(lineNumber - 1);\n                } else {\n                  return model.getLineContent(lineNumber);\n                }\n              }\n            };\n            const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (newIndentatOfMovingBlock !== null) {\n              const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n              const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n              const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n              if (newSpaceCnt !== oldSpaceCnt) {\n                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n              }\n            }\n          }\n        } else {\n          // Insert line that needs to be moved before\n          builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n        }\n      } else {\n        movingLineNumber = s.startLineNumber - 1;\n        movingLineText = model.getLineContent(movingLineNumber);\n        // Delete line that needs to be moved\n        builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n        // Insert line that needs to be moved after\n        builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n        if (this.shouldAutoIndent(model, s)) {\n          const virtualModel = {\n            tokenization: {\n              getLineTokens: lineNumber => {\n                if (lineNumber === movingLineNumber) {\n                  return model.tokenization.getLineTokens(s.startLineNumber);\n                } else {\n                  return model.tokenization.getLineTokens(lineNumber);\n                }\n              },\n              getLanguageId,\n              getLanguageIdAtPosition\n            },\n            getLineContent: lineNumber => {\n              if (lineNumber === movingLineNumber) {\n                return model.getLineContent(s.startLineNumber);\n              } else {\n                return model.getLineContent(lineNumber);\n              }\n            }\n          };\n          const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n          // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n          if (ret !== null) {\n            if (ret !== 0) {\n              this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n            }\n          } else {\n            // it doesn't match any onEnter rule, let's check indentation rules then.\n            const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n              // adjust the indentation of the moving block\n              const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n              const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n              const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n              if (newSpaceCnt !== oldSpaceCnt) {\n                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n              }\n            }\n          }\n        }\n      }\n    }\n    this._selectionId = builder.trackSelection(s);\n  }\n  buildIndentConverter(tabSize, indentSize, insertSpaces) {\n    return {\n      shiftIndent: indentation => {\n        return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      },\n      unshiftIndent: indentation => {\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      }\n    };\n  }\n  parseEnterResult(model, indentConverter, tabSize, line, enter) {\n    if (enter) {\n      let enterPrefix = enter.indentation;\n      if (enter.indentAction === IndentAction.None) {\n        enterPrefix = enter.indentation + enter.appendText;\n      } else if (enter.indentAction === IndentAction.Indent) {\n        enterPrefix = enter.indentation + enter.appendText;\n      } else if (enter.indentAction === IndentAction.IndentOutdent) {\n        enterPrefix = enter.indentation;\n      } else if (enter.indentAction === IndentAction.Outdent) {\n        enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n      }\n      const movingLineText = model.getLineContent(line);\n      if (this.trimStart(movingLineText).indexOf(this.trimStart(enterPrefix)) >= 0) {\n        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n        let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n        const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n        if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n          newIndentation = indentConverter.unshiftIndent(newIndentation);\n        }\n        const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n        const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n        return newSpaceCnt - oldSpaceCnt;\n      }\n    }\n    return null;\n  }\n  /**\n   *\n   * @param model\n   * @param indentConverter\n   * @param tabSize\n   * @param line the line moving down\n   * @param futureAboveLineNumber the line which will be at the `line` position\n   * @param futureAboveLineText\n   */\n  matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n    if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n      // break\n      const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n      const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n      return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    } else {\n      // go upwards, starting from `line - 1`\n      let validPrecedingLine = line - 1;\n      while (validPrecedingLine >= 1) {\n        const lineContent = model.getLineContent(validPrecedingLine);\n        const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n        if (nonWhitespaceIdx >= 0) {\n          break;\n        }\n        validPrecedingLine--;\n      }\n      if (validPrecedingLine < 1 || line > model.getLineCount()) {\n        return null;\n      }\n      const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n      const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n      return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n  }\n  matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n    let validPrecedingLine = oneLineAbove;\n    while (validPrecedingLine >= 1) {\n      // ship empty lines as empty lines just inherit indentation\n      let lineContent;\n      if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n        lineContent = previousLineText;\n      } else {\n        lineContent = model.getLineContent(validPrecedingLine);\n      }\n      const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n      if (nonWhitespaceIdx >= 0) {\n        break;\n      }\n      validPrecedingLine--;\n    }\n    if (validPrecedingLine < 1 || line > model.getLineCount()) {\n      return null;\n    }\n    const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n    const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n    return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n  }\n  trimStart(str) {\n    return str.replace(/^\\s+/, '');\n  }\n  shouldAutoIndent(model, selection) {\n    if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n      return false;\n    }\n    // if it's not easy to tokenize, we stop auto indent.\n    if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n      return false;\n    }\n    const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n    const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n    if (languageAtSelectionStart !== languageAtSelectionEnd) {\n      return false;\n    }\n    if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n      return false;\n    }\n    return true;\n  }\n  getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n    for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n      const lineContent = model.getLineContent(i);\n      const originalIndent = strings.getLeadingWhitespace(lineContent);\n      const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n      const newSpacesCnt = originalSpacesCnt + offset;\n      const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n      if (newIndent !== originalIndent) {\n        builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n        if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n          // as users select part of the original indent white spaces\n          // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n          this._moveEndLineSelectionShrink = true;\n        }\n      }\n    }\n  }\n  computeCursorState(model, helper) {\n    let result = helper.getTrackedSelection(this._selectionId);\n    if (this._moveEndPositionDown) {\n      result = result.setEndPosition(result.endLineNumber + 1, 1);\n    }\n    if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n      result = result.setEndPosition(result.endLineNumber, 2);\n    }\n    return result;\n  }\n};\nMoveLinesCommand = __decorate([__param(3, ILanguageConfigurationService)], MoveLinesCommand);\nexport { MoveLinesCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport let SortLinesCommand = /*#__PURE__*/(() => {\n  class SortLinesCommand {\n    static {\n      this._COLLATOR = null;\n    }\n    static getCollator() {\n      if (!SortLinesCommand._COLLATOR) {\n        SortLinesCommand._COLLATOR = new Intl.Collator();\n      }\n      return SortLinesCommand._COLLATOR;\n    }\n    constructor(selection, descending) {\n      this.selection = selection;\n      this.descending = descending;\n      this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n      const op = sortLines(model, this.selection, this.descending);\n      if (op) {\n        builder.addEditOperation(op.range, op.text);\n      }\n      this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n      return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n      if (model === null) {\n        return false;\n      }\n      const data = getSortData(model, selection, descending);\n      if (!data) {\n        return false;\n      }\n      for (let i = 0, len = data.before.length; i < len; i++) {\n        if (data.before[i] !== data.after[i]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n  return SortLinesCommand;\n})();\nfunction getSortData(model, selection, descending) {\n  const startLineNumber = selection.startLineNumber;\n  let endLineNumber = selection.endLineNumber;\n  if (selection.endColumn === 1) {\n    endLineNumber--;\n  }\n  // Nothing to sort if user didn't select anything.\n  if (startLineNumber >= endLineNumber) {\n    return null;\n  }\n  const linesToSort = [];\n  // Get the contents of the selection to be sorted.\n  for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n    linesToSort.push(model.getLineContent(lineNumber));\n  }\n  let sorted = linesToSort.slice(0);\n  sorted.sort(SortLinesCommand.getCollator().compare);\n  // If descending, reverse the order.\n  if (descending === true) {\n    sorted = sorted.reverse();\n  }\n  return {\n    startLineNumber: startLineNumber,\n    endLineNumber: endLineNumber,\n    before: linesToSort,\n    after: sorted\n  };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n  const data = getSortData(model, selection, descending);\n  if (!data) {\n    return null;\n  }\n  return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar LinkedEditingContribution_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport './linkedEditing.css';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n  static {\n    LinkedEditingContribution_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.linkedEditing';\n  }\n  static {\n    this.DECORATION = ModelDecorationOptions.register({\n      description: 'linked-editing',\n      stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n      className: DECORATION_CLASS_NAME\n    });\n  }\n  static get(editor) {\n    return editor.getContribution(LinkedEditingContribution_1.ID);\n  }\n  constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n    super();\n    this.languageConfigurationService = languageConfigurationService;\n    this._syncRangesToken = 0;\n    this._localToDispose = this._register(new DisposableStore());\n    this._editor = editor;\n    this._providers = languageFeaturesService.linkedEditingRangeProvider;\n    this._enabled = false;\n    this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', {\n      max: 200\n    });\n    this._currentDecorations = this._editor.createDecorationsCollection();\n    this._languageWordPattern = null;\n    this._currentWordPattern = null;\n    this._ignoreChangeEvent = false;\n    this._localToDispose = this._register(new DisposableStore());\n    this._rangeUpdateTriggerPromise = null;\n    this._rangeSyncTriggerPromise = null;\n    this._currentRequestCts = null;\n    this._currentRequestPosition = null;\n    this._currentRequestModelVersion = null;\n    this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(70 /* EditorOption.linkedEditing */) || e.hasChanged(94 /* EditorOption.renameOnType */)) {\n        this.reinitialize(false);\n      }\n    }));\n    this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n    this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n    this.reinitialize(true);\n  }\n  reinitialize(forceRefresh) {\n    const model = this._editor.getModel();\n    const isEnabled = model !== null && (this._editor.getOption(70 /* EditorOption.linkedEditing */) || this._editor.getOption(94 /* EditorOption.renameOnType */)) && this._providers.has(model);\n    if (isEnabled === this._enabled && !forceRefresh) {\n      return;\n    }\n    this._enabled = isEnabled;\n    this.clearRanges();\n    this._localToDispose.clear();\n    if (!isEnabled || model === null) {\n      return;\n    }\n    this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n      this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n    }));\n    const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n    const triggerRangeUpdate = () => {\n      this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), this._debounceDuration ?? this._debounceInformation.get(model));\n    };\n    const rangeSyncScheduler = new Delayer(0);\n    const triggerRangeSync = token => {\n      this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n    };\n    this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n      triggerRangeUpdate();\n    }));\n    this._localToDispose.add(this._editor.onDidChangeModelContent(e => {\n      if (!this._ignoreChangeEvent) {\n        if (this._currentDecorations.length > 0) {\n          const referenceRange = this._currentDecorations.getRange(0);\n          if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n            triggerRangeSync(this._syncRangesToken);\n            return;\n          }\n        }\n      }\n      triggerRangeUpdate();\n    }));\n    this._localToDispose.add({\n      dispose: () => {\n        rangeUpdateScheduler.dispose();\n        rangeSyncScheduler.dispose();\n      }\n    });\n    this.updateRanges();\n  }\n  _syncRanges(token) {\n    // delayed invocation, make sure we're still on\n    if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n      // nothing to do\n      return;\n    }\n    const model = this._editor.getModel();\n    const referenceRange = this._currentDecorations.getRange(0);\n    if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n      return this.clearRanges();\n    }\n    const referenceValue = model.getValueInRange(referenceRange);\n    if (this._currentWordPattern) {\n      const match = referenceValue.match(this._currentWordPattern);\n      const matchLength = match ? match[0].length : 0;\n      if (matchLength !== referenceValue.length) {\n        return this.clearRanges();\n      }\n    }\n    const edits = [];\n    for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n      const mirrorRange = this._currentDecorations.getRange(i);\n      if (!mirrorRange) {\n        continue;\n      }\n      if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n        edits.push({\n          range: mirrorRange,\n          text: referenceValue\n        });\n      } else {\n        let oldValue = model.getValueInRange(mirrorRange);\n        let newValue = referenceValue;\n        let rangeStartColumn = mirrorRange.startColumn;\n        let rangeEndColumn = mirrorRange.endColumn;\n        const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n        rangeStartColumn += commonPrefixLength;\n        oldValue = oldValue.substr(commonPrefixLength);\n        newValue = newValue.substr(commonPrefixLength);\n        const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n        rangeEndColumn -= commonSuffixLength;\n        oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n        newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n        if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n          edits.push({\n            range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n            text: newValue\n          });\n        }\n      }\n    }\n    if (edits.length === 0) {\n      return;\n    }\n    try {\n      this._editor.popUndoStop();\n      this._ignoreChangeEvent = true;\n      const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n      this._editor.executeEdits('linkedEditing', edits);\n      this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n    } finally {\n      this._ignoreChangeEvent = false;\n    }\n  }\n  dispose() {\n    this.clearRanges();\n    super.dispose();\n  }\n  clearRanges() {\n    this._visibleContextKey.set(false);\n    this._currentDecorations.clear();\n    if (this._currentRequestCts) {\n      this._currentRequestCts.cancel();\n      this._currentRequestCts = null;\n      this._currentRequestPosition = null;\n    }\n  }\n  async updateRanges(force = false) {\n    if (!this._editor.hasModel()) {\n      this.clearRanges();\n      return;\n    }\n    const position = this._editor.getPosition();\n    if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n      // disabled or multicursor\n      this.clearRanges();\n      return;\n    }\n    const model = this._editor.getModel();\n    const modelVersionId = model.getVersionId();\n    if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n      if (position.equals(this._currentRequestPosition)) {\n        return; // same position\n      }\n      if (this._currentDecorations.length > 0) {\n        const range = this._currentDecorations.getRange(0);\n        if (range && range.containsPosition(position)) {\n          return; // just moving inside the existing primary range\n        }\n      }\n    }\n    // Clear existing decorations while we compute new ones\n    this.clearRanges();\n    this._currentRequestPosition = position;\n    this._currentRequestModelVersion = modelVersionId;\n    const currentRequestCts = this._currentRequestCts = new CancellationTokenSource();\n    try {\n      const sw = new StopWatch(false);\n      const response = await getLinkedEditingRanges(this._providers, model, position, currentRequestCts.token);\n      this._debounceInformation.update(model, sw.elapsed());\n      if (currentRequestCts !== this._currentRequestCts) {\n        return;\n      }\n      this._currentRequestCts = null;\n      if (modelVersionId !== model.getVersionId()) {\n        return;\n      }\n      let ranges = [];\n      if (response?.ranges) {\n        ranges = response.ranges;\n      }\n      this._currentWordPattern = response?.wordPattern || this._languageWordPattern;\n      let foundReferenceRange = false;\n      for (let i = 0, len = ranges.length; i < len; i++) {\n        if (Range.containsPosition(ranges[i], position)) {\n          foundReferenceRange = true;\n          if (i !== 0) {\n            const referenceRange = ranges[i];\n            ranges.splice(i, 1);\n            ranges.unshift(referenceRange);\n          }\n          break;\n        }\n      }\n      if (!foundReferenceRange) {\n        // Cannot do linked editing if the ranges are not where the cursor is...\n        this.clearRanges();\n        return;\n      }\n      const decorations = ranges.map(range => ({\n        range: range,\n        options: LinkedEditingContribution_1.DECORATION\n      }));\n      this._visibleContextKey.set(true);\n      this._currentDecorations.set(decorations);\n      this._syncRangesToken++; // cancel any pending syncRanges call\n    } catch (err) {\n      if (!isCancellationError(err)) {\n        onUnexpectedError(err);\n      }\n      if (this._currentRequestCts === currentRequestCts || !this._currentRequestCts) {\n        // stop if we are still the latest request\n        this.clearRanges();\n      }\n    }\n  }\n};\nLinkedEditingContribution = LinkedEditingContribution_1 = __decorate([__param(1, IContextKeyService), __param(2, ILanguageFeaturesService), __param(3, ILanguageConfigurationService), __param(4, ILanguageFeatureDebounceService)], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.linkedEditing',\n      label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n      alias: 'Start Linked Editing',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  runCommand(accessor, args) {\n    const editorService = accessor.get(ICodeEditorService);\n    const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n    if (URI.isUri(uri) && Position.isIPosition(pos)) {\n      return editorService.openCodeEditor({\n        resource: uri\n      }, editorService.getActiveCodeEditor()).then(editor => {\n        if (!editor) {\n          return;\n        }\n        editor.setPosition(pos);\n        editor.invokeWithinContext(accessor => {\n          this.reportTelemetry(accessor, editor);\n          return this.run(accessor, editor);\n        });\n      }, onUnexpectedError);\n    }\n    return super.runCommand(accessor, args);\n  }\n  run(_accessor, editor) {\n    const controller = LinkedEditingContribution.get(editor);\n    if (controller) {\n      return Promise.resolve(controller.updateRanges(true));\n    }\n    return Promise.resolve();\n  }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n  id: 'cancelLinkedEditingInput',\n  precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n  handler: x => x.clearRanges(),\n  kbOpts: {\n    kbExpr: EditorContextKeys.editorTextFocus,\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n  const orderedByScore = providers.ordered(model);\n  // in order of score ask the linked editing range provider\n  // until someone response with a good result\n  // (good = not null)\n  return first(orderedByScore.map(provider => async () => {\n    try {\n      return await provider.provideLinkedEditingRanges(model, position, token);\n    } catch (e) {\n      onUnexpectedExternalError(e);\n      return undefined;\n    }\n  }), result => !!result && arrays.isNonEmptyArray(result?.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', {\n  dark: Color.fromHex('#f00').transparent(0.3),\n  light: Color.fromHex('#f00').transparent(0.3),\n  hcDark: Color.fromHex('#f00').transparent(0.3),\n  hcLight: Color.white\n}, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n  const {\n    linkedEditingRangeProvider\n  } = _accessor.get(ILanguageFeaturesService);\n  return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(LinkedEditingAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar LinkDetector_1;\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nlet LinkDetector = /*#__PURE__*/(() => {\n  let LinkDetector = class LinkDetector extends Disposable {\n    static {\n      LinkDetector_1 = this;\n    }\n    static {\n      this.ID = 'editor.linkDetector';\n    }\n    static get(editor) {\n      return editor.getContribution(LinkDetector_1.ID);\n    }\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n      super();\n      this.editor = editor;\n      this.openerService = openerService;\n      this.notificationService = notificationService;\n      this.languageFeaturesService = languageFeaturesService;\n      this.providers = this.languageFeaturesService.linkProvider;\n      this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', {\n        min: 1000,\n        max: 4000\n      });\n      this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n      this.computePromise = null;\n      this.activeLinksList = null;\n      this.currentOccurrences = {};\n      this.activeLinkDecorationId = null;\n      const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n      this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n        this._onEditorMouseMove(mouseEvent, keyboardEvent);\n      }));\n      this._register(clickLinkGesture.onExecute(e => {\n        this.onEditorMouseUp(e);\n      }));\n      this._register(clickLinkGesture.onCancel(e => {\n        this.cleanUpActiveLinkDecoration();\n      }));\n      this._register(editor.onDidChangeConfiguration(e => {\n        if (!e.hasChanged(71 /* EditorOption.links */)) {\n          return;\n        }\n        // Remove any links (for the getting disabled case)\n        this.updateDecorations([]);\n        // Stop any computation (for the getting disabled case)\n        this.stop();\n        // Start computing (for the getting enabled case)\n        this.computeLinks.schedule(0);\n      }));\n      this._register(editor.onDidChangeModelContent(e => {\n        if (!this.editor.hasModel()) {\n          return;\n        }\n        this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n      }));\n      this._register(editor.onDidChangeModel(e => {\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this._register(editor.onDidChangeModelLanguage(e => {\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this._register(this.providers.onDidChange(e => {\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this.computeLinks.schedule(0);\n    }\n    async computeLinksNow() {\n      if (!this.editor.hasModel() || !this.editor.getOption(71 /* EditorOption.links */)) {\n        return;\n      }\n      const model = this.editor.getModel();\n      if (model.isTooLargeForSyncing()) {\n        return;\n      }\n      if (!this.providers.has(model)) {\n        return;\n      }\n      if (this.activeLinksList) {\n        this.activeLinksList.dispose();\n        this.activeLinksList = null;\n      }\n      this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n      try {\n        const sw = new StopWatch(false);\n        this.activeLinksList = await this.computePromise;\n        this.debounceInformation.update(model, sw.elapsed());\n        if (model.isDisposed()) {\n          return;\n        }\n        this.updateDecorations(this.activeLinksList.links);\n      } catch (err) {\n        onUnexpectedError(err);\n      } finally {\n        this.computePromise = null;\n      }\n    }\n    updateDecorations(links) {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      const oldDecorations = [];\n      const keys = Object.keys(this.currentOccurrences);\n      for (const decorationId of keys) {\n        const occurence = this.currentOccurrences[decorationId];\n        oldDecorations.push(occurence.decorationId);\n      }\n      const newDecorations = [];\n      if (links) {\n        // Not sure why this is sometimes null\n        for (const link of links) {\n          newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n        }\n      }\n      this.editor.changeDecorations(changeAccessor => {\n        const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        for (let i = 0, len = decorations.length; i < len; i++) {\n          const occurence = new LinkOccurrence(links[i], decorations[i]);\n          this.currentOccurrences[occurence.decorationId] = occurence;\n        }\n      });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      if (this.isEnabled(mouseEvent, withKey)) {\n        this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (occurrence) {\n          this.editor.changeDecorations(changeAccessor => {\n            occurrence.activate(changeAccessor, useMetaKey);\n            this.activeLinkDecorationId = occurrence.decorationId;\n          });\n        }\n      } else {\n        this.cleanUpActiveLinkDecoration();\n      }\n    }\n    cleanUpActiveLinkDecoration() {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      if (this.activeLinkDecorationId) {\n        const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n        if (occurrence) {\n          this.editor.changeDecorations(changeAccessor => {\n            occurrence.deactivate(changeAccessor, useMetaKey);\n          });\n        }\n        this.activeLinkDecorationId = null;\n      }\n    }\n    onEditorMouseUp(mouseEvent) {\n      if (!this.isEnabled(mouseEvent)) {\n        return;\n      }\n      const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n      if (!occurrence) {\n        return;\n      }\n      this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n      if (!this.openerService) {\n        return;\n      }\n      const {\n        link\n      } = occurrence;\n      link.resolve(CancellationToken.None).then(uri => {\n        // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n        if (typeof uri === 'string' && this.editor.hasModel()) {\n          const modelUri = this.editor.getModel().uri;\n          if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n            const parsedUri = URI.parse(uri);\n            if (parsedUri.scheme === Schemas.file) {\n              const fsPath = resources.originalFSPath(parsedUri);\n              let relativePath = null;\n              if (fsPath.startsWith('/./') || fsPath.startsWith('\\\\.\\\\')) {\n                relativePath = `.${fsPath.substr(1)}`;\n              } else if (fsPath.startsWith('//./') || fsPath.startsWith('\\\\\\\\.\\\\')) {\n                relativePath = `.${fsPath.substr(2)}`;\n              }\n              if (relativePath) {\n                uri = resources.joinPath(modelUri, relativePath);\n              }\n            }\n          }\n        }\n        return this.openerService.open(uri, {\n          openToSide,\n          fromUserGesture,\n          allowContributedOpeners: true,\n          allowCommands: true,\n          fromWorkspace: true\n        });\n      }, err => {\n        const messageOrError = err instanceof Error ? err.message : err;\n        // different error cases\n        if (messageOrError === 'invalid') {\n          this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n        } else if (messageOrError === 'missing') {\n          this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n        } else {\n          onUnexpectedError(err);\n        }\n      });\n    }\n    getLinkOccurrence(position) {\n      if (!this.editor.hasModel() || !position) {\n        return null;\n      }\n      const decorations = this.editor.getModel().getDecorationsInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: position.column,\n        endLineNumber: position.lineNumber,\n        endColumn: position.column\n      }, 0, true);\n      for (const decoration of decorations) {\n        const currentOccurrence = this.currentOccurrences[decoration.id];\n        if (currentOccurrence) {\n          return currentOccurrence;\n        }\n      }\n      return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n      return Boolean(mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && (mouseEvent.hasTriggerModifier || withKey && withKey.keyCodeIsTriggerKey));\n    }\n    stop() {\n      this.computeLinks.cancel();\n      if (this.activeLinksList) {\n        this.activeLinksList?.dispose();\n        this.activeLinksList = null;\n      }\n      if (this.computePromise) {\n        this.computePromise.cancel();\n        this.computePromise = null;\n      }\n    }\n    dispose() {\n      super.dispose();\n      this.stop();\n    }\n  };\n  return LinkDetector;\n})();\nLinkDetector = LinkDetector_1 = __decorate([__param(1, IOpenerService), __param(2, INotificationService), __param(3, ILanguageFeaturesService), __param(4, ILanguageFeatureDebounceService)], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n  general: ModelDecorationOptions.register({\n    description: 'detected-link',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link'\n  }),\n  active: ModelDecorationOptions.register({\n    description: 'detected-link-active',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active'\n  })\n};\nclass LinkOccurrence {\n  static decoration(link, useMetaKey) {\n    return {\n      range: link.range,\n      options: LinkOccurrence._getOptions(link, useMetaKey, false)\n    };\n  }\n  static _getOptions(link, useMetaKey, isActive) {\n    const options = {\n      ...(isActive ? decoration.active : decoration.general)\n    };\n    options.hoverMessage = getHoverMessage(link, useMetaKey);\n    return options;\n  }\n  constructor(link, decorationId) {\n    this.link = link;\n    this.decorationId = decorationId;\n  }\n  activate(changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n  }\n  deactivate(changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n  }\n}\nfunction getHoverMessage(link, useMetaKey) {\n  const executeCmd = link.url && /^command:/i.test(link.url.toString());\n  const label = link.tooltip ? link.tooltip : executeCmd ? nls.localize('links.navigate.executeCmd', 'Execute command') : nls.localize('links.navigate.follow', 'Follow link');\n  const kb = useMetaKey ? platform.isMacintosh ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\") : nls.localize('links.navigate.kb.meta', \"ctrl + click\") : platform.isMacintosh ? nls.localize('links.navigate.kb.alt.mac', \"option + click\") : nls.localize('links.navigate.kb.alt', \"alt + click\");\n  if (link.url) {\n    let nativeLabel = '';\n    if (/^command:/i.test(link.url.toString())) {\n      // Don't show complete command arguments in the native tooltip\n      const match = link.url.toString().match(/^command:([^?#]+)/);\n      if (match) {\n        const commandId = match[1];\n        nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n      }\n    }\n    const hoverMessage = new MarkdownString('', true).appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel).appendMarkdown(` (${kb})`);\n    return hoverMessage;\n  } else {\n    return new MarkdownString().appendText(`${label} (${kb})`);\n  }\n}\nclass OpenLinkAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.openLink',\n      label: nls.localize('label', \"Open Link\"),\n      alias: 'Open Link',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    const linkDetector = LinkDetector.get(editor);\n    if (!linkDetector) {\n      return;\n    }\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections();\n    for (const sel of selections) {\n      const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n      if (link) {\n        linkDetector.openLinkOccurrence(link, false);\n      }\n    }\n  }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(OpenLinkAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n  constructor(link, provider) {\n    this._link = link;\n    this._provider = provider;\n  }\n  toJSON() {\n    return {\n      range: this.range,\n      url: this.url,\n      tooltip: this.tooltip\n    };\n  }\n  get range() {\n    return this._link.range;\n  }\n  get url() {\n    return this._link.url;\n  }\n  get tooltip() {\n    return this._link.tooltip;\n  }\n  async resolve(token) {\n    if (this._link.url) {\n      return this._link.url;\n    }\n    if (typeof this._provider.resolveLink === 'function') {\n      return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n        this._link = value || this._link;\n        if (this._link.url) {\n          // recurse\n          return this.resolve(token);\n        }\n        return Promise.reject(new Error('missing'));\n      });\n    }\n    return Promise.reject(new Error('missing'));\n  }\n}\nexport class LinksList {\n  constructor(tuples) {\n    this._disposables = new DisposableStore();\n    let links = [];\n    for (const [list, provider] of tuples) {\n      // merge all links\n      const newLinks = list.links.map(link => new Link(link, provider));\n      links = LinksList._union(links, newLinks);\n      // register disposables\n      if (isDisposable(list)) {\n        this._disposables.add(list);\n      }\n    }\n    this.links = links;\n  }\n  dispose() {\n    this._disposables.dispose();\n    this.links.length = 0;\n  }\n  static _union(oldLinks, newLinks) {\n    // reunite oldLinks with newLinks and remove duplicates\n    const result = [];\n    let oldIndex;\n    let oldLen;\n    let newIndex;\n    let newLen;\n    for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n      const oldLink = oldLinks[oldIndex];\n      const newLink = newLinks[newIndex];\n      if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n        // Remove the oldLink\n        oldIndex++;\n        continue;\n      }\n      const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n      if (comparisonResult < 0) {\n        // oldLink is before\n        result.push(oldLink);\n        oldIndex++;\n      } else {\n        // newLink is before\n        result.push(newLink);\n        newIndex++;\n      }\n    }\n    for (; oldIndex < oldLen; oldIndex++) {\n      result.push(oldLinks[oldIndex]);\n    }\n    for (; newIndex < newLen; newIndex++) {\n      result.push(newLinks[newIndex]);\n    }\n    return result;\n  }\n}\nexport function getLinks(providers, model, token) {\n  const lists = [];\n  // ask all providers for links in parallel\n  const promises = providers.ordered(model).reverse().map((provider, i) => {\n    return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n      if (result) {\n        lists[i] = [result, provider];\n      }\n    }, onUnexpectedExternalError);\n  });\n  return Promise.all(promises).then(() => {\n    const result = new LinksList(coalesce(lists));\n    if (!token.isCancellationRequested) {\n      return result;\n    }\n    result.dispose();\n    return new LinksList([]);\n  });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', async (accessor, ...args) => {\n  let [uri, resolveCount] = args;\n  assertType(uri instanceof URI);\n  if (typeof resolveCount !== 'number') {\n    resolveCount = 0;\n  }\n  const {\n    linkProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    return [];\n  }\n  const list = await getLinks(linkProvider, model, CancellationToken.None);\n  if (!list) {\n    return [];\n  }\n  // resolve links\n  for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n    await list.links[i].resolve(CancellationToken.None);\n  }\n  const result = list.links.slice(0);\n  list.dispose();\n  return result;\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nlet LongLinesHelper = /*#__PURE__*/(() => {\n  class LongLinesHelper extends Disposable {\n    static {\n      this.ID = 'editor.contrib.longLinesHelper';\n    }\n    constructor(_editor) {\n      super();\n      this._editor = _editor;\n      this._register(this._editor.onMouseDown(e => {\n        const stopRenderingLineAfter = this._editor.getOption(118 /* EditorOption.stopRenderingLineAfter */);\n        if (stopRenderingLineAfter >= 0 && e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.position.column >= stopRenderingLineAfter) {\n          this._editor.updateOptions({\n            stopRenderingLineAfter: -1\n          });\n        }\n      }));\n    }\n  }\n  return LongLinesHelper;\n})();\nregisterEditorContribution(LongLinesHelper.ID, LongLinesHelper, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SelectionHighlighter_1;\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getSelectionHighlightDecorationOptions } from '../../wordHighlighter/browser/highlightDecorations.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n  const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n  if (cursorDiff.length >= 1) {\n    const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n    const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n    status(msg);\n  }\n}\nexport class InsertCursorAbove extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertCursorAbove',\n      label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n      alias: 'Add Cursor Above',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n        linux: {\n          primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAbove',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Add Cursor Above\"),\n        order: 2\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    let useLogicalLine = true;\n    if (args && args.logicalLine === false) {\n      useLogicalLine = false;\n    }\n    const viewModel = editor._getViewModel();\n    if (viewModel.cursorConfig.readOnly) {\n      return;\n    }\n    viewModel.model.pushStackElement();\n    const previousCursorState = viewModel.getCursorStates();\n    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n    viewModel.revealTopMostCursor(args.source);\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nexport class InsertCursorBelow extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertCursorBelow',\n      label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n      alias: 'Add Cursor Below',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n        linux: {\n          primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorBelow',\n          comment: ['&& denotes a mnemonic']\n        }, \"A&&dd Cursor Below\"),\n        order: 3\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    let useLogicalLine = true;\n    if (args && args.logicalLine === false) {\n      useLogicalLine = false;\n    }\n    const viewModel = editor._getViewModel();\n    if (viewModel.cursorConfig.readOnly) {\n      return;\n    }\n    viewModel.model.pushStackElement();\n    const previousCursorState = viewModel.getCursorStates();\n    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n    viewModel.revealBottomMostCursor(args.source);\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n      label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n      alias: 'Add Cursors to Line Ends',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAtEndOfEachLineSelected',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add C&&ursors to Line Ends\"),\n        order: 4\n      }\n    });\n  }\n  getCursorsForSelection(selection, model, result) {\n    if (selection.isEmpty()) {\n      return;\n    }\n    for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n      const currentLineMaxColumn = model.getLineMaxColumn(i);\n      result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n    }\n    if (selection.endColumn > 1) {\n      result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n    }\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    const selections = editor.getSelections();\n    const viewModel = editor._getViewModel();\n    const previousCursorState = viewModel.getCursorStates();\n    const newSelections = [];\n    selections.forEach(sel => this.getCursorsForSelection(sel, model, newSelections));\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.addCursorsToBottom',\n      label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n      alias: 'Add Cursors To Bottom',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections();\n    const lineCount = editor.getModel().getLineCount();\n    const newSelections = [];\n    for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n    const viewModel = editor._getViewModel();\n    const previousCursorState = viewModel.getCursorStates();\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.addCursorsToTop',\n      label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n      alias: 'Add Cursors To Top',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections();\n    const newSelections = [];\n    for (let i = selections[0].startLineNumber; i >= 1; i--) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n    const viewModel = editor._getViewModel();\n    const previousCursorState = viewModel.getCursorStates();\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nexport class MultiCursorSessionResult {\n  constructor(selections, revealRange, revealScrollType) {\n    this.selections = selections;\n    this.revealRange = revealRange;\n    this.revealScrollType = revealScrollType;\n  }\n}\nexport class MultiCursorSession {\n  static create(editor, findController) {\n    if (!editor.hasModel()) {\n      return null;\n    }\n    const findState = findController.getState();\n    // Find widget owns entirely what we search for if:\n    //  - focus is not in the editor (i.e. it is in the find widget)\n    //  - and the search widget is visible\n    //  - and the search string is non-empty\n    if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n      // Find widget owns what is searched for\n      return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n    }\n    // Otherwise, the selection gives the search text, and the find widget gives the search settings\n    // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n    let isDisconnectedFromFindController = false;\n    let wholeWord;\n    let matchCase;\n    const selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      isDisconnectedFromFindController = true;\n      wholeWord = true;\n      matchCase = true;\n    } else {\n      wholeWord = findState.wholeWord;\n      matchCase = findState.matchCase;\n    }\n    // Selection owns what is searched for\n    const s = editor.getSelection();\n    let searchText;\n    let currentMatch = null;\n    if (s.isEmpty()) {\n      // selection is empty => expand to current word\n      const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n      if (!word) {\n        return null;\n      }\n      searchText = word.word;\n      currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n    } else {\n      searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n    }\n    return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n  }\n  constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n    this._editor = _editor;\n    this.findController = findController;\n    this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n    this.searchText = searchText;\n    this.wholeWord = wholeWord;\n    this.matchCase = matchCase;\n    this.currentMatch = currentMatch;\n  }\n  addSelectionToNextFindMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const nextMatch = this._getNextMatch();\n    if (!nextMatch) {\n      return null;\n    }\n    const allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n  }\n  moveSelectionToNextFindMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const nextMatch = this._getNextMatch();\n    if (!nextMatch) {\n      return null;\n    }\n    const allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n  }\n  _getNextMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    if (this.currentMatch) {\n      const result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n    this.findController.highlightFindOptions();\n    const allSelections = this._editor.getSelections();\n    const lastAddedSelection = allSelections[allSelections.length - 1];\n    const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false);\n    if (!nextMatch) {\n      return null;\n    }\n    return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n  }\n  addSelectionToPreviousFindMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const previousMatch = this._getPreviousMatch();\n    if (!previousMatch) {\n      return null;\n    }\n    const allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n  }\n  moveSelectionToPreviousFindMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const previousMatch = this._getPreviousMatch();\n    if (!previousMatch) {\n      return null;\n    }\n    const allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n  }\n  _getPreviousMatch() {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    if (this.currentMatch) {\n      const result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n    this.findController.highlightFindOptions();\n    const allSelections = this._editor.getSelections();\n    const lastAddedSelection = allSelections[allSelections.length - 1];\n    const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false);\n    if (!previousMatch) {\n      return null;\n    }\n    return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n  }\n  selectAll(searchScope) {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n    this.findController.highlightFindOptions();\n    const editorModel = this._editor.getModel();\n    if (searchScope) {\n      return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n    return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n  }\n}\nexport let MultiCursorSelectionController = /*#__PURE__*/(() => {\n  class MultiCursorSelectionController extends Disposable {\n    static {\n      this.ID = 'editor.contrib.multiCursorController';\n    }\n    static get(editor) {\n      return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    constructor(editor) {\n      super();\n      this._sessionDispose = this._register(new DisposableStore());\n      this._editor = editor;\n      this._ignoreSelectionChange = false;\n      this._session = null;\n    }\n    dispose() {\n      this._endSession();\n      super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n      if (!this._session) {\n        // Create a new session\n        const session = MultiCursorSession.create(this._editor, findController);\n        if (!session) {\n          return;\n        }\n        this._session = session;\n        const newState = {\n          searchString: this._session.searchText\n        };\n        if (this._session.isDisconnectedFromFindController) {\n          newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n          newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n          newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n        }\n        findController.getState().change(newState, false);\n        this._sessionDispose.add(this._editor.onDidChangeCursorSelection(e => {\n          if (this._ignoreSelectionChange) {\n            return;\n          }\n          this._endSession();\n        }));\n        this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n          this._endSession();\n        }));\n        this._sessionDispose.add(findController.getState().onFindReplaceStateChange(e => {\n          if (e.matchCase || e.wholeWord) {\n            this._endSession();\n          }\n        }));\n      }\n    }\n    _endSession() {\n      this._sessionDispose.clear();\n      if (this._session && this._session.isDisconnectedFromFindController) {\n        const newState = {\n          wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n          matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n          isRegexOverride: 0 /* FindOptionOverride.NotSet */\n        };\n        this._session.findController.getState().change(newState, false);\n      }\n      this._session = null;\n    }\n    _setSelections(selections) {\n      this._ignoreSelectionChange = true;\n      this._editor.setSelections(selections);\n      this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n      if (!selection.isEmpty()) {\n        return selection;\n      }\n      const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n      if (!word) {\n        return selection;\n      }\n      return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n      if (!result) {\n        return;\n      }\n      this._setSelections(result.selections);\n      if (result.revealRange) {\n        this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n      }\n    }\n    getSession(findController) {\n      return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (!this._session) {\n        // If there are multiple cursors, handle the case where they do not all select the same text.\n        const allSelections = this._editor.getSelections();\n        if (allSelections.length > 1) {\n          const findState = findController.getState();\n          const matchCase = findState.matchCase;\n          const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n          if (!selectionsContainSameText) {\n            const model = this._editor.getModel();\n            const resultingSelections = [];\n            for (let i = 0, len = allSelections.length; i < len; i++) {\n              resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n            }\n            this._editor.setSelections(resultingSelections);\n            return;\n          }\n        }\n      }\n      this._beginSessionIfNeeded(findController);\n      if (this._session) {\n        this._applySessionResult(this._session.addSelectionToNextFindMatch());\n      }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n      this._beginSessionIfNeeded(findController);\n      if (this._session) {\n        this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n      }\n    }\n    moveSelectionToNextFindMatch(findController) {\n      this._beginSessionIfNeeded(findController);\n      if (this._session) {\n        this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n      }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n      this._beginSessionIfNeeded(findController);\n      if (this._session) {\n        this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n      }\n    }\n    selectAll(findController) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      let matches = null;\n      const findState = findController.getState();\n      // Special case: find widget owns entirely what we search for if:\n      // - focus is not in the editor (i.e. it is in the find widget)\n      // - and the search widget is visible\n      // - and the search string is non-empty\n      // - and we're searching for a regex\n      if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n        const editorModel = this._editor.getModel();\n        if (findState.searchScope) {\n          matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        } else {\n          matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(132 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n      } else {\n        this._beginSessionIfNeeded(findController);\n        if (!this._session) {\n          return;\n        }\n        matches = this._session.selectAll(findState.searchScope);\n      }\n      if (matches.length > 0) {\n        const editorSelection = this._editor.getSelection();\n        // Have the primary cursor remain the one where the action was invoked\n        for (let i = 0, len = matches.length; i < len; i++) {\n          const match = matches[i];\n          const intersection = match.range.intersectRanges(editorSelection);\n          if (intersection) {\n            // bingo!\n            matches[i] = matches[0];\n            matches[0] = match;\n            break;\n          }\n        }\n        this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n      }\n    }\n  }\n  return MultiCursorSelectionController;\n})();\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n  run(accessor, editor) {\n    const multiCursorController = MultiCursorSelectionController.get(editor);\n    if (!multiCursorController) {\n      return;\n    }\n    const viewModel = editor._getViewModel();\n    if (viewModel) {\n      const previousCursorState = viewModel.getCursorStates();\n      const findController = CommonFindController.get(editor);\n      if (findController) {\n        this._run(multiCursorController, findController);\n      } else {\n        const newFindController = accessor.get(IInstantiationService).createInstance(CommonFindController, editor);\n        this._run(multiCursorController, newFindController);\n        newFindController.dispose();\n      }\n      announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n  }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.addSelectionToNextFindMatch',\n      label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n      alias: 'Add Selection To Next Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToNextFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add &&Next Occurrence\"),\n        order: 5\n      }\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.addSelectionToNextFindMatch(findController);\n  }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.addSelectionToPreviousFindMatch',\n      label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n      alias: 'Add Selection To Previous Find Match',\n      precondition: undefined,\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToPreviousFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add P&&revious Occurrence\"),\n        order: 6\n      }\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.addSelectionToPreviousFindMatch(findController);\n  }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.moveSelectionToNextFindMatch',\n      label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n      alias: 'Move Last Selection To Next Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.moveSelectionToNextFindMatch(findController);\n  }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.moveSelectionToPreviousFindMatch',\n      label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n      alias: 'Move Last Selection To Previous Find Match',\n      precondition: undefined\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.moveSelectionToPreviousFindMatch(findController);\n  }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.selectHighlights',\n      label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n      alias: 'Select All Occurrences of Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miSelectHighlights',\n          comment: ['&& denotes a mnemonic']\n        }, \"Select All &&Occurrences\"),\n        order: 7\n      }\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n  constructor() {\n    super({\n      id: 'editor.action.changeAll',\n      label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n      alias: 'Change All Occurrences',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 1.2\n      }\n    });\n  }\n  _run(multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  }\n}\nclass SelectionHighlighterState {\n  constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n    this._model = _model;\n    this._searchText = _searchText;\n    this._matchCase = _matchCase;\n    this._wordSeparators = _wordSeparators;\n    this._modelVersionId = this._model.getVersionId();\n    this._cachedFindMatches = null;\n    if (prevState && this._model === prevState._model && this._searchText === prevState._searchText && this._matchCase === prevState._matchCase && this._wordSeparators === prevState._wordSeparators && this._modelVersionId === prevState._modelVersionId) {\n      this._cachedFindMatches = prevState._cachedFindMatches;\n    }\n  }\n  findMatches() {\n    if (this._cachedFindMatches === null) {\n      this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n      this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n    }\n    return this._cachedFindMatches;\n  }\n}\nlet SelectionHighlighter = /*#__PURE__*/(() => {\n  let SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    static {\n      SelectionHighlighter_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.selectionHighlighter';\n    }\n    constructor(editor, _languageFeaturesService) {\n      super();\n      this._languageFeaturesService = _languageFeaturesService;\n      this.editor = editor;\n      this._isEnabled = editor.getOption(109 /* EditorOption.selectionHighlight */);\n      this._decorations = editor.createDecorationsCollection();\n      this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n      this.state = null;\n      this._register(editor.onDidChangeConfiguration(e => {\n        this._isEnabled = editor.getOption(109 /* EditorOption.selectionHighlight */);\n      }));\n      this._register(editor.onDidChangeCursorSelection(e => {\n        if (!this._isEnabled) {\n          // Early exit if nothing needs to be done!\n          // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n          return;\n        }\n        if (e.selection.isEmpty()) {\n          if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n            if (this.state) {\n              // no longer valid\n              this._setState(null);\n            }\n            this.updateSoon.schedule();\n          } else {\n            this._setState(null);\n          }\n        } else {\n          this._update();\n        }\n      }));\n      this._register(editor.onDidChangeModel(e => {\n        this._setState(null);\n      }));\n      this._register(editor.onDidChangeModelContent(e => {\n        if (this._isEnabled) {\n          this.updateSoon.schedule();\n        }\n      }));\n      const findController = CommonFindController.get(editor);\n      if (findController) {\n        this._register(findController.getState().onFindReplaceStateChange(e => {\n          this._update();\n        }));\n      }\n      this.updateSoon.schedule();\n    }\n    _update() {\n      this._setState(SelectionHighlighter_1._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n      if (!isEnabled) {\n        return null;\n      }\n      if (!editor.hasModel()) {\n        return null;\n      }\n      const s = editor.getSelection();\n      if (s.startLineNumber !== s.endLineNumber) {\n        // multiline forbidden for perf reasons\n        return null;\n      }\n      const multiCursorController = MultiCursorSelectionController.get(editor);\n      if (!multiCursorController) {\n        return null;\n      }\n      const findController = CommonFindController.get(editor);\n      if (!findController) {\n        return null;\n      }\n      let r = multiCursorController.getSession(findController);\n      if (!r) {\n        const allSelections = editor.getSelections();\n        if (allSelections.length > 1) {\n          const findState = findController.getState();\n          const matchCase = findState.matchCase;\n          const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n          if (!selectionsContainSameText) {\n            return null;\n          }\n        }\n        r = MultiCursorSession.create(editor, findController);\n      }\n      if (!r) {\n        return null;\n      }\n      if (r.currentMatch) {\n        // This is an empty selection\n        // Do not interfere with semantic word highlighting in the no selection case\n        return null;\n      }\n      if (/^[ \\t]+$/.test(r.searchText)) {\n        // whitespace only selection\n        return null;\n      }\n      if (r.searchText.length > 200) {\n        // very long selection\n        return null;\n      }\n      // TODO: better handling of this case\n      const findState = findController.getState();\n      const caseSensitive = findState.matchCase;\n      // Return early if the find widget shows the exact same matches\n      if (findState.isRevealed) {\n        let findStateSearchString = findState.searchString;\n        if (!caseSensitive) {\n          findStateSearchString = findStateSearchString.toLowerCase();\n        }\n        let mySearchString = r.searchText;\n        if (!caseSensitive) {\n          mySearchString = mySearchString.toLowerCase();\n        }\n        if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n          return null;\n        }\n      }\n      return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(132 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n      this.state = newState;\n      if (!this.state) {\n        this._decorations.clear();\n        return;\n      }\n      if (!this.editor.hasModel()) {\n        return;\n      }\n      const model = this.editor.getModel();\n      if (model.isTooLargeForTokenization()) {\n        // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n        return;\n      }\n      const allMatches = this.state.findMatches();\n      const selections = this.editor.getSelections();\n      selections.sort(Range.compareRangesUsingStarts);\n      // do not overlap with selection (issue #64 and #512)\n      const matches = [];\n      for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n        const match = allMatches[i];\n        if (j >= lenJ) {\n          // finished all editor selections\n          matches.push(match);\n          i++;\n        } else {\n          const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n          if (cmp < 0) {\n            // match is before sel\n            if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n              matches.push(match);\n            }\n            i++;\n          } else if (cmp > 0) {\n            // sel is before match\n            j++;\n          } else {\n            // sel is equal to match\n            i++;\n            j++;\n          }\n        }\n      }\n      const occurrenceHighlighting = this.editor.getOption(81 /* EditorOption.occurrencesHighlight */) !== 'off';\n      const hasSemanticHighlights = this._languageFeaturesService.documentHighlightProvider.has(model) && occurrenceHighlighting;\n      const decorations = matches.map(r => {\n        return {\n          range: r,\n          options: getSelectionHighlightDecorationOptions(hasSemanticHighlights)\n        };\n      });\n      this._decorations.set(decorations);\n    }\n    dispose() {\n      this._setState(null);\n      super.dispose();\n    }\n  };\n  return SelectionHighlighter;\n})();\nSelectionHighlighter = SelectionHighlighter_1 = __decorate([__param(1, ILanguageFeaturesService)], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n  const selectedText = getValueInRange(model, ranges[0], !matchCase);\n  for (let i = 1, len = ranges.length; i < len; i++) {\n    const range = ranges[i];\n    if (range.isEmpty()) {\n      return false;\n    }\n    const thisSelectedText = getValueInRange(model, range, !matchCase);\n    if (selectedText !== thisSelectedText) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n  const text = model.getValueInRange(range);\n  return toLowerCase ? text.toLowerCase() : text;\n}\nexport class FocusNextCursor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.focusNextCursor',\n      label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n      metadata: {\n        description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n        args: []\n      },\n      alias: 'Focus Next Cursor',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const viewModel = editor._getViewModel();\n    if (viewModel.cursorConfig.readOnly) {\n      return;\n    }\n    viewModel.model.pushStackElement();\n    const previousCursorState = Array.from(viewModel.getCursorStates());\n    const firstCursor = previousCursorState.shift();\n    if (!firstCursor) {\n      return;\n    }\n    previousCursorState.push(firstCursor);\n    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n    viewModel.revealPrimaryCursor(args.source, true);\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nexport class FocusPreviousCursor extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.focusPreviousCursor',\n      label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n      metadata: {\n        description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n        args: []\n      },\n      alias: 'Focus Previous Cursor',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const viewModel = editor._getViewModel();\n    if (viewModel.cursorConfig.readOnly) {\n      return;\n    }\n    viewModel.model.pushStackElement();\n    const previousCursorState = Array.from(viewModel.getCursorStates());\n    const firstCursor = previousCursorState.pop();\n    if (!firstCursor) {\n      return;\n    }\n    previousCursorState.unshift(firstCursor);\n    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n    viewModel.revealPrimaryCursor(args.source, true);\n    announceCursorChange(previousCursorState, viewModel.getCursorStates());\n  }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './highlightDecorations.css';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { activeContrastBorder, editorSelectionHighlight, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst wordHighlightBackground = registerColor('editor.wordHighlightBackground', {\n  dark: '#575757B8',\n  light: '#57575740',\n  hcDark: null,\n  hcLight: null\n}, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nregisterColor('editor.wordHighlightStrongBackground', {\n  dark: '#004972B8',\n  light: '#0e639c40',\n  hcDark: null,\n  hcLight: null\n}, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nregisterColor('editor.wordHighlightTextBackground', wordHighlightBackground, nls.localize('wordHighlightText', 'Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst wordHighlightBorder = registerColor('editor.wordHighlightBorder', {\n  light: null,\n  dark: null,\n  hcDark: activeContrastBorder,\n  hcLight: activeContrastBorder\n}, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nregisterColor('editor.wordHighlightStrongBorder', {\n  light: null,\n  dark: null,\n  hcDark: activeContrastBorder,\n  hcLight: activeContrastBorder\n}, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nregisterColor('editor.wordHighlightTextBorder', wordHighlightBorder, nls.localize('wordHighlightTextBorder', \"Border color of a textual occurrence for a symbol.\"));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', '#A0A0A0CC', nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', '#C0A0C0CC', nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightTextForeground = registerColor('editorOverviewRuler.wordHighlightTextForeground', overviewRulerSelectionHighlightForeground, nls.localize('overviewRulerWordHighlightTextForeground', 'Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst _WRITE_OPTIONS = ModelDecorationOptions.register({\n  description: 'word-highlight-strong',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'wordHighlightStrong',\n  overviewRuler: {\n    color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n    position: OverviewRulerLane.Center\n  },\n  minimap: {\n    color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n    position: 1 /* MinimapPosition.Inline */\n  }\n});\nconst _TEXT_OPTIONS = ModelDecorationOptions.register({\n  description: 'word-highlight-text',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'wordHighlightText',\n  overviewRuler: {\n    color: themeColorFromId(overviewRulerWordHighlightTextForeground),\n    position: OverviewRulerLane.Center\n  },\n  minimap: {\n    color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n    position: 1 /* MinimapPosition.Inline */\n  }\n});\nconst _SELECTION_HIGHLIGHT_OPTIONS = ModelDecorationOptions.register({\n  description: 'selection-highlight-overview',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'selectionHighlight',\n  overviewRuler: {\n    color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n    position: OverviewRulerLane.Center\n  },\n  minimap: {\n    color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n    position: 1 /* MinimapPosition.Inline */\n  }\n});\nconst _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW = ModelDecorationOptions.register({\n  description: 'selection-highlight',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'selectionHighlight'\n});\nconst _REGULAR_OPTIONS = ModelDecorationOptions.register({\n  description: 'word-highlight',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'wordHighlight',\n  overviewRuler: {\n    color: themeColorFromId(overviewRulerWordHighlightForeground),\n    position: OverviewRulerLane.Center\n  },\n  minimap: {\n    color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n    position: 1 /* MinimapPosition.Inline */\n  }\n});\nexport function getHighlightDecorationOptions(kind) {\n  if (kind === DocumentHighlightKind.Write) {\n    return _WRITE_OPTIONS;\n  } else if (kind === DocumentHighlightKind.Text) {\n    return _TEXT_OPTIONS;\n  } else {\n    return _REGULAR_OPTIONS;\n  }\n}\nexport function getSelectionHighlightDecorationOptions(hasSemanticHighlights) {\n  // Show in overviewRuler only if model has no semantic highlighting\n  return hasSemanticHighlights ? _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW : _SELECTION_HIGHLIGHT_OPTIONS;\n}\nregisterThemingParticipant((theme, collector) => {\n  const selectionHighlight = theme.getColor(editorSelectionHighlight);\n  if (selectionHighlight) {\n    collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\n// import { HoverParticipantRegistry } from 'vs/editor/contrib/hover/browser/hoverTypes';\nimport { AcceptInlineEdit, JumpBackInlineEdit, JumpToInlineEdit, RejectInlineEdit, TriggerInlineEdit } from './commands.js';\n// import { InlineEditHoverParticipant } from 'vs/editor/contrib/inlineEdit/browser/hoverParticipant';\nimport { InlineEditController } from './inlineEditController.js';\nregisterEditorAction(AcceptInlineEdit);\nregisterEditorAction(RejectInlineEdit);\nregisterEditorAction(JumpToInlineEdit);\nregisterEditorAction(JumpBackInlineEdit);\nregisterEditorAction(TriggerInlineEdit);\nregisterEditorContribution(InlineEditController.ID, InlineEditController, 3 /* EditorContributionInstantiation.Eventually */);\n// HoverParticipantRegistry.register(InlineEditHoverParticipant);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { inlineEditAcceptId, inlineEditJumpBackId, inlineEditJumpToId, inlineEditRejectId } from './commandIds.js';\nimport { InlineEditController } from './inlineEditController.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class AcceptInlineEdit extends EditorAction {\n  constructor() {\n    super({\n      id: inlineEditAcceptId,\n      label: 'Accept Inline Edit',\n      alias: 'Accept Inline Edit',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext),\n      kbOpts: [{\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n        primary: 2 /* KeyCode.Tab */,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext, InlineEditController.cursorAtInlineEditContext)\n      }],\n      menuOpts: [{\n        menuId: MenuId.InlineEditToolbar,\n        title: 'Accept',\n        group: 'primary',\n        order: 1\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditController.get(editor);\n    await controller?.accept();\n  }\n}\nexport class TriggerInlineEdit extends EditorAction {\n  constructor() {\n    const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, ContextKeyExpr.not(InlineEditController.inlineEditVisibleKey));\n    super({\n      id: 'editor.action.inlineEdit.trigger',\n      label: 'Trigger Inline Edit',\n      alias: 'Trigger Inline Edit',\n      precondition: activeExpr,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n        kbExpr: activeExpr\n      }\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditController.get(editor);\n    controller?.trigger();\n  }\n}\nexport class JumpToInlineEdit extends EditorAction {\n  constructor() {\n    const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext, ContextKeyExpr.not(InlineEditController.cursorAtInlineEditKey));\n    super({\n      id: inlineEditJumpToId,\n      label: 'Jump to Inline Edit',\n      alias: 'Jump to Inline Edit',\n      precondition: activeExpr,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n        kbExpr: activeExpr\n      },\n      menuOpts: [{\n        menuId: MenuId.InlineEditToolbar,\n        title: 'Jump To Edit',\n        group: 'primary',\n        order: 3,\n        when: activeExpr\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditController.get(editor);\n    controller?.jumpToCurrent();\n  }\n}\nexport class JumpBackInlineEdit extends EditorAction {\n  constructor() {\n    const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.cursorAtInlineEditContext);\n    super({\n      id: inlineEditJumpBackId,\n      label: 'Jump Back from Inline Edit',\n      alias: 'Jump Back from Inline Edit',\n      precondition: activeExpr,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 10,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n        kbExpr: activeExpr\n      },\n      menuOpts: [{\n        menuId: MenuId.InlineEditToolbar,\n        title: 'Jump Back',\n        group: 'primary',\n        order: 3,\n        when: activeExpr\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditController.get(editor);\n    controller?.jumpBack();\n  }\n}\nexport class RejectInlineEdit extends EditorAction {\n  constructor() {\n    const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext);\n    super({\n      id: inlineEditRejectId,\n      label: 'Reject Inline Edit',\n      alias: 'Reject Inline Edit',\n      precondition: activeExpr,\n      kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 9 /* KeyCode.Escape */,\n        kbExpr: activeExpr\n      },\n      menuOpts: [{\n        menuId: MenuId.InlineEditToolbar,\n        title: 'Reject',\n        group: 'secondary',\n        order: 2\n      }]\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditController.get(editor);\n    await controller?.clear();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineEditAcceptId = 'editor.action.inlineEdit.accept';\nexport const inlineEditRejectId = 'editor.action.inlineEdit.reject';\nexport const inlineEditJumpToId = 'editor.action.inlineEdit.jumpTo';\nexport const inlineEditJumpBackId = 'editor.action.inlineEdit.jumpBack';","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineEditController_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InlineEditTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { GhostText, GhostTextPart } from '../../inlineCompletions/browser/model/ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { InlineEditHintsWidget } from './inlineEditHintsWidget.js';\nimport { createStyleSheet2 } from '../../../../base/browser/dom.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { InlineEditSideBySideWidget } from './inlineEditSideBySideWidget.js';\nimport { IDiffProviderFactoryService } from '../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { IModelService } from '../../../common/services/model.js';\nlet InlineEditController = class InlineEditController extends Disposable {\n  static {\n    InlineEditController_1 = this;\n  }\n  static {\n    this.ID = 'editor.contrib.inlineEditController';\n  }\n  static {\n    this.inlineEditVisibleKey = 'inlineEditVisible';\n  }\n  static {\n    this.inlineEditVisibleContext = new RawContextKey(this.inlineEditVisibleKey, false);\n  }\n  static {\n    this.cursorAtInlineEditKey = 'cursorAtInlineEdit';\n  }\n  static {\n    this.cursorAtInlineEditContext = new RawContextKey(this.cursorAtInlineEditKey, false);\n  }\n  static get(editor) {\n    return editor.getContribution(InlineEditController_1.ID);\n  }\n  constructor(editor, instantiationService, contextKeyService, languageFeaturesService, _commandService, _configurationService, _diffProviderFactoryService, _modelService) {\n    super();\n    this.editor = editor;\n    this.instantiationService = instantiationService;\n    this.contextKeyService = contextKeyService;\n    this.languageFeaturesService = languageFeaturesService;\n    this._commandService = _commandService;\n    this._configurationService = _configurationService;\n    this._diffProviderFactoryService = _diffProviderFactoryService;\n    this._modelService = _modelService;\n    this._isVisibleContext = InlineEditController_1.inlineEditVisibleContext.bindTo(this.contextKeyService);\n    this._isCursorAtInlineEditContext = InlineEditController_1.cursorAtInlineEditContext.bindTo(this.contextKeyService);\n    this._currentEdit = observableValue(this, undefined);\n    this._currentWidget = derivedDisposable(this._currentEdit, reader => {\n      const edit = this._currentEdit.read(reader);\n      if (!edit) {\n        return undefined;\n      }\n      const line = edit.range.endLineNumber;\n      const column = edit.range.endColumn;\n      const textToDisplay = edit.text.endsWith('\\n') && !(edit.range.startLineNumber === edit.range.endLineNumber && edit.range.startColumn === edit.range.endColumn) ? edit.text.slice(0, -1) : edit.text;\n      const ghostText = new GhostText(line, [new GhostTextPart(column, textToDisplay, false)]);\n      //only show ghost text for single line edits\n      //unless it is a pure removal\n      //multi line edits are shown in the side by side widget\n      const isSingleLine = edit.range.startLineNumber === edit.range.endLineNumber && ghostText.parts.length === 1 && ghostText.parts[0].lines.length === 1;\n      const isPureRemoval = edit.text === '';\n      if (!isSingleLine && !isPureRemoval) {\n        return undefined;\n      }\n      const instance = this.instantiationService.createInstance(GhostTextWidget, this.editor, {\n        ghostText: constObservable(ghostText),\n        minReservedLineCount: constObservable(0),\n        targetTextModel: constObservable(this.editor.getModel() ?? undefined),\n        range: constObservable(edit.range)\n      });\n      return instance;\n    });\n    this._isAccepting = observableValue(this, false);\n    this._enabled = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).enabled);\n    this._fontFamily = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).fontFamily);\n    //Automatically request inline edit when the content was changed\n    //Cancel the previous request if there is one\n    //Remove the previous ghost text\n    const modelChangedSignal = observableSignalFromEvent('InlineEditController.modelContentChangedSignal', editor.onDidChangeModelContent);\n    this._register(autorun(reader => {\n      /** @description InlineEditController.modelContentChanged model */\n      if (!this._enabled.read(reader)) {\n        return;\n      }\n      modelChangedSignal.read(reader);\n      if (this._isAccepting.read(reader)) {\n        return;\n      }\n      this.getInlineEdit(editor, true);\n    }));\n    //Check if the cursor is at the ghost text\n    const cursorPosition = observableFromEvent(this, editor.onDidChangeCursorPosition, () => editor.getPosition());\n    this._register(autorun(reader => {\n      /** @description InlineEditController.cursorPositionChanged model */\n      if (!this._enabled.read(reader)) {\n        return;\n      }\n      const pos = cursorPosition.read(reader);\n      if (pos) {\n        this.checkCursorPosition(pos);\n      }\n    }));\n    //Perform stuff when the current edit has changed\n    this._register(autorun(reader => {\n      /** @description InlineEditController.update model */\n      const currentEdit = this._currentEdit.read(reader);\n      this._isCursorAtInlineEditContext.set(false);\n      if (!currentEdit) {\n        this._isVisibleContext.set(false);\n        return;\n      }\n      this._isVisibleContext.set(true);\n      const pos = editor.getPosition();\n      if (pos) {\n        this.checkCursorPosition(pos);\n      }\n    }));\n    //Clear suggestions on lost focus\n    const editorBlurSingal = observableSignalFromEvent('InlineEditController.editorBlurSignal', editor.onDidBlurEditorWidget);\n    this._register(autorun(async reader => {\n      /** @description InlineEditController.editorBlur */\n      if (!this._enabled.read(reader)) {\n        return;\n      }\n      editorBlurSingal.read(reader);\n      // This is a hidden setting very useful for debugging\n      if (this._configurationService.getValue('editor.experimentalInlineEdit.keepOnBlur') || editor.getOption(63 /* EditorOption.inlineEdit */).keepOnBlur) {\n        return;\n      }\n      this._currentRequestCts?.dispose(true);\n      this._currentRequestCts = undefined;\n      await this.clear(false);\n    }));\n    //Invoke provider on focus\n    const editorFocusSignal = observableSignalFromEvent('InlineEditController.editorFocusSignal', editor.onDidFocusEditorText);\n    this._register(autorun(reader => {\n      /** @description InlineEditController.editorFocus */\n      if (!this._enabled.read(reader)) {\n        return;\n      }\n      editorFocusSignal.read(reader);\n      this.getInlineEdit(editor, true);\n    }));\n    //handle changes of font setting\n    const styleElement = this._register(createStyleSheet2());\n    this._register(autorun(reader => {\n      const fontFamily = this._fontFamily.read(reader);\n      styleElement.setStyle(fontFamily === '' || fontFamily === 'default' ? `` : `\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ${fontFamily};\n}`);\n    }));\n    this._register(new InlineEditHintsWidget(this.editor, this._currentWidget, this.instantiationService));\n    this._register(new InlineEditSideBySideWidget(this.editor, this._currentEdit, this.instantiationService, this._diffProviderFactoryService, this._modelService));\n  }\n  checkCursorPosition(position) {\n    if (!this._currentEdit) {\n      this._isCursorAtInlineEditContext.set(false);\n      return;\n    }\n    const gt = this._currentEdit.get();\n    if (!gt) {\n      this._isCursorAtInlineEditContext.set(false);\n      return;\n    }\n    this._isCursorAtInlineEditContext.set(Range.containsPosition(gt.range, position));\n  }\n  validateInlineEdit(editor, edit) {\n    //Multiline inline replacing edit must replace whole lines\n    if (edit.text.includes('\\n') && edit.range.startLineNumber !== edit.range.endLineNumber && edit.range.startColumn !== edit.range.endColumn) {\n      const firstColumn = edit.range.startColumn;\n      if (firstColumn !== 1) {\n        return false;\n      }\n      const lastLine = edit.range.endLineNumber;\n      const lastColumn = edit.range.endColumn;\n      const lineLength = editor.getModel()?.getLineLength(lastLine) ?? 0;\n      if (lastColumn !== lineLength + 1) {\n        return false;\n      }\n    }\n    return true;\n  }\n  async fetchInlineEdit(editor, auto) {\n    if (this._currentRequestCts) {\n      this._currentRequestCts.dispose(true);\n    }\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const modelVersion = model.getVersionId();\n    const providers = this.languageFeaturesService.inlineEditProvider.all(model);\n    if (providers.length === 0) {\n      return;\n    }\n    const provider = providers[0];\n    this._currentRequestCts = new CancellationTokenSource();\n    const token = this._currentRequestCts.token;\n    const triggerKind = auto ? InlineEditTriggerKind.Automatic : InlineEditTriggerKind.Invoke;\n    const shouldDebounce = auto;\n    if (shouldDebounce) {\n      await wait(50, token);\n    }\n    if (token.isCancellationRequested || model.isDisposed() || model.getVersionId() !== modelVersion) {\n      return;\n    }\n    const edit = await provider.provideInlineEdit(model, {\n      triggerKind\n    }, token);\n    if (!edit) {\n      return;\n    }\n    if (token.isCancellationRequested || model.isDisposed() || model.getVersionId() !== modelVersion) {\n      return;\n    }\n    if (!this.validateInlineEdit(editor, edit)) {\n      return;\n    }\n    return edit;\n  }\n  async getInlineEdit(editor, auto) {\n    this._isCursorAtInlineEditContext.set(false);\n    await this.clear();\n    const edit = await this.fetchInlineEdit(editor, auto);\n    if (!edit) {\n      return;\n    }\n    this._currentEdit.set(edit, undefined);\n  }\n  async trigger() {\n    await this.getInlineEdit(this.editor, false);\n  }\n  async jumpBack() {\n    if (!this._jumpBackPosition) {\n      return;\n    }\n    this.editor.setPosition(this._jumpBackPosition);\n    //if position is outside viewports, scroll to it\n    this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition);\n  }\n  async accept() {\n    this._isAccepting.set(true, undefined);\n    const data = this._currentEdit.get();\n    if (!data) {\n      return;\n    }\n    //It should only happen in case of last line suggestion\n    let text = data.text;\n    if (data.text.startsWith('\\n')) {\n      text = data.text.substring(1);\n    }\n    this.editor.pushUndoStop();\n    this.editor.executeEdits('acceptCurrent', [EditOperation.replace(Range.lift(data.range), text)]);\n    if (data.accepted) {\n      await this._commandService.executeCommand(data.accepted.id, ...(data.accepted.arguments || [])).then(undefined, onUnexpectedExternalError);\n    }\n    this.freeEdit(data);\n    transaction(tx => {\n      this._currentEdit.set(undefined, tx);\n      this._isAccepting.set(false, tx);\n    });\n  }\n  jumpToCurrent() {\n    this._jumpBackPosition = this.editor.getSelection()?.getStartPosition();\n    const data = this._currentEdit.get();\n    if (!data) {\n      return;\n    }\n    const position = Position.lift({\n      lineNumber: data.range.startLineNumber,\n      column: data.range.startColumn\n    });\n    this.editor.setPosition(position);\n    //if position is outside viewports, scroll to it\n    this.editor.revealPositionInCenterIfOutsideViewport(position);\n  }\n  async clear(sendRejection = true) {\n    const edit = this._currentEdit.get();\n    if (edit && edit?.rejected && sendRejection) {\n      await this._commandService.executeCommand(edit.rejected.id, ...(edit.rejected.arguments || [])).then(undefined, onUnexpectedExternalError);\n    }\n    if (edit) {\n      this.freeEdit(edit);\n    }\n    this._currentEdit.set(undefined, undefined);\n  }\n  freeEdit(edit) {\n    const model = this.editor.getModel();\n    if (!model) {\n      return;\n    }\n    const providers = this.languageFeaturesService.inlineEditProvider.all(model);\n    if (providers.length === 0) {\n      return;\n    }\n    providers[0].freeInlineEdit(edit);\n  }\n};\nInlineEditController = InlineEditController_1 = __decorate([__param(1, IInstantiationService), __param(2, IContextKeyService), __param(3, ILanguageFeaturesService), __param(4, ICommandService), __param(5, IConfigurationService), __param(6, IDiffProviderFactoryService), __param(7, IModelService)], InlineEditController);\nexport { InlineEditController };\nfunction wait(ms, cancellationToken) {\n  return new Promise(resolve => {\n    let d = undefined;\n    const handle = setTimeout(() => {\n      if (d) {\n        d.dispose();\n      }\n      resolve();\n    }, ms);\n    if (cancellationToken) {\n      d = cancellationToken.onCancellationRequested(() => {\n        clearTimeout(handle);\n        if (d) {\n          d.dispose();\n        }\n        resolve();\n      });\n    }\n  });\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport './inlineEdit.css';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { ColumnRange, applyObservableDecorations } from '../../inlineCompletions/browser/utils.js';\nimport { diffDeleteDecoration, diffLineDeleteDecorationBackgroundWithIndicator } from '../../../browser/widget/diffEditor/registrations.contribution.js';\nexport const INLINE_EDIT_DESCRIPTION = 'inline-edit';\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n  constructor(editor, model, languageService) {\n    super();\n    this.editor = editor;\n    this.model = model;\n    this.languageService = languageService;\n    this.isDisposed = observableValue(this, false);\n    this.currentTextModel = observableFromEvent(this, this.editor.onDidChangeModel, () => /** @description editor.model */this.editor.getModel());\n    this.uiState = derived(this, reader => {\n      if (this.isDisposed.read(reader)) {\n        return undefined;\n      }\n      const textModel = this.currentTextModel.read(reader);\n      if (textModel !== this.model.targetTextModel.read(reader)) {\n        return undefined;\n      }\n      const ghostText = this.model.ghostText.read(reader);\n      if (!ghostText) {\n        return undefined;\n      }\n      let range = this.model.range?.read(reader);\n      //if range is empty, we want to remove it\n      if (range && range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn) {\n        range = undefined;\n      }\n      //check if both range and text are single line - in this case we want to do inline replacement\n      //rather than replacing whole lines\n      const isSingleLine = (range ? range.startLineNumber === range.endLineNumber : true) && ghostText.parts.length === 1 && ghostText.parts[0].lines.length === 1;\n      //check if we're just removing code\n      const isPureRemove = ghostText.parts.length === 1 && ghostText.parts[0].lines.every(l => l.length === 0);\n      const inlineTexts = [];\n      const additionalLines = [];\n      function addToAdditionalLines(lines, className) {\n        if (additionalLines.length > 0) {\n          const lastLine = additionalLines[additionalLines.length - 1];\n          if (className) {\n            lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n          }\n          lastLine.content += lines[0];\n          lines = lines.slice(1);\n        }\n        for (const line of lines) {\n          additionalLines.push({\n            content: line,\n            decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n          });\n        }\n      }\n      const textBufferLine = textModel.getLineContent(ghostText.lineNumber);\n      let hiddenTextStartColumn = undefined;\n      let lastIdx = 0;\n      if (!isPureRemove && (isSingleLine || !range)) {\n        for (const part of ghostText.parts) {\n          let lines = part.lines;\n          //If remove range is set, we want to push all new liens to virtual area\n          if (range && !isSingleLine) {\n            addToAdditionalLines(lines, INLINE_EDIT_DESCRIPTION);\n            lines = [];\n          }\n          if (hiddenTextStartColumn === undefined) {\n            inlineTexts.push({\n              column: part.column,\n              text: lines[0],\n              preview: part.preview\n            });\n            lines = lines.slice(1);\n          } else {\n            addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n          }\n          if (lines.length > 0) {\n            addToAdditionalLines(lines, INLINE_EDIT_DESCRIPTION);\n            if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n              hiddenTextStartColumn = part.column;\n            }\n          }\n          lastIdx = part.column - 1;\n        }\n        if (hiddenTextStartColumn !== undefined) {\n          addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n        }\n      }\n      const hiddenRange = hiddenTextStartColumn !== undefined ? new ColumnRange(hiddenTextStartColumn, textBufferLine.length + 1) : undefined;\n      const lineNumber = isSingleLine || !range ? ghostText.lineNumber : range.endLineNumber - 1;\n      return {\n        inlineTexts,\n        additionalLines,\n        hiddenRange,\n        lineNumber,\n        additionalReservedLineCount: this.model.minReservedLineCount.read(reader),\n        targetTextModel: textModel,\n        range,\n        isSingleLine,\n        isPureRemove\n      };\n    });\n    this.decorations = derived(this, reader => {\n      const uiState = this.uiState.read(reader);\n      if (!uiState) {\n        return [];\n      }\n      const decorations = [];\n      if (uiState.hiddenRange) {\n        decorations.push({\n          range: uiState.hiddenRange.toRange(uiState.lineNumber),\n          options: {\n            inlineClassName: 'inline-edit-hidden',\n            description: 'inline-edit-hidden'\n          }\n        });\n      }\n      if (uiState.range) {\n        const ranges = [];\n        if (uiState.isSingleLine) {\n          ranges.push(uiState.range);\n        } else if (!uiState.isPureRemove) {\n          const lines = uiState.range.endLineNumber - uiState.range.startLineNumber;\n          for (let i = 0; i < lines; i++) {\n            const line = uiState.range.startLineNumber + i;\n            const firstNonWhitespace = uiState.targetTextModel.getLineFirstNonWhitespaceColumn(line);\n            const lastNonWhitespace = uiState.targetTextModel.getLineLastNonWhitespaceColumn(line);\n            const range = new Range(line, firstNonWhitespace, line, lastNonWhitespace);\n            ranges.push(range);\n          }\n        }\n        for (const range of ranges) {\n          decorations.push({\n            range,\n            options: diffDeleteDecoration\n          });\n        }\n      }\n      if (uiState.range && !uiState.isSingleLine && uiState.isPureRemove) {\n        const r = new Range(uiState.range.startLineNumber, 1, uiState.range.endLineNumber - 1, 1);\n        decorations.push({\n          range: r,\n          options: diffLineDeleteDecorationBackgroundWithIndicator\n        });\n      }\n      for (const p of uiState.inlineTexts) {\n        decorations.push({\n          range: Range.fromPositions(new Position(uiState.lineNumber, p.column)),\n          options: {\n            description: INLINE_EDIT_DESCRIPTION,\n            after: {\n              content: p.text,\n              inlineClassName: p.preview ? 'inline-edit-decoration-preview' : 'inline-edit-decoration',\n              cursorStops: InjectedTextCursorStops.Left\n            },\n            showIfCollapsed: true\n          }\n        });\n      }\n      return decorations;\n    });\n    this._register(toDisposable(() => {\n      this.isDisposed.set(true, undefined);\n    }));\n    this._register(applyObservableDecorations(this.editor, this.decorations));\n  }\n};\nGhostTextWidget = __decorate([__param(2, ILanguageService)], GhostTextWidget);\nexport { GhostTextWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineEditHintsContentWidget_1;\nimport { h } from '../../../../base/browser/dom.js';\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Separator } from '../../../../base/common/actions.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport './inlineEditHintsWidget.css';\nimport { Position } from '../../../common/core/position.js';\nimport { MenuEntryActionViewItem, createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nlet InlineEditHintsWidget = class InlineEditHintsWidget extends Disposable {\n  constructor(editor, model, instantiationService) {\n    super();\n    this.editor = editor;\n    this.model = model;\n    this.instantiationService = instantiationService;\n    this.alwaysShowToolbar = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).showToolbar === 'always');\n    this.sessionPosition = undefined;\n    this.position = derived(this, reader => {\n      const ghostText = this.model.read(reader)?.model.ghostText.read(reader);\n      if (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\n        this.sessionPosition = undefined;\n        return null;\n      }\n      const firstColumn = ghostText.parts[0].column;\n      if (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\n        this.sessionPosition = undefined;\n      }\n      const position = new Position(ghostText.lineNumber, Math.min(firstColumn, this.sessionPosition?.column ?? Number.MAX_SAFE_INTEGER));\n      this.sessionPosition = position;\n      return position;\n    });\n    this._register(autorunWithStore((reader, store) => {\n      /** @description setup content widget */\n      const model = this.model.read(reader);\n      if (!model || !this.alwaysShowToolbar.read(reader)) {\n        return;\n      }\n      const contentWidget = store.add(this.instantiationService.createInstance(InlineEditHintsContentWidget, this.editor, true, this.position));\n      editor.addContentWidget(contentWidget);\n      store.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\n    }));\n  }\n};\nInlineEditHintsWidget = __decorate([__param(2, IInstantiationService)], InlineEditHintsWidget);\nexport { InlineEditHintsWidget };\nlet InlineEditHintsContentWidget = /*#__PURE__*/(() => {\n  let InlineEditHintsContentWidget = class InlineEditHintsContentWidget extends Disposable {\n    static {\n      InlineEditHintsContentWidget_1 = this;\n    }\n    static {\n      this._dropDownVisible = false;\n    }\n    static {\n      this.id = 0;\n    }\n    constructor(editor, withBorder, _position, instantiationService, _contextKeyService, _menuService) {\n      super();\n      this.editor = editor;\n      this.withBorder = withBorder;\n      this._position = _position;\n      this._contextKeyService = _contextKeyService;\n      this._menuService = _menuService;\n      this.id = `InlineEditHintsContentWidget${InlineEditHintsContentWidget_1.id++}`;\n      this.allowEditorOverflow = true;\n      this.suppressMouseDown = false;\n      this.nodes = h('div.inlineEditHints', {\n        className: this.withBorder ? '.withBorder' : ''\n      }, [h('div@toolBar')]);\n      this.inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(MenuId.InlineEditActions, this._contextKeyService));\n      this.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, this.editor, MenuId.InlineEditToolbar, {\n        menuOptions: {\n          renderShortTitle: true\n        },\n        toolbarOptions: {\n          primaryGroup: g => g.startsWith('primary')\n        },\n        actionViewItemProvider: (action, options) => {\n          if (action instanceof MenuItemAction) {\n            return instantiationService.createInstance(StatusBarViewItem, action, undefined);\n          }\n          return undefined;\n        },\n        telemetrySource: 'InlineEditToolbar'\n      }));\n      this._register(this.toolBar.onDidChangeDropdownVisibility(e => {\n        InlineEditHintsContentWidget_1._dropDownVisible = e;\n      }));\n      this._register(autorun(reader => {\n        /** @description update position */\n        this._position.read(reader);\n        this.editor.layoutContentWidget(this);\n      }));\n      this._register(autorun(reader => {\n        /** @description actions menu */\n        const extraActions = [];\n        for (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\n          for (const action of group) {\n            if (action instanceof MenuItemAction) {\n              extraActions.push(action);\n            }\n          }\n        }\n        if (extraActions.length > 0) {\n          extraActions.unshift(new Separator());\n        }\n        this.toolBar.setAdditionalSecondaryActions(extraActions);\n      }));\n    }\n    getId() {\n      return this.id;\n    }\n    getDomNode() {\n      return this.nodes.root;\n    }\n    getPosition() {\n      return {\n        position: this._position.get(),\n        preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\n        positionAffinity: 3 /* PositionAffinity.LeftOfInjectedText */\n      };\n    }\n  };\n  return InlineEditHintsContentWidget;\n})();\nInlineEditHintsContentWidget = InlineEditHintsContentWidget_1 = __decorate([__param(3, IInstantiationService), __param(4, IContextKeyService), __param(5, IMenuService)], InlineEditHintsContentWidget);\nexport { InlineEditHintsContentWidget };\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n  updateLabel() {\n    const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n    if (!kb) {\n      return super.updateLabel();\n    }\n    if (this.label) {\n      const div = h('div.keybinding').root;\n      const k = this._register(new KeybindingLabel(div, OS, {\n        disableTitle: true,\n        ...unthemedKeybindingLabelOptions\n      }));\n      k.set(kb);\n      this.label.textContent = this._action.label;\n      this.label.appendChild(div);\n      this.label.classList.add('inlineEditStatusBarItemLabel');\n    }\n  }\n  updateTooltip() {\n    // NOOP, disable tooltip\n  }\n}\nlet CustomizedMenuWorkbenchToolBar = class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\n  constructor(container, editor, menuId, options2, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService) {\n    super(container, {\n      resetMenu: menuId,\n      ...options2\n    }, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService);\n    this.editor = editor;\n    this.menuId = menuId;\n    this.options2 = options2;\n    this.menuService = menuService;\n    this.contextKeyService = contextKeyService;\n    this.menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, {\n      emitEventsForSubmenuChanges: true\n    }));\n    this.additionalActions = [];\n    this.prependedPrimaryActions = [];\n    this._store.add(this.menu.onDidChange(() => this.updateToolbar()));\n    this._store.add(this.editor.onDidChangeCursorPosition(() => this.updateToolbar()));\n    this.updateToolbar();\n  }\n  updateToolbar() {\n    const primary = [];\n    const secondary = [];\n    createAndFillInActionBarActions(this.menu, this.options2?.menuOptions, {\n      primary,\n      secondary\n    }, this.options2?.toolbarOptions?.primaryGroup, this.options2?.toolbarOptions?.shouldInlineSubmenu, this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions);\n    secondary.push(...this.additionalActions);\n    primary.unshift(...this.prependedPrimaryActions);\n    this.setActions(primary, secondary);\n  }\n  setAdditionalSecondaryActions(actions) {\n    if (equals(this.additionalActions, actions, (a, b) => a === b)) {\n      return;\n    }\n    this.additionalActions = actions;\n    this.updateToolbar();\n  }\n};\nCustomizedMenuWorkbenchToolBar = __decorate([__param(4, IMenuService), __param(5, IContextKeyService), __param(6, IContextMenuService), __param(7, IKeybindingService), __param(8, ICommandService), __param(9, ITelemetryService)], CustomizedMenuWorkbenchToolBar);\nexport { CustomizedMenuWorkbenchToolBar };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineEditSideBySideWidget_1, InlineEditSideBySideContentWidget_1;\nimport { $ } from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ObservablePromise, autorun, autorunWithStore, derived, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './inlineEditSideBySideWidget.css';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IDiffProviderFactoryService } from '../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../../../browser/widget/diffEditor/registrations.contribution.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nfunction* range(start, end, step = 1) {\n  if (end === undefined) {\n    [end, start] = [start, 0];\n  }\n  for (let n = start; n < end; n += step) {\n    yield n;\n  }\n}\nfunction removeIndentation(lines) {\n  const indentation = lines[0].match(/^\\s*/)?.[0] ?? '';\n  const length = indentation.length;\n  return {\n    text: lines.map(l => l.replace(new RegExp('^' + indentation), '')),\n    shift: length\n  };\n}\nlet InlineEditSideBySideWidget = /*#__PURE__*/(() => {\n  let InlineEditSideBySideWidget = class InlineEditSideBySideWidget extends Disposable {\n    static {\n      InlineEditSideBySideWidget_1 = this;\n    }\n    static {\n      this._modelId = 0;\n    }\n    static _createUniqueUri() {\n      return URI.from({\n        scheme: 'inline-edit-widget',\n        path: new Date().toString() + String(InlineEditSideBySideWidget_1._modelId++)\n      });\n    }\n    constructor(_editor, _model, _instantiationService, _diffProviderFactoryService, _modelService) {\n      super();\n      this._editor = _editor;\n      this._model = _model;\n      this._instantiationService = _instantiationService;\n      this._diffProviderFactoryService = _diffProviderFactoryService;\n      this._modelService = _modelService;\n      this._position = derived(this, reader => {\n        const ghostText = this._model.read(reader);\n        if (!ghostText || ghostText.text.length === 0) {\n          return null;\n        }\n        if (ghostText.range.startLineNumber === ghostText.range.endLineNumber && !(ghostText.range.startColumn === ghostText.range.endColumn && ghostText.range.startColumn === 1)) {\n          //for inner-line suggestions we still want to use minimal ghost text\n          return null;\n        }\n        const editorModel = this._editor.getModel();\n        if (!editorModel) {\n          return null;\n        }\n        const lines = Array.from(range(ghostText.range.startLineNumber, ghostText.range.endLineNumber + 1));\n        const lengths = lines.map(lineNumber => editorModel.getLineLastNonWhitespaceColumn(lineNumber));\n        const maxColumn = Math.max(...lengths);\n        const lineOfMaxColumn = lines[lengths.indexOf(maxColumn)];\n        const position = new Position(lineOfMaxColumn, maxColumn);\n        const pos = {\n          top: ghostText.range.startLineNumber,\n          left: position\n        };\n        return pos;\n      });\n      this._text = derived(this, reader => {\n        const ghostText = this._model.read(reader);\n        if (!ghostText) {\n          return {\n            text: '',\n            shift: 0\n          };\n        }\n        const t = removeIndentation(ghostText.text.split('\\n'));\n        return {\n          text: t.text.join('\\n'),\n          shift: t.shift\n        };\n      });\n      this._originalModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditSideBySideWidget_1._createUniqueUri())).keepObserved(this._store);\n      this._modifiedModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditSideBySideWidget_1._createUniqueUri())).keepObserved(this._store);\n      this._diff = derived(this, reader => {\n        return this._diffPromise.read(reader)?.promiseResult.read(reader)?.data;\n      });\n      this._diffPromise = derived(this, reader => {\n        const ghostText = this._model.read(reader);\n        if (!ghostText) {\n          return;\n        }\n        const editorModel = this._editor.getModel();\n        if (!editorModel) {\n          return;\n        }\n        const originalText = removeIndentation(editorModel.getValueInRange(ghostText.range).split('\\n')).text.join('\\n');\n        const modifiedText = removeIndentation(ghostText.text.split('\\n')).text.join('\\n');\n        this._originalModel.get().setValue(originalText);\n        this._modifiedModel.get().setValue(modifiedText);\n        const d = this._diffProviderFactoryService.createDiffProvider({\n          diffAlgorithm: 'advanced'\n        });\n        return ObservablePromise.fromFn(async () => {\n          const result = await d.computeDiff(this._originalModel.get(), this._modifiedModel.get(), {\n            computeMoves: false,\n            ignoreTrimWhitespace: false,\n            maxComputationTimeMs: 1000\n          }, CancellationToken.None);\n          if (result.identical) {\n            return undefined;\n          }\n          return result.changes;\n        });\n      });\n      this._register(autorunWithStore((reader, store) => {\n        /** @description setup content widget */\n        const model = this._model.read(reader);\n        if (!model) {\n          return;\n        }\n        if (this._position.get() === null) {\n          return;\n        }\n        const contentWidget = store.add(this._instantiationService.createInstance(InlineEditSideBySideContentWidget, this._editor, this._position, this._text.map(t => t.text), this._text.map(t => t.shift), this._diff));\n        _editor.addOverlayWidget(contentWidget);\n        store.add(toDisposable(() => _editor.removeOverlayWidget(contentWidget)));\n      }));\n    }\n  };\n  return InlineEditSideBySideWidget;\n})();\nInlineEditSideBySideWidget = InlineEditSideBySideWidget_1 = __decorate([__param(2, IInstantiationService), __param(3, IDiffProviderFactoryService), __param(4, IModelService)], InlineEditSideBySideWidget);\nexport { InlineEditSideBySideWidget };\nlet InlineEditSideBySideContentWidget = /*#__PURE__*/(() => {\n  let InlineEditSideBySideContentWidget = class InlineEditSideBySideContentWidget extends Disposable {\n    static {\n      InlineEditSideBySideContentWidget_1 = this;\n    }\n    static {\n      this.id = 0;\n    }\n    constructor(_editor, _position, _text, _shift, _diff, _instantiationService) {\n      super();\n      this._editor = _editor;\n      this._position = _position;\n      this._text = _text;\n      this._shift = _shift;\n      this._diff = _diff;\n      this._instantiationService = _instantiationService;\n      this.id = `InlineEditSideBySideContentWidget${InlineEditSideBySideContentWidget_1.id++}`;\n      this.allowEditorOverflow = false;\n      this._nodes = $('div.inlineEditSideBySide', undefined);\n      this._scrollChanged = observableSignalFromEvent('editor.onDidScrollChange', this._editor.onDidScrollChange);\n      this._previewEditor = this._register(this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._nodes, {\n        glyphMargin: false,\n        lineNumbers: 'off',\n        minimap: {\n          enabled: false\n        },\n        guides: {\n          indentation: false,\n          bracketPairs: false,\n          bracketPairsHorizontal: false,\n          highlightActiveIndentation: false\n        },\n        folding: false,\n        selectOnLineNumbers: false,\n        selectionHighlight: false,\n        columnSelection: false,\n        overviewRulerBorder: false,\n        overviewRulerLanes: 0,\n        lineDecorationsWidth: 0,\n        lineNumbersMinChars: 0,\n        scrollbar: {\n          vertical: 'hidden',\n          horizontal: 'hidden',\n          alwaysConsumeMouseWheel: false,\n          handleMouseWheel: false\n        },\n        readOnly: true,\n        wordWrap: 'off',\n        wordWrapOverride1: 'off',\n        wordWrapOverride2: 'off',\n        wrappingIndent: 'none',\n        wrappingStrategy: undefined\n      }, {\n        contributions: [],\n        isSimpleWidget: true\n      }, this._editor));\n      this._previewEditorObs = observableCodeEditor(this._previewEditor);\n      this._editorObs = observableCodeEditor(this._editor);\n      this._previewTextModel = this._register(this._instantiationService.createInstance(TextModel, '', this._editor.getModel()?.getLanguageId() ?? PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null));\n      this._setText = derived(reader => {\n        const edit = this._text.read(reader);\n        if (!edit) {\n          return;\n        }\n        this._previewTextModel.setValue(edit);\n      }).recomputeInitiallyAndOnChange(this._store);\n      this._decorations = derived(this, reader => {\n        this._setText.read(reader);\n        const position = this._position.read(reader);\n        if (!position) {\n          return {\n            org: [],\n            mod: []\n          };\n        }\n        const diff = this._diff.read(reader);\n        if (!diff) {\n          return {\n            org: [],\n            mod: []\n          };\n        }\n        const originalDecorations = [];\n        const modifiedDecorations = [];\n        if (diff.length === 1 && diff[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange())) {\n          return {\n            org: [],\n            mod: []\n          };\n        }\n        const shift = this._shift.get();\n        const moveRange = range => {\n          return new Range(range.startLineNumber + position.top - 1, range.startColumn + shift, range.endLineNumber + position.top - 1, range.endColumn + shift);\n        };\n        for (const m of diff) {\n          if (!m.original.isEmpty) {\n            originalDecorations.push({\n              range: moveRange(m.original.toInclusiveRange()),\n              options: diffLineDeleteDecorationBackgroundWithIndicator\n            });\n          }\n          if (!m.modified.isEmpty) {\n            modifiedDecorations.push({\n              range: m.modified.toInclusiveRange(),\n              options: diffLineAddDecorationBackgroundWithIndicator\n            });\n          }\n          if (m.modified.isEmpty || m.original.isEmpty) {\n            if (!m.original.isEmpty) {\n              originalDecorations.push({\n                range: moveRange(m.original.toInclusiveRange()),\n                options: diffWholeLineDeleteDecoration\n              });\n            }\n            if (!m.modified.isEmpty) {\n              modifiedDecorations.push({\n                range: m.modified.toInclusiveRange(),\n                options: diffWholeLineAddDecoration\n              });\n            }\n          } else {\n            for (const i of m.innerChanges || []) {\n              // Don't show empty markers outside the line range\n              if (m.original.contains(i.originalRange.startLineNumber)) {\n                originalDecorations.push({\n                  range: moveRange(i.originalRange),\n                  options: i.originalRange.isEmpty() ? diffDeleteDecorationEmpty : diffDeleteDecoration\n                });\n              }\n              if (m.modified.contains(i.modifiedRange.startLineNumber)) {\n                modifiedDecorations.push({\n                  range: i.modifiedRange,\n                  options: i.modifiedRange.isEmpty() ? diffAddDecorationEmpty : diffAddDecoration\n                });\n              }\n            }\n          }\n        }\n        return {\n          org: originalDecorations,\n          mod: modifiedDecorations\n        };\n      });\n      this._originalDecorations = derived(this, reader => {\n        return this._decorations.read(reader).org;\n      });\n      this._modifiedDecorations = derived(this, reader => {\n        return this._decorations.read(reader).mod;\n      });\n      this._previewEditor.setModel(this._previewTextModel);\n      this._register(this._editorObs.setDecorations(this._originalDecorations));\n      this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations));\n      this._register(autorun(reader => {\n        const width = this._previewEditorObs.contentWidth.read(reader);\n        const lines = this._text.read(reader).split('\\n').length - 1;\n        const height = this._editor.getOption(67 /* EditorOption.lineHeight */) * lines;\n        if (width <= 0) {\n          return;\n        }\n        this._previewEditor.layout({\n          height: height,\n          width: width\n        });\n      }));\n      this._register(autorun(reader => {\n        /** @description update position */\n        this._position.read(reader);\n        this._editor.layoutOverlayWidget(this);\n      }));\n      this._register(autorun(reader => {\n        /** @description scroll change */\n        this._scrollChanged.read(reader);\n        const position = this._position.read(reader);\n        if (!position) {\n          return;\n        }\n        this._editor.layoutOverlayWidget(this);\n      }));\n    }\n    getId() {\n      return this.id;\n    }\n    getDomNode() {\n      return this._nodes;\n    }\n    getPosition() {\n      const position = this._position.get();\n      if (!position) {\n        return null;\n      }\n      const layoutInfo = this._editor.getLayoutInfo();\n      const visibPos = this._editor.getScrolledVisiblePosition(new Position(position.top, 1));\n      if (!visibPos) {\n        return null;\n      }\n      const top = visibPos.top - 1; //-1 to offset the border width\n      const offset = this._editor.getOffsetForColumn(position.left.lineNumber, position.left.column);\n      const left = layoutInfo.contentLeft + offset + 10;\n      return {\n        preference: {\n          left,\n          top\n        }\n      };\n    }\n  };\n  return InlineEditSideBySideContentWidget;\n})();\nInlineEditSideBySideContentWidget = InlineEditSideBySideContentWidget_1 = __decorate([__param(5, IInstantiationService)], InlineEditSideBySideContentWidget);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TriggerInlineEditAction, ShowNextInlineEditAction, ShowPreviousInlineEditAction, AcceptInlineEdit, HideInlineEdit } from './commands.js';\nimport { InlineEditsController } from './inlineEditsController.js';\nregisterEditorContribution(InlineEditsController.ID, InlineEditsController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(TriggerInlineEditAction);\nregisterEditorAction(ShowNextInlineEditAction);\nregisterEditorAction(ShowPreviousInlineEditAction);\nregisterEditorAction(AcceptInlineEdit);\nregisterEditorAction(HideInlineEdit);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { transaction } from '../../../../base/common/observable.js';\nimport { asyncTransaction } from '../../../../base/common/observableInternal/base.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { inlineEditAcceptId, inlineEditVisible, showNextInlineEditActionId, showPreviousInlineEditActionId } from './consts.js';\nimport { InlineEditsController } from './inlineEditsController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nfunction labelAndAlias(str) {\n  return {\n    label: str.value,\n    alias: str.original\n  };\n}\nexport let ShowNextInlineEditAction = /*#__PURE__*/(() => {\n  class ShowNextInlineEditAction extends EditorAction {\n    static {\n      this.ID = showNextInlineEditActionId;\n    }\n    constructor() {\n      super({\n        id: ShowNextInlineEditAction.ID,\n        ...labelAndAlias(nls.localize2('action.inlineEdits.showNext', \"Show Next Inline Edit\")),\n        precondition: ContextKeyExpr.and(EditorContextKeys.writable, inlineEditVisible),\n        kbOpts: {\n          weight: 100,\n          primary: 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineEditsController.get(editor);\n      controller?.model.get()?.next();\n    }\n  }\n  return ShowNextInlineEditAction;\n})();\nexport let ShowPreviousInlineEditAction = /*#__PURE__*/(() => {\n  class ShowPreviousInlineEditAction extends EditorAction {\n    static {\n      this.ID = showPreviousInlineEditActionId;\n    }\n    constructor() {\n      super({\n        id: ShowPreviousInlineEditAction.ID,\n        ...labelAndAlias(nls.localize2('action.inlineEdits.showPrevious', \"Show Previous Inline Edit\")),\n        precondition: ContextKeyExpr.and(EditorContextKeys.writable, inlineEditVisible),\n        kbOpts: {\n          weight: 100,\n          primary: 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineEditsController.get(editor);\n      controller?.model.get()?.previous();\n    }\n  }\n  return ShowPreviousInlineEditAction;\n})();\nexport class TriggerInlineEditAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inlineEdits.trigger',\n      ...labelAndAlias(nls.localize2('action.inlineEdits.trigger', \"Trigger Inline Edit\")),\n      precondition: EditorContextKeys.writable\n    });\n  }\n  async run(accessor, editor) {\n    const controller = InlineEditsController.get(editor);\n    await asyncTransaction(async tx => {\n      /** @description triggerExplicitly from command */\n      await controller?.model.get()?.triggerExplicitly(tx);\n    });\n  }\n}\nexport class AcceptInlineEdit extends EditorAction {\n  constructor() {\n    super({\n      id: inlineEditAcceptId,\n      ...labelAndAlias(nls.localize2('action.inlineEdits.accept', \"Accept Inline Edit\")),\n      precondition: inlineEditVisible,\n      menuOpts: {\n        menuId: MenuId.InlineEditsActions,\n        title: nls.localize('inlineEditsActions', \"Accept Inline Edit\"),\n        group: 'primary',\n        order: 1,\n        icon: Codicon.check\n      },\n      kbOpts: {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        weight: 20000,\n        kbExpr: inlineEditVisible\n      }\n    });\n  }\n  async run(accessor, editor) {\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n      editor = editor.getParentEditor();\n    }\n    const controller = InlineEditsController.get(editor);\n    if (controller) {\n      controller.model.get()?.accept(controller.editor);\n      controller.editor.focus();\n    }\n  }\n}\n/*\nTODO@hediet\nexport class PinInlineEdit extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineEdits.pin',\n            ...labelAndAlias(nls.localize2('action.inlineEdits.pin', \"Pin Inline Edit\")),\n            precondition: undefined,\n            kbOpts: {\n                primary: KeyMod.Shift | KeyCode.Space,\n                weight: 20000,\n            }\n        });\n    }\n\n    public async run(accessor: ServicesAccessor | undefined, editor: ICodeEditor): Promise<void> {\n        const controller = InlineEditsController.get(editor);\n        if (controller) {\n            controller.model.get()?.togglePin();\n        }\n    }\n}\n\nMenuRegistry.appendMenuItem(MenuId.InlineEditsActions, {\n    command: {\n        id: 'editor.action.inlineEdits.pin',\n        title: nls.localize('Pin', \"Pin\"),\n        icon: Codicon.pin,\n    },\n    group: 'primary',\n    order: 1,\n    when: isPinnedContextKey.negate(),\n});\n\nMenuRegistry.appendMenuItem(MenuId.InlineEditsActions, {\n    command: {\n        id: 'editor.action.inlineEdits.unpin',\n        title: nls.localize('Unpin', \"Unpin\"),\n        icon: Codicon.pinned,\n    },\n    group: 'primary',\n    order: 1,\n    when: isPinnedContextKey,\n});*/\nexport let HideInlineEdit = /*#__PURE__*/(() => {\n  class HideInlineEdit extends EditorAction {\n    static {\n      this.ID = 'editor.action.inlineEdits.hide';\n    }\n    constructor() {\n      super({\n        id: HideInlineEdit.ID,\n        ...labelAndAlias(nls.localize2('action.inlineEdits.hide', \"Hide Inline Edit\")),\n        precondition: inlineEditVisible,\n        kbOpts: {\n          weight: 100,\n          primary: 9 /* KeyCode.Escape */\n        }\n      });\n    }\n    async run(accessor, editor) {\n      const controller = InlineEditsController.get(editor);\n      transaction(tx => {\n        controller?.model.get()?.stop(tx);\n      });\n    }\n  }\n  return HideInlineEdit;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const inlineEditAcceptId = 'editor.action.inlineEdits.accept';\nexport const showPreviousInlineEditActionId = 'editor.action.inlineEdits.showPrevious';\nexport const showNextInlineEditActionId = 'editor.action.inlineEdits.showNext';\nexport const inlineEditVisible = new RawContextKey('inlineEditsVisible', false, localize('inlineEditsVisible', \"Whether an inline edit is visible\"));\nexport const isPinnedContextKey = new RawContextKey('inlineEditsIsPinned', false, localize('isPinned', \"Whether an inline edit is visible\"));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineEditsController_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived, derivedObservableWithCache, observableValue } from '../../../../base/common/observable.js';\nimport { derivedDisposable, derivedWithSetter } from '../../../../base/common/observableInternal/derived.js';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\nimport { readHotReloadableExport } from '../../../../base/common/hotReloadHelpers.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { inlineEditVisible, isPinnedContextKey } from './consts.js';\nimport { InlineEditsModel } from './inlineEditsModel.js';\nimport { InlineEditsWidget } from './inlineEditsWidget.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { bindContextKey, observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nlet InlineEditsController = /*#__PURE__*/(() => {\n  let InlineEditsController = class InlineEditsController extends Disposable {\n    static {\n      InlineEditsController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.inlineEditsController';\n    }\n    static get(editor) {\n      return editor.getContribution(InlineEditsController_1.ID);\n    }\n    constructor(editor, _instantiationService, _contextKeyService, _debounceService, _languageFeaturesService, _configurationService) {\n      super();\n      this.editor = editor;\n      this._instantiationService = _instantiationService;\n      this._contextKeyService = _contextKeyService;\n      this._debounceService = _debounceService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._configurationService = _configurationService;\n      this._enabled = observableConfigValue('editor.inlineEdits.enabled', false, this._configurationService);\n      this._editorObs = observableCodeEditor(this.editor);\n      this._selection = derived(this, reader => this._editorObs.cursorSelection.read(reader) ?? new Selection(1, 1, 1, 1));\n      this._debounceValue = this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider, 'InlineEditsDebounce', {\n        min: 50,\n        max: 50\n      });\n      this.model = derivedDisposable(this, reader => {\n        if (!this._enabled.read(reader)) {\n          return undefined;\n        }\n        if (this._editorObs.isReadonly.read(reader)) {\n          return undefined;\n        }\n        const textModel = this._editorObs.model.read(reader);\n        if (!textModel) {\n          return undefined;\n        }\n        const model = this._instantiationService.createInstance(readHotReloadableExport(InlineEditsModel, reader), textModel, this._editorObs.versionId, this._selection, this._debounceValue);\n        return model;\n      });\n      this._hadInlineEdit = derivedObservableWithCache(this, (reader, lastValue) => lastValue || this.model.read(reader)?.inlineEdit.read(reader) !== undefined);\n      this._widget = derivedDisposable(this, reader => {\n        if (!this._hadInlineEdit.read(reader)) {\n          return undefined;\n        }\n        return this._instantiationService.createInstance(readHotReloadableExport(InlineEditsWidget, reader), this.editor, this.model.map((m, reader) => m?.inlineEdit.read(reader)), flattenSettableObservable(reader => this.model.read(reader)?.userPrompt ?? observableValue('empty', '')));\n      });\n      this._register(bindContextKey(inlineEditVisible, this._contextKeyService, r => !!this.model.read(r)?.inlineEdit.read(r)));\n      this._register(bindContextKey(isPinnedContextKey, this._contextKeyService, r => !!this.model.read(r)?.isPinned.read(r)));\n      this.model.recomputeInitiallyAndOnChange(this._store);\n      this._widget.recomputeInitiallyAndOnChange(this._store);\n    }\n  };\n  return InlineEditsController;\n})();\nInlineEditsController = InlineEditsController_1 = __decorate([__param(1, IInstantiationService), __param(2, IContextKeyService), __param(3, ILanguageFeatureDebounceService), __param(4, ILanguageFeaturesService), __param(5, IConfigurationService)], InlineEditsController);\nexport { InlineEditsController };\nfunction flattenSettableObservable(fn) {\n  return derivedWithSetter(undefined, reader => {\n    const obs = fn(reader);\n    return obs.read(reader);\n  }, (value, tx) => {\n    fn(undefined).set(value, tx);\n  });\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar InlineEditsModel_1;\nimport { timeout } from '../../../../base/common/async.js';\nimport { CancellationToken, cancelOnDispose } from '../../../../base/common/cancellation.js';\nimport { itemsEquals, structuralEquals } from '../../../../base/common/equals.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ObservablePromise, derived, derivedHandleChanges, derivedOpts, disposableObservableValue, observableSignal, observableValue, recomputeInitiallyAndOnChange, subtransaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IDiffProviderFactoryService } from '../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { provideInlineCompletions } from '../../inlineCompletions/browser/model/provideInlineCompletions.js';\nimport { InlineEdit } from './inlineEditsWidget.js';\nlet InlineEditsModel = /*#__PURE__*/(() => {\n  let InlineEditsModel = class InlineEditsModel extends Disposable {\n    static {\n      InlineEditsModel_1 = this;\n    }\n    static {\n      this._modelId = 0;\n    }\n    static _createUniqueUri() {\n      return URI.from({\n        scheme: 'inline-edits',\n        path: new Date().toString() + String(InlineEditsModel_1._modelId++)\n      });\n    }\n    constructor(textModel, _textModelVersionId, _selection, _debounceValue, languageFeaturesService, _diffProviderFactoryService, _modelService) {\n      super();\n      this.textModel = textModel;\n      this._textModelVersionId = _textModelVersionId;\n      this._selection = _selection;\n      this._debounceValue = _debounceValue;\n      this.languageFeaturesService = languageFeaturesService;\n      this._diffProviderFactoryService = _diffProviderFactoryService;\n      this._modelService = _modelService;\n      this._forceUpdateExplicitlySignal = observableSignal(this);\n      // We use a semantic id to keep the same inline completion selected even if the provider reorders the completions.\n      this._selectedInlineCompletionId = observableValue(this, undefined);\n      this._isActive = observableValue(this, false);\n      this._originalModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditsModel_1._createUniqueUri())).keepObserved(this._store);\n      this._modifiedModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditsModel_1._createUniqueUri())).keepObserved(this._store);\n      this._pinnedRange = new TrackedRange(this.textModel, this._textModelVersionId);\n      this.isPinned = this._pinnedRange.range.map(range => !!range);\n      this.userPrompt = observableValue(this, undefined);\n      this.inlineEdit = derived(this, reader => {\n        return this._inlineEdit.read(reader)?.promiseResult.read(reader)?.data;\n      });\n      this._inlineEdit = derived(this, reader => {\n        const edit = this.selectedInlineEdit.read(reader);\n        if (!edit) {\n          return undefined;\n        }\n        const range = edit.inlineCompletion.range;\n        if (edit.inlineCompletion.insertText.trim() === '') {\n          return undefined;\n        }\n        let newLines = edit.inlineCompletion.insertText.split(/\\r\\n|\\r|\\n/);\n        function removeIndentation(lines) {\n          const indentation = lines[0].match(/^\\s*/)?.[0] ?? '';\n          return lines.map(l => l.replace(new RegExp('^' + indentation), ''));\n        }\n        newLines = removeIndentation(newLines);\n        const existing = this.textModel.getValueInRange(range);\n        let existingLines = existing.split(/\\r\\n|\\r|\\n/);\n        existingLines = removeIndentation(existingLines);\n        this._originalModel.get().setValue(existingLines.join('\\n'));\n        this._modifiedModel.get().setValue(newLines.join('\\n'));\n        const d = this._diffProviderFactoryService.createDiffProvider({\n          diffAlgorithm: 'advanced'\n        });\n        return ObservablePromise.fromFn(async () => {\n          const result = await d.computeDiff(this._originalModel.get(), this._modifiedModel.get(), {\n            computeMoves: false,\n            ignoreTrimWhitespace: false,\n            maxComputationTimeMs: 1000\n          }, CancellationToken.None);\n          if (result.identical) {\n            return undefined;\n          }\n          return new InlineEdit(LineRange.fromRangeInclusive(range), removeIndentation(newLines), result.changes);\n        });\n      });\n      this._fetchStore = this._register(new DisposableStore());\n      this._inlineEditsFetchResult = disposableObservableValue(this, undefined);\n      this._inlineEdits = derivedOpts({\n        owner: this,\n        equalsFn: structuralEquals\n      }, reader => {\n        return this._inlineEditsFetchResult.read(reader)?.completions.map(c => new InlineEditData(c)) ?? [];\n      });\n      this._fetchInlineEditsPromise = derivedHandleChanges({\n        owner: this,\n        createEmptyChangeSummary: () => ({\n          inlineCompletionTriggerKind: InlineCompletionTriggerKind.Automatic\n        }),\n        handleChange: (ctx, changeSummary) => {\n          /** @description fetch inline completions */\n          if (ctx.didChange(this._forceUpdateExplicitlySignal)) {\n            changeSummary.inlineCompletionTriggerKind = InlineCompletionTriggerKind.Explicit;\n          }\n          return true;\n        }\n      }, async (reader, changeSummary) => {\n        this._fetchStore.clear();\n        this._forceUpdateExplicitlySignal.read(reader);\n        /*if (!this._isActive.read(reader)) {\n            return undefined;\n        }*/\n        this._textModelVersionId.read(reader);\n        function mapValue(value, fn) {\n          return fn(value);\n        }\n        const selection = this._pinnedRange.range.read(reader) ?? mapValue(this._selection.read(reader), v => v.isEmpty() ? undefined : v);\n        if (!selection) {\n          this._inlineEditsFetchResult.set(undefined, undefined);\n          this.userPrompt.set(undefined, undefined);\n          return undefined;\n        }\n        const context = {\n          triggerKind: changeSummary.inlineCompletionTriggerKind,\n          selectedSuggestionInfo: undefined,\n          userPrompt: this.userPrompt.read(reader)\n        };\n        const token = cancelOnDispose(this._fetchStore);\n        await timeout(200, token);\n        const result = await provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, selection, this.textModel, context, token);\n        if (token.isCancellationRequested) {\n          return;\n        }\n        this._inlineEditsFetchResult.set(result, undefined);\n      });\n      this._filteredInlineEditItems = derivedOpts({\n        owner: this,\n        equalsFn: itemsEquals()\n      }, reader => {\n        return this._inlineEdits.read(reader);\n      });\n      this.selectedInlineCompletionIndex = derived(this, reader => {\n        const selectedInlineCompletionId = this._selectedInlineCompletionId.read(reader);\n        const filteredCompletions = this._filteredInlineEditItems.read(reader);\n        const idx = this._selectedInlineCompletionId === undefined ? -1 : filteredCompletions.findIndex(v => v.semanticId === selectedInlineCompletionId);\n        if (idx === -1) {\n          // Reset the selection so that the selection does not jump back when it appears again\n          this._selectedInlineCompletionId.set(undefined, undefined);\n          return 0;\n        }\n        return idx;\n      });\n      this.selectedInlineEdit = derived(this, reader => {\n        const filteredCompletions = this._filteredInlineEditItems.read(reader);\n        const idx = this.selectedInlineCompletionIndex.read(reader);\n        return filteredCompletions[idx];\n      });\n      this._register(recomputeInitiallyAndOnChange(this._fetchInlineEditsPromise));\n    }\n    async triggerExplicitly(tx) {\n      subtransaction(tx, tx => {\n        this._isActive.set(true, tx);\n        this._forceUpdateExplicitlySignal.trigger(tx);\n      });\n      await this._fetchInlineEditsPromise.get();\n    }\n    stop(tx) {\n      subtransaction(tx, tx => {\n        this.userPrompt.set(undefined, tx);\n        this._isActive.set(false, tx);\n        this._inlineEditsFetchResult.set(undefined, tx);\n        this._pinnedRange.setRange(undefined, tx);\n        //this._source.clear(tx);\n      });\n    }\n    async _deltaSelectedInlineCompletionIndex(delta) {\n      await this.triggerExplicitly();\n      const completions = this._filteredInlineEditItems.get() || [];\n      if (completions.length > 0) {\n        const newIdx = (this.selectedInlineCompletionIndex.get() + delta + completions.length) % completions.length;\n        this._selectedInlineCompletionId.set(completions[newIdx].semanticId, undefined);\n      } else {\n        this._selectedInlineCompletionId.set(undefined, undefined);\n      }\n    }\n    async next() {\n      await this._deltaSelectedInlineCompletionIndex(1);\n    }\n    async previous() {\n      await this._deltaSelectedInlineCompletionIndex(-1);\n    }\n    async accept(editor) {\n      if (editor.getModel() !== this.textModel) {\n        throw new BugIndicatingError();\n      }\n      const edit = this.selectedInlineEdit.get();\n      if (!edit) {\n        return;\n      }\n      editor.pushUndoStop();\n      editor.executeEdits('inlineSuggestion.accept', [edit.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]);\n      this.stop();\n    }\n  };\n  return InlineEditsModel;\n})();\nInlineEditsModel = InlineEditsModel_1 = __decorate([__param(4, ILanguageFeaturesService), __param(5, IDiffProviderFactoryService), __param(6, IModelService)], InlineEditsModel);\nexport { InlineEditsModel };\nclass InlineEditData {\n  constructor(inlineCompletion) {\n    this.inlineCompletion = inlineCompletion;\n    this.semanticId = this.inlineCompletion.hash();\n  }\n}\nclass TrackedRange extends Disposable {\n  constructor(_textModel, _versionId) {\n    super();\n    this._textModel = _textModel;\n    this._versionId = _versionId;\n    this._decorations = observableValue(this, []);\n    this.range = derived(this, reader => {\n      this._versionId.read(reader);\n      const deco = this._decorations.read(reader)[0];\n      if (!deco) {\n        return null;\n      }\n      return this._textModel.getDecorationRange(deco) ?? null;\n    });\n    this._register(toDisposable(() => {\n      this._textModel.deltaDecorations(this._decorations.get(), []);\n    }));\n  }\n  setRange(range, tx) {\n    this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(), range ? [{\n      range,\n      options: {\n        description: 'trackedRange'\n      }\n    }] : []), tx);\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { h, svgElem } from '../../../../base/browser/dom.js';\nimport { DEFAULT_FONT_FAMILY } from '../../../../base/browser/fonts.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, derived } from '../../../../base/common/observable.js';\nimport { derivedWithSetter } from '../../../../base/common/observableInternal/derived.js';\nimport './inlineEditsWidget.css';\nimport { EditorExtensionsRegistry } from '../../../browser/editorExtensions.js';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../../../browser/widget/diffEditor/registrations.contribution.js';\nimport { appendRemoveOnDispose, applyStyle } from '../../../browser/widget/diffEditor/utils.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { ContextMenuController } from '../../contextmenu/browser/contextmenu.js';\nimport { PlaceholderTextContribution } from '../../placeholderText/browser/placeholderTextContribution.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport class InlineEdit {\n  constructor(range, newLines, changes) {\n    this.range = range;\n    this.newLines = newLines;\n    this.changes = changes;\n  }\n}\nlet InlineEditsWidget = class InlineEditsWidget extends Disposable {\n  constructor(_editor, _edit, _userPrompt, _instantiationService) {\n    super();\n    this._editor = _editor;\n    this._edit = _edit;\n    this._userPrompt = _userPrompt;\n    this._instantiationService = _instantiationService;\n    this._editorObs = observableCodeEditor(this._editor);\n    this._elements = h('div.inline-edits-widget', {\n      style: {\n        position: 'absolute',\n        overflow: 'visible',\n        top: '0px',\n        left: '0px'\n      }\n    }, [h('div@editorContainer', {\n      style: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        width: '500px',\n        height: '500px'\n      }\n    }, [h('div.toolbar@toolbar', {\n      style: {\n        position: 'absolute',\n        top: '-25px',\n        left: '0px'\n      }\n    }), h('div.promptEditor@promptEditor', {\n      style: {\n        position: 'absolute',\n        top: '-25px',\n        left: '80px',\n        width: '300px',\n        height: '22px'\n      }\n    }), h('div.preview@editor', {\n      style: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px'\n      }\n    })]), svgElem('svg', {\n      style: {\n        overflow: 'visible',\n        pointerEvents: 'none'\n      }\n    }, [svgElem('defs', [svgElem('linearGradient', {\n      id: 'Gradient2',\n      x1: '0',\n      y1: '0',\n      x2: '1',\n      y2: '0'\n    }, [\n    /*svgElem('stop', { offset: '0%', class: 'gradient-start', }),\n    svgElem('stop', { offset: '0%', class: 'gradient-start', }),\n    svgElem('stop', { offset: '20%', class: 'gradient-stop', }),*/\n    svgElem('stop', {\n      offset: '0%',\n      class: 'gradient-stop'\n    }), svgElem('stop', {\n      offset: '100%',\n      class: 'gradient-stop'\n    })])]), svgElem('path@path', {\n      d: '',\n      fill: 'url(#Gradient2)'\n    })])]);\n    this._previewTextModel = this._register(this._instantiationService.createInstance(TextModel, '', PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null));\n    this._setText = derived(reader => {\n      const edit = this._edit.read(reader);\n      if (!edit) {\n        return;\n      }\n      this._previewTextModel.setValue(edit.newLines.join('\\n'));\n    }).recomputeInitiallyAndOnChange(this._store);\n    this._promptTextModel = this._register(this._instantiationService.createInstance(TextModel, '', PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null));\n    this._promptEditor = this._register(this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._elements.promptEditor, {\n      glyphMargin: false,\n      lineNumbers: 'off',\n      minimap: {\n        enabled: false\n      },\n      guides: {\n        indentation: false,\n        bracketPairs: false,\n        bracketPairsHorizontal: false,\n        highlightActiveIndentation: false\n      },\n      folding: false,\n      selectOnLineNumbers: false,\n      selectionHighlight: false,\n      columnSelection: false,\n      overviewRulerBorder: false,\n      overviewRulerLanes: 0,\n      lineDecorationsWidth: 0,\n      lineNumbersMinChars: 0,\n      placeholder: 'Describe the change you want...',\n      fontFamily: DEFAULT_FONT_FAMILY\n    }, {\n      contributions: EditorExtensionsRegistry.getSomeEditorContributions([SuggestController.ID, PlaceholderTextContribution.ID, ContextMenuController.ID]),\n      isSimpleWidget: true\n    }, this._editor));\n    this._previewEditor = this._register(this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._elements.editor, {\n      glyphMargin: false,\n      lineNumbers: 'off',\n      minimap: {\n        enabled: false\n      },\n      guides: {\n        indentation: false,\n        bracketPairs: false,\n        bracketPairsHorizontal: false,\n        highlightActiveIndentation: false\n      },\n      folding: false,\n      selectOnLineNumbers: false,\n      selectionHighlight: false,\n      columnSelection: false,\n      overviewRulerBorder: false,\n      overviewRulerLanes: 0,\n      lineDecorationsWidth: 0,\n      lineNumbersMinChars: 0\n    }, {\n      contributions: []\n    }, this._editor));\n    this._previewEditorObs = observableCodeEditor(this._previewEditor);\n    this._decorations = derived(this, reader => {\n      this._setText.read(reader);\n      const diff = this._edit.read(reader)?.changes;\n      if (!diff) {\n        return [];\n      }\n      const originalDecorations = [];\n      const modifiedDecorations = [];\n      if (diff.length === 1 && diff[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange())) {\n        return [];\n      }\n      for (const m of diff) {\n        if (!m.original.isEmpty) {\n          originalDecorations.push({\n            range: m.original.toInclusiveRange(),\n            options: diffLineDeleteDecorationBackgroundWithIndicator\n          });\n        }\n        if (!m.modified.isEmpty) {\n          modifiedDecorations.push({\n            range: m.modified.toInclusiveRange(),\n            options: diffLineAddDecorationBackgroundWithIndicator\n          });\n        }\n        if (m.modified.isEmpty || m.original.isEmpty) {\n          if (!m.original.isEmpty) {\n            originalDecorations.push({\n              range: m.original.toInclusiveRange(),\n              options: diffWholeLineDeleteDecoration\n            });\n          }\n          if (!m.modified.isEmpty) {\n            modifiedDecorations.push({\n              range: m.modified.toInclusiveRange(),\n              options: diffWholeLineAddDecoration\n            });\n          }\n        } else {\n          for (const i of m.innerChanges || []) {\n            // Don't show empty markers outside the line range\n            if (m.original.contains(i.originalRange.startLineNumber)) {\n              originalDecorations.push({\n                range: i.originalRange,\n                options: i.originalRange.isEmpty() ? diffDeleteDecorationEmpty : diffDeleteDecoration\n              });\n            }\n            if (m.modified.contains(i.modifiedRange.startLineNumber)) {\n              modifiedDecorations.push({\n                range: i.modifiedRange,\n                options: i.modifiedRange.isEmpty() ? diffAddDecorationEmpty : diffAddDecoration\n              });\n            }\n          }\n        }\n      }\n      return modifiedDecorations;\n    });\n    this._layout1 = derived(this, reader => {\n      const model = this._editor.getModel();\n      const inlineEdit = this._edit.read(reader);\n      if (!inlineEdit) {\n        return null;\n      }\n      const range = inlineEdit.range;\n      let maxLeft = 0;\n      for (let i = range.startLineNumber; i < range.endLineNumberExclusive; i++) {\n        const column = model.getLineMaxColumn(i);\n        const left = this._editor.getOffsetForColumn(i, column);\n        maxLeft = Math.max(maxLeft, left);\n      }\n      const layoutInfo = this._editor.getLayoutInfo();\n      const contentLeft = layoutInfo.contentLeft;\n      return {\n        left: contentLeft + maxLeft\n      };\n    });\n    this._layout = derived(this, reader => {\n      const inlineEdit = this._edit.read(reader);\n      if (!inlineEdit) {\n        return null;\n      }\n      const range = inlineEdit.range;\n      const scrollLeft = this._editorObs.scrollLeft.read(reader);\n      const left = this._layout1.read(reader).left + 20 - scrollLeft;\n      const selectionTop = this._editor.getTopForLineNumber(range.startLineNumber) - this._editorObs.scrollTop.read(reader);\n      const selectionBottom = this._editor.getTopForLineNumber(range.endLineNumberExclusive) - this._editorObs.scrollTop.read(reader);\n      const topCode = new Point(left, selectionTop);\n      const bottomCode = new Point(left, selectionBottom);\n      const codeHeight = selectionBottom - selectionTop;\n      const codeEditDist = 50;\n      const editHeight = this._editor.getOption(67 /* EditorOption.lineHeight */) * inlineEdit.newLines.length;\n      const difference = codeHeight - editHeight;\n      const topEdit = new Point(left + codeEditDist, selectionTop + difference / 2);\n      const bottomEdit = new Point(left + codeEditDist, selectionBottom - difference / 2);\n      return {\n        topCode,\n        bottomCode,\n        codeHeight,\n        topEdit,\n        bottomEdit,\n        editHeight\n      };\n    });\n    const visible = derived(this, reader => this._edit.read(reader) !== undefined || this._userPrompt.read(reader) !== undefined);\n    this._register(applyStyle(this._elements.root, {\n      display: derived(this, reader => visible.read(reader) ? 'block' : 'none')\n    }));\n    this._register(appendRemoveOnDispose(this._editor.getDomNode(), this._elements.root));\n    this._register(observableCodeEditor(_editor).createOverlayWidget({\n      domNode: this._elements.root,\n      position: constObservable(null),\n      allowEditorOverflow: false,\n      minContentWidthInPx: derived(reader => {\n        const x = this._layout1.read(reader)?.left;\n        if (x === undefined) {\n          return 0;\n        }\n        const width = this._previewEditorObs.contentWidth.read(reader);\n        return x + width;\n      })\n    }));\n    this._previewEditor.setModel(this._previewTextModel);\n    this._register(this._previewEditorObs.setDecorations(this._decorations));\n    this._register(autorun(reader => {\n      const layoutInfo = this._layout.read(reader);\n      if (!layoutInfo) {\n        return;\n      }\n      const {\n        topCode,\n        bottomCode,\n        topEdit,\n        bottomEdit,\n        editHeight\n      } = layoutInfo;\n      const straightWidthCode = 10;\n      const straightWidthEdit = 0;\n      const bezierDist = 40;\n      const path = new PathBuilder().moveTo(topCode).lineTo(topCode.deltaX(straightWidthCode)).curveTo(topCode.deltaX(straightWidthCode + bezierDist), topEdit.deltaX(-bezierDist - straightWidthEdit), topEdit.deltaX(-straightWidthEdit)).lineTo(topEdit).lineTo(bottomEdit).lineTo(bottomEdit.deltaX(-straightWidthEdit)).curveTo(bottomEdit.deltaX(-bezierDist - straightWidthEdit), bottomCode.deltaX(straightWidthCode + bezierDist), bottomCode.deltaX(straightWidthCode)).lineTo(bottomCode).build();\n      this._elements.path.setAttribute('d', path);\n      this._elements.editorContainer.style.top = `${topEdit.y}px`;\n      this._elements.editorContainer.style.left = `${topEdit.x}px`;\n      this._elements.editorContainer.style.height = `${editHeight}px`;\n      const width = this._previewEditorObs.contentWidth.read(reader);\n      this._previewEditor.layout({\n        height: editHeight,\n        width\n      });\n    }));\n    this._promptEditor.setModel(this._promptTextModel);\n    this._promptEditor.layout();\n    this._register(createTwoWaySync(mapSettableObservable(this._userPrompt, v => v ?? '', v => v), observableCodeEditor(this._promptEditor).value));\n    this._register(autorun(reader => {\n      const isFocused = observableCodeEditor(this._promptEditor).isFocused.read(reader);\n      this._elements.root.classList.toggle('focused', isFocused);\n    }));\n  }\n};\nInlineEditsWidget = __decorate([__param(3, IInstantiationService)], InlineEditsWidget);\nexport { InlineEditsWidget };\nfunction mapSettableObservable(obs, fn1, fn2) {\n  return derivedWithSetter(undefined, reader => fn1(obs.read(reader)), (value, tx) => obs.set(fn2(value), tx));\n}\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  deltaX(delta) {\n    return new Point(this.x + delta, this.y);\n  }\n}\nclass PathBuilder {\n  constructor() {\n    this._data = '';\n  }\n  moveTo(point) {\n    this._data += `M ${point.x} ${point.y} `;\n    return this;\n  }\n  lineTo(point) {\n    this._data += `L ${point.x} ${point.y} `;\n    return this;\n  }\n  curveTo(cp1, cp2, to) {\n    this._data += `C ${cp1.x} ${cp1.y} ${cp2.x} ${cp2.y} ${to.x} ${to.y} `;\n    return this;\n  }\n  build() {\n    return this._data;\n  }\n}\nfunction createTwoWaySync(main, target) {\n  const store = new DisposableStore();\n  store.add(autorun(reader => {\n    const value = main.read(reader);\n    target.set(value, undefined);\n  }));\n  store.add(autorun(reader => {\n    const value = target.read(reader);\n    main.set(value, undefined);\n  }));\n  return store;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { structuralEquals } from '../../../../base/common/equals.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, derivedObservableWithCache, derivedOpts } from '../../../../base/common/observable.js';\nimport { derivedWithStore } from '../../../../base/common/observableInternal/derived.js';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\n/**\n * Use the editor option to set the placeholder text.\n*/\nexport let PlaceholderTextContribution = /*#__PURE__*/(() => {\n  class PlaceholderTextContribution extends Disposable {\n    static {\n      this.ID = 'editor.contrib.placeholderText';\n    }\n    constructor(_editor) {\n      super();\n      this._editor = _editor;\n      this._editorObs = observableCodeEditor(this._editor);\n      this._placeholderText = this._editorObs.getOption(88 /* EditorOption.placeholder */);\n      this._state = derivedOpts({\n        owner: this,\n        equalsFn: structuralEquals\n      }, reader => {\n        const p = this._placeholderText.read(reader);\n        if (!p) {\n          return undefined;\n        }\n        if (!this._editorObs.valueIsEmpty.read(reader)) {\n          return undefined;\n        }\n        return {\n          placeholder: p\n        };\n      });\n      this._shouldViewBeAlive = isOrWasTrue(this, reader => this._state.read(reader)?.placeholder !== undefined);\n      this._view = derivedWithStore((reader, store) => {\n        if (!this._shouldViewBeAlive.read(reader)) {\n          return;\n        }\n        const element = h('div.editorPlaceholder');\n        store.add(autorun(reader => {\n          const data = this._state.read(reader);\n          const shouldBeVisibile = data?.placeholder !== undefined;\n          element.root.style.display = shouldBeVisibile ? 'block' : 'none';\n          element.root.innerText = data?.placeholder ?? '';\n        }));\n        store.add(autorun(reader => {\n          const info = this._editorObs.layoutInfo.read(reader);\n          element.root.style.left = `${info.contentLeft}px`;\n          element.root.style.width = info.contentWidth - info.verticalScrollbarWidth + 'px';\n          element.root.style.top = `${this._editor.getTopForLineNumber(0)}px`;\n        }));\n        store.add(autorun(reader => {\n          element.root.style.fontFamily = this._editorObs.getOption(49 /* EditorOption.fontFamily */).read(reader);\n          element.root.style.fontSize = this._editorObs.getOption(52 /* EditorOption.fontSize */).read(reader) + 'px';\n          element.root.style.lineHeight = this._editorObs.getOption(67 /* EditorOption.lineHeight */).read(reader) + 'px';\n        }));\n        store.add(this._editorObs.createOverlayWidget({\n          allowEditorOverflow: false,\n          minContentWidthInPx: constObservable(0),\n          position: constObservable(null),\n          domNode: element.root\n        }));\n      });\n      this._view.recomputeInitiallyAndOnChange(this._store);\n    }\n  }\n  return PlaceholderTextContribution;\n})();\nfunction isOrWasTrue(owner, fn) {\n  return derivedObservableWithCache(owner, (reader, lastValue) => {\n    if (lastValue === true) {\n      return true;\n    }\n    return fn(reader);\n  });\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ParameterHintsController_1;\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = /*#__PURE__*/(() => {\n  let ParameterHintsController = class ParameterHintsController extends Disposable {\n    static {\n      ParameterHintsController_1 = this;\n    }\n    static {\n      this.ID = 'editor.controller.parameterHints';\n    }\n    static get(editor) {\n      return editor.getContribution(ParameterHintsController_1.ID);\n    }\n    constructor(editor, instantiationService, languageFeaturesService) {\n      super();\n      this.editor = editor;\n      this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n      this._register(this.model.onChangedHints(newParameterHints => {\n        if (newParameterHints) {\n          this.widget.value.show();\n          this.widget.value.render(newParameterHints);\n        } else {\n          this.widget.rawValue?.hide();\n        }\n      }));\n      this.widget = new Lazy(() => this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor, this.model)));\n    }\n    cancel() {\n      this.model.cancel();\n    }\n    previous() {\n      this.widget.rawValue?.previous();\n    }\n    next() {\n      this.widget.rawValue?.next();\n    }\n    trigger(context) {\n      this.model.trigger(context, 0);\n    }\n  };\n  return ParameterHintsController;\n})();\nParameterHintsController = ParameterHintsController_1 = __decorate([__param(1, IInstantiationService), __param(2, ILanguageFeaturesService)], ParameterHintsController);\nexport { ParameterHintsController };\nexport class TriggerParameterHintsAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.triggerParameterHints',\n      label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n      alias: 'Trigger Parameter Hints',\n      precondition: EditorContextKeys.hasSignatureHelpProvider,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    const controller = ParameterHintsController.get(editor);\n    controller?.trigger({\n      triggerKind: languages.SignatureHelpTriggerKind.Invoke\n    });\n  }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'closeParameterHints',\n  precondition: Context.Visible,\n  handler: x => x.cancel(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'showPrevParameterHint',\n  precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n  handler: x => x.previous(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 16 /* KeyCode.UpArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n    mac: {\n      primary: 16 /* KeyCode.UpArrow */,\n      secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */]\n    }\n  }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'showNextParameterHint',\n  precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n  handler: x => x.next(),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 18 /* KeyCode.DownArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n    mac: {\n      primary: 18 /* KeyCode.DownArrow */,\n      secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */]\n    }\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n  ParameterHintState.Default = {\n    type: 0 /* Type.Default */\n  };\n  class Pending {\n    constructor(request, previouslyActiveHints) {\n      this.request = request;\n      this.previouslyActiveHints = previouslyActiveHints;\n      this.type = 2 /* Type.Pending */;\n    }\n  }\n  ParameterHintState.Pending = Pending;\n  class Active {\n    constructor(hints) {\n      this.hints = hints;\n      this.type = 1 /* Type.Active */;\n    }\n  }\n  ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport let ParameterHintsModel = /*#__PURE__*/(() => {\n  class ParameterHintsModel extends Disposable {\n    static {\n      this.DEFAULT_DELAY = 120;\n    } // ms\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n      super();\n      this._onChangedHints = this._register(new Emitter());\n      this.onChangedHints = this._onChangedHints.event;\n      this.triggerOnType = false;\n      this._state = ParameterHintState.Default;\n      this._pendingTriggers = [];\n      this._lastSignatureHelpResult = this._register(new MutableDisposable());\n      this.triggerChars = new CharacterSet();\n      this.retriggerChars = new CharacterSet();\n      this.triggerId = 0;\n      this.editor = editor;\n      this.providers = providers;\n      this.throttledDelayer = new Delayer(delay);\n      this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n      this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n      this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n      this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n      this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n      this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n      this._register(this.providers.onDidChange(this.onModelChanged, this));\n      this._register(this.editor.onDidType(text => this.onDidType(text)));\n      this.onEditorConfigurationChange();\n      this.onModelChanged();\n    }\n    get state() {\n      return this._state;\n    }\n    set state(value) {\n      if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n        this._state.request.cancel();\n      }\n      this._state = value;\n    }\n    cancel(silent = false) {\n      this.state = ParameterHintState.Default;\n      this.throttledDelayer.cancel();\n      if (!silent) {\n        this._onChangedHints.fire(undefined);\n      }\n    }\n    trigger(context, delay) {\n      const model = this.editor.getModel();\n      if (!model || !this.providers.has(model)) {\n        return;\n      }\n      const triggerId = ++this.triggerId;\n      this._pendingTriggers.push(context);\n      this.throttledDelayer.trigger(() => {\n        return this.doTrigger(triggerId);\n      }, delay).catch(onUnexpectedError);\n    }\n    next() {\n      if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n        return;\n      }\n      const length = this.state.hints.signatures.length;\n      const activeSignature = this.state.hints.activeSignature;\n      const last = activeSignature % length === length - 1;\n      const cycle = this.editor.getOption(86 /* EditorOption.parameterHints */).cycle;\n      // If there is only one signature, or we're on last signature of list\n      if ((length < 2 || last) && !cycle) {\n        this.cancel();\n        return;\n      }\n      this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n      if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n        return;\n      }\n      const length = this.state.hints.signatures.length;\n      const activeSignature = this.state.hints.activeSignature;\n      const first = activeSignature === 0;\n      const cycle = this.editor.getOption(86 /* EditorOption.parameterHints */).cycle;\n      // If there is only one signature, or we're on first signature of list\n      if ((length < 2 || first) && !cycle) {\n        this.cancel();\n        return;\n      }\n      this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n      if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n        return;\n      }\n      this.state = new ParameterHintState.Active({\n        ...this.state.hints,\n        activeSignature\n      });\n      this._onChangedHints.fire(this.state.hints);\n    }\n    async doTrigger(triggerId) {\n      const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n      const activeSignatureHelp = this.getLastActiveHints();\n      this.cancel(true);\n      if (this._pendingTriggers.length === 0) {\n        return false;\n      }\n      const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n      this._pendingTriggers = [];\n      const triggerContext = {\n        triggerKind: context.triggerKind,\n        triggerCharacter: context.triggerCharacter,\n        isRetrigger: isRetrigger,\n        activeSignatureHelp: activeSignatureHelp\n      };\n      if (!this.editor.hasModel()) {\n        return false;\n      }\n      const model = this.editor.getModel();\n      const position = this.editor.getPosition();\n      this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n      try {\n        const result = await this.state.request;\n        // Check that we are still resolving the correct signature help\n        if (triggerId !== this.triggerId) {\n          result?.dispose();\n          return false;\n        }\n        if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n          result?.dispose();\n          this._lastSignatureHelpResult.clear();\n          this.cancel();\n          return false;\n        } else {\n          this.state = new ParameterHintState.Active(result.value);\n          this._lastSignatureHelpResult.value = result;\n          this._onChangedHints.fire(this.state.hints);\n          return true;\n        }\n      } catch (error) {\n        if (triggerId === this.triggerId) {\n          this.state = ParameterHintState.Default;\n        }\n        onUnexpectedError(error);\n        return false;\n      }\n    }\n    getLastActiveHints() {\n      switch (this.state.type) {\n        case 1 /* ParameterHintState.Type.Active */:\n          return this.state.hints;\n        case 2 /* ParameterHintState.Type.Pending */:\n          return this.state.previouslyActiveHints;\n        default:\n          return undefined;\n      }\n    }\n    get isTriggered() {\n      return this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */ || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n      this.cancel();\n      this.triggerChars.clear();\n      this.retriggerChars.clear();\n      const model = this.editor.getModel();\n      if (!model) {\n        return;\n      }\n      for (const support of this.providers.ordered(model)) {\n        for (const ch of support.signatureHelpTriggerCharacters || []) {\n          if (ch.length) {\n            const charCode = ch.charCodeAt(0);\n            this.triggerChars.add(charCode);\n            // All trigger characters are also considered retrigger characters\n            this.retriggerChars.add(charCode);\n          }\n        }\n        for (const ch of support.signatureHelpRetriggerCharacters || []) {\n          if (ch.length) {\n            this.retriggerChars.add(ch.charCodeAt(0));\n          }\n        }\n      }\n    }\n    onDidType(text) {\n      if (!this.triggerOnType) {\n        return;\n      }\n      const lastCharIndex = text.length - 1;\n      const triggerCharCode = text.charCodeAt(lastCharIndex);\n      if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n        this.trigger({\n          triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n          triggerCharacter: text.charAt(lastCharIndex)\n        });\n      }\n    }\n    onCursorChange(e) {\n      if (e.source === 'mouse') {\n        this.cancel();\n      } else if (this.isTriggered) {\n        this.trigger({\n          triggerKind: languages.SignatureHelpTriggerKind.ContentChange\n        });\n      }\n    }\n    onModelContentChange() {\n      if (this.isTriggered) {\n        this.trigger({\n          triggerKind: languages.SignatureHelpTriggerKind.ContentChange\n        });\n      }\n    }\n    onEditorConfigurationChange() {\n      this.triggerOnType = this.editor.getOption(86 /* EditorOption.parameterHints */).enabled;\n      if (!this.triggerOnType) {\n        this.cancel();\n      }\n    }\n    dispose() {\n      this.cancel(true);\n      super.dispose();\n    }\n  }\n  return ParameterHintsModel;\n})();\nfunction mergeTriggerContexts(previous, current) {\n  switch (current.triggerKind) {\n    case languages.SignatureHelpTriggerKind.Invoke:\n      // Invoke overrides previous triggers.\n      return current;\n    case languages.SignatureHelpTriggerKind.ContentChange:\n      // Ignore content changes triggers\n      return previous;\n    case languages.SignatureHelpTriggerKind.TriggerCharacter:\n    default:\n      return current;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n  Visible: new RawContextKey('parameterHintsVisible', false),\n  MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false)\n};\nexport async function provideSignatureHelp(registry, model, position, context, token) {\n  const supports = registry.ordered(model);\n  for (const support of supports) {\n    try {\n      const result = await support.provideSignatureHelp(model, position, token, context);\n      if (result) {\n        return result;\n      }\n    } catch (err) {\n      onUnexpectedExternalError(err);\n    }\n  }\n  return undefined;\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', async (accessor, ...args) => {\n  const [uri, position, triggerCharacter] = args;\n  assertType(URI.isUri(uri));\n  assertType(Position.isIPosition(position));\n  assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const ref = await accessor.get(ITextModelService).createModelReference(uri);\n  try {\n    const result = await provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n      triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n      isRetrigger: false,\n      triggerCharacter\n    }, CancellationToken.None);\n    if (!result) {\n      return undefined;\n    }\n    setTimeout(() => result.dispose(), 0);\n    return result.value;\n  } finally {\n    ref.dispose();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ParameterHintsWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { listHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = /*#__PURE__*/(() => {\n  let ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    static {\n      ParameterHintsWidget_1 = this;\n    }\n    static {\n      this.ID = 'editor.widget.parameterHintsWidget';\n    }\n    constructor(editor, model, contextKeyService, openerService, languageService, telemetryService) {\n      super();\n      this.editor = editor;\n      this.model = model;\n      this.telemetryService = telemetryService;\n      this.renderDisposeables = this._register(new DisposableStore());\n      this.visible = false;\n      this.announcedLabel = null;\n      // Editor.IContentWidget.allowEditorOverflow\n      this.allowEditorOverflow = true;\n      this.markdownRenderer = this._register(new MarkdownRenderer({\n        editor\n      }, languageService, openerService));\n      this.keyVisible = Context.Visible.bindTo(contextKeyService);\n      this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n    }\n    createParameterHintDOMNodes() {\n      const element = $('.editor-widget.parameter-hints-widget');\n      const wrapper = dom.append(element, $('.phwrapper'));\n      wrapper.tabIndex = -1;\n      const controls = dom.append(wrapper, $('.controls'));\n      const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n      const overloads = dom.append(controls, $('.overloads'));\n      const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n      this._register(dom.addDisposableListener(previous, 'click', e => {\n        dom.EventHelper.stop(e);\n        this.previous();\n      }));\n      this._register(dom.addDisposableListener(next, 'click', e => {\n        dom.EventHelper.stop(e);\n        this.next();\n      }));\n      const body = $('.body');\n      const scrollbar = new DomScrollableElement(body, {\n        alwaysConsumeMouseWheel: true\n      });\n      this._register(scrollbar);\n      wrapper.appendChild(scrollbar.getDomNode());\n      const signature = dom.append(body, $('.signature'));\n      const docs = dom.append(body, $('.docs'));\n      element.style.userSelect = 'text';\n      this.domNodes = {\n        element,\n        signature,\n        overloads,\n        docs,\n        scrollbar\n      };\n      this.editor.addContentWidget(this);\n      this.hide();\n      this._register(this.editor.onDidChangeCursorSelection(e => {\n        if (this.visible) {\n          this.editor.layoutContentWidget(this);\n        }\n      }));\n      const updateFont = () => {\n        if (!this.domNodes) {\n          return;\n        }\n        const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\n        const element = this.domNodes.element;\n        element.style.fontSize = `${fontInfo.fontSize}px`;\n        element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        element.style.setProperty('--vscode-parameterHintsWidget-editorFontFamily', fontInfo.fontFamily);\n        element.style.setProperty('--vscode-parameterHintsWidget-editorFontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n      };\n      updateFont();\n      this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor), $ => $.filter(e => e.hasChanged(50 /* EditorOption.fontInfo */)))(updateFont));\n      this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n      this.updateMaxHeight();\n    }\n    show() {\n      if (this.visible) {\n        return;\n      }\n      if (!this.domNodes) {\n        this.createParameterHintDOMNodes();\n      }\n      this.keyVisible.set(true);\n      this.visible = true;\n      setTimeout(() => {\n        this.domNodes?.element.classList.add('visible');\n      }, 100);\n      this.editor.layoutContentWidget(this);\n    }\n    hide() {\n      this.renderDisposeables.clear();\n      if (!this.visible) {\n        return;\n      }\n      this.keyVisible.reset();\n      this.visible = false;\n      this.announcedLabel = null;\n      this.domNodes?.element.classList.remove('visible');\n      this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n      if (this.visible) {\n        return {\n          position: this.editor.getPosition(),\n          preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n        };\n      }\n      return null;\n    }\n    render(hints) {\n      this.renderDisposeables.clear();\n      if (!this.domNodes) {\n        return;\n      }\n      const multiple = hints.signatures.length > 1;\n      this.domNodes.element.classList.toggle('multiple', multiple);\n      this.keyMultipleSignatures.set(multiple);\n      this.domNodes.signature.innerText = '';\n      this.domNodes.docs.innerText = '';\n      const signature = hints.signatures[hints.activeSignature];\n      if (!signature) {\n        return;\n      }\n      const code = dom.append(this.domNodes.signature, $('.code'));\n      const hasParameters = signature.parameters.length > 0;\n      const activeParameterIndex = signature.activeParameter ?? hints.activeParameter;\n      if (!hasParameters) {\n        const label = dom.append(code, $('span'));\n        label.textContent = signature.label;\n      } else {\n        this.renderParameters(code, signature, activeParameterIndex);\n      }\n      const activeParameter = signature.parameters[activeParameterIndex];\n      if (activeParameter?.documentation) {\n        const documentation = $('span.documentation');\n        if (typeof activeParameter.documentation === 'string') {\n          documentation.textContent = activeParameter.documentation;\n        } else {\n          const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n          documentation.appendChild(renderedContents.element);\n        }\n        dom.append(this.domNodes.docs, $('p', {}, documentation));\n      }\n      if (signature.documentation === undefined) {\n        /** no op */\n      } else if (typeof signature.documentation === 'string') {\n        dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n      } else {\n        const renderedContents = this.renderMarkdownDocs(signature.documentation);\n        dom.append(this.domNodes.docs, renderedContents.element);\n      }\n      const hasDocs = this.hasDocs(signature, activeParameter);\n      this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n      this.domNodes.docs.classList.toggle('empty', !hasDocs);\n      this.domNodes.overloads.textContent = String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n      if (activeParameter) {\n        let labelToAnnounce = '';\n        const param = signature.parameters[activeParameterIndex];\n        if (Array.isArray(param.label)) {\n          labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n        } else {\n          labelToAnnounce = param.label;\n        }\n        if (param.documentation) {\n          labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n        }\n        if (signature.documentation) {\n          labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n        }\n        // Select method gets called on every user type while parameter hints are visible.\n        // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n        if (this.announcedLabel !== labelToAnnounce) {\n          aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n          this.announcedLabel = labelToAnnounce;\n        }\n      }\n      this.editor.layoutContentWidget(this);\n      this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n      const stopWatch = new StopWatch();\n      const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n        asyncRenderCallback: () => {\n          this.domNodes?.scrollbar.scanDomNode();\n        }\n      }));\n      renderedContents.element.classList.add('markdown-docs');\n      const renderDuration = stopWatch.elapsed();\n      if (renderDuration > 300) {\n        this.telemetryService.publicLog2('parameterHints.parseMarkdown', {\n          renderDuration\n        });\n      }\n      return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n      if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n        return true;\n      }\n      if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n        return true;\n      }\n      if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n        return true;\n      }\n      if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n        return true;\n      }\n      return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n      const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n      const beforeSpan = document.createElement('span');\n      beforeSpan.textContent = signature.label.substring(0, start);\n      const paramSpan = document.createElement('span');\n      paramSpan.textContent = signature.label.substring(start, end);\n      paramSpan.className = 'parameter active';\n      const afterSpan = document.createElement('span');\n      afterSpan.textContent = signature.label.substring(end);\n      dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n      const param = signature.parameters[paramIdx];\n      if (!param) {\n        return [0, 0];\n      } else if (Array.isArray(param.label)) {\n        return param.label;\n      } else if (!param.label.length) {\n        return [0, 0];\n      } else {\n        const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n        regex.test(signature.label);\n        const idx = regex.lastIndex - param.label.length;\n        return idx >= 0 ? [idx, regex.lastIndex] : [0, 0];\n      }\n    }\n    next() {\n      this.editor.focus();\n      this.model.next();\n    }\n    previous() {\n      this.editor.focus();\n      this.model.previous();\n    }\n    getDomNode() {\n      if (!this.domNodes) {\n        this.createParameterHintDOMNodes();\n      }\n      return this.domNodes.element;\n    }\n    getId() {\n      return ParameterHintsWidget_1.ID;\n    }\n    updateMaxHeight() {\n      if (!this.domNodes) {\n        return;\n      }\n      const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n      const maxHeight = `${height}px`;\n      this.domNodes.element.style.maxHeight = maxHeight;\n      const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n      if (wrapper.length) {\n        wrapper[0].style.maxHeight = maxHeight;\n      }\n    }\n  };\n  return ParameterHintsWidget;\n})();\nParameterHintsWidget = ParameterHintsWidget_1 = __decorate([__param(2, IContextKeyService), __param(3, IOpenerService), __param(4, ILanguageService), __param(5, ITelemetryService)], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nregisterColor('editorHoverWidget.highlightForeground', listHighlightForeground, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './placeholderText.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ghostTextForeground } from '../../../common/core/editorColorRegistry.js';\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorUtils.js';\nimport { PlaceholderTextContribution } from './placeholderTextContribution.js';\nimport { wrapInReloadableClass1 } from '../../../../platform/observable/common/wrapInReloadableClass.js';\nregisterEditorContribution(PlaceholderTextContribution.ID, wrapInReloadableClass1(() => PlaceholderTextContribution), 0 /* EditorContributionInstantiation.Eager */);\nregisterColor('editor.placeholder.foreground', ghostTextForeground, localize('placeholderForeground', 'Foreground color of the placeholder text in the editor.'));","var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isHotReloadEnabled } from '../../../base/common/hotReload.js';\nimport { readHotReloadableExport } from '../../../base/common/hotReloadHelpers.js';\nimport { autorunWithStore } from '../../../base/common/observable.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nclass BaseClass {\n  constructor(instantiationService) {\n    this.instantiationService = instantiationService;\n  }\n  init(...params) {}\n}\nfunction createWrapper(getClass, B) {\n  return class ReloadableWrapper extends B {\n    constructor() {\n      super(...arguments);\n      this._autorun = undefined;\n    }\n    init(...params) {\n      this._autorun = autorunWithStore((reader, store) => {\n        const clazz = readHotReloadableExport(getClass(), reader);\n        store.add(this.instantiationService.createInstance(clazz, ...params));\n      });\n    }\n    dispose() {\n      this._autorun?.dispose();\n    }\n  };\n}\n/**\n * Wrap a class in a reloadable wrapper.\n * When the wrapper is created, the original class is created.\n * When the original class changes, the instance is re-created.\n*/\nexport function wrapInReloadableClass1(getClass) {\n  return !isHotReloadEnabled() ? getClass() : createWrapper(getClass, BaseClass1);\n}\nlet BaseClass1 = class BaseClass1 extends BaseClass {\n  constructor(param1, i) {\n    super(i);\n    this.init(param1);\n  }\n};\nBaseClass1 = __decorate([__param(1, IInstantiationService)], BaseClass1);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar RenameController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { CancellationError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameWidget } from './renameWidget.js';\nclass RenameSkeleton {\n  constructor(model, position, registry) {\n    this.model = model;\n    this.position = position;\n    this._providerRenameIdx = 0;\n    this._providers = registry.ordered(model);\n  }\n  hasProvider() {\n    return this._providers.length > 0;\n  }\n  async resolveRenameLocation(token) {\n    const rejects = [];\n    for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n      const provider = this._providers[this._providerRenameIdx];\n      if (!provider.resolveRenameLocation) {\n        break;\n      }\n      const res = await provider.resolveRenameLocation(this.model, this.position, token);\n      if (!res) {\n        continue;\n      }\n      if (res.rejectReason) {\n        rejects.push(res.rejectReason);\n        continue;\n      }\n      return res;\n    }\n    // we are here when no provider prepared a location which means we can\n    // just rely on the word under cursor and start with the first provider\n    this._providerRenameIdx = 0;\n    const word = this.model.getWordAtPosition(this.position);\n    if (!word) {\n      return {\n        range: Range.fromPositions(this.position),\n        text: '',\n        rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n      };\n    }\n    return {\n      range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n      text: word.word,\n      rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n    };\n  }\n  async provideRenameEdits(newName, token) {\n    return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n  }\n  async _provideRenameEdits(newName, i, rejects, token) {\n    const provider = this._providers[i];\n    if (!provider) {\n      return {\n        edits: [],\n        rejectReason: rejects.join('\\n')\n      };\n    }\n    const result = await provider.provideRenameEdits(this.model, this.position, newName, token);\n    if (!result) {\n      return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n    } else if (result.rejectReason) {\n      return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n    }\n    return result;\n  }\n}\nexport async function rename(registry, model, position, newName) {\n  const skeleton = new RenameSkeleton(model, position, registry);\n  const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n  if (loc?.rejectReason) {\n    return {\n      edits: [],\n      rejectReason: loc.rejectReason\n    };\n  }\n  return skeleton.provideRenameEdits(newName, CancellationToken.None);\n}\n// ---  register actions and commands\nlet RenameController = /*#__PURE__*/(() => {\n  let RenameController = class RenameController {\n    static {\n      RenameController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.renameController';\n    }\n    static get(editor) {\n      return editor.getContribution(RenameController_1.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService, _telemetryService) {\n      this.editor = editor;\n      this._instaService = _instaService;\n      this._notificationService = _notificationService;\n      this._bulkEditService = _bulkEditService;\n      this._progressService = _progressService;\n      this._logService = _logService;\n      this._configService = _configService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._telemetryService = _telemetryService;\n      this._disposableStore = new DisposableStore();\n      this._cts = new CancellationTokenSource();\n      this._renameWidget = this._disposableStore.add(this._instaService.createInstance(RenameWidget, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n      this._disposableStore.dispose();\n      this._cts.dispose(true);\n    }\n    async run() {\n      const trace = this._logService.trace.bind(this._logService, '[rename]');\n      // set up cancellation token to prevent reentrant rename, this\n      // is the parent to the resolve- and rename-tokens\n      this._cts.dispose(true);\n      this._cts = new CancellationTokenSource();\n      if (!this.editor.hasModel()) {\n        trace('editor has no model');\n        return undefined;\n      }\n      const position = this.editor.getPosition();\n      const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n      if (!skeleton.hasProvider()) {\n        trace('skeleton has no provider');\n        return undefined;\n      }\n      // part 1 - resolve rename location\n      const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\n      let loc;\n      try {\n        trace('resolving rename location');\n        const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n        this._progressService.showWhile(resolveLocationOperation, 250);\n        loc = await resolveLocationOperation;\n        trace('resolved rename location');\n      } catch (e) {\n        if (e instanceof CancellationError) {\n          trace('resolve rename location cancelled', JSON.stringify(e, null, '\\t'));\n        } else {\n          trace('resolve rename location failed', e instanceof Error ? e : JSON.stringify(e, null, '\\t'));\n          if (typeof e === 'string' || isMarkdownString(e)) {\n            MessageController.get(this.editor)?.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n          }\n        }\n        return undefined;\n      } finally {\n        cts1.dispose();\n      }\n      if (!loc) {\n        trace('returning early - no loc');\n        return undefined;\n      }\n      if (loc.rejectReason) {\n        trace(`returning early - rejected with reason: ${loc.rejectReason}`, loc.rejectReason);\n        MessageController.get(this.editor)?.showMessage(loc.rejectReason, position);\n        return undefined;\n      }\n      if (cts1.token.isCancellationRequested) {\n        trace('returning early - cts1 cancelled');\n        return undefined;\n      }\n      // part 2 - do rename at location\n      const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\n      const model = this.editor.getModel(); // @ulugbekna: assumes editor still has a model, otherwise, cts1 should've been cancelled\n      const newSymbolNamesProviders = this._languageFeaturesService.newSymbolNamesProvider.all(model);\n      const resolvedNewSymbolnamesProviders = await Promise.all(newSymbolNamesProviders.map(async p => [p, (await p.supportsAutomaticNewSymbolNamesTriggerKind) ?? false]));\n      const requestRenameSuggestions = (triggerKind, cts) => {\n        let providers = resolvedNewSymbolnamesProviders.slice();\n        if (triggerKind === NewSymbolNameTriggerKind.Automatic) {\n          providers = providers.filter(([_, supportsAutomatic]) => supportsAutomatic);\n        }\n        return providers.map(([p]) => p.provideNewSymbolNames(model, loc.range, triggerKind, cts));\n      };\n      trace('creating rename input field and awaiting its result');\n      const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n      const inputFieldResult = await this._renameWidget.getInput(loc.range, loc.text, supportPreview, newSymbolNamesProviders.length > 0 ? requestRenameSuggestions : undefined, cts2);\n      trace('received response from rename input field');\n      if (newSymbolNamesProviders.length > 0) {\n        // @ulugbekna: we're interested only in telemetry for rename suggestions currently\n        this._reportTelemetry(newSymbolNamesProviders.length, model.getLanguageId(), inputFieldResult);\n      }\n      // no result, only hint to focus the editor or not\n      if (typeof inputFieldResult === 'boolean') {\n        trace(`returning early - rename input field response - ${inputFieldResult}`);\n        if (inputFieldResult) {\n          this.editor.focus();\n        }\n        cts2.dispose();\n        return undefined;\n      }\n      this.editor.focus();\n      trace('requesting rename edits');\n      const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then(async renameResult => {\n        if (!renameResult) {\n          trace('returning early - no rename edits result');\n          return;\n        }\n        if (!this.editor.hasModel()) {\n          trace('returning early - no model after rename edits are provided');\n          return;\n        }\n        if (renameResult.rejectReason) {\n          trace(`returning early - rejected with reason: ${renameResult.rejectReason}`);\n          this._notificationService.info(renameResult.rejectReason);\n          return;\n        }\n        // collapse selection to active end\n        this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n        trace('applying edits');\n        this._bulkEditService.apply(renameResult, {\n          editor: this.editor,\n          showPreview: inputFieldResult.wantsPreview,\n          label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc?.text, inputFieldResult.newName),\n          code: 'undoredo.rename',\n          quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc?.text, inputFieldResult.newName),\n          respectAutoSaveConfig: true\n        }).then(result => {\n          trace('edits applied');\n          if (result.ariaSummary) {\n            alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n          }\n        }).catch(err => {\n          trace(`error when applying edits ${JSON.stringify(err, null, '\\t')}`);\n          this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n          this._logService.error(err);\n        });\n      }, err => {\n        trace('error when providing rename edits', JSON.stringify(err, null, '\\t'));\n        this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n        this._logService.error(err);\n      }).finally(() => {\n        cts2.dispose();\n      });\n      trace('returning rename operation');\n      this._progressService.showWhile(renameOperation, 250);\n      return renameOperation;\n    }\n    acceptRenameInput(wantsPreview) {\n      this._renameWidget.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n      this._renameWidget.cancelInput(true, 'cancelRenameInput command');\n    }\n    focusNextRenameSuggestion() {\n      this._renameWidget.focusNextRenameSuggestion();\n    }\n    focusPreviousRenameSuggestion() {\n      this._renameWidget.focusPreviousRenameSuggestion();\n    }\n    _reportTelemetry(nRenameSuggestionProviders, languageId, inputFieldResult) {\n      const value = typeof inputFieldResult === 'boolean' ? {\n        kind: 'cancelled',\n        languageId,\n        nRenameSuggestionProviders\n      } : {\n        kind: 'accepted',\n        languageId,\n        nRenameSuggestionProviders,\n        source: inputFieldResult.stats.source.k,\n        nRenameSuggestions: inputFieldResult.stats.nRenameSuggestions,\n        timeBeforeFirstInputFieldEdit: inputFieldResult.stats.timeBeforeFirstInputFieldEdit,\n        wantsPreview: inputFieldResult.wantsPreview,\n        nRenameSuggestionsInvocations: inputFieldResult.stats.nRenameSuggestionsInvocations,\n        hadAutomaticRenameSuggestionsInvocation: inputFieldResult.stats.hadAutomaticRenameSuggestionsInvocation\n      };\n      this._telemetryService.publicLog2('renameInvokedEvent', value);\n    }\n  };\n  return RenameController;\n})();\nRenameController = RenameController_1 = __decorate([__param(1, IInstantiationService), __param(2, INotificationService), __param(3, IBulkEditService), __param(4, IEditorProgressService), __param(5, ILogService), __param(6, ITextResourceConfigurationService), __param(7, ILanguageFeaturesService), __param(8, ITelemetryService)], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.rename',\n      label: nls.localize('rename.label', \"Rename Symbol\"),\n      alias: 'Rename Symbol',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 60 /* KeyCode.F2 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 1.1\n      }\n    });\n  }\n  runCommand(accessor, args) {\n    const editorService = accessor.get(ICodeEditorService);\n    const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n    if (URI.isUri(uri) && Position.isIPosition(pos)) {\n      return editorService.openCodeEditor({\n        resource: uri\n      }, editorService.getActiveCodeEditor()).then(editor => {\n        if (!editor) {\n          return;\n        }\n        editor.setPosition(pos);\n        editor.invokeWithinContext(accessor => {\n          this.reportTelemetry(accessor, editor);\n          return this.run(accessor, editor);\n        });\n      }, onUnexpectedError);\n    }\n    return super.runCommand(accessor, args);\n  }\n  run(accessor, editor) {\n    const logService = accessor.get(ILogService);\n    const controller = RenameController.get(editor);\n    if (controller) {\n      logService.trace('[RenameAction] got controller, running...');\n      return controller.run();\n    }\n    logService.trace('[RenameAction] returning early - controller missing');\n    return Promise.resolve();\n  }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n  id: 'acceptRenameInput',\n  precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n  handler: x => x.acceptRenameInput(false),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n    primary: 3 /* KeyCode.Enter */\n  }\n}));\nregisterEditorCommand(new RenameCommand({\n  id: 'acceptRenameInputWithPreview',\n  precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n  handler: x => x.acceptRenameInput(true),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n    primary: 2048 /* KeyMod.CtrlCmd */ + 3 /* KeyCode.Enter */\n  }\n}));\nregisterEditorCommand(new RenameCommand({\n  id: 'cancelRenameInput',\n  precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n  handler: x => x.cancelRenameInput(),\n  kbOpts: {\n    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n  }\n}));\nregisterAction2(class FocusNextRenameSuggestion extends Action2 {\n  constructor() {\n    super({\n      id: 'focusNextRenameSuggestion',\n      title: {\n        ...nls.localize2('focusNextRenameSuggestion', \"Focus Next Rename Suggestion\")\n      },\n      precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n      keybinding: [{\n        primary: 18 /* KeyCode.DownArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99\n      }]\n    });\n  }\n  run(accessor) {\n    const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!currentEditor) {\n      return;\n    }\n    const controller = RenameController.get(currentEditor);\n    if (!controller) {\n      return;\n    }\n    controller.focusNextRenameSuggestion();\n  }\n});\nregisterAction2(class FocusPreviousRenameSuggestion extends Action2 {\n  constructor() {\n    super({\n      id: 'focusPreviousRenameSuggestion',\n      title: {\n        ...nls.localize2('focusPreviousRenameSuggestion', \"Focus Previous Rename Suggestion\")\n      },\n      precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n      keybinding: [{\n        primary: 16 /* KeyCode.UpArrow */,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99\n      }]\n    });\n  }\n  run(accessor) {\n    const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!currentEditor) {\n      return;\n    }\n    const controller = RenameController.get(currentEditor);\n    if (!controller) {\n      return;\n    }\n    controller.focusPreviousRenameSuggestion();\n  }\n});\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n  const [newName] = args;\n  assertType(typeof newName === 'string');\n  const {\n    renameProvider\n  } = accessor.get(ILanguageFeaturesService);\n  return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', async function (accessor, model, position) {\n  const {\n    renameProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const skeleton = new RenameSkeleton(model, position, renameProvider);\n  const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n  if (loc?.rejectReason) {\n    throw new Error(loc.rejectReason);\n  }\n  return loc;\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n  id: 'editor',\n  properties: {\n    'editor.rename.enablePreview': {\n      scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n      description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n      default: true,\n      type: 'boolean'\n    }\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport * as domFontInfo from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag, NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, nls.localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, nls.localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n  constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n    this._editor = _editor;\n    this._acceptKeybindings = _acceptKeybindings;\n    this._themeService = _themeService;\n    this._keybindingService = _keybindingService;\n    this._logService = _logService;\n    // implement IContentWidget\n    this.allowEditorOverflow = true;\n    this._disposables = new DisposableStore();\n    this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._isEditingRenameCandidate = false;\n    this._nRenameSuggestionsInvocations = 0;\n    this._hadAutomaticRenameSuggestionsInvocation = false;\n    this._candidates = new Set();\n    this._beforeFirstInputFieldEditSW = new StopWatch();\n    this._inputWithButton = new InputWithButton();\n    this._disposables.add(this._inputWithButton);\n    this._editor.addContentWidget(this);\n    this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n        this._updateFont();\n      }\n    }));\n    this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._editor.removeContentWidget(this);\n  }\n  getId() {\n    return '__renameInputWidget';\n  }\n  getDomNode() {\n    if (!this._domNode) {\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'monaco-editor rename-box';\n      this._domNode.appendChild(this._inputWithButton.domNode);\n      this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n        fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n        onFocusChange: newSymbolName => {\n          this._inputWithButton.input.value = newSymbolName;\n          this._isEditingRenameCandidate = false; // @ulugbekna: reset\n        },\n        onSelectionChange: () => {\n          this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n          this.acceptInput(false); // we don't allow preview with mouse click for now\n        }\n      }));\n      this._disposables.add(this._inputWithButton.onDidInputChange(() => {\n        if (this._renameCandidateListView?.focusedCandidate !== undefined) {\n          this._isEditingRenameCandidate = true;\n        }\n        this._timeBeforeFirstInputFieldEdit ??= this._beforeFirstInputFieldEditSW.elapsed();\n        if (this._renameCandidateProvidersCts?.token.isCancellationRequested === false) {\n          this._renameCandidateProvidersCts.cancel();\n        }\n        this._renameCandidateListView?.clearFocus();\n      }));\n      this._label = document.createElement('div');\n      this._label.className = 'rename-label';\n      this._domNode.appendChild(this._label);\n      this._updateFont();\n      this._updateStyles(this._themeService.getColorTheme());\n    }\n    return this._domNode;\n  }\n  _updateStyles(theme) {\n    if (!this._domNode) {\n      return;\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    const widgetBorderColor = theme.getColor(widgetBorder);\n    this._domNode.style.backgroundColor = String(theme.getColor(editorWidgetBackground) ?? '');\n    this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n    this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n    this._domNode.style.color = String(theme.getColor(inputForeground) ?? '');\n    const border = theme.getColor(inputBorder);\n    this._inputWithButton.domNode.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n    this._inputWithButton.input.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n    this._inputWithButton.domNode.style.borderWidth = border ? '1px' : '0px';\n    this._inputWithButton.domNode.style.borderStyle = border ? 'solid' : 'none';\n    this._inputWithButton.domNode.style.borderColor = border?.toString() ?? 'none';\n  }\n  _updateFont() {\n    if (this._domNode === undefined) {\n      return;\n    }\n    assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n    this._editor.applyFontInfo(this._inputWithButton.input);\n    const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    this._label.style.fontSize = `${this._computeLabelFontSize(fontInfo.fontSize)}px`;\n  }\n  _computeLabelFontSize(editorFontSize) {\n    return editorFontSize * 0.8;\n  }\n  getPosition() {\n    if (!this._visible) {\n      return null;\n    }\n    if (!this._editor.hasModel() ||\n    // @ulugbekna: shouldn't happen\n    !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n    ) {\n      return null;\n    }\n    const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n    const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n    const cursorBoxTop = this._getTopForPosition();\n    this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n    this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n    const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n    const {\n      totalHeight: candidateViewHeight\n    } = RenameCandidateView.getLayoutInfo({\n      lineHeight\n    });\n    const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */ ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */] : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n    return {\n      position: this._position,\n      preference: positionPreference\n    };\n  }\n  beforeRender() {\n    const [accept, preview] = this._acceptKeybindings;\n    this._label.innerText = nls.localize({\n      key: 'label',\n      comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"']\n    }, \"{0} to Rename, {1} to Preview\", this._keybindingService.lookupKeybinding(accept)?.getLabel(), this._keybindingService.lookupKeybinding(preview)?.getLabel());\n    this._domNode.style.minWidth = `200px`; // to prevent from widening when candidates come in\n    return null;\n  }\n  afterRender(position) {\n    // FIXME@ulugbekna: commenting trace log out until we start unmounting the widget from editor properly - https://github.com/microsoft/vscode/issues/226975\n    // this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n    if (position === null) {\n      // cancel rename when input widget isn't rendered anymore\n      this.cancelInput(true, 'afterRender (because position is null)');\n      return;\n    }\n    if (!this._editor.hasModel() ||\n    // shouldn't happen\n    !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n    ) {\n      return;\n    }\n    assertType(this._renameCandidateListView);\n    assertType(this._nPxAvailableAbove !== undefined);\n    assertType(this._nPxAvailableBelow !== undefined);\n    const inputBoxHeight = dom.getTotalHeight(this._inputWithButton.domNode);\n    const labelHeight = dom.getTotalHeight(this._label);\n    let totalHeightAvailable;\n    if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n      totalHeightAvailable = this._nPxAvailableBelow;\n    } else {\n      totalHeightAvailable = this._nPxAvailableAbove;\n    }\n    this._renameCandidateListView.layout({\n      height: totalHeightAvailable - labelHeight - inputBoxHeight,\n      width: dom.getTotalWidth(this._inputWithButton.domNode)\n    });\n  }\n  acceptInput(wantsPreview) {\n    this._trace(`invoking acceptInput`);\n    this._currentAcceptInput?.(wantsPreview);\n  }\n  cancelInput(focusEditor, caller) {\n    // this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n    this._currentCancelInput?.(focusEditor);\n  }\n  focusNextRenameSuggestion() {\n    if (!this._renameCandidateListView?.focusNext()) {\n      this._inputWithButton.input.value = this._currentName;\n    }\n  }\n  focusPreviousRenameSuggestion() {\n    if (!this._renameCandidateListView?.focusPrevious()) {\n      this._inputWithButton.input.value = this._currentName;\n    }\n  }\n  /**\n   * @param requestRenameCandidates is `undefined` when there are no rename suggestion providers\n   */\n  getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n    const {\n      start: selectionStart,\n      end: selectionEnd\n    } = this._getSelection(where, currentName);\n    this._renameCts = cts;\n    const disposeOnDone = new DisposableStore();\n    this._nRenameSuggestionsInvocations = 0;\n    this._hadAutomaticRenameSuggestionsInvocation = false;\n    if (requestRenameCandidates === undefined) {\n      this._inputWithButton.button.style.display = 'none';\n    } else {\n      this._inputWithButton.button.style.display = 'flex';\n      this._requestRenameCandidatesOnce = requestRenameCandidates;\n      this._requestRenameCandidates(currentName, false);\n      disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, 'click', () => this._requestRenameCandidates(currentName, true)));\n      disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, dom.EventType.KEY_DOWN, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        if (keyEvent.equals(3 /* KeyCode.Enter */) || keyEvent.equals(10 /* KeyCode.Space */)) {\n          keyEvent.stopPropagation();\n          keyEvent.preventDefault();\n          this._requestRenameCandidates(currentName, true);\n        }\n      }));\n    }\n    this._isEditingRenameCandidate = false;\n    this._domNode.classList.toggle('preview', supportPreview);\n    this._position = new Position(where.startLineNumber, where.startColumn);\n    this._currentName = currentName;\n    this._inputWithButton.input.value = currentName;\n    this._inputWithButton.input.setAttribute('selectionStart', selectionStart.toString());\n    this._inputWithButton.input.setAttribute('selectionEnd', selectionEnd.toString());\n    this._inputWithButton.input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n    this._beforeFirstInputFieldEditSW.reset();\n    disposeOnDone.add(toDisposable(() => {\n      this._renameCts = undefined;\n      cts.dispose(true);\n    })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n    disposeOnDone.add(toDisposable(() => {\n      if (this._renameCandidateProvidersCts !== undefined) {\n        this._renameCandidateProvidersCts.dispose(true);\n        this._renameCandidateProvidersCts = undefined;\n      }\n    }));\n    disposeOnDone.add(toDisposable(() => this._candidates.clear()));\n    const inputResult = new DeferredPromise();\n    inputResult.p.finally(() => {\n      disposeOnDone.dispose();\n      this._hide();\n    });\n    this._currentCancelInput = focusEditor => {\n      this._trace('invoking _currentCancelInput');\n      this._currentAcceptInput = undefined;\n      this._currentCancelInput = undefined;\n      // fixme session cleanup\n      this._renameCandidateListView?.clearCandidates();\n      inputResult.complete(focusEditor);\n      return true;\n    };\n    this._currentAcceptInput = wantsPreview => {\n      this._trace('invoking _currentAcceptInput');\n      assertType(this._renameCandidateListView !== undefined);\n      const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n      let newName;\n      let source;\n      const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n      if (focusedCandidate !== undefined) {\n        this._trace('using new name from renameSuggestion');\n        newName = focusedCandidate;\n        source = {\n          k: 'renameSuggestion'\n        };\n      } else {\n        this._trace('using new name from inputField');\n        newName = this._inputWithButton.input.value;\n        source = this._isEditingRenameCandidate ? {\n          k: 'userEditedRenameSuggestion'\n        } : {\n          k: 'inputField'\n        };\n      }\n      if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n        this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n        return;\n      }\n      this._currentAcceptInput = undefined;\n      this._currentCancelInput = undefined;\n      this._renameCandidateListView.clearCandidates();\n      // fixme session cleanup\n      inputResult.complete({\n        newName,\n        wantsPreview: supportPreview && wantsPreview,\n        stats: {\n          source,\n          nRenameSuggestions,\n          timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n          nRenameSuggestionsInvocations: this._nRenameSuggestionsInvocations,\n          hadAutomaticRenameSuggestionsInvocation: this._hadAutomaticRenameSuggestionsInvocation\n        }\n      });\n    };\n    disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n    if (!_sticky) {\n      disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!this._domNode?.ownerDocument.hasFocus(), 'editor.onDidBlurEditorWidget')));\n    }\n    this._show();\n    return inputResult.p;\n  }\n  _requestRenameCandidates(currentName, isManuallyTriggered) {\n    if (this._requestRenameCandidatesOnce === undefined) {\n      return;\n    }\n    if (this._renameCandidateProvidersCts !== undefined) {\n      this._renameCandidateProvidersCts.dispose(true);\n    }\n    assertType(this._renameCts);\n    if (this._inputWithButton.buttonState !== 'stop') {\n      this._renameCandidateProvidersCts = new CancellationTokenSource();\n      const triggerKind = isManuallyTriggered ? NewSymbolNameTriggerKind.Invoke : NewSymbolNameTriggerKind.Automatic;\n      const candidates = this._requestRenameCandidatesOnce(triggerKind, this._renameCandidateProvidersCts.token);\n      if (candidates.length === 0) {\n        this._inputWithButton.setSparkleButton();\n        return;\n      }\n      if (!isManuallyTriggered) {\n        this._hadAutomaticRenameSuggestionsInvocation = true;\n      }\n      this._nRenameSuggestionsInvocations += 1;\n      this._inputWithButton.setStopButton();\n      this._updateRenameCandidates(candidates, currentName, this._renameCts.token);\n    }\n  }\n  /**\n   * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n   */\n  _getSelection(where, currentName) {\n    assertType(this._editor.hasModel());\n    const selection = this._editor.getSelection();\n    let start = 0;\n    let end = currentName.length;\n    if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n      start = Math.max(0, selection.startColumn - where.startColumn);\n      end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n    }\n    return {\n      start,\n      end\n    };\n  }\n  _show() {\n    this._trace('invoking _show');\n    this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n    this._visible = true;\n    this._visibleContextKey.set(true);\n    this._editor.layoutContentWidget(this);\n    // TODO@ulugbekna: could this be simply run in `afterRender`?\n    setTimeout(() => {\n      this._inputWithButton.input.focus();\n      this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute('selectionStart')), parseInt(this._inputWithButton.input.getAttribute('selectionEnd')));\n    }, 100);\n  }\n  async _updateRenameCandidates(candidates, currentName, token) {\n    const trace = (...args) => this._trace('_updateRenameCandidates', ...args);\n    trace('start');\n    const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n    this._inputWithButton.setSparkleButton();\n    if (namesListResults === undefined) {\n      trace('returning early - received updateRenameCandidates results - undefined');\n      return;\n    }\n    const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value) ? namesListResult.value : []);\n    trace(`received updateRenameCandidates results - total (unfiltered) ${newNames.length} candidates.`);\n    // deduplicate and filter out the current value\n    const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n    trace(`distinct candidates - ${distinctNames.length} candidates.`);\n    const validDistinctNames = distinctNames.filter(({\n      newSymbolName\n    }) => newSymbolName.trim().length > 0 && newSymbolName !== this._inputWithButton.input.value && newSymbolName !== currentName && !this._candidates.has(newSymbolName));\n    trace(`valid distinct candidates - ${newNames.length} candidates.`);\n    validDistinctNames.forEach(n => this._candidates.add(n.newSymbolName));\n    if (validDistinctNames.length < 1) {\n      trace('returning early - no valid distinct candidates');\n      return;\n    }\n    // show the candidates\n    trace('setting candidates');\n    this._renameCandidateListView.setCandidates(validDistinctNames);\n    // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n    trace('asking editor to re-layout');\n    this._editor.layoutContentWidget(this);\n  }\n  _hide() {\n    this._trace('invoked _hide');\n    this._visible = false;\n    this._visibleContextKey.reset();\n    this._editor.layoutContentWidget(this);\n  }\n  _getTopForPosition() {\n    const visibleRanges = this._editor.getVisibleRanges();\n    let firstLineInViewport;\n    if (visibleRanges.length > 0) {\n      firstLineInViewport = visibleRanges[0].startLineNumber;\n    } else {\n      this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n      firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n    }\n    return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n  }\n  _trace(...args) {\n    this._logService.trace('RenameWidget', ...args);\n  }\n};\nRenameWidget = __decorate([__param(2, IThemeService), __param(3, IKeybindingService), __param(4, IContextKeyService), __param(5, ILogService)], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n  // FIXME@ulugbekna: rewrite using event emitters\n  constructor(parent, opts) {\n    this._disposables = new DisposableStore();\n    this._availableHeight = 0;\n    this._minimumWidth = 0;\n    this._lineHeight = opts.fontInfo.lineHeight;\n    this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n    this._listContainer = document.createElement('div');\n    this._listContainer.className = 'rename-box rename-candidate-list-container';\n    parent.appendChild(this._listContainer);\n    this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n    this._listWidget.onDidChangeFocus(e => {\n      if (e.elements.length === 1) {\n        opts.onFocusChange(e.elements[0].newSymbolName);\n      }\n    }, this._disposables);\n    this._listWidget.onDidChangeSelection(e => {\n      if (e.elements.length === 1) {\n        opts.onSelectionChange();\n      }\n    }, this._disposables);\n    this._disposables.add(this._listWidget.onDidBlur(e => {\n      this._listWidget.setFocus([]);\n    }));\n    this._listWidget.style(getListStyles({\n      listInactiveFocusForeground: quickInputListFocusForeground,\n      listInactiveFocusBackground: quickInputListFocusBackground\n    }));\n  }\n  dispose() {\n    this._listWidget.dispose();\n    this._disposables.dispose();\n  }\n  // height - max height allowed by parent element\n  layout({\n    height,\n    width\n  }) {\n    this._availableHeight = height;\n    this._minimumWidth = width;\n  }\n  setCandidates(candidates) {\n    // insert candidates into list widget\n    this._listWidget.splice(0, 0, candidates);\n    // adjust list widget layout\n    const height = this._pickListHeight(this._listWidget.length);\n    const width = this._pickListWidth(candidates);\n    this._listWidget.layout(height, width);\n    // adjust list container layout\n    this._listContainer.style.height = `${height}px`;\n    this._listContainer.style.width = `${width}px`;\n    aria.status(nls.localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n  }\n  clearCandidates() {\n    this._listContainer.style.height = '0px';\n    this._listContainer.style.width = '0px';\n    this._listWidget.splice(0, this._listWidget.length, []);\n  }\n  get nCandidates() {\n    return this._listWidget.length;\n  }\n  get focusedCandidate() {\n    if (this._listWidget.length === 0) {\n      return;\n    }\n    const selectedElement = this._listWidget.getSelectedElements()[0];\n    if (selectedElement !== undefined) {\n      return selectedElement.newSymbolName;\n    }\n    const focusedElement = this._listWidget.getFocusedElements()[0];\n    if (focusedElement !== undefined) {\n      return focusedElement.newSymbolName;\n    }\n    return;\n  }\n  focusNext() {\n    if (this._listWidget.length === 0) {\n      return false;\n    }\n    const focusedIxs = this._listWidget.getFocus();\n    if (focusedIxs.length === 0) {\n      this._listWidget.focusFirst();\n      this._listWidget.reveal(0);\n      return true;\n    } else {\n      if (focusedIxs[0] === this._listWidget.length - 1) {\n        this._listWidget.setFocus([]);\n        this._listWidget.reveal(0); // @ulugbekna: without this, it seems like focused element is obstructed\n        return false;\n      } else {\n        this._listWidget.focusNext();\n        const focused = this._listWidget.getFocus()[0];\n        this._listWidget.reveal(focused);\n        return true;\n      }\n    }\n  }\n  /**\n   * @returns true if focus is moved to previous element\n   */\n  focusPrevious() {\n    if (this._listWidget.length === 0) {\n      return false;\n    }\n    const focusedIxs = this._listWidget.getFocus();\n    if (focusedIxs.length === 0) {\n      this._listWidget.focusLast();\n      const focused = this._listWidget.getFocus()[0];\n      this._listWidget.reveal(focused);\n      return true;\n    } else {\n      if (focusedIxs[0] === 0) {\n        this._listWidget.setFocus([]);\n        return false;\n      } else {\n        this._listWidget.focusPrevious();\n        const focused = this._listWidget.getFocus()[0];\n        this._listWidget.reveal(focused);\n        return true;\n      }\n    }\n  }\n  clearFocus() {\n    this._listWidget.setFocus([]);\n  }\n  get _candidateViewHeight() {\n    const {\n      totalHeight\n    } = RenameCandidateView.getLayoutInfo({\n      lineHeight: this._lineHeight\n    });\n    return totalHeight;\n  }\n  _pickListHeight(nCandidates) {\n    const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n    const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n    const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n    return height;\n  }\n  _pickListWidth(candidates) {\n    const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n    const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n    );\n    return width;\n  }\n  static _createListWidget(container, candidateViewHeight, fontInfo) {\n    const virtualDelegate = new class {\n      getTemplateId(element) {\n        return 'candidate';\n      }\n      getHeight(element) {\n        return candidateViewHeight;\n      }\n    }();\n    const renderer = new class {\n      constructor() {\n        this.templateId = 'candidate';\n      }\n      renderTemplate(container) {\n        return new RenameCandidateView(container, fontInfo);\n      }\n      renderElement(candidate, index, templateData) {\n        templateData.populate(candidate);\n      }\n      disposeTemplate(templateData) {\n        templateData.dispose();\n      }\n    }();\n    return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n      keyboardSupport: false,\n      // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n      mouseSupport: true,\n      multipleSelectionSupport: false\n    });\n  }\n}\nclass InputWithButton {\n  constructor() {\n    this._onDidInputChange = new Emitter();\n    this.onDidInputChange = this._onDidInputChange.event;\n    this._disposables = new DisposableStore();\n  }\n  get domNode() {\n    if (!this._domNode) {\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'rename-input-with-button';\n      this._domNode.style.display = 'flex';\n      this._domNode.style.flexDirection = 'row';\n      this._domNode.style.alignItems = 'center';\n      this._inputNode = document.createElement('input');\n      this._inputNode.className = 'rename-input';\n      this._inputNode.type = 'text';\n      this._inputNode.style.border = 'none';\n      this._inputNode.setAttribute('aria-label', nls.localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n      this._domNode.appendChild(this._inputNode);\n      this._buttonNode = document.createElement('div');\n      this._buttonNode.className = 'rename-suggestions-button';\n      this._buttonNode.setAttribute('tabindex', '0');\n      this._buttonGenHoverText = nls.localize('generateRenameSuggestionsButton', \"Generate new name suggestions\");\n      this._buttonCancelHoverText = nls.localize('cancelRenameSuggestionsButton', \"Cancel\");\n      this._buttonHover = getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('element'), this._buttonNode, this._buttonGenHoverText);\n      this._disposables.add(this._buttonHover);\n      this._domNode.appendChild(this._buttonNode);\n      // notify if selection changes to cancel request to rename-suggestion providers\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.INPUT, () => this._onDidInputChange.fire()));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.KEY_DOWN, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        if (keyEvent.keyCode === 15 /* KeyCode.LeftArrow */ || keyEvent.keyCode === 17 /* KeyCode.RightArrow */) {\n          this._onDidInputChange.fire();\n        }\n      }));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.CLICK, () => this._onDidInputChange.fire()));\n      // focus \"container\" border instead of input box\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.FOCUS, () => {\n        this.domNode.style.outlineWidth = '1px';\n        this.domNode.style.outlineStyle = 'solid';\n        this.domNode.style.outlineOffset = '-1px';\n        this.domNode.style.outlineColor = 'var(--vscode-focusBorder)';\n      }));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.BLUR, () => {\n        this.domNode.style.outline = 'none';\n      }));\n    }\n    return this._domNode;\n  }\n  get input() {\n    assertType(this._inputNode);\n    return this._inputNode;\n  }\n  get button() {\n    assertType(this._buttonNode);\n    return this._buttonNode;\n  }\n  get buttonState() {\n    return this._buttonState;\n  }\n  setSparkleButton() {\n    this._buttonState = 'sparkle';\n    this._sparkleIcon ??= renderIcon(Codicon.sparkle);\n    dom.clearNode(this.button);\n    this.button.appendChild(this._sparkleIcon);\n    this.button.setAttribute('aria-label', 'Generating new name suggestions');\n    this._buttonHover?.update(this._buttonGenHoverText);\n    this.input.focus();\n  }\n  setStopButton() {\n    this._buttonState = 'stop';\n    this._stopIcon ??= renderIcon(Codicon.primitiveSquare);\n    dom.clearNode(this.button);\n    this.button.appendChild(this._stopIcon);\n    this.button.setAttribute('aria-label', 'Cancel generating new name suggestions');\n    this._buttonHover?.update(this._buttonCancelHoverText);\n    this.input.focus();\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n}\nlet RenameCandidateView = /*#__PURE__*/(() => {\n  class RenameCandidateView {\n    static {\n      this._PADDING = 2;\n    }\n    constructor(parent, fontInfo) {\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'rename-box rename-candidate';\n      this._domNode.style.display = `flex`;\n      this._domNode.style.columnGap = `5px`;\n      this._domNode.style.alignItems = `center`;\n      this._domNode.style.height = `${fontInfo.lineHeight}px`;\n      this._domNode.style.padding = `${RenameCandidateView._PADDING}px`;\n      // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n      const iconContainer = document.createElement('div');\n      iconContainer.style.display = `flex`;\n      iconContainer.style.alignItems = `center`;\n      iconContainer.style.width = iconContainer.style.height = `${fontInfo.lineHeight * 0.8}px`;\n      this._domNode.appendChild(iconContainer);\n      this._icon = renderIcon(Codicon.sparkle);\n      this._icon.style.display = `none`;\n      iconContainer.appendChild(this._icon);\n      this._label = document.createElement('div');\n      domFontInfo.applyFontInfo(this._label, fontInfo);\n      this._domNode.appendChild(this._label);\n      parent.appendChild(this._domNode);\n    }\n    populate(value) {\n      this._updateIcon(value);\n      this._updateLabel(value);\n    }\n    _updateIcon(value) {\n      const isAIGenerated = !!value.tags?.includes(NewSymbolNameTag.AIGenerated);\n      this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n    _updateLabel(value) {\n      this._label.innerText = value.newSymbolName;\n    }\n    static getLayoutInfo({\n      lineHeight\n    }) {\n      const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n      return {\n        totalHeight\n      };\n    }\n    dispose() {}\n  }\n  return RenameCandidateView;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nlet SectionHeaderDetector = class SectionHeaderDetector extends Disposable {\n  static {\n    this.ID = 'editor.sectionHeaderDetector';\n  }\n  constructor(editor, languageConfigurationService, editorWorkerService) {\n    super();\n    this.editor = editor;\n    this.languageConfigurationService = languageConfigurationService;\n    this.editorWorkerService = editorWorkerService;\n    this.decorations = this.editor.createDecorationsCollection();\n    this.options = this.createOptions(editor.getOption(73 /* EditorOption.minimap */));\n    this.computePromise = null;\n    this.currentOccurrences = {};\n    this._register(editor.onDidChangeModel(e => {\n      this.currentOccurrences = {};\n      this.options = this.createOptions(editor.getOption(73 /* EditorOption.minimap */));\n      this.stop();\n      this.computeSectionHeaders.schedule(0);\n    }));\n    this._register(editor.onDidChangeModelLanguage(e => {\n      this.currentOccurrences = {};\n      this.options = this.createOptions(editor.getOption(73 /* EditorOption.minimap */));\n      this.stop();\n      this.computeSectionHeaders.schedule(0);\n    }));\n    this._register(languageConfigurationService.onDidChange(e => {\n      const editorLanguageId = this.editor.getModel()?.getLanguageId();\n      if (editorLanguageId && e.affects(editorLanguageId)) {\n        this.currentOccurrences = {};\n        this.options = this.createOptions(editor.getOption(73 /* EditorOption.minimap */));\n        this.stop();\n        this.computeSectionHeaders.schedule(0);\n      }\n    }));\n    this._register(editor.onDidChangeConfiguration(e => {\n      if (this.options && !e.hasChanged(73 /* EditorOption.minimap */)) {\n        return;\n      }\n      this.options = this.createOptions(editor.getOption(73 /* EditorOption.minimap */));\n      // Remove any links (for the getting disabled case)\n      this.updateDecorations([]);\n      // Stop any computation (for the getting disabled case)\n      this.stop();\n      // Start computing (for the getting enabled case)\n      this.computeSectionHeaders.schedule(0);\n    }));\n    this._register(this.editor.onDidChangeModelContent(e => {\n      this.computeSectionHeaders.schedule();\n    }));\n    this._register(editor.onDidChangeModelTokens(e => {\n      if (!this.computeSectionHeaders.isScheduled()) {\n        this.computeSectionHeaders.schedule(1000);\n      }\n    }));\n    this.computeSectionHeaders = this._register(new RunOnceScheduler(() => {\n      this.findSectionHeaders();\n    }, 250));\n    this.computeSectionHeaders.schedule(0);\n  }\n  createOptions(minimap) {\n    if (!minimap || !this.editor.hasModel()) {\n      return undefined;\n    }\n    const languageId = this.editor.getModel().getLanguageId();\n    if (!languageId) {\n      return undefined;\n    }\n    const commentsConfiguration = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n    const foldingRules = this.languageConfigurationService.getLanguageConfiguration(languageId).foldingRules;\n    if (!commentsConfiguration && !foldingRules?.markers) {\n      return undefined;\n    }\n    return {\n      foldingRules,\n      findMarkSectionHeaders: minimap.showMarkSectionHeaders,\n      findRegionSectionHeaders: minimap.showRegionSectionHeaders\n    };\n  }\n  findSectionHeaders() {\n    if (!this.editor.hasModel() || !this.options?.findMarkSectionHeaders && !this.options?.findRegionSectionHeaders) {\n      return;\n    }\n    const model = this.editor.getModel();\n    if (model.isDisposed() || model.isTooLargeForSyncing()) {\n      return;\n    }\n    const modelVersionId = model.getVersionId();\n    this.editorWorkerService.findSectionHeaders(model.uri, this.options).then(sectionHeaders => {\n      if (model.isDisposed() || model.getVersionId() !== modelVersionId) {\n        // model changed in the meantime\n        return;\n      }\n      this.updateDecorations(sectionHeaders);\n    });\n  }\n  updateDecorations(sectionHeaders) {\n    const model = this.editor.getModel();\n    if (model) {\n      // Remove all section headers that should be in comments and are not in comments\n      sectionHeaders = sectionHeaders.filter(sectionHeader => {\n        if (!sectionHeader.shouldBeInComments) {\n          return true;\n        }\n        const validRange = model.validateRange(sectionHeader.range);\n        const tokens = model.tokenization.getLineTokens(validRange.startLineNumber);\n        const idx = tokens.findTokenIndexAtOffset(validRange.startColumn - 1);\n        const tokenType = tokens.getStandardTokenType(idx);\n        const languageId = tokens.getLanguageId(idx);\n        return languageId === model.getLanguageId() && tokenType === 1 /* StandardTokenType.Comment */;\n      });\n    }\n    const oldDecorations = Object.values(this.currentOccurrences).map(occurrence => occurrence.decorationId);\n    const newDecorations = sectionHeaders.map(sectionHeader => decoration(sectionHeader));\n    this.editor.changeDecorations(changeAccessor => {\n      const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n      this.currentOccurrences = {};\n      for (let i = 0, len = decorations.length; i < len; i++) {\n        const occurrence = {\n          sectionHeader: sectionHeaders[i],\n          decorationId: decorations[i]\n        };\n        this.currentOccurrences[occurrence.decorationId] = occurrence;\n      }\n    });\n  }\n  stop() {\n    this.computeSectionHeaders.cancel();\n    if (this.computePromise) {\n      this.computePromise.cancel();\n      this.computePromise = null;\n    }\n  }\n  dispose() {\n    super.dispose();\n    this.stop();\n    this.decorations.clear();\n  }\n};\nSectionHeaderDetector = __decorate([__param(1, ILanguageConfigurationService), __param(2, IEditorWorkerService)], SectionHeaderDetector);\nexport { SectionHeaderDetector };\nfunction decoration(sectionHeader) {\n  return {\n    range: sectionHeader.range,\n    options: ModelDecorationOptions.createDynamic({\n      description: 'section-header',\n      stickiness: 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */,\n      collapseOnReplaceEdit: true,\n      minimap: {\n        color: undefined,\n        position: 1 /* MinimapPosition.Inline */,\n        sectionHeaderStyle: sectionHeader.hasSeparatorLine ? 2 /* MinimapSectionHeaderStyle.Underlined */ : 1 /* MinimapSectionHeaderStyle.Normal */,\n        sectionHeaderText: sectionHeader.text\n      }\n    })\n  };\n}\nregisterEditorContribution(SectionHeaderDetector.ID, SectionHeaderDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ModelSemanticColoring_1;\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\nlet DocumentSemanticTokensFeature = class DocumentSemanticTokensFeature extends Disposable {\n  constructor(semanticTokensStylingService, modelService, themeService, configurationService, languageFeatureDebounceService, languageFeaturesService) {\n    super();\n    this._watchers = Object.create(null);\n    const register = model => {\n      this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\n    };\n    const deregister = (model, modelSemanticColoring) => {\n      modelSemanticColoring.dispose();\n      delete this._watchers[model.uri.toString()];\n    };\n    const handleSettingOrThemeChange = () => {\n      for (const model of modelService.getModels()) {\n        const curr = this._watchers[model.uri.toString()];\n        if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n          if (!curr) {\n            register(model);\n          }\n        } else {\n          if (curr) {\n            deregister(model, curr);\n          }\n        }\n      }\n    };\n    modelService.getModels().forEach(model => {\n      if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n        register(model);\n      }\n    });\n    this._register(modelService.onModelAdded(model => {\n      if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n        register(model);\n      }\n    }));\n    this._register(modelService.onModelRemoved(model => {\n      const curr = this._watchers[model.uri.toString()];\n      if (curr) {\n        deregister(model, curr);\n      }\n    }));\n    this._register(configurationService.onDidChangeConfiguration(e => {\n      if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n        handleSettingOrThemeChange();\n      }\n    }));\n    this._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\n  }\n  dispose() {\n    // Dispose all watchers\n    for (const watcher of Object.values(this._watchers)) {\n      watcher.dispose();\n    }\n    super.dispose();\n  }\n};\nDocumentSemanticTokensFeature = __decorate([__param(0, ISemanticTokensStylingService), __param(1, IModelService), __param(2, IThemeService), __param(3, IConfigurationService), __param(4, ILanguageFeatureDebounceService), __param(5, ILanguageFeaturesService)], DocumentSemanticTokensFeature);\nexport { DocumentSemanticTokensFeature };\nlet ModelSemanticColoring = /*#__PURE__*/(() => {\n  let ModelSemanticColoring = class ModelSemanticColoring extends Disposable {\n    static {\n      ModelSemanticColoring_1 = this;\n    }\n    static {\n      this.REQUEST_MIN_DELAY = 300;\n    }\n    static {\n      this.REQUEST_MAX_DELAY = 2000;\n    }\n    constructor(model, _semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService) {\n      super();\n      this._semanticTokensStylingService = _semanticTokensStylingService;\n      this._isDisposed = false;\n      this._model = model;\n      this._provider = languageFeaturesService.documentSemanticTokensProvider;\n      this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', {\n        min: ModelSemanticColoring_1.REQUEST_MIN_DELAY,\n        max: ModelSemanticColoring_1.REQUEST_MAX_DELAY\n      });\n      this._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring_1.REQUEST_MIN_DELAY));\n      this._currentDocumentResponse = null;\n      this._currentDocumentRequestCancellationTokenSource = null;\n      this._documentProvidersChangeListeners = [];\n      this._providersChangedDuringRequest = false;\n      this._register(this._model.onDidChangeContent(() => {\n        if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n          this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }\n      }));\n      this._register(this._model.onDidChangeAttached(() => {\n        if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n          this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }\n      }));\n      this._register(this._model.onDidChangeLanguage(() => {\n        // clear any outstanding state\n        if (this._currentDocumentResponse) {\n          this._currentDocumentResponse.dispose();\n          this._currentDocumentResponse = null;\n        }\n        if (this._currentDocumentRequestCancellationTokenSource) {\n          this._currentDocumentRequestCancellationTokenSource.cancel();\n          this._currentDocumentRequestCancellationTokenSource = null;\n        }\n        this._setDocumentSemanticTokens(null, null, null, []);\n        this._fetchDocumentSemanticTokens.schedule(0);\n      }));\n      const bindDocumentChangeListeners = () => {\n        dispose(this._documentProvidersChangeListeners);\n        this._documentProvidersChangeListeners = [];\n        for (const provider of this._provider.all(model)) {\n          if (typeof provider.onDidChange === 'function') {\n            this._documentProvidersChangeListeners.push(provider.onDidChange(() => {\n              if (this._currentDocumentRequestCancellationTokenSource) {\n                // there is already a request running,\n                this._providersChangedDuringRequest = true;\n                return;\n              }\n              this._fetchDocumentSemanticTokens.schedule(0);\n            }));\n          }\n        }\n      };\n      bindDocumentChangeListeners();\n      this._register(this._provider.onDidChange(() => {\n        bindDocumentChangeListeners();\n        this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n      }));\n      this._register(themeService.onDidColorThemeChange(_ => {\n        // clear out existing tokens\n        this._setDocumentSemanticTokens(null, null, null, []);\n        this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n      }));\n      this._fetchDocumentSemanticTokens.schedule(0);\n    }\n    dispose() {\n      if (this._currentDocumentResponse) {\n        this._currentDocumentResponse.dispose();\n        this._currentDocumentResponse = null;\n      }\n      if (this._currentDocumentRequestCancellationTokenSource) {\n        this._currentDocumentRequestCancellationTokenSource.cancel();\n        this._currentDocumentRequestCancellationTokenSource = null;\n      }\n      dispose(this._documentProvidersChangeListeners);\n      this._documentProvidersChangeListeners = [];\n      this._setDocumentSemanticTokens(null, null, null, []);\n      this._isDisposed = true;\n      super.dispose();\n    }\n    _fetchDocumentSemanticTokensNow() {\n      if (this._currentDocumentRequestCancellationTokenSource) {\n        // there is already a request running, let it finish...\n        return;\n      }\n      if (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\n        // there is no provider\n        if (this._currentDocumentResponse) {\n          // there are semantic tokens set\n          this._model.tokenization.setSemanticTokens(null, false);\n        }\n        return;\n      }\n      if (!this._model.isAttachedToEditor()) {\n        // this document is not visible, there is no need to fetch semantic tokens for it\n        return;\n      }\n      const cancellationTokenSource = new CancellationTokenSource();\n      const lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\n      const lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\n      const request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\n      this._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\n      this._providersChangedDuringRequest = false;\n      const pendingChanges = [];\n      const contentChangeListener = this._model.onDidChangeContent(e => {\n        pendingChanges.push(e);\n      });\n      const sw = new StopWatch(false);\n      request.then(res => {\n        this._debounceInformation.update(this._model, sw.elapsed());\n        this._currentDocumentRequestCancellationTokenSource = null;\n        contentChangeListener.dispose();\n        if (!res) {\n          this._setDocumentSemanticTokens(null, null, null, pendingChanges);\n        } else {\n          const {\n            provider,\n            tokens\n          } = res;\n          const styling = this._semanticTokensStylingService.getStyling(provider);\n          this._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\n        }\n      }, err => {\n        const isExpectedError = err && (errors.isCancellationError(err) || typeof err.message === 'string' && err.message.indexOf('busy') !== -1);\n        if (!isExpectedError) {\n          errors.onUnexpectedError(err);\n        }\n        // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\n        // The API does not have a special error kind to express this...\n        this._currentDocumentRequestCancellationTokenSource = null;\n        contentChangeListener.dispose();\n        if (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\n          // More changes occurred while the request was running\n          if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n          }\n        }\n      });\n    }\n    static _copy(src, srcOffset, dest, destOffset, length) {\n      // protect against overflows\n      length = Math.min(length, dest.length - destOffset, src.length - srcOffset);\n      for (let i = 0; i < length; i++) {\n        dest[destOffset + i] = src[srcOffset + i];\n      }\n    }\n    _setDocumentSemanticTokens(provider, tokens, styling, pendingChanges) {\n      const currentResponse = this._currentDocumentResponse;\n      const rescheduleIfNeeded = () => {\n        if ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\n          this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }\n      };\n      if (this._currentDocumentResponse) {\n        this._currentDocumentResponse.dispose();\n        this._currentDocumentResponse = null;\n      }\n      if (this._isDisposed) {\n        // disposed!\n        if (provider && tokens) {\n          provider.releaseDocumentSemanticTokens(tokens.resultId);\n        }\n        return;\n      }\n      if (!provider || !styling) {\n        this._model.tokenization.setSemanticTokens(null, false);\n        return;\n      }\n      if (!tokens) {\n        this._model.tokenization.setSemanticTokens(null, true);\n        rescheduleIfNeeded();\n        return;\n      }\n      if (isSemanticTokensEdits(tokens)) {\n        if (!currentResponse) {\n          // not possible!\n          this._model.tokenization.setSemanticTokens(null, true);\n          return;\n        }\n        if (tokens.edits.length === 0) {\n          // nothing to do!\n          tokens = {\n            resultId: tokens.resultId,\n            data: currentResponse.data\n          };\n        } else {\n          let deltaLength = 0;\n          for (const edit of tokens.edits) {\n            deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\n          }\n          const srcData = currentResponse.data;\n          const destData = new Uint32Array(srcData.length + deltaLength);\n          let srcLastStart = srcData.length;\n          let destLastStart = destData.length;\n          for (let i = tokens.edits.length - 1; i >= 0; i--) {\n            const edit = tokens.edits[i];\n            if (edit.start > srcData.length) {\n              styling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\n              // The edits are invalid and there's no way to recover\n              this._model.tokenization.setSemanticTokens(null, true);\n              return;\n            }\n            const copyCount = srcLastStart - (edit.start + edit.deleteCount);\n            if (copyCount > 0) {\n              ModelSemanticColoring_1._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\n              destLastStart -= copyCount;\n            }\n            if (edit.data) {\n              ModelSemanticColoring_1._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\n              destLastStart -= edit.data.length;\n            }\n            srcLastStart = edit.start;\n          }\n          if (srcLastStart > 0) {\n            ModelSemanticColoring_1._copy(srcData, 0, destData, 0, srcLastStart);\n          }\n          tokens = {\n            resultId: tokens.resultId,\n            data: destData\n          };\n        }\n      }\n      if (isSemanticTokens(tokens)) {\n        this._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\n        const result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\n        // Adjust incoming semantic tokens\n        if (pendingChanges.length > 0) {\n          // More changes occurred while the request was running\n          // We need to:\n          // 1. Adjust incoming semantic tokens\n          // 2. Request them again\n          for (const change of pendingChanges) {\n            for (const area of result) {\n              for (const singleChange of change.changes) {\n                area.applyEdit(singleChange.range, singleChange.text);\n              }\n            }\n          }\n        }\n        this._model.tokenization.setSemanticTokens(result, true);\n      } else {\n        this._model.tokenization.setSemanticTokens(null, true);\n      }\n      rescheduleIfNeeded();\n    }\n  };\n  return ModelSemanticColoring;\n})();\nModelSemanticColoring = ModelSemanticColoring_1 = __decorate([__param(1, ISemanticTokensStylingService), __param(2, IThemeService), __param(3, ILanguageFeatureDebounceService), __param(4, ILanguageFeaturesService)], ModelSemanticColoring);\nclass SemanticTokensResponse {\n  constructor(provider, resultId, data) {\n    this.provider = provider;\n    this.resultId = resultId;\n    this.data = data;\n  }\n  dispose() {\n    this.provider.releaseDocumentSemanticTokens(this.resultId);\n  }\n}\nregisterEditorFeature(DocumentSemanticTokensFeature);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { encodeSemanticTokensDto } from '../../../common/services/semanticTokensDto.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function isSemanticTokens(v) {\n  return v && !!v.data;\n}\nexport function isSemanticTokensEdits(v) {\n  return v && Array.isArray(v.edits);\n}\nexport class DocumentSemanticTokensResult {\n  constructor(provider, tokens, error) {\n    this.provider = provider;\n    this.tokens = tokens;\n    this.error = error;\n  }\n}\nexport function hasDocumentSemanticTokensProvider(registry, model) {\n  return registry.has(model);\n}\nfunction getDocumentSemanticTokensProviders(registry, model) {\n  const groups = registry.orderedGroups(model);\n  return groups.length > 0 ? groups[0] : [];\n}\nexport async function getDocumentSemanticTokens(registry, model, lastProvider, lastResultId, token) {\n  const providers = getDocumentSemanticTokensProviders(registry, model);\n  // Get tokens from all providers at the same time.\n  const results = await Promise.all(providers.map(async provider => {\n    let result;\n    let error = null;\n    try {\n      result = await provider.provideDocumentSemanticTokens(model, provider === lastProvider ? lastResultId : null, token);\n    } catch (err) {\n      error = err;\n      result = null;\n    }\n    if (!result || !isSemanticTokens(result) && !isSemanticTokensEdits(result)) {\n      result = null;\n    }\n    return new DocumentSemanticTokensResult(provider, result, error);\n  }));\n  // Try to return the first result with actual tokens or\n  // the first result which threw an error (!!)\n  for (const result of results) {\n    if (result.error) {\n      throw result.error;\n    }\n    if (result.tokens) {\n      return result;\n    }\n  }\n  // Return the first result, even if it doesn't have tokens\n  if (results.length > 0) {\n    return results[0];\n  }\n  return null;\n}\nfunction _getDocumentSemanticTokensProviderHighestGroup(registry, model) {\n  const result = registry.orderedGroups(model);\n  return result.length > 0 ? result[0] : null;\n}\nclass DocumentRangeSemanticTokensResult {\n  constructor(provider, tokens) {\n    this.provider = provider;\n    this.tokens = tokens;\n  }\n}\nexport function hasDocumentRangeSemanticTokensProvider(providers, model) {\n  return providers.has(model);\n}\nfunction getDocumentRangeSemanticTokensProviders(providers, model) {\n  const groups = providers.orderedGroups(model);\n  return groups.length > 0 ? groups[0] : [];\n}\nexport async function getDocumentRangeSemanticTokens(registry, model, range, token) {\n  const providers = getDocumentRangeSemanticTokensProviders(registry, model);\n  // Get tokens from all providers at the same time.\n  const results = await Promise.all(providers.map(async provider => {\n    let result;\n    try {\n      result = await provider.provideDocumentRangeSemanticTokens(model, range, token);\n    } catch (err) {\n      onUnexpectedExternalError(err);\n      result = null;\n    }\n    if (!result || !isSemanticTokens(result)) {\n      result = null;\n    }\n    return new DocumentRangeSemanticTokensResult(provider, result);\n  }));\n  // Try to return the first result with actual tokens\n  for (const result of results) {\n    if (result.tokens) {\n      return result;\n    }\n  }\n  // Return the first result, even if it doesn't have tokens\n  if (results.length > 0) {\n    return results[0];\n  }\n  return null;\n}\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokensLegend', async (accessor, ...args) => {\n  const [uri] = args;\n  assertType(uri instanceof URI);\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    return undefined;\n  }\n  const {\n    documentSemanticTokensProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const providers = _getDocumentSemanticTokensProviderHighestGroup(documentSemanticTokensProvider, model);\n  if (!providers) {\n    // there is no provider => fall back to a document range semantic tokens provider\n    return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokensLegend', uri);\n  }\n  return providers[0].getLegend();\n});\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokens', async (accessor, ...args) => {\n  const [uri] = args;\n  assertType(uri instanceof URI);\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    return undefined;\n  }\n  const {\n    documentSemanticTokensProvider\n  } = accessor.get(ILanguageFeaturesService);\n  if (!hasDocumentSemanticTokensProvider(documentSemanticTokensProvider, model)) {\n    // there is no provider => fall back to a document range semantic tokens provider\n    return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokens', uri, model.getFullModelRange());\n  }\n  const r = await getDocumentSemanticTokens(documentSemanticTokensProvider, model, null, null, CancellationToken.None);\n  if (!r) {\n    return undefined;\n  }\n  const {\n    provider,\n    tokens\n  } = r;\n  if (!tokens || !isSemanticTokens(tokens)) {\n    return undefined;\n  }\n  const buff = encodeSemanticTokensDto({\n    id: 0,\n    type: 'full',\n    data: tokens.data\n  });\n  if (tokens.resultId) {\n    provider.releaseDocumentSemanticTokens(tokens.resultId);\n  }\n  return buff;\n});\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokensLegend', async (accessor, ...args) => {\n  const [uri, range] = args;\n  assertType(uri instanceof URI);\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    return undefined;\n  }\n  const {\n    documentRangeSemanticTokensProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const providers = getDocumentRangeSemanticTokensProviders(documentRangeSemanticTokensProvider, model);\n  if (providers.length === 0) {\n    // no providers\n    return undefined;\n  }\n  if (providers.length === 1) {\n    // straight forward case, just a single provider\n    return providers[0].getLegend();\n  }\n  if (!range || !Range.isIRange(range)) {\n    // if no range is provided, we cannot support multiple providers\n    // as we cannot fall back to the one which would give results\n    // => return the first legend for backwards compatibility and print a warning\n    console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`);\n    return providers[0].getLegend();\n  }\n  const result = await getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n  if (!result) {\n    return undefined;\n  }\n  return result.provider.getLegend();\n});\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokens', async (accessor, ...args) => {\n  const [uri, range] = args;\n  assertType(uri instanceof URI);\n  assertType(Range.isIRange(range));\n  const model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    return undefined;\n  }\n  const {\n    documentRangeSemanticTokensProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const result = await getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n  if (!result || !result.tokens) {\n    // there is no provider or it didn't return tokens\n    return undefined;\n  }\n  return encodeSemanticTokensDto({\n    id: 0,\n    type: 'full',\n    data: result.tokens.data\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport * as platform from '../../../base/common/platform.js';\nfunction reverseEndianness(arr) {\n  for (let i = 0, len = arr.length; i < len; i += 4) {\n    // flip bytes 0<->3 and 1<->2\n    const b0 = arr[i + 0];\n    const b1 = arr[i + 1];\n    const b2 = arr[i + 2];\n    const b3 = arr[i + 3];\n    arr[i + 0] = b3;\n    arr[i + 1] = b2;\n    arr[i + 2] = b1;\n    arr[i + 3] = b0;\n  }\n}\nfunction toLittleEndianBuffer(arr) {\n  const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n  if (!platform.isLittleEndian()) {\n    // the byte order must be changed\n    reverseEndianness(uint8Arr);\n  }\n  return VSBuffer.wrap(uint8Arr);\n}\nexport function encodeSemanticTokensDto(semanticTokens) {\n  const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n  let offset = 0;\n  dest[offset++] = semanticTokens.id;\n  if (semanticTokens.type === 'full') {\n    dest[offset++] = 1 /* EncodedSemanticTokensType.Full */;\n    dest[offset++] = semanticTokens.data.length;\n    dest.set(semanticTokens.data, offset);\n    offset += semanticTokens.data.length;\n  } else {\n    dest[offset++] = 2 /* EncodedSemanticTokensType.Delta */;\n    dest[offset++] = semanticTokens.deltas.length;\n    for (const delta of semanticTokens.deltas) {\n      dest[offset++] = delta.start;\n      dest[offset++] = delta.deleteCount;\n      if (delta.data) {\n        dest[offset++] = delta.data.length;\n        dest.set(delta.data, offset);\n        offset += delta.data.length;\n      } else {\n        dest[offset++] = 0;\n      }\n    }\n  }\n  return toLittleEndianBuffer(dest);\n}\nfunction encodeSemanticTokensDtoSize(semanticTokens) {\n  let result = 0;\n  result += +1 // id\n  + 1 // type\n  ;\n  if (semanticTokens.type === 'full') {\n    result += +1 // data length\n    + semanticTokens.data.length;\n  } else {\n    result += +1 // delta count\n    ;\n    result += (+1 // start\n    + 1 // deleteCount\n    + 1 // data length\n    ) * semanticTokens.deltas.length;\n    for (const delta of semanticTokens.deltas) {\n      if (delta.data) {\n        result += delta.data.length;\n      }\n    }\n  }\n  return result;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const SEMANTIC_HIGHLIGHTING_SETTING_ID = 'editor.semanticHighlighting';\nexport function isSemanticColoringEnabled(model, themeService, configurationService) {\n  const setting = configurationService.getValue(SEMANTIC_HIGHLIGHTING_SETTING_ID, {\n    overrideIdentifier: model.getLanguageId(),\n    resource: model.uri\n  })?.enabled;\n  if (typeof setting === 'boolean') {\n    return setting;\n  }\n  return themeService.getColorTheme().semanticHighlighting;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n  static {\n    this.ID = 'editor.contrib.viewportSemanticTokens';\n  }\n  constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n    super();\n    this._semanticTokensStylingService = _semanticTokensStylingService;\n    this._themeService = _themeService;\n    this._configurationService = _configurationService;\n    this._editor = editor;\n    this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n    this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', {\n      min: 100,\n      max: 500\n    });\n    this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n    this._outstandingRequests = [];\n    const scheduleTokenizeViewport = () => {\n      if (this._editor.hasModel()) {\n        this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n      }\n    };\n    this._register(this._editor.onDidScrollChange(() => {\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._editor.onDidChangeModel(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._editor.onDidChangeModelContent(e => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._provider.onDidChange(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._configurationService.onDidChangeConfiguration(e => {\n      if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n        this._cancelAll();\n        scheduleTokenizeViewport();\n      }\n    }));\n    this._register(this._themeService.onDidColorThemeChange(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    scheduleTokenizeViewport();\n  }\n  _cancelAll() {\n    for (const request of this._outstandingRequests) {\n      request.cancel();\n    }\n    this._outstandingRequests = [];\n  }\n  _removeOutstandingRequest(req) {\n    for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n      if (this._outstandingRequests[i] === req) {\n        this._outstandingRequests.splice(i, 1);\n        return;\n      }\n    }\n  }\n  _tokenizeViewportNow() {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    if (model.tokenization.hasCompleteSemanticTokens()) {\n      return;\n    }\n    if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n      if (model.tokenization.hasSomeSemanticTokens()) {\n        model.tokenization.setSemanticTokens(null, false);\n      }\n      return;\n    }\n    if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n      if (model.tokenization.hasSomeSemanticTokens()) {\n        model.tokenization.setSemanticTokens(null, false);\n      }\n      return;\n    }\n    const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n    this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n  }\n  _requestRange(model, range) {\n    const requestVersionId = model.getVersionId();\n    const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n    const sw = new StopWatch(false);\n    request.then(r => {\n      this._debounceInformation.update(model, sw.elapsed());\n      if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n        return;\n      }\n      const {\n        provider,\n        tokens: result\n      } = r;\n      const styling = this._semanticTokensStylingService.getStyling(provider);\n      model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n    }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n    return request;\n  }\n};\nViewportSemanticTokensContribution = __decorate([__param(1, ISemanticTokensStylingService), __param(2, IThemeService), __param(3, IConfigurationService), __param(4, ILanguageFeatureDebounceService), __param(5, ILanguageFeaturesService)], ViewportSemanticTokensContribution);\nexport { ViewportSemanticTokensContribution };\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n  constructor(index, ranges) {\n    this.index = index;\n    this.ranges = ranges;\n  }\n  mov(fwd) {\n    const index = this.index + (fwd ? 1 : -1);\n    if (index < 0 || index >= this.ranges.length) {\n      return this;\n    }\n    const res = new SelectionRanges(index, this.ranges);\n    if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n      // next range equals this range, retry with next-next\n      return res.mov(fwd);\n    }\n    return res;\n  }\n}\nlet SmartSelectController = /*#__PURE__*/(() => {\n  let SmartSelectController = class SmartSelectController {\n    static {\n      SmartSelectController_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.smartSelectController';\n    }\n    static get(editor) {\n      return editor.getContribution(SmartSelectController_1.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n      this._editor = _editor;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._ignoreSelection = false;\n    }\n    dispose() {\n      this._selectionListener?.dispose();\n    }\n    async run(forward) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      const selections = this._editor.getSelections();\n      const model = this._editor.getModel();\n      if (!this._state) {\n        await provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(114 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n          if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n            // invalid result\n            return;\n          }\n          if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n            // invalid editor state\n            return;\n          }\n          for (let i = 0; i < ranges.length; i++) {\n            ranges[i] = ranges[i].filter(range => {\n              // filter ranges inside the selection\n              return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n            });\n            // prepend current selection\n            ranges[i].unshift(selections[i]);\n          }\n          this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n          // listen to caret move and forget about state\n          this._selectionListener?.dispose();\n          this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignoreSelection) {\n              this._selectionListener?.dispose();\n              this._state = undefined;\n            }\n          });\n        });\n      }\n      if (!this._state) {\n        // no state\n        return;\n      }\n      this._state = this._state.map(state => state.mov(forward));\n      const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n      this._ignoreSelection = true;\n      try {\n        this._editor.setSelections(newSelections);\n      } finally {\n        this._ignoreSelection = false;\n      }\n    }\n  };\n  return SmartSelectController;\n})();\nSmartSelectController = SmartSelectController_1 = __decorate([__param(1, ILanguageFeaturesService)], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n  constructor(forward, opts) {\n    super(opts);\n    this._forward = forward;\n  }\n  async run(_accessor, editor) {\n    const controller = SmartSelectController.get(editor);\n    if (controller) {\n      await controller.run(this._forward);\n    }\n  }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n  constructor() {\n    super(true, {\n      id: 'editor.action.smartSelect.expand',\n      label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n      alias: 'Expand Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectGrow',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Expand Selection\"),\n        order: 2\n      }\n    });\n  }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n  constructor() {\n    super(false, {\n      id: 'editor.action.smartSelect.shrink',\n      label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n      alias: 'Shrink Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectShrink',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Shrink Selection\"),\n        order: 3\n      }\n    });\n  }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport async function provideSelectionRanges(registry, model, positions, options, token) {\n  const providers = registry.all(model).concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n  if (providers.length === 1) {\n    // add word selection and bracket selection when no provider exists\n    providers.unshift(new BracketSelectionRangeProvider());\n  }\n  const work = [];\n  const allRawRanges = [];\n  for (const provider of providers) {\n    work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n      if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n        for (let i = 0; i < positions.length; i++) {\n          if (!allRawRanges[i]) {\n            allRawRanges[i] = [];\n          }\n          for (const oneProviderRanges of allProviderRanges[i]) {\n            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n              allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n            }\n          }\n        }\n      }\n    }, onUnexpectedExternalError));\n  }\n  await Promise.all(work);\n  return allRawRanges.map(oneRawRanges => {\n    if (oneRawRanges.length === 0) {\n      return [];\n    }\n    // sort all by start/end position\n    oneRawRanges.sort((a, b) => {\n      if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n        return 1;\n      } else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n        return -1;\n      } else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n        return -1;\n      } else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n    // remove ranges that don't contain the former range or that are equal to the\n    // former range\n    const oneRanges = [];\n    let last;\n    for (const range of oneRawRanges) {\n      if (!last || Range.containsRange(range, last) && !Range.equalsRange(range, last)) {\n        oneRanges.push(range);\n        last = range;\n      }\n    }\n    if (!options.selectLeadingAndTrailingWhitespace) {\n      return oneRanges;\n    }\n    // add ranges that expand trivia at line starts and ends whenever a range\n    // wraps onto the a new line\n    const oneRangesWithTrivia = [oneRanges[0]];\n    for (let i = 1; i < oneRanges.length; i++) {\n      const prev = oneRanges[i - 1];\n      const cur = oneRanges[i];\n      if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n        // add line/block range without leading/failing whitespace\n        const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n        if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n          oneRangesWithTrivia.push(rangeNoWhitespace);\n        }\n        // add line/block range\n        const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n        if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n          oneRangesWithTrivia.push(rangeFull);\n        }\n      }\n      oneRangesWithTrivia.push(cur);\n    }\n    return oneRangesWithTrivia;\n  });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', async function (accessor, ...args) {\n  const [resource, positions] = args;\n  assertType(URI.isUri(resource));\n  const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n  const reference = await accessor.get(ITextModelService).createModelReference(resource);\n  try {\n    return provideSelectionRanges(registry, reference.object.textEditorModel, positions, {\n      selectLeadingAndTrailingWhitespace: true,\n      selectSubwords: true\n    }, CancellationToken.None);\n  } finally {\n    reference.dispose();\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n  constructor(selectSubwords = true) {\n    this.selectSubwords = selectSubwords;\n  }\n  provideSelectionRanges(model, positions) {\n    const result = [];\n    for (const position of positions) {\n      const bucket = [];\n      result.push(bucket);\n      if (this.selectSubwords) {\n        this._addInWordRanges(bucket, model, position);\n      }\n      this._addWordRanges(bucket, model, position);\n      this._addWhitespaceLine(bucket, model, position);\n      bucket.push({\n        range: model.getFullModelRange()\n      });\n    }\n    return result;\n  }\n  _addInWordRanges(bucket, model, pos) {\n    const obj = model.getWordAtPosition(pos);\n    if (!obj) {\n      return;\n    }\n    const {\n      word,\n      startColumn\n    } = obj;\n    const offset = pos.column - startColumn;\n    let start = offset;\n    let end = offset;\n    let lastCh = 0;\n    // LEFT anchor (start)\n    for (; start >= 0; start--) {\n      const ch = word.charCodeAt(start);\n      if (start !== offset && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n        // foo-bar OR foo_bar\n        break;\n      } else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n        // fooBar\n        break;\n      }\n      lastCh = ch;\n    }\n    start += 1;\n    // RIGHT anchor (end)\n    for (; end < word.length; end++) {\n      const ch = word.charCodeAt(end);\n      if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n        // fooBar\n        break;\n      } else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n        // foo-bar OR foo_bar\n        break;\n      }\n      lastCh = ch;\n    }\n    if (start < end) {\n      bucket.push({\n        range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end)\n      });\n    }\n  }\n  _addWordRanges(bucket, model, pos) {\n    const word = model.getWordAtPosition(pos);\n    if (word) {\n      bucket.push({\n        range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn)\n      });\n    }\n  }\n  _addWhitespaceLine(bucket, model, pos) {\n    if (model.getLineLength(pos.lineNumber) > 0 && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0 && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n      bucket.push({\n        range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber))\n      });\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\nregisterAction2(FocusStickyScroll);\nregisterAction2(SelectPreviousStickyScrollLine);\nregisterAction2(SelectNextStickyScrollLine);\nregisterAction2(GoToStickyScrollLine);\nregisterAction2(SelectEditor);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nexport class ToggleStickyScroll extends Action2 {\n  constructor() {\n    super({\n      id: 'editor.action.toggleStickyScroll',\n      title: {\n        ...localize2('toggleEditorStickyScroll', \"Toggle Editor Sticky Scroll\"),\n        mnemonicTitle: localize({\n          key: 'mitoggleStickyScroll',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Toggle Editor Sticky Scroll\")\n      },\n      metadata: {\n        description: localize2('toggleEditorStickyScroll.description', \"Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport\")\n      },\n      category: Categories.View,\n      toggled: {\n        condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n        title: localize('stickyScroll', \"Sticky Scroll\"),\n        mnemonicTitle: localize({\n          key: 'miStickyScroll',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Sticky Scroll\")\n      },\n      menu: [{\n        id: MenuId.CommandPalette\n      }, {\n        id: MenuId.MenubarAppearanceMenu,\n        group: '4_editor',\n        order: 3\n      }, {\n        id: MenuId.StickyScrollContext\n      }]\n    });\n  }\n  async run(accessor) {\n    const configurationService = accessor.get(IConfigurationService);\n    const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n    return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n  }\n}\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\nexport class FocusStickyScroll extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.focusStickyScroll',\n      title: {\n        ...localize2('focusStickyScroll', \"Focus on the editor sticky scroll\"),\n        mnemonicTitle: localize({\n          key: 'mifocusStickyScroll',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Focus Sticky Scroll\")\n      },\n      precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\n      menu: [{\n        id: MenuId.CommandPalette\n      }]\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StickyScrollController.get(editor)?.focus();\n  }\n}\nexport class SelectNextStickyScrollLine extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.selectNextStickyScrollLine',\n      title: localize2('selectNextStickyScrollLine.title', \"Select the next editor sticky scroll line\"),\n      precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n      keybinding: {\n        weight,\n        primary: 18 /* KeyCode.DownArrow */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StickyScrollController.get(editor)?.focusNext();\n  }\n}\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.selectPreviousStickyScrollLine',\n      title: localize2('selectPreviousStickyScrollLine.title', \"Select the previous sticky scroll line\"),\n      precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n      keybinding: {\n        weight,\n        primary: 16 /* KeyCode.UpArrow */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StickyScrollController.get(editor)?.focusPrevious();\n  }\n}\nexport class GoToStickyScrollLine extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.goToFocusedStickyScrollLine',\n      title: localize2('goToFocusedStickyScrollLine.title', \"Go to the focused sticky scroll line\"),\n      precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n      keybinding: {\n        weight,\n        primary: 3 /* KeyCode.Enter */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StickyScrollController.get(editor)?.goToFocused();\n  }\n}\nexport class SelectEditor extends EditorAction2 {\n  constructor() {\n    super({\n      id: 'editor.action.selectEditor',\n      title: localize2('selectEditor.title', \"Select Editor\"),\n      precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n      keybinding: {\n        weight,\n        primary: 9 /* KeyCode.Escape */\n      }\n    });\n  }\n  runEditorCommand(_accessor, editor) {\n    StickyScrollController.get(editor)?.selectEditor();\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize2 } from '../../../nls.js';\nexport const Categories = Object.freeze({\n  View: localize2('view', 'View'),\n  Help: localize2('help', 'Help'),\n  Test: localize2('test', 'Test'),\n  File: localize2('file', 'File'),\n  Preferences: localize2('preferences', 'Preferences'),\n  Developer: localize2({\n    key: 'developer',\n    comment: ['A developer on Code itself or someone diagnosing issues in Code']\n  }, \"Developer\")\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar StickyScrollController_1;\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StickyRange } from './stickyScrollElement.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { toggleCollapseState } from '../../folding/browser/foldingModel.js';\nlet StickyScrollController = /*#__PURE__*/(() => {\n  let StickyScrollController = class StickyScrollController extends Disposable {\n    static {\n      StickyScrollController_1 = this;\n    }\n    static {\n      this.ID = 'store.contrib.stickyScrollController';\n    }\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\n      super();\n      this._editor = _editor;\n      this._contextMenuService = _contextMenuService;\n      this._languageFeaturesService = _languageFeaturesService;\n      this._instaService = _instaService;\n      this._contextKeyService = _contextKeyService;\n      this._sessionStore = new DisposableStore();\n      this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n      this._candidateDefinitionsLength = -1;\n      this._focusedStickyElementIndex = -1;\n      this._enabled = false;\n      this._focused = false;\n      this._positionRevealed = false;\n      this._onMouseDown = false;\n      this._endLineNumbers = [];\n      this._stickyScrollWidget = new StickyScrollWidget(this._editor);\n      this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\n      this._register(this._stickyScrollWidget);\n      this._register(this._stickyLineCandidateProvider);\n      this._widgetState = StickyScrollWidgetState.Empty;\n      this._onDidResize();\n      this._readConfiguration();\n      const stickyScrollDomNode = this._stickyScrollWidget.getDomNode();\n      this._register(this._editor.onDidChangeConfiguration(e => {\n        this._readConfigurationChange(e);\n      }));\n      this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.CONTEXT_MENU, async event => {\n        this._onContextMenu(dom.getWindow(stickyScrollDomNode), event);\n      }));\n      this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\n      this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\n      const focusTracker = this._register(dom.trackFocus(stickyScrollDomNode));\n      this._register(focusTracker.onDidBlur(_ => {\n        // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\n        // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\n        if (this._positionRevealed === false && stickyScrollDomNode.clientHeight === 0) {\n          this._focusedStickyElementIndex = -1;\n          this.focus();\n        }\n        // In all other casees, dispose the focus on the sticky scroll\n        else {\n          this._disposeFocusStickyScrollStore();\n        }\n      }));\n      this._register(focusTracker.onDidFocus(_ => {\n        this.focus();\n      }));\n      this._registerMouseListeners();\n      // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\n      this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.MOUSE_DOWN, e => {\n        this._onMouseDown = true;\n      }));\n    }\n    static get(editor) {\n      return editor.getContribution(StickyScrollController_1.ID);\n    }\n    _disposeFocusStickyScrollStore() {\n      this._stickyScrollFocusedContextKey.set(false);\n      this._focusDisposableStore?.dispose();\n      this._focused = false;\n      this._positionRevealed = false;\n      this._onMouseDown = false;\n    }\n    focus() {\n      // If the mouse is down, do not focus on the sticky scroll\n      if (this._onMouseDown) {\n        this._onMouseDown = false;\n        this._editor.focus();\n        return;\n      }\n      const focusState = this._stickyScrollFocusedContextKey.get();\n      if (focusState === true) {\n        return;\n      }\n      this._focused = true;\n      this._focusDisposableStore = new DisposableStore();\n      this._stickyScrollFocusedContextKey.set(true);\n      this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\n      this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    focusNext() {\n      if (this._focusedStickyElementIndex < this._stickyScrollWidget.lineNumberCount - 1) {\n        this._focusNav(true);\n      }\n    }\n    focusPrevious() {\n      if (this._focusedStickyElementIndex > 0) {\n        this._focusNav(false);\n      }\n    }\n    selectEditor() {\n      this._editor.focus();\n    }\n    // True is next, false is previous\n    _focusNav(direction) {\n      this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\n      this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    goToFocused() {\n      const lineNumbers = this._stickyScrollWidget.lineNumbers;\n      this._disposeFocusStickyScrollStore();\n      this._revealPosition({\n        lineNumber: lineNumbers[this._focusedStickyElementIndex],\n        column: 1\n      });\n    }\n    _revealPosition(position) {\n      this._reveaInEditor(position, () => this._editor.revealPosition(position));\n    }\n    _revealLineInCenterIfOutsideViewport(position) {\n      this._reveaInEditor(position, () => this._editor.revealLineInCenterIfOutsideViewport(position.lineNumber, 0 /* ScrollType.Smooth */));\n    }\n    _reveaInEditor(position, revealFunction) {\n      if (this._focused) {\n        this._disposeFocusStickyScrollStore();\n      }\n      this._positionRevealed = true;\n      revealFunction();\n      this._editor.setSelection(Range.fromPositions(position));\n      this._editor.focus();\n    }\n    _registerMouseListeners() {\n      const sessionStore = this._register(new DisposableStore());\n      const gesture = this._register(new ClickLinkGesture(this._editor, {\n        extractLineNumberFromMouseEvent: e => {\n          const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n          return position ? position.lineNumber : 0;\n        }\n      }));\n      const getMouseEventTarget = mouseEvent => {\n        if (!this._editor.hasModel()) {\n          return null;\n        }\n        if (mouseEvent.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || mouseEvent.target.detail !== this._stickyScrollWidget.getId()) {\n          // not hovering over our widget\n          return null;\n        }\n        const mouseTargetElement = mouseEvent.target.element;\n        if (!mouseTargetElement || mouseTargetElement.innerText !== mouseTargetElement.innerHTML) {\n          // not on a span element rendering text\n          return null;\n        }\n        const position = this._stickyScrollWidget.getEditorPositionFromNode(mouseTargetElement);\n        if (!position) {\n          // not hovering a sticky scroll line\n          return null;\n        }\n        return {\n          range: new Range(position.lineNumber, position.column, position.lineNumber, position.column + mouseTargetElement.innerText.length),\n          textElement: mouseTargetElement\n        };\n      };\n      const stickyScrollWidgetDomNode = this._stickyScrollWidget.getDomNode();\n      this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.CLICK, mouseEvent => {\n        if (mouseEvent.ctrlKey || mouseEvent.altKey || mouseEvent.metaKey) {\n          // modifier pressed\n          return;\n        }\n        if (!mouseEvent.leftButton) {\n          // not left click\n          return;\n        }\n        if (mouseEvent.shiftKey) {\n          // shift click\n          const lineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\n          if (lineIndex === null) {\n            return;\n          }\n          const position = new Position(this._endLineNumbers[lineIndex], 1);\n          this._revealLineInCenterIfOutsideViewport(position);\n          return;\n        }\n        const isInFoldingIconDomNode = this._stickyScrollWidget.isInFoldingIconDomNode(mouseEvent.target);\n        if (isInFoldingIconDomNode) {\n          // clicked on folding icon\n          const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\n          this._toggleFoldingRegionForLine(lineNumber);\n          return;\n        }\n        const isInStickyLine = this._stickyScrollWidget.isInStickyLine(mouseEvent.target);\n        if (!isInStickyLine) {\n          return;\n        }\n        // normal click\n        let position = this._stickyScrollWidget.getEditorPositionFromNode(mouseEvent.target);\n        if (!position) {\n          const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\n          if (lineNumber === null) {\n            // not hovering a sticky scroll line\n            return;\n          }\n          position = new Position(lineNumber, 1);\n        }\n        this._revealPosition(position);\n      }));\n      this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_MOVE, mouseEvent => {\n        if (mouseEvent.shiftKey) {\n          const currentEndForLineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\n          if (currentEndForLineIndex === null || this._showEndForLine !== null && this._showEndForLine === currentEndForLineIndex) {\n            return;\n          }\n          this._showEndForLine = currentEndForLineIndex;\n          this._renderStickyScroll();\n          return;\n        }\n        if (this._showEndForLine !== undefined) {\n          this._showEndForLine = undefined;\n          this._renderStickyScroll();\n        }\n      }));\n      this._register(dom.addDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_LEAVE, e => {\n        if (this._showEndForLine !== undefined) {\n          this._showEndForLine = undefined;\n          this._renderStickyScroll();\n        }\n      }));\n      this._register(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n        const mouseTarget = getMouseEventTarget(mouseEvent);\n        if (!mouseTarget || !mouseEvent.hasTriggerModifier || !this._editor.hasModel()) {\n          sessionStore.clear();\n          return;\n        }\n        const {\n          range,\n          textElement\n        } = mouseTarget;\n        if (!range.equalsRange(this._stickyRangeProjectedOnEditor)) {\n          this._stickyRangeProjectedOnEditor = range;\n          sessionStore.clear();\n        } else if (textElement.style.textDecoration === 'underline') {\n          return;\n        }\n        const cancellationToken = new CancellationTokenSource();\n        sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n        let currentHTMLChild;\n        getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(range.startLineNumber, range.startColumn + 1), false, cancellationToken.token).then(candidateDefinitions => {\n          if (cancellationToken.token.isCancellationRequested) {\n            return;\n          }\n          if (candidateDefinitions.length !== 0) {\n            this._candidateDefinitionsLength = candidateDefinitions.length;\n            const childHTML = textElement;\n            if (currentHTMLChild !== childHTML) {\n              sessionStore.clear();\n              currentHTMLChild = childHTML;\n              currentHTMLChild.style.textDecoration = 'underline';\n              sessionStore.add(toDisposable(() => {\n                currentHTMLChild.style.textDecoration = 'none';\n              }));\n            } else if (!currentHTMLChild) {\n              currentHTMLChild = childHTML;\n              currentHTMLChild.style.textDecoration = 'underline';\n              sessionStore.add(toDisposable(() => {\n                currentHTMLChild.style.textDecoration = 'none';\n              }));\n            }\n          } else {\n            sessionStore.clear();\n          }\n        });\n      }));\n      this._register(gesture.onCancel(() => {\n        sessionStore.clear();\n      }));\n      this._register(gesture.onExecute(async e => {\n        if (e.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || e.target.detail !== this._stickyScrollWidget.getId()) {\n          // not hovering over our widget\n          return;\n        }\n        const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n        if (!position) {\n          // not hovering a sticky scroll line\n          return;\n        }\n        if (!this._editor.hasModel() || !this._stickyRangeProjectedOnEditor) {\n          return;\n        }\n        if (this._candidateDefinitionsLength > 1) {\n          if (this._focused) {\n            this._disposeFocusStickyScrollStore();\n          }\n          this._revealPosition({\n            lineNumber: position.lineNumber,\n            column: 1\n          });\n        }\n        this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, {\n          uri: this._editor.getModel().uri,\n          range: this._stickyRangeProjectedOnEditor\n        });\n      }));\n    }\n    _onContextMenu(targetWindow, e) {\n      const event = new StandardMouseEvent(targetWindow, e);\n      this._contextMenuService.showContextMenu({\n        menuId: MenuId.StickyScrollContext,\n        getAnchor: () => event\n      });\n    }\n    _toggleFoldingRegionForLine(line) {\n      if (!this._foldingModel || line === null) {\n        return;\n      }\n      const stickyLine = this._stickyScrollWidget.getRenderedStickyLine(line);\n      const foldingIcon = stickyLine?.foldingIcon;\n      if (!foldingIcon) {\n        return;\n      }\n      toggleCollapseState(this._foldingModel, Number.MAX_VALUE, [line]);\n      foldingIcon.isCollapsed = !foldingIcon.isCollapsed;\n      const scrollTop = (foldingIcon.isCollapsed ? this._editor.getTopForLineNumber(foldingIcon.foldingEndLine) : this._editor.getTopForLineNumber(foldingIcon.foldingStartLine)) - this._editor.getOption(67 /* EditorOption.lineHeight */) * stickyLine.index + 1;\n      this._editor.setScrollTop(scrollTop);\n      this._renderStickyScroll(line);\n    }\n    _readConfiguration() {\n      const options = this._editor.getOption(116 /* EditorOption.stickyScroll */);\n      if (options.enabled === false) {\n        this._editor.removeOverlayWidget(this._stickyScrollWidget);\n        this._sessionStore.clear();\n        this._enabled = false;\n        return;\n      } else if (options.enabled && !this._enabled) {\n        // When sticky scroll was just enabled, add the listeners on the sticky scroll\n        this._editor.addOverlayWidget(this._stickyScrollWidget);\n        this._sessionStore.add(this._editor.onDidScrollChange(e => {\n          if (e.scrollTopChanged) {\n            this._showEndForLine = undefined;\n            this._renderStickyScroll();\n          }\n        }));\n        this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n        this._sessionStore.add(this._editor.onDidChangeModelTokens(e => this._onTokensChange(e)));\n        this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => {\n          this._showEndForLine = undefined;\n          this._renderStickyScroll();\n        }));\n        this._enabled = true;\n      }\n      const lineNumberOption = this._editor.getOption(68 /* EditorOption.lineNumbers */);\n      if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n        this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => {\n          this._showEndForLine = undefined;\n          this._renderStickyScroll(0);\n        }));\n      }\n    }\n    _readConfigurationChange(event) {\n      if (event.hasChanged(116 /* EditorOption.stickyScroll */) || event.hasChanged(73 /* EditorOption.minimap */) || event.hasChanged(67 /* EditorOption.lineHeight */) || event.hasChanged(111 /* EditorOption.showFoldingControls */) || event.hasChanged(68 /* EditorOption.lineNumbers */)) {\n        this._readConfiguration();\n      }\n      if (event.hasChanged(68 /* EditorOption.lineNumbers */)) {\n        this._renderStickyScroll(0);\n      }\n    }\n    _needsUpdate(event) {\n      const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n      for (const stickyLineNumber of stickyLineNumbers) {\n        for (const range of event.ranges) {\n          if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n    _onTokensChange(event) {\n      if (this._needsUpdate(event)) {\n        // Rebuilding the whole widget from line 0\n        this._renderStickyScroll(0);\n      }\n    }\n    _onDidResize() {\n      const layoutInfo = this._editor.getLayoutInfo();\n      // Make sure sticky scroll doesn't take up more than 25% of the editor\n      const theoreticalLines = layoutInfo.height / this._editor.getOption(67 /* EditorOption.lineHeight */);\n      this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    async _renderStickyScroll(rebuildFromLine) {\n      const model = this._editor.getModel();\n      if (!model || model.isTooLargeForTokenization()) {\n        this._resetState();\n        return;\n      }\n      const nextRebuildFromLine = this._updateAndGetMinRebuildFromLine(rebuildFromLine);\n      const stickyWidgetVersion = this._stickyLineCandidateProvider.getVersionId();\n      const shouldUpdateState = stickyWidgetVersion === undefined || stickyWidgetVersion === model.getVersionId();\n      if (shouldUpdateState) {\n        if (!this._focused) {\n          await this._updateState(nextRebuildFromLine);\n        } else {\n          // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\n          if (this._focusedStickyElementIndex === -1) {\n            await this._updateState(nextRebuildFromLine);\n            this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n            if (this._focusedStickyElementIndex !== -1) {\n              this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n            }\n          } else {\n            const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\n            await this._updateState(nextRebuildFromLine);\n            // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\n            if (this._stickyScrollWidget.lineNumberCount === 0) {\n              this._focusedStickyElementIndex = -1;\n            } else {\n              const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\n              // If the line number is still there, do not change anything\n              // If the line number is not there, set the new focused line to be the last line\n              if (!previousFocusedLineNumberExists) {\n                this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n              }\n              this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n            }\n          }\n        }\n      }\n    }\n    _updateAndGetMinRebuildFromLine(rebuildFromLine) {\n      if (rebuildFromLine !== undefined) {\n        const minRebuildFromLineOrInfinity = this._minRebuildFromLine !== undefined ? this._minRebuildFromLine : Infinity;\n        this._minRebuildFromLine = Math.min(rebuildFromLine, minRebuildFromLineOrInfinity);\n      }\n      return this._minRebuildFromLine;\n    }\n    async _updateState(rebuildFromLine) {\n      this._minRebuildFromLine = undefined;\n      this._foldingModel = (await FoldingController.get(this._editor)?.getFoldingModel()) ?? undefined;\n      this._widgetState = this.findScrollWidgetState();\n      const stickyWidgetHasLines = this._widgetState.startLineNumbers.length > 0;\n      this._stickyScrollVisibleContextKey.set(stickyWidgetHasLines);\n      this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\n    }\n    async _resetState() {\n      this._minRebuildFromLine = undefined;\n      this._foldingModel = undefined;\n      this._widgetState = StickyScrollWidgetState.Empty;\n      this._stickyScrollVisibleContextKey.set(false);\n      this._stickyScrollWidget.setState(undefined, undefined);\n    }\n    findScrollWidgetState() {\n      const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(116 /* EditorOption.stickyScroll */).maxLineCount);\n      const scrollTop = this._editor.getScrollTop();\n      let lastLineRelativePosition = 0;\n      const startLineNumbers = [];\n      const endLineNumbers = [];\n      const arrayVisibleRanges = this._editor.getVisibleRanges();\n      if (arrayVisibleRanges.length !== 0) {\n        const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n        const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n        for (const range of candidateRanges) {\n          const start = range.startLineNumber;\n          const end = range.endLineNumber;\n          const depth = range.nestingDepth;\n          if (end - start > 0) {\n            const topOfElementAtDepth = (depth - 1) * lineHeight;\n            const bottomOfElementAtDepth = depth * lineHeight;\n            const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n            const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n            const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n            if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n              startLineNumbers.push(start);\n              endLineNumbers.push(end + 1);\n              lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n              break;\n            } else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n              startLineNumbers.push(start);\n              endLineNumbers.push(end + 1);\n            }\n            if (startLineNumbers.length === maxNumberStickyLines) {\n              break;\n            }\n          }\n        }\n      }\n      this._endLineNumbers = endLineNumbers;\n      return new StickyScrollWidgetState(startLineNumbers, endLineNumbers, lastLineRelativePosition, this._showEndForLine);\n    }\n    dispose() {\n      super.dispose();\n      this._sessionStore.dispose();\n    }\n  };\n  return StickyScrollController;\n})();\nStickyScrollController = StickyScrollController_1 = __decorate([__param(1, IContextMenuService), __param(2, ILanguageFeaturesService), __param(3, IInstantiationService), __param(4, ILanguageConfigurationService), __param(5, ILanguageFeatureDebounceService), __param(6, IContextKeyService)], StickyScrollController);\nexport { StickyScrollController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './stickyScroll.css';\nimport { getColumnOfNodeOffset } from '../../../browser/viewParts/lines/viewLine.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { Position } from '../../../common/core/position.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { foldingCollapsedIcon, foldingExpandedIcon } from '../../folding/browser/foldingDecorations.js';\nexport class StickyScrollWidgetState {\n  constructor(startLineNumbers, endLineNumbers, lastLineRelativePosition, showEndForLine = null) {\n    this.startLineNumbers = startLineNumbers;\n    this.endLineNumbers = endLineNumbers;\n    this.lastLineRelativePosition = lastLineRelativePosition;\n    this.showEndForLine = showEndForLine;\n  }\n  equals(other) {\n    return !!other && this.lastLineRelativePosition === other.lastLineRelativePosition && this.showEndForLine === other.showEndForLine && equals(this.startLineNumbers, other.startLineNumbers) && equals(this.endLineNumbers, other.endLineNumbers);\n  }\n  static get Empty() {\n    return new StickyScrollWidgetState([], [], 0);\n  }\n}\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', {\n  createHTML: value => value\n});\nconst STICKY_INDEX_ATTR = 'data-sticky-line-index';\nconst STICKY_IS_LINE_ATTR = 'data-sticky-is-line';\nconst STICKY_IS_LINE_NUMBER_ATTR = 'data-sticky-is-line-number';\nconst STICKY_IS_FOLDING_ICON_ATTR = 'data-sticky-is-folding-icon';\nexport class StickyScrollWidget extends Disposable {\n  constructor(_editor) {\n    super();\n    this._editor = _editor;\n    this._foldingIconStore = new DisposableStore();\n    this._rootDomNode = document.createElement('div');\n    this._lineNumbersDomNode = document.createElement('div');\n    this._linesDomNodeScrollable = document.createElement('div');\n    this._linesDomNode = document.createElement('div');\n    this._lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n    this._renderedStickyLines = [];\n    this._lineNumbers = [];\n    this._lastLineRelativePosition = 0;\n    this._minContentWidthInPx = 0;\n    this._isOnGlyphMargin = false;\n    this._lineNumbersDomNode.className = 'sticky-widget-line-numbers';\n    this._lineNumbersDomNode.setAttribute('role', 'none');\n    this._linesDomNode.className = 'sticky-widget-lines';\n    this._linesDomNode.setAttribute('role', 'list');\n    this._linesDomNodeScrollable.className = 'sticky-widget-lines-scrollable';\n    this._linesDomNodeScrollable.appendChild(this._linesDomNode);\n    this._rootDomNode.className = 'sticky-widget';\n    this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n    this._rootDomNode.appendChild(this._lineNumbersDomNode);\n    this._rootDomNode.appendChild(this._linesDomNodeScrollable);\n    const updateScrollLeftPosition = () => {\n      this._linesDomNode.style.left = this._editor.getOption(116 /* EditorOption.stickyScroll */).scrollWithEditor ? `-${this._editor.getScrollLeft()}px` : '0px';\n    };\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(116 /* EditorOption.stickyScroll */)) {\n        updateScrollLeftPosition();\n      }\n      if (e.hasChanged(67 /* EditorOption.lineHeight */)) {\n        this._lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      }\n    }));\n    this._register(this._editor.onDidScrollChange(e => {\n      if (e.scrollLeftChanged) {\n        updateScrollLeftPosition();\n      }\n      if (e.scrollWidthChanged) {\n        this._updateWidgetWidth();\n      }\n    }));\n    this._register(this._editor.onDidChangeModel(() => {\n      updateScrollLeftPosition();\n      this._updateWidgetWidth();\n    }));\n    this._register(this._foldingIconStore);\n    updateScrollLeftPosition();\n    this._register(this._editor.onDidLayoutChange(e => {\n      this._updateWidgetWidth();\n    }));\n    this._updateWidgetWidth();\n  }\n  get lineNumbers() {\n    return this._lineNumbers;\n  }\n  get lineNumberCount() {\n    return this._lineNumbers.length;\n  }\n  getRenderedStickyLine(lineNumber) {\n    return this._renderedStickyLines.find(stickyLine => stickyLine.lineNumber === lineNumber);\n  }\n  getCurrentLines() {\n    return this._lineNumbers;\n  }\n  setState(_state, foldingModel, _rebuildFromLine) {\n    if (_rebuildFromLine === undefined && (!this._previousState && !_state || this._previousState && this._previousState.equals(_state))) {\n      return;\n    }\n    const isWidgetHeightZero = this._isWidgetHeightZero(_state);\n    const state = isWidgetHeightZero ? undefined : _state;\n    const rebuildFromLine = isWidgetHeightZero ? 0 : this._findLineToRebuildWidgetFrom(_state, _rebuildFromLine);\n    this._renderRootNode(state, foldingModel, rebuildFromLine);\n    this._previousState = _state;\n  }\n  _isWidgetHeightZero(state) {\n    if (!state) {\n      return true;\n    }\n    const futureWidgetHeight = state.startLineNumbers.length * this._lineHeight + state.lastLineRelativePosition;\n    if (futureWidgetHeight > 0) {\n      this._lastLineRelativePosition = state.lastLineRelativePosition;\n      const lineNumbers = [...state.startLineNumbers];\n      if (state.showEndForLine !== null) {\n        lineNumbers[state.showEndForLine] = state.endLineNumbers[state.showEndForLine];\n      }\n      this._lineNumbers = lineNumbers;\n    } else {\n      this._lastLineRelativePosition = 0;\n      this._lineNumbers = [];\n    }\n    return futureWidgetHeight === 0;\n  }\n  _findLineToRebuildWidgetFrom(state, _rebuildFromLine) {\n    if (!state || !this._previousState) {\n      return 0;\n    }\n    if (_rebuildFromLine !== undefined) {\n      return _rebuildFromLine;\n    }\n    const previousState = this._previousState;\n    const indexOfLinesAlreadyRendered = state.startLineNumbers.findIndex(startLineNumber => !previousState.startLineNumbers.includes(startLineNumber));\n    return indexOfLinesAlreadyRendered === -1 ? 0 : indexOfLinesAlreadyRendered;\n  }\n  _updateWidgetWidth() {\n    const layoutInfo = this._editor.getLayoutInfo();\n    const lineNumbersWidth = layoutInfo.contentLeft;\n    this._lineNumbersDomNode.style.width = `${lineNumbersWidth}px`;\n    this._linesDomNodeScrollable.style.setProperty('--vscode-editorStickyScroll-scrollableWidth', `${this._editor.getScrollWidth() - layoutInfo.verticalScrollbarWidth}px`);\n    this._rootDomNode.style.width = `${layoutInfo.width - layoutInfo.verticalScrollbarWidth}px`;\n  }\n  _clearStickyLinesFromLine(clearFromLine) {\n    this._foldingIconStore.clear();\n    // Removing only the lines that need to be rerendered\n    for (let i = clearFromLine; i < this._renderedStickyLines.length; i++) {\n      const stickyLine = this._renderedStickyLines[i];\n      stickyLine.lineNumberDomNode.remove();\n      stickyLine.lineDomNode.remove();\n    }\n    // Keep the lines that need to be updated\n    this._renderedStickyLines = this._renderedStickyLines.slice(0, clearFromLine);\n    this._rootDomNode.style.display = 'none';\n  }\n  _useFoldingOpacityTransition(requireTransitions) {\n    this._lineNumbersDomNode.style.setProperty('--vscode-editorStickyScroll-foldingOpacityTransition', `opacity ${requireTransitions ? 0.5 : 0}s`);\n  }\n  _setFoldingIconsVisibility(allVisible) {\n    for (const line of this._renderedStickyLines) {\n      const foldingIcon = line.foldingIcon;\n      if (!foldingIcon) {\n        continue;\n      }\n      foldingIcon.setVisible(allVisible ? true : foldingIcon.isCollapsed);\n    }\n  }\n  async _renderRootNode(state, foldingModel, rebuildFromLine) {\n    this._clearStickyLinesFromLine(rebuildFromLine);\n    if (!state) {\n      return;\n    }\n    // For existing sticky lines update the top and z-index\n    for (const stickyLine of this._renderedStickyLines) {\n      this._updateTopAndZIndexOfStickyLine(stickyLine);\n    }\n    // For new sticky lines\n    const layoutInfo = this._editor.getLayoutInfo();\n    const linesToRender = this._lineNumbers.slice(rebuildFromLine);\n    for (const [index, line] of linesToRender.entries()) {\n      const stickyLine = this._renderChildNode(index + rebuildFromLine, line, foldingModel, layoutInfo);\n      if (!stickyLine) {\n        continue;\n      }\n      this._linesDomNode.appendChild(stickyLine.lineDomNode);\n      this._lineNumbersDomNode.appendChild(stickyLine.lineNumberDomNode);\n      this._renderedStickyLines.push(stickyLine);\n    }\n    if (foldingModel) {\n      this._setFoldingHoverListeners();\n      this._useFoldingOpacityTransition(!this._isOnGlyphMargin);\n    }\n    const widgetHeight = this._lineNumbers.length * this._lineHeight + this._lastLineRelativePosition;\n    this._rootDomNode.style.display = 'block';\n    this._lineNumbersDomNode.style.height = `${widgetHeight}px`;\n    this._linesDomNodeScrollable.style.height = `${widgetHeight}px`;\n    this._rootDomNode.style.height = `${widgetHeight}px`;\n    this._rootDomNode.style.marginLeft = '0px';\n    this._minContentWidthInPx = Math.max(...this._renderedStickyLines.map(l => l.scrollWidth)) + layoutInfo.verticalScrollbarWidth;\n    this._editor.layoutOverlayWidget(this);\n  }\n  _setFoldingHoverListeners() {\n    const showFoldingControls = this._editor.getOption(111 /* EditorOption.showFoldingControls */);\n    if (showFoldingControls !== 'mouseover') {\n      return;\n    }\n    this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_ENTER, () => {\n      this._isOnGlyphMargin = true;\n      this._setFoldingIconsVisibility(true);\n    }));\n    this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_LEAVE, () => {\n      this._isOnGlyphMargin = false;\n      this._useFoldingOpacityTransition(true);\n      this._setFoldingIconsVisibility(false);\n    }));\n  }\n  _renderChildNode(index, line, foldingModel, layoutInfo) {\n    const viewModel = this._editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n    const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n    const lineNumberOption = this._editor.getOption(68 /* EditorOption.lineNumbers */);\n    let actualInlineDecorations;\n    try {\n      actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n    } catch (err) {\n      actualInlineDecorations = [];\n    }\n    const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n    const sb = new StringBuilder(2000);\n    const renderOutput = renderViewLine(renderLineInput, sb);\n    let newLine;\n    if (_ttPolicy) {\n      newLine = _ttPolicy.createHTML(sb.build());\n    } else {\n      newLine = sb.build();\n    }\n    const lineHTMLNode = document.createElement('span');\n    lineHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\n    lineHTMLNode.setAttribute(STICKY_IS_LINE_ATTR, '');\n    lineHTMLNode.setAttribute('role', 'listitem');\n    lineHTMLNode.tabIndex = 0;\n    lineHTMLNode.className = 'sticky-line-content';\n    lineHTMLNode.classList.add(`stickyLine${line}`);\n    lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n    lineHTMLNode.innerHTML = newLine;\n    const lineNumberHTMLNode = document.createElement('span');\n    lineNumberHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\n    lineNumberHTMLNode.setAttribute(STICKY_IS_LINE_NUMBER_ATTR, '');\n    lineNumberHTMLNode.className = 'sticky-line-number';\n    lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n    const lineNumbersWidth = layoutInfo.contentLeft;\n    lineNumberHTMLNode.style.width = `${lineNumbersWidth}px`;\n    const innerLineNumberHTML = document.createElement('span');\n    if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n      innerLineNumberHTML.innerText = line.toString();\n    } else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n      innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n    }\n    innerLineNumberHTML.className = 'sticky-line-number-inner';\n    innerLineNumberHTML.style.lineHeight = `${this._lineHeight}px`;\n    innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n    innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n    lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n    const foldingIcon = this._renderFoldingIconForLine(foldingModel, line);\n    if (foldingIcon) {\n      lineNumberHTMLNode.appendChild(foldingIcon.domNode);\n    }\n    this._editor.applyFontInfo(lineHTMLNode);\n    this._editor.applyFontInfo(innerLineNumberHTML);\n    lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n    lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n    lineNumberHTMLNode.style.height = `${this._lineHeight}px`;\n    lineHTMLNode.style.height = `${this._lineHeight}px`;\n    const renderedLine = new RenderedStickyLine(index, line, lineHTMLNode, lineNumberHTMLNode, foldingIcon, renderOutput.characterMapping, lineHTMLNode.scrollWidth);\n    return this._updateTopAndZIndexOfStickyLine(renderedLine);\n  }\n  _updateTopAndZIndexOfStickyLine(stickyLine) {\n    const index = stickyLine.index;\n    const lineHTMLNode = stickyLine.lineDomNode;\n    const lineNumberHTMLNode = stickyLine.lineNumberDomNode;\n    const isLastLine = index === this._lineNumbers.length - 1;\n    const lastLineZIndex = '0';\n    const intermediateLineZIndex = '1';\n    lineHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n    lineNumberHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n    const lastLineTop = `${index * this._lineHeight + this._lastLineRelativePosition + (stickyLine.foldingIcon?.isCollapsed ? 1 : 0)}px`;\n    const intermediateLineTop = `${index * this._lineHeight}px`;\n    lineHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n    lineNumberHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n    return stickyLine;\n  }\n  _renderFoldingIconForLine(foldingModel, line) {\n    const showFoldingControls = this._editor.getOption(111 /* EditorOption.showFoldingControls */);\n    if (!foldingModel || showFoldingControls === 'never') {\n      return;\n    }\n    const foldingRegions = foldingModel.regions;\n    const indexOfFoldingRegion = foldingRegions.findRange(line);\n    const startLineNumber = foldingRegions.getStartLineNumber(indexOfFoldingRegion);\n    const isFoldingScope = line === startLineNumber;\n    if (!isFoldingScope) {\n      return;\n    }\n    const isCollapsed = foldingRegions.isCollapsed(indexOfFoldingRegion);\n    const foldingIcon = new StickyFoldingIcon(isCollapsed, startLineNumber, foldingRegions.getEndLineNumber(indexOfFoldingRegion), this._lineHeight);\n    foldingIcon.setVisible(this._isOnGlyphMargin ? true : isCollapsed || showFoldingControls === 'always');\n    foldingIcon.domNode.setAttribute(STICKY_IS_FOLDING_ICON_ATTR, '');\n    return foldingIcon;\n  }\n  getId() {\n    return 'editor.contrib.stickyScrollWidget';\n  }\n  getDomNode() {\n    return this._rootDomNode;\n  }\n  getPosition() {\n    return {\n      preference: 2 /* OverlayWidgetPositionPreference.TOP_CENTER */,\n      stackOridinal: 10\n    };\n  }\n  getMinContentWidthInPx() {\n    return this._minContentWidthInPx;\n  }\n  focusLineWithIndex(index) {\n    if (0 <= index && index < this._renderedStickyLines.length) {\n      this._renderedStickyLines[index].lineDomNode.focus();\n    }\n  }\n  /**\n   * Given a leaf dom node, tries to find the editor position.\n   */\n  getEditorPositionFromNode(spanDomNode) {\n    if (!spanDomNode || spanDomNode.children.length > 0) {\n      // This is not a leaf node\n      return null;\n    }\n    const renderedStickyLine = this._getRenderedStickyLineFromChildDomNode(spanDomNode);\n    if (!renderedStickyLine) {\n      return null;\n    }\n    const column = getColumnOfNodeOffset(renderedStickyLine.characterMapping, spanDomNode, 0);\n    return new Position(renderedStickyLine.lineNumber, column);\n  }\n  getLineNumberFromChildDomNode(domNode) {\n    return this._getRenderedStickyLineFromChildDomNode(domNode)?.lineNumber ?? null;\n  }\n  _getRenderedStickyLineFromChildDomNode(domNode) {\n    const index = this.getLineIndexFromChildDomNode(domNode);\n    if (index === null || index < 0 || index >= this._renderedStickyLines.length) {\n      return null;\n    }\n    return this._renderedStickyLines[index];\n  }\n  /**\n   * Given a child dom node, tries to find the line number attribute that was stored in the node.\n   * @returns the attribute value or null if none is found.\n   */\n  getLineIndexFromChildDomNode(domNode) {\n    const lineIndex = this._getAttributeValue(domNode, STICKY_INDEX_ATTR);\n    return lineIndex ? parseInt(lineIndex, 10) : null;\n  }\n  /**\n   * Given a child dom node, tries to find if it is (contained in) a sticky line.\n   * @returns a boolean.\n   */\n  isInStickyLine(domNode) {\n    const isInLine = this._getAttributeValue(domNode, STICKY_IS_LINE_ATTR);\n    return isInLine !== undefined;\n  }\n  /**\n   * Given a child dom node, tries to find if this dom node is (contained in) a sticky folding icon.\n   * @returns a boolean.\n   */\n  isInFoldingIconDomNode(domNode) {\n    const isInFoldingIcon = this._getAttributeValue(domNode, STICKY_IS_FOLDING_ICON_ATTR);\n    return isInFoldingIcon !== undefined;\n  }\n  /**\n   * Given the dom node, finds if it or its parent sequence contains the given attribute.\n   * @returns the attribute value or undefined.\n   */\n  _getAttributeValue(domNode, attribute) {\n    while (domNode && domNode !== this._rootDomNode) {\n      const line = domNode.getAttribute(attribute);\n      if (line !== null) {\n        return line;\n      }\n      domNode = domNode.parentElement;\n    }\n    return;\n  }\n}\nclass RenderedStickyLine {\n  constructor(index, lineNumber, lineDomNode, lineNumberDomNode, foldingIcon, characterMapping, scrollWidth) {\n    this.index = index;\n    this.lineNumber = lineNumber;\n    this.lineDomNode = lineDomNode;\n    this.lineNumberDomNode = lineNumberDomNode;\n    this.foldingIcon = foldingIcon;\n    this.characterMapping = characterMapping;\n    this.scrollWidth = scrollWidth;\n  }\n}\nclass StickyFoldingIcon {\n  constructor(isCollapsed, foldingStartLine, foldingEndLine, dimension) {\n    this.isCollapsed = isCollapsed;\n    this.foldingStartLine = foldingStartLine;\n    this.foldingEndLine = foldingEndLine;\n    this.dimension = dimension;\n    this.domNode = document.createElement('div');\n    this.domNode.style.width = `${dimension}px`;\n    this.domNode.style.height = `${dimension}px`;\n    this.domNode.className = ThemeIcon.asClassName(isCollapsed ? foldingCollapsedIcon : foldingExpandedIcon);\n  }\n  setVisible(visible) {\n    this.domNode.style.cursor = visible ? 'pointer' : 'default';\n    this.domNode.style.opacity = visible ? '1' : '0';\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\nexport class StickyLineCandidate {\n  constructor(startLineNumber, endLineNumber, nestingDepth) {\n    this.startLineNumber = startLineNumber;\n    this.endLineNumber = endLineNumber;\n    this.nestingDepth = nestingDepth;\n  }\n}\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n  constructor(editor, _languageFeaturesService, _languageConfigurationService) {\n    super();\n    this._languageFeaturesService = _languageFeaturesService;\n    this._languageConfigurationService = _languageConfigurationService;\n    this._onDidChangeStickyScroll = this._register(new Emitter());\n    this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n    this._model = null;\n    this._cts = null;\n    this._stickyModelProvider = null;\n    this._editor = editor;\n    this._sessionStore = this._register(new DisposableStore());\n    this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(116 /* EditorOption.stickyScroll */)) {\n        this.readConfiguration();\n      }\n    }));\n    this.readConfiguration();\n  }\n  readConfiguration() {\n    this._sessionStore.clear();\n    const options = this._editor.getOption(116 /* EditorOption.stickyScroll */);\n    if (!options.enabled) {\n      return;\n    }\n    this._sessionStore.add(this._editor.onDidChangeModel(() => {\n      // We should not show an old model for a different file, it will always be wrong.\n      // So we clear the model here immediately and then trigger an update.\n      this._model = null;\n      this.updateStickyModelProvider();\n      this._onDidChangeStickyScroll.fire();\n      this.update();\n    }));\n    this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n    this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n    this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\n    this._sessionStore.add(toDisposable(() => {\n      this._stickyModelProvider?.dispose();\n      this._stickyModelProvider = null;\n    }));\n    this.updateStickyModelProvider();\n    this.update();\n  }\n  getVersionId() {\n    return this._model?.version;\n  }\n  updateStickyModelProvider() {\n    this._stickyModelProvider?.dispose();\n    this._stickyModelProvider = null;\n    const editor = this._editor;\n    if (editor.hasModel()) {\n      this._stickyModelProvider = new StickyModelProvider(editor, () => this._updateSoon.schedule(), this._languageConfigurationService, this._languageFeaturesService);\n    }\n  }\n  async update() {\n    this._cts?.dispose(true);\n    this._cts = new CancellationTokenSource();\n    await this.updateStickyModel(this._cts.token);\n    this._onDidChangeStickyScroll.fire();\n  }\n  async updateStickyModel(token) {\n    if (!this._editor.hasModel() || !this._stickyModelProvider || this._editor.getModel().isTooLargeForTokenization()) {\n      this._model = null;\n      return;\n    }\n    const model = await this._stickyModelProvider.update(token);\n    if (token.isCancellationRequested) {\n      // the computation was canceled, so do not overwrite the model\n      return;\n    }\n    this._model = model;\n  }\n  updateIndex(index) {\n    if (index === -1) {\n      index = 0;\n    } else if (index < 0) {\n      index = -index - 2;\n    }\n    return index;\n  }\n  getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\n    if (outlineModel.children.length === 0) {\n      return;\n    }\n    let lastLine = lastStartLineNumber;\n    const childrenStartLines = [];\n    for (let i = 0; i < outlineModel.children.length; i++) {\n      const child = outlineModel.children[i];\n      if (child.range) {\n        childrenStartLines.push(child.range.startLineNumber);\n      }\n    }\n    const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => {\n      return a - b;\n    }));\n    const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => {\n      return a - b;\n    }));\n    for (let i = lowerBound; i <= upperBound; i++) {\n      const child = outlineModel.children[i];\n      if (!child) {\n        return;\n      }\n      if (child.range) {\n        const childStartLine = child.range.startLineNumber;\n        const childEndLine = child.range.endLineNumber;\n        if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n          lastLine = childStartLine;\n          result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n          this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\n        }\n      } else {\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\n      }\n    }\n  }\n  getCandidateStickyLinesIntersecting(range) {\n    if (!this._model?.element) {\n      return [];\n    }\n    let stickyLineCandidates = [];\n    this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\n    const hiddenRanges = this._editor._getViewModel()?.getHiddenAreas();\n    if (hiddenRanges) {\n      for (const hiddenRange of hiddenRanges) {\n        stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n      }\n    }\n    return stickyLineCandidates;\n  }\n};\nStickyLineCandidateProvider = __decorate([__param(1, ILanguageFeaturesService), __param(2, ILanguageConfigurationService)], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nvar ModelProvider = /*#__PURE__*/function (ModelProvider) {\n  ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\n  ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\n  ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\n  return ModelProvider;\n}(ModelProvider || {});\nvar Status = /*#__PURE__*/function (Status) {\n  Status[Status[\"VALID\"] = 0] = \"VALID\";\n  Status[Status[\"INVALID\"] = 1] = \"INVALID\";\n  Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\n  return Status;\n}(Status || {});\nlet StickyModelProvider = class StickyModelProvider extends Disposable {\n  constructor(_editor, onProviderUpdate, _languageConfigurationService, _languageFeaturesService) {\n    super();\n    this._editor = _editor;\n    this._modelProviders = [];\n    this._modelPromise = null;\n    this._updateScheduler = this._register(new Delayer(300));\n    this._updateOperation = this._register(new DisposableStore());\n    switch (this._editor.getOption(116 /* EditorOption.stickyScroll */).defaultModel) {\n      case ModelProvider.OUTLINE_MODEL:\n        this._modelProviders.push(new StickyModelFromCandidateOutlineProvider(this._editor, _languageFeaturesService));\n      // fall through\n      case ModelProvider.FOLDING_PROVIDER_MODEL:\n        this._modelProviders.push(new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, onProviderUpdate, _languageFeaturesService));\n      // fall through\n      case ModelProvider.INDENTATION_MODEL:\n        this._modelProviders.push(new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService));\n        break;\n    }\n  }\n  dispose() {\n    this._modelProviders.forEach(provider => provider.dispose());\n    this._updateOperation.clear();\n    this._cancelModelPromise();\n    super.dispose();\n  }\n  _cancelModelPromise() {\n    if (this._modelPromise) {\n      this._modelPromise.cancel();\n      this._modelPromise = null;\n    }\n  }\n  async update(token) {\n    this._updateOperation.clear();\n    this._updateOperation.add({\n      dispose: () => {\n        this._cancelModelPromise();\n        this._updateScheduler.cancel();\n      }\n    });\n    this._cancelModelPromise();\n    return await this._updateScheduler.trigger(async () => {\n      for (const modelProvider of this._modelProviders) {\n        const {\n          statusPromise,\n          modelPromise\n        } = modelProvider.computeStickyModel(token);\n        this._modelPromise = modelPromise;\n        const status = await statusPromise;\n        if (this._modelPromise !== modelPromise) {\n          return null;\n        }\n        switch (status) {\n          case Status.CANCELED:\n            this._updateOperation.clear();\n            return null;\n          case Status.VALID:\n            return modelProvider.stickyModel;\n        }\n      }\n      return null;\n    }).catch(error => {\n      onUnexpectedError(error);\n      return null;\n    });\n  }\n};\nStickyModelProvider = __decorate([__param(2, IInstantiationService), __param(3, ILanguageFeaturesService)], StickyModelProvider);\nexport { StickyModelProvider };\nclass StickyModelCandidateProvider extends Disposable {\n  constructor(_editor) {\n    super();\n    this._editor = _editor;\n    this._stickyModel = null;\n  }\n  get stickyModel() {\n    return this._stickyModel;\n  }\n  _invalid() {\n    this._stickyModel = null;\n    return Status.INVALID;\n  }\n  computeStickyModel(token) {\n    if (token.isCancellationRequested || !this.isProviderValid()) {\n      return {\n        statusPromise: this._invalid(),\n        modelPromise: null\n      };\n    }\n    const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(token));\n    return {\n      statusPromise: providerModelPromise.then(providerModel => {\n        if (!this.isModelValid(providerModel)) {\n          return this._invalid();\n        }\n        if (token.isCancellationRequested) {\n          return Status.CANCELED;\n        }\n        this._stickyModel = this.createStickyModel(token, providerModel);\n        return Status.VALID;\n      }).then(undefined, err => {\n        onUnexpectedError(err);\n        return Status.CANCELED;\n      }),\n      modelPromise: providerModelPromise\n    };\n  }\n  /**\n   * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\n   * This method by default returns true.\n   * @param model model returned by the provider\n   * @returns boolean indicating whether the model is valid\n   */\n  isModelValid(model) {\n    return true;\n  }\n  /**\n   * Method which checks whether the provider is valid before applying it to find the provider model.\n   * This method by default returns true.\n   * @returns boolean indicating whether the provider is valid\n   */\n  isProviderValid() {\n    return true;\n  }\n}\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\n  constructor(_editor, _languageFeaturesService) {\n    super(_editor);\n    this._languageFeaturesService = _languageFeaturesService;\n  }\n  createModelFromProvider(token) {\n    return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._editor.getModel(), token);\n  }\n  createStickyModel(token, model) {\n    const {\n      stickyOutlineElement,\n      providerID\n    } = this._stickyModelFromOutlineModel(model, this._stickyModel?.outlineProviderId);\n    const textModel = this._editor.getModel();\n    return new StickyModel(textModel.uri, textModel.getVersionId(), stickyOutlineElement, providerID);\n  }\n  isModelValid(model) {\n    return model && model.children.size > 0;\n  }\n  _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\n    let outlineElements;\n    // When several possible outline providers\n    if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n      const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n      if (provider) {\n        outlineElements = provider.children;\n      } else {\n        let tempID = '';\n        let maxTotalSumOfRanges = -1;\n        let optimalOutlineGroup = undefined;\n        for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n          const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\n          if (totalSumRanges > maxTotalSumOfRanges) {\n            optimalOutlineGroup = outlineGroup;\n            maxTotalSumOfRanges = totalSumRanges;\n            tempID = outlineGroup.id;\n          }\n        }\n        preferredProvider = tempID;\n        outlineElements = optimalOutlineGroup.children;\n      }\n    } else {\n      outlineElements = outlineModel.children;\n    }\n    const stickyChildren = [];\n    const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n      const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n      const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n      return this._comparator(range1, range2);\n    });\n    for (const outlineElement of outlineElementsArray) {\n      stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n    }\n    const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\n    return {\n      stickyOutlineElement: stickyOutlineElement,\n      providerID: preferredProvider\n    };\n  }\n  _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\n    const children = [];\n    for (const child of outlineElement.children.values()) {\n      if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n        if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n          children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n        } else {\n          for (const subchild of child.children.values()) {\n            children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n          }\n        }\n      }\n    }\n    children.sort((child1, child2) => this._comparator(child1.range, child2.range));\n    const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n    return new StickyElement(range, children, undefined);\n  }\n  _comparator(range1, range2) {\n    if (range1.startLineNumber !== range2.startLineNumber) {\n      return range1.startLineNumber - range2.startLineNumber;\n    } else {\n      return range2.endLineNumber - range1.endLineNumber;\n    }\n  }\n  _findSumOfRangesOfGroup(outline) {\n    let res = 0;\n    for (const child of outline.children.values()) {\n      res += this._findSumOfRangesOfGroup(child);\n    }\n    if (outline instanceof OutlineElement) {\n      return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n    } else {\n      return res;\n    }\n  }\n};\nStickyModelFromCandidateOutlineProvider = __decorate([__param(1, ILanguageFeaturesService)], StickyModelFromCandidateOutlineProvider);\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\n  constructor(editor) {\n    super(editor);\n    this._foldingLimitReporter = new RangesLimitReporter(editor);\n  }\n  createStickyModel(token, model) {\n    const foldingElement = this._fromFoldingRegions(model);\n    const textModel = this._editor.getModel();\n    return new StickyModel(textModel.uri, textModel.getVersionId(), foldingElement, undefined);\n  }\n  isModelValid(model) {\n    return model !== null;\n  }\n  _fromFoldingRegions(foldingRegions) {\n    const length = foldingRegions.length;\n    const orderedStickyElements = [];\n    // The root sticky outline element\n    const stickyOutlineElement = new StickyElement(undefined, [], undefined);\n    for (let i = 0; i < length; i++) {\n      // Finding the parent index of the current range\n      const parentIndex = foldingRegions.getParentIndex(i);\n      let parentNode;\n      if (parentIndex !== -1) {\n        // Access the reference of the parent node\n        parentNode = orderedStickyElements[parentIndex];\n      } else {\n        // In that case the parent node is the root node\n        parentNode = stickyOutlineElement;\n      }\n      const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\n      parentNode.children.push(child);\n      orderedStickyElements.push(child);\n    }\n    return stickyOutlineElement;\n  }\n}\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n  constructor(editor, _languageConfigurationService) {\n    super(editor);\n    this._languageConfigurationService = _languageConfigurationService;\n    this.provider = this._register(new IndentRangeProvider(editor.getModel(), this._languageConfigurationService, this._foldingLimitReporter));\n  }\n  async createModelFromProvider(token) {\n    return this.provider.compute(token);\n  }\n};\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([__param(1, ILanguageConfigurationService)], StickyModelFromCandidateIndentationFoldingProvider);\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n  constructor(editor, onProviderUpdate, _languageFeaturesService) {\n    super(editor);\n    this._languageFeaturesService = _languageFeaturesService;\n    const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, editor.getModel());\n    if (selectedProviders.length > 0) {\n      this.provider = this._register(new SyntaxRangeProvider(editor.getModel(), selectedProviders, onProviderUpdate, this._foldingLimitReporter, undefined));\n    }\n  }\n  isProviderValid() {\n    return this.provider !== undefined;\n  }\n  async createModelFromProvider(token) {\n    return this.provider?.compute(token) ?? null;\n  }\n};\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([__param(2, ILanguageFeaturesService)], StickyModelFromCandidateSyntaxFoldingProvider);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StickyRange {\n  constructor(startLineNumber, endLineNumber) {\n    this.startLineNumber = startLineNumber;\n    this.endLineNumber = endLineNumber;\n  }\n}\nexport class StickyElement {\n  constructor(\n  /**\n   * Range of line numbers spanned by the current scope\n   */\n  range,\n  /**\n   * Must be sorted by start line number\n  */\n  children,\n  /**\n   * Parent sticky outline element\n   */\n  parent) {\n    this.range = range;\n    this.children = children;\n    this.parent = parent;\n  }\n}\nexport class StickyModel {\n  constructor(uri, version, element, outlineProviderId) {\n    this.uri = uri;\n    this.version = version;\n    this.element = element;\n    this.outlineProviderId = outlineProviderId;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { Disposable, RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nclass SuggestInlineCompletion {\n  constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n    this.range = range;\n    this.insertText = insertText;\n    this.filterText = filterText;\n    this.additionalTextEdits = additionalTextEdits;\n    this.command = command;\n    this.completion = completion;\n  }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n  constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n    super(completions.disposable);\n    this.model = model;\n    this.line = line;\n    this.word = word;\n    this.completionModel = completionModel;\n    this._suggestMemoryService = _suggestMemoryService;\n  }\n  canBeReused(model, line, word) {\n    return this.model === model // same model\n    && this.line === line && this.word.word.length > 0 && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n    && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n  }\n  get items() {\n    const result = [];\n    // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n    // ranked items are before/after\n    const {\n      items\n    } = this.completionModel;\n    const selectedIndex = this._suggestMemoryService.select(this.model, {\n      lineNumber: this.line,\n      column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta\n    }, items);\n    const first = Iterable.slice(items, selectedIndex);\n    const second = Iterable.slice(items, 0, selectedIndex);\n    let resolveCount = 5;\n    for (const item of Iterable.concat(first, second)) {\n      if (item.score === FuzzyScore.Default) {\n        // skip items that have no overlap\n        continue;\n      }\n      const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n      );\n      const insertText = item.completion.insertTextRules && item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ ? {\n        snippet: item.completion.insertText\n      } : item.completion.insertText;\n      result.push(new SuggestInlineCompletion(range, insertText, item.filterTextLow ?? item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n      // resolve the first N suggestions eagerly\n      if (resolveCount-- >= 0) {\n        item.resolve(CancellationToken.None);\n      }\n    }\n    return result;\n  }\n};\nInlineCompletionResults = __decorate([__param(5, ISuggestMemoryService)], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions extends Disposable {\n  constructor(_languageFeatureService, _clipboardService, _suggestMemoryService, _editorService) {\n    super();\n    this._languageFeatureService = _languageFeatureService;\n    this._clipboardService = _clipboardService;\n    this._suggestMemoryService = _suggestMemoryService;\n    this._editorService = _editorService;\n    this._store.add(_languageFeatureService.inlineCompletionsProvider.register('*', this));\n  }\n  async provideInlineCompletions(model, position, context, token) {\n    if (context.selectedSuggestionInfo) {\n      return;\n    }\n    let editor;\n    for (const candidate of this._editorService.listCodeEditors()) {\n      if (candidate.getModel() === model) {\n        editor = candidate;\n        break;\n      }\n    }\n    if (!editor) {\n      return;\n    }\n    const config = editor.getOption(90 /* EditorOption.quickSuggestions */);\n    if (QuickSuggestionsOptions.isAllOff(config)) {\n      // quick suggest is off (for this model/language)\n      return;\n    }\n    model.tokenization.tokenizeIfCheap(position.lineNumber);\n    const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n    const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n    if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n      // quick suggest is off (for this token)\n      return undefined;\n    }\n    // We consider non-empty leading words and trigger characters. The latter only\n    // when no word is being typed (word characters superseed trigger characters)\n    let wordInfo = model.getWordAtPosition(position);\n    let triggerCharacterInfo;\n    if (!wordInfo?.word) {\n      triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n    }\n    if (!wordInfo?.word && !triggerCharacterInfo) {\n      // not at word, not a trigger character\n      return;\n    }\n    // ensure that we have word information and that we are at the end of a word\n    // otherwise we stop because we don't want to do quick suggestions inside words\n    if (!wordInfo) {\n      wordInfo = model.getWordUntilPosition(position);\n    }\n    if (wordInfo.endColumn !== position.column) {\n      return;\n    }\n    let result;\n    const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n    if (!triggerCharacterInfo && this._lastResult?.canBeReused(model, position.lineNumber, wordInfo)) {\n      // reuse a previous result iff possible, only a refilter is needed\n      // TODO@jrieken this can be improved further and only incomplete results can be updated\n      // console.log(`REUSE with ${wordInfo.word}`);\n      const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n      this._lastResult.completionModel.lineContext = newLineContext;\n      this._lastResult.acquire();\n      result = this._lastResult;\n    } else {\n      // refesh model is required\n      const completions = await provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, SuggestModel.createSuggestFilter(editor).itemKind, triggerCharacterInfo?.providers), triggerCharacterInfo && {\n        triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n        triggerCharacter: triggerCharacterInfo.ch\n      }, token);\n      let clipboardText;\n      if (completions.needsClipboard) {\n        clipboardText = await this._clipboardService.readText();\n      }\n      const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, editor.getOption(119 /* EditorOption.suggest */), editor.getOption(113 /* EditorOption.snippetSuggestions */), {\n        boostFullMatch: false,\n        firstMatchCanBeWeak: false\n      }, clipboardText);\n      result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n    }\n    this._lastResult = result;\n    return result;\n  }\n  handleItemDidShow(_completions, item) {\n    item.completion.resolve(CancellationToken.None);\n  }\n  freeInlineCompletions(result) {\n    result.release();\n  }\n  _getTriggerCharacterInfo(model, position) {\n    const ch = model.getValueInRange(Range.fromPositions({\n      lineNumber: position.lineNumber,\n      column: position.column - 1\n    }, position));\n    const providers = new Set();\n    for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n      if (provider.triggerCharacters?.includes(ch)) {\n        providers.add(provider);\n      }\n    }\n    if (providers.size === 0) {\n      return undefined;\n    }\n    return {\n      providers,\n      ch\n    };\n  }\n};\nSuggestInlineCompletions = __decorate([__param(0, ILanguageFeaturesService), __param(1, IClipboardService), __param(2, ISuggestMemoryService), __param(3, ICodeEditorService)], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nregisterEditorFeature(SuggestInlineCompletions);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.forceRetokenize',\n      label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n      alias: 'Developer: Force Retokenize',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    model.tokenization.resetTokenization();\n    const sw = new StopWatch();\n    model.tokenization.forceTokenization(model.getLineCount());\n    sw.stop();\n    console.log(`tokenization took ${sw.elapsed()}`);\n  }\n}\nregisterEditorAction(ForceRetokenizeAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nexport let ToggleTabFocusModeAction = /*#__PURE__*/(() => {\n  class ToggleTabFocusModeAction extends Action2 {\n    static {\n      this.ID = 'editor.action.toggleTabFocusMode';\n    }\n    constructor() {\n      super({\n        id: ToggleTabFocusModeAction.ID,\n        title: nls.localize2({\n          key: 'toggle.tabMovesFocus',\n          comment: ['Turn on/off use of tab key for moving focus around VS Code']\n        }, 'Toggle Tab Key Moves Focus'),\n        precondition: undefined,\n        keybinding: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n          mac: {\n            primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */\n          },\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        },\n        metadata: {\n          description: nls.localize2('tabMovesFocusDescriptions', \"Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.\")\n        },\n        f1: true\n      });\n    }\n    run() {\n      const oldValue = TabFocus.getTabFocusMode();\n      const newValue = !oldValue;\n      TabFocus.setTabFocusMode(newValue);\n      if (newValue) {\n        alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n      } else {\n        alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n      }\n    }\n  }\n  return ToggleTabFocusModeAction;\n})();\nregisterAction2(ToggleTabFocusModeAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters, isBasicASCII } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n  static {\n    this.ID = 'editor.contrib.unicodeHighlighter';\n  }\n  constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n    super();\n    this._editor = _editor;\n    this._editorWorkerService = _editorWorkerService;\n    this._workspaceTrustService = _workspaceTrustService;\n    this._highlighter = null;\n    this._bannerClosed = false;\n    this._updateState = state => {\n      if (state && state.hasMore) {\n        if (this._bannerClosed) {\n          return;\n        }\n        // This document contains many non-basic ASCII characters.\n        const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n        let data;\n        if (state.nonBasicAsciiCharacterCount >= max) {\n          data = {\n            message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n            command: new DisableHighlightingOfNonBasicAsciiCharactersAction()\n          };\n        } else if (state.ambiguousCharacterCount >= max) {\n          data = {\n            message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n            command: new DisableHighlightingOfAmbiguousCharactersAction()\n          };\n        } else if (state.invisibleCharacterCount >= max) {\n          data = {\n            message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n            command: new DisableHighlightingOfInvisibleCharactersAction()\n          };\n        } else {\n          throw new Error('Unreachable');\n        }\n        this._bannerController.show({\n          id: 'unicodeHighlightBanner',\n          message: data.message,\n          icon: warningIcon,\n          actions: [{\n            label: data.command.shortLabel,\n            href: `command:${data.command.id}`\n          }],\n          onClose: () => {\n            this._bannerClosed = true;\n          }\n        });\n      } else {\n        this._bannerController.hide();\n      }\n    };\n    this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n    this._register(this._editor.onDidChangeModel(() => {\n      this._bannerClosed = false;\n      this._updateHighlighter();\n    }));\n    this._options = _editor.getOption(126 /* EditorOption.unicodeHighlighting */);\n    this._register(_workspaceTrustService.onDidChangeTrust(e => {\n      this._updateHighlighter();\n    }));\n    this._register(_editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(126 /* EditorOption.unicodeHighlighting */)) {\n        this._options = _editor.getOption(126 /* EditorOption.unicodeHighlighting */);\n        this._updateHighlighter();\n      }\n    }));\n    this._updateHighlighter();\n  }\n  dispose() {\n    if (this._highlighter) {\n      this._highlighter.dispose();\n      this._highlighter = null;\n    }\n    super.dispose();\n  }\n  _updateHighlighter() {\n    this._updateState(null);\n    if (this._highlighter) {\n      this._highlighter.dispose();\n      this._highlighter = null;\n    }\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n    if ([options.nonBasicASCII, options.ambiguousCharacters, options.invisibleCharacters].every(option => option === false)) {\n      // Don't do anything if the feature is fully disabled\n      return;\n    }\n    const highlightOptions = {\n      nonBasicASCII: options.nonBasicASCII,\n      ambiguousCharacters: options.ambiguousCharacters,\n      invisibleCharacters: options.invisibleCharacters,\n      includeComments: options.includeComments,\n      includeStrings: options.includeStrings,\n      allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n      allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n        if (locale === '_os') {\n          const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n          return osLocale;\n        } else if (locale === '_vscode') {\n          return platform.language;\n        }\n        return locale;\n      })\n    };\n    if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n      this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n    } else {\n      this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n    }\n  }\n  getDecorationInfo(decoration) {\n    if (this._highlighter) {\n      return this._highlighter.getDecorationInfo(decoration);\n    }\n    return null;\n  }\n};\nUnicodeHighlighter = __decorate([__param(1, IEditorWorkerService), __param(2, IWorkspaceTrustManagementService), __param(3, IInstantiationService)], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n  return {\n    nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n    ambiguousCharacters: options.ambiguousCharacters,\n    invisibleCharacters: options.invisibleCharacters,\n    includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n    includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n    allowedCharacters: options.allowedCharacters,\n    allowedLocales: options.allowedLocales\n  };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n  constructor(_editor, _options, _updateState, _editorWorkerService) {\n    super();\n    this._editor = _editor;\n    this._options = _options;\n    this._updateState = _updateState;\n    this._editorWorkerService = _editorWorkerService;\n    this._model = this._editor.getModel();\n    this._decorations = this._editor.createDecorationsCollection();\n    this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n    this._register(this._editor.onDidChangeModelContent(() => {\n      this._updateSoon.schedule();\n    }));\n    this._updateSoon.schedule();\n  }\n  dispose() {\n    this._decorations.clear();\n    super.dispose();\n  }\n  _update() {\n    if (this._model.isDisposed()) {\n      return;\n    }\n    if (!this._model.mightContainNonBasicASCII()) {\n      this._decorations.clear();\n      return;\n    }\n    const modelVersionId = this._model.getVersionId();\n    this._editorWorkerService.computedUnicodeHighlights(this._model.uri, this._options).then(info => {\n      if (this._model.isDisposed()) {\n        return;\n      }\n      if (this._model.getVersionId() !== modelVersionId) {\n        // model changed in the meantime\n        return;\n      }\n      this._updateState(info);\n      const decorations = [];\n      if (!info.hasMore) {\n        // Don't show decoration if there are too many.\n        // In this case, a banner is shown.\n        for (const range of info.ranges) {\n          decorations.push({\n            range: range,\n            options: Decorations.instance.getDecorationFromOptions(this._options)\n          });\n        }\n      }\n      this._decorations.set(decorations);\n    });\n  }\n  getDecorationInfo(decoration) {\n    if (!this._decorations.has(decoration)) {\n      return null;\n    }\n    const model = this._editor.getModel();\n    if (!isModelDecorationVisible(model, decoration)) {\n      return null;\n    }\n    const text = model.getValueInRange(decoration.range);\n    return {\n      reason: computeReason(text, this._options),\n      inComment: isModelDecorationInComment(model, decoration),\n      inString: isModelDecorationInString(model, decoration)\n    };\n  }\n};\nDocumentUnicodeHighlighter = __decorate([__param(3, IEditorWorkerService)], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n  constructor(_editor, _options, _updateState) {\n    super();\n    this._editor = _editor;\n    this._options = _options;\n    this._updateState = _updateState;\n    this._model = this._editor.getModel();\n    this._decorations = this._editor.createDecorationsCollection();\n    this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n    this._register(this._editor.onDidLayoutChange(() => {\n      this._updateSoon.schedule();\n    }));\n    this._register(this._editor.onDidScrollChange(() => {\n      this._updateSoon.schedule();\n    }));\n    this._register(this._editor.onDidChangeHiddenAreas(() => {\n      this._updateSoon.schedule();\n    }));\n    this._register(this._editor.onDidChangeModelContent(() => {\n      this._updateSoon.schedule();\n    }));\n    this._updateSoon.schedule();\n  }\n  dispose() {\n    this._decorations.clear();\n    super.dispose();\n  }\n  _update() {\n    if (this._model.isDisposed()) {\n      return;\n    }\n    if (!this._model.mightContainNonBasicASCII()) {\n      this._decorations.clear();\n      return;\n    }\n    const ranges = this._editor.getVisibleRanges();\n    const decorations = [];\n    const totalResult = {\n      ranges: [],\n      ambiguousCharacterCount: 0,\n      invisibleCharacterCount: 0,\n      nonBasicAsciiCharacterCount: 0,\n      hasMore: false\n    };\n    for (const range of ranges) {\n      const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n      for (const r of result.ranges) {\n        totalResult.ranges.push(r);\n      }\n      totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n      totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n      totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n      totalResult.hasMore = totalResult.hasMore || result.hasMore;\n    }\n    if (!totalResult.hasMore) {\n      // Don't show decorations if there are too many.\n      // A banner will be shown instead.\n      for (const range of totalResult.ranges) {\n        decorations.push({\n          range,\n          options: Decorations.instance.getDecorationFromOptions(this._options)\n        });\n      }\n    }\n    this._updateState(totalResult);\n    this._decorations.set(decorations);\n  }\n  getDecorationInfo(decoration) {\n    if (!this._decorations.has(decoration)) {\n      return null;\n    }\n    const model = this._editor.getModel();\n    const text = model.getValueInRange(decoration.range);\n    if (!isModelDecorationVisible(model, decoration)) {\n      return null;\n    }\n    return {\n      reason: computeReason(text, this._options),\n      inComment: isModelDecorationInComment(model, decoration),\n      inString: isModelDecorationInString(model, decoration)\n    };\n  }\n}\nconst configureUnicodeHighlightOptionsStr = nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options');\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n  constructor(_editor, _languageService, _openerService) {\n    this._editor = _editor;\n    this._languageService = _languageService;\n    this._openerService = _openerService;\n    this.hoverOrdinal = 5;\n  }\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n      return [];\n    }\n    const model = this._editor.getModel();\n    const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n    if (!unicodeHighlighter) {\n      return [];\n    }\n    const result = [];\n    const existedReason = new Set();\n    let index = 300;\n    for (const d of lineDecorations) {\n      const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n      if (!highlightInfo) {\n        continue;\n      }\n      const char = model.getValueInRange(d.range);\n      // text refers to a single character.\n      const codePoint = char.codePointAt(0);\n      const codePointStr = formatCodePointMarkdown(codePoint);\n      let reason;\n      switch (highlightInfo.reason.kind) {\n        case 0 /* UnicodeHighlighterReasonKind.Ambiguous */:\n          {\n            if (isBasicASCII(highlightInfo.reason.confusableWith)) {\n              reason = nls.localize('unicodeHighlight.characterIsAmbiguousASCII', 'The character {0} could be confused with the ASCII character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n            } else {\n              reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n            }\n            break;\n          }\n        case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n          reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n          break;\n        case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n          reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n          break;\n      }\n      if (existedReason.has(reason)) {\n        continue;\n      }\n      existedReason.add(reason);\n      const adjustSettingsArgs = {\n        codePoint: codePoint,\n        reason: highlightInfo.reason,\n        inComment: highlightInfo.inComment,\n        inString: highlightInfo.inString\n      };\n      const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n      const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n      const markdown = new MarkdownString('', true).appendMarkdown(reason).appendText(' ').appendLink(uri, adjustSettings, configureUnicodeHighlightOptionsStr);\n      result.push(new MarkdownHover(this, d.range, [markdown], false, index++));\n    }\n    return result;\n  }\n  renderHoverParts(context, hoverParts) {\n    return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n  }\n};\nUnicodeHighlighterHoverParticipant = __decorate([__param(1, ILanguageService), __param(2, IOpenerService)], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n  return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n  let value = `\\`${codePointToHex(codePoint)}\\``;\n  if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n    // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n    value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n  }\n  return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n  if (codePoint === 96 /* CharCode.BackTick */) {\n    return '`` ` ``';\n  }\n  return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n  return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n  constructor() {\n    this.map = new Map();\n  }\n  static {\n    this.instance = new Decorations();\n  }\n  getDecorationFromOptions(options) {\n    return this.getDecoration(!options.includeComments, !options.includeStrings);\n  }\n  getDecoration(hideInComments, hideInStrings) {\n    const key = `${hideInComments}${hideInStrings}`;\n    let options = this.map.get(key);\n    if (!options) {\n      options = ModelDecorationOptions.createDynamic({\n        description: 'unicode-highlight',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        className: 'unicode-highlight',\n        showIfCollapsed: true,\n        overviewRuler: null,\n        minimap: null,\n        hideInCommentTokens: hideInComments,\n        hideInStringTokens: hideInStrings\n      });\n      this.map.set(key, options);\n    }\n    return options;\n  }\n}\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n  constructor() {\n    super({\n      id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n      label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n      alias: 'Disable highlighting of characters in comments',\n      precondition: undefined\n    });\n    this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n  }\n  async run(accessor, editor, args) {\n    const configurationService = accessor?.get(IConfigurationService);\n    if (configurationService) {\n      this.runAction(configurationService);\n    }\n  }\n  async runAction(configurationService) {\n    await configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n  }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n  constructor() {\n    super({\n      id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n      label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n      alias: 'Disable highlighting of characters in strings',\n      precondition: undefined\n    });\n    this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n  }\n  async run(accessor, editor, args) {\n    const configurationService = accessor?.get(IConfigurationService);\n    if (configurationService) {\n      this.runAction(configurationService);\n    }\n  }\n  async runAction(configurationService) {\n    await configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n  }\n}\nexport let DisableHighlightingOfAmbiguousCharactersAction = /*#__PURE__*/(() => {\n  class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\n    }\n    constructor() {\n      super({\n        id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n        label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n        alias: 'Disable highlighting of ambiguous characters',\n        precondition: undefined\n      });\n      this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    async run(accessor, editor, args) {\n      const configurationService = accessor?.get(IConfigurationService);\n      if (configurationService) {\n        this.runAction(configurationService);\n      }\n    }\n    async runAction(configurationService) {\n      await configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n    }\n  }\n  return DisableHighlightingOfAmbiguousCharactersAction;\n})();\nexport let DisableHighlightingOfInvisibleCharactersAction = /*#__PURE__*/(() => {\n  class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\n    }\n    constructor() {\n      super({\n        id: DisableHighlightingOfInvisibleCharactersAction.ID,\n        label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n        alias: 'Disable highlighting of invisible characters',\n        precondition: undefined\n      });\n      this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    async run(accessor, editor, args) {\n      const configurationService = accessor?.get(IConfigurationService);\n      if (configurationService) {\n        this.runAction(configurationService);\n      }\n    }\n    async runAction(configurationService) {\n      await configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n    }\n  }\n  return DisableHighlightingOfInvisibleCharactersAction;\n})();\nexport let DisableHighlightingOfNonBasicAsciiCharactersAction = /*#__PURE__*/(() => {\n  class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\n    }\n    constructor() {\n      super({\n        id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n        label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n        alias: 'Disable highlighting of non basic ASCII characters',\n        precondition: undefined\n      });\n      this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    async run(accessor, editor, args) {\n      const configurationService = accessor?.get(IConfigurationService);\n      if (configurationService) {\n        this.runAction(configurationService);\n      }\n    }\n    async runAction(configurationService) {\n      await configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n    }\n  }\n  return DisableHighlightingOfNonBasicAsciiCharactersAction;\n})();\nexport let ShowExcludeOptions = /*#__PURE__*/(() => {\n  class ShowExcludeOptions extends EditorAction {\n    static {\n      this.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\n    }\n    constructor() {\n      super({\n        id: ShowExcludeOptions.ID,\n        label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n        alias: 'Show Exclude Options',\n        precondition: undefined\n      });\n    }\n    async run(accessor, editor, args) {\n      const {\n        codePoint,\n        reason,\n        inString,\n        inComment\n      } = args;\n      const char = String.fromCodePoint(codePoint);\n      const quickPickService = accessor.get(IQuickInputService);\n      const configurationService = accessor.get(IConfigurationService);\n      function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n        if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n          return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n        }\n        return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n      }\n      const options = [];\n      if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n        for (const locale of reason.notAmbiguousInLocales) {\n          options.push({\n            label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n            run: async () => {\n              excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n            }\n          });\n        }\n      }\n      options.push({\n        label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n        run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n      });\n      if (inComment) {\n        const action = new DisableHighlightingInCommentsAction();\n        options.push({\n          label: action.label,\n          run: async () => action.runAction(configurationService)\n        });\n      } else if (inString) {\n        const action = new DisableHighlightingInStringsAction();\n        options.push({\n          label: action.label,\n          run: async () => action.runAction(configurationService)\n        });\n      }\n      if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n        const action = new DisableHighlightingOfAmbiguousCharactersAction();\n        options.push({\n          label: action.label,\n          run: async () => action.runAction(configurationService)\n        });\n      } else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n        const action = new DisableHighlightingOfInvisibleCharactersAction();\n        options.push({\n          label: action.label,\n          run: async () => action.runAction(configurationService)\n        });\n      } else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n        const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n        options.push({\n          label: action.label,\n          run: async () => action.runAction(configurationService)\n        });\n      } else {\n        expectNever(reason);\n      }\n      const result = await quickPickService.pick(options, {\n        title: configureUnicodeHighlightOptionsStr\n      });\n      if (result) {\n        await result.run();\n      }\n    }\n  }\n  return ShowExcludeOptions;\n})();\nasync function excludeCharFromBeingHighlighted(configurationService, charCodes) {\n  const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n  let value;\n  if (typeof existingValue === 'object' && existingValue) {\n    value = existingValue;\n  } else {\n    value = {};\n  }\n  for (const charCode of charCodes) {\n    value[String.fromCodePoint(charCode)] = true;\n  }\n  await configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n}\nasync function excludeLocaleFromBeingHighlighted(configurationService, locales) {\n  const existingValue = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user?.value;\n  let value;\n  if (typeof existingValue === 'object' && existingValue) {\n    // Copy value, as the existing value is read only\n    value = Object.assign({}, existingValue);\n  } else {\n    value = {};\n  }\n  for (const locale of locales) {\n    value[locale] = true;\n  }\n  await configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n}\nfunction expectNever(value) {\n  throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);","var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n  constructor(_editor, instantiationService) {\n    super();\n    this._editor = _editor;\n    this.instantiationService = instantiationService;\n    this.banner = this._register(this.instantiationService.createInstance(Banner));\n  }\n  hide() {\n    this._editor.setBanner(null, 0);\n    this.banner.clear();\n  }\n  show(item) {\n    this.banner.show({\n      ...item,\n      onClose: () => {\n        this.hide();\n        item.onClose?.();\n      }\n    });\n    this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n  }\n};\nBannerController = __decorate([__param(1, IInstantiationService)], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n  constructor(instantiationService) {\n    super();\n    this.instantiationService = instantiationService;\n    this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n    this.element = $('div.editor-banner');\n    this.element.tabIndex = 0;\n  }\n  getAriaLabel(item) {\n    if (item.ariaLabel) {\n      return item.ariaLabel;\n    }\n    if (typeof item.message === 'string') {\n      return item.message;\n    }\n    return undefined;\n  }\n  getBannerMessage(message) {\n    if (typeof message === 'string') {\n      const element = $('span');\n      element.innerText = message;\n      return element;\n    }\n    return this.markdownRenderer.render(message).element;\n  }\n  clear() {\n    clearNode(this.element);\n  }\n  show(item) {\n    // Clear previous item\n    clearNode(this.element);\n    // Banner aria label\n    const ariaLabel = this.getAriaLabel(item);\n    if (ariaLabel) {\n      this.element.setAttribute('aria-label', ariaLabel);\n    }\n    // Icon\n    const iconContainer = append(this.element, $('div.icon-container'));\n    iconContainer.setAttribute('aria-hidden', 'true');\n    if (item.icon) {\n      iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n    }\n    // Message\n    const messageContainer = append(this.element, $('div.message-container'));\n    messageContainer.setAttribute('aria-hidden', 'true');\n    messageContainer.appendChild(this.getBannerMessage(item.message));\n    // Message Actions\n    this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n    if (item.actions) {\n      for (const action of item.actions) {\n        this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, {\n          ...action,\n          tabIndex: -1\n        }, {}));\n      }\n    }\n    // Action\n    const actionBarContainer = append(this.element, $('div.action-container'));\n    this.actionBar = this._register(new ActionBar(actionBarContainer));\n    this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n      if (typeof item.onClose === 'function') {\n        item.onClose();\n      }\n    })), {\n      icon: true,\n      label: false\n    });\n    this.actionBar.setFocusable(false);\n  }\n};\nBanner = __decorate([__param(0, IInstantiationService)], Banner);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../common/opener.js';\nimport './link.css';\nimport { getDefaultHoverDelegate } from '../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IHoverService } from '../../hover/browser/hover.js';\nlet Link = class Link extends Disposable {\n  get enabled() {\n    return this._enabled;\n  }\n  set enabled(enabled) {\n    if (enabled) {\n      this.el.setAttribute('aria-disabled', 'false');\n      this.el.tabIndex = 0;\n      this.el.style.pointerEvents = 'auto';\n      this.el.style.opacity = '1';\n      this.el.style.cursor = 'pointer';\n      this._enabled = false;\n    } else {\n      this.el.setAttribute('aria-disabled', 'true');\n      this.el.tabIndex = -1;\n      this.el.style.pointerEvents = 'none';\n      this.el.style.opacity = '0.4';\n      this.el.style.cursor = 'default';\n      this._enabled = true;\n    }\n    this._enabled = enabled;\n  }\n  constructor(container, _link, options = {}, _hoverService, openerService) {\n    super();\n    this._link = _link;\n    this._hoverService = _hoverService;\n    this._enabled = true;\n    this.el = append(container, $('a.monaco-link', {\n      tabIndex: _link.tabIndex ?? 0,\n      href: _link.href\n    }, _link.label));\n    this.hoverDelegate = options.hoverDelegate ?? getDefaultHoverDelegate('mouse');\n    this.setTooltip(_link.title);\n    this.el.setAttribute('role', 'button');\n    const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\n    const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\n    const onEnterPress = Event.chain(onKeyPress.event, $ => $.map(e => new StandardKeyboardEvent(e)).filter(e => e.keyCode === 3 /* KeyCode.Enter */));\n    const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\n    this._register(Gesture.addTarget(this.el));\n    const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\n    this._register(onOpen(e => {\n      if (!this.enabled) {\n        return;\n      }\n      EventHelper.stop(e, true);\n      if (options?.opener) {\n        options.opener(this._link.href);\n      } else {\n        openerService.open(this._link.href, {\n          allowCommands: true\n        });\n      }\n    }));\n    this.enabled = true;\n  }\n  setTooltip(title) {\n    if (this.hoverDelegate.showNativeHover) {\n      this.el.title = title ?? '';\n    } else if (!this.hover && title) {\n      this.hover = this._register(this._hoverService.setupManagedHover(this.hoverDelegate, this.el, title));\n    } else if (this.hover) {\n      this.hover.update(title);\n    }\n  }\n};\nLink = __decorate([__param(3, IHoverService), __param(4, IOpenerService)], Link);\nexport { Link };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n  codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n  return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n  static {\n    this.ID = 'editor.contrib.unusualLineTerminatorsDetector';\n  }\n  constructor(_editor, _dialogService, _codeEditorService) {\n    super();\n    this._editor = _editor;\n    this._dialogService = _dialogService;\n    this._codeEditorService = _codeEditorService;\n    this._isPresentingDialog = false;\n    this._config = this._editor.getOption(127 /* EditorOption.unusualLineTerminators */);\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(127 /* EditorOption.unusualLineTerminators */)) {\n        this._config = this._editor.getOption(127 /* EditorOption.unusualLineTerminators */);\n        this._checkForUnusualLineTerminators();\n      }\n    }));\n    this._register(this._editor.onDidChangeModel(() => {\n      this._checkForUnusualLineTerminators();\n    }));\n    this._register(this._editor.onDidChangeModelContent(e => {\n      if (e.isUndoing) {\n        // skip checking in case of undoing\n        return;\n      }\n      this._checkForUnusualLineTerminators();\n    }));\n    this._checkForUnusualLineTerminators();\n  }\n  async _checkForUnusualLineTerminators() {\n    if (this._config === 'off') {\n      return;\n    }\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    if (!model.mightContainUnusualLineTerminators()) {\n      return;\n    }\n    const ignoreState = readIgnoreState(this._codeEditorService, model);\n    if (ignoreState === true) {\n      // this model should be ignored\n      return;\n    }\n    if (this._editor.getOption(92 /* EditorOption.readOnly */)) {\n      // read only editor => sorry!\n      return;\n    }\n    if (this._config === 'auto') {\n      // just do it!\n      model.removeUnusualLineTerminators(this._editor.getSelections());\n      return;\n    }\n    if (this._isPresentingDialog) {\n      // we're currently showing the dialog, which is async.\n      // avoid spamming the user\n      return;\n    }\n    let result;\n    try {\n      this._isPresentingDialog = true;\n      result = await this._dialogService.confirm({\n        title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n        message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n        detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n        primaryButton: nls.localize({\n          key: 'unusualLineTerminators.fix',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Remove Unusual Line Terminators\"),\n        cancelButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n      });\n    } finally {\n      this._isPresentingDialog = false;\n    }\n    if (!result.confirmed) {\n      // this model should be ignored\n      writeIgnoreState(this._codeEditorService, model, true);\n      return;\n    }\n    model.removeUnusualLineTerminators(this._editor.getSelections());\n  }\n};\nUnusualLineTerminatorsDetector = __decorate([__param(1, IDialogService), __param(2, ICodeEditorService)], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar WordHighlighter_1, WordHighlighterContribution_1;\nimport * as nls from '../../../../nls.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { shouldSynchronizeModel } from '../../../common/model.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getHighlightDecorationOptions } from './highlightDecorations.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { matchesScheme, Schemas } from '../../../../base/common/network.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { score } from '../../../common/languageSelector.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { TextualMultiDocumentHighlightFeature } from './textualHighlightProvider.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n  const orderedByScore = registry.ordered(model);\n  // in order of score ask the occurrences provider\n  // until someone response with a good result\n  // (good = non undefined and non null value)\n  // (result of size == 0 is valid, no highlights is a valid/expected result -- not a signal to fall back to other providers)\n  return first(orderedByScore.map(provider => () => {\n    return Promise.resolve(provider.provideDocumentHighlights(model, position, token)).then(undefined, onUnexpectedExternalError);\n  }), result => result !== undefined && result !== null).then(result => {\n    if (result) {\n      const map = new ResourceMap();\n      map.set(model.uri, result);\n      return map;\n    }\n    return new ResourceMap();\n  });\n}\nexport function getOccurrencesAcrossMultipleModels(registry, model, position, wordSeparators, token, otherModels) {\n  const orderedByScore = registry.ordered(model);\n  // in order of score ask the occurrences provider\n  // until someone response with a good result\n  // (good = non undefined and non null ResourceMap)\n  // (result of size == 0 is valid, no highlights is a valid/expected result -- not a signal to fall back to other providers)\n  return first(orderedByScore.map(provider => () => {\n    const filteredModels = otherModels.filter(otherModel => {\n      return shouldSynchronizeModel(otherModel);\n    }).filter(otherModel => {\n      return score(provider.selector, otherModel.uri, otherModel.getLanguageId(), true, undefined, undefined) > 0;\n    });\n    return Promise.resolve(provider.provideMultiDocumentHighlights(model, position, filteredModels, token)).then(undefined, onUnexpectedExternalError);\n  }), result => result !== undefined && result !== null);\n}\nclass OccurenceAtPositionRequest {\n  constructor(_model, _selection, _wordSeparators) {\n    this._model = _model;\n    this._selection = _selection;\n    this._wordSeparators = _wordSeparators;\n    this._wordRange = this._getCurrentWordRange(_model, _selection);\n    this._result = null;\n  }\n  get result() {\n    if (!this._result) {\n      this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n    }\n    return this._result;\n  }\n  _getCurrentWordRange(model, selection) {\n    const word = model.getWordAtPosition(selection.getPosition());\n    if (word) {\n      return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    return null;\n  }\n  isValid(model, selection, decorations) {\n    const lineNumber = selection.startLineNumber;\n    const startColumn = selection.startColumn;\n    const endColumn = selection.endColumn;\n    const currentWordRange = this._getCurrentWordRange(model, selection);\n    let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n    // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n    // (Same symbol)\n    for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\n      const range = decorations.getRange(i);\n      if (range && range.startLineNumber === lineNumber) {\n        if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n          requestIsValid = true;\n        }\n      }\n    }\n    return requestIsValid;\n  }\n  cancel() {\n    this.result.cancel();\n  }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n  constructor(model, selection, wordSeparators, providers) {\n    super(model, selection, wordSeparators);\n    this._providers = providers;\n  }\n  _compute(model, selection, wordSeparators, token) {\n    return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => {\n      if (!value) {\n        return new ResourceMap();\n      }\n      return value;\n    });\n  }\n}\nclass MultiModelOccurenceRequest extends OccurenceAtPositionRequest {\n  constructor(model, selection, wordSeparators, providers, otherModels) {\n    super(model, selection, wordSeparators);\n    this._providers = providers;\n    this._otherModels = otherModels;\n  }\n  _compute(model, selection, wordSeparators, token) {\n    return getOccurrencesAcrossMultipleModels(this._providers, model, selection.getPosition(), wordSeparators, token, this._otherModels).then(value => {\n      if (!value) {\n        return new ResourceMap();\n      }\n      return value;\n    });\n  }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, word, wordSeparators) {\n  return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n}\nfunction computeOccurencesMultiModel(registry, model, selection, word, wordSeparators, otherModels) {\n  return new MultiModelOccurenceRequest(model, selection, wordSeparators, registry, otherModels);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', async (accessor, model, position) => {\n  const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n  const map = await getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n  return map?.get(model.uri);\n});\nlet WordHighlighter = class WordHighlighter {\n  static {\n    WordHighlighter_1 = this;\n  }\n  static {\n    this.storedDecorationIDs = new ResourceMap();\n  }\n  static {\n    this.query = null;\n  }\n  constructor(editor, providers, multiProviders, contextKeyService, codeEditorService) {\n    this.toUnhook = new DisposableStore();\n    this.workerRequestTokenId = 0;\n    this.workerRequestCompleted = false;\n    this.workerRequestValue = new ResourceMap();\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n    this.runDelayer = this.toUnhook.add(new Delayer(50));\n    this.editor = editor;\n    this.providers = providers;\n    this.multiDocumentProviders = multiProviders;\n    this.codeEditorService = codeEditorService;\n    this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n    this._ignorePositionChangeEvent = false;\n    this.occurrencesHighlight = this.editor.getOption(81 /* EditorOption.occurrencesHighlight */);\n    this.model = this.editor.getModel();\n    this.toUnhook.add(editor.onDidChangeCursorPosition(e => {\n      if (this._ignorePositionChangeEvent) {\n        // We are changing the position => ignore this event\n        return;\n      }\n      if (this.occurrencesHighlight === 'off') {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n      this.runDelayer.trigger(() => {\n        this._onPositionChanged(e);\n      });\n    }));\n    this.toUnhook.add(editor.onDidFocusEditorText(e => {\n      if (this.occurrencesHighlight === 'off') {\n        // Early exit if nothing needs to be done\n        return;\n      }\n      if (!this.workerRequest) {\n        this.runDelayer.trigger(() => {\n          this._run();\n        });\n      }\n    }));\n    this.toUnhook.add(editor.onDidChangeModelContent(e => {\n      if (!matchesScheme(this.model.uri, 'output')) {\n        this._stopAll();\n      }\n    }));\n    this.toUnhook.add(editor.onDidChangeModel(e => {\n      if (!e.newModelUrl && e.oldModelUrl) {\n        this._stopSingular();\n      } else {\n        if (WordHighlighter_1.query) {\n          this._run();\n        }\n      }\n    }));\n    this.toUnhook.add(editor.onDidChangeConfiguration(e => {\n      const newValue = this.editor.getOption(81 /* EditorOption.occurrencesHighlight */);\n      if (this.occurrencesHighlight !== newValue) {\n        this.occurrencesHighlight = newValue;\n        switch (newValue) {\n          case 'off':\n            this._stopAll();\n            break;\n          case 'singleFile':\n            this._stopAll(WordHighlighter_1.query?.modelInfo?.model);\n            break;\n          case 'multiFile':\n            if (WordHighlighter_1.query) {\n              this._run(true);\n            }\n            break;\n          default:\n            console.warn('Unknown occurrencesHighlight setting value:', newValue);\n            break;\n        }\n      }\n    }));\n    this.decorations = this.editor.createDecorationsCollection();\n    this.workerRequestTokenId = 0;\n    this.workerRequest = null;\n    this.workerRequestCompleted = false;\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n    // if there is a query already, highlight off that query\n    if (WordHighlighter_1.query) {\n      this._run();\n    }\n  }\n  hasDecorations() {\n    return this.decorations.length > 0;\n  }\n  restore() {\n    if (this.occurrencesHighlight === 'off') {\n      return;\n    }\n    this.runDelayer.cancel();\n    this._run();\n  }\n  _getSortedHighlights() {\n    return this.decorations.getRanges().sort(Range.compareRangesUsingStarts);\n  }\n  moveNext() {\n    const highlights = this._getSortedHighlights();\n    const index = highlights.findIndex(range => range.containsPosition(this.editor.getPosition()));\n    const newIndex = (index + 1) % highlights.length;\n    const dest = highlights[newIndex];\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n      const word = this._getWord();\n      if (word) {\n        const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n        alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n      }\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  }\n  moveBack() {\n    const highlights = this._getSortedHighlights();\n    const index = highlights.findIndex(range => range.containsPosition(this.editor.getPosition()));\n    const newIndex = (index - 1 + highlights.length) % highlights.length;\n    const dest = highlights[newIndex];\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n      const word = this._getWord();\n      if (word) {\n        const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n        alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n      }\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  }\n  _removeSingleDecorations() {\n    // return if no model\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    const currentDecorationIDs = WordHighlighter_1.storedDecorationIDs.get(this.editor.getModel().uri);\n    if (!currentDecorationIDs) {\n      return;\n    }\n    this.editor.removeDecorations(currentDecorationIDs);\n    WordHighlighter_1.storedDecorationIDs.delete(this.editor.getModel().uri);\n    if (this.decorations.length > 0) {\n      this.decorations.clear();\n      this._hasWordHighlights.set(false);\n    }\n  }\n  _removeAllDecorations(preservedModel) {\n    const currentEditors = this.codeEditorService.listCodeEditors();\n    const deleteURI = [];\n    // iterate over editors and store models in currentModels\n    for (const editor of currentEditors) {\n      if (!editor.hasModel() || isEqual(editor.getModel().uri, preservedModel?.uri)) {\n        continue;\n      }\n      const currentDecorationIDs = WordHighlighter_1.storedDecorationIDs.get(editor.getModel().uri);\n      if (!currentDecorationIDs) {\n        continue;\n      }\n      editor.removeDecorations(currentDecorationIDs);\n      deleteURI.push(editor.getModel().uri);\n      const editorHighlighterContrib = WordHighlighterContribution.get(editor);\n      if (!editorHighlighterContrib?.wordHighlighter) {\n        continue;\n      }\n      if (editorHighlighterContrib.wordHighlighter.decorations.length > 0) {\n        editorHighlighterContrib.wordHighlighter.decorations.clear();\n        editorHighlighterContrib.wordHighlighter.workerRequest = null;\n        editorHighlighterContrib.wordHighlighter._hasWordHighlights.set(false);\n      }\n    }\n    for (const uri of deleteURI) {\n      WordHighlighter_1.storedDecorationIDs.delete(uri);\n    }\n  }\n  _stopSingular() {\n    // Remove any existing decorations + a possible query, and re - run to update decorations\n    this._removeSingleDecorations();\n    if (this.editor.hasTextFocus()) {\n      if (this.editor.getModel()?.uri.scheme !== Schemas.vscodeNotebookCell && WordHighlighter_1.query?.modelInfo?.model.uri.scheme !== Schemas.vscodeNotebookCell) {\n        // clear query if focused non-nb editor\n        WordHighlighter_1.query = null;\n        this._run(); // TODO: @Yoyokrazy -- investigate why we need a full rerun here. likely addressed a case/patch in the first iteration of this feature\n      } else {\n        // remove modelInfo to account for nb cell being disposed\n        if (WordHighlighter_1.query?.modelInfo) {\n          WordHighlighter_1.query.modelInfo = null;\n        }\n      }\n    }\n    // Cancel any renderDecorationsTimer\n    if (this.renderDecorationsTimer !== -1) {\n      clearTimeout(this.renderDecorationsTimer);\n      this.renderDecorationsTimer = -1;\n    }\n    // Cancel any worker request\n    if (this.workerRequest !== null) {\n      this.workerRequest.cancel();\n      this.workerRequest = null;\n    }\n    // Invalidate any worker request callback\n    if (!this.workerRequestCompleted) {\n      this.workerRequestTokenId++;\n      this.workerRequestCompleted = true;\n    }\n  }\n  _stopAll(preservedModel) {\n    // Remove any existing decorations\n    // TODO: @Yoyokrazy -- this triggers as notebooks scroll, causing highlights to disappear momentarily.\n    // maybe a nb type check?\n    this._removeAllDecorations(preservedModel);\n    // Cancel any renderDecorationsTimer\n    if (this.renderDecorationsTimer !== -1) {\n      clearTimeout(this.renderDecorationsTimer);\n      this.renderDecorationsTimer = -1;\n    }\n    // Cancel any worker request\n    if (this.workerRequest !== null) {\n      this.workerRequest.cancel();\n      this.workerRequest = null;\n    }\n    // Invalidate any worker request callback\n    if (!this.workerRequestCompleted) {\n      this.workerRequestTokenId++;\n      this.workerRequestCompleted = true;\n    }\n  }\n  _onPositionChanged(e) {\n    // disabled\n    if (this.occurrencesHighlight === 'off') {\n      this._stopAll();\n      return;\n    }\n    // ignore typing & other\n    // need to check if the model is a notebook cell, should not stop if nb\n    if (e.reason !== 3 /* CursorChangeReason.Explicit */ && this.editor.getModel()?.uri.scheme !== Schemas.vscodeNotebookCell) {\n      this._stopAll();\n      return;\n    }\n    this._run();\n  }\n  _getWord() {\n    const editorSelection = this.editor.getSelection();\n    const lineNumber = editorSelection.startLineNumber;\n    const startColumn = editorSelection.startColumn;\n    if (this.model.isDisposed()) {\n      return null;\n    }\n    return this.model.getWordAtPosition({\n      lineNumber: lineNumber,\n      column: startColumn\n    });\n  }\n  getOtherModelsToHighlight(model) {\n    if (!model) {\n      return [];\n    }\n    // notebook case\n    const isNotebookEditor = model.uri.scheme === Schemas.vscodeNotebookCell;\n    if (isNotebookEditor) {\n      const currentModels = [];\n      const currentEditors = this.codeEditorService.listCodeEditors();\n      for (const editor of currentEditors) {\n        const tempModel = editor.getModel();\n        if (tempModel && tempModel !== model && tempModel.uri.scheme === Schemas.vscodeNotebookCell) {\n          currentModels.push(tempModel);\n        }\n      }\n      return currentModels;\n    }\n    // inline case\n    // ? current works when highlighting outside of an inline diff, highlighting in.\n    // ? broken when highlighting within a diff editor. highlighting the main editor does not work\n    // ? editor group service could be useful here\n    const currentModels = [];\n    const currentEditors = this.codeEditorService.listCodeEditors();\n    for (const editor of currentEditors) {\n      if (!isDiffEditor(editor)) {\n        continue;\n      }\n      const diffModel = editor.getModel();\n      if (!diffModel) {\n        continue;\n      }\n      if (model === diffModel.modified) {\n        // embedded inline chat diff would pass this, allowing highlights\n        //? currentModels.push(diffModel.original);\n        currentModels.push(diffModel.modified);\n      }\n    }\n    if (currentModels.length) {\n      // no matching editors have been found\n      return currentModels;\n    }\n    // multi-doc OFF\n    if (this.occurrencesHighlight === 'singleFile') {\n      return [];\n    }\n    // multi-doc ON\n    for (const editor of currentEditors) {\n      const tempModel = editor.getModel();\n      const isValidModel = tempModel && tempModel !== model;\n      if (isValidModel) {\n        currentModels.push(tempModel);\n      }\n    }\n    return currentModels;\n  }\n  _run(multiFileConfigChange) {\n    let workerRequestIsValid;\n    const hasTextFocus = this.editor.hasTextFocus();\n    if (!hasTextFocus) {\n      // new nb cell scrolled in, didChangeModel fires\n      if (!WordHighlighter_1.query) {\n        // no previous query, nothing to highlight off of\n        this._stopAll();\n        return;\n      }\n    } else {\n      // has text focus\n      const editorSelection = this.editor.getSelection();\n      // ignore multiline selection\n      if (!editorSelection || editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n        WordHighlighter_1.query = null;\n        this._stopAll();\n        return;\n      }\n      const startColumn = editorSelection.startColumn;\n      const endColumn = editorSelection.endColumn;\n      const word = this._getWord();\n      // The selection must be inside a word or surround one word at most\n      if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n        // no previous query, nothing to highlight\n        WordHighlighter_1.query = null;\n        this._stopAll();\n        return;\n      }\n      // All the effort below is trying to achieve this:\n      // - when cursor is moved to a word, trigger immediately a findOccurrences request\n      // - 250ms later after the last cursor move event, render the occurrences\n      // - no flickering!\n      workerRequestIsValid = this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations);\n      WordHighlighter_1.query = {\n        modelInfo: {\n          model: this.model,\n          selection: editorSelection\n        },\n        word: word\n      };\n    }\n    // There are 4 cases:\n    // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n    // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n    // c) old workerRequest is valid, but not completed\n    // d) old workerRequest is not valid\n    // For a) no action is needed\n    // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n    this.lastCursorPositionChangeTime = new Date().getTime();\n    if (workerRequestIsValid) {\n      if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n        // case b)\n        // Delay the firing of renderDecorationsTimer by an extra 250 ms\n        clearTimeout(this.renderDecorationsTimer);\n        this.renderDecorationsTimer = -1;\n        this._beginRenderDecorations();\n      }\n    } else if (isEqual(this.editor.getModel().uri, WordHighlighter_1.query.modelInfo?.model.uri)) {\n      // only trigger new worker requests from the primary model that initiated the query\n      // case d)\n      // check if the new queried word is contained in the range of a stored decoration for this model\n      if (!multiFileConfigChange) {\n        const currentModelDecorationRanges = this.decorations.getRanges();\n        for (const storedRange of currentModelDecorationRanges) {\n          if (storedRange.containsPosition(this.editor.getPosition())) {\n            return;\n          }\n        }\n      }\n      // stop all previous actions if new word is highlighted\n      // if we trigger the run off a setting change -> multifile highlighting, we do not want to remove decorations from this model\n      this._stopAll(multiFileConfigChange ? this.model : undefined);\n      const myRequestId = ++this.workerRequestTokenId;\n      this.workerRequestCompleted = false;\n      const otherModelsToHighlight = this.getOtherModelsToHighlight(this.editor.getModel());\n      // when reaching here, there are two possible states.\n      // \t\t1) we have text focus, and a valid query was updated.\n      // \t\t2) we do not have text focus, and a valid query is cached.\n      // the query will ALWAYS have the correct data for the current highlight request, so it can always be passed to the workerRequest safely\n      if (!WordHighlighter_1.query || !WordHighlighter_1.query.modelInfo || WordHighlighter_1.query.modelInfo.model.isDisposed()) {\n        return;\n      }\n      this.workerRequest = this.computeWithModel(WordHighlighter_1.query.modelInfo.model, WordHighlighter_1.query.modelInfo.selection, WordHighlighter_1.query.word, otherModelsToHighlight);\n      this.workerRequest?.result.then(data => {\n        if (myRequestId === this.workerRequestTokenId) {\n          this.workerRequestCompleted = true;\n          this.workerRequestValue = data || [];\n          this._beginRenderDecorations();\n        }\n      }, onUnexpectedError);\n    }\n  }\n  computeWithModel(model, selection, word, otherModels) {\n    if (!otherModels.length) {\n      return computeOccurencesAtPosition(this.providers, model, selection, word, this.editor.getOption(132 /* EditorOption.wordSeparators */));\n    } else {\n      return computeOccurencesMultiModel(this.multiDocumentProviders, model, selection, word, this.editor.getOption(132 /* EditorOption.wordSeparators */), otherModels);\n    }\n  }\n  _beginRenderDecorations() {\n    const currentTime = new Date().getTime();\n    const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n    if (currentTime >= minimumRenderTime) {\n      // Synchronous\n      this.renderDecorationsTimer = -1;\n      this.renderDecorations();\n    } else {\n      // Asynchronous\n      this.renderDecorationsTimer = setTimeout(() => {\n        this.renderDecorations();\n      }, minimumRenderTime - currentTime);\n    }\n  }\n  renderDecorations() {\n    this.renderDecorationsTimer = -1;\n    // create new loop, iterate over current editors using this.codeEditorService.listCodeEditors(),\n    // if the URI of that codeEditor is in the map, then add the decorations to the decorations array\n    // then set the decorations for the editor\n    const currentEditors = this.codeEditorService.listCodeEditors();\n    for (const editor of currentEditors) {\n      const editorHighlighterContrib = WordHighlighterContribution.get(editor);\n      if (!editorHighlighterContrib) {\n        continue;\n      }\n      const newDecorations = [];\n      const uri = editor.getModel()?.uri;\n      if (uri && this.workerRequestValue.has(uri)) {\n        const oldDecorationIDs = WordHighlighter_1.storedDecorationIDs.get(uri);\n        const newDocumentHighlights = this.workerRequestValue.get(uri);\n        if (newDocumentHighlights) {\n          for (const highlight of newDocumentHighlights) {\n            if (!highlight.range) {\n              continue;\n            }\n            newDecorations.push({\n              range: highlight.range,\n              options: getHighlightDecorationOptions(highlight.kind)\n            });\n          }\n        }\n        let newDecorationIDs = [];\n        editor.changeDecorations(changeAccessor => {\n          newDecorationIDs = changeAccessor.deltaDecorations(oldDecorationIDs ?? [], newDecorations);\n        });\n        WordHighlighter_1.storedDecorationIDs = WordHighlighter_1.storedDecorationIDs.set(uri, newDecorationIDs);\n        if (newDecorations.length > 0) {\n          editorHighlighterContrib.wordHighlighter?.decorations.set(newDecorations);\n          editorHighlighterContrib.wordHighlighter?._hasWordHighlights.set(true);\n        }\n      }\n    }\n  }\n  dispose() {\n    this._stopSingular();\n    this.toUnhook.dispose();\n  }\n};\nWordHighlighter = WordHighlighter_1 = __decorate([__param(4, ICodeEditorService)], WordHighlighter);\nlet WordHighlighterContribution = /*#__PURE__*/(() => {\n  let WordHighlighterContribution = class WordHighlighterContribution extends Disposable {\n    static {\n      WordHighlighterContribution_1 = this;\n    }\n    static {\n      this.ID = 'editor.contrib.wordHighlighter';\n    }\n    static get(editor) {\n      return editor.getContribution(WordHighlighterContribution_1.ID);\n    }\n    constructor(editor, contextKeyService, languageFeaturesService, codeEditorService) {\n      super();\n      this._wordHighlighter = null;\n      const createWordHighlighterIfPossible = () => {\n        if (editor.hasModel() && !editor.getModel().isTooLargeForTokenization()) {\n          this._wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, languageFeaturesService.multiDocumentHighlightProvider, contextKeyService, codeEditorService);\n        }\n      };\n      this._register(editor.onDidChangeModel(e => {\n        if (this._wordHighlighter) {\n          this._wordHighlighter.dispose();\n          this._wordHighlighter = null;\n        }\n        createWordHighlighterIfPossible();\n      }));\n      createWordHighlighterIfPossible();\n    }\n    get wordHighlighter() {\n      return this._wordHighlighter;\n    }\n    saveViewState() {\n      if (this._wordHighlighter && this._wordHighlighter.hasDecorations()) {\n        return true;\n      }\n      return false;\n    }\n    moveNext() {\n      this._wordHighlighter?.moveNext();\n    }\n    moveBack() {\n      this._wordHighlighter?.moveBack();\n    }\n    restoreViewState(state) {\n      if (this._wordHighlighter && state) {\n        this._wordHighlighter.restore();\n      }\n    }\n    dispose() {\n      if (this._wordHighlighter) {\n        this._wordHighlighter.dispose();\n        this._wordHighlighter = null;\n      }\n      super.dispose();\n    }\n  };\n  return WordHighlighterContribution;\n})();\nWordHighlighterContribution = WordHighlighterContribution_1 = __decorate([__param(1, IContextKeyService), __param(2, ILanguageFeaturesService), __param(3, ICodeEditorService)], WordHighlighterContribution);\nexport { WordHighlighterContribution };\nclass WordHighlightNavigationAction extends EditorAction {\n  constructor(next, opts) {\n    super(opts);\n    this._isNext = next;\n  }\n  run(accessor, editor) {\n    const controller = WordHighlighterContribution.get(editor);\n    if (!controller) {\n      return;\n    }\n    if (this._isNext) {\n      controller.moveNext();\n    } else {\n      controller.moveBack();\n    }\n  }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.wordHighlight.next',\n      label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n      alias: 'Go to Next Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 65 /* KeyCode.F7 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.wordHighlight.prev',\n      label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n      alias: 'Go to Previous Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.wordHighlight.trigger',\n      label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n      alias: 'Trigger Symbol Highlight',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    const controller = WordHighlighterContribution.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.restoreViewState(true);\n  }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterEditorFeature(TextualMultiDocumentHighlightFeature);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { USUAL_WORD_SEPARATORS } from '../../../common/core/wordHelper.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nclass TextualDocumentHighlightProvider {\n  constructor() {\n    this.selector = {\n      language: '*'\n    };\n  }\n  provideDocumentHighlights(model, position, token) {\n    const result = [];\n    const word = model.getWordAtPosition({\n      lineNumber: position.lineNumber,\n      column: position.column\n    });\n    if (!word) {\n      return Promise.resolve(result);\n    }\n    if (model.isDisposed()) {\n      return;\n    }\n    const matches = model.findMatches(word.word, true, false, true, USUAL_WORD_SEPARATORS, false);\n    return matches.map(m => ({\n      range: m.range,\n      kind: DocumentHighlightKind.Text\n    }));\n  }\n  provideMultiDocumentHighlights(primaryModel, position, otherModels, token) {\n    const result = new ResourceMap();\n    const word = primaryModel.getWordAtPosition({\n      lineNumber: position.lineNumber,\n      column: position.column\n    });\n    if (!word) {\n      return Promise.resolve(result);\n    }\n    for (const model of [primaryModel, ...otherModels]) {\n      if (model.isDisposed()) {\n        continue;\n      }\n      const matches = model.findMatches(word.word, true, false, true, USUAL_WORD_SEPARATORS, false);\n      const highlights = matches.map(m => ({\n        range: m.range,\n        kind: DocumentHighlightKind.Text\n      }));\n      if (highlights) {\n        result.set(model.uri, highlights);\n      }\n    }\n    return result;\n  }\n}\nlet TextualMultiDocumentHighlightFeature = class TextualMultiDocumentHighlightFeature extends Disposable {\n  constructor(languageFeaturesService) {\n    super();\n    this._register(languageFeaturesService.documentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n    this._register(languageFeaturesService.multiDocumentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n  }\n};\nTextualMultiDocumentHighlightFeature = __decorate([__param(0, ILanguageFeaturesService)], TextualMultiDocumentHighlightFeature);\nexport { TextualMultiDocumentHighlightFeature };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n  constructor(opts) {\n    super(opts);\n    this._inSelectionMode = opts.inSelectionMode;\n    this._wordNavigationType = opts.wordNavigationType;\n  }\n  runEditorCommand(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const wordSeparators = getMapForWordSeparators(editor.getOption(132 /* EditorOption.wordSeparators */), editor.getOption(131 /* EditorOption.wordSegmenterLocales */));\n    const model = editor.getModel();\n    const selections = editor.getSelections();\n    const hasMulticursor = selections.length > 1;\n    const result = selections.map(sel => {\n      const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n      const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType, hasMulticursor);\n      return this._moveTo(sel, outPosition, this._inSelectionMode);\n    });\n    model.pushStackElement();\n    editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n    if (result.length === 1) {\n      const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n      editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\n    }\n  }\n  _moveTo(from, to, inSelectionMode) {\n    if (inSelectionMode) {\n      // move just position\n      return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n    } else {\n      // move everything\n      return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n    }\n  }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n  _move(wordSeparators, model, position, wordNavigationType, hasMulticursor) {\n    return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType, hasMulticursor);\n  }\n}\nexport class WordRightCommand extends MoveWordCommand {\n  _move(wordSeparators, model, position, wordNavigationType, hasMulticursor) {\n    return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n  }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordStartLeft',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordEndLeft',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n      id: 'cursorWordLeft',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)?.negate()),\n        primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordStartLeftSelect',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordEndLeftSelect',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n      id: 'cursorWordLeftSelect',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)?.negate()),\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n      id: 'cursorWordAccessibilityLeft',\n      precondition: undefined\n    });\n  }\n  _move(wordCharacterClassifier, model, position, wordNavigationType, hasMulticursor) {\n    return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue, wordCharacterClassifier.intlSegmenterLocales), model, position, wordNavigationType, hasMulticursor);\n  }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n      id: 'cursorWordAccessibilityLeftSelect',\n      precondition: undefined\n    });\n  }\n  _move(wordCharacterClassifier, model, position, wordNavigationType, hasMulticursor) {\n    return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue, wordCharacterClassifier.intlSegmenterLocales), model, position, wordNavigationType, hasMulticursor);\n  }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordStartRight',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordEndRight',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)?.negate()),\n        primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class CursorWordRight extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordRight',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordStartRightSelect',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordEndRightSelect',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)?.negate()),\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordRightSelect',\n      precondition: undefined\n    });\n  }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n      id: 'cursorWordAccessibilityRight',\n      precondition: undefined\n    });\n  }\n  _move(wordCharacterClassifier, model, position, wordNavigationType, hasMulticursor) {\n    return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue, wordCharacterClassifier.intlSegmenterLocales), model, position, wordNavigationType, hasMulticursor);\n  }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n      id: 'cursorWordAccessibilityRightSelect',\n      precondition: undefined\n    });\n  }\n  _move(wordCharacterClassifier, model, position, wordNavigationType, hasMulticursor) {\n    return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue, wordCharacterClassifier.intlSegmenterLocales), model, position, wordNavigationType, hasMulticursor);\n  }\n}\nexport class DeleteWordCommand extends EditorCommand {\n  constructor(opts) {\n    super(opts);\n    this._whitespaceHeuristics = opts.whitespaceHeuristics;\n    this._wordNavigationType = opts.wordNavigationType;\n  }\n  runEditorCommand(accessor, editor, args) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    if (!editor.hasModel()) {\n      return;\n    }\n    const wordSeparators = getMapForWordSeparators(editor.getOption(132 /* EditorOption.wordSeparators */), editor.getOption(131 /* EditorOption.wordSegmenterLocales */));\n    const model = editor.getModel();\n    const selections = editor.getSelections();\n    const autoClosingBrackets = editor.getOption(6 /* EditorOption.autoClosingBrackets */);\n    const autoClosingQuotes = editor.getOption(11 /* EditorOption.autoClosingQuotes */);\n    const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n    const viewModel = editor._getViewModel();\n    const commands = selections.map(sel => {\n      const deleteRange = this._delete({\n        wordSeparators,\n        model,\n        selection: sel,\n        whitespaceHeuristics: this._whitespaceHeuristics,\n        autoClosingDelete: editor.getOption(9 /* EditorOption.autoClosingDelete */),\n        autoClosingBrackets,\n        autoClosingQuotes,\n        autoClosingPairs,\n        autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n      }, this._wordNavigationType);\n      return new ReplaceCommand(deleteRange, '');\n    });\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n  _delete(ctx, wordNavigationType) {\n    const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n    if (r) {\n      return r;\n    }\n    return new Range(1, 1, 1, 1);\n  }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n  _delete(ctx, wordNavigationType) {\n    const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n    if (r) {\n      return r;\n    }\n    const lineCount = ctx.model.getLineCount();\n    const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n    return new Range(lineCount, maxColumn, lineCount, maxColumn);\n  }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: false,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'deleteWordStartLeft',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'deleteWordEndLeft',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: true,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'deleteWordLeft',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: false,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'deleteWordStartRight',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'deleteWordEndRight',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'deleteWordRight',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\n        mac: {\n          primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class DeleteInsideWord extends EditorAction {\n  constructor() {\n    super({\n      id: 'deleteInsideWord',\n      precondition: EditorContextKeys.writable,\n      label: nls.localize('deleteInsideWord', \"Delete Word\"),\n      alias: 'Delete Word'\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const wordSeparators = getMapForWordSeparators(editor.getOption(132 /* EditorOption.wordSeparators */), editor.getOption(131 /* EditorOption.wordSegmenterLocales */));\n    const model = editor.getModel();\n    const selections = editor.getSelections();\n    const commands = selections.map(sel => {\n      const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n      return new ReplaceCommand(deleteRange, '');\n    });\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: true,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'deleteWordPartLeft',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _delete(ctx, wordNavigationType) {\n    const r = WordPartOperations.deleteWordPartLeft(ctx);\n    if (r) {\n      return r;\n    }\n    return new Range(1, 1, 1, 1);\n  }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n  constructor() {\n    super({\n      whitespaceHeuristics: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'deleteWordPartRight',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _delete(ctx, wordNavigationType) {\n    const r = WordPartOperations.deleteWordPartRight(ctx);\n    if (r) {\n      return r;\n    }\n    const lineCount = ctx.model.getLineCount();\n    const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n    return new Range(lineCount, maxColumn, lineCount, maxColumn);\n  }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n  _move(wordSeparators, model, position, wordNavigationType, hasMulticursor) {\n    return WordPartOperations.moveWordPartLeft(wordSeparators, model, position, hasMulticursor);\n  }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordPartLeft',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 0 /* WordNavigationType.WordStart */,\n      id: 'cursorWordPartLeftSelect',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n  _move(wordSeparators, model, position, wordNavigationType, hasMulticursor) {\n    return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n  }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: false,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordPartRight',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n  constructor() {\n    super({\n      inSelectionMode: true,\n      wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n      id: 'cursorWordPartRightSelect',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport let ReadOnlyMessageController = /*#__PURE__*/(() => {\n  class ReadOnlyMessageController extends Disposable {\n    static {\n      this.ID = 'editor.contrib.readOnlyMessageController';\n    }\n    constructor(editor) {\n      super();\n      this.editor = editor;\n      this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n      const messageController = MessageController.get(this.editor);\n      if (messageController && this.editor.hasModel()) {\n        let message = this.editor.getOptions().get(93 /* EditorOption.readOnlyMessage */);\n        if (!message) {\n          if (this.editor.isSimpleWidget) {\n            message = new MarkdownString(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"));\n          } else {\n            message = new MarkdownString(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"));\n          }\n        }\n        messageController.showMessage(message, this.editor.getPosition());\n      }\n    }\n  }\n  return ReadOnlyMessageController;\n})();\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport let IPadShowKeyboard = /*#__PURE__*/(() => {\n  class IPadShowKeyboard extends Disposable {\n    static {\n      this.ID = 'editor.contrib.iPadShowKeyboard';\n    }\n    constructor(editor) {\n      super();\n      this.editor = editor;\n      this.widget = null;\n      if (isIOS) {\n        this._register(editor.onDidChangeConfiguration(() => this.update()));\n        this.update();\n      }\n    }\n    update() {\n      const shouldHaveWidget = !this.editor.getOption(92 /* EditorOption.readOnly */);\n      if (!this.widget && shouldHaveWidget) {\n        this.widget = new ShowKeyboardWidget(this.editor);\n      } else if (this.widget && !shouldHaveWidget) {\n        this.widget.dispose();\n        this.widget = null;\n      }\n    }\n    dispose() {\n      super.dispose();\n      if (this.widget) {\n        this.widget.dispose();\n        this.widget = null;\n      }\n    }\n  }\n  return IPadShowKeyboard;\n})();\nlet ShowKeyboardWidget = /*#__PURE__*/(() => {\n  class ShowKeyboardWidget extends Disposable {\n    static {\n      this.ID = 'editor.contrib.ShowKeyboardWidget';\n    }\n    constructor(editor) {\n      super();\n      this.editor = editor;\n      this._domNode = document.createElement('textarea');\n      this._domNode.className = 'iPadShowKeyboard';\n      this._register(dom.addDisposableListener(this._domNode, 'touchstart', e => {\n        this.editor.focus();\n      }));\n      this._register(dom.addDisposableListener(this._domNode, 'focus', e => {\n        this.editor.focus();\n      }));\n      this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n      this.editor.removeOverlayWidget(this);\n      super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n      return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n      return this._domNode;\n    }\n    getPosition() {\n      return {\n        preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n      };\n    }\n  }\n  return ShowKeyboardWidget;\n})();\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard, 3 /* EditorContributionInstantiation.Eventually */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './editor.all.js';\nimport './standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\nimport './standalone/browser/inspectTokens/inspectTokens.js';\nimport './standalone/browser/quickAccess/standaloneHelpQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneCommandsQuickAccess.js';\nimport './standalone/browser/referenceSearch/standaloneReferenceSearch.js';\nimport './standalone/browser/toggleHighContrast/toggleHighContrast.js';\nexport * from './editor.api.js';","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n  ctor: HelpQuickAccessProvider,\n  prefix: '',\n  helpEntries: [{\n    description: QuickHelpNLS.helpQuickAccessActionLabel\n  }]\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar HelpQuickAccessProvider_1;\nimport { localize } from '../../../nls.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService } from '../common/quickInput.js';\nlet HelpQuickAccessProvider = /*#__PURE__*/(() => {\n  let HelpQuickAccessProvider = class HelpQuickAccessProvider {\n    static {\n      HelpQuickAccessProvider_1 = this;\n    }\n    static {\n      this.PREFIX = '?';\n    }\n    constructor(quickInputService, keybindingService) {\n      this.quickInputService = quickInputService;\n      this.keybindingService = keybindingService;\n      this.registry = Registry.as(Extensions.Quickaccess);\n    }\n    provide(picker) {\n      const disposables = new DisposableStore();\n      // Open a picker with the selected value if picked\n      disposables.add(picker.onDidAccept(() => {\n        const [item] = picker.selectedItems;\n        if (item) {\n          this.quickInputService.quickAccess.show(item.prefix, {\n            preserveValue: true\n          });\n        }\n      }));\n      // Also open a picker when we detect the user typed the exact\n      // name of a provider (e.g. `?term` for terminals)\n      disposables.add(picker.onDidChangeValue(value => {\n        const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider_1.PREFIX.length));\n        if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider_1.PREFIX) {\n          this.quickInputService.quickAccess.show(providerDescriptor.prefix, {\n            preserveValue: true\n          });\n        }\n      }));\n      // Fill in all providers\n      picker.items = this.getQuickAccessProviders().filter(p => p.prefix !== HelpQuickAccessProvider_1.PREFIX);\n      return disposables;\n    }\n    getQuickAccessProviders() {\n      const providers = this.registry.getQuickAccessProviders().sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix)).flatMap(provider => this.createPicks(provider));\n      return providers;\n    }\n    createPicks(provider) {\n      return provider.helpEntries.map(helpEntry => {\n        const prefix = helpEntry.prefix || provider.prefix;\n        const label = prefix || '\\u2026' /* ... */;\n        return {\n          prefix,\n          label,\n          keybinding: helpEntry.commandId ? this.keybindingService.lookupKeybinding(helpEntry.commandId) : undefined,\n          ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\n          description: helpEntry.description\n        };\n      });\n    }\n  };\n  return HelpQuickAccessProvider;\n})();\nHelpQuickAccessProvider = HelpQuickAccessProvider_1 = __decorate([__param(0, IQuickInputService), __param(1, IKeybindingService)], HelpQuickAccessProvider);\nexport { HelpQuickAccessProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport let AbstractGotoLineQuickAccessProvider = /*#__PURE__*/(() => {\n  class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    static {\n      this.PREFIX = ':';\n    }\n    constructor() {\n      super({\n        canAcceptInBackground: true\n      });\n    }\n    provideWithoutTextEditor(picker) {\n      const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n      picker.items = [{\n        label\n      }];\n      picker.ariaLabel = label;\n      return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n      const editor = context.editor;\n      const disposables = new DisposableStore();\n      // Goto line once picked\n      disposables.add(picker.onDidAccept(event => {\n        const [item] = picker.selectedItems;\n        if (item) {\n          if (!this.isValidLineNumber(editor, item.lineNumber)) {\n            return;\n          }\n          this.gotoLocation(context, {\n            range: this.toRange(item.lineNumber, item.column),\n            keyMods: picker.keyMods,\n            preserveFocus: event.inBackground\n          });\n          if (!event.inBackground) {\n            picker.hide();\n          }\n        }\n      }));\n      // React to picker changes\n      const updatePickerAndEditor = () => {\n        const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n        const label = this.getPickLabel(editor, position.lineNumber, position.column);\n        // Picker\n        picker.items = [{\n          lineNumber: position.lineNumber,\n          column: position.column,\n          label\n        }];\n        // ARIA Label\n        picker.ariaLabel = label;\n        // Clear decorations for invalid range\n        if (!this.isValidLineNumber(editor, position.lineNumber)) {\n          this.clearDecorations(editor);\n          return;\n        }\n        // Reveal\n        const range = this.toRange(position.lineNumber, position.column);\n        editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n        // Decorate\n        this.addDecorations(editor, range);\n      };\n      updatePickerAndEditor();\n      disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n      // Adjust line number visibility as needed\n      const codeEditor = getCodeEditor(editor);\n      if (codeEditor) {\n        const options = codeEditor.getOptions();\n        const lineNumbers = options.get(68 /* EditorOption.lineNumbers */);\n        if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n          codeEditor.updateOptions({\n            lineNumbers: 'on'\n          });\n          disposables.add(toDisposable(() => codeEditor.updateOptions({\n            lineNumbers: 'relative'\n          })));\n        }\n      }\n      return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n      return {\n        startLineNumber: lineNumber,\n        startColumn: column,\n        endLineNumber: lineNumber,\n        endColumn: column\n      };\n    }\n    parsePosition(editor, value) {\n      // Support line-col formats of `line,col`, `line:col`, `line#col`\n      const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n      const endLine = this.lineCount(editor) + 1;\n      return {\n        lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n        column: numbers[1]\n      };\n    }\n    getPickLabel(editor, lineNumber, column) {\n      // Location valid: indicate this as picker label\n      if (this.isValidLineNumber(editor, lineNumber)) {\n        if (this.isValidColumn(editor, lineNumber, column)) {\n          return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n        }\n        return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n      }\n      // Location invalid: show generic label\n      const position = editor.getPosition() || {\n        lineNumber: 1,\n        column: 1\n      };\n      const lineCount = this.lineCount(editor);\n      if (lineCount > 1) {\n        return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n      }\n      return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n      if (!lineNumber || typeof lineNumber !== 'number') {\n        return false;\n      }\n      return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n      if (!column || typeof column !== 'number') {\n        return false;\n      }\n      const model = this.getModel(editor);\n      if (!model) {\n        return false;\n      }\n      const positionCandidate = {\n        lineNumber,\n        column\n      };\n      return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n      return this.getModel(editor)?.getLineCount() ?? 0;\n    }\n  }\n  return AbstractGotoLineQuickAccessProvider;\n})();","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n  constructor(options) {\n    this.options = options;\n    //#endregion\n    //#region Decorations Utils\n    this.rangeHighlightDecorationId = undefined;\n  }\n  //#region Provider methods\n  provide(picker, token, runOptions) {\n    const disposables = new DisposableStore();\n    // Apply options if any\n    picker.canAcceptInBackground = !!this.options?.canAcceptInBackground;\n    // Disable filtering & sorting, we control the results\n    picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n    // Provide based on current active editor\n    const pickerDisposable = disposables.add(new MutableDisposable());\n    pickerDisposable.value = this.doProvide(picker, token, runOptions);\n    // Re-create whenever the active editor changes\n    disposables.add(this.onDidActiveTextEditorControlChange(() => {\n      // Clear old\n      pickerDisposable.value = undefined;\n      // Add new\n      pickerDisposable.value = this.doProvide(picker, token);\n    }));\n    return disposables;\n  }\n  doProvide(picker, token, runOptions) {\n    const disposables = new DisposableStore();\n    // With text control\n    const editor = this.activeTextEditorControl;\n    if (editor && this.canProvideWithTextEditor(editor)) {\n      const context = {\n        editor\n      };\n      // Restore any view state if this picker was closed\n      // without actually going to a line\n      const codeEditor = getCodeEditor(editor);\n      if (codeEditor) {\n        // Remember view state and update it when the cursor position\n        // changes even later because it could be that the user has\n        // configured quick access to remain open when focus is lost and\n        // we always want to restore the current location.\n        let lastKnownEditorViewState = editor.saveViewState() ?? undefined;\n        disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n          lastKnownEditorViewState = editor.saveViewState() ?? undefined;\n        }));\n        context.restoreViewState = () => {\n          if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n            editor.restoreViewState(lastKnownEditorViewState);\n          }\n        };\n        disposables.add(createSingleCallFunction(token.onCancellationRequested)(() => context.restoreViewState?.()));\n      }\n      // Clean up decorations on dispose\n      disposables.add(toDisposable(() => this.clearDecorations(editor)));\n      // Ask subclass for entries\n      disposables.add(this.provideWithTextEditor(context, picker, token, runOptions));\n    }\n    // Without text control\n    else {\n      disposables.add(this.provideWithoutTextEditor(picker, token));\n    }\n    return disposables;\n  }\n  /**\n   * Subclasses to implement if they can operate on the text editor.\n   */\n  canProvideWithTextEditor(editor) {\n    return true;\n  }\n  gotoLocation({\n    editor\n  }, options) {\n    editor.setSelection(options.range, \"code.jump\" /* TextEditorSelectionSource.JUMP */);\n    editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n    if (!options.preserveFocus) {\n      editor.focus();\n    }\n    const model = editor.getModel();\n    if (model && 'getLineContent' in model) {\n      status(`${model.getLineContent(options.range.startLineNumber)}`);\n    }\n  }\n  getModel(editor) {\n    return isDiffEditor(editor) ? editor.getModel()?.modified : editor.getModel();\n  }\n  addDecorations(editor, range) {\n    editor.changeDecorations(changeAccessor => {\n      // Reset old decorations if any\n      const deleteDecorations = [];\n      if (this.rangeHighlightDecorationId) {\n        deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n        deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n        this.rangeHighlightDecorationId = undefined;\n      }\n      // Add new decorations for the range\n      const newDecorations = [\n      // highlight the entire line on the range\n      {\n        range,\n        options: {\n          description: 'quick-access-range-highlight',\n          className: 'rangeHighlight',\n          isWholeLine: true\n        }\n      },\n      // also add overview ruler highlight\n      {\n        range,\n        options: {\n          description: 'quick-access-range-highlight-overview',\n          overviewRuler: {\n            color: themeColorFromId(overviewRulerRangeHighlight),\n            position: OverviewRulerLane.Full\n          }\n        }\n      }];\n      const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n      this.rangeHighlightDecorationId = {\n        rangeHighlightId,\n        overviewRulerDecorationId\n      };\n    });\n  }\n  clearDecorations(editor) {\n    const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n    if (rangeHighlightDecorationId) {\n      editor.changeDecorations(changeAccessor => {\n        changeAccessor.deltaDecorations([rangeHighlightDecorationId.overviewRulerDecorationId, rangeHighlightDecorationId.rangeHighlightId], []);\n      });\n      this.rangeHighlightDecorationId = undefined;\n    }\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n  constructor(editorService) {\n    super();\n    this.editorService = editorService;\n    this.onDidActiveTextEditorControlChange = Event.None;\n  }\n  get activeTextEditorControl() {\n    return this.editorService.getFocusedCodeEditor() ?? undefined;\n  }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([__param(0, ICodeEditorService)], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport let GotoLineAction = /*#__PURE__*/(() => {\n  class GotoLineAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.gotoLine';\n    }\n    constructor() {\n      super({\n        id: GotoLineAction.ID,\n        label: GoToLineNLS.gotoLineActionLabel,\n        alias: 'Go to Line/Column...',\n        precondition: undefined,\n        kbOpts: {\n          kbExpr: EditorContextKeys.focus,\n          primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n          mac: {\n            primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */\n          },\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n      });\n    }\n    run(accessor) {\n      accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n  }\n  return GotoLineAction;\n})();\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n  ctor: StandaloneGotoLineQuickAccessProvider,\n  prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n  helpEntries: [{\n    description: GoToLineNLS.gotoLineActionLabel,\n    commandId: GotoLineAction.ID\n  }]\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar AbstractGotoSymbolQuickAccessProvider_1;\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds, getAriaLabelForSymbol } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n  static {\n    AbstractGotoSymbolQuickAccessProvider_1 = this;\n  }\n  static {\n    this.PREFIX = '@';\n  }\n  static {\n    this.SCOPE_PREFIX = ':';\n  }\n  static {\n    this.PREFIX_BY_CATEGORY = `${this.PREFIX}${this.SCOPE_PREFIX}`;\n  }\n  constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n    super(options);\n    this._languageFeaturesService = _languageFeaturesService;\n    this._outlineModelService = _outlineModelService;\n    this.options = options;\n    this.options.canAcceptInBackground = true;\n  }\n  provideWithoutTextEditor(picker) {\n    this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n    return Disposable.None;\n  }\n  provideWithTextEditor(context, picker, token, runOptions) {\n    const editor = context.editor;\n    const model = this.getModel(editor);\n    if (!model) {\n      return Disposable.None;\n    }\n    // Provide symbols from model if available in registry\n    if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n      return this.doProvideWithEditorSymbols(context, model, picker, token, runOptions);\n    }\n    // Otherwise show an entry for a model without registry\n    // But give a chance to resolve the symbols at a later\n    // point if possible\n    return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n  }\n  doProvideWithoutEditorSymbols(context, model, picker, token) {\n    const disposables = new DisposableStore();\n    // Generic pick for not having any symbol information\n    this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n    // Wait for changes to the registry and see if eventually\n    // we do get symbols. This can happen if the picker is opened\n    // very early after the model has loaded but before the\n    // language registry is ready.\n    // https://github.com/microsoft/vscode/issues/70607\n    (async () => {\n      const result = await this.waitForLanguageSymbolRegistry(model, disposables);\n      if (!result || token.isCancellationRequested) {\n        return;\n      }\n      disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n    })();\n    return disposables;\n  }\n  provideLabelPick(picker, label) {\n    picker.items = [{\n      label,\n      index: 0,\n      kind: 14 /* SymbolKind.String */\n    }];\n    picker.ariaLabel = label;\n  }\n  async waitForLanguageSymbolRegistry(model, disposables) {\n    if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n      return true;\n    }\n    const symbolProviderRegistryPromise = new DeferredPromise();\n    // Resolve promise when registry knows model\n    const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n      if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n        symbolProviderListener.dispose();\n        symbolProviderRegistryPromise.complete(true);\n      }\n    }));\n    // Resolve promise when we get disposed too\n    disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n    return symbolProviderRegistryPromise.p;\n  }\n  doProvideWithEditorSymbols(context, model, picker, token, runOptions) {\n    const editor = context.editor;\n    const disposables = new DisposableStore();\n    // Goto symbol once picked\n    disposables.add(picker.onDidAccept(event => {\n      const [item] = picker.selectedItems;\n      if (item && item.range) {\n        this.gotoLocation(context, {\n          range: item.range.selection,\n          keyMods: picker.keyMods,\n          preserveFocus: event.inBackground\n        });\n        runOptions?.handleAccept?.(item);\n        if (!event.inBackground) {\n          picker.hide();\n        }\n      }\n    }));\n    // Goto symbol side by side if enabled\n    disposables.add(picker.onDidTriggerItemButton(({\n      item\n    }) => {\n      if (item && item.range) {\n        this.gotoLocation(context, {\n          range: item.range.selection,\n          keyMods: picker.keyMods,\n          forceSideBySide: true\n        });\n        picker.hide();\n      }\n    }));\n    // Resolve symbols from document once and reuse this\n    // request for all filtering and typing then on\n    const symbolsPromise = this.getDocumentSymbols(model, token);\n    // Set initial picks and update on type\n    let picksCts = undefined;\n    const updatePickerItems = async positionToEnclose => {\n      // Cancel any previous ask for picks and busy\n      picksCts?.dispose(true);\n      picker.busy = false;\n      // Create new cancellation source for this run\n      picksCts = new CancellationTokenSource(token);\n      // Collect symbol picks\n      picker.busy = true;\n      try {\n        const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider_1.PREFIX.length).trim());\n        const items = await this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token, model);\n        if (token.isCancellationRequested) {\n          return;\n        }\n        if (items.length > 0) {\n          picker.items = items;\n          if (positionToEnclose && query.original.length === 0) {\n            const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n            if (candidate) {\n              picker.activeItems = [candidate];\n            }\n          }\n        } else {\n          if (query.original.length > 0) {\n            this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n          } else {\n            this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n          }\n        }\n      } finally {\n        if (!token.isCancellationRequested) {\n          picker.busy = false;\n        }\n      }\n    };\n    disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n    updatePickerItems(editor.getSelection()?.getPosition());\n    // Reveal and decorate when active item changes\n    disposables.add(picker.onDidChangeActive(() => {\n      const [item] = picker.activeItems;\n      if (item && item.range) {\n        // Reveal\n        editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n        // Decorate\n        this.addDecorations(editor, item.range.decoration);\n      }\n    }));\n    return disposables;\n  }\n  async doGetSymbolPicks(symbolsPromise, query, options, token, model) {\n    const symbols = await symbolsPromise;\n    if (token.isCancellationRequested) {\n      return [];\n    }\n    const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX) === 0;\n    const filterPos = filterBySymbolKind ? 1 : 0;\n    // Split between symbol and container query\n    let symbolQuery;\n    let containerQuery;\n    if (query.values && query.values.length > 1) {\n      symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n      containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n    } else {\n      symbolQuery = query;\n    }\n    // Convert to symbol picks and apply filtering\n    let buttons;\n    const openSideBySideDirection = this.options?.openSideBySideDirection?.();\n    if (openSideBySideDirection) {\n      buttons = [{\n        iconClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\n        tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n      }];\n    }\n    const filteredSymbolPicks = [];\n    for (let index = 0; index < symbols.length; index++) {\n      const symbol = symbols[index];\n      const symbolLabel = trim(symbol.name);\n      const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n      const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n      let containerLabel = symbol.containerName;\n      if (options?.extraContainerLabel) {\n        if (containerLabel) {\n          containerLabel = `${options.extraContainerLabel}  ${containerLabel}`;\n        } else {\n          containerLabel = options.extraContainerLabel;\n        }\n      }\n      let symbolScore = undefined;\n      let symbolMatches = undefined;\n      let containerScore = undefined;\n      let containerMatches = undefined;\n      if (query.original.length > filterPos) {\n        // First: try to score on the entire query, it is possible that\n        // the symbol matches perfectly (e.g. searching for \"change log\"\n        // can be a match on a markdown symbol \"change log\"). In that\n        // case we want to skip the container query altogether.\n        let skipContainerQuery = false;\n        if (symbolQuery !== query) {\n          [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, {\n            ...query,\n            values: undefined /* disable multi-query support */\n          }, filterPos, symbolLabelIconOffset);\n          if (typeof symbolScore === 'number') {\n            skipContainerQuery = true; // since we consumed the query, skip any container matching\n          }\n        }\n        // Otherwise: score on the symbol query and match on the container later\n        if (typeof symbolScore !== 'number') {\n          [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n          if (typeof symbolScore !== 'number') {\n            continue;\n          }\n        }\n        // Score by container if specified\n        if (!skipContainerQuery && containerQuery) {\n          if (containerLabel && containerQuery.original.length > 0) {\n            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n          }\n          if (typeof containerScore !== 'number') {\n            continue;\n          }\n          if (typeof symbolScore === 'number') {\n            symbolScore += containerScore; // boost symbolScore by containerScore\n          }\n        }\n      }\n      const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n      filteredSymbolPicks.push({\n        index,\n        kind: symbol.kind,\n        score: symbolScore,\n        label: symbolLabelWithIcon,\n        ariaLabel: getAriaLabelForSymbol(symbol.name, symbol.kind),\n        description: containerLabel,\n        highlights: deprecated ? undefined : {\n          label: symbolMatches,\n          description: containerMatches\n        },\n        range: {\n          selection: Range.collapseToStart(symbol.selectionRange),\n          decoration: symbol.range\n        },\n        uri: model.uri,\n        symbolName: symbolLabel,\n        strikethrough: deprecated,\n        buttons\n      });\n    }\n    // Sort by score\n    const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ? this.compareByKindAndScore(symbolA, symbolB) : this.compareByScore(symbolA, symbolB));\n    // Add separator for types\n    // - @  only total number of symbols\n    // - @: grouped by symbol kind\n    let symbolPicks = [];\n    if (filterBySymbolKind) {\n      let lastSymbolKind = undefined;\n      let lastSeparator = undefined;\n      let lastSymbolKindCounter = 0;\n      function updateLastSeparatorLabel() {\n        if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n          lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n        }\n      }\n      for (const symbolPick of sortedFilteredSymbolPicks) {\n        // Found new kind\n        if (lastSymbolKind !== symbolPick.kind) {\n          // Update last separator with number of symbols we found for kind\n          updateLastSeparatorLabel();\n          lastSymbolKind = symbolPick.kind;\n          lastSymbolKindCounter = 1;\n          // Add new separator for new kind\n          lastSeparator = {\n            type: 'separator'\n          };\n          symbolPicks.push(lastSeparator);\n        }\n        // Existing kind, keep counting\n        else {\n          lastSymbolKindCounter++;\n        }\n        // Add to final result\n        symbolPicks.push(symbolPick);\n      }\n      // Update last separator with number of symbols we found for kind\n      updateLastSeparatorLabel();\n    } else if (sortedFilteredSymbolPicks.length > 0) {\n      symbolPicks = [{\n        label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length),\n        type: 'separator'\n      }, ...sortedFilteredSymbolPicks];\n    }\n    return symbolPicks;\n  }\n  compareByScore(symbolA, symbolB) {\n    if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n      return 1;\n    } else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n      return -1;\n    }\n    if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n      if (symbolA.score > symbolB.score) {\n        return -1;\n      } else if (symbolA.score < symbolB.score) {\n        return 1;\n      }\n    }\n    if (symbolA.index < symbolB.index) {\n      return -1;\n    } else if (symbolA.index > symbolB.index) {\n      return 1;\n    }\n    return 0;\n  }\n  compareByKindAndScore(symbolA, symbolB) {\n    const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n    const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n    // Sort by type first if scoped search\n    const result = kindA.localeCompare(kindB);\n    if (result === 0) {\n      return this.compareByScore(symbolA, symbolB);\n    }\n    return result;\n  }\n  async getDocumentSymbols(document, token) {\n    const model = await this._outlineModelService.getOrCreate(document, token);\n    return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n  }\n};\nAbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = __decorate([__param(0, ILanguageFeaturesService), __param(1, IOutlineModelService)], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n  [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n  [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n  [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n  [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n  [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n  [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n  [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n  [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n  [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n  [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n  [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n  [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n  [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n  [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n  [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n  [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n  [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n  [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n  [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n  [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n  [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n  [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n  [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n  [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n  [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion","import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\nimport { sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { stripWildcards } from './strings.js';\nconst NO_SCORE2 = [undefined, []];\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\n  // Score: multiple inputs\n  const preparedQuery = query;\n  if (preparedQuery.values && preparedQuery.values.length > 1) {\n    return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\n  }\n  // Score: single input\n  return doScoreFuzzy2Single(target, query, patternStart, wordStart);\n}\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\n  let totalScore = 0;\n  const totalMatches = [];\n  for (const queryPiece of query) {\n    const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\n    if (typeof score !== 'number') {\n      // if a single query value does not match, return with\n      // no score entirely, we require all queries to match\n      return NO_SCORE2;\n    }\n    totalScore += score;\n    totalMatches.push(...matches);\n  }\n  // if we have a score, ensure that the positions are\n  // sorted in ascending order and distinct\n  return [totalScore, normalizeMatches(totalMatches)];\n}\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\n  const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, {\n    firstMatchCanBeWeak: true,\n    boostFullMatch: true\n  });\n  if (!score) {\n    return NO_SCORE2;\n  }\n  return [score[0], createFuzzyMatches(score)];\n}\nconst NO_ITEM_SCORE = Object.freeze({\n  score: 0\n});\nfunction normalizeMatches(matches) {\n  // sort matches by start to be able to normalize\n  const sortedMatches = matches.sort((matchA, matchB) => {\n    return matchA.start - matchB.start;\n  });\n  // merge matches that overlap\n  const normalizedMatches = [];\n  let currentMatch = undefined;\n  for (const match of sortedMatches) {\n    // if we have no current match or the matches\n    // do not overlap, we take it as is and remember\n    // it for future merging\n    if (!currentMatch || !matchOverlaps(currentMatch, match)) {\n      currentMatch = match;\n      normalizedMatches.push(match);\n    }\n    // otherwise we merge the matches\n    else {\n      currentMatch.start = Math.min(currentMatch.start, match.start);\n      currentMatch.end = Math.max(currentMatch.end, match.end);\n    }\n  }\n  return normalizedMatches;\n}\nfunction matchOverlaps(matchA, matchB) {\n  if (matchA.end < matchB.start) {\n    return false; // A ends before B starts\n  }\n  if (matchB.end < matchA.start) {\n    return false; // B ends before A starts\n  }\n  return true;\n}\n/*\n * If a query is wrapped in quotes, the user does not want to\n * use fuzzy search for this query.\n */\nfunction queryExpectsExactMatch(query) {\n  return query.startsWith('\"') && query.endsWith('\"');\n}\n/**\n * Helper function to prepare a search value for scoring by removing unwanted characters\n * and allowing to score on multiple pieces separated by whitespace character.\n */\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\nexport function prepareQuery(original) {\n  if (typeof original !== 'string') {\n    original = '';\n  }\n  const originalLowercase = original.toLowerCase();\n  const {\n    pathNormalized,\n    normalized,\n    normalizedLowercase\n  } = normalizeQuery(original);\n  const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\n  const expectExactMatch = queryExpectsExactMatch(original);\n  let values = undefined;\n  const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\n  if (originalSplit.length > 1) {\n    for (const originalPiece of originalSplit) {\n      const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\n      const {\n        pathNormalized: pathNormalizedPiece,\n        normalized: normalizedPiece,\n        normalizedLowercase: normalizedLowercasePiece\n      } = normalizeQuery(originalPiece);\n      if (normalizedPiece) {\n        if (!values) {\n          values = [];\n        }\n        values.push({\n          original: originalPiece,\n          originalLowercase: originalPiece.toLowerCase(),\n          pathNormalized: pathNormalizedPiece,\n          normalized: normalizedPiece,\n          normalizedLowercase: normalizedLowercasePiece,\n          expectContiguousMatch: expectExactMatchPiece\n        });\n      }\n    }\n  }\n  return {\n    original,\n    originalLowercase,\n    pathNormalized,\n    normalized,\n    normalizedLowercase,\n    values,\n    containsPathSeparator,\n    expectContiguousMatch: expectExactMatch\n  };\n}\nfunction normalizeQuery(original) {\n  let pathNormalized;\n  if (isWindows) {\n    pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\n  } else {\n    pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\n  }\n  // we remove quotes here because quotes are used for exact match search\n  const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\n  return {\n    pathNormalized,\n    normalized,\n    normalizedLowercase: normalized.toLowerCase()\n  };\n}\nexport function pieceToQuery(arg1) {\n  if (Array.isArray(arg1)) {\n    return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\n  }\n  return prepareQuery(arg1.original);\n}\n//#endregion","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService, ItemActivation } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n  constructor(editorService, languageFeaturesService, outlineModelService) {\n    super(languageFeaturesService, outlineModelService);\n    this.editorService = editorService;\n    this.onDidActiveTextEditorControlChange = Event.None;\n  }\n  get activeTextEditorControl() {\n    return this.editorService.getFocusedCodeEditor() ?? undefined;\n  }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([__param(0, ICodeEditorService), __param(1, ILanguageFeaturesService), __param(2, IOutlineModelService)], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport let GotoSymbolAction = /*#__PURE__*/(() => {\n  class GotoSymbolAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.quickOutline';\n    }\n    constructor() {\n      super({\n        id: GotoSymbolAction.ID,\n        label: QuickOutlineNLS.quickOutlineActionLabel,\n        alias: 'Go to Symbol...',\n        precondition: EditorContextKeys.hasDocumentSymbolProvider,\n        kbOpts: {\n          kbExpr: EditorContextKeys.focus,\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        },\n        contextMenuOpts: {\n          group: 'navigation',\n          order: 3\n        }\n      });\n    }\n    run(accessor) {\n      accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX, {\n        itemActivation: ItemActivation.NONE\n      });\n    }\n  }\n  return GotoSymbolAction;\n})();\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n  ctor: StandaloneGotoSymbolQuickAccessProvider,\n  prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n  helpEntries: [{\n    description: QuickOutlineNLS.quickOutlineActionLabel,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    commandId: GotoSymbolAction.ID\n  }, {\n    description: QuickOutlineNLS.quickOutlineByCategoryActionLabel,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY\n  }]\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n  get activeTextEditorControl() {\n    return this.codeEditorService.getFocusedCodeEditor() ?? undefined;\n  }\n  constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n    super({\n      showAlias: false\n    }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    this.codeEditorService = codeEditorService;\n  }\n  async getCommandPicks() {\n    return this.getCodeEditorCommandPicks();\n  }\n  hasAdditionalCommandPicks() {\n    return false;\n  }\n  async getAdditionalCommandPicks() {\n    return [];\n  }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([__param(0, IInstantiationService), __param(1, ICodeEditorService), __param(2, IKeybindingService), __param(3, ICommandService), __param(4, ITelemetryService), __param(5, IDialogService)], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport let GotoLineAction = /*#__PURE__*/(() => {\n  class GotoLineAction extends EditorAction {\n    static {\n      this.ID = 'editor.action.quickCommand';\n    }\n    constructor() {\n      super({\n        id: GotoLineAction.ID,\n        label: QuickCommandNLS.quickCommandActionLabel,\n        alias: 'Command Palette',\n        precondition: undefined,\n        kbOpts: {\n          kbExpr: EditorContextKeys.focus,\n          primary: 59 /* KeyCode.F1 */,\n          weight: 100 /* KeybindingWeight.EditorContrib */\n        },\n        contextMenuOpts: {\n          group: 'z_commands',\n          order: 1\n        }\n      });\n    }\n    run(accessor) {\n      accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n  }\n  return GotoLineAction;\n})();\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n  ctor: StandaloneCommandsQuickAccessProvider,\n  prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n  helpEntries: [{\n    description: QuickCommandNLS.quickCommandHelp,\n    commandId: GotoLineAction.ID\n  }]\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { isLocalizedString } from '../../../../platform/action/common/action.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n  constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n    super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n  }\n  getCodeEditorCommandPicks() {\n    const activeTextEditorControl = this.activeTextEditorControl;\n    if (!activeTextEditorControl) {\n      return [];\n    }\n    const editorCommandPicks = [];\n    for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n      let commandDescription;\n      if (editorAction.metadata?.description) {\n        if (isLocalizedString(editorAction.metadata.description)) {\n          commandDescription = editorAction.metadata.description;\n        } else {\n          commandDescription = {\n            original: editorAction.metadata.description,\n            value: editorAction.metadata.description\n          };\n        }\n      }\n      editorCommandPicks.push({\n        commandId: editorAction.id,\n        commandAlias: editorAction.alias,\n        commandDescription,\n        label: stripIcons(editorAction.label) || editorAction.id\n      });\n    }\n    return editorCommandPicks;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar AbstractCommandsQuickAccessProvider_1, CommandsHistory_1;\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\nimport { createSingleCallFunction } from '../../../base/common/functional.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport { TfIdfCalculator, normalizeTfIdfScores } from '../../../base/common/tfIdf.js';\nimport { localize } from '../../../nls.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\nimport { IStorageService, WillSaveStateReason } from '../../storage/common/storage.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nlet AbstractCommandsQuickAccessProvider = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\n  static {\n    AbstractCommandsQuickAccessProvider_1 = this;\n  }\n  static {\n    this.PREFIX = '>';\n  }\n  static {\n    this.TFIDF_THRESHOLD = 0.5;\n  }\n  static {\n    this.TFIDF_MAX_RESULTS = 5;\n  }\n  static {\n    this.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\n  }\n  constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n    super(AbstractCommandsQuickAccessProvider_1.PREFIX, options);\n    this.instantiationService = instantiationService;\n    this.keybindingService = keybindingService;\n    this.commandService = commandService;\n    this.telemetryService = telemetryService;\n    this.dialogService = dialogService;\n    this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\n    this.options = options;\n  }\n  async _getPicks(filter, _disposables, token, runOptions) {\n    // Ask subclass for all command picks\n    const allCommandPicks = await this.getCommandPicks(token);\n    if (token.isCancellationRequested) {\n      return [];\n    }\n    const runTfidf = createSingleCallFunction(() => {\n      const tfidf = new TfIdfCalculator();\n      tfidf.updateDocuments(allCommandPicks.map(commandPick => ({\n        key: commandPick.commandId,\n        textChunks: [this.getTfIdfChunk(commandPick)]\n      })));\n      const result = tfidf.calculateScores(filter, token);\n      return normalizeTfIdfScores(result).filter(score => score.score > AbstractCommandsQuickAccessProvider_1.TFIDF_THRESHOLD).slice(0, AbstractCommandsQuickAccessProvider_1.TFIDF_MAX_RESULTS);\n    });\n    // Filter\n    const filteredCommandPicks = [];\n    for (const commandPick of allCommandPicks) {\n      const labelHighlights = AbstractCommandsQuickAccessProvider_1.WORD_FILTER(filter, commandPick.label) ?? undefined;\n      const aliasHighlights = commandPick.commandAlias ? AbstractCommandsQuickAccessProvider_1.WORD_FILTER(filter, commandPick.commandAlias) ?? undefined : undefined;\n      // Add if matching in label or alias\n      if (labelHighlights || aliasHighlights) {\n        commandPick.highlights = {\n          label: labelHighlights,\n          detail: this.options.showAlias ? aliasHighlights : undefined\n        };\n        filteredCommandPicks.push(commandPick);\n      }\n      // Also add if we have a 100% command ID match\n      else if (filter === commandPick.commandId) {\n        filteredCommandPicks.push(commandPick);\n      }\n      // Handle tf-idf scoring for the rest if there's a filter\n      else if (filter.length >= 3) {\n        const tfidf = runTfidf();\n        if (token.isCancellationRequested) {\n          return [];\n        }\n        // Add if we have a tf-idf score\n        const tfidfScore = tfidf.find(score => score.key === commandPick.commandId);\n        if (tfidfScore) {\n          commandPick.tfIdfScore = tfidfScore.score;\n          filteredCommandPicks.push(commandPick);\n        }\n      }\n    }\n    // Add description to commands that have duplicate labels\n    const mapLabelToCommand = new Map();\n    for (const commandPick of filteredCommandPicks) {\n      const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\n      if (existingCommandForLabel) {\n        commandPick.description = commandPick.commandId;\n        existingCommandForLabel.description = existingCommandForLabel.commandId;\n      } else {\n        mapLabelToCommand.set(commandPick.label, commandPick);\n      }\n    }\n    // Sort by MRU order and fallback to name otherwise\n    filteredCommandPicks.sort((commandPickA, commandPickB) => {\n      // If a result came from tf-idf, we want to put that towards the bottom\n      if (commandPickA.tfIdfScore && commandPickB.tfIdfScore) {\n        if (commandPickA.tfIdfScore === commandPickB.tfIdfScore) {\n          return commandPickA.label.localeCompare(commandPickB.label); // prefer lexicographically smaller command\n        }\n        return commandPickB.tfIdfScore - commandPickA.tfIdfScore; // prefer higher tf-idf score\n      } else if (commandPickA.tfIdfScore) {\n        return 1; // first command has a score but other doesn't so other wins\n      } else if (commandPickB.tfIdfScore) {\n        return -1; // other command has a score but first doesn't so first wins\n      }\n      const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\n      const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\n      if (commandACounter && commandBCounter) {\n        return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\n      }\n      if (commandACounter) {\n        return -1; // first command was used, so it wins over the non used one\n      }\n      if (commandBCounter) {\n        return 1; // other command was used so it wins over the command\n      }\n      if (this.options.suggestedCommandIds) {\n        const commandASuggestion = this.options.suggestedCommandIds.has(commandPickA.commandId);\n        const commandBSuggestion = this.options.suggestedCommandIds.has(commandPickB.commandId);\n        if (commandASuggestion && commandBSuggestion) {\n          return 0; // honor the order of the array\n        }\n        if (commandASuggestion) {\n          return -1; // first command was suggested, so it wins over the non suggested one\n        }\n        if (commandBSuggestion) {\n          return 1; // other command was suggested so it wins over the command\n        }\n      }\n      // both commands were never used, so we sort by name\n      return commandPickA.label.localeCompare(commandPickB.label);\n    });\n    const commandPicks = [];\n    let addOtherSeparator = false;\n    let addSuggestedSeparator = true;\n    let addCommonlyUsedSeparator = !!this.options.suggestedCommandIds;\n    for (let i = 0; i < filteredCommandPicks.length; i++) {\n      const commandPick = filteredCommandPicks[i];\n      // Separator: recently used\n      if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\n        commandPicks.push({\n          type: 'separator',\n          label: localize('recentlyUsed', \"recently used\")\n        });\n        addOtherSeparator = true;\n      }\n      if (addSuggestedSeparator && commandPick.tfIdfScore !== undefined) {\n        commandPicks.push({\n          type: 'separator',\n          label: localize('suggested', \"similar commands\")\n        });\n        addSuggestedSeparator = false;\n      }\n      // Separator: commonly used\n      if (addCommonlyUsedSeparator && commandPick.tfIdfScore === undefined && !this.commandsHistory.peek(commandPick.commandId) && this.options.suggestedCommandIds?.has(commandPick.commandId)) {\n        commandPicks.push({\n          type: 'separator',\n          label: localize('commonlyUsed', \"commonly used\")\n        });\n        addOtherSeparator = true;\n        addCommonlyUsedSeparator = false;\n      }\n      // Separator: other commands\n      if (addOtherSeparator && commandPick.tfIdfScore === undefined && !this.commandsHistory.peek(commandPick.commandId) && !this.options.suggestedCommandIds?.has(commandPick.commandId)) {\n        commandPicks.push({\n          type: 'separator',\n          label: localize('morecCommands', \"other commands\")\n        });\n        addOtherSeparator = false;\n      }\n      // Command\n      commandPicks.push(this.toCommandPick(commandPick, runOptions));\n    }\n    if (!this.hasAdditionalCommandPicks(filter, token)) {\n      return commandPicks;\n    }\n    return {\n      picks: commandPicks,\n      additionalPicks: (async () => {\n        const additionalCommandPicks = await this.getAdditionalCommandPicks(allCommandPicks, filteredCommandPicks, filter, token);\n        if (token.isCancellationRequested) {\n          return [];\n        }\n        const commandPicks = additionalCommandPicks.map(commandPick => this.toCommandPick(commandPick, runOptions));\n        // Basically, if we haven't already added a separator, we add one before the additional picks so long\n        // as one hasn't been added to the start of the array.\n        if (addSuggestedSeparator && commandPicks[0]?.type !== 'separator') {\n          commandPicks.unshift({\n            type: 'separator',\n            label: localize('suggested', \"similar commands\")\n          });\n        }\n        return commandPicks;\n      })()\n    };\n  }\n  toCommandPick(commandPick, runOptions) {\n    if (commandPick.type === 'separator') {\n      return commandPick;\n    }\n    const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\n    const ariaLabel = keybinding ? localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) : commandPick.label;\n    return {\n      ...commandPick,\n      ariaLabel,\n      detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined,\n      keybinding,\n      accept: async () => {\n        // Add to history\n        this.commandsHistory.push(commandPick.commandId);\n        // Telementry\n        this.telemetryService.publicLog2('workbenchActionExecuted', {\n          id: commandPick.commandId,\n          from: runOptions?.from ?? 'quick open'\n        });\n        // Run\n        try {\n          commandPick.args?.length ? await this.commandService.executeCommand(commandPick.commandId, ...commandPick.args) : await this.commandService.executeCommand(commandPick.commandId);\n        } catch (error) {\n          if (!isCancellationError(error)) {\n            this.dialogService.error(localize('canNotRun', \"Command '{0}' resulted in an error\", commandPick.label), toErrorMessage(error));\n          }\n        }\n      }\n    };\n  }\n  // TF-IDF string to be indexed\n  getTfIdfChunk({\n    label,\n    commandAlias,\n    commandDescription\n  }) {\n    let chunk = label;\n    if (commandAlias && commandAlias !== label) {\n      chunk += ` - ${commandAlias}`;\n    }\n    if (commandDescription && commandDescription.value !== label) {\n      // If the original is the same as the value, don't add it\n      chunk += ` - ${commandDescription.value === commandDescription.original ? commandDescription.value : `${commandDescription.value} (${commandDescription.original})`}`;\n    }\n    return chunk;\n  }\n};\nAbstractCommandsQuickAccessProvider = AbstractCommandsQuickAccessProvider_1 = __decorate([__param(1, IInstantiationService), __param(2, IKeybindingService), __param(3, ICommandService), __param(4, ITelemetryService), __param(5, IDialogService)], AbstractCommandsQuickAccessProvider);\nexport { AbstractCommandsQuickAccessProvider };\nlet CommandsHistory = /*#__PURE__*/(() => {\n  let CommandsHistory = class CommandsHistory extends Disposable {\n    static {\n      CommandsHistory_1 = this;\n    }\n    static {\n      this.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\n    }\n    static {\n      this.PREF_KEY_CACHE = 'commandPalette.mru.cache';\n    }\n    static {\n      this.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\n    }\n    static {\n      this.counter = 1;\n    }\n    static {\n      this.hasChanges = false;\n    }\n    constructor(storageService, configurationService, logService) {\n      super();\n      this.storageService = storageService;\n      this.configurationService = configurationService;\n      this.logService = logService;\n      this.configuredCommandsHistoryLength = 0;\n      this.updateConfiguration();\n      this.load();\n      this.registerListeners();\n    }\n    registerListeners() {\n      this._register(this.configurationService.onDidChangeConfiguration(e => this.updateConfiguration(e)));\n      this._register(this.storageService.onWillSaveState(e => {\n        if (e.reason === WillSaveStateReason.SHUTDOWN) {\n          // Commands history is very dynamic and so we limit impact\n          // on storage to only save on shutdown. This helps reduce\n          // the overhead of syncing this data across machines.\n          this.saveState();\n        }\n      }));\n    }\n    updateConfiguration(e) {\n      if (e && !e.affectsConfiguration('workbench.commandPalette.history')) {\n        return;\n      }\n      this.configuredCommandsHistoryLength = CommandsHistory_1.getConfiguredCommandHistoryLength(this.configurationService);\n      if (CommandsHistory_1.cache && CommandsHistory_1.cache.limit !== this.configuredCommandsHistoryLength) {\n        CommandsHistory_1.cache.limit = this.configuredCommandsHistoryLength;\n        CommandsHistory_1.hasChanges = true;\n      }\n    }\n    load() {\n      const raw = this.storageService.get(CommandsHistory_1.PREF_KEY_CACHE, 0 /* StorageScope.PROFILE */);\n      let serializedCache;\n      if (raw) {\n        try {\n          serializedCache = JSON.parse(raw);\n        } catch (error) {\n          this.logService.error(`[CommandsHistory] invalid data: ${error}`);\n        }\n      }\n      const cache = CommandsHistory_1.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\n      if (serializedCache) {\n        let entries;\n        if (serializedCache.usesLRU) {\n          entries = serializedCache.entries;\n        } else {\n          entries = serializedCache.entries.sort((a, b) => a.value - b.value);\n        }\n        entries.forEach(entry => cache.set(entry.key, entry.value));\n      }\n      CommandsHistory_1.counter = this.storageService.getNumber(CommandsHistory_1.PREF_KEY_COUNTER, 0 /* StorageScope.PROFILE */, CommandsHistory_1.counter);\n    }\n    push(commandId) {\n      if (!CommandsHistory_1.cache) {\n        return;\n      }\n      CommandsHistory_1.cache.set(commandId, CommandsHistory_1.counter++); // set counter to command\n      CommandsHistory_1.hasChanges = true;\n    }\n    peek(commandId) {\n      return CommandsHistory_1.cache?.peek(commandId);\n    }\n    saveState() {\n      if (!CommandsHistory_1.cache) {\n        return;\n      }\n      if (!CommandsHistory_1.hasChanges) {\n        return;\n      }\n      const serializedCache = {\n        usesLRU: true,\n        entries: []\n      };\n      CommandsHistory_1.cache.forEach((value, key) => serializedCache.entries.push({\n        key,\n        value\n      }));\n      this.storageService.store(CommandsHistory_1.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n      this.storageService.store(CommandsHistory_1.PREF_KEY_COUNTER, CommandsHistory_1.counter, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n      CommandsHistory_1.hasChanges = false;\n    }\n    static getConfiguredCommandHistoryLength(configurationService) {\n      const config = configurationService.getValue();\n      const configuredCommandHistoryLength = config.workbench?.commandPalette?.history;\n      if (typeof configuredCommandHistoryLength === 'number') {\n        return configuredCommandHistoryLength;\n      }\n      return CommandsHistory_1.DEFAULT_COMMANDS_HISTORY_LENGTH;\n    }\n  };\n  return CommandsHistory;\n})();\nCommandsHistory = CommandsHistory_1 = __decorate([__param(0, IStorageService), __param(1, IConfigurationService), __param(2, ILogService)], CommandsHistory);\nexport { CommandsHistory };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nfunction countMapFrom(values) {\n  const map = new Map();\n  for (const value of values) {\n    map.set(value, (map.get(value) ?? 0) + 1);\n  }\n  return map;\n}\n/**\n * Implementation of tf-idf (term frequency-inverse document frequency) for a set of\n * documents where each document contains one or more chunks of text.\n * Each document is identified by a key, and the score for each document is computed\n * by taking the max score over all the chunks in the document.\n */\nexport class TfIdfCalculator {\n  constructor() {\n    /**\n     * Total number of chunks\n     */\n    this.chunkCount = 0;\n    this.chunkOccurrences = new Map();\n    this.documents = new Map();\n  }\n  calculateScores(query, token) {\n    const embedding = this.computeEmbedding(query);\n    const idfCache = new Map();\n    const scores = [];\n    // For each document, generate one score\n    for (const [key, doc] of this.documents) {\n      if (token.isCancellationRequested) {\n        return [];\n      }\n      for (const chunk of doc.chunks) {\n        const score = this.computeSimilarityScore(chunk, embedding, idfCache);\n        if (score > 0) {\n          scores.push({\n            key,\n            score\n          });\n        }\n      }\n    }\n    return scores;\n  }\n  /**\n   * Count how many times each term (word) appears in a string.\n   */\n  static termFrequencies(input) {\n    return countMapFrom(TfIdfCalculator.splitTerms(input));\n  }\n  /**\n   * Break a string into terms (words).\n   */\n  static *splitTerms(input) {\n    const normalize = word => word.toLowerCase();\n    // Only match on words that are at least 3 characters long and start with a letter\n    for (const [word] of input.matchAll(/\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b/gu)) {\n      yield normalize(word);\n      const camelParts = word.replace(/([a-z])([A-Z])/g, '$1 $2').split(/\\s+/g);\n      if (camelParts.length > 1) {\n        for (const part of camelParts) {\n          // Require at least 3 letters in the parts of a camel case word\n          if (part.length > 2 && /\\p{Letter}{3,}/gu.test(part)) {\n            yield normalize(part);\n          }\n        }\n      }\n    }\n  }\n  updateDocuments(documents) {\n    for (const {\n      key\n    } of documents) {\n      this.deleteDocument(key);\n    }\n    for (const doc of documents) {\n      const chunks = [];\n      for (const text of doc.textChunks) {\n        // TODO: See if we can compute the tf lazily\n        // The challenge is that we need to also update the `chunkOccurrences`\n        // and all of those updates need to get flushed before the real TF-IDF of\n        // anything is computed.\n        const tf = TfIdfCalculator.termFrequencies(text);\n        // Update occurrences list\n        for (const term of tf.keys()) {\n          this.chunkOccurrences.set(term, (this.chunkOccurrences.get(term) ?? 0) + 1);\n        }\n        chunks.push({\n          text,\n          tf\n        });\n      }\n      this.chunkCount += chunks.length;\n      this.documents.set(doc.key, {\n        chunks\n      });\n    }\n    return this;\n  }\n  deleteDocument(key) {\n    const doc = this.documents.get(key);\n    if (!doc) {\n      return;\n    }\n    this.documents.delete(key);\n    this.chunkCount -= doc.chunks.length;\n    // Update term occurrences for the document\n    for (const chunk of doc.chunks) {\n      for (const term of chunk.tf.keys()) {\n        const currentOccurrences = this.chunkOccurrences.get(term);\n        if (typeof currentOccurrences === 'number') {\n          const newOccurrences = currentOccurrences - 1;\n          if (newOccurrences <= 0) {\n            this.chunkOccurrences.delete(term);\n          } else {\n            this.chunkOccurrences.set(term, newOccurrences);\n          }\n        }\n      }\n    }\n  }\n  computeSimilarityScore(chunk, queryEmbedding, idfCache) {\n    // Compute the dot product between the chunk's embedding and the query embedding\n    // Note that the chunk embedding is computed lazily on a per-term basis.\n    // This lets us skip a large number of calculations because the majority\n    // of chunks do not share any terms with the query.\n    let sum = 0;\n    for (const [term, termTfidf] of Object.entries(queryEmbedding)) {\n      const chunkTf = chunk.tf.get(term);\n      if (!chunkTf) {\n        // Term does not appear in chunk so it has no contribution\n        continue;\n      }\n      let chunkIdf = idfCache.get(term);\n      if (typeof chunkIdf !== 'number') {\n        chunkIdf = this.computeIdf(term);\n        idfCache.set(term, chunkIdf);\n      }\n      const chunkTfidf = chunkTf * chunkIdf;\n      sum += chunkTfidf * termTfidf;\n    }\n    return sum;\n  }\n  computeEmbedding(input) {\n    const tf = TfIdfCalculator.termFrequencies(input);\n    return this.computeTfidf(tf);\n  }\n  computeIdf(term) {\n    const chunkOccurrences = this.chunkOccurrences.get(term) ?? 0;\n    return chunkOccurrences > 0 ? Math.log((this.chunkCount + 1) / chunkOccurrences) : 0;\n  }\n  computeTfidf(termFrequencies) {\n    const embedding = Object.create(null);\n    for (const [word, occurrences] of termFrequencies) {\n      const idf = this.computeIdf(word);\n      if (idf > 0) {\n        embedding[word] = occurrences * idf;\n      }\n    }\n    return embedding;\n  }\n}\n/**\n * Normalize the scores to be between 0 and 1 and sort them decending.\n * @param scores array of scores from {@link TfIdfCalculator.calculateScores}\n * @returns normalized scores\n */\nexport function normalizeTfIdfScores(scores) {\n  // copy of scores\n  const result = scores.slice(0);\n  // sort descending\n  result.sort((a, b) => b.score - a.score);\n  // normalize\n  const max = result[0]?.score ?? 0;\n  if (max > 0) {\n    for (const score of result) {\n      score.score /= max;\n    }\n  }\n  return result;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { timeout } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { isFunction } from '../../../base/common/types.js';\nexport var TriggerAction = /*#__PURE__*/function (TriggerAction) {\n  /**\n   * Do nothing after the button was clicked.\n   */\n  TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\n  /**\n   * Close the picker.\n   */\n  TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\n  /**\n   * Update the results of the picker.\n   */\n  TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\n  /**\n   * Remove the item from the picker.\n   */\n  TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\n  return TriggerAction;\n}(TriggerAction || {});\nfunction isPicksWithActive(obj) {\n  const candidate = obj;\n  return Array.isArray(candidate.items);\n}\nfunction isFastAndSlowPicks(obj) {\n  const candidate = obj;\n  return !!candidate.picks && candidate.additionalPicks instanceof Promise;\n}\nexport class PickerQuickAccessProvider extends Disposable {\n  constructor(prefix, options) {\n    super();\n    this.prefix = prefix;\n    this.options = options;\n  }\n  provide(picker, token, runOptions) {\n    const disposables = new DisposableStore();\n    // Apply options if any\n    picker.canAcceptInBackground = !!this.options?.canAcceptInBackground;\n    // Disable filtering & sorting, we control the results\n    picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n    // Set initial picks and update on type\n    let picksCts = undefined;\n    const picksDisposable = disposables.add(new MutableDisposable());\n    const updatePickerItems = async () => {\n      const picksDisposables = picksDisposable.value = new DisposableStore();\n      // Cancel any previous ask for picks and busy\n      picksCts?.dispose(true);\n      picker.busy = false;\n      // Create new cancellation source for this run\n      picksCts = new CancellationTokenSource(token);\n      // Collect picks and support both long running and short or combined\n      const picksToken = picksCts.token;\n      let picksFilter = picker.value.substring(this.prefix.length);\n      if (!this.options?.shouldSkipTrimPickFilter) {\n        picksFilter = picksFilter.trim();\n      }\n      const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken, runOptions);\n      const applyPicks = (picks, skipEmpty) => {\n        let items;\n        let activeItem = undefined;\n        if (isPicksWithActive(picks)) {\n          items = picks.items;\n          activeItem = picks.active;\n        } else {\n          items = picks;\n        }\n        if (items.length === 0) {\n          if (skipEmpty) {\n            return false;\n          }\n          // We show the no results pick if we have no input to prevent completely empty pickers #172613\n          if ((picksFilter.length > 0 || picker.hideInput) && this.options?.noResultsPick) {\n            if (isFunction(this.options.noResultsPick)) {\n              items = [this.options.noResultsPick(picksFilter)];\n            } else {\n              items = [this.options.noResultsPick];\n            }\n          }\n        }\n        picker.items = items;\n        if (activeItem) {\n          picker.activeItems = [activeItem];\n        }\n        return true;\n      };\n      const applyFastAndSlowPicks = async fastAndSlowPicks => {\n        let fastPicksApplied = false;\n        let slowPicksApplied = false;\n        await Promise.all([\n        // Fast Picks: if `mergeDelay` is configured, in order to reduce\n        // amount of flicker, we race against the slow picks over some delay\n        // and then set the fast picks.\n        // If the slow picks are faster, we reduce the flicker by only\n        // setting the items once.\n        (async () => {\n          if (typeof fastAndSlowPicks.mergeDelay === 'number') {\n            await timeout(fastAndSlowPicks.mergeDelay);\n            if (picksToken.isCancellationRequested) {\n              return;\n            }\n          }\n          if (!slowPicksApplied) {\n            fastPicksApplied = applyPicks(fastAndSlowPicks.picks, true /* skip over empty to reduce flicker */);\n          }\n        })(),\n        // Slow Picks: we await the slow picks and then set them at\n        // once together with the fast picks, but only if we actually\n        // have additional results.\n        (async () => {\n          picker.busy = true;\n          try {\n            const awaitedAdditionalPicks = await fastAndSlowPicks.additionalPicks;\n            if (picksToken.isCancellationRequested) {\n              return;\n            }\n            let picks;\n            let activePick = undefined;\n            if (isPicksWithActive(fastAndSlowPicks.picks)) {\n              picks = fastAndSlowPicks.picks.items;\n              activePick = fastAndSlowPicks.picks.active;\n            } else {\n              picks = fastAndSlowPicks.picks;\n            }\n            let additionalPicks;\n            let additionalActivePick = undefined;\n            if (isPicksWithActive(awaitedAdditionalPicks)) {\n              additionalPicks = awaitedAdditionalPicks.items;\n              additionalActivePick = awaitedAdditionalPicks.active;\n            } else {\n              additionalPicks = awaitedAdditionalPicks;\n            }\n            if (additionalPicks.length > 0 || !fastPicksApplied) {\n              // If we do not have any activePick or additionalActivePick\n              // we try to preserve the currently active pick from the\n              // fast results. This fixes an issue where the user might\n              // have made a pick active before the additional results\n              // kick in.\n              // See https://github.com/microsoft/vscode/issues/102480\n              let fallbackActivePick = undefined;\n              if (!activePick && !additionalActivePick) {\n                const fallbackActivePickCandidate = picker.activeItems[0];\n                if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\n                  fallbackActivePick = fallbackActivePickCandidate;\n                }\n              }\n              applyPicks({\n                items: [...picks, ...additionalPicks],\n                active: activePick || additionalActivePick || fallbackActivePick\n              });\n            }\n          } finally {\n            if (!picksToken.isCancellationRequested) {\n              picker.busy = false;\n            }\n            slowPicksApplied = true;\n          }\n        })()]);\n      };\n      // No Picks\n      if (providedPicks === null) {\n        // Ignore\n      }\n      // Fast and Slow Picks\n      else if (isFastAndSlowPicks(providedPicks)) {\n        await applyFastAndSlowPicks(providedPicks);\n      }\n      // Fast Picks\n      else if (!(providedPicks instanceof Promise)) {\n        applyPicks(providedPicks);\n      }\n      // Slow Picks\n      else {\n        picker.busy = true;\n        try {\n          const awaitedPicks = await providedPicks;\n          if (picksToken.isCancellationRequested) {\n            return;\n          }\n          if (isFastAndSlowPicks(awaitedPicks)) {\n            await applyFastAndSlowPicks(awaitedPicks);\n          } else {\n            applyPicks(awaitedPicks);\n          }\n        } finally {\n          if (!picksToken.isCancellationRequested) {\n            picker.busy = false;\n          }\n        }\n      }\n    };\n    disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n    updatePickerItems();\n    // Accept the pick on accept and hide picker\n    disposables.add(picker.onDidAccept(event => {\n      if (runOptions?.handleAccept) {\n        if (!event.inBackground) {\n          picker.hide(); // hide picker unless we accept in background\n        }\n        runOptions.handleAccept?.(picker.activeItems[0]);\n        return;\n      }\n      const [item] = picker.selectedItems;\n      if (typeof item?.accept === 'function') {\n        if (!event.inBackground) {\n          picker.hide(); // hide picker unless we accept in background\n        }\n        item.accept(picker.keyMods, event);\n      }\n    }));\n    const buttonTrigger = async (button, item) => {\n      if (typeof item.trigger !== 'function') {\n        return;\n      }\n      const buttonIndex = item.buttons?.indexOf(button) ?? -1;\n      if (buttonIndex >= 0) {\n        const result = item.trigger(buttonIndex, picker.keyMods);\n        const action = typeof result === 'number' ? result : await result;\n        if (token.isCancellationRequested) {\n          return;\n        }\n        switch (action) {\n          case TriggerAction.NO_ACTION:\n            break;\n          case TriggerAction.CLOSE_PICKER:\n            picker.hide();\n            break;\n          case TriggerAction.REFRESH_PICKER:\n            updatePickerItems();\n            break;\n          case TriggerAction.REMOVE_ITEM:\n            {\n              const index = picker.items.indexOf(item);\n              if (index !== -1) {\n                const items = picker.items.slice();\n                const removed = items.splice(index, 1);\n                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\n                const keepScrollPositionBefore = picker.keepScrollPosition;\n                picker.keepScrollPosition = true;\n                picker.items = items;\n                if (activeItems) {\n                  picker.activeItems = activeItems;\n                }\n                picker.keepScrollPosition = keepScrollPositionBefore;\n              }\n              break;\n            }\n        }\n      }\n    };\n    // Trigger the pick with button index if button triggered\n    disposables.add(picker.onDidTriggerItemButton(({\n      button,\n      item\n    }) => buttonTrigger(button, item)));\n    disposables.add(picker.onDidTriggerSeparatorButton(({\n      button,\n      separator\n    }) => buttonTrigger(button, separator)));\n    return disposables;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n  constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n    super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n  }\n};\nStandaloneReferencesController = __decorate([__param(1, IContextKeyService), __param(2, ICodeEditorService), __param(3, INotificationService), __param(4, IInstantiationService), __param(5, IStorageService), __param(6, IConfigurationService)], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController, 4 /* EditorContributionInstantiation.Lazy */);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.toggleHighContrast',\n      label: ToggleHighContrastNLS.toggleHighContrast,\n      alias: 'Toggle High Contrast Theme',\n      precondition: undefined\n    });\n    this._originalThemeName = null;\n  }\n  run(accessor, editor) {\n    const standaloneThemeService = accessor.get(IStandaloneThemeService);\n    const currentTheme = standaloneThemeService.getColorTheme();\n    if (isHighContrast(currentTheme.type)) {\n      // We must toggle back to the integrator's theme\n      standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n      this._originalThemeName = null;\n    } else {\n      standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n      this._originalThemeName = currentTheme.themeName;\n    }\n  }\n}\nregisterEditorAction(ToggleHighContrast);","import { languages } from 'monaco-editor';\r\nimport { taskRegex } from 'app/exercises/programming/shared/instructions-render/extensions/programming-exercise-task.extension';\r\n\r\nexport const CUSTOM_MARKDOWN_LANGUAGE_ID = 'custom-md';\r\n/*\r\n * Language definition taken from monaco-editor/esm/vs/basic-languages/markdown/markdown\r\n */\r\n\r\n// src/basic-languages/markdown/markdown.ts\r\nexport const CUSTOM_MARKDOWN_CONFIG: languages.LanguageConfiguration = {\r\n    comments: {\r\n        blockComment: ['<!--', '-->'],\r\n    },\r\n    brackets: [\r\n        ['{', '}'],\r\n        ['[', ']'],\r\n        ['(', ')'],\r\n    ],\r\n    autoClosingPairs: [\r\n        { open: '{', close: '}' },\r\n        { open: '[', close: ']' },\r\n        { open: '(', close: ')' },\r\n        { open: '<', close: '>', notIn: ['string'] },\r\n    ],\r\n    surroundingPairs: [\r\n        { open: '(', close: ')' },\r\n        { open: '[', close: ']' },\r\n        { open: '`', close: '`' },\r\n    ],\r\n    folding: {\r\n        markers: {\r\n            start: new RegExp('^\\\\s*<!--\\\\s*#?region\\\\b.*-->'),\r\n            end: new RegExp('^\\\\s*<!--\\\\s*#?endregion\\\\b.*-->'),\r\n        },\r\n    },\r\n};\r\nexport const CUSTOM_MARKDOWN_LANGUAGE: languages.IMonarchLanguage = {\r\n    defaultToken: '',\r\n    tokenPostfix: '.custom-md',\r\n    // escape codes\r\n    control: /[\\\\`*_[\\]{}()#+\\-.!]/,\r\n    noncontrol: /[^\\\\`*_[\\]{}()#+\\-.!]/,\r\n    escapes: /\\\\(?:@control)/,\r\n    // escape codes for javascript/CSS strings\r\n    jsescapes: /\\\\(?:[btnfr\\\\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,\r\n    // non matched elements\r\n    empty: ['area', 'base', 'basefont', 'br', 'col', 'frame', 'hr', 'img', 'input', 'isindex', 'link', 'meta', 'param'],\r\n    tokenizer: {\r\n        root: [\r\n            [/^[@]startuml$/, { token: 'task', next: '@uml' }],\r\n            // We parse tasks immediately to prevent problems with the bracket matching\r\n            [taskRegex, 'task'],\r\n            // Katex formula\r\n            [/\\$\\$.*\\$\\$/, 'variable.source'],\r\n            // markdown tables\r\n            [/^\\s*\\|/, '@rematch', '@table_header'],\r\n            // headers (with #)\r\n            [/^(\\s{0,3})(#+)((?:[^\\\\#]|@escapes)+)((?:#+)?)/, ['white', 'keyword', 'keyword', 'keyword']],\r\n            // headers (with =)\r\n            [/^\\s*(=+|-+)\\s*$/, 'keyword'],\r\n            // headers (with ***)\r\n            [/^\\s*((\\*[ ]?)+)\\s*$/, 'meta.separator'],\r\n            // quote\r\n            [/^\\s*>+/, 'comment'],\r\n            // list (starting with * or number)\r\n            [/^\\s*([*\\-+:]|\\d+\\.)\\s/, 'keyword'],\r\n            // code block (4 spaces indent).\r\n            [/^(\\t|[ ]{4})[^ ].*$/, 'string'],\r\n            // code block (3 tilde)\r\n            [/^\\s*~~~\\s*((?:\\w|[/\\-#])+)?\\s*$/, { token: 'string', next: '@codeblock' }],\r\n            // github style code blocks (with backticks and language)\r\n            [/^\\s*```\\s*((?:\\w|[/\\-#])+).*$/, { token: 'string', next: '@codeblockgh', nextEmbedded: '$1' }],\r\n            // github style code blocks (with backticks but no language)\r\n            [/^\\s*```\\s*$/, { token: 'string', next: '@codeblock' }],\r\n            // markup within lines\r\n            { include: '@linecontent' },\r\n        ],\r\n        table_header: [\r\n            { include: '@table_common' },\r\n            [/[^|]+/, 'keyword.table.header'],\r\n            // table header\r\n        ],\r\n        table_body: [{ include: '@table_common' }, { include: '@linecontent' }],\r\n        table_common: [\r\n            [/\\s*[-:]+\\s*/, { token: 'keyword', switchTo: 'table_body' }],\r\n            // header-divider\r\n            [/^\\s*\\|/, 'keyword.table.left'],\r\n            // opening |\r\n            [/^\\s*[^|]/, '@rematch', '@pop'],\r\n            // exiting\r\n            [/^\\s*$/, '@rematch', '@pop'],\r\n            // exiting\r\n            [\r\n                /\\|/,\r\n                {\r\n                    cases: {\r\n                        '@eos': 'keyword.table.right',\r\n                        // closing |\r\n                        '@default': 'keyword.table.middle',\r\n                        // inner |\r\n                    },\r\n                },\r\n            ],\r\n        ],\r\n        codeblock: [\r\n            [/^\\s*~~~\\s*$/, { token: 'string', next: '@pop' }],\r\n            [/^\\s*```\\s*$/, { token: 'string', next: '@pop' }],\r\n            [/.*$/, 'variable.source'],\r\n        ],\r\n        // github style code blocks\r\n        codeblockgh: [\r\n            [/```\\s*$/, { token: 'string', next: '@pop', nextEmbedded: '@pop' }],\r\n            [/[^`]+/, 'variable.source'],\r\n        ],\r\n        linecontent: [\r\n            // escapes\r\n            [/&\\w+;/, 'string.escape'],\r\n            [/@escapes/, 'escape'],\r\n            // various markup\r\n            [/\\b__([^\\\\_]|@escapes|_(?!_))+__\\b/, 'strong'],\r\n            [/\\*\\*([^\\\\*]|@escapes|\\*(?!\\*))+\\*\\*/, 'strong'],\r\n            [/\\b_[^_]+_\\b/, 'emphasis'],\r\n            [/\\*([^\\\\*]|@escapes)+\\*/, 'emphasis'],\r\n            [/`([^\\\\`]|@escapes)+`/, 'variable'],\r\n            // links\r\n            [/\\{+[^}]+\\}+/, 'string.target'],\r\n            [/(!?\\[)((?:[^\\]\\\\]|@escapes)*)(\\]\\([^)]+\\))/, ['string.link', '', 'string.link']],\r\n            [/(!?\\[)((?:[^\\]\\\\]|@escapes)*)(\\])/, 'string.link'],\r\n            // or html\r\n            { include: 'html' },\r\n        ],\r\n        // Note: it is tempting to rather switch to the real HTML mode instead of building our own here\r\n        // but currently there is a limitation in Monarch that prevents us from doing it: The opening\r\n        // '<' would start the HTML mode, however there is no way to jump 1 character back to let the\r\n        // HTML mode also tokenize the opening angle bracket. Thus, even though we could jump to HTML,\r\n        // we cannot correctly tokenize it in that mode yet.\r\n        html: [\r\n            // html tags\r\n            [/<(\\w+)\\/>/, 'tag'],\r\n            [\r\n                /<(\\w+)(-|\\w)*/,\r\n                {\r\n                    cases: {\r\n                        '@empty': { token: 'tag', next: '@tag.$1' },\r\n                        '@default': { token: 'tag', next: '@tag.$1' },\r\n                    },\r\n                },\r\n            ],\r\n            [/<\\/(\\w+)(-|\\w)*\\s*>/, { token: 'tag' }],\r\n            [/<!--/, 'comment', '@comment'],\r\n        ],\r\n        comment: [\r\n            [/[^<-]+/, 'comment.content'],\r\n            [/-->/, 'comment', '@pop'],\r\n            [/<!--/, 'comment.content.invalid'],\r\n            [/[<-]/, 'comment.content'],\r\n        ],\r\n        // Almost full HTML tag matching, complete with embedded scripts & styles\r\n        tag: [\r\n            [/[ \\t\\r\\n]+/, 'white'],\r\n            [/(type)(\\s*=\\s*)(\")([^\"]+)(\")/, ['attribute.name.html', 'delimiter.html', 'string.html', { token: 'string.html', switchTo: '@tag.$S2.$4' }, 'string.html']],\r\n            [/(type)(\\s*=\\s*)(')([^']+)(')/, ['attribute.name.html', 'delimiter.html', 'string.html', { token: 'string.html', switchTo: '@tag.$S2.$4' }, 'string.html']],\r\n            [/(\\w+)(\\s*=\\s*)(\"[^\"]*\"|'[^']*')/, ['attribute.name.html', 'delimiter.html', 'string.html']],\r\n            [/\\w+/, 'attribute.name.html'],\r\n            [/\\/>/, 'tag', '@pop'],\r\n            [\r\n                />/,\r\n                {\r\n                    cases: {\r\n                        '$S2==style': {\r\n                            token: 'tag',\r\n                            switchTo: 'embeddedStyle',\r\n                            nextEmbedded: 'text/css',\r\n                        },\r\n                        '$S2==script': {\r\n                            cases: {\r\n                                $S3: {\r\n                                    token: 'tag',\r\n                                    switchTo: 'embeddedScript',\r\n                                    nextEmbedded: '$S3',\r\n                                },\r\n                                '@default': {\r\n                                    token: 'tag',\r\n                                    switchTo: 'embeddedScript',\r\n                                    nextEmbedded: 'text/javascript',\r\n                                },\r\n                            },\r\n                        },\r\n                        '@default': { token: 'tag', next: '@pop' },\r\n                    },\r\n                },\r\n            ],\r\n        ],\r\n        embeddedStyle: [\r\n            [/[^<]+/, ''],\r\n            [/<\\/style\\s*>/, { token: '@rematch', next: '@pop', nextEmbedded: '@pop' }],\r\n            [/</, ''],\r\n        ],\r\n        embeddedScript: [\r\n            [/[^<]+/, ''],\r\n            [/<\\/script\\s*>/, { token: '@rematch', next: '@pop', nextEmbedded: '@pop' }],\r\n            [/</, ''],\r\n        ],\r\n        uml: [\r\n            [/^[@]enduml$/, { token: 'task', next: '@pop' }],\r\n            [/.*$/, 'variable.source'], // TODO: In the future, this could be used to define custom syntax for UML diagrams in markdown.\r\n        ],\r\n    },\r\n};\r\n","import { MonacoThemeDefinition } from 'app/shared/monaco-editor/model/themes/monaco-theme-definition.interface';\r\n\r\nexport const MONACO_DARK_THEME_DEFINITION: MonacoThemeDefinition = {\r\n    id: 'custom-dark',\r\n    baseTheme: 'vs-dark',\r\n    tokenStyles: [\r\n        {\r\n            token: 'keyword',\r\n            foregroundColor: '#ff7b72',\r\n        },\r\n        {\r\n            token: 'comment',\r\n            foregroundColor: '#9198a1',\r\n        },\r\n        {\r\n            token: 'string',\r\n            foregroundColor: '#a5d6ff',\r\n        },\r\n        {\r\n            token: 'number',\r\n            foregroundColor: '#79c0ff',\r\n        },\r\n    ],\r\n    editorColors: {\r\n        backgroundColor: '#181a18',\r\n        lineHighlight: {\r\n            borderColor: '#00000000',\r\n            backgroundColor: '#282a2e',\r\n        },\r\n        lineNumbers: {\r\n            foregroundColor: '#ffffff',\r\n            activeForegroundColor: '#ffffff',\r\n            dimmedForegroundColor: '#ffffff',\r\n        },\r\n        diff: {\r\n            insertedLineBackgroundColor: '#2ea04326',\r\n            insertedTextBackgroundColor: '#2ea04326',\r\n            removedLineBackgroundColor: '#f8514926',\r\n            removedTextBackgroundColor: '#f8514946',\r\n            diagonalFillColor: '#00000000',\r\n            gutter: {\r\n                insertedLineBackgroundColor: '#3fb9504d',\r\n                removedLineBackgroundColor: '#f851494d',\r\n            },\r\n        },\r\n    },\r\n};\r\n","import { MonacoThemeDefinition } from 'app/shared/monaco-editor/model/themes/monaco-theme-definition.interface';\r\nimport * as monaco from 'monaco-editor';\r\n\r\nexport class MonacoEditorTheme {\r\n    constructor(private readonly themeDefinition: MonacoThemeDefinition) {}\r\n\r\n    getId(): string {\r\n        return this.themeDefinition.id;\r\n    }\r\n\r\n    /**\r\n     * Creates a new record without any entries that have a value of `undefined`.\r\n     * @param record The record whose keys to filter.\r\n     * @returns The new record, only containing keys with defined values.\r\n     * @private\r\n     */\r\n    private getRecordWithoutUndefinedEntries(record: Record<string, string | undefined>): Record<string, string> {\r\n        const result: Record<string, string> = {};\r\n        for (const [key, value] of Object.entries(record)) {\r\n            if (value !== undefined) {\r\n                result[key] = value;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    register(): void {\r\n        const colorDefinitions = this.themeDefinition.editorColors;\r\n        // The color keys are available here: https://code.visualstudio.com/api/references/theme-color\r\n        const colors = {\r\n            'editor.background': colorDefinitions.backgroundColor,\r\n            'editor.foreground': colorDefinitions.foregroundColor,\r\n            'editorLineNumber.foreground': colorDefinitions.lineNumbers?.foregroundColor,\r\n            'editorLineNumber.activeForeground': colorDefinitions.lineNumbers?.activeForegroundColor,\r\n            'editorLineNumber.dimmedForeground': colorDefinitions.lineNumbers?.dimmedForegroundColor,\r\n            'editor.lineHighlightBackground': colorDefinitions.lineHighlight?.backgroundColor,\r\n            'editor.lineHighlightBorder': colorDefinitions.lineHighlight?.borderColor,\r\n            'diffEditor.insertedLineBackground': colorDefinitions.diff?.insertedLineBackgroundColor,\r\n            'diffEditor.insertedTextBackground': colorDefinitions.diff?.insertedTextBackgroundColor,\r\n            'diffEditor.removedTextBackground': colorDefinitions.diff?.removedTextBackgroundColor,\r\n            'diffEditor.removedLineBackground': colorDefinitions.diff?.removedLineBackgroundColor,\r\n            'diffEditor.diagonalFill': colorDefinitions.diff?.diagonalFillColor,\r\n            'diffEditorGutter.insertedLineBackground': colorDefinitions.diff?.gutter?.insertedLineBackgroundColor,\r\n            'diffEditorGutter.removedLineBackground': colorDefinitions.diff?.gutter?.removedLineBackgroundColor,\r\n        };\r\n\r\n        const tokenStyleDefinitions = this.themeDefinition.tokenStyles;\r\n        const rules = tokenStyleDefinitions.map((tokenDefinition) => {\r\n            // Language-specific tokens have the key `token.languageId`, e.g. keyword.custom-md\r\n            return {\r\n                token: `${tokenDefinition.token}${tokenDefinition.languageId ? '.' + tokenDefinition.languageId : ''}`,\r\n                foreground: tokenDefinition.foregroundColor,\r\n                background: tokenDefinition.backgroundColor,\r\n                fontStyle: tokenDefinition.fontStyle,\r\n            };\r\n        });\r\n\r\n        // We cannot pass undefined colors to Monaco, so we filter them out to preserve the default values.\r\n        monaco.editor.defineTheme(this.getId(), {\r\n            base: this.themeDefinition.baseTheme,\r\n            inherit: true,\r\n            rules: rules,\r\n            colors: this.getRecordWithoutUndefinedEntries(colors),\r\n        });\r\n    }\r\n}\r\n","import { MonacoThemeDefinition } from 'app/shared/monaco-editor/model/themes/monaco-theme-definition.interface';\r\n\r\nexport const MONACO_LIGHT_THEME_DEFINITION: MonacoThemeDefinition = {\r\n    id: 'custom-light',\r\n    baseTheme: 'vs',\r\n    tokenStyles: [\r\n        {\r\n            token: 'keyword',\r\n            foregroundColor: '#cf222e',\r\n        },\r\n        {\r\n            token: 'comment',\r\n            foregroundColor: '#59636e',\r\n        },\r\n        {\r\n            token: 'string',\r\n            foregroundColor: '#0a3069',\r\n        },\r\n        {\r\n            token: 'number',\r\n            foregroundColor: '#0550ae',\r\n        },\r\n    ],\r\n    editorColors: {\r\n        lineHighlight: {\r\n            borderColor: '#00000000',\r\n            backgroundColor: '#e8e8e8',\r\n        },\r\n        lineNumbers: {\r\n            foregroundColor: '#000000',\r\n            activeForegroundColor: '#000000',\r\n            dimmedForegroundColor: '#000000',\r\n        },\r\n        diff: {\r\n            insertedLineBackgroundColor: '#dafbe1e6',\r\n            insertedTextBackgroundColor: '#aceebbe6',\r\n            removedLineBackgroundColor: '#ffebe9ef',\r\n            removedTextBackgroundColor: '#ff818250',\r\n            diagonalFillColor: '#00000000',\r\n            gutter: {\r\n                insertedLineBackgroundColor: '#d1f8d9',\r\n                removedLineBackgroundColor: '#ffcecb',\r\n            },\r\n        },\r\n    },\r\n};\r\n","import { Injectable, effect, inject } from '@angular/core';\r\nimport { Theme, ThemeService } from 'app/core/theme/theme.service';\r\nimport { CUSTOM_MARKDOWN_CONFIG, CUSTOM_MARKDOWN_LANGUAGE, CUSTOM_MARKDOWN_LANGUAGE_ID } from 'app/shared/monaco-editor/model/languages/monaco-custom-markdown.language';\r\nimport { MONACO_DARK_THEME_DEFINITION } from 'app/shared/monaco-editor/model/themes/monaco-dark.theme';\r\nimport { MonacoEditorTheme } from 'app/shared/monaco-editor/model/themes/monaco-editor-theme.model';\r\nimport { MONACO_LIGHT_THEME_DEFINITION } from 'app/shared/monaco-editor/model/themes/monaco-light.theme';\r\nimport * as monaco from 'monaco-editor';\r\n\r\n/**\r\n * Service providing shared functionality for the Monaco editor.\r\n * This service is intended to be used by components that need to create and manage Monaco editors.\r\n * It also ensures that the editor's theme matches the current theme of Artemis.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class MonacoEditorService {\r\n    private readonly themeService: ThemeService = inject(ThemeService);\r\n    private readonly currentTheme = this.themeService.currentTheme;\r\n\r\n    private lightTheme: MonacoEditorTheme;\r\n    private darkTheme: MonacoEditorTheme;\r\n\r\n    constructor() {\r\n        this.registerCustomThemes();\r\n        this.registerCustomMarkdownLanguage();\r\n\r\n        effect(() => {\r\n            this.applyTheme(this.currentTheme());\r\n        });\r\n    }\r\n\r\n    private registerCustomThemes(): void {\r\n        this.lightTheme = new MonacoEditorTheme(MONACO_LIGHT_THEME_DEFINITION);\r\n        this.darkTheme = new MonacoEditorTheme(MONACO_DARK_THEME_DEFINITION);\r\n        this.lightTheme.register();\r\n        this.darkTheme.register();\r\n    }\r\n\r\n    private registerCustomMarkdownLanguage(): void {\r\n        monaco.languages.register({ id: CUSTOM_MARKDOWN_LANGUAGE_ID });\r\n        monaco.languages.setLanguageConfiguration(CUSTOM_MARKDOWN_LANGUAGE_ID, CUSTOM_MARKDOWN_CONFIG);\r\n        monaco.languages.setMonarchTokensProvider(CUSTOM_MARKDOWN_LANGUAGE_ID, CUSTOM_MARKDOWN_LANGUAGE);\r\n    }\r\n\r\n    /**\r\n     * Applies the given theme to the Monaco editor.\r\n     * @param artemisTheme The theme to apply.\r\n     * @private\r\n     */\r\n    private applyTheme(artemisTheme: Theme): void {\r\n        monaco.editor.setTheme(artemisTheme === Theme.LIGHT ? this.lightTheme.getId() : this.darkTheme.getId());\r\n    }\r\n\r\n    /**\r\n     * Creates a standalone code editor (see {@link MonacoEditorComponent}) with sensible default settings and inserts it into the given DOM element.\r\n     * @param domElement The DOM element to insert the editor into.\r\n     */\r\n    createStandaloneCodeEditor(domElement: HTMLElement): monaco.editor.IStandaloneCodeEditor {\r\n        const editor = monaco.editor.create(domElement, {\r\n            value: '',\r\n            glyphMargin: true,\r\n            minimap: { enabled: false },\r\n            lineNumbersMinChars: 4,\r\n            scrollBeyondLastLine: false,\r\n            lineHeight: 16,\r\n            scrollbar: {\r\n                alwaysConsumeMouseWheel: false, // Prevents the editor from consuming the mouse wheel event, allowing the parent element to scroll.\r\n            },\r\n        });\r\n        editor.getModel()?.setEOL(monaco.editor.EndOfLineSequence.LF);\r\n        return editor;\r\n    }\r\n\r\n    /**\r\n     * Creates a standalone diff editor (see {@link MonacoDiffEditorComponent}) with sensible default settings and inserts it into the given DOM element.\r\n     * @param domElement The DOM element to insert the editor into.\r\n     */\r\n    createStandaloneDiffEditor(domElement: HTMLElement): monaco.editor.IStandaloneDiffEditor {\r\n        return monaco.editor.createDiffEditor(domElement, {\r\n            automaticLayout: true,\r\n            glyphMargin: true,\r\n            minimap: { enabled: false },\r\n            readOnly: true,\r\n            renderSideBySide: true,\r\n            scrollBeyondLastLine: false,\r\n            lineHeight: 16,\r\n            stickyScroll: {\r\n                enabled: false,\r\n            },\r\n            renderOverviewRuler: false,\r\n            scrollbar: {\r\n                vertical: 'hidden',\r\n                handleMouseWheel: true,\r\n                alwaysConsumeMouseWheel: false,\r\n            },\r\n            hideUnchangedRegions: {\r\n                enabled: true,\r\n            },\r\n            guides: {\r\n                indentation: false,\r\n            },\r\n            renderLineHighlight: 'none',\r\n            fontSize: 12,\r\n        });\r\n    }\r\n}\r\n"],"mappings":"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","names":["__decorate","__param","TreeElement","OutlineElement","OutlineGroup","OutlineModel","IOutlineModelService","OutlineModelService","init_outlineModel","__esmMin","init_arrays","init_cancellation","init_errors","init_iterator","init_map","init_position","init_range","init_languageFeatureDebounce","init_instantiation","init_extensions","init_model","init_lifecycle","init_languageFeatures","decorators","target","key","desc","c","r","d","i","paramIndex","decorator","candidate","container","candidateId","id","element","parent","symbol","label","order","_OutlineModel","registry","textModel","token","cts","CancellationTokenSource","result","provider","promises","index","group","info","err","onUnexpectedExternalError","listener","newProvider","equals","res","childInfo","uri","count","Iterable","child","roots","a","b","Range","bucket","Position","entries","overrideContainerLabel","entry","createDecorator","_languageFeaturesService","debounces","modelService","DisposableStore","LRUCache","__async","data","source","now","outlineModel","_err","ILanguageFeaturesService","ILanguageFeatureDebounceService","IModelService","registerSingleton","InPlaceReplaceCommand","init_inPlaceReplaceCommand","__esmMin","init_selection","editRange","originalSelection","text","model","builder","helper","srcRange","Selection","init_inPlaceReplace","__esmMin","require_inPlaceReplace","__commonJSMin","exports","init_async","init_errors","init_editorState","init_editorExtensions","init_range","init_selection","init_editorContextKeys","init_textModel","init_editorWorker","init_nls","init_inPlaceReplaceCommand","init_inPlaceReplace","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InPlaceReplaceController_1","InPlaceReplaceController","editor","ModelDecorationOptions","editorWorkerService","source","up","editorSelection","model","selection","state","EditorState","modelURI","createCancelablePromise","token","result","editRange","Range","highlightRange","diff","Selection","command","InPlaceReplaceCommand","timeout","onUnexpectedError","IEditorWorkerService","InPlaceReplaceUp","EditorAction","localize","EditorContextKeys","accessor","controller","InPlaceReplaceDown","registerEditorContribution","registerEditorAction","require_contribution","__commonJSMin","exports","init_arrays","init_observable","init_hideUnchangedRegionsFeature","init_utils","init_languageFeatures","init_outlineModel","init_lifecycle","init_event","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","DiffEditorBreadcrumbsSource","Disposable","_textModel","_languageFeaturesService","_outlineModelService","observableValue","documentSymbolProviderChanged","observableSignalFromEvent","textModelChanged","Event","e","autorunWithStore","reader","store","__async","src","DisposableCancellationTokenSource","model","startRange","m","symbols","s","reverseOrder","compareBy","numberComparator","ILanguageFeaturesService","IOutlineModelService","HideUnchangedRegionsFeature","textModel","instantiationService","init_inspectTokens","__esmMin","require_inspectTokens","__commonJSMin","exports","init_inspectTokens","init_dom","init_color","init_lifecycle","init_editorExtensions","init_languages","init_encodedTokenAttributes","init_nullTokenize","init_language","init_standaloneTheme","init_standaloneStrings","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InspectTokensController_1","InspectTokensController","Disposable","editor","standaloneColorService","languageService","e","TokenizationRegistry","InspectTokensWidget","IStandaloneThemeService","ILanguageService","InspectTokens","EditorAction","InspectTokensNLS","accessor","renderTokenText","tokenText","result","charIndex","len","charCode","getSafeTokenizationSupport","languageIdCodec","languageId","tokenizationSupport","encodedLanguageId","NullState","line","hasEOL","state","nullTokenize","nullTokenizeEncoded","position","data","token1Index","t","token2Index","lineContent","tokenStartIndex","tokenEndIndex","reset","$","append","metadata","Color","colorMap","TokenMetadata","tokenType","fontStyle","foreground","background","lineNumber","stateBeforeLine","tokenizationResult1","tokenizationResult2","registerEditorContribution","registerEditorAction","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","to","from","except","desc","key","__reExport","target","mod","secondTarget","monaco_editor_core_exports","editor_api_exports","languageDefinitions","lazyLanguageLoaders","LazyLanguageLoader","_LazyLanguageLoader","languageId","resolve","reject","err","registerLanguage","def","languageId","languageDefinitions","monaco_editor_core_exports","lazyLanguageLoader","LazyLanguageLoader","__async","mod","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","m","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","registerLanguage","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","to","from","except","desc","key","__reExport","target","mod","secondTarget","monaco_editor_core_exports","editor_api_exports","LanguageServiceDefaultsImpl","languageId","options","modeConfiguration","optionsDefault","modeConfigurationDefault","cssDefaults","scssDefaults","lessDefaults","getMode","mode","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","to","from","except","desc","key","__reExport","target","mod","secondTarget","monaco_editor_core_exports","editor_api_exports","LanguageServiceDefaultsImpl","languageId","options","modeConfiguration","formatDefaults","optionsDefault","getConfigurationDefault","htmlLanguageId","handlebarsLanguageId","razorLanguageId","htmlLanguageService","registerHTMLLanguageService","htmlDefaults","handlebarLanguageService","handlebarDefaults","razorLanguageService","razorDefaults","getMode","defaults","mode","onLanguageListener","__async","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","to","from","except","desc","key","__reExport","target","mod","secondTarget","monaco_editor_core_exports","editor_api_exports","LanguageServiceDefaultsImpl","languageId","diagnosticsOptions","modeConfiguration","options","diagnosticDefault","modeConfigurationDefault","jsonDefaults","getWorker","getMode","mode","init_codicons","init_dom","init_codicons","init_editorExtensions","init_codeEditorService","init_editorContextKeys","init_nls","init_actions","init_configuration","init_contextkey","ToggleCollapseUnchangedRegions","Action2","localize2","Codicon","ContextKeyExpr","MenuId","accessor","args","configurationService","IConfigurationService","newValue","ToggleShowMovedCodeBlocks","ToggleUseInlineViewWhenSpaceIsLimited","diffEditorCategory","SwitchSide","EditorAction2","editor","arg","diffEditor","findFocusedDiffEditor","DiffEditorWidget","ExitCompareMove","EditorContextKeys","CollapseAllUnchangedRegions","ShowAllUnchangedRegions","RevertHunkOrSelection","findDiffEditor","accessibleDiffViewerCategory","AccessibleDiffViewerNext","AccessibleDiffViewerPrev","originalUri","modifiedUri","ICodeEditorService","modified","original","diffEditors","activeElement","getActiveElement","d","container","isElementOrParentOf","elementOrParent","element","e","init_editorContextKeys","init_nls","init_actions","init_commands","init_contextkey","registerAction2","ToggleCollapseUnchangedRegions","ToggleShowMovedCodeBlocks","ToggleUseInlineViewWhenSpaceIsLimited","MenuRegistry","MenuId","localize","ContextKeyExpr","EditorContextKeys","Codicon","ContextKeyEqualsExpr","RevertHunkOrSelection","ctx","SwitchSide","ExitCompareMove","CollapseAllUnchangedRegions","ShowAllUnchangedRegions","AccessibleDiffViewerNext","CommandsRegistry","AccessibleDiffViewerPrev","init_htmlContent","init_keyCodes","init_editorExtensions","init_selection","init_editorContextKeys","init_nls","init_contextkey","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SelectionAnchorController_1","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","position","accessor","Selection","MarkdownString","localize","alert","anchorPosition","start","end","decorationId","IContextKeyService","SetSelectionAnchor","EditorAction","EditorContextKeys","KeyChord","_accessor","__async","GoToSelectionAnchor","SelectFromAnchorToCursor","CancelSelectionAnchor","registerEditorContribution","registerEditorAction","init_async","init_lifecycle","init_editorExtensions","init_position","init_range","init_selection","init_editorContextKeys","init_model","init_textModel","init_nls","init_actions","init_colorRegistry","init_themeService","overviewRulerBracketMatchForeground","registerColor","localize","JumpToBracketAction","EditorAction","EditorContextKeys","accessor","editor","BracketMatchingController","SelectToBracketAction","localize2","args","selectBrackets","RemoveBracketsAction","BracketsData","position","brackets","options","_BracketMatchingController","Disposable","RunOnceScheduler","e","model","newSelections","selection","newCursorPosition","enclosingBrackets","nextBracket","Selection","selectFrom","selectTo","Range","open","close","tmp","editSource","ModelDecorationOptions","themeColorFromId","OverviewRulerLane","newDecorations","newDecorationsLen","bracketData","selections","versionId","previousData","positions","positionsLen","i","len","Position","newData","newDataLen","previousIndex","previousLen","registerEditorContribution","registerEditorAction","MenuRegistry","MenuId","init_editorExtensions","init_editorContextKeys","init_range","init_selection","MoveCaretCommand","selection","isMovingLeft","model","builder","lineNumber","startColumn","endColumn","rangeBefore","Range","charBefore","rangeAfter","charAfter","helper","Selection","init_nls","MoveCaretAction","EditorAction","left","opts","accessor","editor","commands","selections","selection","MoveCaretCommand","MoveCaretLeftAction","localize","EditorContextKeys","MoveCaretRightAction","registerEditorAction","init_editorExtensions","init_range","init_editorContextKeys","init_nls","TransposeLettersAction","EditorAction","localize","EditorContextKeys","accessor","editor","model","commands","selections","selection","lineNumber","column","lastColumn","endPosition","MoveOperations","middlePosition","beginPosition","leftChar","Range","rightChar","replaceRange","ReplaceCommand","registerEditorAction","init_browser","init_dom","init_platform","init_editorExtensions","init_codeEditorService","init_editorContextKeys","init_dom","init_arrays","init_async","init_cancellation","init_arrays","init_iterator","generateUuid","getRandomValues","bucket","i","_data","_hex","result","createStringDataTransferItem","stringOrPromise","__async","createFileDataTransferItem","fileName","uri","data","file","generateUuid","VSDataTransfer","size","_","mimeType","pattern","mimes","Iterable","item","matchesMimeType_normalized","normalizeMimeType","value","existing","mine","items","matchesMimeType","mimeTypes","normalizedPattern","normalizedMimeTypes","wildcard","type","subtype","mime","UriList","entries","distinct","x","str","HierarchicalKind","_HierarchicalKind","value","other","parts","init_lifecycle","init_mime","init_platform","init_mime","init_uri","init_platform","CodeDataTransfers","DragAndDropContributionRegistry","Extensions","Registry","LocalSelectionTransfer","_LocalSelectionTransfer","proto","toVSDataTransfer","dataTransfer","vsDataTransfer","VSDataTransfer","item","type","asStringValue","resolve","createStringDataTransferItem","file","createFileDataTransferItemFromFile","uri","URI","createFileDataTransferItem","__async","INTERNAL_DND_MIME_TYPES","CodeDataTransfers","DataTransfers","toExternalVSDataTransfer","sourceDataTransfer","overwriteUriList","uriList","Mimes","editorData","path","UriList","internal","init_range","init_languages","init_languageFeatures","init_arrays","init_lifecycle","init_mime","init_network","init_resources","init_uri","init_languages","init_languageFeatures","init_nls","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SimplePasteAndDropProvider","_model","_ranges","dataTransfer","context","token","__async","edit","_position","DefaultTextPasteOrDropEditProvider","_DefaultTextPasteOrDropEditProvider","Mimes","HierarchicalKind","_token","textEntry","insertText","localize","PathProvider","entries","extractUriList","uriCount","uri","originalText","Schemas","label","RelativePathProvider","_workspaceContextService","relativeUris","coalesce","root","relativePath","IWorkspaceContextService","PasteHtmlProvider","DocumentPasteTriggerKind","htmlText","urlListEntry","strUriList","entry","UriList","URI","DefaultDropProvidersFeature","Disposable","languageFeaturesService","workspaceContextService","ILanguageFeaturesService","DefaultPasteProvidersFeature","Disposable","languageFeaturesService","workspaceContextService","DefaultTextPasteOrDropEditProvider","PathProvider","RelativePathProvider","PasteHtmlProvider","__decorate","__param","ILanguageFeaturesService","IWorkspaceContextService","Scanner","ch","value","token","pos","len","type","Marker","child","Text","others","parent","idx","newChildren","_fixParent","children","candidate","TextmateSnippet","prev","cur","_Text","TransformableMarker","Placeholder","_Placeholder","a","b","index","Choice","ret","_Choice","marker","Transform","_Transform","_this","didMatch","FormatString","groups","_FormatString","shorthandName","ifValue","elseValue","match","word","Variable","_Variable","name","resolver","walk","visitor","stack","_TextmateSnippet","all","last","found","placeholder","SnippetParser","template","insertFinalTabstop","enforceFinalTabstop","snippet","offset","placeholderDefaultValues","incompletePlaceholders","fillInIncompletePlaceholder","defaultValues","clone","newChild","p","start","nextToken","choice","values","variable","transform","regexValue","regexOptions","escaped","complex","shorthand","createCombinedWorkspaceEdit","uri","ranges","edit","range","ResourceTextEdit","SnippetParser","sortEditsByYieldTo","edits","yieldsTo","yTo","other","yieldsToMap","arr","visited","tempStack","visit","nodes","node","pre","init_editorState","init_dom","init_async","init_codicons","init_lifecycle","init_strings","init_themables","init_range","init_textModel","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","inlineProgressDecoration","ModelDecorationOptions","noBreakWhitespace","InlineProgressWidget","Disposable","typeId","editor","range","title","delegate","$","iconElement","ThemeIcon","Codicon","updateSize","lineHeight","addDisposableListener","EventType","e","InlineProgressManager","id","_editor","_instantiationService","MutableDisposable","position","promise","delayOverride","__async","operationId","disposableTimeout","Range","IInstantiationService","init_event","init_htmlContent","init_lifecycle","init_editorExtensions","init_range","init_nls","init_contextkey","init_dom","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MessageController_1","MessageController","RawContextKey","localize","editor","contextKeyService","_openerService","MutableDisposable","DisposableStore","message","position","alert","isMarkdownString","renderMarkdown","url","openLinkFromMarkdown","MessageWidget","Event","last","event","isAncestor","getActiveElement","addDisposableListener","EventType","bounds","e","Range","IContextKeyService","IOpenerService","MessageCommand","EditorCommand","MessageController","registerEditorCommand","c","MessageWidget","messageWidget","dispose","handle","editor","lineNumber","column","text","anchorTop","message","anchorBottom","position","registerEditorContribution","init_nls","init_contextkey","init_instantiation","init_dom","init_actions","init_arrays","init_types","init_nls","exceptionToErrorMessage","exception","verbose","localize","detectSystemErrorMessage","stackToString","stack","toErrorMessage","error","errors","coalesce","msg","isString","detail","init_errors","init_event","init_lifecycle","init_nls","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","PostEditWidget_1","PostEditWidget","Disposable","typeId","editor","visibleContext","showCommand","range","edits","onSelectNewEdit","_contextMenuService","contextKeyService","_keybindingService","toDisposable","e","Event","binding","$","Button","addDisposableListener","EventType","pos","getDomNodePagePosition","edit","toAction","IContextMenuService","IContextKeyService","IKeybindingService","PostEditWidgetManager","_id","_editor","_visibleContext","_showCommand","_instantiationService","_bulkEditService","_notificationService","MutableDisposable","ranges","canShowWidget","resolve","token","__async","model","onDidSelectEdit","newEditIndex","handleError","message","isCancellationError","resolvedEdit","localize","toErrorMessage","combinedWorkspaceEdit","createCombinedWorkspaceEdit","primaryRange","editTrackingDecoration","editResult","editRange","IInstantiationService","IBulkEditService","INotificationService","init_errors","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","CopyPasteController_1","changePasteTypeCommandId","pasteWidgetVisibleCtx","RawContextKey","localize","vscodeClipboardMime","CopyPasteController","Disposable","editor","instantiationService","_bulkEditService","_clipboardService","_languageFeaturesService","_quickInputService","_progressService","container","addDisposableListener","e","InlineProgressManager","PostEditWidgetManager","preferred","getActiveDocument","__async","model","selections","enableEmptySelectionClipboard","ranges","wasFromEmptySelection","Range","toCopy","isWindows","defaultPastePayload","providers","x","dataTransfer","toVSDataTransfer","providerCopyMimeTypes","handle","generateUuid","promise","createCancelablePromise","token","results","coalesce","provider","err","result","mime","value","MessageController","metadata","toExternalVSDataTransfer","allPotentialMimeTypes","Mimes","allProviders","preference","type","matchesMimeType","HierarchicalKind","clipboardEvent","editorStateCts","EditorStateCancellationTokenSource","p","pToken","disposables","DisposableStore","cts","CancellationTokenSource","supportedProviders","DefaultTextPasteOrDropEditProvider","context","DocumentPasteTriggerKind","editSession","canShowWidget","edit","resolve","reject","resolveP","showP","DeferredPromise","resolved","CancellationError","tokenSource","pickedEdit","combinedWorkspaceEdit","createCombinedWorkspaceEdit","rawMetadata","_","ClipboardEventUtils","toMergeDataTransfer","resources","createStringDataTransferItem","UriList","raceCancellation","edits","__spreadProps","__spreadValues","isCancellationError","sortEditsByYieldTo","text","payload","providedKind","IInstantiationService","IBulkEditService","IClipboardService","ILanguageFeaturesService","IQuickInputService","IProgressService","init_nls","init_actions","init_contextkey","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","isNative","supportsCopy","supportsPaste","isFirefox","registerCommand","command","CutAction","MultiCommand","MenuId","localize","EditorContextKeys","CopyAction","MenuRegistry","localize2","ContextKeyExpr","PasteAction","ExecCommandCopyWithSyntaxHighlightingAction","EditorAction","accessor","editor","CopyOptions","registerExecCommandImpl","target","browserCommand","args","focusedEditor","ICodeEditorService","emptySelectionClipboard","selection","getActiveDocument","codeEditorService","clipboardService","IClipboardService","CopyPasteController","isWeb","__async","clipboardText","metadata","InMemoryClipboardMetadataManager","pasteOnNewLine","multicursorText","mode","registerEditorAction","init_editorExtensions","init_strings","init_editorExtensions","init_editorContextKeys","init_arrays","init_cancellation","init_errors","init_lifecycle","init_uri","init_range","init_selection","init_languageFeatures","init_model","init_editorState","init_nls","init_commands","init_telemetry","init_errors","CodeActionKind","HierarchicalKind","CodeActionTriggerSource","mayIncludeActionsOfKind","filter","providedKind","exclude","excludesAction","filtersAction","action","actionKind","include","CodeActionCommandArgs","_CodeActionCommandArgs","arg","defaults","defaultAutoApply","defaultKind","kind","apply","preferred","CodeActionItem","provider","highlightRange","token","__async","err","onUnexpectedExternalError","codeActionCommandId","quickFixCommandId","autoFixCommandId","refactorCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","_ManagedCodeActionSet","Disposable","a","b","isNonEmptyArray","actions","documentation","disposables","action","fix","CodeActionKind","HierarchicalKind","emptyCodeActionsResponse","getCodeActions","registry","model","rangeOrSelection","trigger","progress","token","__async","filter","notebookFilter","__spreadProps","__spreadValues","codeActionContext","cts","TextModelCancellationTokenSource","excludeNotebookCodeActions","providers","getCodeActionProviders","DisposableStore","promises","provider","providedCodeActions","filteredActions","filtersAction","getDocumentationFromProvider","CodeActionItem","err","isCancellationError","onUnexpectedExternalError","listener","newProviders","equals","allActions","x","allDocumentation","coalesce","getAdditionalDocumentationForShowingActions","kind","mayIncludeActionsOfKind","actionsToShow","__yieldStar","item","only","entry","currentBest","ApplyCodeActionReason","applyCodeAction","_0","_1","_2","_3","accessor","codeActionReason","options","CancellationToken","bulkEditService","IBulkEditService","commandService","ICommandService","telemetryService","ITelemetryService","notificationService","INotificationService","message","asMessage","localize","CommandsRegistry","resource","itemResolveCount","URI","illegalArgument","codeActionProvider","ILanguageFeaturesService","IModelService","validatedRangeOrSelection","Selection","Range","include","codeActionSet","CodeActionTriggerSource","Progress","resolving","resolveCount","i","init_nls","init_contextkey","init_dom","init_errors","init_lazy","init_lifecycle","init_position","init_textModel","init_languageFeatures","init_lazy","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","CodeActionKeybindingResolver_1","CodeActionKeybindingResolver","refactorCommandId","codeActionCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","keybindingService","allCodeActionBindings","Lazy","item","commandArgs","CodeActionKind","__spreadValues","CodeActionCommandArgs","HierarchicalKind","action","candidates","kind","candidate","currentBest","IKeybindingService","init_codicons","init_nls","init_colorRegistry","SYMBOL_ICON_ARRAY_FOREGROUND","registerColor","foreground","localize","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","init_nls","uncategorizedCodeActionGroup","HierarchicalKind","localize","codeActionGroups","CodeActionKind","Codicon","toMenuItems","inputCodeActions","showHeaders","keybindingResolver","action","menuEntries","group","kind","menuEntry","allMenuItems","init_dom","init_codicons","init_event","init_lifecycle","init_themables","init_model","init_textModel","init_utils","init_nls","init_range","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","LightBulbWidget_1","GUTTER_LIGHTBULB_ICON","registerIcon","Codicon","localize","GUTTER_LIGHTBULB_AUTO_FIX_ICON","GUTTER_LIGHTBULB_AIFIX_ICON","GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON","GUTTER_SPARKLE_FILLED_ICON","LightBulbState","Showing","actions","trigger","editorPosition","widgetPosition","LightBulbWidget","Disposable","ModelDecorationOptions","ThemeIcon","GlyphMarginLane","_editor","_keybindingService","Emitter","$","Gesture","_","editorModel","addStandardDisposableGenericMouseDownListener","e","top","height","getDomNodePagePosition","lineHeight","pad","addDisposableListener","Event","autoFixCommandId","quickFixCommandId","__async","cls","atPosition","model","lineNumber","column","tabSize","fontInfo","lineContent","indent","computeIndentLevel","lineHasSpace","isFolded","currLineDecorations","hasDecoration","decoration","glyphClass","className","effectiveLineNumber","effectiveColumnNumber","isLineEmptyOrIndented","lineCount","endLine","prevLineEmptyOrIndented","nextLineEmptyOrIndented","currLineEmptyOrIndented","notEmpty","validActions","actionKind","value","icon","autoRun","GUTTER_DECORATION","selection","accessor","Range","decorationId","autoFix","IKeybindingService","init_nls","init_dom","init_lifecycle","init_nls","init_dom","init_cancellation","init_codicons","init_lifecycle","init_platform","init_themables","init_nls","init_colorRegistry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","acceptSelectedActionCommand","previewSelectedActionCommand","HeaderRenderer","container","text","element","_index","templateData","_templateData","ActionItemRenderer","_supportsPreview","_keybindingService","icon","keybinding","KeybindingLabel","OS","data","ThemeIcon","asCssVariable","Codicon","stripNewlines","setVisibility","actionTitle","previewTitle","localize","IKeybindingService","AcceptSelectedEvent","PreviewSelectedEvent","getKeyboardNavigationLabel","item","ActionList","Disposable","user","preview","items","_delegate","_contextViewService","CancellationTokenSource","virtualDelegate","List","label","e","defaultListStyles","didCancel","minWidth","numHeaders","heightWithHeaders","maxWidth","itemWidths","_","index","width","height","focused","focusIndex","event","__async","result","IContextViewService","stripNewlines","str","init_actions","init_contextkey","init_extensions","init_instantiation","init_colorRegistry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","registerColor","inputActiveOptionBackground","localize","ActionWidgetContextKeys","RawContextKey","IActionWidgetService","createDecorator","ActionWidgetService","Disposable","_contextViewService","_contextKeyService","_instantiationService","MutableDisposable","user","supportsPreview","items","delegate","anchor","container","actionBarActions","visibleContext","list","ActionList","didCancel","preview","element","widget","renderDisposables","DisposableStore","menuBlock","block","addDisposableListener","EventType","e","pointerBlockDiv","pointerBlock","actionBarWidth","actionBar","width","focusTracker","trackFocus","className","actions","$","ActionBar","IContextViewService","IContextKeyService","IInstantiationService","registerSingleton","weight","registerAction2","Action2","localize2","accessor","widgetService","acceptSelectedActionCommand","previewSelectedActionCommand","init_commands","init_configuration","init_contextkey","init_instantiation","init_colorRegistry","init_theme","init_themeService","init_async","init_errors","init_event","init_lifecycle","init_resources","init_position","init_selection","init_contextkey","init_stopwatch","SUPPORTED_CODE_ACTIONS","RawContextKey","APPLY_FIX_ALL_COMMAND_ID","CodeActionOracle","Disposable","_editor","_markerService","_signalChange","_delay","TimeoutTimer","e","trigger","selection","resources","model","resource","isEqual","CodeActionTriggerSource","enabled","ShowLightbulbIconMode","lineNumber","column","line","CodeActionsState","Triggered","position","_cancellablePromise","isCancellationError","emptyCodeActionSet","CodeActionModel","_registry","contextKeyService","_progressService","_configurationService","_telemetryService","MutableDisposable","Emitter","supportedActions","provider","startPosition","actions","createCancelablePromise","token","__async","CodeActionKind","codeActionSet","getCodeActions","Progress","allCodeActions","foundQuickfix","action","HierarchicalKind","allMarkers","arg","marker","currPosition","trackedPosition","distance","currentActions","col","row","startRow","Position","newCodeActionTrigger","selectionAsPosition","Selection","actionsAtMarker","filteredActions","index","self","a","b","sw","StopWatch","codeActions","newState","isManualToAutoTransition","skipNotify","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","CodeActionController_1","DECORATION_CLASS_NAME","CodeActionController","Disposable","editor","markerService","contextKeyService","instantiationService","languageFeaturesService","progressService","_commandService","_configurationService","_actionWidgetService","_instantiationService","_telemetryService","MutableDisposable","CodeActionModel","newState","Lazy","widget","LightBulbWidget","e","CodeActionKeybindingResolver","actions","at","__async","actionItem","command","__spreadProps","__spreadValues","ApplyCodeActionReason","_trigger","notAvailableMessage","triggerAction","filter","autoApply","MessageController","triggerPosition","trigger","action","retrigger","preview","actionReason","applyCodeAction","CodeActionTriggerSource","onUnexpectedError","validActionToApply","invalidAction","includeDisabledActions","ModelDecorationOptions","options","currentDecorations","editorDom","actionsToShow","anchor","Position","delegate","didCancel","token","canPreview","actionKind","hierarchicalKind","HierarchicalKind","CodeActionKind","refactorKind","ranges","diagnostics","decorations","diagnostic","range","selectionText","status","localize","toMenuItems","position","cursorCoords","editorCoords","getDomNodePagePosition","x","y","model","resultActions","IMarkerService","IContextKeyService","IInstantiationService","ILanguageFeaturesService","IEditorProgressService","ICommandService","IConfigurationService","IActionWidgetService","ITelemetryService","registerThemingParticipant","theme","collector","selector","color","editorFindMatchHighlight","findMatchHighlightBorder","editorFindMatchHighlightBorder","isHighContrast","contextKeyForSupportedActions","kind","ContextKeyExpr","SUPPORTED_CODE_ACTIONS","escapeRegExpCharacters","argsSchema","localize","triggerCodeActionsForEditorSelection","editor","notAvailableMessage","filter","autoApply","triggerAction","CodeActionTriggerSource","CodeActionController","QuickFixAction","EditorAction","quickFixCommandId","EditorContextKeys","_accessor","CodeActionCommand","EditorCommand","codeActionCommandId","userArgs","args","CodeActionCommandArgs","HierarchicalKind","RefactorAction","refactorCommandId","CodeActionKind","SourceAction","sourceActionCommandId","OrganizeImportsAction","organizeImportsCommandId","FixAllAction","fixAllCommandId","AutoFixAction","autoFixCommandId","init_nls","init_configurationRegistry","init_platform","registerEditorContribution","CodeActionController","LightBulbWidget","registerEditorAction","QuickFixAction","RefactorAction","SourceAction","OrganizeImportsAction","AutoFixAction","FixAllAction","registerEditorCommand","CodeActionCommand","Registry","Extensions","__spreadProps","__spreadValues","editorConfigurationBaseNode","localize","init_async","init_errors","init_lifecycle","init_editorExtensions","init_editorContextKeys","init_cancellation","init_errors","init_lifecycle","init_types","init_uri","init_model","init_commands","init_languageFeatures","CodeLensModel","DisposableStore","list","provider","symbol","getCodeLensModel","registry","model","token","__async","providerRanks","result","promises","i","err","onUnexpectedExternalError","b","CommandsRegistry","accessor","args","uri","itemResolveCount","assertType","URI","codeLensProvider","ILanguageFeaturesService","IModelService","illegalArgument","disposables","CancellationToken","value","resolve","item","init_event","init_map","init_range","init_extensions","init_instantiation","init_window","init_dom","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","LRUCache","oldkey","runWhenWindowIdle","mainWindow","raw","onWillSaveStateBecauseOfShutdown","Event","e","WillSaveStateReason","model","copyItems","item","copyModel","CodeLensModel","value","lines","element","lenses","line","Range","IStorageService","registerSingleton","ICodeLensCache","CodeLensCache","init_dom","init_iconLabels","init_range","init_textModel","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","height","CodeLensContentWidget","editor","line","lenses","animate","children","hasSymbol","i","lens","title","renderLabelWithIcons","id","$","reset","link","column","CodeLensHelper","decoration","callback","decorationId","changeAccessor","resultingDecorations","len","codeLensDecorationOptions","ModelDecorationOptions","CodeLensWidget","data","helper","viewZoneChangeAccessor","updateCallback","range","codeLensData","Range","symbol","model","symbols","resolved","init_nls","init_commands","init_languageFeatureDebounce","init_languageFeatures","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","CodeLensContribution","_editor","_languageFeaturesService","debounceService","_commandService","_notificationService","_codeLensCache","DisposableStore","RunOnceScheduler","e","lineHeightFactor","fontSize","codeLensHeight","fontFamily","editorFontInfo","style","EDITOR_FONT_DEFAULTS","accessor","lens","model","cachedLenses","disposableTimeout","cachedLensesNow","provider","registration","scheduler","t1","createCancelablePromise","token","getCodeLensModel","result","newDelay","onUnexpectedError","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","helper","CodeLensHelper","l","scrollState","StableEditorScrollState","command","err","decChangeAccessor","viewZoneChangeAccessor","symbols","maxLineNumber","groups","lastGroup","symbol","line","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","CodeLensWidget","toResolve","lenses","request","resolvePromise","promises","resolvedSymbols","onUnexpectedExternalError","__async","ILanguageFeaturesService","ILanguageFeatureDebounceService","ICommandService","INotificationService","ICodeLensCache","registerEditorContribution","CodeLensContribution","registerEditorAction","EditorAction","EditorContextKeys","localize","accessor","editor","__async","quickInputService","IQuickInputService","commandService","ICommandService","notificationService","INotificationService","lineNumber","codelensController","model","items","lens","item","command","newLens","err","init_lifecycle","init_editorExtensions","init_range","init_async","init_color","init_errors","init_event","init_lifecycle","init_stopwatch","init_strings","init_editorExtensions","init_range","init_textModel","init_languageFeatureDebounce","init_languageFeatures","init_cancellation","init_errors","init_uri","init_range","init_model","init_commands","init_languageFeatures","init_color","init_lifecycle","init_languageFeatures","init_editorWorker","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","DefaultDocumentColorProvider","_editorWorkerService","model","_token","__async","_model","colorInfo","range","colorFromInfo","alpha","color","Color","RGBA","rgb","hsl","hex","colorPresentations","IEditorWorkerService","DefaultDocumentColorProviderFeature","Disposable","_languageFeaturesService","editorWorkerService","DefaultDocumentColorProvider","__decorate","__param","ILanguageFeaturesService","IEditorWorkerService","registerEditorFeature","init_configuration","getColors","colorProviderRegistry","model","token","isDefaultColorDecoratorsEnabled","__async","_findColorData","ColorDataCollector","getColorPresentations","colorInfo","provider","colors","documentColors","ExtColorDataCollector","ColorPresentationsCollector","_token","CancellationToken","collector","validDocumentColorProviderFound","defaultProvider","colorData","documentColorProviders","i","DefaultDocumentColorProvider","e","onUnexpectedExternalError","_setupColorCommand","accessor","resource","ILanguageFeaturesService","IModelService","illegalArgument","IConfigurationService","CommandsRegistry","args","URI","color","context","uri","range","Range","red","green","blue","alpha","init_configuration","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ColorDetector_1","ColorDecorationInjectedTextMarker","ColorDetector","Disposable","_editor","_configurationService","_languageFeaturesService","languageFeatureDebounceService","DisposableStore","DynamicCssRules","DecoratorLimitReporter","e","prevIsEnabled","updatedColorDecoratorsSetting","updatedDefaultColorDecoratorsSetting","model","languageId","deprecatedConfig","colorDecorators","editor","TimeoutTimer","__async","createCancelablePromise","token","sw","StopWatch","colors","getColors","onUnexpectedError","colorDatas","decorations","ModelDecorationOptions","changeAccessor","id","colorData","limit","red","green","blue","alpha","rgba","RGBA","color","ref","noBreakWhitespace","limited","position","Range","decoration","IConfigurationService","ILanguageFeaturesService","ILanguageFeatureDebounceService","DecoratorLimitReporter","Emitter","computed","limited","registerEditorContribution","ColorDetector","init_async","init_cancellation","init_color","init_lifecycle","init_range","init_event","ColorPickerModel","color","colorPresentations","availableColorPresentations","presentationIndex","Emitter","originalText","i","originalTextPrefix","init_dom","init_codicons","init_color","init_event","init_lifecycle","init_themables","init_nls","init_colorRegistry","$","ColorPickerHeader","Disposable","container","model","themeService","showingStandaloneColorPicker","append","tooltip","localize","Color","editorHoverBackground","theme","addDisposableListener","EventType","CloseButton","color","Emitter","innerDiv","ThemeIcon","registerIcon","Codicon","ColorPickerBody","pixelRatio","isStandaloneColorPicker","SaturationBox","OpacityStrip","HueStrip","InsertButton","s","v","hsva","HSVA","a","value","h","e","GlobalPointerMoveMonitor","origin","getDomNodePagePosition","event","pointerUpListener","left","top","saturatedColor","ctx","whiteGradient","blackGradient","Strip","monitor","r","g","b","opaque","RGBA","transparent","ColorPickerWidget","Widget","standaloneColorPicker","PixelRatio","getWindow","HoverRangeAnchor","priority","range","initialMousePosX","initialMousePosY","other","lastAnchor","showAtPosition","HoverForeignElementAnchor","owner","supportsMarkerHover","RenderedHoverParts","renderedHoverParts","part","HoverParticipantRegistry","ctor","init_themeService","init_dom","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ColorHover","owner","range","model","provider","anchor","ColorHoverParticipant","_editor","_themeService","_anchor","_lineDecorations","lineDecorations","token","AsyncIterableObject","_token","__async","colorDetector","ColorDetector","colorData","_createColorHover","context","hoverParts","renderedPart","renderHoverParts","RenderedHoverParts","renderedHoverPart","IThemeService","StandaloneColorPickerHover","owner","range","model","provider","StandaloneColorPickerParticipant","_editor","_themeService","defaultColorInfo","defaultColorProvider","colorProviderRegistry","__async","ColorDetector","colors","getColors","CancellationToken","foundColorInfo","foundColorProvider","colorData","colorInfo","Range","colorProvider","foundInEditor","_createColorHover","colorHoverData","colorPickerModel","_updateColorPresentations","_updateEditorModel","context","hoverParts","renderHoverParts","color","__decorate","__param","IThemeService","_createColorHover","participant","editorModel","colorInfo","provider","__async","originalText","red","green","blue","alpha","rgba","RGBA","color","Color","colorPresentations","getColorPresentations","CancellationToken","model","ColorPickerModel","ColorHoverParticipant","ColorHover","Range","StandaloneColorPickerHover","renderHoverParts","editor","themeService","hoverParts","context","minimumHeight","Dimension","disposables","DisposableStore","colorHover","colorPicker","ColorPickerWidget","StandaloneColorPickerParticipant","editorUpdatedByColorPicker","range","_updateColorPresentations","_updateEditorModel","e","textEdits","edit","replaceRange","trackedRange","colorPickerModel","init_nls","SHOW_OR_FOCUS_HOVER_ACTION_ID","SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID","SCROLL_UP_HOVER_ACTION_ID","SCROLL_DOWN_HOVER_ACTION_ID","SCROLL_LEFT_HOVER_ACTION_ID","SCROLL_RIGHT_HOVER_ACTION_ID","PAGE_UP_HOVER_ACTION_ID","PAGE_DOWN_HOVER_ACTION_ID","GO_TO_TOP_HOVER_ACTION_ID","GO_TO_BOTTOM_HOVER_ACTION_ID","INCREASE_HOVER_VERBOSITY_ACTION_ID","INCREASE_HOVER_VERBOSITY_ACTION_LABEL","localize","DECREASE_HOVER_VERBOSITY_ACTION_ID","DECREASE_HOVER_VERBOSITY_ACTION_LABEL","init_lifecycle","init_instantiation","init_dom","init_actions","init_arrays","init_async","init_codicons","init_lifecycle","init_observable","init_derived","init_platform","init_themables","init_position","init_languages","inlineSuggestCommitId","showPreviousInlineSuggestionActionId","showNextInlineSuggestionActionId","init_nls","init_actions","init_commands","init_contextkey","init_instantiation","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineSuggestionHintsContentWidget_1","InlineCompletionsHintsWidget","Disposable","editor","model","instantiationService","observableFromEvent","derived","reader","ghostText","firstColumn","position","Position","autorunWithStore","store","contentWidgetValue","derivedWithStore","contentWidget","InlineSuggestionHintsContentWidget","toDisposable","autorun","InlineCompletionTriggerKind","hadPosition","derivedObservableWithCache","lastValue","IInstantiationService","inlineSuggestionHintsNextIcon","registerIcon","Codicon","localize","inlineSuggestionHintsPreviousIcon","InlineSuggestionHintsContentWidget","Disposable","InlineSuggestionHintsContentWidget_1","commandId","label","iconClassName","action","Action","kb","tooltip","editor","withBorder","_position","_currentSuggestionIdx","_suggestionCount","_extraCommands","_commandService","instantiationService","keybindingService","_contextKeyService","_menuService","h","showPreviousInlineSuggestionActionId","ThemeIcon","showNextInlineSuggestionActionId","MenuId","RunOnceScheduler","CustomizedMenuWorkbenchToolBar","g","options","MenuItemAction","StatusBarViewItem","a","ActionViewItemWithClassName","e","autorun","reader","suggestionCount","currentSuggestionIdx","extraActions","c","event","_","group","Separator","__decorate","__param","ICommandService","IInstantiationService","IKeybindingService","IContextKeyService","IMenuService","ActionViewItemWithClassName","ActionViewItem","className","container","StatusBarViewItem","MenuEntryActionViewItem","kb","div","h","KeybindingLabel","OS","__spreadValues","unthemedKeybindingLabelOptions","CustomizedMenuWorkbenchToolBar","WorkbenchToolBar","menuId","options2","menuService","contextKeyService","contextMenuService","keybindingService","commandService","telemetryService","primary","secondary","createAndFillInActionBarActions","actions","equals","a","b","__decorate","__param","IMenuService","IContextKeyService","IContextMenuService","IKeybindingService","ICommandService","ITelemetryService","init_async","init_dom","isMousePositionWithinElement","element","posx","posy","elementRect","getDomNodePagePosition","init_dom","init_lifecycle","init_languages","init_async","init_errors","init_event","init_lifecycle","HoverResult","value","isComplete","hasLoadingMessage","HoverOperation","Disposable","_editor","_computer","Emitter","RunOnceScheduler","state","fireResult","createCancelableAsyncIterable","token","__async","iter","__forAwait","more","temp","error","item","e","onUnexpectedError","mode","init_instantiation","init_dom","init_dom","init_event","init_lifecycle","ResizableHTMLElement","Emitter","DisposableStore","Dimension","Sash","OrthogonalEdge","currentSize","deltaY","deltaX","Event","e","north","east","south","west","height","width","minHeight","minWidth","maxHeight","maxWidth","newSize","value","init_lifecycle","init_position","init_dom","TOP_HEIGHT","BOTTOM_HEIGHT","ResizableContentWidget","Disposable","_editor","minimumSize","Dimension","ResizableHTMLElement","e","Position","position","editorDomNode","mouseBox","getDomNodePagePosition","editorBox","bodyBox","getClientArea","mouseBottom","widgetHeight","showAtPosition","maxHeightBelow","maxHeightAbove","maxHeight","height","renderingAbove","dimension","init_contextkey","init_configuration","init_editorContextKeys","init_event","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ContentHoverWidget_1","HORIZONTAL_SCROLLING_BY","CONTAINER_HEIGHT_PADDING","ContentHoverWidget","ResizableContentWidget","Dimension","editor","contextKeyService","_configurationService","_accessibilityService","_keybindingService","minimumHeight","minimumWidth","minimumSize","HoverWidget","Emitter","EditorContextKeys","append","e","focusTracker","trackFocus","container","width","height","transformedWidth","transformedHeight","contentsDomNode","containerDomNode","size","maxRenderingWidth","maxRenderingHeight","position","availableSpace","maximumHeight","hoverPart","overflowing","hoverElement","initialWidth","getClientArea","posx","posy","widgetRect","getDomNodePagePosition","computeDistanceFromPointToRectangle","distance","renderedHover","fontSize","lineHeight","node","widgetHeight","getTotalHeight","widgetPosition","accessibleViewHint","getHoverAccessibleViewHint","hoverStoleFocus","layoutInfo","dimensions","getTotalWidth","scrollTop","fontInfo","scrollLeft","scrollHeight","IContextKeyService","IConfigurationService","IAccessibilityService","IKeybindingService","computeDistanceFromPointToRectangle","pointX","pointY","left","top","width","height","x","y","dx","dy","init_arrays","init_async","ContentHoverComputer","_ContentHoverComputer","value","_editor","_participants","editor","anchor","model","lineNumber","maxColumn","d","startColumn","endColumn","token","AsyncIterableObject","lineDecorations","participant","result","coalesce","HoverResult","anchor","hoverParts","isComplete","filteredHoverParts","m","FilteredHoverResult","original","messages","init_event","init_lifecycle","init_dom","init_lifecycle","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","$","EditorHoverStatusBar","Disposable","_keybindingService","append","actionOptions","keybinding","keybindingLabel","action","HoverAction","element","result","IKeybindingService","init_textModel","init_position","init_range","init_dom","init_dom","init_arrays","init_cancellation","init_htmlContent","init_lifecycle","init_range","init_language","init_nls","init_configuration","init_languageFeatures","init_languages","init_codicons","init_themables","init_errors","init_async","init_async","init_cancellation","init_errors","init_editorExtensions","init_languageFeatures","HoverProviderResult","provider","hover","ordinal","executeProvider","model","position","token","__async","result","onUnexpectedExternalError","isValid","getHoverProviderResultsAsAsyncIterable","registry","recursive","promises","index","AsyncIterableObject","getHoversPromise","item","registerModelAndPositionCommand","accessor","languageFeaturesService","ILanguageFeaturesService","CancellationToken","hasRange","hasHtmlContent","init_commands","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","$","increaseHoverVerbosityIcon","registerIcon","Codicon","localize","decreaseHoverVerbosityIcon","MarkdownHover","owner","range","contents","isBeforeContent","ordinal","source","anchor","HoverSource","hover","hoverProvider","hoverPosition","hoverVerbosityAction","HoverVerbosityAction","MarkdownHoverParticipant","_editor","_languageService","_openerService","_configurationService","_languageFeaturesService","_keybindingService","_hoverService","_commandService","MarkdownString","lineDecorations","model","lineNumber","maxColumn","result","index","lineLength","languageId","stopRenderingLineAfter","maxTokenizationLineLength","stopRenderingMessage","startColumn","endColumn","hoverMessage","isEmptyMarkdownString","Range","asArray","token","AsyncIterableObject","hoverProviderRegistry","position","getHoverProviderResultsAsAsyncIterable","item","hoverSource","context","hoverParts","MarkdownRenderedHoverParts","action","focus","ILanguageService","IOpenerService","IConfigurationService","ILanguageFeaturesService","IKeybindingService","IHoverService","ICommandService","RenderedMarkdownHoverPart","hoverPart","hoverElement","disposables","MarkdownRenderedHoverParts","hoverParts","hoverPartsContainer","_hoverParticipant","_editor","_languageService","_openerService","_commandService","_keybindingService","_hoverService","_configurationService","_onFinishedRendering","DisposableStore","toDisposable","renderedHoverPart","operation","onFinishedRendering","compareBy","hover","numberComparator","renderedMarkdownPart","renderedMarkdownElement","hoverSource","canIncreaseVerbosity","HoverVerbosityAction","canDecreaseVerbosity","actionsContainer","$","markdownHover","renderMarkdownInContainer","container","action","actionEnabled","store","isActionIncrease","actionElement","append","ThemeIcon","increaseHoverVerbosityIcon","decreaseHoverVerbosityIcon","hoverDelegate","WorkbenchHoverDelegate","labelForHoverVerbosityAction","actionFunction","INCREASE_HOVER_VERBOSITY_ACTION_ID","DECREASE_HOVER_VERBOSITY_ACTION_ID","ClickAction","KeyDownAction","index","focus","__async","model","hoverRenderedPart","newHover","newHoverSource","HoverSource","initialHoverPart","newHoverPart","MarkdownHover","newHoverRenderedPart","verbosityDelta","provider","ongoingHoverOperation","tokenSource","CancellationTokenSource","context","e","onUnexpectedExternalError","currentRenderedHoverPart","currentRenderedMarkdown","renderedMarkdown","renderedChildrenElements","newRenderedHoverPart","renderMarkdownHovers","markdownHovers","editor","languageService","openerService","renderedHoverParts","RenderedHoverParts","renderedMarkdownContents","markdownStrings","markdownString","isEmptyMarkdownString","markdownHoverElement","hoverContentsElement","renderer","MarkdownRenderer","renderedContents","keybindingService","kb","localize","init_async","init_htmlContent","init_position","init_textModel","init_language","init_resolverService","init_dom","init_arrays","init_async","init_cancellation","init_errors","init_lifecycle","init_map","init_types","init_uri","init_range","init_languages","init_model","init_textModel","init_languageFeatureDebounce","init_languageFeatures","init_resolverService","init_event","init_lifecycle","init_platform","hasModifier","e","modifier","ClickLinkMouseEvent","source","opts","ClickLinkKeyboardEvent","ClickLinkOptions","triggerKey","triggerModifier","triggerSideBySideKey","triggerSideBySideModifier","other","createOptions","multiCursorModifier","isMacintosh","ClickLinkGesture","Disposable","editor","Emitter","newOpts","mouseEvent","currentLineNumber","init_errors","init_lifecycle","init_position","init_range","init_network","init_uri","InlayHintAnchor","range","direction","InlayHintItem","_InlayHintItem","hint","anchor","provider","delta","result","token","__async","newHint","err","onUnexpectedExternalError","InlayHintsFragments","_InlayHintsFragments","registry","model","ranges","data","promises","CancellationError","DisposableStore","items","list","position","wordRange","Range","a","b","Position","line","word","tokens","offset","idx","start","end","asCommandLink","command","URI","Schemas","init_dom","init_actions","init_cancellation","init_range","init_resolverService","init_async","init_keyCodes","init_types","init_uri","init_editorState","init_editorExtensions","init_codeEditorService","init_objects","init_codeEditorService","init_languageConfigurationRegistry","init_languageFeatures","init_commands","init_contextkey","init_instantiation","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","EmbeddedCodeEditorWidget","CodeEditorWidget","domElement","options","codeEditorWidgetOptions","parentEditor","instantiationService","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","__spreadProps","__spreadValues","e","newOptions","mixin","IInstantiationService","ICodeEditorService","ICommandService","IContextKeyService","IThemeService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","init_position","init_range","init_editorContextKeys","init_languages","init_async","init_errors","init_keyCodes","init_lifecycle","init_codeEditorService","init_position","init_range","init_dom","init_actions","init_codicons","init_themables","init_color","init_event","init_objects","init_editorExtensions","init_codeEditorService","init_dom","init_color","init_lifecycle","init_objects","init_range","init_textModel","defaultColor","Color","RGBA","defaultOptions","WIDGET_ID","ViewZoneDelegate","domNode","afterLineNumber","afterColumn","heightInLines","onDomNodeTop","onComputedHeight","showInHiddenAreas","ordinal","top","height","OverlayWidgetDelegate","id","Arrow","_Arrow","IdGenerator","_editor","removeCSSRulesContainingSelector","value","createCSSRule","where","Range","ZoneWidget","editor","options","DisposableStore","deepClone","mixin","info","width","accessor","styles","frameColor","arrowColor","containerHeight","layoutInfo","range","rangeOrPos","ModelDecorationOptions","lineHeight","result","arrowHeight","frameThickness","position","viewZoneDomNode","maxHeightInLines","model","isLastLine","className","classToReplace","widthInPixel","heightInPixel","newHeightInLines","Sash","data","e","evt","lineDelta","roundedLineDelta","init_nls","init_contextkey","init_extensions","init_instantiation","init_colorRegistry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","IPeekViewService","createDecorator","registerSingleton","editor","widget","existing","remove","data","PeekContext","RawContextKey","localize","PeekContextController","contextKeyService","EmbeddedCodeEditorWidget","IContextKeyService","registerEditorContribution","getOuterEditor","accessor","ICodeEditorService","defaultOptions","Color","PeekViewWidget","ZoneWidget","options","instantiationService","Emitter","mixin","styles","container","$","noCloseAction","addStandardDisposableListener","event","append","actionsContainer","actionBarOptions","ActionBar","Action","ThemeIcon","Codicon","createActionViewItem","primaryHeading","secondaryHeading","clearNode","value","show","hide","heightInPixel","widthInPixel","headHeight","bodyHeight","IInstantiationService","peekViewTitleBackground","registerColor","Color","localize","peekViewTitleForeground","editorForeground","peekViewTitleInfoForeground","peekViewBorder","editorInfoForeground","contrastBorder","peekViewResultsBackground","peekViewResultsMatchForeground","peekViewResultsFileForeground","peekViewResultsSelectionBackground","peekViewResultsSelectionForeground","peekViewEditorBackground","peekViewEditorGutterBackground","peekViewEditorStickyScrollBackground","peekViewResultsMatchHighlight","peekViewEditorMatchHighlight","peekViewEditorMatchHighlightBorder","activeContrastBorder","init_nls","init_commands","init_configuration","init_contextkey","init_instantiation","init_keybindingsRegistry","init_errors","init_event","init_lifecycle","init_map","init_resources","init_strings","init_range","init_nls","OneReference","isProviderFirst","parent","link","_rangeCallback","defaultGenerator","value","preview","localize","basename","FilePreview","_modelReference","range","n","model","startLineNumber","startColumn","endLineNumber","endColumn","word","beforeRange","Range","afterRange","before","inside","after","FileReferences","uri","ResourceMap","dispose","child","len","textModelResolverService","__async","ref","err","onUnexpectedError","ReferencesModel","_ReferencesModel","links","title","Emitter","providersFirst","current","extUri","oneRef","reference","next","idx","childCount","groupCount","resource","position","nearest","commonPrefixLength","a","b","init_dom","init_color","init_event","init_lifecycle","init_network","init_resources","init_range","init_textModel","init_modesRegistry","init_resolverService","init_dom","init_filters","init_lifecycle","init_resources","init_resolverService","init_nls","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","FileReferencesRenderer_1","DataSource","_resolverService","element","ReferencesModel","FileReferences","val","ITextModelService","Delegate","element","FileReferences","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","_keybindingService","OneReference","parts","basename","__decorate","__param","IKeybindingService","IdentityProvider","element","OneReference","FileReferencesTemplate","Disposable","container","_labelService","parent","IconLabel","CountBadge","append","$","defaultCountBadgeStyles","matches","dirname","len","localize","__decorate","__param","ILabelService","FileReferencesRenderer","FileReferencesRenderer_1","_instantiationService","node","index","template","createMatches","templateData","IInstantiationService","OneReferenceTemplate","Disposable","container","HighlightedLabel","element","score","preview","basename","value","highlight","FuzzyScore","createMatches","OneReferenceRenderer","node","index","templateData","AccessibilityProvider","localize","init_nls","init_instantiation","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","DecorationsManager","_DecorationsManager","ModelDecorationOptions","_editor","_model","DisposableStore","model","ref","reference","newDecorations","newDecorationsActualIndex","len","oneReference","changeAccessor","decorations","toRemove","decorationId","newRange","ignore","Range","lineLength","newLineLength","LayoutData","raw","ratio","heightInLines","data","ReferencesTree","WorkbenchAsyncDataTree","ReferenceWidget","PeekViewWidget","editor","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_instantiationService","_peekViewService","_uriLabel","_keybindingService","Emitter","Dimension","dispose","theme","borderColor","peekViewBorder","Color","peekViewTitleBackground","peekViewTitleForeground","peekViewTitleInfoForeground","where","containerElement","append","$","hide","SplitView","options","EmbeddedCodeEditorWidget","TextModel","localize","PLAINTEXT_LANGUAGE_ID","treeOptions","AccessibilityProvider","StringRepresentationProvider","IdentityProvider","peekViewResultsBackground","addStandardDisposableListener","e","Delegate","FileReferencesRenderer","OneReferenceRenderer","DataSource","Event","width","Sizing","onEvent","element","kind","OneReference","heightInPixel","widthInPixel","selection","newModel","show","event","FileReferences","__async","revealParent","Schemas","basenameOrAuthority","dirname","promise","scrollType","sel","IThemeService","ITextModelService","IInstantiationService","IPeekViewService","ILabelService","IKeybindingService","init_editorContextKeys","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ReferencesController_1","ctxReferenceSearchVisible","RawContextKey","localize","ReferencesController","editor","_defaultTreeKeyboardSupport","_editor","contextKeyService","_editorService","_notificationService","_instantiationService","_storageService","_configurationService","DisposableStore","range","modelPromise","peekMode","widgetPosition","storageKey","data","LayoutData","ReferenceWidget","event","element","kind","requestId","model","uri","pos","Position","selection","error","fwd","__async","currentPosition","source","editorFocus","previewEditorFocus","reference","focusEditor","ref","pinned","Range","openedEditor","other","createCancelablePromise","_","err","onUnexpectedError","sideBySide","IContextKeyService","ICodeEditorService","INotificationService","IInstantiationService","IStorageService","IConfigurationService","withController","accessor","fn","outerEditor","getOuterEditor","controller","ReferencesController","KeybindingsRegistry","KeyChord","ContextKeyExpr","ctxReferenceSearchVisible","PeekContext","CommandsRegistry","EditorContextKeys","InputFocusedContext","WorkbenchListFocusContextKey","WorkbenchTreeElementCanCollapse","WorkbenchTreeElementCanExpand","focus","IListService","OneReference","init_event","init_lifecycle","init_resources","init_editorExtensions","init_codeEditorService","init_range","init_nls","init_contextkey","init_extensions","init_instantiation","init_keybindingsRegistry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ctxHasSymbols","RawContextKey","localize","ISymbolNavigationService","createDecorator","SymbolNavigationService","contextKeyService","_editorService","_notificationService","_keybindingService","anchor","refModel","editorState","EditorState","listener","_","editor","model","position","seenUri","seenPosition","reference","isEqual","Range","combinedDisposable","source","kb","message","IContextKeyService","ICodeEditorService","INotificationService","IKeybindingService","registerSingleton","registerEditorCommand","EditorCommand","accessor","KeybindingsRegistry","editorService","DisposableStore","Emitter","dispose","init_nls","init_actions","init_commands","init_contextkey","init_instantiation","init_arrays","init_cancellation","init_errors","init_network","init_editorExtensions","init_languageFeatures","shouldIncludeLocationLink","sourceModel","loc","matchesSomeScheme","Schemas","getLocationLinks","model","position","registry","recursive","provide","__async","promises","provider","err","onUnexpectedExternalError","values","coalesce","getDefinitionsAtPosition","token","getDeclarationsAtPosition","getImplementationsAtPosition","getTypeDefinitionsAtPosition","getReferencesAtPosition","compact","result","ref","resultWithoutDeclaration","_sortedAndDeduped","callback","rawLinks","ReferencesModel","modelLinks","registerModelAndPositionCommand","accessor","languageFeaturesService","ILanguageFeaturesService","promise","CancellationToken","init_languageFeatures","init_iterator","MenuRegistry","MenuId","localize","SymbolNavigationAnchor","_SymbolNavigationAnchor","thing","Position","model","position","SymbolNavigationAction","_SymbolNavigationAction","EditorAction2","opts","result","__spreadProps","__spreadValues","item","Iterable","ContextKeyExpr","configuration","accessor","editor","arg","range","notificationService","INotificationService","editorService","ICodeEditorService","progressService","IEditorProgressService","symbolNavService","ISymbolNavigationService","languageFeaturesService","ILanguageFeaturesService","instaService","IInstantiationService","anchor","cts","EditorStateCancellationTokenSource","promise","raceCancellation","references","__async","alert","altAction","altActionId","referenceCount","info","MessageController","err","gotoLocation","EmbeddedCodeEditorWidget","next","peek","targetEditor","reference","sideBySide","highlight","isLocationLink","Range","modelNow","decorations","target","controller","ReferencesController","createCancelablePromise","_","DefinitionAction","token","ReferencesModel","getDefinitionsAtPosition","registerAction2","GoToDefinitionAction","localize2","EditorContextKeys","IsWebContext","CommandsRegistry","OpenDefinitionToSideAction","KeyChord","PeekDefinitionAction","PeekContext","DeclarationAction","getDeclarationsAtPosition","GoToDeclarationAction","TypeDefinitionAction","getTypeDefinitionsAtPosition","GoToTypeDefinitionAction","PeekTypeDefinitionAction","ImplementationAction","getImplementationsAtPosition","GoToImplementationAction","PeekImplementationAction","ReferencesAction","getReferencesAtPosition","GenericGoToLocationAction","config","_references","_gotoMultipleBehaviour","_model","_position","_token","URI","resource","multiple","noResultsMessage","openInPeek","assertType","isCodeEditor","command","ICommandService","codeEditorService","control","init_actions","init_commands","init_contextkey","init_instantiation","showGoToContextMenu","accessor","editor","anchor","part","__async","resolverService","ITextModelService","contextMenuService","IContextMenuService","commandService","ICommandService","instaService","IInstantiationService","notificationService","INotificationService","CancellationToken","location","menuActions","filter","MenuRegistry","MenuId","item","isIMenuItem","generateUuid","delegate","SymbolNavigationAction","Action","MenuItemAction","ref","symbolAnchor","SymbolNavigationAnchor","Range","range","command","Separator","err","Severity","useShadowDOM","box","getDomNodePagePosition","goToDefinitionWithLocation","event","openToSide","contextKeyService","IContextKeyService","isInPeek","PeekContext","canPeek","DefinitionAction","init_commands","init_extensions","init_instantiation","init_colorRegistry","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlayHintsController_1","InlayHintsCache","_InlayHintsCache","LRUCache","model","value","IInlayHintsCache","createDecorator","registerSingleton","RenderedInlayHintLabelPart","item","index","label","ActiveInlayHintInfo","part","hasTriggerModifier","InlayHintsController","editor","_editor","_languageFeaturesService","_featureDebounce","_inlayHintsCache","_commandService","_notificationService","_instaService","DisposableStore","DynamicCssRules","e","options","defaultMode","altMode","ModifierKeyEmitter","newRenderMode","copies","scheduler","cached","toDisposable","cts","watchedProviders","RunOnceScheduler","__async","t1","CancellationTokenSource","listener","myToken","inlayHints","InlayHintsFragments","provider","err","onUnexpectedError","delay","store","gesture","ClickLinkGesture","sessionStore","mouseEvent","labelPart","lineNumber","range","Range","lineHints","goToDefinitionWithLocation","Command","data","updateInlayHints","CancellationToken","isNonEmptyArray","edits","edit","EditOperation","isHTMLElement","showGoToContextMenu","ModelDecorationInjectedTextOptions","command","Severity","hints","items","id","obj","anchor","InlayHintAnchor","copy","visibleRanges","result","extendedRange","ranges","newDecorationsData","addInjectedText","ref","content","cursorStops","attachedData","opts","addInjectedWhitespace","isLast","marginRule","fontSize","InjectedTextCursorStops","fontFamily","padding","isUniform","fontFamilyVar","currentLineInfo","parts","isFirst","cssProperties","EDITOR_FONT_DEFAULTS","themeColorFromId","editorActiveLinkForeground","textlabel","tooLong","over","fixSpace","decorationIdsToReplace","metadata","scrollState","StableEditorScrollState","accessor","newDecorationIds","props","hint","InlayHintKind","editorInlayHintParameterBackground","editorInlayHintParameterForeground","editorInlayHintTypeBackground","editorInlayHintTypeForeground","editorInlayHintBackground","editorInlayHintForeground","editorFontSize","editorFontFamily","ILanguageFeaturesService","ILanguageFeatureDebounceService","ICommandService","INotificationService","IInstantiationService","fixSpace","str","CommandsRegistry","accessor","args","__async","uri","range","assertType","URI","Range","inlayHintsProvider","ILanguageFeaturesService","ref","ITextModelService","model","InlayHintsFragments","CancellationToken","result","i","init_configuration","init_languageFeatures","init_nls","init_platform","init_arrays","init_commands","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlayHintsHoverAnchor","HoverForeignElementAnchor","part","owner","initialMousePosX","initialMousePosY","InlayHintsHover","MarkdownHoverParticipant","editor","languageService","openerService","keybindingService","hoverService","configurationService","_resolverService","languageFeaturesService","commandService","mouseEvent","InlayHintsController","options","ModelDecorationInjectedTextOptions","RenderedInlayHintLabelPart","anchor","_lineDecorations","token","AsyncIterableObject","executor","__async","itemTooltip","MarkdownString","MarkdownHover","isNonEmptyArray","localize","partTooltip","linkHint","kb","isMacintosh","asCommandLink","iterable","iter","__forAwait","more","temp","error","item","uri","range","ref","model","getHoverProviderResultsAsAsyncIterable","Position","isEmptyMarkdownString","ILanguageService","IOpenerService","IKeybindingService","IHoverService","IConfigurationService","ITextModelService","ILanguageFeaturesService","ICommandService","init_errors","RenderedContentHover","_RenderedContentHover","Disposable","editor","hoverResult","participants","computer","context","keybindingService","anchor","parts","RenderedContentHoverParts","showAtPosition","showAtSecondaryPosition","m","action","index","focus","__async","anchorRange","hoverParts","startColumnBoundary","viewModel","coordinatesConverter","anchorViewRange","anchorViewMinColumn","anchorViewRangeStart","Position","anchorStartLineNumber","secondaryPositionColumn","forceShowAtRange","hoverPart","hoverPartRange","hoverPartRangeOnAnchorStartLine","hoverPartRangeOnAnchorEndLine","hoverPartStartColumn","minSecondaryPositionColumn","forceShowAtPosition","RenderedStatusBar","fragment","_statusBar","_RenderedContentHoverParts","ModelDecorationOptions","highlightRange","Range","highlightDecoration","toDisposable","hoverContext","statusBar","EditorHoverStatusBar","hoverRenderingContext","__spreadValues","disposables","DisposableStore","participant","renderedHoverParts","renderedHoverPart","renderedStatusBar","hoverPartsForParticipant","RenderedHoverParts","renderedPart","element","addDisposableListener","EventType","event","markdownHoverParticipant","p","MarkdownHoverParticipant","InlayHintsHover","ColorHoverParticipant","normalizedMarkdownHoverIndex","firstIndexOfMarkdownHovers","BugIndicatingError","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ContentHoverWidgetWrapper","Disposable","_editor","_instantiationService","_keybindingService","Emitter","ContentHoverWidget","ContentHoverComputer","HoverOperation","participants","participant","HoverParticipantRegistry","participantInstance","p1","p2","result","messages","HoverResult","contentHoverWidgetNode","addStandardDisposableListener","e","TokenizationRegistry","anchor","mode","source","focus","mouseEvent","isHoverSticky","isMouseGettingCloser","insistOnKeepingHoverVisible","hoverResult","currentHoverResult","loadingMessage","currentHoverResultIsEmpty","insistOnKeepingPreviousHoverVisible","context","RenderedContentHover","dimensions","anchorCandidates","HoverRangeAnchor","epsilon","a","b","editorDomNode","isMousePositionWithinElement","range","action","index","__async","node","IInstantiationService","IKeybindingService","init_event","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ContentHoverController_1","_sticky","ContentHoverController","Disposable","_editor","_instantiationService","_keybindingService","Emitter","DisposableStore","RunOnceScheduler","e","editor","hoverOpts","mouseEvent","contentWidgetNode","isMousePositionWithinElement","isHoverSticky","isMouseOnStickyContentHoverWidget","isMouseOnContentHoverWidget","isMouseOnColorPicker","isColorPickerVisible","isTextSelectedWithinContentHoverWidget","sticky","hidingDelay","mouseOnDecorator","decoratorActivatedOn","enabled","activatedByDecoratorClick","resolvedKeyboardEvent","shouldKeepHoverVisible","SHOW_OR_FOCUS_HOVER_ACTION_ID","INCREASE_HOVER_VERBOSITY_ACTION_ID","DECREASE_HOVER_VERBOSITY_ACTION_ID","InlineSuggestionHintsContentWidget","ContentHoverWidgetWrapper","range","mode","source","focus","activatedByColorDecoratorClick","action","index","IInstantiationService","IKeybindingService","ColorContribution","Disposable","_editor","e","mouseEvent","colorDecoratorsActivatedOn","target","ColorDecorationInjectedTextMarker","hoverController","ContentHoverController","range","Range","registerEditorContribution","HoverParticipantRegistry","ColorHoverParticipant","init_editorExtensions","init_nls","init_lifecycle","init_instantiation","init_event","init_languageFeatures","init_editorExtensions","init_editorContextKeys","init_contextkey","init_dom","init_editorWorker","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StandaloneColorPickerController_1","StandaloneColorPickerWidget_1","StandaloneColorPickerController","Disposable","_editor","_contextKeyService","_instantiationService","EditorContextKeys","StandaloneColorPickerWidget","editor","IContextKeyService","IInstantiationService","registerEditorContribution","StandaloneColorPickerController","PADDING","CLOSE_BUTTON_WIDTH","StandaloneColorPickerWidget","Disposable","StandaloneColorPickerWidget_1","_editor","_standaloneColorPickerVisible","_standaloneColorPickerFocused","_instantiationService","_keybindingService","_languageFeaturesService","_editorWorkerService","Emitter","StandaloneColorPickerParticipant","editorSelection","selection","focusTracker","trackFocus","_","e","classList","result","positionPreference","__async","computeAsyncResult","StandaloneColorPickerResult","range","colorInfo","colorHoverResult","DefaultDocumentColorProvider","colorHover","foundInEditor","fragment","statusBar","EditorHoverStatusBar","context","renderedHoverPart","colorPicker","colorPickerBody","saturationBoxWidth","widthOfOriginalColorBox","enterButton","colorPickerHeader","pickedColorNode","originalColorNode","__decorate","__param","IInstantiationService","IKeybindingService","ILanguageFeaturesService","IEditorWorkerService","StandaloneColorPickerResult","value","foundInEditor","init_editorContextKeys","init_actions","ShowOrFocusStandaloneColorPicker","EditorAction2","__spreadProps","__spreadValues","localize2","localize","MenuId","_accessor","editor","StandaloneColorPickerController","HideStandaloneColorPicker","EditorAction","EditorContextKeys","InsertColorWithStandaloneColorPicker","registerEditorAction","registerAction2","init_keyCodes","init_editorExtensions","init_range","init_editorContextKeys","init_languageConfigurationRegistry","init_position","init_range","init_selection","BlockCommentCommand","_BlockCommentCommand","selection","insertSpace","languageConfigurationService","haystack","needle","offset","needleLength","haystackLength","i","codeA","codeB","startToken","endToken","model","builder","startLineNumber","startColumn","endLineNumber","endColumn","startLineText","endLineText","startTokenIndex","endTokenIndex","startLineAfterStartToken","endLineBeforeEndToken","ops","Range","op","r","res","EditOperation","Position","languageId","config","helper","inverseEditOperations","startTokenEditOperation","endTokenEditOperation","Selection","srcRange","deltaColumn","init_strings","init_position","init_range","init_selection","LineCommentCommand","_LineCommentCommand","languageConfigurationService","selection","indentSize","type","insertSpace","ignoreEmptyLines","ignoreFirstLine","model","startLineNumber","endLineNumber","languageId","config","commentStr","lines","i","lineCount","onlyWhitespaceLines","shouldRemoveComments","lineData","lineNumber","lineContent","lineContentStartOffset","firstNonWhitespaceIndex","BlockCommentCommand","commentStrEndOffset","builder","data","s","ops","cursorPosition","Position","len","Range","startToken","endToken","startTokenAllowedBeforeColumn","startTokenIndex","endTokenIndex","op","helper","result","Selection","res","EditOperation","afterCommentStr","currentVisibleColumn","isTab","columnSize","minVisibleColumn","j","lenJ","init_nls","init_actions","CommentLineAction","EditorAction","type","opts","accessor","editor","languageConfigurationService","ILanguageConfigurationService","model","commands","modelOptions","commentsOptions","selections","selection","index","a","b","Range","prev","i","curr","LineCommentCommand","ToggleCommentLineAction","localize","EditorContextKeys","MenuId","AddLineCommentAction","KeyChord","RemoveLineCommentAction","BlockCommentAction","BlockCommentCommand","registerEditorAction","init_dom","init_actions","init_lifecycle","init_platform","init_editorExtensions","init_editorContextKeys","init_nls","init_contextkey","init_configuration","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ContextMenuController_1","ContextMenuController","editor","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_configurationService","_workspaceContextService","DisposableStore","e","view","getShadowRoot","hasSelectionAtPosition","selection","anchor","menuActions","model","menuId","result","groups","group","actions","addedItems","action","SubmenuItemAction","subActions","SubmenuAction","Separator","event","oldHoverSetting","cursorCoords","editorCoords","getDomNodePagePosition","posx","posy","useShadowDOM","isIOS","keybinding","ActionViewItem","customActionViewItem","wasCancelled","isStandaloneEditorWorkspace","minimapOptions","lastId","createAction","opts","createSubmenuAction","label","createEnumAction","enabled","configName","configuredValue","options","createRunner","value","option","localize","IContextMenuService","IContextViewService","IContextKeyService","IKeybindingService","IMenuService","IConfigurationService","IWorkspaceContextService","ShowContextMenu","EditorAction","localize","EditorContextKeys","accessor","editor","ContextMenuController","registerEditorContribution","registerEditorAction","init_lifecycle","init_editorExtensions","init_editorContextKeys","init_nls","CursorState","selections","other","thisLen","otherLen","i","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","Disposable","editor","e","prevState","stackElement","CursorUndo","EditorAction","localize","EditorContextKeys","accessor","args","CursorRedo","registerEditorContribution","registerEditorAction","init_lifecycle","init_platform","init_editorExtensions","init_position","init_range","init_selection","init_textModel","init_range","init_selection","DragAndDropCommand","selection","targetPosition","copy","model","builder","text","Range","Selection","helper","hasTriggerModifier","e","isMacintosh","DragAndDropController","_DragAndDropController","Disposable","editor","mouseEvent","target","possibleSelections","selection","newCursorPosition","Position","newSelections","primarySelection","selectionStartLineNumber","selectionStartColumn","Selection","DragAndDropCommand","ModelDecorationOptions","position","Range","registerEditorContribution","init_editorExtensions","init_editorContextKeys","init_nls","registerEditorContribution","CopyPasteController","registerEditorFeature","DefaultPasteProvidersFeature","registerEditorCommand","EditorCommand","changePasteTypeCommandId","pasteWidgetVisibleCtx","_accessor","editor","registerEditorAction","PasteAsAction","EditorAction","localize","EditorContextKeys","args","kind","HierarchicalKind","DefaultTextPasteOrDropEditProvider","init_editorExtensions","init_nls","init_configurationRegistry","init_platform","init_arrays","init_async","init_lifecycle","init_range","init_languageFeatures","TreeViewsDnDService","uuid","operation","DraggedTreeItemsIdentifier","identifier","init_extensions","init_instantiation","ITreeViewsDnDService","createDecorator","registerSingleton","TreeViewsDnDService","init_editorState","init_nls","init_configuration","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","DropIntoEditorController_1","defaultProviderConfig","changeDropTypeCommandId","dropWidgetVisibleCtx","RawContextKey","localize","DropIntoEditorController","Disposable","editor","instantiationService","_configService","_languageFeaturesService","_treeViewsDragAndDropService","LocalSelectionTransfer","InlineProgressManager","PostEditWidgetManager","e","position","dragEvent","__async","p","createCancelablePromise","token","disposables","DisposableStore","tokenSource","EditorStateCancellationTokenSource","ourDataTransfer","model","providers","provider","mime","editSession","activeEditIndex","canShowWidget","Range","edit","dataTransfer","results","raceCancellation","edits","__spreadProps","__spreadValues","err","coalesce","sortEditsByYieldTo","preferredProviders","configMime","desiredKindStr","desiredKind","HierarchicalKind","editIndex","matchesMimeType","VSDataTransfer","toExternalVSDataTransfer","DraggedTreeItemsIdentifier","data","id","treeDataTransfer","type","value","IInstantiationService","IConfigurationService","ILanguageFeaturesService","ITreeViewsDnDService","registerEditorContribution","DropIntoEditorController","registerEditorFeature","DefaultDropProvidersFeature","registerEditorCommand","EditorCommand","changeDropTypeCommandId","dropWidgetVisibleCtx","_accessor","editor","_args","Registry","Extensions","__spreadProps","__spreadValues","editorConfigurationBaseNode","defaultProviderConfig","localize","init_async","init_lifecycle","init_strings","init_editorExtensions","init_editorColorRegistry","init_editorContextKeys","init_model","init_arraysFind","init_async","init_lifecycle","init_position","init_range","init_selection","init_textModelSearch","init_range","init_model","init_textModel","init_colorRegistry","init_themeService","FindDecorations","_FindDecorations","editor","scopes","findScopeDecorationId","element","newStartPosition","decorationId","index","desiredRange","candidates","candidate","candidateOpts","nextMatch","newCurrentDecorationId","matchPosition","i","len","range","changeAccessor","rng","lineBeforeEnd","lineBeforeEndMaxColumn","Range","findMatches","findScopes","accessor","findMatchesOptions","newOverviewRulerApproximateDecorations","lineCount","approxPixelsPerLine","mergeLinesDelta","prevStartLineNumber","prevEndLineNumber","newFindMatchesDecorations","findScope","position","r","result","ModelDecorationOptions","themeColorFromId","overviewRulerFindMatchForeground","OverviewRulerLane","minimapFindMatch","init_range","ReplaceAllCommand","editorSelection","ranges","replaceStrings","model","builder","ops","i","o1","o2","Range","resultOps","previousOp","op","helper","init_strings","buildReplaceStringWithCasePreserved","matches","pattern","containsHyphens","validateSpecificSpecialCharacter","containsUnderscores","buildReplaceStringForSpecificSpecialCharacter","containsUppercaseCharacter","specialCharacter","splitPatternAtSpecialCharacter","splitMatchAtSpecialCharacter","replaceString","splitValue","index","StaticValueReplacePattern","staticValue","DynamicPiecesReplacePattern","pieces","ReplacePattern","_ReplacePattern","value","ReplacePiece","matches","preserveCase","buildReplaceStringWithCasePreserved","result","i","len","piece","match","repl","lenOps","opIdx","idx","matchIndex","remainder","_ReplacePiece","index","caseOps","ReplacePieceBuilder","source","toCharIndex","parseReplaceString","replaceString","chCode","nextChCode","nextNextChCode","init_contextkey","CONTEXT_FIND_WIDGET_VISIBLE","RawContextKey","CONTEXT_FIND_WIDGET_NOT_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","TogglePreserveCaseKeybinding","FIND_IDS","MATCHES_LIMIT","RESEARCH_DELAY","FindModelBoundToEditorModel","_FindModelBoundToEditorModel","editor","state","DisposableStore","TimeoutTimer","FindDecorations","RunOnceScheduler","e","dispose","model","findScope","moveCursor","newFindScope","findScopes","endLineNumber","Range","findMatches","editorSelection","currentMatchesPosition","matchAfterSelection","findFirstIdxMonotonousOrArrLen","match","range","matchesPosition","before","isUsingLineStops","lineNumber","column","Position","isRecursed","nextMatchRange","prevMatchRange","searchRange","position","prevMatch","after","nextMatch","captureMatches","forceMove","index","decorationRange","parseReplaceString","ReplacePattern","replacePattern","selection","replaceString","command","ReplaceCommand","limitResultCount","searchRanges","scope","searchData","SearchParams","searchRegex","mod","modelText","fullModelRange","resultText","preserveCase","ReplaceCommandThatPreservesSelection","matches","replaceStrings","i","len","ReplaceAllCommand","m","selections","Selection","source","init_dom","init_async","init_colorRegistry","FindOptionsWidget","Widget","editor","state","keybindingService","RunOnceScheduler","toggleStyles","asCssVariable","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","hoverDelegate","createInstantHoverDelegate","CaseSensitiveToggle","__spreadValues","FIND_IDS","WholeWordsToggle","RegexToggle","e","somethingChanged","addDisposableListener","EventType","actionId","kb","init_event","init_lifecycle","init_range","effectiveOptionValue","override","value","FindReplaceState","Disposable","Emitter","matchesPosition","matchesCount","currentMatch","changeEvent","somethingChanged","Range","newState","moveCursor","updateHistory","oldEffectiveIsRegex","oldEffectiveWholeWords","oldEffectiveMatchCase","oldEffectivePreserveCase","newSearchScope","existingSearchScope","MATCHES_LIMIT","init_dom","init_async","init_codicons","init_errors","init_lifecycle","init_platform","init_strings","init_range","init_nls","init_dom","init_codicons","init_event","init_nls","NLS_DEFAULT_LABEL","localize","NLS_PRESERVE_CASE_LABEL","PreserveCaseToggle","Toggle","opts","Codicon","getDefaultHoverDelegate","ReplaceInput","Widget","parent","contextViewProvider","_showOptionButtons","options","Emitter","appendPreserveCaseLabel","history","flexibleHeight","flexibleWidth","flexibleMaxHeight","HistoryInputBox","__spreadValues","viaKeyboard","e","indexes","event","index","newIndex","EventHelper","controls","enabled","value","newWidth","init_contextkey","init_keybindingsRegistry","init_nls","init_lifecycle","init_dom","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","historyNavigationVisible","RawContextKey","localize","HistoryNavigationWidgetFocusContext","HistoryNavigationForwardsEnablementContext","HistoryNavigationBackwardsEnablementContext","lastFocusedWidget","widgets","registerAndCreateHistoryNavigationContext","scopedContextKeyService","widget","disposableStore","DisposableStore","historyNavigationWidgetFocus","historyNavigationForwardsEnablement","historyNavigationBackwardsEnablement","onDidFocus","onDidBlur","isActiveElement","toDisposable","ContextScopedFindInput","FindInput","container","contextViewProvider","options","contextKeyService","IContextKeyService","ContextScopedReplaceInput","ReplaceInput","container","contextViewProvider","options","contextKeyService","showReplaceOptions","scopedContextKeyService","registerAndCreateHistoryNavigationContext","__decorate","__param","IContextKeyService","KeybindingsRegistry","ContextKeyExpr","HistoryNavigationWidgetFocusContext","HistoryNavigationBackwardsEnablementContext","historyNavigationVisible","accessor","lastFocusedWidget","HistoryNavigationForwardsEnablementContext","showHistoryKeybindingHint","keybindingService","init_colorRegistry","init_themeService","init_themables","init_theme","init_types","findCollapsedIcon","registerIcon","Codicon","localize","findExpandedIcon","findSelectionIcon","findReplaceIcon","findReplaceAllIcon","findPreviousMatchIcon","findNextMatchIcon","NLS_FIND_DIALOG_LABEL","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","MATCHES_LIMIT","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","FIND_WIDGET_INITIAL_WIDTH","PART_WIDTH","FIND_INPUT_AREA_WIDTH","MAX_MATCHES_COUNT_WIDTH","FIND_INPUT_AREA_HEIGHT","ctrlEnterReplaceAllWarningPromptedKey","ctrlKeyMod","isMacintosh","FindWidgetViewZone","afterLineNumber","stopPropagationForMultiLineUpwards","event","value","textarea","isMultiline","stopPropagationForMultiLineDownwards","FindWidget","Widget","codeEditor","controller","state","contextViewProvider","keybindingService","contextKeyService","themeService","storageService","notificationService","_hoverService","Delayer","toDisposable","e","supportLoop","addExtraSpaceOnTop","__async","globalBufferTerm","CONTEXT_FIND_INPUT_FOCUSED","trackFocus","CONTEXT_REPLACE_INPUT_FOCUSED","getTotalWidth","showRedOutline","onUnexpectedError","label","matchesCount","matchesPosition","format","alert","currentMatch","searchString","ariaLabel","model","selection","isSelection","isChecked","findInputIsNonEmpty","canReplace","isSelectionMultipleLine","adjustEditorScrollTop","domNode","editorCoords","getDomNodePagePosition","startCoords","startLeft","startTop","leftOfFindWidget","getTopLeftOffset","endCoords","focusTheEditor","targetScrollTop","viewZone","accessor","adjustScroll","newHeight","scrollAdjustment","layoutInfo","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","findInputWidth","totalheight","totalHeight","selections","Range","element","isWindows","isNative","_sash","actionId","kb","ContextScopedFindInput","FIND_IDS","showHistoryKeybindingHint","defaultInputBoxStyles","defaultToggleStyles","isLinux","hoverDelegate","createInstantHoverDelegate","SimpleButton","assertIsDefined","findPart","actionsContainer","Toggle","asCssVariable","inputActiveOptionBackground","inputActiveOptionBorder","inputActiveOptionForeground","widgetClose","ContextScopedReplaceInput","replaceHoverDelegate","replacePart","replaceActionsContainer","Sash","originalWidth","evt","width","maxWidth","getComputedStyle","currentWidth","opts","hoverService","className","ThemeIcon","getDefaultHoverDelegate","enabled","expanded","registerThemingParticipant","theme","collector","findMatchHighlightBorder","editorFindMatchHighlightBorder","isHighContrast","findRangeHighlightBorder","editorFindRangeHighlightBorder","hcBorder","contrastBorder","findMatchForeground","editorFindMatchForeground","findMatchHighlightForeground","editorFindMatchHighlightForeground","init_nls","init_actions","init_contextkey","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","CommonFindController_1","SEARCH_STRING_MAX_LENGTH","getSelectionSearchString","editor","seedSearchStringFromSelection","seedSearchStringFromNonEmptySelection","selection","wordAtPosition","CommonFindController","Disposable","contextKeyService","storageService","clipboardService","notificationService","hoverService","CONTEXT_FIND_WIDGET_VISIBLE","Delayer","FindReplaceState","e","shouldRestartFind","CONTEXT_FIND_INPUT_FOCUSED","selections","element","searchString","escapeRegExpCharacters","ignoreWhenVisible","opts","newState","__async","stateChanges","__spreadProps","__spreadValues","selectionSearchString","currentSelections","FindModelBoundToEditorModel","index","localize","text","IContextKeyService","IStorageService","IClipboardService","INotificationService","IHoverService","FindController","CommonFindController","editor","_contextViewService","_contextKeyService","_keybindingService","_themeService","notificationService","_storageService","clipboardService","hoverService","opts","newState","__async","selection","updateSearchScope","__superGet","ignoreWhenVisible","FindWidget","FindOptionsWidget","__decorate","__param","IContextViewService","IContextKeyService","IKeybindingService","IThemeService","INotificationService","IStorageService","IClipboardService","IHoverService","StartFindAction","registerMultiEditorAction","MultiEditorAction","FIND_IDS","localize","ContextKeyExpr","EditorContextKeys","MenuId","accessor","editor","args","controller","CommonFindController","findArgDescription","StartFindWithArgsAction","EditorAction","__async","newState","StartFindWithSelectionAction","MatchFindAction","NextMatchFindAction","CONTEXT_FIND_INPUT_FOCUSED","PreviousMatchFindAction","MoveToMatchFindAction","CONTEXT_FIND_WIDGET_VISIBLE","matchesCount","INotificationService","Severity","quickInputService","IQuickInputService","disposables","DisposableStore","inputBox","toFindMatchIndex","value","index","matchCount","updatePickerAndEditor","currentMatch","changeAccessor","range","themeColorFromId","overviewRulerRangeHighlight","OverviewRulerLane","SelectionMatchFindAction","selectionSearchString","getSelectionSearchString","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","currentSelection","findInputFocused","seedSearchStringFromSelection","shouldFocus","registerEditorContribution","FindController","registerEditorAction","FindCommand","EditorCommand","registerEditorCommand","x","ToggleCaseSensitiveKeybinding","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","TogglePreserveCaseKeybinding","CONTEXT_REPLACE_INPUT_FOCUSED","init_async","init_cancellation","init_errors","init_keyCodes","init_lifecycle","init_strings","init_types","init_editorExtensions","init_editorContextKeys","init_languages","init_languageConfigurationRegistry","init_event","foldSourceAbbr","MAX_FOLDING_REGIONS","MAX_LINE_NUMBER","MASK_INDENT","BitField","size","numWords","index","arrayIndex","bit","newState","value","FoldingRegions","_FoldingRegions","startIndexes","endIndexes","types","parentIndexes","isInsideLast","startLineNumber","endLineNumber","len","parentIndex","source","type","hasChanged","i","FoldingRegion","parent","line","low","high","mid","res","ranges","rangesLength","gotTypes","range","regions","rangesA","rangesB","maxLineNumber","selection","getIndexedFunction","r","limit","getA","getB","indexA","indexB","nextA","nextB","stackedRanges","topStackedRange","prevLineNumber","resultRanges","useRange","scanIndex","prescanB","lineNumber","init_hash","FoldingModel","textModel","decorationProvider","Emitter","FoldingRegions","toggledRegions","r1","r2","processed","accessor","k","dirtyRegionEndLine","lastHiddenLine","updateDecorationsUntil","index","endLineNumber","isCollapsed","isManual","region","editorDecorationId","newCollapseState","ranges","newFoldingRanges","intersects","foldRange","range","i","newRegions","selection","foldedOrManualRanges","newRanges","newEditorDecorations","limit","startLineNumber","decorationRange","foldedRanges","source","decRange","result","maxLineNumber","checksum","state","rangesToRestore","lineNumber1","lineNumber2","hash","lineNumber","filter","level","current","levelStack","len","toggleCollapseState","foldingModel","levels","lineNumbers","toToggle","doCollapse","regionsInside","r","setCollapseStateLevelsDown","setCollapseStateLevelsUp","regions","setCollapseStateUp","setCollapseStateAtLevel","foldLevel","blockedLineNumbers","line","setCollapseStateForRest","filteredRegions","filteredRegion","setCollapseStateForMatchingLines","regExp","editorModel","setCollapseStateForType","type","getParentFoldLine","foldingRegion","parentFoldingIdx","getPreviousFoldLine","expectedParentIndex","minLineNumber","getNextFoldLine","init_arraysFind","init_event","init_range","init_eolCounter","HiddenRangeModel","model","Emitter","_","change","countEOL","updateHiddenAreas","newHiddenAreas","k","lastCollapsedStart","lastCollapsedEnd","ranges","startLineNumber","endLineNumber","Range","line","findRange","selections","hasChanges","editorModel","lastRange","adjustLine","isInside","i","len","selection","adjustedStartLine","adjustedEndLine","range","findFirstIdxMonotonousOrArrLen","r","init_utils","MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT","ID_INDENT_PROVIDER","IndentRangeProvider","editorModel","languageConfigurationService","foldingRangesLimit","cancelationToken","foldingRules","offSide","markers","computeRanges","RangesCollector","startLineNumber","endLineNumber","indent","MAX_LINE_NUMBER","index","model","limit","startIndexes","endIndexes","i","k","FoldingRegions","entries","maxIndent","n","tabSize","startIndex","lineContent","computeIndentLevel","foldingRangesLimitDefault","result","pattern","previousRegions","line","previous","m","init_nls","init_contextkey","init_codicons","init_textModel","init_nls","init_colorRegistry","init_themeService","init_themables","foldBackground","registerColor","transparent","editorSelectionBackground","localize","iconForeground","foldingExpandedIcon","registerIcon","Codicon","foldingCollapsedIcon","foldingManualCollapsedIcon","foldingManualExpandedIcon","foldedBackgroundMinimap","themeColorFromId","collapsed","expanded","FoldingDecorationProvider","_FoldingDecorationProvider","ModelDecorationOptions","ThemeIcon","editor","isCollapsed","isHidden","isManual","callback","decorationIds","init_errors","init_lifecycle","foldingContext","ID_SYNTAX_PROVIDER","SyntaxRangeProvider","editorModel","providers","handleFoldingRangesChange","foldingRangesLimit","fallbackRangeProvider","DisposableStore","provider","cancellationToken","collectSyntaxRanges","ranges","sanitizeRanges","model","rangeData","promises","i","nLines","r","onUnexpectedExternalError","_","RangesCollector","startLineNumber","endLineNumber","type","nestingLevel","MAX_LINE_NUMBER","index","limit","startIndexes","endIndexes","FoldingRegions","entries","maxLevel","n","types","k","level","sorted","d1","d2","diff","collector","top","previous","entry","init_languageFeatureDebounce","init_stopwatch","init_languageFeatures","init_event","init_commands","init_uri","init_model","init_configuration","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","FoldingController_1","CONTEXT_FOLDING_ENABLED","RawContextKey","FoldingController","Disposable","editor","languageFeaturesService","model","foldingRangeProviders","contextKeyService","languageConfigurationService","notificationService","languageFeatureDebounceService","DisposableStore","RangesLimitReporter","options","FoldingDecorationProvider","e","collapsedRegions","provider","state","FoldingModel","HiddenRangeModel","hr","Delayer","RunOnceScheduler","editorModel","indentRangeProvider","IndentRangeProvider","selectedProviders","SyntaxRangeProvider","foldingModel","sw","StopWatch","foldingRegionPromise","createCancelablePromise","token","foldingRanges","scrollState","hasChanges","FoldingRangeKind","StableEditorScrollState","selections","toSelectedLines","newValue","err","onUnexpectedError","hiddenRanges","toToggle","selection","lineNumber","range","iconClicked","data","offsetLeftInGutter","region","isCollapsed","surrounding","filter","otherRegion","toMaybeToggle","recursive","position","IContextKeyService","ILanguageConfigurationService","INotificationService","ILanguageFeatureDebounceService","ILanguageFeaturesService","RangesLimitReporter","editor","Emitter","computed","limited","FoldingAction","EditorAction","accessor","args","languageConfigurationService","ILanguageConfigurationService","foldingController","FoldingController","foldingModelPromise","foldingModel","selection","selections","s","l","_accessor","_editor","toSelectedLines","startLine","endLine","line","foldingArgumentsConstraint","isUndefined","isObject","foldingArgs","isNumber","isString","UnfoldAction","localize","CONTEXT_FOLDING_ENABLED","EditorContextKeys","_foldingController","levels","lineNumbers","setCollapseStateLevelsUp","setCollapseStateLevelsDown","UnFoldRecursivelyAction","KeyChord","_args","FoldAction","direction","setCollapseStateUp","ToggleFoldAction","selectedLines","toggleCollapseState","FoldRecursivelyAction","ToggleFoldRecursivelyAction","FoldAllBlockCommentsAction","setCollapseStateForType","FoldingRangeKind","editorModel","comments","regExp","escapeRegExpCharacters","setCollapseStateForMatchingLines","FoldAllRegionsAction","foldingRules","UnfoldAllRegionsAction","FoldAllExceptAction","setCollapseStateForRest","UnfoldAllExceptAction","FoldAllAction","UnfoldAllAction","FoldLevelAction","level","setCollapseStateAtLevel","GotoParentFoldAction","startLineNumber","getParentFoldLine","GotoPreviousFoldAction","getPreviousFoldLine","GotoNextFoldAction","getNextFoldLine","FoldRangeFromSelectionAction","collapseRanges","endLineNumber","b","newRanges","FoldingRegions","RemoveFoldRangeFromSelectionAction","ranges","registerEditorContribution","registerEditorAction","i","registerInstantiatedEditorAction","CommandsRegistry","__async","resource","URI","illegalArgument","languageFeaturesService","ILanguageFeaturesService","model","IModelService","configurationService","IConfigurationService","strategy","foldingLimitReporter","indentRangeProvider","IndentRangeProvider","rangeProvider","providers","SyntaxRangeProvider","CancellationToken","result","type","init_editorExtensions","init_nls","EditorFontZoomIn","EditorAction","localize","accessor","editor","EditorZoom","EditorFontZoomOut","EditorFontZoomReset","registerEditorAction","init_arrays","init_cancellation","init_errors","init_keyCodes","init_lifecycle","init_editorExtensions","init_codeEditorService","init_characterClassifier","init_range","init_editorContextKeys","init_editorWorker","init_languageFeatures","init_nls","init_commands","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","FormatOnType","_editor","_languageFeaturesService","_workerService","_accessibilitySignalService","DisposableStore","e","model","support","triggerChars","CharacterSet","ch","text","lastCharCode","position","cts","CancellationTokenSource","unbind","len","getOnTypeFormattingEdits","edits","isNonEmptyArray","AccessibilitySignal","FormattingEdit","ILanguageFeaturesService","IEditorWorkerService","IAccessibilitySignalService","FormatOnPaste","editor","_languageFeaturesService","_instantiationService","DisposableStore","range","formatDocumentRangesWithSelectedProvider","Progress","CancellationToken","onUnexpectedError","__decorate","__param","ILanguageFeaturesService","IInstantiationService","FormatDocumentAction","EditorAction","localize","ContextKeyExpr","EditorContextKeys","accessor","__async","instaService","IEditorProgressService","formatDocumentWithSelectedProvider","FormatSelectionAction","KeyChord","model","ranges","Range","registerEditorContribution","FormatOnType","registerEditorAction","CommandsRegistry","ICodeEditorService","commandService","ICommandService","init_cancellation","init_types","init_uri","init_resolverService","init_outlineModel","init_commands","CommandsRegistry","accessor","args","__async","resource","assertType","URI","outlineService","IOutlineModelService","reference","ITextModelService","CancellationToken","init_editorExtensions","init_observable","init_base","init_editorExtensions","init_editorContextKeys","init_observable","init_strings","init_cursorColumns","init_contextkey","init_lifecycle","init_nls","InlineCompletionContextKeys","_InlineCompletionContextKeys","Disposable","RawContextKey","localize","contextKeyService","model","autorun","reader","state","isInlineCompletionVisible","startsWithIndentation","startsWithIndentationLessThanTabSize","ghostText","column","lines","firstLine","indentationEndColumn","firstNonWsIdx","firstNonWhitespaceIndex","tabSize","CursorColumns","init_dom","init_lifecycle","init_observable","createStyleSheetFromObservable","css","store","DisposableStore","w","createStyleSheet2","autorun","reader","init_async","init_cancellation","init_lifecycle","init_observable","init_derived","init_utils","init_types","init_observableCodeEditor","init_position","init_languageFeatureDebounce","init_languageFeatures","init_event","init_lifecycle","init_observable","init_strings","init_position","init_range","init_stringBuilder","init_language","init_model","init_lineTokens","init_arrays","init_strings","init_position","init_range","GhostText","lineNumber","parts","other","part","index","lineText","lastPart","cappedLineText","TextEdit","p","SingleTextEdit","Range","Position","r","GhostTextPart","column","text","preview","splitLines","line","GhostTextReplacement","columnRange","additionalReservedLineCount","_lineText","ghostTextsOrReplacementsEqual","a","b","equals","ghostTextOrReplacementEquals","init_errors","init_lifecycle","init_observable","init_position","init_range","array","getReadonlyEmptyArray","ColumnRange","startColumn","endColumnExclusive","BugIndicatingError","lineNumber","Range","other","applyObservableDecorations","editor","decorations","d","DisposableStore","decorationsCollection","autorunOpts","reader","addPositions","pos1","pos2","Position","subtractPositions","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","GHOST_TEXT_DESCRIPTION","GhostTextView","Disposable","editor","model","languageService","observableValue","observableFromEvent","derived","reader","textModel","ghostText","replacedRange","GhostTextReplacement","inlineTexts","additionalLines","addToAdditionalLines","lines","className","lastLine","LineDecoration","line","textBufferLine","hiddenTextStartColumn","lastIdx","part","hiddenRange","ColumnRange","uiState","decorations","p","Range","Position","InjectedTextCursorStops","AdditionalLinesWidget","toDisposable","applyObservableDecorations","viewZoneId","ILanguageService","AdditionalLinesWidget","Disposable","editor","languageIdCodec","lines","observableSignalFromEvent","Event","e","autorun","reader","changeAccessor","lineNumber","additionalLines","minReservedLineCount","textModel","tabSize","heightInLines","domNode","renderLines","opts","disableMonospaceOptimizations","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","fontInfo","lineHeight","sb","StringBuilder","i","len","lineData","line","isBasicASCII","containsRTL","lineTokens","LineTokens","renderViewLine","RenderLineInput","EditorFontLigatures","applyFontInfo","html","trustedhtml","ttPolicy","createTrustedTypesPolicy","value","init_arrays","init_arraysFind","init_equals","init_errors","init_lifecycle","init_observable","init_strings","init_types","init_position","init_range","init_selection","init_textLength","init_languages","init_languageConfigurationRegistry","init_cancellation","init_equals","init_filters","init_lifecycle","init_observable","init_range","init_textLength","init_languages","init_languageConfigurationRegistry","init_languageFeatures","init_assert","init_async","init_cancellation","init_map","init_errors","init_position","init_range","init_brackets","init_length","init_parser","init_smallImmutableSet","init_tokenizer","fixBracketsInLine","tokens","languageConfigurationService","denseKeyProvider","DenseKeyProvider","bracketTokens","LanguageAgnosticBracketTokens","languageId","tokenizer","TextBufferTokenizer","StaticTokenizerSource","node","parseDocument","str","line","processNode","offset","lengthAdd","closingTokenText","child","lengthZero","lines","lineNumber","provideInlineCompletions","_0","_1","_2","_3","__async","registry","positionOrRange","model","context","token","CancellationToken","languageConfigurationService","defaultReplaceRange","Position","getDefaultRange","providers","multiMap","SetMap","provider","getPreferredProviders","result","groupId","p","states","seen","findPreferredProviderCircle","stack","preferred","c","processProvider","state","circle","onUnexpectedExternalError","s","deferredPromise","DeferredPromise","e","providerResults","itemsByHash","lists","completions","list","InlineCompletionList","item","inlineCompletionItem","InlineCompletionItem","InlineCompletionProviderResult","hashs","inlineCompletions","_InlineCompletionItem","inlineCompletion","source","textModel","insertText","snippetInfo","range","Range","closeBrackets","diff","preBracketCompletionLength","snippet","SnippetParser","Text","assertNever","getReadonlyEmptyArray","filterText","command","additionalTextEdits","sourceInlineCompletion","updatedRange","SingleTextEdit","position","word","maxColumn","text","newLine","slicedTokens","fixBracketsInLine","init_strings","init_range","init_textLength","singleTextRemoveCommonPrefix","edit","model","validModelRange","modelRange","valueToReplace","commonPrefixLen","commonPrefixLength","start","TextLength","text","range","Range","SingleTextEdit","singleTextEditAugments","base","rangeExtends","computeGhostText","mode","cursorPosition","previewSuffixLength","e","sourceLine","sourceIndentationLength","getLeadingWhitespace","suggestionAddedIndentationLength","replacedIndentation","startPosition","endPosition","newStartPosition","rangeThatDoesNotReplaceIndentation","suggestionWithoutIndentationChange","valueToBeReplaced","changes","cachingDiff","lineNumber","parts","filteredChanges","c","previewStartInCompletionText","insertColumn","modifiedEnd","nonPreviewTextEnd","nonPreviewText","italicText","GhostTextPart","GhostText","extendingRange","rangeToExtend","lastRequest","originalValue","newValue","smartDiff","deletedChars","deletedCharacters","newChanges","sum","smartBracketMatching","getMaxCharCode","val","maxCharCode","i","len","charCode","getUniqueCharCode","id","getElements","source","level","group","characters","elements1","elements2","LcsDiff","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineCompletionsSource","Disposable","textModel","versionId","_debounceValue","languageFeaturesService","languageConfigurationService","MutableDisposable","disposableObservableValue","position","context","activeInlineCompletion","request","UpdateRequest","updateOngoing","source","CancellationTokenSource","promise","__async","InlineCompletionTriggerKind","wait","startTime","updatedCompletions","provideInlineCompletions","endTime","completions","UpToDateInlineCompletions","asInlineCompletion","transaction","tx","updateOperation","UpdateOperation","ILanguageFeaturesService","ILanguageConfigurationService","wait","ms","cancellationToken","resolve","d","handle","UpdateRequest","position","context","versionId","other","equalsIfDefined","itemEquals","InlineCompletionTriggerKind","UpdateOperation","request","cancellationTokenSource","promise","UpToDateInlineCompletions","inlineCompletionProviderResult","_textModel","_versionId","ids","i","index","InlineCompletionWithUpdatedRange","inlineCompletion","range","addRefToSource","id","decorationId","_modelVersion","derivedOpts","Range","reader","emptyRange","SingleTextEdit","model","cursorPosition","minimizedReplacement","singleTextRemoveCommonPrefix","updatedRange","originalValue","filterText","cursorPosIndex","filterTextBefore","filterTextAfter","originalValueBefore","originalValueAfter","originalValueIndent","matchesSubString","TextLength","init_lifecycle","init_types","init_editorExtensions","init_position","init_editorContextKeys","init_languageConfigurationRegistry","init_languageFeatures","init_cancellation","init_errors","init_filters","init_lifecycle","init_stopwatch","init_types","init_uri","init_position","init_range","init_resolverService","init_nls","init_actions","init_commands","init_contextkey","init_languageFeatures","Context","historyNavigationVisible","RawContextKey","localize","suggestWidgetStatusbarMenu","MenuId","CompletionItem","position","completion","container","provider","FuzzyScore","Range","Position","token","__async","sub","sw","StopWatch","value","err","isCancellationError","CompletionOptions","_CompletionOptions","snippetSortOrder","kindFilter","providerFilter","providerItemsToReuse","showDeprecated","_snippetSuggestSupport","getSnippetSuggestSupport","CompletionItemModel","items","needsClipboard","durations","disposable","provideSuggestionItems","_0","_1","_2","registry","model","options","context","CancellationToken","word","defaultReplaceRange","defaultRange","result","disposables","DisposableStore","onCompletionList","didAddResult","suggestion","SnippetParser","isDisposable","snippetCompletions","reuseItems","item","list","providerGroup","onUnexpectedExternalError","CancellationError","getSuggestionComparator","defaultComparator","a","b","snippetUpComparator","snippetDownComparator","_snippetComparators","snippetConfig","CommandsRegistry","accessor","args","uri","triggerCharacter","maxItemsToResolve","assertType","URI","completionProvider","ILanguageFeaturesService","ref","ITextModelService","resolving","actualPosition","completions","showSimpleSuggestions","editor","QuickSuggestionsOptions","config","tokenType","init_nls","init_contextkey","init_log","init_arrays","init_lifecycle","init_strings","init_range","init_selection","init_languageConfigurationRegistry","init_textModel","init_extpath","init_platform","normalizeDriveLetter","path","isWindowsOS","isWindows","hasDriveLetter","init_path","init_resources","init_strings","init_languageConfigurationRegistry","init_nls","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","KnownSnippetVariableNames","CompositeSnippetVariableResolver","_delegates","variable","delegate","value","SelectionBasedVariableResolver","_model","_selection","_selectionIdx","_overtypingCapturer","name","isMultiline","info","line","lineLeadingWhitespace","getLeadingWhitespace","varLeadingWhitespace","marker","Text","splitLines","whitespaceCommonLength","commonPrefixLength","m","newline","rest","ModelBasedVariableResolver","_labelService","basename","idx","dirname","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","clipboardText","lines","s","isFalsyOrWhitespace","CommentBasedVariableResolver","_languageConfigurationService","langId","config","ILanguageConfigurationService","TimeBasedVariableResolver","_TimeBasedVariableResolver","localize","variable","name","rawTimeOffset","sign","hours","hoursString","minutes","minutesString","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","toWorkspaceIdentifier","isEmptyWorkspaceIdentifier","isSingleFolderWorkspaceIdentifier","basename","filename","WORKSPACE_EXTENSION","normalizeDriveLetter","folderpath","RandomBasedVariableResolver","generateUuid","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SnippetSession_1","OneSnippet","_OneSnippet","ModelDecorationOptions","_editor","_snippet","_snippetLineLeadingWhitespace","groupBy","Placeholder","textChange","model","accessor","placeholder","placeholderOffset","placeholderLen","range","Range","options","handle","fwd","operations","id","currentValue","transformedValueLines","EditOperation","couldSkipThisPlaceholder","newSelections","activePlaceholders","selections","Selection","enclosingPlaceholder","marker","result","placeholdersWithEqualIndex","ranges","Choice","others","nested","indexLastPlaceholder","nestedPlaceholder","_defaultOptions","SnippetSession","position","adjustIndentation","snippet","filter","line","lineLeadingWhitespace","getLeadingWhitespace","snippetTextString","Text","lines","offset","prevChar","newValue","selection","overwriteBefore","overwriteAfter","positionLineNumber","positionColumn","positionColumnBefore","positionColumnAfter","editor","template","enforceFinalTabstop","adjustWhitespace","clipboardText","overtypingCapturer","languageConfigurationService","edits","snippets","workspaceService","IWorkspaceContextService","modelBasedVariableResolver","ModelBasedVariableResolver","ILabelService","readClipboardText","firstBeforeText","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","idx","a","b","extensionBefore","extensionAfter","snippetSelection","SnippetParser","start","snippetLineLeadingWhitespace","CompositeSnippetVariableResolver","ClipboardBasedVariableResolver","SelectionBasedVariableResolver","CommentBasedVariableResolver","TimeBasedVariableResolver","WorkspaceBasedVariableResolver","RandomBasedVariableResolver","snippetEdits","parser","TextmateSnippet","resolver","lastRange","textRange","textNode","newNodes","snippetText","snippetFragmentText","edit","_template","_options","_languageConfigurationService","dispose","_undoEdits","undoEdits","isTrivialSnippet","oneSelection","allPossibleSelections","possibleSelections","index","array","ILanguageConfigurationService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SnippetController2_1","_defaultOptions","SnippetController2","editor","RawContextKey","localize","_editor","_logService","_languageFeaturesService","contextKeyService","_languageConfigurationService","DisposableStore","template","opts","__spreadValues","e","assertType","SnippetSession","provider","model","position","Position","activeChoice","word","isAnyOfOptions","o","suggestions","option","registration","isRegistered","disable","enable","showSimpleSuggestions","resetSelection","ILogService","ILanguageFeaturesService","IContextKeyService","ILanguageConfigurationService","registerEditorContribution","SnippetController2","CommandCtor","EditorCommand","registerEditorCommand","ContextKeyExpr","ctrl","EditorContextKeys","init_commands","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineCompletionsModel","Disposable","textModel","selectedSuggestItem","_textModelVersionId","_positions","_debounceValue","_suggestPreviewEnabled","_suggestPreviewMode","_inlineSuggestMode","_enabled","_instantiationService","_commandService","_languageConfigurationService","InlineCompletionsSource","observableValue","observableSignal","derived","reader","Position","VersionIdChangeReason","derivedHandleChanges","InlineCompletionTriggerKind","ctx","changeSummary","suggestWidgetInlineCompletions","suggestItem","inlineCompletions","transaction","tx","cursorPosition","context","itemToPreserveCandidate","itemToPreserve","derivedOpts","itemsEquals","selectedInlineCompletionId","filteredCompletions","idx","v","a","b","ghostTextsOrReplacementsEqual","model","suggestCompletionEdit","singleTextRemoveCommonPrefix","augmentation","fullEdit","fullEditPreviewLength","mode","positions","edits","getSecondaryEdits","ghostTexts","edit","computeGhostText","isDefined","primaryGhostText","GhostText","inlineCompletion","replacement","ghostTextOrReplacementEquals","recomputeInitiallyAndOnChange","lastItem","autorun","completion","src","__async","subtransaction","suggestCompletion","candidateInlineCompletions","mapFindFirst","Range","singleTextEditAugments","delta","completions","newIdx","editor","BugIndicatingError","state","EditOperation","SnippetController2","selections","getEndPositionsAfterApplying","p","Selection","onUnexpectedExternalError","pos","text","langId","config","wordRegExp","m1","acceptUntilIndexExclusive","m2","m","getAcceptUntilIndex","kind","ghostText","firstPart","ghostTextPos","ghostTextVal","partialGhostTextVal","replaceRange","newText","primaryEdit","SingleTextEdit","acceptedRange","TextLength","item","itemEdit","augmentedCompletion","IInstantiationService","ICommandService","ILanguageConfigurationService","VersionIdChangeReason","getSecondaryEdits","textModel","positions","primaryEdit","primaryPosition","secondaryPositions","primaryEditStartPosition","primaryEditEndPosition","replacedTextAfterPrimaryCursor","Range","positionWithinTextEdit","subtractPositions","onUnexpectedError","BugIndicatingError","secondaryEditText","substringPos","pos","posEnd","addPositions","textAfterSecondaryCursor","l","commonPrefixLength","range","SingleTextEdit","text","subtext","lines","splitLinesIncludeSeparators","i","getEndPositionsAfterApplying","edits","sortPerm","Permutation","compareBy","e","sortedNewRanges","TextEdit","init_arrays","init_arraysFind","init_event","init_lifecycle","init_position","init_range","init_languages","init_arrays","init_cancellation","init_errors","init_event","init_keybindings","init_lifecycle","init_platform","init_stopwatch","init_types","init_editorExtensions","init_position","init_range","init_editorContextKeys","init_async","init_lifecycle","init_map","init_languages","init_configuration","init_extensions","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestMemoryService_1","Memory","name","model","pos","items","topScore","score","suggestion","NoMemory","item","LRUMemory","LRUCache","lineSuffix","indexPreselect","indexRecency","seq","data","value","CompletionItemKinds","PrefixMemory","TernarySearchTree","word","kind","insertText","entries","a","b","SuggestMemoryService","_storageService","_configService","DisposableStore","RunOnceScheduler","e","WillSaveStateReason","mode","ctor","scope","raw","IStorageService","IConfigurationService","ISuggestMemoryService","createDecorator","registerSingleton","SuggestMemoryService","init_contextkey","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","WordContextKey_1","WordContextKey","RawContextKey","_editor","contextKeyService","e","enabled","checkForWordEnd","model","selection","word","IContextKeyService","init_nls","init_commands","init_contextkey","init_instantiation","init_log","init_contextkey","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestAlternatives_1","SuggestAlternatives","RawContextKey","_editor","contextKeyService","model","index","acceptNext","fwd","newIndex","rounds","IContextKeyService","init_arrays","init_lifecycle","init_characterClassifier","CommitCharacterController","editor","widget","model","accept","DisposableStore","e","text","ch","selected","isNonEmptyArray","acceptCharacters","CharacterSet","init_async","init_cancellation","init_errors","init_event","init_lifecycle","init_strings","init_selection","init_editorWorker","init_arrays","init_range","init_linkedList","init_position","init_range","BracketSelectionRangeProvider","model","positions","__async","result","position","bucket","ranges","resolve","round","pos","counts","t1","bracket","key","val","list","LinkedList","closing","innerBracket","Range","outerBracket","startLine","column","Position","aboveLine","WordDistance","_WordDistance","service","editor","__async","model","position","ranges","BracketSelectionRangeProvider","wordRanges","wordUntilPos","anchor","item","word","wordLines","isFalsyOrEmpty","idx","binarySearch","Range","bestWordRange","blockDistance","range","init_configuration","init_contextkey","init_log","init_telemetry","init_arrays","init_filters","init_strings","LineContext","leadingLineContent","characterCountDelta","CompletionModel","_CompletionModel","items","column","lineContext","wordDistance","options","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","clipboardText","value","result","provider","labelLengths","word","wordLow","source","target","scoreFn","fuzzyScore","fuzzyScoreGracefulAggressive","i","item","arr","overwriteBefore","wordLen","FuzzyScore","wordPos","ch","match","compareIgnoreCase","anyScore","quickSelect","a","b","init_languageFeatures","init_filters","init_types","init_environment","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestModel_1","LineContext","editor","model","pos","word","position","triggerOptions","canShowQuickSuggest","contextKeyService","configurationService","InlineCompletionContextKeys","suppressSuggestions","canShowSuggestOnTriggerCharacters","SuggestModel","_editor","_editorWorkerService","_clipboardService","_telemetryService","_logService","_contextKeyService","_configurationService","_languageFeaturesService","_envService","DisposableStore","TimeoutTimer","Emitter","Selection","editorIsComposing","e","dispose","supportsByTriggerCharacter","support","ch","set","suggestSupport","getSnippetSuggestSupport","checkTriggerCharacter","text","lastChar","isLowSurrogate","isHighSurrogate","supports","providerItemsToReuse","provider","items","retrigger","prevSelection","QuickSuggestionsOptions","SnippetController2","config","lineTokens","tokenType","assertType","ctx","__spreadProps","__spreadValues","options","suggestCtx","CancellationTokenSource","snippetSuggestions","snippetSortOrder","itemKindFilter","showDeprecated","completionOptions","CompletionOptions","wordDistance","WordDistance","completions","provideSuggestionItems","_0","__async","clipboardText","fuzzySearchOptions","FuzzyScoreOptions","CompletionModel","item","onUnexpectedError","durations","result","suggestOptions","getLeadingWhitespace","map","providerFilter","oldLineContext","isFrozen","shouldAutoTrigger","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","IContextKeyService","IConfigurationService","ILanguageFeaturesService","IEnvironmentService","init_lifecycle","OvertypingCapturer","editor","suggestModel","DisposableStore","selections","selectionsLength","willOvertype","i","model","selection","e","idx","init_dom","init_async","init_errors","init_event","init_lifecycle","init_numbers","init_strings","init_dom","init_lifecycle","init_actions","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestWidgetStatus","container","_menuId","instantiationService","_menuService","_contextKeyService","DisposableStore","append","$","actionViewItemProvider","action","MenuItemAction","TextOnlyMenuEntryActionViewItem","ActionBar","menu","renderMenu","left","right","group","actions","IInstantiationService","IMenuService","IContextKeyService","init_nls","init_contextkey","init_instantiation","init_colorRegistry","init_theme","init_themeService","init_dom","init_codicons","init_themables","init_event","init_htmlContent","init_lifecycle","init_nls","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","canExpandCompletionItem","item","SuggestDetailsWidget","_editor","instaService","Emitter","DisposableStore","Dimension","$","MarkdownRenderer","DomScrollableElement","append","ThemeIcon","Codicon","localize","e","options","fontInfo","fontFamily","fontSize","lineHeight","fontWeight","fontSizePx","lineHeightPx","borderWidth","borderHeight","explainMode","detail","documentation","md","MarkdownString","cappedDetail","show","clearNode","hide","renderedContents","width","height","newSize","size","much","IInstantiationService","SuggestDetailsOverlay","widget","_editor","DisposableStore","ResizableHTMLElement","topLeftNow","sizeNow","deltaTop","deltaLeft","e","updateTopLeft","sessionEnded","anchor","preferAlignAtTop","anchorBox","size","bodyBox","getClientArea","info","defaultMinSize","Dimension","defaultTop","eastPlacement","width","left","maxSizeTop","maxSizeBottom","westPlacement","southPacement","top","placements","placement","p","a","b","bottom","alignAtTop","height","maxHeight","maxSize","editorDomNode","editorBoundingBox","topLeft","init_dom","init_codicons","init_themables","init_event","init_filters","init_lifecycle","init_uri","init_languages","init_network","init_resources","init_uri","init_modesRegistry","FileKind","init_themables","fileIconDirectoryRegex","getIconClasses","modelService","languageService","resource","fileKind","icon","ThemeIcon","URI","classes","FileKind","name","Schemas","DataUri","match","cssEscape","dotSegments","i","detectedLanguageId","detectLanguageId","languageId","mime","model","PLAINTEXT_LANGUAGE_ID","str","init_model","init_language","init_nls","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","getAriaId","index","suggestMoreInfoIcon","registerIcon","Codicon","localize","_completionItemColor","ColorExtractor","item","out","value","match","ItemRenderer","_editor","_modelService","_languageService","_themeService","Emitter","container","disposables","DisposableStore","root","icon","append","$","colorspan","text","main","iconContainer","left","right","iconLabel","IconLabel","parametersLabel","qualifierLabel","detailsLabel","readMore","ThemeIcon","options","fontInfo","fontFamily","fontFeatureSettings","fontSize","lineHeight","fontWeight","letterSpacing","fontSizePx","lineHeightPx","letterSpacingPx","element","data","completion","labelOptions","createMatches","color","labelClasses","getIconClasses","URI","FileKind","detailClasses","CompletionItemKinds","stripNewLines","show","hide","canExpandCompletionItem","e","templateData","IModelService","ILanguageService","IThemeService","stripNewLines","str","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestWidget_1","registerColor","editorWidgetBackground","localize","editorWidgetBorder","editorSuggestWidgetForeground","editorForeground","quickInputListFocusForeground","quickInputListFocusIconForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusBackground","listHighlightForeground","listFocusHighlightForeground","transparent","PersistedWidgetSize","_service","editor","EmbeddedCodeEditorWidget","raw","obj","Dimension","size","SuggestWidget","_storageService","_contextKeyService","_themeService","instantiationService","MutableDisposable","TimeoutTimer","DisposableStore","PauseableEmitter","Emitter","ResizableHTMLElement","SuggestContentWidget","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","state","e","itemHeight","defaultSize","threshold","width","height","append","$","details","SuggestDetailsWidget","SuggestDetailsOverlay","applyIconStyle","renderer","ItemRenderer","List","_element","item","label","detail","description","documentation","docs","format","getListStyles","activeContrastBorder","SuggestWidgetStatus","suggestWidgetStatusbarMenu","applyStatusBarStyle","t","Context","addStandardDisposableListener","mouseEvent","index","completionModel","theme","isHighContrast","createCancelablePromise","token","__async","loading","disposableTimeout","sub","getAriaId","onUnexpectedError","hide","show","status","auto","delay","selectionIndex","isFrozen","isAuto","noFocus","visibleCount","isEmpty","runAtThisOrScheduleAtNextAnimationFrame","getWindow","canExpandCompletionItem","dim","minPersistedHeight","position","bodyBox","getClientArea","info","maxWidth","preferredWidth","fullHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","maxHeight","statusBarHeight","fontInfo","clamp","borderWidth","borderHeight","value","IStorageService","IContextKeyService","IThemeService","IInstantiationService","SuggestContentWidget","_widget","_editor","height","width","borderWidth","horizontalPadding","Dimension","position","preference","init_telemetry","init_resources","init_hash","init_dom","init_textModel","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestController_1","_sticky","LineSuffix","_model","_position","ModelDecorationOptions","offset","end","accessor","Range","position","range","SuggestController","editor","_memoryService","_commandService","_contextKeyService","_instantiationService","_logService","_telemetryService","MutableDisposable","DisposableStore","PriorityRegistry","s","Emitter","SuggestModel","model","pos","items","ctxInsertMode","Context","WindowIdleValue","getWindow","widget","SuggestWidget","item","commitCharacterController","CommitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toDisposable","startColumn","endColumn","value","Position","e","KeyCodeChord","isMacintosh","OvertypingCapturer","SuggestAlternatives","WordContextKey","index","selector","noFocus","options","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","event","flags","snippetController","SnippetController2","modelVersionNow","tasks","cts","CancellationTokenSource","info","isResolved","_commandExectionDuration","_additionalEditsAppliedAsync","scrollState","StableEditorScrollState","edit","columnDelta","startColumnDelta","endColumnDelta","EditOperation","sw","StopWatch","docListener","change","thisPosition","oldFlags","didType","typeListener","applied","insertText","SnippetParser","TriggerSuggestAction","onUnexpectedExternalError","onUnexpectedError","next","itemResolved","commandExectionDuration","additionalEditsAppliedAsync","completionItems","labelMap","label","firstIndexArray","firstIndex","hash","basename","extname","toggleMode","assertType","replace","overwriteBefore","overwriteAfter","suffixDelta","isNonEmptyArray","msg","localize","alert","onlyFrom","auto","noFilter","arg","positionNow","fallback","makesTextEdit","Event","_","listener","dispose","completionModel","keepAlternativeSuggestions","alternativeOverwriteConfig","ISuggestMemoryService","ICommandService","IContextKeyService","IInstantiationService","ILogService","ITelemetryService","PriorityRegistry","prioritySelector","value","s1","s2","idx","TriggerSuggestAction","EditorAction","localize","ContextKeyExpr","EditorContextKeys","Context","_accessor","editor","args","controller","SuggestController","auto","registerEditorContribution","registerEditorAction","weight","SuggestCommand","EditorCommand","registerEditorCommand","x","suggestWidgetStatusbarMenu","CommandsRegistry","c","WordContextKey","SuggestAlternatives","SnippetController2","arg","isObject","__spreadValues","SuggestWidgetAdaptor","Disposable","editor","suggestControllerPreselector","onWillAccept","Emitter","e","suggestController","SuggestController","model","pos","suggestItems","textModel","i","itemToPreselect","singleTextRemoveCommonPrefix","position","Position","candidates","suggestItem","index","suggestItemInfo","SuggestItemInfo","suggestItemTextEdit","valid","singleTextEditAugments","item","result","findFirstMax","compareBy","s","numberComparator","isBoundToSuggestWidget","bindToSuggestWidget","Event","newActive","newInlineCompletion","suggestItemInfoEquals","focusedItem","_SuggestItemInfo","toggleMode","insertText","isSnippetText","snippet","SnippetParser","SnippetSession","info","Range","range","completionItemKind","other","SelectedSuggestionInfo","SingleTextEdit","a","b","init_nls","init_commands","init_configuration","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineCompletionsController_1","InlineCompletionsController","Disposable","editor","_instantiationService","_contextKeyService","_configurationService","_commandService","_debounceService","_languageFeaturesService","_accessibilitySignalService","_keybindingService","_accessibilityService","observableCodeEditor","derived","reader","s","Position","SuggestWidgetAdaptor","item","_tx","observableFromEvent","cb","derivedDisposable","textModel","InlineCompletionsModel","convertItemsToStableObservables","mapObservableArrayCached","ghostText","store","GhostTextView","constObservable","v","observableSignal","InlineCompletionContextKeys","reactToChange","_value","_changes","e","CoreEditingCommands","inlineSuggestCommitId","tx","changes","InlineSuggestionHintsContentWidget","transaction","autorun","state","toDisposable","currentInlineCompletionBySemanticId","derivedObservableWithCache","last","reactToChangeWithStore","_deltas","__async","model","lineText","timeout","cancelOnDispose","waitForState","isUndefined","AccessibilitySignal","InlineCompletionsHintsWidget","createStyleSheetFromObservable","fontFamily","content","accessibleViewShowing","accessibleViewKeybinding","hint","localize","alert","range","p","viewZoneId","IInstantiationService","IContextKeyService","IConfigurationService","ICommandService","ILanguageFeatureDebounceService","ILanguageFeaturesService","IAccessibilitySignalService","IKeybindingService","IAccessibilityService","convertItemsToStableObservables","items","store","result","observableValue","innerObservables","autorun","reader","itemsValue","transaction","tx","i","o","init_nls","init_actions","init_configuration","init_contextkey","ShowNextInlineSuggestionAction","EditorAction","showNextInlineSuggestionActionId","localize","ContextKeyExpr","EditorContextKeys","InlineCompletionContextKeys","accessor","editor","__async","InlineCompletionsController","ShowPreviousInlineSuggestionAction","showPreviousInlineSuggestionActionId","TriggerInlineSuggestionAction","controller","asyncTransaction","tx","AcceptNextWordOfInlineCompletion","MenuId","AcceptNextLineOfInlineCompletion","AcceptInlineCompletion","inlineSuggestCommitId","Context","HideInlineCompletion","transaction","ToggleAlwaysShowInlineSuggestionToolbar","Action2","configService","IConfigurationService","newValue","init_dom","init_htmlContent","init_lifecycle","init_observable","init_range","init_language","init_nls","init_instantiation","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineCompletionsHover","owner","range","controller","anchor","InlineCompletionsHoverParticipant","_editor","_languageService","_openerService","accessibilityService","_instantiationService","_telemetryService","mouseEvent","InlineCompletionsController","viewZoneData","HoverForeignElementAnchor","Range","lineDecorations","context","hoverParts","disposables","DisposableStore","part","model","w","InlineSuggestionHintsContentWidget","constObservable","widgetNode","renderedHoverPart","RenderedHoverParts","$","markdownHoverElement","hoverContentsElement","append","renderer","MarkdownRenderer","render","code","inlineSuggestionAvailable","localize","renderedContents","MarkdownString","autorun","reader","ghostText","lineText","reset","ILanguageService","IOpenerService","IAccessibilityService","IInstantiationService","ITelemetryService","InlineCompletionsAccessibleView","AccessibleViewRegistry","implementation","idx","init_actions","registerEditorContribution","InlineCompletionsController","registerEditorAction","TriggerInlineSuggestionAction","ShowNextInlineSuggestionAction","ShowPreviousInlineSuggestionAction","AcceptNextWordOfInlineCompletion","AcceptNextLineOfInlineCompletion","AcceptInlineCompletion","HideInlineCompletion","registerAction2","ToggleAlwaysShowInlineSuggestionToolbar","HoverParticipantRegistry","InlineCompletionsHoverParticipant","AccessibleViewRegistry","InlineCompletionsAccessibleView","init_async","init_errors","init_htmlContent","init_lifecycle","init_editorState","init_editorExtensions","init_range","init_language","init_resolverService","init_nls","init_contextkey","init_languageFeatures","init_textModel","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","GotoDefinitionAtPositionEditorContribution_1","GotoDefinitionAtPositionEditorContribution","editor","textModelResolverService","languageService","languageFeaturesService","DisposableStore","linkGesture","ClickLinkGesture","mouseEvent","keyboardEvent","error","onUnexpectedError","position","__async","e","withKey","word","state","EditorState","createCancelablePromise","token","results","linkRange","Range","combinedRange","originSelectionRange","MarkdownString","localize","result","ref","textEditorModel","startLineNumber","previewValue","languageId","rangeToUse","previewRange","minIndent","endLineNumber","endIndent","startIndent","maxLineNumber","range","hoverMessage","newDecorations","ModelDecorationInjectedTextOptions","model","getDefinitionsAtPosition","openToSide","accessor","canPeek","DefinitionAction","contextKeyService","IContextKeyService","PeekContext","ITextModelService","ILanguageService","ILanguageFeaturesService","registerEditorContribution","GotoDefinitionAtPositionEditorContribution","init_codicons","init_lifecycle","init_editorExtensions","init_codeEditorService","init_position","init_range","init_editorContextKeys","init_arrays","init_event","init_lifecycle","init_linkedList","init_strings","init_uri","init_range","init_extensions","init_instantiation","init_configuration","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MarkerCoordinate","marker","index","total","MarkerList","resourceFilter","_markerService","_configService","Emitter","DisposableStore","URI","uri","compareOrder","compareMarker","b","res","compare","Range","MarkerSeverity","updateMarker","m","uris","model","position","fwd","found","idx","binarySearch","a","range","word","oldIdx","IMarkerService","IConfigurationService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_markerService","_configService","LinkedList","resource","provider","result","MarkerList","__decorate","__param","IMarkerService","IConfigurationService","registerSingleton","init_nls","init_actions","init_contextkey","init_instantiation","init_dom","init_arrays","init_color","init_event","init_lifecycle","init_resources","init_strings","init_range","init_nls","init_actions","init_contextkey","init_instantiation","init_codicons","init_themables","SeverityIcon","className","severity","severity_default","ThemeIcon","Codicon","init_colorRegistry","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MarkerNavigationWidget_1","MessageWidget","parent","editor","onRelatedInformation","_openerService","_labelService","DisposableStore","domNode","addStandardDisposableListener","event","related","ScrollableElement","e","dispose","marker","source","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","line","clearNode","lastLineElement","detailsElement","sourceElement","codeElement","$","append","isNonEmptyArray","relatedInformationNode","container","relatedResource","relatedMessage","fontInfo","scrollWidth","scrollHeight","height","width","severityLabel","MarkerSeverity","localize","ariaLabel","model","MarkerNavigationWidget","PeekViewWidget","MenuId","_themeService","_menuService","instantiationService","_contextKeyService","Emitter","Color","theme","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","peekViewTitleForeground","peekViewTitleInfoForeground","actions","menu","createAndFillInActionBarActions","markerIdx","markerCount","range","Range","editorPosition","position","detail","basename","SeverityIcon","heightInPixel","widthInPixel","IThemeService","IOpenerService","IMenuService","IInstantiationService","IContextKeyService","ILabelService","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","editorMarkerNavigationError","registerColor","contrastBorder","localize","editorMarkerNavigationErrorHeader","transparent","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","editorMarkerNavigationBackground","editorBackground","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MarkerController_1","MarkerController","editor","_markerNavigationService","_contextKeyService","_editorService","_instantiationService","DisposableStore","CONTEXT_MARKERS_NAVIGATION_VISIBLE","uri","reusePosition","MarkerNavigationWidget","e","Range","info","related","focusEditor","marker","model","Position","next","multiFile","__async","otherEditor","IMarkerNavigationService","IContextKeyService","ICodeEditorService","IInstantiationService","MarkerNavigationAction","EditorAction","_next","_multiFile","opts","_accessor","editor","__async","MarkerController","NextMarkerAction","_NextMarkerAction","localize","EditorContextKeys","MarkerNavigationWidget","registerIcon","Codicon","PrevMarkerAction","_PrevMarkerAction","NextMarkerInFilesAction","MenuId","PrevMarkerInFilesAction","registerEditorContribution","registerEditorAction","CONTEXT_MARKERS_NAVIGATION_VISIBLE","RawContextKey","MarkerCommand","EditorCommand","registerEditorCommand","x","init_keyCodes","init_editorExtensions","init_range","init_editorContextKeys","init_languages","init_nls","HoverFocusBehavior","ShowOrFocusHoverAction","EditorAction","SHOW_OR_FOCUS_HOVER_ACTION_ID","localize","localize2","EditorContextKeys","KeyChord","accessor","editor","args","controller","ContentHoverController","focusArgument","focusOption","showContentHover","focus","position","range","Range","accessibilitySupportEnabled","ShowDefinitionPreviewHoverAction","SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID","goto","GotoDefinitionAtPositionEditorContribution","ScrollUpHoverAction","SCROLL_UP_HOVER_ACTION_ID","ScrollDownHoverAction","SCROLL_DOWN_HOVER_ACTION_ID","ScrollLeftHoverAction","SCROLL_LEFT_HOVER_ACTION_ID","ScrollRightHoverAction","SCROLL_RIGHT_HOVER_ACTION_ID","PageUpHoverAction","PAGE_UP_HOVER_ACTION_ID","PageDownHoverAction","PAGE_DOWN_HOVER_ACTION_ID","GoToTopHoverAction","GO_TO_TOP_HOVER_ACTION_ID","GoToBottomHoverAction","GO_TO_BOTTOM_HOVER_ACTION_ID","IncreaseHoverVerbosityLevel","INCREASE_HOVER_VERBOSITY_ACTION_ID","INCREASE_HOVER_VERBOSITY_ACTION_LABEL","hoverController","index","HoverVerbosityAction","DecreaseHoverVerbosityLevel","DECREASE_HOVER_VERBOSITY_ACTION_ID","DECREASE_HOVER_VERBOSITY_ACTION_LABEL","init_editorExtensions","init_colorRegistry","init_themeService","init_dom","init_arrays","init_async","init_errors","init_lifecycle","init_resources","init_range","init_languageFeatures","init_nls","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","$","MarkerHover","owner","range","marker","anchor","markerCodeActionTrigger","CodeActionKind","CodeActionTriggerSource","MarkerHoverParticipant","_editor","_markerDecorationsService","_openerService","_languageFeaturesService","lineDecorations","model","lineNumber","maxColumn","result","startColumn","endColumn","Range","context","hoverParts","RenderedHoverParts","disposables","DisposableStore","renderedHoverParts","hoverPart","renderedMarkerHover","markerHoverForStatusbar","a","b","MarkerSeverity","markerHover","hoverElement","markerElement","append","source","message","code","relatedInformation","messageElement","sourceAndCodeElement","sourceElement","codeLink","addDisposableListener","e","codeElement","detailsElement","isNonEmptyArray","resource","startLineNumber","relatedInfoContainer","basename","editorOptions","onUnexpectedError","markerController","MarkerController","localize","NextMarkerAction","quickfixPlaceholderElement","IMarkerData","updatePlaceholderDisposable","Disposable","disposableTimeout","codeActionsPromise","toDisposable","actions","showing","quickFixCommandId","controller","CodeActionController","elementPosition","getDomNodePagePosition","createCancelablePromise","cancellationToken","getCodeActions","Progress","IMarkerDecorationsService","IOpenerService","ILanguageFeaturesService","init_lifecycle","init_instantiation","init_async","init_dom","init_lifecycle","init_language","init_arrays","init_htmlContent","init_model","MarginHoverComputer","value","_editor","GlyphMarginLane","toHoverMessage","contents","lineDecorations","result","isLineHover","d","lane","hoverMessage","isEmptyMarkdownString","asArray","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MarginHoverWidget_1","$","MarginHoverWidget","Disposable","editor","languageService","openerService","DisposableStore","HoverWidget","MarkdownRenderer","MarginHoverComputer","HoverOperation","result","e","addStandardDisposableListener","node","mouseEvent","lineNumber","laneOrLine","messages","fragment","msg","markdownHoverElement","hoverContentsElement","append","renderedContents","editorLayout","topForLineNumber","editorScrollTop","lineHeight","nodeHeight","top","left","editorDomNode","isMousePositionWithinElement","ILanguageService","IOpenerService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","_sticky","MarginHoverController","Disposable","_editor","_instantiationService","DisposableStore","RunOnceScheduler","e","hoverOpts","mouseEvent","marginHoverWidgetNode","isMousePositionWithinElement","isHoverSticky","isMouseOnMarginHoverWidget","MarginHoverWidget","IInstantiationService","HoverAccessibleView","HoverAccessibilityHelp","ExtHoverAccessibleView","registerEditorContribution","ContentHoverController","MarginHoverController","registerEditorAction","ShowOrFocusHoverAction","ShowDefinitionPreviewHoverAction","ScrollUpHoverAction","ScrollDownHoverAction","ScrollLeftHoverAction","ScrollRightHoverAction","PageUpHoverAction","PageDownHoverAction","GoToTopHoverAction","GoToBottomHoverAction","IncreaseHoverVerbosityLevel","DecreaseHoverVerbosityLevel","HoverParticipantRegistry","MarkdownHoverParticipant","MarkerHoverParticipant","registerThemingParticipant","theme","collector","hoverBorder","editorHoverBorder","AccessibleViewRegistry","HoverAccessibleView","HoverAccessibilityHelp","ExtHoverAccessibleView","init_lifecycle","init_strings","init_editorExtensions","init_range","init_editorContextKeys","init_languageConfigurationRegistry","init_model","getSpaceCnt","str","tabSize","spacesCnt","generateIndent","insertSpaces","result","tabsCnt","i","init_nls","init_strings","init_indentation","init_selection","getReindentEditOperations","model","languageConfigurationService","startLineNumber","endLineNumber","indentationRulesSupport","processedIndentRulesSupport","ProcessedIndentRulesSupport","tabSize","indentSize","insertSpaces","shiftIndent","indentation","count","ShiftCommand","unshiftIndent","indentEdits","currentLineText","globalIndent","getLeadingWhitespace","idealIndentForNextLine","lineNumber","doesLineStartWithString","text","oldIndentation","currentIdealIndent","EditOperation","Selection","normalizeIndentation","init_lineTokens","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","IndentationToSpacesAction","EditorAction","localize","EditorContextKeys","localize2","accessor","editor","model","modelOpts","selection","command","IndentationToSpacesCommand","IndentationToTabsAction","IndentationToTabsCommand","ChangeIndentationSizeAction","insertSpaces","displaySizeOnly","opts","quickInputService","IQuickInputService","modelService","IModelService","creationOpts","picks","n","autoFocusIndex","pick","pickedVal","IndentUsingTabs","IndentUsingSpaces","ChangeTabDisplaySize","DetectIndentation","ReindentLinesAction","languageConfigurationService","ILanguageConfigurationService","edits","getReindentEditOperations","ReindentSelectedLinesAction","selections","startLineNumber","endLineNumber","editOperations","AutoIndentOnPasteCommand","initialSelection","edit","builder","Range","selectionIsSet","helper","AutoIndentOnPaste","_languageConfigurationService","DisposableStore","range","isStartOrEndInString","autoIndent","tabSize","indentSize","textEdits","indentConverter","indentation","ShiftCommand","firstLineText","indentOfFirstLine","getGoodIndentForLine","oldIndentation","getLeadingWhitespace","newSpaceCnt","getSpaceCnt","oldSpaceCnt","newIndent","generateIndent","indentMetadata","getIndentMetadata","firstLineNumber","indentOfSecondLine","lineNumber","column","newSpaceCntOfSecondLine","oldSpaceCntOfSecondLine","spaceCntOffset","lineContent","originalIndent","newSpacesCnt","cmd","lineContainsOnlyWhitespace","content","containsOnlyWhitespace","linePart","nonWhitespaceColumn","tokens","firstNonWhitespaceTokenIndex","isStartOrEndInString","model","range","isPositionInString","position","getStandardTokenTypeAtPosition","getIndentationEditOperations","builder","tabSize","tabsToSpaces","spaces","i","spacesRegExp","lineNumber","lineCount","lastIndentationColumn","originalIndentationRange","Range","originalIndentation","newIndentation","IndentationToSpacesCommand","selection","helper","IndentationToTabsCommand","registerEditorContribution","AutoIndentOnPaste","registerEditorAction","IndentationToSpacesAction","IndentationToTabsAction","IndentUsingTabs","IndentUsingSpaces","ChangeTabDisplaySize","DetectIndentation","ReindentLinesAction","ReindentSelectedLinesAction","init_editorExtensions","registerEditorContribution","InlayHintsController","HoverParticipantRegistry","InlayHintsHover","import_inPlaceReplace","init_editorExtensions","init_editorContextKeys","init_nls","ExpandLineSelectionAction","EditorAction","localize","EditorContextKeys","_accessor","editor","args","viewModel","CursorMoveCommands","registerEditorAction","init_keyCodes","init_editorExtensions","init_strings","init_range","TrimTrailingWhitespaceCommand","selection","cursors","trimInRegexesAndStrings","model","builder","ops","trimTrailingWhitespace","i","len","op","helper","b","r","rLen","cursorIndex","cursorLen","lineNumber","lineCount","lineContent","maxLineColumn","minEditColumn","lastNonWhitespaceIndex","fromColumn","lineTokens","fromColumnType","EditOperation","Range","init_position","init_range","init_selection","init_editorContextKeys","init_range","init_selection","CopyLinesCommand","selection","isCopyingDown","noop","model","builder","s","sourceLines","i","sourceText","Range","helper","result","startLineNumber","startColumn","endLineNumber","endColumn","Selection","init_strings","init_range","init_selection","init_languageConfiguration","init_languageConfigurationRegistry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","MoveLinesCommand","selection","isMovingDown","autoIndent","_languageConfigurationService","model","builder","getLanguageId","getLanguageIdAtPosition","lineNumber","column","modelLineCount","tabSize","indentSize","insertSpaces","indentConverter","otherLineNumber","Range","Selection","movingLineNumber","movingLineText","insertingText","movingLineMatchResult","oldIndentation","getLeadingWhitespace","newSpaceCnt","getSpaceCnt","generateIndent","virtualModel","indentOfMovingLine","getGoodIndentForLine","oldSpaceCnt","ret","newIndentatOfMovingBlock","spaceCntOffset","indentOfFirstLine","oldIndent","indentation","ShiftCommand","line","enter","enterPrefix","IndentAction","newIndentation","indentMetadataOfMovelingLine","getIndentMetadata","futureAboveLineNumber","futureAboveLineText","lastNonWhitespaceIndex","maxColumn","getEnterAction","validPrecedingLine","lineContent","oneLineAbove","previousLineText","str","languageAtSelectionStart","languageAtSelectionEnd","s","offset","originalIndent","newSpacesCnt","newIndent","helper","result","ILanguageConfigurationService","init_range","SortLinesCommand","selection","descending","model","builder","op","sortLines","helper","data","getSortData","i","len","startLineNumber","endLineNumber","linesToSort","lineNumber","sorted","EditOperation","Range","init_nls","init_actions","init_languageConfigurationRegistry","init_configuration","AbstractCopyLinesAction","EditorAction","down","opts","_accessor","editor","selections","selection","index","a","b","Range","prev","i","curr","commands","CopyLinesCommand","CopyLinesUpAction","localize","EditorContextKeys","MenuId","CopyLinesDownAction","DuplicateSelectionAction","accessor","args","model","insertSelection","Selection","ReplaceCommandThatSelectsText","AbstractMoveLinesAction","languageConfigurationService","ILanguageConfigurationService","autoIndent","MoveLinesCommand","MoveLinesUpAction","MoveLinesDownAction","AbstractSortLinesAction","descending","SortLinesCommand","len","SortLinesAscendingAction","SortLinesDescendingAction","DeleteDuplicateLinesAction","edits","endCursorState","linesDeleted","updateSelection","uniqueLines","lines","line","selectionToReplace","adjustedSelectionStart","finalSelection","EditOperation","TrimTrailingWhitespaceAction","KeyChord","cursors","s","Position","config","IConfigurationService","trimInRegexAndStrings","command","TrimTrailingWhitespaceCommand","DeleteLinesAction","ops","cursorState","op","startLineNumber","endLineNumber","startColumn","endColumn","operations","mergedOperations","previousOperation","IndentLinesAction","viewModel","TypeOperations","OutdentLinesAction","CoreEditingCommands","InsertLineBeforeAction","EnterOperation","InsertLineAfterAction","AbstractDeleteAllToBoundaryAction","primaryCursor","rangesToDelete","effectiveRanges","count","range","nextRange","DeleteAllLeftAction","endPrimaryCursor","deletedLines","endCursor","newStartLine","deleteFromLine","deleteFromColumn","DeleteAllRightAction","offset","sel","maxColumn","JoinLinesAction","reducedSelections","lastSelection","previousValue","currentValue","lineOffset","columnDeltaOffset","selectionEndPositionOffset","position","trimmedLinesContent","lineText","firstNonWhitespaceIdx","insertSpace","lineTextWithoutIndent","deleteSelection","resultSelection","TransposeAction","cursor","chars","ReplaceCommand","ReplaceCommandThatPreservesSelection","AbstractCaseAction","wordSeparators","textEdits","word","wordRange","text","UpperCaseAction","LowerCaseAction","BackwardsCompatibleRegExp","_pattern","_flags","TitleCaseAction","_TitleCaseAction","titleBoundary","SnakeCaseAction","_SnakeCaseAction","caseBoundary","singleLetters","CamelCaseAction","_CamelCaseAction","wordBoundary","words","PascalCaseAction","_PascalCaseAction","wordBoundaryToMaintain","KebabCaseAction","_KebabCaseAction","regexp","_","underscoreBoundary","registerEditorAction","init_arrays","init_async","init_cancellation","init_color","init_errors","init_event","init_lifecycle","init_strings","init_uri","init_editorExtensions","init_codeEditorService","init_position","init_range","init_editorContextKeys","init_textModel","init_languageConfigurationRegistry","init_nls","init_contextkey","init_languageFeatures","init_colorRegistry","init_languageFeatureDebounce","init_stopwatch","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","LinkedEditingContribution_1","CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE","RawContextKey","DECORATION_CLASS_NAME","LinkedEditingContribution","Disposable","ModelDecorationOptions","editor","contextKeyService","languageFeaturesService","languageConfigurationService","languageFeatureDebounceService","DisposableStore","e","forceRefresh","model","isEnabled","Event","rangeUpdateScheduler","Delayer","triggerRangeUpdate","rangeSyncScheduler","triggerRangeSync","token","referenceRange","referenceValue","match","edits","len","mirrorRange","oldValue","newValue","rangeStartColumn","rangeEndColumn","commonPrefixLength","commonSuffixLength","Range","prevEditOperationType","force","__async","position","modelVersionId","range","currentRequestCts","CancellationTokenSource","sw","StopWatch","response","getLinkedEditingRanges","ranges","foundReferenceRange","decorations","err","isCancellationError","onUnexpectedError","IContextKeyService","ILanguageFeaturesService","ILanguageConfigurationService","ILanguageFeatureDebounceService","LinkedEditingAction","EditorAction","localize","ContextKeyExpr","EditorContextKeys","accessor","args","editorService","ICodeEditorService","uri","pos","URI","Position","editor","onUnexpectedError","_accessor","controller","LinkedEditingContribution","LinkedEditingCommand","EditorCommand","registerEditorCommand","CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE","x","getLinkedEditingRanges","providers","model","position","token","orderedByScore","first","provider","__async","e","onUnexpectedExternalError","result","isNonEmptyArray","editorLinkedEditingBackground","registerColor","Color","registerModelAndPositionCommand","linkedEditingRangeProvider","ILanguageFeaturesService","CancellationToken","registerEditorContribution","registerEditorAction","init_async","init_cancellation","init_errors","init_htmlContent","init_lifecycle","init_network","init_platform","init_resources","init_stopwatch","init_uri","init_editorExtensions","init_textModel","init_languageFeatureDebounce","init_languageFeatures","init_arrays","init_cancellation","init_errors","init_lifecycle","init_types","init_uri","init_range","init_model","init_commands","init_languageFeatures","Link","link","provider","token","__async","value","LinksList","_LinksList","tuples","DisposableStore","links","list","newLinks","isDisposable","oldLinks","result","oldIndex","oldLen","newIndex","newLen","oldLink","newLink","Range","getLinks","providers","model","lists","promises","i","onUnexpectedExternalError","coalesce","CommandsRegistry","accessor","args","uri","resolveCount","assertType","URI","linkProvider","ILanguageFeaturesService","IModelService","CancellationToken","init_nls","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","LinkDetector_1","LinkDetector","Disposable","editor","openerService","notificationService","languageFeaturesService","languageFeatureDebounceService","RunOnceScheduler","clickLinkGesture","ClickLinkGesture","mouseEvent","keyboardEvent","e","__async","model","createCancelablePromise","token","getLinks","sw","StopWatch","err","onUnexpectedError","links","useMetaKey","oldDecorations","keys","decorationId","occurence","newDecorations","link","LinkOccurrence","changeAccessor","decorations","len","withKey","occurrence","openToSide","fromUserGesture","CancellationToken","uri","modelUri","Schemas","parsedUri","URI","fsPath","originalFSPath","relativePath","joinPath","messageOrError","localize","position","decoration","currentOccurrence","IOpenerService","INotificationService","ILanguageFeaturesService","ILanguageFeatureDebounceService","decoration","ModelDecorationOptions","LinkOccurrence","_LinkOccurrence","link","useMetaKey","isActive","options","__spreadValues","getHoverMessage","decorationId","changeAccessor","executeCmd","label","localize","kb","isMacintosh","nativeLabel","match","commandId","MarkdownString","OpenLinkAction","EditorAction","accessor","editor","linkDetector","LinkDetector","selections","sel","registerEditorContribution","registerEditorAction","init_lifecycle","init_editorExtensions","LongLinesHelper","Disposable","_editor","e","stopRenderingLineAfter","registerEditorContribution","init_async","init_keyCodes","init_lifecycle","init_editorExtensions","init_range","init_selection","init_editorContextKeys","init_nls","init_actions","init_contextkey","init_languageFeatures","init_model","init_textModel","init_languages","init_nls","init_colorRegistry","init_themeService","wordHighlightBackground","registerColor","localize","wordHighlightBorder","activeContrastBorder","overviewRulerWordHighlightForeground","overviewRulerWordHighlightStrongForeground","overviewRulerWordHighlightTextForeground","overviewRulerSelectionHighlightForeground","_WRITE_OPTIONS","ModelDecorationOptions","themeColorFromId","OverviewRulerLane","minimapSelectionOccurrenceHighlight","_TEXT_OPTIONS","_SELECTION_HIGHLIGHT_OPTIONS","_SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW","_REGULAR_OPTIONS","getHighlightDecorationOptions","kind","DocumentHighlightKind","getSelectionHighlightDecorationOptions","hasSemanticHighlights","registerThemingParticipant","theme","collector","selectionHighlight","editorSelectionHighlight","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SelectionHighlighter_1","announceCursorChange","previousCursorState","cursorState","cursorDiff","cs","pcs","cursorPositions","msg","localize","status","InsertCursorAbove","EditorAction","EditorContextKeys","MenuId","accessor","editor","args","useLogicalLine","viewModel","CursorMoveCommands","InsertCursorBelow","InsertCursorAtEndOfEachLineSelected","selection","model","result","currentLineMaxColumn","Selection","selections","newSelections","sel","InsertCursorAtEndOfLineSelected","lineCount","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealRange","revealScrollType","MultiCursorSession","_MultiCursorSession","findController","findState","isDisconnectedFromFindController","wholeWord","matchCase","s","searchText","currentMatch","word","_editor","nextMatch","allSelections","lastAddedSelection","previousMatch","searchScope","editorModel","MultiCursorSelectionController","Disposable","DisposableStore","session","newState","e","modelRangesContainSameText","resultingSelections","len","matches","editorSelection","match","m","MultiCursorSelectionControllerAction","multiCursorController","CommonFindController","newFindController","IInstantiationService","AddSelectionToNextFindMatchAction","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","KeyChord","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","ContextKeyExpr","SelectionHighlighterState","_model","_searchText","_matchCase","_wordSeparators","prevState","Range","SelectionHighlighter","_languageFeaturesService","RunOnceScheduler","oldState","isEnabled","caseSensitive","findStateSearchString","mySearchString","allMatches","j","lenJ","cmp","occurrenceHighlighting","hasSemanticHighlights","decorations","getSelectionHighlightDecorationOptions","ILanguageFeaturesService","modelRangesContainSameText","model","ranges","matchCase","selectedText","getValueInRange","i","len","range","thisSelectedText","toLowerCase","text","FocusNextCursor","EditorAction","localize","accessor","editor","args","viewModel","previousCursorState","firstCursor","announceCursorChange","FocusPreviousCursor","registerEditorContribution","MultiCursorSelectionController","SelectionHighlighter","registerEditorAction","InsertCursorAbove","InsertCursorBelow","InsertCursorAtEndOfEachLineSelected","AddSelectionToNextFindMatchAction","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","InsertCursorAtEndOfLineSelected","InsertCursorAtTopOfLineSelected","init_editorExtensions","init_editorExtensions","init_editorContextKeys","inlineEditAcceptId","inlineEditRejectId","inlineEditJumpToId","inlineEditJumpBackId","init_lifecycle","init_observable","init_position","init_range","init_lifecycle","init_observable","init_position","init_range","init_language","init_model","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","INLINE_EDIT_DESCRIPTION","GhostTextWidget","Disposable","editor","model","languageService","observableValue","observableFromEvent","derived","reader","textModel","ghostText","range","isSingleLine","isPureRemove","l","inlineTexts","additionalLines","addToAdditionalLines","lines","className","lastLine","LineDecoration","line","textBufferLine","hiddenTextStartColumn","lastIdx","part","hiddenRange","ColumnRange","lineNumber","uiState","decorations","ranges","firstNonWhitespace","lastNonWhitespace","Range","diffDeleteDecoration","diffLineDeleteDecorationBackgroundWithIndicator","p","Position","InjectedTextCursorStops","toDisposable","applyObservableDecorations","ILanguageService","init_contextkey","init_instantiation","init_languages","init_languageFeatures","init_cancellation","init_commands","init_dom","init_actions","init_arrays","init_lifecycle","init_observable","init_platform","init_position","init_actions","init_commands","init_contextkey","init_instantiation","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEditHintsContentWidget_1","InlineEditHintsWidget","Disposable","editor","model","instantiationService","observableFromEvent","derived","reader","ghostText","firstColumn","position","Position","autorunWithStore","store","contentWidget","InlineEditHintsContentWidget","toDisposable","IInstantiationService","InlineEditHintsContentWidget","Disposable","InlineEditHintsContentWidget_1","editor","withBorder","_position","instantiationService","_contextKeyService","_menuService","h","MenuId","CustomizedMenuWorkbenchToolBar","g","action","options","MenuItemAction","StatusBarViewItem","e","autorun","reader","extraActions","_","group","Separator","__decorate","__param","IInstantiationService","IContextKeyService","IMenuService","StatusBarViewItem","MenuEntryActionViewItem","kb","div","h","KeybindingLabel","OS","__spreadValues","unthemedKeybindingLabelOptions","CustomizedMenuWorkbenchToolBar","WorkbenchToolBar","container","editor","menuId","options2","menuService","contextKeyService","contextMenuService","keybindingService","commandService","telemetryService","primary","secondary","createAndFillInActionBarActions","actions","equals","a","b","__decorate","__param","IMenuService","IContextKeyService","IContextMenuService","IKeybindingService","ICommandService","ITelemetryService","init_dom","init_configuration","init_errors","init_derived","init_dom","init_cancellation","init_lifecycle","init_observable","init_derived","init_uri","init_observableCodeEditor","init_position","init_range","init_modesRegistry","init_textModel","init_model","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEditSideBySideWidget_1","InlineEditSideBySideContentWidget_1","range","start","end","step","n","removeIndentation","lines","indentation","length","l","InlineEditSideBySideWidget","Disposable","URI","_editor","_model","_instantiationService","_diffProviderFactoryService","_modelService","derived","reader","ghostText","editorModel","lengths","lineNumber","maxColumn","lineOfMaxColumn","position","Position","t","derivedDisposable","originalText","modifiedText","ObservablePromise","__async","result","CancellationToken","autorunWithStore","store","contentWidget","InlineEditSideBySideContentWidget","toDisposable","IInstantiationService","IDiffProviderFactoryService","IModelService","InlineEditSideBySideContentWidget","Disposable","InlineEditSideBySideContentWidget_1","_editor","_position","_text","_shift","_diff","_instantiationService","$","observableSignalFromEvent","EmbeddedCodeEditorWidget","observableCodeEditor","TextModel","PLAINTEXT_LANGUAGE_ID","derived","reader","edit","position","diff","originalDecorations","modifiedDecorations","shift","moveRange","range","Range","m","diffLineDeleteDecorationBackgroundWithIndicator","diffLineAddDecorationBackgroundWithIndicator","diffWholeLineDeleteDecoration","diffWholeLineAddDecoration","i","diffDeleteDecorationEmpty","diffDeleteDecoration","diffAddDecorationEmpty","diffAddDecoration","autorun","width","lines","height","layoutInfo","visibPos","Position","top","offset","__decorate","__param","IInstantiationService","init_model","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEditController_1","InlineEditController","Disposable","RawContextKey","editor","instantiationService","contextKeyService","languageFeaturesService","_commandService","_configurationService","_diffProviderFactoryService","_modelService","observableValue","derivedDisposable","reader","edit","line","column","textToDisplay","ghostText","GhostText","GhostTextPart","isSingleLine","isPureRemoval","GhostTextWidget","constObservable","observableFromEvent","modelChangedSignal","observableSignalFromEvent","autorun","cursorPosition","pos","currentEdit","editorBlurSingal","__async","editorFocusSignal","styleElement","createStyleSheet2","fontFamily","InlineEditHintsWidget","InlineEditSideBySideWidget","position","gt","Range","lastLine","lastColumn","lineLength","auto","model","modelVersion","providers","provider","CancellationTokenSource","token","triggerKind","InlineEditTriggerKind","wait","data","text","EditOperation","onUnexpectedExternalError","transaction","tx","Position","sendRejection","IInstantiationService","IContextKeyService","ILanguageFeaturesService","ICommandService","IConfigurationService","IDiffProviderFactoryService","IModelService","wait","ms","cancellationToken","resolve","d","handle","init_actions","init_contextkey","AcceptInlineEdit","EditorAction","inlineEditAcceptId","ContextKeyExpr","EditorContextKeys","InlineEditController","MenuId","accessor","editor","__async","TriggerInlineEdit","activeExpr","JumpToInlineEdit","inlineEditJumpToId","JumpBackInlineEdit","inlineEditJumpBackId","RejectInlineEdit","inlineEditRejectId","registerEditorAction","AcceptInlineEdit","RejectInlineEdit","JumpToInlineEdit","JumpBackInlineEdit","TriggerInlineEdit","registerEditorContribution","InlineEditController","init_editorExtensions","init_codicons","init_observable","init_base","init_editorExtensions","init_editorContextKeys","init_nls","init_contextkey","inlineEditAcceptId","showPreviousInlineEditActionId","showNextInlineEditActionId","inlineEditVisible","RawContextKey","localize","isPinnedContextKey","init_lifecycle","init_observable","init_derived","init_observableCodeEditor","init_selection","init_languageFeatureDebounce","init_languageFeatures","init_async","init_cancellation","init_equals","init_errors","init_lifecycle","init_observable","init_derived","init_uri","init_lineRange","init_languages","init_languageFeatures","init_model","init_dom","init_lifecycle","init_observable","init_derived","init_editorExtensions","init_observableCodeEditor","init_utils","init_modesRegistry","init_textModel","init_dom","init_equals","init_lifecycle","init_observable","init_derived","init_observableCodeEditor","PlaceholderTextContribution","Disposable","_editor","observableCodeEditor","derivedOpts","structuralEquals","reader","p","isOrWasTrue","derivedWithStore","store","element","h","autorun","data","shouldBeVisibile","info","constObservable","owner","fn","derivedObservableWithCache","lastValue","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEdit","range","newLines","changes","InlineEditsWidget","Disposable","_editor","_edit","_userPrompt","_instantiationService","observableCodeEditor","h","svgElem","TextModel","PLAINTEXT_LANGUAGE_ID","derived","reader","edit","EmbeddedCodeEditorWidget","DEFAULT_FONT_FAMILY","EditorExtensionsRegistry","SuggestController","PlaceholderTextContribution","ContextMenuController","diff","originalDecorations","modifiedDecorations","m","diffLineDeleteDecorationBackgroundWithIndicator","diffLineAddDecorationBackgroundWithIndicator","diffWholeLineDeleteDecoration","diffWholeLineAddDecoration","diffDeleteDecorationEmpty","diffDeleteDecoration","diffAddDecorationEmpty","diffAddDecoration","model","inlineEdit","maxLeft","column","left","scrollLeft","selectionTop","selectionBottom","topCode","Point","bottomCode","codeHeight","codeEditDist","editHeight","difference","topEdit","bottomEdit","visible","applyStyle","appendRemoveOnDispose","constObservable","x","width","autorun","layoutInfo","straightWidthCode","straightWidthEdit","bezierDist","path","PathBuilder","createTwoWaySync","mapSettableObservable","v","isFocused","IInstantiationService","mapSettableObservable","obs","fn1","fn2","derivedWithSetter","reader","value","tx","Point","_Point","x","y","delta","PathBuilder","point","cp1","cp2","to","createTwoWaySync","main","target","store","DisposableStore","autorun","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEditsModel_1","InlineEditsModel","Disposable","URI","textModel","_textModelVersionId","_selection","_debounceValue","languageFeaturesService","_diffProviderFactoryService","_modelService","observableSignal","observableValue","derivedDisposable","TrackedRange","range","derived","reader","edit","newLines","removeIndentation","lines","indentation","l","existingLines","ObservablePromise","__async","result","CancellationToken","InlineEdit","LineRange","DisposableStore","disposableObservableValue","derivedOpts","structuralEquals","InlineEditData","derivedHandleChanges","InlineCompletionTriggerKind","ctx","changeSummary","mapValue","value","fn","selection","v","context","token","cancelOnDispose","timeout","provideInlineCompletions","itemsEquals","selectedInlineCompletionId","filteredCompletions","idx","recomputeInitiallyAndOnChange","tx","subtransaction","delta","completions","newIdx","editor","BugIndicatingError","ILanguageFeaturesService","IDiffProviderFactoryService","IModelService","InlineEditData","inlineCompletion","TrackedRange","Disposable","_textModel","_versionId","observableValue","derived","reader","deco","toDisposable","range","tx","init_configuration","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","InlineEditsController_1","InlineEditsController","Disposable","editor","_instantiationService","_contextKeyService","_debounceService","_languageFeaturesService","_configurationService","observableConfigValue","observableCodeEditor","derived","reader","Selection","derivedDisposable","textModel","readHotReloadableExport","InlineEditsModel","derivedObservableWithCache","lastValue","InlineEditsWidget","m","flattenSettableObservable","observableValue","bindContextKey","inlineEditVisible","isPinnedContextKey","IInstantiationService","IContextKeyService","ILanguageFeatureDebounceService","ILanguageFeaturesService","IConfigurationService","flattenSettableObservable","fn","derivedWithSetter","reader","value","tx","init_nls","init_actions","init_contextkey","labelAndAlias","str","ShowNextInlineEditAction","EditorAction","showNextInlineEditActionId","__spreadProps","__spreadValues","localize2","ContextKeyExpr","EditorContextKeys","inlineEditVisible","accessor","editor","__async","InlineEditsController","ShowPreviousInlineEditAction","showPreviousInlineEditActionId","TriggerInlineEditAction","controller","asyncTransaction","tx","AcceptInlineEdit","inlineEditAcceptId","MenuId","localize","Codicon","EmbeddedCodeEditorWidget","HideInlineEdit","transaction","registerEditorContribution","InlineEditsController","registerEditorAction","TriggerInlineEditAction","ShowNextInlineEditAction","ShowPreviousInlineEditAction","AcceptInlineEdit","HideInlineEdit","init_lazy","init_lifecycle","init_editorExtensions","init_editorContextKeys","init_languages","init_languageFeatures","init_async","init_errors","init_event","init_lifecycle","init_characterClassifier","init_languages","init_cancellation","init_errors","init_types","init_uri","init_position","init_languages","init_languageFeatures","init_resolverService","init_commands","init_contextkey","Context","RawContextKey","provideSignatureHelp","registry","model","position","context","token","__async","supports","support","result","err","onUnexpectedExternalError","CommandsRegistry","accessor","args","uri","triggerCharacter","assertType","URI","Position","languageFeaturesService","ILanguageFeaturesService","ref","ITextModelService","SignatureHelpTriggerKind","CancellationToken","ParameterHintState","Pending","request","previouslyActiveHints","Active","hints","ParameterHintsModel","Disposable","editor","providers","delay","Emitter","MutableDisposable","CharacterSet","Delayer","e","_","text","value","silent","context","model","triggerId","onUnexpectedError","length","activeSignature","last","cycle","first","__spreadProps","__spreadValues","__async","isRetrigger","activeSignatureHelp","mergeTriggerContexts","triggerContext","position","createCancelablePromise","token","provideSignatureHelp","result","error","support","ch","charCode","lastCharIndex","triggerCharCode","SignatureHelpTriggerKind","previous","current","init_nls","init_contextkey","init_instantiation","init_dom","init_codicons","init_event","init_lifecycle","init_strings","init_types","init_language","init_nls","init_contextkey","init_colorRegistry","init_themables","init_stopwatch","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ParameterHintsWidget_1","$","parameterHintsNextIcon","registerIcon","Codicon","localize","parameterHintsPreviousIcon","ParameterHintsWidget","Disposable","editor","model","contextKeyService","openerService","languageService","telemetryService","DisposableStore","MarkdownRenderer","Context","element","wrapper","append","controls","previous","ThemeIcon","overloads","next","addDisposableListener","e","EventHelper","body","scrollbar","DomScrollableElement","signature","docs","updateFont","fontInfo","EDITOR_FONT_DEFAULTS","Event","hints","multiple","code","hasParameters","activeParameterIndex","label","activeParameter","documentation","renderedContents","hasDocs","labelToAnnounce","param","alert","markdown","stopWatch","StopWatch","renderDuration","assertIsDefined","parent","start","end","beforeSpan","paramSpan","afterSpan","paramIdx","regex","escapeRegExpCharacters","idx","maxHeight","IContextKeyService","IOpenerService","ILanguageService","ITelemetryService","registerColor","listHighlightForeground","localize","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ParameterHintsController_1","ParameterHintsController","Disposable","editor","instantiationService","languageFeaturesService","ParameterHintsModel","newParameterHints","Lazy","ParameterHintsWidget","context","IInstantiationService","ILanguageFeaturesService","TriggerParameterHintsAction","EditorAction","localize","EditorContextKeys","accessor","editor","ParameterHintsController","SignatureHelpTriggerKind","registerEditorContribution","registerEditorAction","weight","ParameterHintsCommand","EditorCommand","registerEditorCommand","Context","x","ContextKeyExpr","init_editorExtensions","init_editorColorRegistry","init_nls","init_colorUtils","init_observable","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","BaseClass","instantiationService","params","createWrapper","getClass","B","autorunWithStore","reader","store","clazz","readHotReloadableExport","wrapInReloadableClass1","isHotReloadEnabled","BaseClass1","param1","IInstantiationService","registerEditorContribution","PlaceholderTextContribution","wrapInReloadableClass1","registerColor","ghostTextForeground","localize","init_async","init_cancellation","init_errors","init_htmlContent","init_lifecycle","init_types","init_uri","init_editorExtensions","init_codeEditorService","init_position","init_range","init_editorContextKeys","init_languages","init_languageFeatures","init_editorState","init_nls","init_actions","init_configurationRegistry","init_contextkey","init_instantiation","init_log","init_platform","init_telemetry","init_dom","init_keyboardEvent","init_iconLabels","init_arrays","init_async","init_cancellation","init_codicons","init_event","init_lifecycle","init_stopwatch","init_types","init_position","init_range","init_languages","init_nls","init_contextkey","init_log","init_colorRegistry","init_themeService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","_sticky","CONTEXT_RENAME_INPUT_VISIBLE","RawContextKey","localize","CONTEXT_RENAME_INPUT_FOCUSED","RenameWidget","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_logService","DisposableStore","StopWatch","InputWithButton","e","RenameCandidateListView","newSymbolName","theme","widgetShadowColor","widgetShadow","widgetBorderColor","widgetBorder","editorWidgetBackground","inputForeground","border","inputBorder","inputBackground","assertType","fontInfo","editorFontSize","bodyBox","getClientArea","editorBox","getDomNodePagePosition","cursorBoxTop","lineHeight","candidateViewHeight","RenameCandidateView","positionPreference","accept","preview","position","inputBoxHeight","getTotalHeight","labelHeight","totalHeightAvailable","getTotalWidth","wantsPreview","focusEditor","caller","where","currentName","supportPreview","requestRenameCandidates","cts","selectionStart","selectionEnd","disposeOnDone","addDisposableListener","EventType","keyEvent","StandardKeyboardEvent","Position","toDisposable","inputResult","DeferredPromise","nRenameSuggestions","newName","source","focusedCandidate","isManuallyTriggered","CancellationTokenSource","triggerKind","NewSymbolNameTriggerKind","candidates","selection","start","end","Range","token","__async","trace","args","namesListResults","raceCancellation","newNames","namesListResult","isDefined","distinctNames","distinct","v","validDistinctNames","n","visibleRanges","firstLineInViewport","IThemeService","IKeybindingService","IContextKeyService","ILogService","RenameCandidateListView","_RenameCandidateListView","parent","opts","DisposableStore","e","getListStyles","quickInputListFocusForeground","quickInputListFocusBackground","height","width","candidates","status","localize","selectedElement","focusedElement","focusedIxs","focused","totalHeight","RenameCandidateView","nCandidates","heightToFitAllCandidates","longestCandidateWidth","c","container","candidateViewHeight","fontInfo","virtualDelegate","element","renderer","candidate","index","templateData","List","InputWithButton","Emitter","getBaseLayerHoverDelegate","getDefaultHoverDelegate","addDisposableListener","EventType","keyEvent","StandardKeyboardEvent","assertType","renderIcon","Codicon","clearNode","iconContainer","applyFontInfo","value","isAIGenerated","NewSymbolNameTag","lineHeight","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","RenameController_1","RenameSkeleton","model","position","registry","token","__async","rejects","provider","res","word","Range","newName","result","localize","rename","skeleton","loc","CancellationToken","RenameController","editor","_instaService","_notificationService","_bulkEditService","_progressService","_logService","_configService","_languageFeaturesService","_telemetryService","DisposableStore","CancellationTokenSource","RenameWidget","trace","cts1","EditorStateCancellationTokenSource","resolveLocationOperation","e","CancellationError","isMarkdownString","MessageController","cts2","newSymbolNamesProviders","resolvedNewSymbolnamesProviders","p","requestRenameSuggestions","triggerKind","cts","providers","NewSymbolNameTriggerKind","_","supportsAutomatic","supportPreview","inputFieldResult","renameOperation","raceCancellation","renameResult","alert","err","wantsPreview","nRenameSuggestionProviders","languageId","value","IInstantiationService","INotificationService","IBulkEditService","IEditorProgressService","ILogService","ITextResourceConfigurationService","ILanguageFeaturesService","ITelemetryService","RenameAction","EditorAction","ContextKeyExpr","EditorContextKeys","accessor","args","editorService","ICodeEditorService","uri","pos","URI","Position","onUnexpectedError","logService","controller","registerEditorContribution","registerEditorAction","RenameCommand","EditorCommand","registerEditorCommand","CONTEXT_RENAME_INPUT_VISIBLE","x","registerAction2","Action2","__spreadValues","localize2","currentEditor","registerModelAndPositionCommand","assertType","renameProvider","Registry","Extensions","init_async","init_lifecycle","init_editorExtensions","init_languageConfigurationRegistry","init_textModel","init_editorWorker","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SectionHeaderDetector","Disposable","editor","languageConfigurationService","editorWorkerService","e","editorLanguageId","RunOnceScheduler","minimap","languageId","commentsConfiguration","foldingRules","model","modelVersionId","sectionHeaders","sectionHeader","validRange","tokens","idx","tokenType","oldDecorations","occurrence","newDecorations","decoration","changeAccessor","decorations","len","ILanguageConfigurationService","IEditorWorkerService","decoration","sectionHeader","ModelDecorationOptions","registerEditorContribution","SectionHeaderDetector","init_lifecycle","init_errors","init_model","init_configuration","init_async","init_cancellation","init_themeService","init_cancellation","init_errors","init_uri","init_model","init_commands","init_types","init_buffer","init_platform","reverseEndianness","arr","i","len","b0","b1","b2","b3","toLittleEndianBuffer","uint8Arr","isLittleEndian","VSBuffer","encodeSemanticTokensDto","semanticTokens","dest","encodeSemanticTokensDtoSize","offset","delta","result","init_range","init_languageFeatures","isSemanticTokens","v","isSemanticTokensEdits","DocumentSemanticTokensResult","provider","tokens","error","hasDocumentSemanticTokensProvider","registry","model","getDocumentSemanticTokensProviders","groups","getDocumentSemanticTokens","lastProvider","lastResultId","token","__async","providers","results","result","err","_getDocumentSemanticTokensProviderHighestGroup","DocumentRangeSemanticTokensResult","hasDocumentRangeSemanticTokensProvider","getDocumentRangeSemanticTokensProviders","getDocumentRangeSemanticTokens","range","onUnexpectedExternalError","CommandsRegistry","accessor","args","uri","assertType","URI","IModelService","documentSemanticTokensProvider","ILanguageFeaturesService","ICommandService","r","CancellationToken","buff","encodeSemanticTokensDto","documentRangeSemanticTokensProvider","Range","init_languageFeatureDebounce","init_stopwatch","init_languageFeatures","SEMANTIC_HIGHLIGHTING_SETTING_ID","isSemanticColoringEnabled","model","themeService","configurationService","setting","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ModelSemanticColoring_1","DocumentSemanticTokensFeature","Disposable","semanticTokensStylingService","modelService","themeService","configurationService","languageFeatureDebounceService","languageFeaturesService","register","model","ModelSemanticColoring","deregister","modelSemanticColoring","handleSettingOrThemeChange","curr","isSemanticColoringEnabled","e","SEMANTIC_HIGHLIGHTING_SETTING_ID","watcher","ISemanticTokensStylingService","IModelService","IThemeService","IConfigurationService","ILanguageFeatureDebounceService","ILanguageFeaturesService","ModelSemanticColoring","Disposable","ModelSemanticColoring_1","model","_semanticTokensStylingService","themeService","languageFeatureDebounceService","languageFeaturesService","RunOnceScheduler","bindDocumentChangeListeners","dispose","provider","_","hasDocumentSemanticTokensProvider","cancellationTokenSource","CancellationTokenSource","lastProvider","lastResultId","request","getDocumentSemanticTokens","pendingChanges","contentChangeListener","e","sw","StopWatch","res","tokens","styling","err","isCancellationError","onUnexpectedError","src","srcOffset","dest","destOffset","length","i","currentResponse","rescheduleIfNeeded","isSemanticTokensEdits","deltaLength","edit","srcData","destData","srcLastStart","destLastStart","copyCount","isSemanticTokens","SemanticTokensResponse","result","toMultilineTokens2","change","area","singleChange","__decorate","__param","ISemanticTokensStylingService","IThemeService","ILanguageFeatureDebounceService","ILanguageFeaturesService","resultId","data","registerEditorFeature","DocumentSemanticTokensFeature","init_async","init_lifecycle","init_editorExtensions","init_configuration","init_themeService","init_languageFeatureDebounce","init_stopwatch","init_languageFeatures","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ViewportSemanticTokensContribution","Disposable","editor","_semanticTokensStylingService","_themeService","_configurationService","languageFeatureDebounceService","languageFeaturesService","RunOnceScheduler","scheduleTokenizeViewport","e","SEMANTIC_HIGHLIGHTING_SETTING_ID","request","req","len","model","isSemanticColoringEnabled","hasDocumentRangeSemanticTokensProvider","visibleRanges","range","requestVersionId","createCancelablePromise","token","getDocumentRangeSemanticTokens","sw","StopWatch","provider","result","styling","toMultilineTokens2","ISemanticTokensStylingService","IThemeService","IConfigurationService","ILanguageFeatureDebounceService","ILanguageFeaturesService","registerEditorContribution","ViewportSemanticTokensContribution","init_arrays","init_cancellation","init_errors","init_editorExtensions","init_position","init_range","init_selection","init_editorContextKeys","init_strings","init_range","WordSelectionRangeProvider","selectSubwords","model","positions","result","position","bucket","pos","obj","word","startColumn","offset","start","end","lastCh","ch","isLowerAsciiLetter","isUpperAsciiLetter","Range","init_nls","init_actions","init_commands","init_languageFeatures","init_resolverService","init_types","init_uri","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SmartSelectController_1","SelectionRanges","_SelectionRanges","index","ranges","fwd","res","SmartSelectController","editor","_editor","_languageFeaturesService","forward","__async","selections","model","provideSelectionRanges","CancellationToken","isNonEmptyArray","equals","b","range","state","newSelections","Selection","ILanguageFeaturesService","AbstractSmartSelect","EditorAction","forward","opts","_accessor","editor","__async","controller","SmartSelectController","GrowSelectionAction","localize","EditorContextKeys","MenuId","CommandsRegistry","ShrinkSelectionAction","registerEditorContribution","registerEditorAction","provideSelectionRanges","registry","model","positions","options","token","providers","WordSelectionRangeProvider","BracketSelectionRangeProvider","work","allRawRanges","provider","allProviderRanges","isNonEmptyArray","i","oneProviderRanges","Range","onUnexpectedExternalError","oneRawRanges","a","b","Position","oneRanges","last","range","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","rangeFull","accessor","args","resource","assertType","URI","ILanguageFeaturesService","reference","ITextModelService","CancellationToken","init_editorExtensions","init_editorExtensions","init_nls","init_nls","Categories","localize2","init_actions","init_configuration","init_contextkey","init_editorContextKeys","init_lifecycle","init_languageFeatures","init_dom","init_arrays","init_lifecycle","init_themables","init_position","init_stringBuilder","StickyScrollWidgetState","_StickyScrollWidgetState","startLineNumbers","endLineNumbers","lastLineRelativePosition","showEndForLine","other","equals","_ttPolicy","createTrustedTypesPolicy","value","STICKY_INDEX_ATTR","STICKY_IS_LINE_ATTR","STICKY_IS_LINE_NUMBER_ATTR","STICKY_IS_FOLDING_ICON_ATTR","StickyScrollWidget","Disposable","_editor","DisposableStore","EmbeddedCodeEditorWidget","updateScrollLeftPosition","e","lineNumber","stickyLine","_state","foldingModel","_rebuildFromLine","isWidgetHeightZero","state","rebuildFromLine","futureWidgetHeight","lineNumbers","previousState","indexOfLinesAlreadyRendered","startLineNumber","layoutInfo","lineNumbersWidth","clearFromLine","i","requireTransitions","allVisible","line","foldingIcon","__async","linesToRender","index","widgetHeight","l","addDisposableListener","EventType","viewModel","viewLineNumber","Position","lineRenderingData","lineNumberOption","actualInlineDecorations","LineDecoration","renderLineInput","RenderLineInput","sb","StringBuilder","renderOutput","renderViewLine","newLine","lineHTMLNode","lineNumberHTMLNode","innerLineNumberHTML","renderedLine","RenderedStickyLine","isLastLine","lastLineZIndex","intermediateLineZIndex","lastLineTop","intermediateLineTop","showFoldingControls","foldingRegions","indexOfFoldingRegion","isCollapsed","StickyFoldingIcon","spanDomNode","renderedStickyLine","column","getColumnOfNodeOffset","domNode","lineIndex","attribute","lineDomNode","lineNumberDomNode","characterMapping","scrollWidth","foldingStartLine","foldingEndLine","dimension","ThemeIcon","foldingCollapsedIcon","foldingExpandedIcon","visible","init_lifecycle","init_languageFeatures","init_cancellation","init_async","init_arrays","init_event","init_languageConfigurationRegistry","init_lifecycle","init_languageFeatures","init_outlineModel","init_async","init_languageConfigurationRegistry","init_errors","StickyRange","startLineNumber","endLineNumber","StickyElement","range","children","parent","StickyModel","uri","version","element","outlineProviderId","init_iterator","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ModelProvider","Status","StickyModelProvider","Disposable","_editor","onProviderUpdate","_languageConfigurationService","_languageFeaturesService","Delayer","DisposableStore","StickyModelFromCandidateOutlineProvider","StickyModelFromCandidateSyntaxFoldingProvider","StickyModelFromCandidateIndentationFoldingProvider","provider","token","__async","modelProvider","statusPromise","modelPromise","status","error","onUnexpectedError","IInstantiationService","ILanguageFeaturesService","StickyModelCandidateProvider","Disposable","_editor","Status","token","providerModelPromise","createCancelablePromise","providerModel","err","onUnexpectedError","model","StickyModelFromCandidateOutlineProvider","_languageFeaturesService","OutlineModel","stickyOutlineElement","providerID","textModel","StickyModel","outlineModel","preferredProvider","outlineElements","Iterable","OutlineGroup","provider","outlineGroupOfModel","tempID","maxTotalSumOfRanges","optimalOutlineGroup","_key","outlineGroup","totalSumRanges","stickyChildren","outlineElementsArray","element1","element2","range1","StickyRange","range2","outlineElement","StickyElement","previousStartLine","children","child","subchild","child1","child2","range","outline","res","OutlineElement","__decorate","__param","ILanguageFeaturesService","StickyModelFromCandidateFoldingProvider","editor","RangesLimitReporter","foldingElement","foldingRegions","length","orderedStickyElements","i","parentIndex","parentNode","StickyModelFromCandidateIndentationFoldingProvider","_languageConfigurationService","IndentRangeProvider","__async","ILanguageConfigurationService","StickyModelFromCandidateSyntaxFoldingProvider","onProviderUpdate","selectedProviders","FoldingController","SyntaxRangeProvider","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StickyLineCandidate","startLineNumber","endLineNumber","nestingDepth","StickyLineCandidateProvider","Disposable","editor","_languageFeaturesService","_languageConfigurationService","Emitter","DisposableStore","RunOnceScheduler","e","toDisposable","StickyModelProvider","__async","CancellationTokenSource","token","model","index","range","outlineModel","result","depth","lastStartLineNumber","lastLine","childrenStartLines","child","lowerBound","binarySearch","a","b","upperBound","childStartLine","childEndLine","stickyLineCandidates","hiddenRanges","hiddenRange","stickyLine","ILanguageFeaturesService","ILanguageConfigurationService","init_instantiation","init_actions","init_contextkey","init_editorContextKeys","init_range","init_position","init_cancellation","init_languageConfigurationRegistry","init_languageFeatureDebounce","init_dom","init_mouseEvent","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StickyScrollController_1","StickyScrollController","Disposable","_editor","_contextMenuService","_languageFeaturesService","_instaService","_languageConfigurationService","_languageFeatureDebounceService","_contextKeyService","DisposableStore","StickyScrollWidget","StickyLineCandidateProvider","StickyScrollWidgetState","stickyScrollDomNode","e","addDisposableListener","EventType","event","__async","getWindow","EditorContextKeys","focusTracker","trackFocus","_","editor","direction","lineNumbers","position","revealFunction","Range","sessionStore","gesture","ClickLinkGesture","getMouseEventTarget","mouseEvent","mouseTargetElement","stickyScrollWidgetDomNode","addStandardDisposableListener","lineIndex","Position","lineNumber","currentEndForLineIndex","_keyboardEvent","mouseTarget","range","textElement","cancellationToken","CancellationTokenSource","toDisposable","currentHTMLChild","getDefinitionsAtPosition","candidateDefinitions","childHTML","goToDefinitionWithLocation","targetWindow","StandardMouseEvent","MenuId","line","stickyLine","foldingIcon","toggleCollapseState","scrollTop","options","stickyLineNumbers","stickyLineNumber","theoreticalLines","rebuildFromLine","model","nextRebuildFromLine","stickyWidgetVersion","focusedStickyElementLineNumber","minRebuildFromLineOrInfinity","FoldingController","stickyWidgetHasLines","lineHeight","maxNumberStickyLines","lastLineRelativePosition","startLineNumbers","endLineNumbers","arrayVisibleRanges","fullVisibleRange","StickyRange","candidateRanges","start","end","depth","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","topOfEndLine","bottomOfEndLine","IContextMenuService","ILanguageFeaturesService","IInstantiationService","ILanguageConfigurationService","ILanguageFeatureDebounceService","IContextKeyService","ToggleStickyScroll","Action2","__spreadProps","__spreadValues","localize2","localize","Categories","ContextKeyExpr","MenuId","accessor","__async","configurationService","IConfigurationService","newValue","weight","FocusStickyScroll","EditorAction2","EditorContextKeys","_accessor","editor","StickyScrollController","SelectNextStickyScrollLine","SelectPreviousStickyScrollLine","GoToStickyScrollLine","SelectEditor","init_actions","registerEditorContribution","StickyScrollController","registerAction2","ToggleStickyScroll","FocusStickyScroll","SelectPreviousStickyScrollLine","SelectNextStickyScrollLine","GoToStickyScrollLine","SelectEditor","init_cancellation","init_filters","init_iterator","init_lifecycle","init_codeEditorService","init_range","init_languageFeatures","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","SuggestInlineCompletion","range","insertText","filterText","additionalTextEdits","command","completion","InlineCompletionResults","RefCountedDisposable","model","line","word","completionModel","completions","_suggestMemoryService","result","items","selectedIndex","first","Iterable","second","resolveCount","item","FuzzyScore","Range","CancellationToken","ISuggestMemoryService","SuggestInlineCompletions","Disposable","_languageFeatureService","_clipboardService","_editorService","position","context","token","__async","editor","candidate","config","QuickSuggestionsOptions","lineTokens","tokenType","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","LineContext","provideSuggestionItems","CompletionOptions","SuggestModel","clipboardText","CompletionModel","WordDistance","_completions","ch","providers","provider","ILanguageFeaturesService","IClipboardService","ICodeEditorService","registerEditorFeature","SuggestInlineCompletions","init_stopwatch","init_editorExtensions","init_nls","ForceRetokenizeAction","EditorAction","localize","accessor","editor","model","sw","StopWatch","registerEditorAction","init_nls","init_actions","ToggleTabFocusModeAction","Action2","localize2","newValue","TabFocus","alert","localize","registerAction2","init_async","init_codicons","init_htmlContent","init_lifecycle","init_platform","init_strings","init_editorExtensions","init_textModel","init_editorWorker","init_language","init_dom","init_actions","init_lifecycle","init_instantiation","init_dom","init_keyboardEvent","init_event","init_lifecycle","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","Link","Disposable","enabled","container","_link","options","_hoverService","openerService","append","$","getDefaultHoverDelegate","onClickEmitter","DomEmitter","onKeyPress","onEnterPress","Event","e","StandardKeyboardEvent","onTap","EventType","Gesture","onOpen","EventHelper","title","IHoverService","IOpenerService","init_themables","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","BANNER_ELEMENT_HEIGHT","BannerController","Disposable","_editor","instantiationService","Banner","item","__spreadProps","__spreadValues","IInstantiationService","Banner","Disposable","instantiationService","MarkdownRenderer","$","item","message","element","clearNode","ariaLabel","iconContainer","append","ThemeIcon","messageContainer","action","Link","__spreadProps","__spreadValues","actionBarContainer","ActionBar","Action","widgetClose","__decorate","__param","IInstantiationService","init_nls","init_configuration","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","warningIcon","registerIcon","Codicon","localize","UnicodeHighlighter","Disposable","_editor","_editorWorkerService","_workspaceTrustService","instantiationService","state","max","data","DisableHighlightingOfNonBasicAsciiCharactersAction","DisableHighlightingOfAmbiguousCharactersAction","DisableHighlightingOfInvisibleCharactersAction","BannerController","e","options","resolveOptions","option","highlightOptions","locale","language","DocumentUnicodeHighlighter","ViewportUnicodeHighlighter","decoration","IEditorWorkerService","IWorkspaceTrustManagementService","IInstantiationService","resolveOptions","trusted","options","inUntrustedWorkspace","DocumentUnicodeHighlighter","Disposable","_editor","_options","_updateState","_editorWorkerService","RunOnceScheduler","modelVersionId","info","decorations","range","Decorations","decoration","model","isModelDecorationVisible","text","computeReason","isModelDecorationInComment","isModelDecorationInString","__decorate","__param","IEditorWorkerService","ViewportUnicodeHighlighter","ranges","totalResult","result","UnicodeTextModelHighlighter","r","configureUnicodeHighlightOptionsStr","localize","UnicodeHighlighterHoverParticipant","_languageService","_openerService","anchor","lineDecorations","unicodeHighlighter","UnicodeHighlighter","existedReason","index","d","highlightInfo","codePoint","codePointStr","formatCodePointMarkdown","reason","isBasicASCII","adjustSettingsArgs","adjustSettings","uri","ShowExcludeOptions","markdown","MarkdownString","MarkdownHover","context","hoverParts","renderMarkdownHovers","ILanguageService","IOpenerService","codePointToHex","codePoint","formatCodePointMarkdown","value","InvisibleCharacters","renderCodePointAsInlineCode","computeReason","char","options","UnicodeTextModelHighlighter","Decorations","_Decorations","hideInComments","hideInStrings","key","ModelDecorationOptions","DisableHighlightingInCommentsAction","EditorAction","DisableHighlightingOfAmbiguousCharactersAction","localize","accessor","editor","args","__async","configurationService","IConfigurationService","unicodeHighlightConfigKeys","DisableHighlightingInStringsAction","DisableHighlightingOfInvisibleCharactersAction","DisableHighlightingOfNonBasicAsciiCharactersAction","ShowExcludeOptions","reason","inString","inComment","quickPickService","IQuickInputService","getExcludeCharFromBeingHighlightedLabel","locale","excludeLocaleFromBeingHighlighted","excludeCharFromBeingHighlighted","action","expectNever","result","configureUnicodeHighlightOptionsStr","charCodes","existingValue","charCode","locales","registerEditorAction","registerEditorContribution","UnicodeHighlighter","HoverParticipantRegistry","UnicodeHighlighterHoverParticipant","init_lifecycle","init_resources","init_editorExtensions","init_codeEditorService","init_nls","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","ignoreUnusualLineTerminators","writeIgnoreState","codeEditorService","model","state","readIgnoreState","UnusualLineTerminatorsDetector","Disposable","_editor","_dialogService","_codeEditorService","e","__async","result","localize","basename","IDialogService","ICodeEditorService","registerEditorContribution","UnusualLineTerminatorsDetector","init_nls","init_async","init_cancellation","init_errors","init_lifecycle","init_editorExtensions","init_codeEditorService","init_range","init_editorContextKeys","init_model","init_languageFeatures","init_contextkey","init_network","init_map","init_resources","init_wordHelper","init_languageFeatures","init_languages","init_lifecycle","init_map","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","TextualDocumentHighlightProvider","model","position","token","result","word","USUAL_WORD_SEPARATORS","m","DocumentHighlightKind","primaryModel","otherModels","ResourceMap","highlights","TextualMultiDocumentHighlightFeature","Disposable","languageFeaturesService","ILanguageFeaturesService","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","WordHighlighter_1","WordHighlighterContribution_1","ctxHasWordHighlights","RawContextKey","getOccurrencesAtPosition","registry","model","position","token","orderedByScore","first","provider","onUnexpectedExternalError","result","map","ResourceMap","getOccurrencesAcrossMultipleModels","wordSeparators","otherModels","filteredModels","otherModel","shouldSynchronizeModel","score","OccurenceAtPositionRequest","_model","_selection","_wordSeparators","createCancelablePromise","selection","word","Range","decorations","lineNumber","startColumn","endColumn","currentWordRange","requestIsValid","len","range","SemanticOccurenceAtPositionRequest","providers","value","MultiModelOccurenceRequest","computeOccurencesAtPosition","computeOccurencesMultiModel","registerModelAndPositionCommand","accessor","__async","languageFeaturesService","ILanguageFeaturesService","CancellationToken","WordHighlighter","editor","multiProviders","contextKeyService","codeEditorService","DisposableStore","Delayer","e","matchesScheme","newValue","highlights","newIndex","dest","lineContent","alert","currentDecorationIDs","preservedModel","currentEditors","deleteURI","isEqual","editorHighlighterContrib","WordHighlighterContribution","uri","Schemas","editorSelection","currentModels","tempModel","isDiffEditor","diffModel","multiFileConfigChange","workerRequestIsValid","currentModelDecorationRanges","storedRange","myRequestId","otherModelsToHighlight","data","onUnexpectedError","currentTime","minimumRenderTime","newDecorations","oldDecorationIDs","newDocumentHighlights","highlight","getHighlightDecorationOptions","newDecorationIDs","changeAccessor","ICodeEditorService","Disposable","createWordHighlighterIfPossible","state","IContextKeyService","WordHighlightNavigationAction","EditorAction","next","opts","accessor","editor","controller","WordHighlighterContribution","NextWordHighlightAction","localize","ctxHasWordHighlights","EditorContextKeys","PrevWordHighlightAction","TriggerWordHighlightAction","args","registerEditorContribution","registerEditorAction","registerEditorFeature","TextualMultiDocumentHighlightFeature","init_editorExtensions","init_wordCharacterClassifier","init_position","init_range","init_selection","init_editorContextKeys","init_languageConfigurationRegistry","init_nls","init_contextkey","MoveWordCommand","EditorCommand","opts","accessor","editor","args","wordSeparators","getMapForWordSeparators","model","selections","hasMulticursor","result","sel","inPosition","Position","outPosition","r","CursorState","pos","from","to","inSelectionMode","Selection","WordLeftCommand","position","wordNavigationType","WordOperations","WordRightCommand","CursorWordStartLeft","CursorWordEndLeft","CursorWordLeft","ContextKeyExpr","EditorContextKeys","CONTEXT_ACCESSIBILITY_MODE_ENABLED","IsWindowsContext","CursorWordStartLeftSelect","CursorWordEndLeftSelect","CursorWordLeftSelect","CursorWordAccessibilityLeft","wordCharacterClassifier","EditorOptions","CursorWordAccessibilityLeftSelect","CursorWordStartRight","CursorWordEndRight","CursorWordRight","CursorWordStartRightSelect","CursorWordEndRightSelect","CursorWordRightSelect","CursorWordAccessibilityRight","CursorWordAccessibilityRightSelect","DeleteWordCommand","languageConfigurationService","ILanguageConfigurationService","autoClosingBrackets","autoClosingQuotes","autoClosingPairs","viewModel","commands","deleteRange","ReplaceCommand","DeleteWordLeftCommand","ctx","Range","DeleteWordRightCommand","lineCount","maxColumn","DeleteWordStartLeft","DeleteWordEndLeft","DeleteWordLeft","DeleteWordStartRight","DeleteWordEndRight","DeleteWordRight","DeleteInsideWord","EditorAction","localize","registerEditorCommand","registerEditorAction","init_editorExtensions","init_range","init_editorContextKeys","init_commands","DeleteWordPartLeft","DeleteWordCommand","EditorContextKeys","ctx","wordNavigationType","r","WordPartOperations","Range","DeleteWordPartRight","lineCount","maxColumn","WordPartLeftCommand","MoveWordCommand","wordSeparators","model","position","hasMulticursor","CursorWordPartLeft","CommandsRegistry","CursorWordPartLeftSelect","WordPartRightCommand","CursorWordPartRight","CursorWordPartRightSelect","registerEditorCommand","init_htmlContent","init_lifecycle","init_editorExtensions","init_nls","ReadOnlyMessageController","Disposable","editor","messageController","MessageController","message","MarkdownString","localize","registerEditorContribution","import_contribution","init_standaloneStrings","init_dom","init_lifecycle","init_editorExtensions","init_platform","IPadShowKeyboard","Disposable","editor","isIOS","shouldHaveWidget","ShowKeyboardWidget","addDisposableListener","e","registerEditorContribution","import_inspectTokens","init_platform","init_standaloneStrings","init_nls","init_platform","init_lifecycle","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","HelpQuickAccessProvider_1","HelpQuickAccessProvider","quickInputService","keybindingService","Registry","Extensions","picker","disposables","DisposableStore","item","value","providerDescriptor","p","providerA","providerB","provider","helpEntry","prefix","label","localize","IQuickInputService","IKeybindingService","Registry","Extensions","HelpQuickAccessProvider","QuickHelpNLS","init_lifecycle","init_functional","init_lifecycle","init_model","init_editorColorRegistry","init_themeService","AbstractEditorNavigationQuickAccessProvider","options","picker","token","runOptions","disposables","DisposableStore","pickerDisposable","MutableDisposable","editor","context","codeEditor","getCodeEditor","lastKnownEditorViewState","createSingleCallFunction","toDisposable","model","status","isDiffEditor","range","changeAccessor","deleteDecorations","newDecorations","themeColorFromId","overviewRulerRangeHighlight","OverviewRulerLane","rangeHighlightId","overviewRulerDecorationId","rangeHighlightDecorationId","init_nls","AbstractGotoLineQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","picker","label","localize","Disposable","context","token","editor","disposables","DisposableStore","event","item","updatePickerAndEditor","position","range","codeEditor","getCodeEditor","toDisposable","lineNumber","column","value","numbers","part","endLine","lineCount","model","positionCandidate","init_platform","init_codeEditorService","init_standaloneStrings","init_event","init_editorExtensions","init_editorContextKeys","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StandaloneGotoLineQuickAccessProvider","AbstractGotoLineQuickAccessProvider","editorService","Event","ICodeEditorService","GotoLineAction","EditorAction","GoToLineNLS","EditorContextKeys","accessor","IQuickInputService","StandaloneGotoLineQuickAccessProvider","registerEditorAction","Registry","Extensions","init_async","init_cancellation","init_codicons","init_themables","init_filters","init_path","init_platform","init_strings","NO_SCORE2","scoreFuzzy2","target","query","patternStart","wordStart","preparedQuery","doScoreFuzzy2Multiple","doScoreFuzzy2Single","totalScore","totalMatches","queryPiece","score","matches","normalizeMatches","fuzzyScore","createMatches","NO_ITEM_SCORE","sortedMatches","matchA","matchB","normalizedMatches","currentMatch","match","matchOverlaps","queryExpectsExactMatch","MULTIPLE_QUERY_VALUES_SEPARATOR","prepareQuery","original","originalLowercase","pathNormalized","normalized","normalizedLowercase","normalizeQuery","containsPathSeparator","sep","expectExactMatch","values","originalSplit","originalPiece","expectExactMatchPiece","pathNormalizedPiece","normalizedPiece","normalizedLowercasePiece","isWindows","stripWildcards","pieceToQuery","arg1","piece","init_lifecycle","init_strings","init_range","init_languages","init_outlineModel","init_nls","init_languageFeatures","init_arraysFind","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","AbstractGotoSymbolQuickAccessProvider_1","AbstractGotoSymbolQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","_languageFeaturesService","_outlineModelService","options","picker","localize","Disposable","context","token","runOptions","editor","model","disposables","DisposableStore","__async","label","symbolProviderRegistryPromise","DeferredPromise","symbolProviderListener","toDisposable","event","item","symbolsPromise","picksCts","updatePickerItems","positionToEnclose","CancellationTokenSource","query","prepareQuery","items","candidate","findLast","Range","symbols","filterBySymbolKind","filterPos","symbolQuery","containerQuery","pieceToQuery","buttons","openSideBySideDirection","ThemeIcon","Codicon","filteredSymbolPicks","index","symbol","symbolLabel","trim","symbolLabelWithIcon","SymbolKinds","symbolLabelIconOffset","containerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","scoreFuzzy2","__spreadProps","__spreadValues","deprecated","getAriaLabelForSymbol","sortedFilteredSymbolPicks","symbolA","symbolB","symbolPicks","updateLastSeparatorLabel","lastSeparator","lastSymbolKind","lastSymbolKindCounter","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","symbolPick","kindA","kindB","result","document","ILanguageFeaturesService","IOutlineModelService","FALLBACK_NLS_SYMBOL_KIND","localize","NLS_SYMBOL_KIND_CACHE","init_platform","init_codeEditorService","init_standaloneStrings","init_event","init_editorExtensions","init_editorContextKeys","init_outlineModel","init_languageFeatures","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StandaloneGotoSymbolQuickAccessProvider","AbstractGotoSymbolQuickAccessProvider","editorService","languageFeaturesService","outlineModelService","Event","ICodeEditorService","ILanguageFeaturesService","IOutlineModelService","GotoSymbolAction","EditorAction","QuickOutlineNLS","EditorContextKeys","accessor","IQuickInputService","AbstractGotoSymbolQuickAccessProvider","ItemActivation","registerEditorAction","Registry","Extensions","StandaloneGotoSymbolQuickAccessProvider","init_platform","init_standaloneStrings","init_codeEditorService","init_iconLabels","init_errors","init_filters","init_functional","init_lifecycle","init_map","countMapFrom","values","map","value","TfIdfCalculator","_TfIdfCalculator","query","token","embedding","idfCache","scores","key","doc","chunk","score","input","normalize","word","camelParts","part","documents","chunks","text","tf","term","currentOccurrences","newOccurrences","queryEmbedding","sum","termTfidf","chunkTf","chunkIdf","chunkTfidf","chunkOccurrences","termFrequencies","occurrences","idf","normalizeTfIdfScores","result","a","b","max","init_nls","init_commands","init_configuration","init_instantiation","init_log","init_async","init_cancellation","init_lifecycle","init_types","TriggerAction","isPicksWithActive","obj","candidate","isFastAndSlowPicks","PickerQuickAccessProvider","Disposable","prefix","options","picker","token","runOptions","disposables","DisposableStore","picksCts","picksDisposable","MutableDisposable","updatePickerItems","__async","picksDisposables","CancellationTokenSource","picksToken","picksFilter","providedPicks","applyPicks","picks","skipEmpty","items","activeItem","isFunction","applyFastAndSlowPicks","fastAndSlowPicks","fastPicksApplied","slowPicksApplied","timeout","awaitedAdditionalPicks","activePick","additionalPicks","additionalActivePick","fallbackActivePick","fallbackActivePickCandidate","awaitedPicks","event","item","buttonTrigger","button","buttonIndex","result","action","index","removed","activeItems","keepScrollPositionBefore","separator","init_telemetry","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","AbstractCommandsQuickAccessProvider_1","CommandsHistory_1","AbstractCommandsQuickAccessProvider","PickerQuickAccessProvider","or","matchesPrefix","matchesWords","matchesContiguousSubString","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","CommandsHistory","filter","_disposables","token","runOptions","__async","allCommandPicks","runTfidf","createSingleCallFunction","tfidf","TfIdfCalculator","commandPick","result","normalizeTfIdfScores","score","filteredCommandPicks","labelHighlights","aliasHighlights","tfidfScore","mapLabelToCommand","existingCommandForLabel","commandPickA","commandPickB","commandACounter","commandBCounter","commandASuggestion","commandBSuggestion","commandPicks","addOtherSeparator","addSuggestedSeparator","addCommonlyUsedSeparator","localize","additionalCommandPicks","keybinding","ariaLabel","__spreadProps","__spreadValues","error","isCancellationError","toErrorMessage","label","commandAlias","commandDescription","chunk","IInstantiationService","IKeybindingService","ICommandService","ITelemetryService","IDialogService","CommandsHistory","Disposable","CommandsHistory_1","storageService","configurationService","logService","e","WillSaveStateReason","raw","serializedCache","error","cache","LRUCache","entries","a","b","entry","commandId","value","key","configuredCommandHistoryLength","__decorate","__param","IStorageService","IConfigurationService","ILogService","AbstractEditorCommandsQuickAccessProvider","AbstractCommandsQuickAccessProvider","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","activeTextEditorControl","editorCommandPicks","editorAction","commandDescription","isLocalizedString","stripIcons","init_instantiation","init_commands","init_telemetry","init_editorExtensions","init_editorContextKeys","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StandaloneCommandsQuickAccessProvider","AbstractEditorCommandsQuickAccessProvider","instantiationService","codeEditorService","keybindingService","commandService","telemetryService","dialogService","__async","IInstantiationService","ICodeEditorService","IKeybindingService","ICommandService","ITelemetryService","IDialogService","GotoLineAction","EditorAction","QuickCommandNLS","EditorContextKeys","accessor","IQuickInputService","StandaloneCommandsQuickAccessProvider","registerEditorAction","Registry","Extensions","init_editorExtensions","init_codeEditorService","init_configuration","init_contextkey","init_instantiation","__decorate","decorators","target","key","desc","c","r","d","i","__param","paramIndex","decorator","StandaloneReferencesController","ReferencesController","editor","contextKeyService","editorService","notificationService","instantiationService","storageService","configurationService","IContextKeyService","ICodeEditorService","INotificationService","IInstantiationService","IStorageService","IConfigurationService","registerEditorContribution","ReferencesController","StandaloneReferencesController","init_editorExtensions","init_standaloneTheme","init_standaloneStrings","init_theme","ToggleHighContrast","EditorAction","ToggleHighContrastNLS","accessor","editor","standaloneThemeService","IStandaloneThemeService","currentTheme","isHighContrast","isDark","VS_DARK_THEME_NAME","VS_LIGHT_THEME_NAME","HC_BLACK_THEME_NAME","HC_LIGHT_THEME_NAME","registerEditorAction","CUSTOM_MARKDOWN_LANGUAGE_ID","CUSTOM_MARKDOWN_CONFIG","comments","blockComment","brackets","autoClosingPairs","open","close","notIn","surroundingPairs","folding","markers","start","RegExp","end","CUSTOM_MARKDOWN_LANGUAGE","defaultToken","tokenPostfix","control","noncontrol","escapes","jsescapes","empty","tokenizer","root","token","next","taskRegex","nextEmbedded","include","table_header","table_body","table_common","switchTo","cases","codeblock","codeblockgh","linecontent","html","comment","tag","$S3","embeddedStyle","embeddedScript","uml","MONACO_DARK_THEME_DEFINITION","id","baseTheme","tokenStyles","token","foregroundColor","editorColors","backgroundColor","lineHighlight","borderColor","lineNumbers","activeForegroundColor","dimmedForegroundColor","diff","insertedLineBackgroundColor","insertedTextBackgroundColor","removedLineBackgroundColor","removedTextBackgroundColor","diagonalFillColor","gutter","MonacoEditorTheme","themeDefinition","constructor","getId","id","getRecordWithoutUndefinedEntries","record","result","key","value","Object","entries","undefined","register","colorDefinitions","editorColors","colors","backgroundColor","foregroundColor","lineNumbers","activeForegroundColor","dimmedForegroundColor","lineHighlight","borderColor","diff","insertedLineBackgroundColor","insertedTextBackgroundColor","removedTextBackgroundColor","removedLineBackgroundColor","diagonalFillColor","gutter","rules","tokenStyles","map","tokenDefinition","token","languageId","foreground","background","fontStyle","editor","defineTheme","base","baseTheme","inherit","MONACO_LIGHT_THEME_DEFINITION","id","baseTheme","tokenStyles","token","foregroundColor","editorColors","lineHighlight","borderColor","backgroundColor","lineNumbers","activeForegroundColor","dimmedForegroundColor","diff","insertedLineBackgroundColor","insertedTextBackgroundColor","removedLineBackgroundColor","removedTextBackgroundColor","diagonalFillColor","gutter","MonacoEditorService","themeService","inject","ThemeService","currentTheme","lightTheme","darkTheme","constructor","registerCustomThemes","registerCustomMarkdownLanguage","effect","applyTheme","MonacoEditorTheme","MONACO_LIGHT_THEME_DEFINITION","MONACO_DARK_THEME_DEFINITION","register","languages","id","CUSTOM_MARKDOWN_LANGUAGE_ID","setLanguageConfiguration","CUSTOM_MARKDOWN_CONFIG","setMonarchTokensProvider","CUSTOM_MARKDOWN_LANGUAGE","artemisTheme","editor","setTheme","Theme","LIGHT","getId","createStandaloneCodeEditor","domElement","create","value","glyphMargin","minimap","enabled","lineNumbersMinChars","scrollBeyondLastLine","lineHeight","scrollbar","alwaysConsumeMouseWheel","getModel","setEOL","EndOfLineSequence","LF","createStandaloneDiffEditor","createDiffEditor","automaticLayout","readOnly","renderSideBySide","stickyScroll","renderOverviewRuler","vertical","handleMouseWheel","hideUnchangedRegions","guides","indentation","renderLineHighlight","fontSize","factory","fac","providedIn"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337]}
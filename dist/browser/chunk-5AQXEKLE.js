import{b as m,j as g}from"./chunk-3JSWSN6W.js";import{f as N}from"./chunk-DXTZ4GAW.js";import{i as T,n as y,t as I}from"./chunk-Z2YUBN6N.js";import{a as U}from"./chunk-CK7FH6VF.js";import{b as a,d as x}from"./chunk-G4I63THF.js";import{a as u}from"./chunk-PZ7IDTIM.js";import{c as P,d as b}from"./chunk-VK7JPHFE.js";import{e as R,x as B}from"./chunk-5GXY5RYT.js";import{p as s}from"./chunk-DID2YGL7.js";import{c as p}from"./chunk-CXQURQM5.js";import{y as S}from"./chunk-Z4VHWOB5.js";import{a as L,b as F}from"./chunk-3E746U5Y.js";var Y=e=>e.participation&&e.participation.currentValue&&(!e.participation.previousValue||e.participation.previousValue.id!==e.participation.currentValue.id),ee=e=>e.templateParticipation&&e.templateParticipation.currentValue&&(!e.templateParticipation.previousValue||e.templateParticipation.previousValue.id!==e.templateParticipation.currentValue.id),te=e=>e.solutionParticipation&&e.solutionParticipation.currentValue&&(!e.solutionParticipation.previousValue||e.solutionParticipation.previousValue.id!==e.solutionParticipation.currentValue.id),K=e=>{if(!e)return!1;let t=x(e);return t&&(t.type===p.PROGRAMMING||t.type===p.QUIZ)},H=e=>{if(!e)return!1;let t=x(e);return t&&(t.type===p.MODELING||t.type===p.TEXT||t.type===p.FILE_UPLOAD)};var V=(e,t)=>{if(!t.dueDate)return!0;if(e.submissions==null||e.submissions.length<=0)return!1;let r=e.submissions[0];return r.submissionDate?(r.submissionDate=s(r.submissionDate),r.submissionDate.isBefore(N(t,e))):!1};function re(e,t,r=!1){if(!e)return;e.results&&(e.results=B(e.results,"completionDate","desc"));let n=e.results?.find(f=>t||f.rated===!0||r&&A(f));return n?F(L({},n),{participation:e}):void 0}var i=function(e){return e.IS_BUILDING="IS_BUILDING",e.IS_QUEUED="IS_QUEUED",e.IS_GENERATING_FEEDBACK="IS_GENERATING_FEEDBACK",e.FEEDBACK_GENERATION_FAILED="FEEDBACK_GENERATION_FAILED",e.FEEDBACK_GENERATION_TIMED_OUT="FEEDBACK_GENERATION_TIMED_OUT",e.HAS_RESULT="HAS_RESULT",e.NO_RESULT="NO_RESULT",e.SUBMITTED="SUBMITTED",e.SUBMITTED_WAITING_FOR_GRADING="SUBMITTED_WAITING_FOR_GRADING",e.LATE_NO_FEEDBACK="LATE_NO_FEEDBACK",e.LATE="LATE",e.MISSING="MISSING",e}(i||{}),M=function(e){return e.NONE="NONE",e.FAILED_PROGRAMMING_SUBMISSION_ONLINE_IDE="FAILED_PROGRAMMING_SUBMISSION_ONLINE_IDE",e.FAILED_PROGRAMMING_SUBMISSION_OFFLINE_IDE="FAILED_PROGRAMMING_SUBMISSION_OFFLINE_IDE",e}(M||{}),D=e=>e?.score!==void 0,me=(e,t)=>{let r=R(e);if(r){let n=R(t);n.exercise.studentParticipations=[],r.participation=n}return r},Ne=e=>e?e.filter(t=>!t.reference&&t.type===m.MANUAL_UNREFERENCED):void 0,De=e=>e?e.filter(t=>!t.reference&&(t.type===m.MANUAL_UNREFERENCED||t.type===m.AUTOMATIC)):void 0;function d(e){return(e&&l(e)&&e.successful===!1)??!1}function O(e){return(e&&l(e)&&e.successful===void 0&&e.completionDate&&s().isAfter(e.completionDate))??!1}function G(e){return(e&&l(e)&&e.successful===!0)??!1}function A(e){return(e&&l(e)&&e.successful===void 0&&e.completionDate&&s().isSameOrBefore(e.completionDate))??!1}function l(e){return e.assessmentType===u.AUTOMATIC_ATHENA}var _e=(e,t,r,n,f=M.NONE,o=!1)=>{if(!t||!e)return r?i.HAS_RESULT:i.NO_RESULT;if(f!==M.NONE)return i.MISSING;if(H(t)){let c=V(t,e),C=N(e,t),E=e.assessmentDueDate;return c&&D(r)?!E||E.isBefore(s())||!_(r)?r?.assessmentType===u.AUTOMATIC_ATHENA&&r?.successful===void 0?i.IS_GENERATING_FEEDBACK:r?.assessmentType===u.AUTOMATIC_ATHENA&&r?.successful===!1?i.FEEDBACK_GENERATION_FAILED:i.HAS_RESULT:i.SUBMITTED_WAITING_FOR_GRADING:c&&!D(r)?!C||C.isSameOrAfter(s())?i.SUBMITTED:!E||E.isSameOrAfter(s())||_(r)?i.SUBMITTED_WAITING_FOR_GRADING:i.NO_RESULT:D(r)&&(!E||E.isBefore(s())||!_(r))?i.LATE:i.LATE_NO_FEEDBACK}return K(t)?o?i.IS_QUEUED:n?i.IS_BUILDING:A(r)?i.IS_GENERATING_FEEDBACK:G(r)?i.HAS_RESULT:d(r)?i.FEEDBACK_GENERATION_FAILED:O(r)?i.FEEDBACK_GENERATION_TIMED_OUT:D(r)?i.HAS_RESULT:i.NO_RESULT:i.NO_RESULT},j=(e,t)=>{let r=!e?.testCaseCount,n=e?.participation?.exercise?.type===p.PROGRAMMING;return t!==i.NO_RESULT&&t!==i.IS_BUILDING&&!W(e?.submission)&&r&&n},Oe=(e,t)=>e?e.assessmentType===u.AUTOMATIC_ATHENA?A(e)?"text-primary":d(e)?"text-danger":"text-secondary":t===i.LATE?"result-late":Q(e)?"text-danger":k(e)?"text-secondary":e?.score===void 0?e?.successful?"text-success":"text-danger":j(e,t)||e.score>=P?"text-success":e.score>=b?"result-orange":"text-danger":"text-secondary",le=(e,t)=>e?e.assessmentType===u.AUTOMATIC_ATHENA?e.successful===void 0?S:e.successful?T:I:Q(e)||d(e)?I:A(e)?S:k(e)||O(e)?y:j(e,t)?T:e?.score==null?e?.successful?T:I:e.score>=P?T:I:y,k=e=>{let t=e.participation?.exercise?.type;return t===p.TEXT||t===p.MODELING?e.assessmentType===u.AUTOMATIC_ATHENA:e.participation&&h(e.participation)&&v(e,e.participation.exercise)},Se=e=>!!(e.participation&&e.participation.type!==a.TEMPLATE&&e.participation.type!==a.SOLUTION),Q=e=>W(e.submission)&&!_(e),W=e=>e&&e.submissionExerciseType==="programming"&&e.buildFailed,_=e=>e?.assessmentType!==u.AUTOMATIC&&e?.assessmentType!==u.AUTOMATIC_ATHENA;function Re(e){let t=new Set;return e.forEach(r=>{if(!r.result.feedbacks)return[];r.result.feedbacks.forEach(n=>{g.isTestCaseFeedback(n)&&t.add(n.testCase?.testName??"Test "+(r.result.feedbacks.indexOf(n)+1))})}),Array.from(t)}function xe(e,t,r){let n=[];return t.forEach(f=>{let o=z(f,e.result.feedbacks),c;o?.positive?c="Passed":c=r&&o?.detailText?`Failed: "${o.detailText}"`:"Failed",n.push({testName:f,testResult:c})}),n}function z(e,t){if(!t)return null;let r=t.findIndex(n=>n.testCase?.testName?.localeCompare(e)===0);return r!==-1?t[r]:null}function Ue(e){e.participation?.results&&(e.participation.results=[]),e.submission?.participation?.results&&(e.submission.participation.results=[]),e.submission?.results&&(e.submission.results=[]),e.feedbacks&&e.feedbacks.forEach(t=>t.result=void 0)}var Fe=(e,t,r)=>{if(e&&t&&r)return e.replace("{buildPlanId}",r).replace("{projectKey}",t)},Be=(e,t,r,n)=>{let f=t?.toLowerCase(),o;if(r?.type===a.PROGRAMMING){let c=r;c.repositoryUri&&(o=c.participantIdentifier,U(c)&&(o="practice-"+o))}else r?.type===a.TEMPLATE?o=n?.type==="TEST"?"tests":"exercise":r?.type===a.SOLUTION&&(o=n?.type==="TEST"?"tests":"solution");if(o&&e&&f)return e.replace("{projectKey}",f).replace("{repoSlug}",f+"-"+o).replace("{commitHash}",n?.commitHash??"")},v=(e,t)=>{if(!t)return!1;if(G(e))return!0;if(A(e)||O(e)||d(e)||e.participation?.type===a.PROGRAMMING&&U(e.participation))return!1;let r=e.completionDate;return!r||(r&&!s.isDayjs(r)&&(r=s(r)),!r.isValid())?!0:t.assessmentType!==u.AUTOMATIC?t.assessmentDueDate?s().isBefore(s(t.assessmentDueDate)):e.assessmentType===u.AUTOMATIC:t.buildAndTestStudentSubmissionsAfterDueDate?r.isBefore(s(t.buildAndTestStudentSubmissionsAfterDueDate)):!1},h=e=>e&&e.type===a.PROGRAMMING,be=e=>e?.type&&[a.PROGRAMMING,a.TEMPLATE,a.SOLUTION].includes(e.type)||!1,ge=e=>{if(!e.dueDate&&!e.buildAndTestStudentSubmissionsAfterDueDate)return!1;let t=e.buildAndTestStudentSubmissionsAfterDueDate||e.dueDate;return s.isDayjs(t)||(t=s(t)),t.isBefore(s())};export{Fe as a,Be as b,v as c,h as d,be as e,ge as f,Y as g,ee as h,te as i,re as j,i as k,M as l,me as m,Ne as n,De as o,d as p,O as q,G as r,A as s,l as t,_e as u,j as v,Oe as w,le as x,k as y,Se as z,_ as A,Re as B,xe as C,Ue as D};
//# sourceMappingURL=chunk-5AQXEKLE.js.map

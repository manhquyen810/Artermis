import{a as Ot}from"./chunk-IA5QU2XG.js";import{a as Mt}from"./chunk-7ETSMUGK.js";import"./chunk-TWQT4PWU.js";import"./chunk-NV4PYWIT.js";import"./chunk-RPFDXKEJ.js";import"./chunk-U4DJRHYQ.js";import{a as wt}from"./chunk-VPHPBAVR.js";import{a as It}from"./chunk-OTCBNILH.js";import"./chunk-MYJYCKA4.js";import{a as yt}from"./chunk-BIK4CL5A.js";import"./chunk-W7RIOT23.js";import{a as At,b as kt}from"./chunk-VRAVBLUK.js";import"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-2QXIMOEO.js";import{a as gt}from"./chunk-UDBRF4PR.js";import"./chunk-ZPITQMA6.js";import{d as Et}from"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as U}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import{d as bt}from"./chunk-CT44YL7Q.js";import{c as Tt}from"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import{v as it}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-5GXY5RYT.js";import{a as vt}from"./chunk-K3W6YFKH.js";import{a as ht,c as St}from"./chunk-JXJXC4DZ.js";import{d as N}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import{p as v}from"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{Ba as mt,Cd as ft,Da as ct,F as at,Lc as _t,O as ot,Oc as F,Qa as xt,Vb as ut,ca as rt,cb as lt,hb as dt,nb as pt,pd as Ct,qa as st}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import{a as nt}from"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as D}from"./chunk-U54OSGNH.js";import{f as Z,h as tt,i as et}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{n as Y}from"./chunk-IOA4DPXY.js";import{Ac as z,Ad as P,Bc as J,Db as n,Dc as j,Ea as S,La as H,Ma as y,Mc as B,Na as A,Oc as m,Sc as E,Tb as w,Zb as p,dd as t,ed as k,f as $,fd as g,gd as b,hd as R,kc as x,ld as K,md as G,nd as Q,qd as X,rc as W,rd as _,sc as l,sd as I,uc as q,vc as M,wc as O,xc as a,yc as o,yd as u,zc as r,zd as h}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var Ft=e=>({amount:e}),Nt=e=>({points:e}),Dt=e=>({registered:e}),Lt=(e,c)=>({generated:e,total:c}),jt=(e,c)=>({done:e,total:c}),Bt=e=>({index:e});function Gt(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",10),t(2,`
                `)),e&2){let i=m(2);n(),x("icon",i.faCheckCircle)}}function Ut(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",11),t(2,`
                `)),e&2){let i=m(2);n(),x("icon",i.faTimesCircle)}}function Vt(e,c){if(e&1&&(t(0,`
                            `),r(1,"fa-icon",10),t(2,`
                        `)),e&2){let i=m(2);n(),x("icon",i.faCheckCircle)}}function $t(e,c){if(e&1&&(t(0,`
                            `),r(1,"fa-icon",11),t(2,`
                        `)),e&2){let i=m(2);n(),x("icon",i.faTimes)}}function Ht(e,c){if(e&1&&(t(0,`
                                `),a(1,"span"),t(2),u(3,"artemisTranslate"),o(),t(4,`
                                `),r(5,"fa-icon",10),t(6,`
                            `)),e&2){let i=m(3);n(2),b("",h(3,3,"artemisApp.examStatus.preparation.testExam.maxPointsCorrect"),"",i.exam.examMaxPoints,""),n(3),x("icon",i.faCheckCircle)}}function Wt(e,c){if(e&1&&(t(0,`
                                `),r(1,"span",12),t(2,`
                                `),r(3,"fa-icon",11),t(4,`
                            `)),e&2){let i=m(3);n(),x("translateValues",_(2,Nt,i.maxPointExercises)),n(2),x("icon",i.faTimes)}}function qt(e,c){if(e&1&&(t(0,`
                        `),a(1,"li",7),t(2,`
                            `),p(3,Ht,7,5)(4,Wt,5,4),o(),t(5,`
                    `)),e&2){let i=m(2);n(3),l(i.maxPointExercises===i.exam.examMaxPoints?3:-1),n(),l(i.maxPointExercises!==i.exam.examMaxPoints?4:-1)}}function zt(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",10),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faCheckCircle)}}function Jt(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",11),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faTimes)}}function Kt(e,c){if(e&1&&(t(0,`
                        `),a(1,"li",7),t(2,`
                            `),r(3,"span",13),t(4,`
                            `),p(5,zt,3,1)(6,Jt,3,1),o(),t(7,`
                    `)),e&2){let i=m(2);n(3),x("translateValues",_(3,Dt,i.exam.numberOfExamUsers)),n(2),l(i.registeredStudents?5:-1),n(),l(i.registeredStudents?-1:6)}}function Qt(e,c){e&1&&(t(0,`
                                `),r(1,"span",15),t(2,`
                            `))}function Xt(e,c){if(e&1&&(t(0,`
                                `),r(1,"span",16),t(2,`
                            `)),e&2){let i=m(3);n(),x("translateValues",I(1,Lt,i.numberOfGeneratedStudentExams,i.exam.numberOfExamUsers))}}function Yt(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",10),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faCheckCircle)}}function Zt(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",11),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faTimes)}}function te(e,c){if(e&1&&(t(0,`
                        `),a(1,"li",7),t(2,`
                            `),r(3,"span",14),t(4,`
                            `),t(5,`
                            `),p(6,Qt,3,0)(7,Xt,3,4)(8,Yt,3,1)(9,Zt,3,1),o(),t(10,`
                    `)),e&2){let i=m(2);n(6),l(i.registeredStudents?-1:6),n(),l(i.registeredStudents?7:-1),n(),l(i.generatedStudentExams?8:-1),n(),l(i.generatedStudentExams?-1:9)}}function ee(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",10),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faCheckCircle)}}function ie(e,c){if(e&1&&(t(0,`
                                `),r(1,"fa-icon",11),t(2,`
                            `)),e&2){let i=m(3);n(),x("icon",i.faTimes)}}function ne(e,c){if(e&1&&(t(0,`
                        `),a(1,"li",7),t(2,`
                            `),r(3,"span",17),t(4,`
                            `),p(5,ee,3,1)(6,ie,3,1),o(),t(7,`
                    `)),e&2){let i=m(2);n(5),l(i.preparedExerciseStart?5:-1),n(),l(i.preparedExerciseStart?-1:6)}}function ae(e,c){if(e&1&&(t(0,`
        `),a(1,"div",1),t(2,`
            `),t(3,`
            `),a(4,"div",2),t(5,`
                `),p(6,Gt,3,1)(7,Ut,3,1),o(),t(8,`
            `),a(9,"div",3),t(10,`
                `),r(11,"h6",6),t(12,`
                `),a(13,"ol"),t(14,`
                    `),a(15,"li",7),t(16,`
                        `),r(17,"span",8),t(18,`
                        `),p(19,Vt,3,1)(20,$t,3,1),o(),t(21,`
                    `),p(22,qt,6,2)(23,Kt,8,5)(24,te,11,4)(25,ne,8,2),o(),t(26,`
            `),o(),t(27,`
        `),o(),t(28,`
        `),r(29,"div",9),t(30,`
    `)),e&2){let i=m();n(6),l(i.examPreparationFinished?6:-1),n(),l(i.examPreparationFinished?-1:7),n(4),E("jhiTranslate","artemisApp.examStatus.preparation.",i.isTestExam?"testExam.":"","examPreparation"),n(6),x("translateValues",_(12,Ft,i.exam.exerciseGroups?i.exam.exerciseGroups.length:0)),n(2),l(i.configuredExercises?19:-1),n(),l(i.configuredExercises?-1:20),n(2),l(i.isTestExam?22:-1),n(),l(i.isTestExam?-1:23),n(),l(i.isTestExam?-1:24),n(),l(i.isTestExam?-1:25),n(4),x("ngClass",i.mandatoryPreparationFinished?"check":"cross")}}function oe(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",11),t(2,`
                `)),e&2){let i=m();n(),x("icon",i.faTimesCircle)}}function re(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",18),t(2,`
                `)),e&2){let i=m();n(),x("icon",i.faDotCircle)}}function se(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",10),t(2,`
                `)),e&2){let i=m();n(),x("icon",i.faCheckCircle)}}function me(e,c){if(e&1&&(t(0,`
                    `),r(1,"fa-icon",11),t(2,`
                `)),e&2){let i=m();n(),x("icon",i.faCircleExclamation)}}function ce(e,c){if(e&1&&(t(0,`
                `),a(1,"div",4),t(2,`
                    `),r(3,"h6",5),t(4,`
                `),o(),t(5,`
            `)),e&2){let i=m();n(3),E("jhiTranslate","artemisApp.examStatus.conduction.",i.isTestExam?"testExam.":"","conductionSuspended")}}function xe(e,c){if(e&1&&(t(0,`
                        `),a(1,"li"),t(2,`
                            `),a(3,"span"),t(4),u(5,"artemisTranslate"),o(),t(6,`
                        `),o(),t(7,`
                    `)),e&2){let i=m(2);n(4),b(" ",h(5,2,"artemisApp.examStatus.conduction.testExam.numberOfStudents"),": ",i.exam.numberOfExamUsers," ")}}function le(e,c){if(e&1&&(t(0,`
                `),a(1,"ol"),t(2,`
                    `),a(3,"li"),t(4,`
                        `),a(5,"span"),t(6),u(7,"artemisTranslate"),u(8,"artemisDurationFromSeconds"),o(),t(9,`
                    `),o(),t(10,`
                    `),p(11,xe,8,4),a(12,"li"),t(13,`
                        `),a(14,"span"),t(15),u(16,"artemisTranslate"),o(),t(17,`
                    `),o(),t(18,`
                    `),a(19,"li"),t(20,`
                        `),a(21,"span"),t(22),u(23,"artemisTranslate"),o(),t(24,`
                    `),o(),t(25,`
                `),o(),t(26,`
            `)),e&2){let i=m();n(6),b(" ",h(7,9,"artemisApp.examStatus.conduction.workingTime"),": ",P(8,11,i.exam.workingTime,!0)," "),n(5),l(i.isTestExam?11:-1),n(4),R(`
                            `,h(16,14,"artemisApp.examStatus.conduction."+(i.isTestExam?"testExam.":"")+"startedExams"),`
                            :
                            `,i.numberOfStarted,`
                            (`,i.numberOfGeneratedStudentExams>0?i.round(i.numberOfStarted*100/i.examChecklist.numberOfGeneratedStudentExams,1):0,`
                            %)
                        `),n(7),R(`
                            `,h(23,16,"artemisApp.examStatus.conduction."+(i.isTestExam?"testExam.":"")+"submittedExams"),`
                            :
                            `,i.numberOfSubmitted,`
                            (`,i.numberOfGeneratedStudentExams>0?i.round(i.numberOfSubmitted*100/i.numberOfGeneratedStudentExams,1):0,`
                            %)
                        `)}}function de(e,c){if(e&1&&(t(0,`
        `),r(1,"div",9),t(2,`
    `)),e&2){let i=m();n(),x("ngClass",i.examConductionState===i.examConductionStateEnum.FINISHED?"check":"")}}function pe(e,c){if(e&1&&(t(0,`
                        `),r(1,"fa-icon",18),t(2,`
                    `)),e&2){let i=m(2);n(),x("icon",i.faDotCircle)}}function ue(e,c){if(e&1&&(t(0,`
                        `),r(1,"fa-icon",10),t(2,`
                    `)),e&2){let i=m(2);n(),x("icon",i.faCheckCircle)}}function _e(e,c){if(e&1&&(t(0,`
                        `),r(1,"fa-icon",11),t(2,`
                    `)),e&2){let i=m(2);n(),x("icon",i.faTimesCircle)}}function Ce(e,c){if(e&1&&(t(0,`
                                    `),a(1,"li"),t(2,`
                                        `),a(3,"span"),t(4),u(5,"artemisTranslate"),o(),t(6,`
                                    `),o(),t(7,`
                                `)),e&2){let i=c.$implicit,s=c.$index,d=m(4);n(4),b(`
                                            `,P(5,2,"artemisApp.examStatus.correction.correctionRoundProgress",_(5,Bt,s+1)),`
                                            :
                                            `,d.Math.min(d.examChecklist.numberOfTotalParticipationsForAssessment>0?d.round(i*100/d.examChecklist.numberOfTotalParticipationsForAssessment,1):0,100),`%
                                        `)}}function fe(e,c){if(e&1&&(t(0,`
                            `),a(1,"div"),t(2,`
                                `),M(3,Ce,8,7,null,null,q),o(),t(5,`
                        `)),e&2){let i=m(3);n(3),O(i.examChecklist.numberOfTotalExamAssessmentsFinishedByCorrectionRound)}}function he(e,c){if(e&1&&(t(0,`
                                `),a(1,"b"),t(2),u(3,"artemisDate"),r(4,"fa-icon",10),t(5,`
                                `),o(),t(6,`
                            `)),e&2){let i=m(3);n(2),g(`
                                    `,h(3,2,i.exam.publishResultsDate),`
                                    `),n(2),x("icon",i.faCheckCircle)}}function Se(e,c){e&1&&(t(0,`
                                `),r(1,"b",20),t(2,`
                            `))}function Ee(e,c){if(e&1&&(t(0,`
                                `),a(1,"b",21),t(2),u(3,"artemisTranslate"),o(),t(4,`
                            `)),e&2){let i=m(3);n(),x("ngClass",i.examReviewState),n(),k(h(3,2,"artemisApp.examStatus.correction."+i.examReviewState))}}function ve(e,c){if(e&1&&(t(0,`
                    `),a(1,"ol"),t(2,`
                        `),p(3,fe,6,0),a(4,"li",7),t(5,`
                            `),a(6,"span"),t(7),u(8,"artemisTranslate"),o(),t(9,`
                            `),p(10,he,7,4)(11,Se,3,0),r(12,"br"),t(13,`
                        `),o(),t(14,`
                        `),a(15,"li"),t(16,`
                            `),a(17,"span"),t(18),u(19,"artemisTranslate"),o(),t(20,`
                            `),p(21,Ee,5,4),o(),t(22,`
                        `),a(23,"li"),t(24,`
                            `),a(25,"span"),t(26),u(27,"artemisTranslate"),u(28,"artemisTranslate"),o(),t(29,`
                        `),o(),t(30,`
                    `),o(),t(31,`
                `)),e&2){let i=m(2);n(3),l(i.examChecklist.numberOfTotalExamAssessmentsFinishedByCorrectionRound!==null&&i.numberOfSubmitted!==0?3:-1),n(4),g("",h(8,9,"artemisApp.examStatus.correction.publishResultDate"),": "),n(3),l(i.exam.publishResultsDate?10:-1),n(),l(i.exam.publishResultsDate?-1:11),n(7),g("",h(19,11,"artemisApp.examStatus.correction.examReview"),":"),n(3),l(i.examReviewState?21:-1),n(5),R(`
                                `,h(27,13,"artemisApp.examStatus.correction.complaints"),`:
                                `,i.examChecklist.numberOfAllComplaintsDone!==void 0&&i.examChecklist.numberOfAllComplaints&&i.examChecklist.numberOfAllComplaints>0?i.round(i.examChecklist.numberOfAllComplaintsDone*100/i.examChecklist.numberOfAllComplaints,1):100,`%
                                `,P(28,15,"artemisApp.examStatus.correction.complaintsCount",I(18,jt,i.examChecklist.numberOfAllComplaintsDone,i.examChecklist.numberOfAllComplaints)),`
                            `)}}function ge(e,c){if(e&1&&(t(0,`
        `),a(1,"div",1),t(2,`
            `),t(3,`
            `),a(4,"div",2),t(5,`
                `),p(6,pe,3,1)(7,ue,3,1)(8,_e,3,1),t(9,`
            `),o(),t(10,`
            `),a(11,"div",3),t(12,`
                `),r(13,"h6",19),t(14,`
                `),p(15,ve,32,21),o(),t(16,`
        `),o(),t(17,`
    `)),e&2){let i,s=m();n(6),l((i=s.examCorrectionState)===s.examReviewStateEnum.RUNNING?6:i===s.examReviewStateEnum.FINISHED?7:8),n(9),l(s.examChecklist?15:-1)}}var C=function(e){return e.UNSET="unset",e.PLANNED="planned",e.RUNNING="running",e.FINISHED="finished",e}(C||{}),T=function(e){return e[e.PLANNED=0]="PLANNED",e[e.RUNNING=1]="RUNNING",e[e.FINISHED=2]="FINISHED",e[e.ERROR=3]="ERROR",e}(T||{}),Rt=(()=>{class e{examChecklistService=S(Ot);websocketService=S(nt);exam;course;examChecklist;numberOfGeneratedStudentExams;configuredExercises;registeredStudents;generatedStudentExams;preparedExerciseStart;examPreparationFinished=!1;mandatoryPreparationFinished=!1;examConductionState;examReviewState;examCorrectionState;isTestExam;maxPointExercises;examConductionStateEnum=T;examReviewStateEnum=C;round=bt;Math=Math;numberOfSubmitted=0;numberOfStarted=0;faTimes=F;faTimesCircle=ft;faCheckCircle=mt;faArrowRight=lt;faDotCircle=ot;faCircleExclamation=at;ngOnInit(){let i=this.examChecklistService.getSubmittedTopic(this.exam);this.websocketService.subscribe(i),this.websocketService.receive(i).subscribe(()=>this.numberOfSubmitted+=1);let s=this.examChecklistService.getStartedTopic(this.exam);this.websocketService.subscribe(s),this.websocketService.receive(s).subscribe(()=>this.numberOfStarted+=1)}ngOnChanges(){this.examChecklistService.getExamStatistics(this.exam).subscribe(i=>{this.examChecklist=i,this.numberOfGeneratedStudentExams=this.examChecklist.numberOfGeneratedStudentExams??0,this.isTestExam=this.exam.testExam,this.course?.isAtLeastInstructor&&this.setExamPreparation(),this.setConductionState(),this.isTestExam||(this.setReviewState(),this.setCorrectionState()),this.numberOfStarted=this.examChecklist.numberOfExamsStarted,this.numberOfSubmitted=this.examChecklist.numberOfExamsSubmitted})}ngOnDestroy(){let i=this.examChecklistService.getSubmittedTopic(this.exam);this.websocketService.unsubscribe(i);let s=this.examChecklistService.getStartedTopic(this.exam);this.websocketService.unsubscribe(s)}areAllExercisesConfigured(){let i=this.examChecklistService.checkAtLeastOneExerciseGroup(this.exam),s=this.examChecklistService.checkNumberOfExerciseGroups(this.exam),d=this.examChecklistService.checkEachGroupContainsExercise(this.exam),f=this.examChecklistService.checkPointsExercisesEqual(this.exam),L;return this.isTestExam?(this.maxPointExercises=this.examChecklistService.calculateExercisePoints(f,this.exam),L=this.exam.examMaxPoints===this.maxPointExercises):L=this.examChecklistService.checkTotalPointsMandatory(f,this.exam),i&&d&&s&&f&&L}isExamPreparationFinished(){return this.isTestExam?this.configuredExercises:this.configuredExercises&&this.registeredStudents&&this.generatedStudentExams&&this.preparedExerciseStart}isMandatoryPreparationFinished(){return this.isTestExam?this.configuredExercises:this.configuredExercises&&this.registeredStudents&&this.generatedStudentExams}setConductionState(){this.course?.isAtLeastInstructor&&this.examAlreadyStarted()&&!this.mandatoryPreparationFinished?this.examConductionState=T.ERROR:this.examAlreadyEnded()&&(this.course&&!this.course.isAtLeastInstructor||this.examPreparationFinished)?this.examConductionState=T.FINISHED:this.examAlreadyStarted()&&!this.examAlreadyEnded()?this.examConductionState=T.RUNNING:this.examConductionState=T.PLANNED}setReviewState(){this.exam.examStudentReviewEnd?this.isExamReviewPlanned()?this.examReviewState=C.PLANNED:this.isExamReviewRunning()?this.examReviewState=C.RUNNING:this.examReviewState=C.FINISHED:this.examReviewState=C.UNSET}setCorrectionState(){this.examReviewState===C.RUNNING?this.examCorrectionState=C.RUNNING:!this.exam.publishResultsDate||this.examReviewState===C.UNSET?this.examCorrectionState=C.UNSET:this.exam.publishResultsDate&&this.examReviewState===C.PLANNED?this.examCorrectionState=C.PLANNED:this.examReviewState===C.FINISHED&&this.allComplaintsResolved()?this.examCorrectionState=C.FINISHED:this.examCorrectionState=C.RUNNING}setExamPreparation(){this.configuredExercises=this.areAllExercisesConfigured(),this.isTestExam?(this.registeredStudents=!1,this.generatedStudentExams=!1,this.preparedExerciseStart=!1):(this.registeredStudents=this.examChecklistService.checkAtLeastOneRegisteredStudent(this.exam),this.generatedStudentExams=this.examChecklistService.checkAllExamsGenerated(this.exam,this.examChecklist)&&this.registeredStudents,this.preparedExerciseStart=!!this.examChecklist.allExamExercisesAllStudentsPrepared&&this.generatedStudentExams),this.examPreparationFinished=this.isExamPreparationFinished(),this.mandatoryPreparationFinished=this.isMandatoryPreparationFinished()}examAlreadyStarted(){return this.exam.startDate&&this.exam.startDate.isBefore(v())}examAlreadyEnded(){return this.exam.endDate&&this.exam.endDate.isBefore(v())}isExamReviewRunning(){return(!this.exam.examStudentReviewStart&&this.exam.examStudentReviewEnd&&this.exam.examStudentReviewEnd.isAfter(v())||this.exam.examStudentReviewStart&&this.exam.examStudentReviewStart.isBefore(v())&&this.exam.examStudentReviewEnd.isAfter(v()))??!1}isExamReviewPlanned(){return(this.exam.examStudentReviewStart&&this.exam.examStudentReviewStart.isAfter(v()))??!1}allComplaintsResolved(){return this.examChecklist.numberOfAllComplaints===this.examChecklist.numberOfAllComplaintsDone}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=w({type:e,selectors:[["jhi-exam-status"]],inputs:{exam:"exam",course:"course"},features:[H],decls:35,vars:15,consts:[[1,"exam-status-wrapper",3,"ngClass"],[1,"status-step"],[1,"d-flex","justify-content-center","header-icon"],[1,"status-step-content"],[1,"text-center","mb-1"],[3,"jhiTranslate"],[1,"text-center",3,"jhiTranslate"],[1,"d-flex","align-items-center"],["jhiTranslate","artemisApp.examStatus.preparation.configureExercises",3,"translateValues"],[1,"connector",3,"ngClass"],[1,"check",3,"icon"],[1,"cross",3,"icon"],["jhiTranslate","artemisApp.examStatus.preparation.testExam.maxPointsWrong",3,"translateValues"],["jhiTranslate","artemisApp.examStatus.preparation.registerStudents",3,"translateValues"],["jhiTranslate","artemisApp.examStatus.preparation.generateStudentExams"],["jhiTranslate","artemisApp.examStatus.preparation.notRegistered"],["jhiTranslate","artemisApp.examStatus.preparation.registered",3,"translateValues"],["jhiTranslate","artemisApp.examStatus.preparation.prepareExerciseStart"],[1,"running",3,"icon"],["jhiTranslate","artemisApp.examStatus.correction.examCorrection",1,"text-center"],["jhiTranslate","artemisApp.examStatus.correction.notSet",1,"unset"],[3,"ngClass"]],template:function(s,d){if(s&1&&(a(0,"div",0),t(1,`
    `),t(2,`
    `),p(3,ae,31,14),a(4,"div",1),t(5,`
        `),t(6,`
        `),a(7,"div",2),t(8,`
            `),p(9,oe,3,1)(10,re,3,1)(11,se,3,1)(12,me,3,1),t(13,`
        `),o(),t(14,`
        `),a(15,"div",3),t(16,`
            `),a(17,"div",4),t(18,`
                `),r(19,"h6",5),t(20,`
                `),a(21,"b"),t(22),u(23,"artemisDate"),u(24,"artemisDate"),o(),t(25,`
            `),o(),t(26,`
            `),t(27,`
            `),p(28,ce,6,2)(29,le,27,18),o(),t(30,`
    `),o(),t(31,`
    `),p(32,de,3,1)(33,ge,18,2),o(),t(34,`
`)),s&2){let f;x("ngClass",d.course!=null&&d.course.isAtLeastInstructor?"instructor-view":"tutor-view"),n(3),l(d.course!=null&&d.course.isAtLeastInstructor?3:-1),n(6),l((f=d.examConductionState)===d.examConductionStateEnum.PLANNED?9:f===d.examConductionStateEnum.RUNNING?10:f===d.examConductionStateEnum.FINISHED?11:f===d.examConductionStateEnum.ERROR?12:-1),n(10),E("jhiTranslate","artemisApp.examStatus.conduction.",d.isTestExam?"testExam.":"","examConduction"),n(3),b("",h(23,11,d.exam.startDate)," - ",h(24,13,d.exam.endDate),""),n(6),l(d.examConductionState===d.examConductionStateEnum.ERROR?28:-1),n(),l(d.course!=null&&d.course.isAtLeastInstructor&&d.examChecklist&&d.examConductionState!==d.examConductionStateEnum.ERROR?29:-1),n(3),l(d.isTestExam?-1:32),n(),l(d.isTestExam?-1:33)}},dependencies:[Y,N,D,Tt,vt,wt],styles:[".instructor-view[_ngcontent-%COMP%]{max-width:750px;min-width:650px}.tutor-view[_ngcontent-%COMP%]{max-width:450px;min-width:350px}.exam-status-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:130px;margin-right:170px}.exam-status-wrapper[_ngcontent-%COMP%]   .planned[_ngcontent-%COMP%], .exam-status-wrapper[_ngcontent-%COMP%]   .finished[_ngcontent-%COMP%], .exam-status-wrapper[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{color:var(--success)}.exam-status-wrapper[_ngcontent-%COMP%]   .unset[_ngcontent-%COMP%], .exam-status-wrapper[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{color:var(--danger)}.exam-status-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:list-item!important}.exam-status-wrapper[_ngcontent-%COMP%]   .running[_ngcontent-%COMP%]{color:var(--warning)}.exam-status-wrapper[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{width:100%;min-width:50px;border-top:2px solid;margin-top:1.5em}.exam-status-wrapper[_ngcontent-%COMP%]   .status-step[_ngcontent-%COMP%]{width:25px;overflow-x:visible;justify-content:flex-start;display:flex;flex-direction:column;align-items:center}.exam-status-wrapper[_ngcontent-%COMP%]   .status-step[_ngcontent-%COMP%]   .status-step-content[_ngcontent-%COMP%]{min-width:fit-content;white-space:nowrap}.exam-status-wrapper[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{z-index:2;font-size:2em}"]})}return e})();var be=()=>["new"],V=e=>[e],Te=e=>[e,"exercise-groups"],ye=e=>[e,"student-exams"],Ae=e=>[e,"assessment-dashboard"],ke=e=>[e,"edit"],Ie=e=>[e,"test-runs"],we=e=>[e,"students"],Me=(e,c)=>["/course-management",e,"exams",c,"scores"];function Oe(e,c){if(e&1){let i=j();t(0,`
                `),a(1,"div",4),t(2,`
                    `),a(3,"a",5),B("click",function(){y(i);let d=m(2);return A(d.openImportModal())}),t(4,`
                        `),r(5,"fa-icon",6),t(6,`
                        `),r(7,"span",7),t(8,`
                    `),o(),t(9,`
                    `),a(10,"a",8),t(11,`
                        `),r(12,"fa-icon",6),t(13,`
                        `),r(14,"span",9),t(15,`
                    `),o(),t(16,`
                `),o(),t(17,`
            `)}if(e&2){let i=m(2);n(5),x("icon",i.faFileImport),n(5),x("routerLink",X(3,be)),n(2),x("icon",i.faPlus)}}function Re(e,c){if(e&1&&(t(0,`
                                        `),a(1,"span"),t(2,`
                                            `),a(3,"a",22),t(4),o(),t(5,`
                                        `),o(),t(6,`
                                    `)),e&2){let i=m().$implicit;n(3),x("routerLink",_(2,V,i.id)),n(),k(i.id)}}function Pe(e,c){if(e&1&&t(0),e&2){let i=m().$implicit;g(`
                                        `,i.id,`
                                    `)}}function Fe(e,c){if(e&1&&(t(0,`
                                            `),a(1,"div",23),t(2,`
                                                `),a(3,"a",24),t(4),o(),t(5,`
                                            `),o(),t(6,`
                                        `)),e&2){let i=m().$implicit;n(3),E("id","exam-",i.id,"-title"),x("routerLink",_(4,V,i.id)),n(),k(i.title)}}function Ne(e,c){if(e&1&&(t(0,`
                                            `),a(1,"span"),t(2),o(),t(3,`
                                        `)),e&2){let i=m().$implicit;n(2),g(`
                                                `,i.title,`
                                            `)}}function De(e,c){e&1&&(t(0,`
                                            `),r(1,"div",25),t(2,`
                                        `))}function Le(e,c){e&1&&(t(0,`
                                            `),r(1,"div",26),t(2,`
                                        `))}function je(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",27),t(2,`
                                                    `),a(3,"div"),t(4,`
                                                        `),r(5,"fa-icon",6),t(6,`
                                                        `),r(7,"span",28),t(8,`
                                                    `),o(),t(9,`
                                                `),o(),t(10,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),E("id","exercises-button-",i.id,"-groups"),x("routerLink",_(4,Te,i.id)),n(4),x("icon",s.faListAlt)}}function Be(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",29),t(2,`
                                                    `),a(3,"div"),t(4,`
                                                        `),r(5,"fa-icon",6),t(6,`
                                                        `),r(7,"span",30),t(8,`
                                                    `),o(),t(9,`
                                                `),o(),t(10,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),E("id","student-exams-",i.id,""),x("routerLink",_(4,ye,i.id)),n(4),x("icon",s.faEye)}}function Ge(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",27),t(2,`
                                                    `),a(3,"div"),t(4,`
                                                        `),r(5,"fa-icon",6),t(6,`
                                                        `),r(7,"span",31),t(8,`
                                                    `),o(),t(9,`
                                                `),o(),t(10,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),E("id","exercises-button-",i.id,""),x("routerLink",_(4,Ae,i.id)),n(4),x("icon",s.faThList)}}function Ue(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",32),t(2,`
                                                    `),a(3,"div"),t(4,`
                                                        `),r(5,"fa-icon",6),t(6,`
                                                        `),r(7,"span",33),t(8,`
                                                    `),o(),t(9,`
                                                `),o(),t(10,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),x("routerLink",_(2,ke,i.id)),n(4),x("icon",s.faWrench)}}function Ve(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",34),t(2,`
                                                    `),r(3,"fa-icon",6),t(4,`
                                                    `),r(5,"span",35),t(6,`
                                                `),o(),t(7,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),x("routerLink",_(2,Ie,i.id)),n(2),x("icon",s.faUser)}}function $e(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",36),t(2,`
                                                    `),r(3,"fa-icon",6),t(4,`
                                                    `),r(5,"span",37),t(6,`
                                                `),o(),t(7,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),E("id","student-button-",i.id,""),x("routerLink",_(4,we,i.id)),n(2),x("icon",s.faUser)}}function He(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",38),t(2,`
                                                    `),r(3,"fa-icon",6),t(4,`
                                                    `),r(5,"span",39),t(6,`
                                                `),o(),t(7,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),x("routerLink",I(2,Me,s.course.id,i.id)),n(2),x("icon",s.faEye)}}function We(e,c){if(e&1&&(t(0,`
                                                `),a(1,"a",40),t(2,`
                                                    `),r(3,"fa-icon",6),t(4,`
                                                    `),r(5,"span",41),t(6,`
                                                `),o(),t(7,`
                                            `)),e&2){let i=m().$implicit,s=m(3);n(),E("id","checklist-button-",i.id,""),x("routerLink",_(4,V,i.id)),n(2),x("icon",s.faThList)}}function qe(e,c){if(e&1&&(t(0,`
                            `),a(1,"tr"),t(2,`
                                `),a(3,"td",17),t(4,`
                                    `),p(5,Re,7,4)(6,Pe,1,1),o(),t(7,`
                                `),a(8,"td",17),t(9,`
                                    `),z(10),t(11,`
                                        `),p(12,Fe,7,6)(13,Ne,4,1)(14,De,3,0)(15,Le,3,0),J(),t(16,`
                                `),o(),t(17,`
                                `),a(18,"td",17),t(19,`
                                    `),r(20,"jhi-exam-status",19),t(21,`
                                `),o(),t(22,`
                                `),a(23,"td",17),t(24,`
                                    `),a(25,"div",20),t(26,`
                                        `),a(27,"div",21),t(28,`
                                            `),p(29,je,11,6)(30,Be,11,6)(31,Ge,11,6)(32,Ue,11,4),o(),t(33,`
                                        `),a(34,"div",21),t(35,`
                                            `),p(36,Ve,8,4)(37,$e,8,6)(38,He,8,5)(39,We,8,6),o(),t(40,`
                                    `),o(),t(41,`
                                `),o(),t(42,`
                            `),o(),t(43,`
                        `)),e&2){let i=c.$implicit,s=m(3);n(5),l(s.course.isAtLeastInstructor?5:6),n(7),l(s.course.isAtLeastInstructor?12:13),n(2),l(i.testExam?-1:14),n(),l(i.testExam?15:-1),n(5),x("exam",i)("course",s.course),n(9),l(s.course.isAtLeastEditor?29:-1),n(),l(s.course.isAtLeastInstructor?30:-1),n(),l(!i.testExam&&(s.course.isAtLeastTutor&&s.examHasFinished(i)||s.course.isAtLeastInstructor)?31:-1),n(),l(s.course.isAtLeastInstructor?32:-1),n(4),l(s.course.isAtLeastInstructor?36:-1),n(),l(!i.testExam&&s.course.isAtLeastInstructor?37:-1),n(),l(s.course.isAtLeastInstructor?38:-1),n(),l(s.course.isAtLeastInstructor?39:-1)}}function ze(e,c){if(e&1){let i=j();t(0,`
            `),a(1,"div",10),t(2,`
                `),a(3,"table",11),t(4,`
                    `),a(5,"thead"),t(6,`
                        `),a(7,"tr",12),Q("predicateChange",function(d){y(i);let f=m(2);return G(f.predicate,d)||(f.predicate=d),A(d)})("ascendingChange",function(d){y(i);let f=m(2);return G(f.ascending,d)||(f.ascending=d),A(d)}),B("sortChange",function(){y(i);let d=m(2);return A(d.sortRows())}),t(8,`
                            `),a(9,"th",13),t(10,`
                                `),r(11,"span",14),t(12,`
                                `),r(13,"fa-icon",6),t(14,`
                            `),o(),t(15,`
                            `),a(16,"th",15),t(17,`
                                `),r(18,"span",16),t(19,`
                                `),r(20,"fa-icon",6),t(21,`
                            `),o(),t(22,`
                            `),a(23,"th",17),t(24,`
                                `),r(25,"span",18),t(26,`
                            `),o(),t(27,`
                            `),r(28,"th"),t(29,`
                        `),o(),t(30,`
                    `),o(),t(31,`
                    `),a(32,"tbody"),t(33,`
                        `),M(34,qe,44,14,null,null,W().trackId,!0),o(),t(36,`
                `),o(),t(37,`
            `),o(),t(38,`
        `)}if(e&2){let i=m(2);n(7),K("predicate",i.predicate)("ascending",i.ascending),n(6),x("icon",i.faSort),n(7),x("icon",i.faSort),n(14),O(i.exams)}}function Je(e,c){if(e&1&&(t(0,`
    `),a(1,"div"),t(2,`
        `),a(3,"div",0),t(4,`
            `),r(5,"h4",1),t(6,`
            `),r(7,"jhi-documentation-button",2),t(8,`
            `),p(9,Oe,18,4),o(),t(10,`
        `),r(11,"div",3),t(12,`
        `),r(13,"br"),t(14,`
        `),p(15,ze,39,4),o(),t(16,`
`)),e&2){let i=m();n(7),x("type",i.documentationType),n(2),l(i.course.isAtLeastInstructor?9:-1),n(6),l(i.exams?15:-1)}}var Fi=(()=>{class e{route=S(Z);courseService=S(Et);examManagementService=S(yt);eventManager=S(ht);alertService=S(St);sortService=S(It);modalService=S(it);router=S(tt);documentationType="Exams";course;exams;predicate;ascending;eventSubscriber;dialogErrorSource=new $;dialogError$=this.dialogErrorSource.asObservable();currentTime;faSort=xt;faPlus=_t;faFileImport=ct;faTimes=F;faEye=pt;faWrench=dt;faUser=rt;faListAlt=ut;faClipboard=st;faThList=Ct;constructor(){this.predicate="id",this.ascending=!0}ngOnInit(){this.courseService.find(Number(this.route.snapshot.paramMap.get("courseId"))).subscribe({next:i=>{this.course=i.body,this.loadAllExamsForCourse(),this.registerChangeInExams(),this.currentTime=v()},error:i=>U(this.alertService,i)})}ngOnDestroy(){this.eventSubscriber!==void 0&&this.eventManager.destroy(this.eventSubscriber),this.dialogErrorSource.unsubscribe()}loadAllExamsForCourse(){this.examManagementService.findAllExamsForCourse(this.course.id).subscribe({next:i=>{this.exams=i.body,this.exams.forEach(s=>{this.examManagementService.getLatestIndividualEndDateOfExam(this.course.id,s.id).subscribe(d=>s.latestIndividualEndDate=d.body.latestIndividualEndDate)})},error:i=>U(this.alertService,i)})}registerChangeInExams(){this.eventSubscriber=this.eventManager.subscribe("examListModification",()=>{this.loadAllExamsForCourse(),this.currentTime=v()})}trackId(i,s){return s.id}sortRows(){this.sortService.sortByProperty(this.exams,this.predicate,this.ascending)}examHasFinished(i){return i.latestIndividualEndDate?i.latestIndividualEndDate.isBefore(v()):!1}openImportModal(){let i=this.modalService.open(Mt,{size:"lg",backdrop:"static"});i.componentInstance.subsequentExerciseGroupSelection.set(!1);let s=["/course-management",this.course.id,"exams","import"];i.result.then(d=>{s.push(d.id),this.router.navigate(s)})}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=w({type:e,selectors:[["jhi-exam-management"]],decls:1,vars:1,consts:[[1,"d-flex","flex-wrap","align-items-center"],["id","course-page-heading","jhiTranslate","artemisApp.examManagement.title"],[3,"type"],[1,"row"],[1,"ms-auto","text-truncate","justify-content-end"],[1,"btn","btn-primary","me-1",3,"click"],[3,"icon"],["jhiTranslate","artemisApp.examManagement.importExam"],["id","create-exam",1,"btn","btn-primary","jh-create-entity","create-exam",3,"routerLink"],["jhiTranslate","artemisApp.examManagement.createExam"],["id","exams-table",1,"table-responsive"],[1,"table","table-striped"],["jhiSort","",3,"predicateChange","ascendingChange","sortChange","predicate","ascending"],["jhiSortBy","id",1,"d-md-table-cell"],["jhiTranslate","global.field.id"],["jhiSortBy","title"],["jhiTranslate","artemisApp.exam.title"],[1,"d-md-table-cell"],["jhiTranslate","artemisApp.examStatus.columnTitle"],[1,"d-flex","justify-content-center",3,"exam","course"],[1,"btn-group","flex-btn-group-container"],[1,"btn-group-vertical","me-1","mb-1","exam-management-button-section"],[3,"routerLink"],[1,"bold"],[3,"id","routerLink"],["jhiTranslate","artemisApp.examManagement.testExam.realExam",1,"badge","bg-success"],["jhiTranslate","artemisApp.examManagement.testExam.testExam",1,"badge","bg-primary"],[1,"btn","btn-primary","btn-sm","me-1","mb-1","exercise-button","d-flex","align-items-center","justify-content-center",3,"routerLink","id"],["jhiTranslate","artemisApp.examManagement.exerciseGroups",1,"d-none","d-md-inline"],[1,"btn","btn-primary","btn-sm","me-1","mb-1","d-flex","align-items-center","justify-content-center",3,"routerLink","id"],["jhiTranslate","artemisApp.examManagement.studentExams",1,"d-none","d-md-inline"],["jhiTranslate","artemisApp.examManagement.assessmentDashboard",1,"d-none","d-md-inline"],[1,"btn","btn-warning","btn-sm","me-1","mb-1","d-flex","align-items-center","justify-content-center",3,"routerLink"],["jhiTranslate","entity.action.edit",1,"d-none","d-md-inline"],[1,"btn","btn-info","btn-sm","me-1","mb-1","assessment-dashboard",3,"routerLink"],["jhiTranslate","artemisApp.examManagement.testRun.testRun",1,"d-none","d-md-inline"],[1,"btn","btn-info","btn-sm","me-1","mb-1","assessment-dashboard",3,"routerLink","id"],["jhiTranslate","artemisApp.examManagement.students",1,"d-none","d-md-inline"],[1,"btn","btn-info","btn-sm","me-1","mb-1",3,"routerLink"],["jhiTranslate","entity.action.scores",1,"d-none","d-md-inline"],[1,"btn","btn-info","btn-sm","me-1","mb-1",3,"routerLink","id"],["jhiTranslate","artemisApp.examManagement.examChecklist",1,"d-none","d-md-inline"]],template:function(s,d){s&1&&p(0,Je,17,3),s&2&&l(d.course?0:-1)},dependencies:[D,gt,N,et,At,kt,Rt],styles:[".exam-management-button-section[_ngcontent-%COMP%]{min-width:150px}"]})}return e})();export{Fi as ExamManagementComponent};
//# sourceMappingURL=exam-management.component-66UV4TJE.js.map

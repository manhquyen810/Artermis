import{a as Ht}from"./chunk-3K3H4QXB.js";import{a as Gt}from"./chunk-VAR4Y7O3.js";import{a as zt}from"./chunk-62MHDQHX.js";import{a as Lt}from"./chunk-JMXR2R6B.js";import{a as Ut}from"./chunk-LPGL4A37.js";import{b as Bt}from"./chunk-5XX2X5VF.js";import{a as Ft,b as jt}from"./chunk-A4MOLMZQ.js";import{a as kt,b as Nt}from"./chunk-VOBYQYWS.js";import{a as j}from"./chunk-QGGSPP32.js";import{a as Ot}from"./chunk-DMHWBHTD.js";import{a as Mt}from"./chunk-HGMQBA4T.js";import{a as Et,b as At}from"./chunk-KIXGOQMJ.js";import{a as Rt}from"./chunk-UBFIUABE.js";import{a as wt}from"./chunk-KNK6NHCW.js";import{a as Dt}from"./chunk-MVBHDJDH.js";import{c as It}from"./chunk-CCVWGTN5.js";import{a as Tt}from"./chunk-YSX3GO3R.js";import{a as Pt}from"./chunk-QU4DXSXD.js";import{a as St}from"./chunk-MNX6OTP5.js";import{a as bt}from"./chunk-DIZEKHOC.js";import{b as yt}from"./chunk-22YQSX6Z.js";import{a as vt}from"./chunk-R56P6PAY.js";import{a as _t}from"./chunk-KYCCMZSV.js";import{e as he,f as F}from"./chunk-DXTZ4GAW.js";import{a as Ct}from"./chunk-245YX7R6.js";import{a as gt}from"./chunk-OTCBNILH.js";import{a as ht}from"./chunk-HQTS6JOY.js";import{a as ft}from"./chunk-MP6UGYTC.js";import{a as ct}from"./chunk-JHBUBEY6.js";import{a as $,c as tt,e as ue,f as V,i as it,l as nt,y as rt}from"./chunk-R2SUWIPY.js";import{a as L}from"./chunk-5JBXU6VG.js";import{a as mt}from"./chunk-QA7Y7QBM.js";import{b as ut,d as dt}from"./chunk-ZPITQMA6.js";import{a as pt}from"./chunk-AZBLKUAM.js";import{c as xe,e as se}from"./chunk-CK7FH6VF.js";import{g as st}from"./chunk-PUNMJFMR.js";import{a as ot}from"./chunk-G4I63THF.js";import{a as O}from"./chunk-PZ7IDTIM.js";import{f as fe}from"./chunk-CT44YL7Q.js";import{c as B}from"./chunk-JNO6DNVW.js";import{f as de}from"./chunk-EELXLOHY.js";import{F as Ge,K as te,L as He,o as Be,q as Fe,r as je,s as Ne,u as Ue,v as ze}from"./chunk-VZRSC3LP.js";import{K as ee,c as Me,h as Y,i as Oe,k as Le,m as J,n as ke}from"./chunk-WA5GEAJB.js";import{r as at,v as lt}from"./chunk-VK7JPHFE.js";import{c as et}from"./chunk-BNDLMKXK.js";import{a as k}from"./chunk-K3W6YFKH.js";import{c as D}from"./chunk-JXJXC4DZ.js";import{d as xt}from"./chunk-EDXSOKK5.js";import{b as oe}from"./chunk-R5BZWVRQ.js";import{p as y}from"./chunk-DID2YGL7.js";import{a as ne,c as _,f as pe,h as Ye,k as Je}from"./chunk-CXQURQM5.js";import{A as ce,Sc as Ze,Ua as Qe,Vb as me,hb as ie,ic as Ke,nb as W,qd as Xe,r as Ve,rb as qe}from"./chunk-Z4VHWOB5.js";import{a as $e}from"./chunk-HKBU2OOC.js";import{a as T}from"./chunk-U54OSGNH.js";import{f as M,h as Z,i as X}from"./chunk-M6Z6DKZQ.js";import{c as We}from"./chunk-E2KBL4LX.js";import{E as K,n as R,t as Re}from"./chunk-IOA4DPXY.js";import{A as Ce,Ac as Pe,Ad as we,Bc as De,Db as o,Dc as w,Ea as d,Ed as q,L as _e,La as be,Ma as E,Mc as P,Na as A,Oc as p,Rc as Te,Tb as g,Xb as Ie,Zb as x,aa as ve,cd as v,dd as t,ed as S,fd as Q,kc as m,ld as re,ma as ye,md as ae,nd as le,pd as Ee,qd as Ae,rd as b,sc as u,sd as H,uc as U,vc as z,wb as Se,wc as G,xc as r,yc as a,yd as f,zc as c,zd as C}from"./chunk-5LC5EQRR.js";import{j as ge}from"./chunk-3E746U5Y.js";var Wt={settingsKey:"programming_exercise_fail_tour",resetParticipation:ue.EXERCISE_PARTICIPATION,steps:[new V({highlightSelector:"jhi-programming-exercise-instructions-task-status .guided-tour.failed",headlineTranslateKey:"tour.programmingExercise.testFailure.headline",contentTranslateKey:"tour.programmingExercise.testFailure.content",highlightPadding:20,orientation:$.RIGHT,skipStepIfNoSelector:!0}),new it({highlightSelector:"jhi-programming-exercise-instructions-task-status .text-danger.guided-tour.test-status--linked",headlineTranslateKey:"tour.programmingExercise.testFailure.headline",contentTranslateKey:"tour.programmingExercise.testFailure.content",highlightPadding:5,orientation:$.RIGHT,userInteractionEvent:tt.CLICK,skipStepIfNoSelector:!0}),new V({highlightSelector:".modal-content",headlineTranslateKey:"tour.programmingExercise.testFailure.headline",contentTranslateKey:"tour.programmingExercise.testFailure.content",highlightPadding:20,orientation:$.BOTTOM,closeAction:()=>{nt(".modal-header .close")},skipStepIfNoSelector:!0}),new V({headlineTranslateKey:"tour.programmingExercise.resolveTasks.headline",contentTranslateKey:"tour.programmingExercise.resolveTasks.content"})]},$t={settingsKey:"programming_exercise_success_tour",resetParticipation:ue.EXERCISE_PARTICIPATION,steps:[new V({highlightSelector:".guided-tour.instructions__content__markdown",headlineTranslateKey:"tour.programmingExercise.reviewResult.headline",contentTranslateKey:"tour.programmingExercise.reviewResult.content",orientation:$.TOP})]};var Vt=(()=>{class n{translateService=d(We);translateSubscription;difficultyLevel;coloredDifficultyLevel={label:"",color:[]};ngOnInit(){this.translateSubscription=this.translateService.onLangChange.subscribe(()=>{this.mapDifficultyLevelToColors(this.difficultyLevel)}),this.coloredDifficultyLevel=this.mapDifficultyLevelToColors(this.difficultyLevel)}mapDifficultyLevelToColors(e){switch(e){case ne.EASY:return{label:this.translateService.instant("artemisApp.exercise.easy"),color:[...Array(1).fill("success"),...Array(2).fill("body")]};case ne.MEDIUM:return{label:this.translateService.instant("artemisApp.exercise.medium"),color:[...Array(2).fill("warning"),...Array(1).fill("body")]};case ne.HARD:return{label:this.translateService.instant("artemisApp.exercise.hard"),color:[...Array(3).fill("danger")]}}return{label:this.translateService.instant("artemisApp.exercise.noLevel"),color:[...Array(3).fill("body")]}}ngOnDestroy(){this.translateSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-difficulty-level"]],inputs:{difficultyLevel:"difficultyLevel"},decls:9,vars:4,consts:[["id","difficulty-level",1,"d-inline-flex","gap-1",3,"ngbTooltip"],[1,"skill-bar","rounded-end","rounded-5",3,"ngClass"],[1,"skill-bar",3,"ngClass"],[1,"skill-bar","rounded-start","rounded-5",3,"ngClass"]],template:function(i,s){i&1&&(r(0,"div",0),t(1,`
    `),c(2,"div",1),t(3,`
    `),c(4,"div",2),t(5,`
    `),c(6,"div",3),t(7,`
`),a(),t(8,`
`)),i&2&&(m("ngbTooltip",s.coloredDifficultyLevel.label),o(2),m("ngClass","bg-"+s.coloredDifficultyLevel.color[0]),o(2),m("ngClass","bg-"+s.coloredDifficultyLevel.color[1]),o(2),m("ngClass","bg-"+s.coloredDifficultyLevel.color[2]))},dependencies:[K,R,He,te],styles:[".skill-bar[_ngcontent-%COMP%]{width:1.2rem;height:.6rem}"]})}return n})();var ti=()=>({difficulty:!1,notReleased:!0,includedInScore:!0});function ii(n,l){if(n&1&&c(0,"jhi-difficulty-level",2),n&2){let e=p().$implicit;m("difficultyLevel",e.content.value)}}function ni(n,l){if(n&1&&c(0,"jhi-exercise-categories",3),n&2){let e=p().$implicit;m("exercise",e.content.value)("showTags",Ae(4,ti))("ngClass","badge-row")("isSmall",!0)}}function oi(n,l){if(n&1&&(r(0,"span",4),t(1),f(2,"artemisTimeAgo"),a()),n&2){let e=p().$implicit;m("ngClass","text-"+e.contentColor),o(),S(C(2,2,e.content.value))}}function si(n,l){if(n&1&&(r(0,"span",5),t(1),f(2,"artemisDate"),a()),n&2){let e=p().$implicit;o(),S(C(2,1,e.content.value))}}function ri(n,l){if(n&1&&c(0,"jhi-submission-result-status",6),n&2){let e=p().$implicit,i=p(2);m("exercise",e.content.value)("studentParticipation",i.studentParticipation)("triggerLastGraded",!1)("showCompletion",!1)("showBadge",!1)("showProgressBar",!0)}}function ai(n,l){if(n&1&&(r(0,"jhi-information-box",1),x(1,ii,1,1,"jhi-difficulty-level",2)(2,ni,1,5,"jhi-exercise-categories",3)(3,oi,3,4,"span",4)(4,si,3,3,"span",5)(5,ri,1,6,"jhi-submission-result-status",6),a()),n&2){let e,i=l.$implicit;m("informationBoxData",i),o(),u((e=i.content.type)==="difficultyLevel"?1:e==="categories"?2:e==="timeAgo"?3:e==="dateTime"?4:e==="submissionStatus"?5:-1)}}function li(n,l){if(n&1&&(r(0,"div",0),z(1,ai,6,2,"jhi-information-box",1,U),a()),n&2){let e=p();o(),G(e.informationBoxItems)}}var Qt=(()=>{class n{sortService=d(gt);serverDateService=d(mt);IncludedInOverallScore=pe;dayjs=y;exercise;studentParticipation;course;submissionPolicy;dueDate;programmingExercise;individualComplaintDueDate;now;achievedPoints=0;numberOfSubmissions;informationBoxItems=[];ngOnInit(){this.dueDate=F(this.exercise,this.studentParticipation),this.now=this.serverDateService.now(),this.course?.maxComplaintTimeDays&&(this.individualComplaintDueDate=j.getIndividualComplaintDueDate(this.exercise,this.course.maxComplaintTimeDays,this.studentParticipation?.results?.last(),this.studentParticipation)),this.createInformationBoxItems()}ngOnChanges(){if(this.course=this.course??Je(this.exercise),this.submissionPolicy?.active&&this.submissionPolicy?.submissionLimit&&this.updateSubmissionPolicyItem(),this.studentParticipation?.results?.length){this.sortService.sortByProperty(this.studentParticipation.results,"id",!1);let e=this.studentParticipation.results.filter(i=>i.rated).first();e&&(this.achievedPoints=fe(e.score*this.exercise.maxPoints/100,this.course)??0,this.updatePointsItem())}}createInformationBoxItems(){this.addPointsItems(),this.addDueDateItems(),this.addStartDateItem(),this.addSubmissionStatusItem(),this.addSubmissionPolicyItem(),this.addDifficultyItem(),this.addCategoryItems()}updatePointsItem(){let e=this.informationBoxItems.findIndex(i=>i.title==="artemisApp.courseOverview.exerciseDetails.points");e!==-1&&(this.informationBoxItems[e]=this.getPointsItem("points",this.exercise.maxPoints,this.achievedPoints))}addPointsItems(){let{maxPoints:e,bonusPoints:i}=this.exercise;if(e)if(i){let s=0;this.achievedPoints>e&&(s=fe(this.achievedPoints-e,this.course));let h=this.achievedPoints-s;this.informationBoxItems.push(this.getPointsItem("points",e,h)),this.informationBoxItems.push(this.getPointsItem("bonus",i,s))}else this.informationBoxItems.push(this.getPointsItem("points",e,this.achievedPoints))}addDueDateItems(){let e=this.getDueDateItem();if(e&&this.informationBoxItems.push(e),this.dueDate?.isBefore(this.now)&&this.exercise.assessmentDueDate?.isAfter(this.now)){let i={title:"artemisApp.courseOverview.exerciseDetails.assessmentDue",content:{type:"dateTime",value:this.exercise.assessmentDueDate},isContentComponent:!0,tooltip:"artemisApp.courseOverview.exerciseDetails.assessmentDueTooltip",tooltipParams:{date:this.exercise.assessmentDueDate.format("lll")}};this.informationBoxItems.push(i)}if(this.exercise.assessmentDueDate?.isBefore(this.now)&&this.individualComplaintDueDate?.isAfter(this.now)){let i={title:"artemisApp.courseOverview.exerciseDetails.complaintDue",content:{type:"dateTime",value:this.individualComplaintDueDate},isContentComponent:!0,tooltip:"artemisApp.courseOverview.exerciseDetails.complaintDueTooltip",tooltipParams:{date:this.individualComplaintDueDate.format("lll")}};this.informationBoxItems.push(i)}}getDueDateItem(){if(this.dueDate){let e=this.dueDate.isBefore(this.now),i=this.dueDate.isBetween(this.now.add(1,"day"),this.now)?"danger":"body-color",s=de(this.dueDate,this.now);return e?{title:"artemisApp.courseOverview.exerciseDetails.submissionDueOver",content:{type:"dateTime",value:this.dueDate},isContentComponent:!0}:{title:"artemisApp.courseOverview.exerciseDetails.submissionDue",content:{type:s?"timeAgo":"dateTime",value:this.dueDate},isContentComponent:!0,tooltip:s?"artemisApp.courseOverview.exerciseDetails.submissionDueTooltip":void 0,contentColor:i,tooltipParams:{date:this.dueDate?.format("lll")}}}}addStartDateItem(){if(this.exercise.startDate&&this.now.isBefore(this.exercise.startDate)){let e=de(this.exercise.startDate,this.now),i={title:"artemisApp.courseOverview.exerciseDetails.startDate",content:{type:e?"timeAgo":"dateTime",value:this.exercise.startDate},isContentComponent:!0,tooltip:e?"artemisApp.exerciseActions.startExerciseBeforeStartDate":void 0};this.informationBoxItems.push(i)}}addDifficultyItem(){if(this.exercise.difficulty){let e={title:"artemisApp.courseOverview.exerciseDetails.difficulty",content:{type:"difficultyLevel",value:this.exercise.difficulty},isContentComponent:!0};this.informationBoxItems.push(e)}}addSubmissionStatusItem(){let e={title:"artemisApp.courseOverview.exerciseDetails.status",content:{type:"submissionStatus",value:this.exercise},isContentComponent:!0};this.informationBoxItems.push(e)}addCategoryItems(){if(this.exercise.releaseDate?.isAfter(this.now)||this.exercise.includedInOverallScore!==pe.INCLUDED_COMPLETELY||this.exercise.categories?.length){let i={title:"artemisApp.courseOverview.exerciseDetails.categories",content:{type:"categories",value:this.exercise},isContentComponent:!0};this.informationBoxItems.push(i)}}addSubmissionPolicyItem(){this.submissionPolicy?.active&&this.submissionPolicy?.submissionLimit&&this.informationBoxItems.push(this.getSubmissionPolicyItem())}getSubmissionPolicyItem(){return{title:"artemisApp.programmingExercise.submissionPolicy.submissionLimitTitle",content:{type:"string",value:`${this.numberOfSubmissions} /  ${this.submissionPolicy?.submissionLimit}`},contentColor:this.submissionPolicy?.submissionLimit?this.getSubmissionColor():"body-color",tooltip:"artemisApp.programmingExercise.submissionPolicy.submissionPolicyType."+this.submissionPolicy?.type+".tooltip",tooltipParams:{points:this.submissionPolicy?.exceedingPenalty?.toString()}}}getSubmissionColor(){let e=this.submissionPolicy?.submissionLimit?this.submissionPolicy?.submissionLimit-this.numberOfSubmissions:2,i="body-color";return e===1?i="warning":e<=0&&(i="danger"),i}getPointsItem(e,i,s){return{title:"artemisApp.courseOverview.exerciseDetails."+e,content:{type:"string",value:`${s} / ${i}`}}}updateSubmissionPolicyItem(){this.countSubmissions();let e=this.informationBoxItems.findIndex(i=>i.title==="artemisApp.programmingExercise.submissionPolicy.submissionLimitTitle");e!==-1&&this.informationBoxItems.splice(e,1,this.getSubmissionPolicyItem())}countSubmissions(){let e=new Set;this.studentParticipation?.results?.map(i=>i.submission).filter(i=>i?.type==="MANUAL").map(i=>i.commitHash).forEach(i=>e.add(i)),this.numberOfSubmissions=e.size}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-exercise-headers-information"]],inputs:{exercise:"exercise",studentParticipation:"studentParticipation",course:"course",submissionPolicy:"submissionPolicy"},features:[be],decls:1,vars:1,consts:[["id","exercise-headers-information",1,"d-flex","flex-row","flex-wrap","gap-2","overflow-auto"],[3,"informationBoxData"],["contentComponent","",3,"difficultyLevel"],["contentComponent","",3,"exercise","showTags","ngClass","isSmall"],["contentComponent","",3,"ngClass"],["contentComponent",""],["contentComponent","",1,"text-truncate","result",3,"exercise","studentParticipation","triggerLastGraded","showCompletion","showBadge","showProgressBar"]],template:function(i,s){i&1&&x(0,li,3,0,"div",0),i&2&&u(s.exercise?0:-1)},dependencies:[wt,zt,Vt,Dt,B,_t,K,R],encapsulation:2})}return n})();var mi=n=>({title:n});function pi(n,l){if(n&1&&(t(0,`
        `),c(1,"button",2),f(2,"artemisTranslate"),t(3,`
    `)),n&2){let e=p(),i=v(4);o(),m("buttonIcon",e.faBackward)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",C(2,8,"artemisApp.exerciseActions.resetRepository.label"))("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)("ngbPopover",i)("autoClose","outside")}}function ui(n,l){n&1&&(t(0,`
                `),c(1,"p",9),t(2,`
            `))}function di(n,l){n&1&&(t(0,`
                `),c(1,"p",10),t(2,`
            `))}function xi(n,l){if(n&1&&(t(0,`
                `),c(1,"jhi-confirm-entity-name",11),t(2,`
            `)),n&2){let e=p(2);o(),m("entityName",e.exercise.title)}}function fi(n,l){if(n&1){let e=w();t(0,`
                    `),r(1,"button",12),P("click",function(){E(e);let s=p(2);return A(s.resetRepository(s.gradedParticipation==null?null:s.gradedParticipation.id))}),t(2,`
                        `),c(3,"span",13),t(4,`
                    `),a(),t(5,`
                `)}if(n&2){p();let e=v(2);o(),m("disabled",e.invalid)}}function hi(n,l){if(n&1){let e=w();t(0,`
        `),r(1,"form",3,1),t(3,`
            `),r(4,"h5"),t(5),f(6,"artemisTranslate"),a(),t(7,`
            `),c(8,"p",4),t(9,`
            `),x(10,ui,3,0)(11,di,3,0),r(12,"p",5),t(13,`
                Are you sure you want to delete?
            `),a(),t(14,`
            `),x(15,xi,3,1),r(16,"div",6),t(17,`
                `),r(18,"button",7),P("click",function(){E(e);let s=p();return A(s.resetRepository())}),t(19,`
                    `),c(20,"span",8),t(21,`
                `),a(),t(22,`
                `),x(23,fi,6,1),a(),t(24,`
        `),a(),t(25,`
    `)}if(n&2){let e=v(2),i=p();o(5),S(C(6,8,"artemisApp.exerciseActions.resetRepository.title"+(i.practiceParticipation?"Practice":"Graded"))),o(5),u(i.exercise.allowOfflineIde?10:-1),o(),u(i.gradedParticipation&&i.practiceParticipation?11:-1),o(),m("jhiTranslate","artemisApp.exerciseActions.resetRepository.question"+(i.practiceParticipation?"Practice":"Graded"))("translateValues",b(10,mi,i.exercise.title)),o(3),u(i.exercise.title?15:-1),o(3),m("disabled",e.invalid),o(5),u(i.gradedParticipation&&i.practiceParticipation?23:-1)}}var qt=(()=>{class n{participationService=d(se);programmingExerciseParticipationService=d(Pt);alertService=d(D);FeatureToggle=$e;INITIALIZED=ot.INITIALIZED;exercise;participations;smallButtons;gradedParticipation;practiceParticipation;beforeIndividualDueDate;faBackward=Ve;ngOnInit(){this.gradedParticipation=this.participationService.getSpecificStudentParticipation(this.participations,!1),this.practiceParticipation=this.participationService.getSpecificStudentParticipation(this.participations,!0);let e=F(this.exercise,this.gradedParticipation);this.beforeIndividualDueDate=!e||y().isBefore(e)}resetRepository(e){this.exercise.loading=!0;let i=this.practiceParticipation?.id??this.gradedParticipation?.id;this.programmingExerciseParticipationService.resetRepository(i,e).pipe(ve(()=>{this.exercise.loading=!1,this.alertService.success("artemisApp.exerciseActions.resetRepository.success"),window.scrollTo(0,0)})).subscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-reset-repo-button"]],inputs:{exercise:"exercise",participations:"participations",smallButtons:"smallButtons"},decls:7,vars:1,consts:[["popContent",""],["resetForm","ngForm"],["jhi-exercise-action-button","","placement","top-left","container","body",1,"btn-danger",3,"buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile","ngbPopover","autoClose"],[2,"max-width","660px"],["jhiTranslate","artemisApp.exerciseActions.resetRepository.explanation"],[3,"jhiTranslate","translateValues"],[1,"button-footer"],["type","submit",1,"btn","btn-danger",3,"click","disabled"],["jhiTranslate","artemisApp.exerciseActions.resetRepository.resetToTemplate"],["jhiTranslate","artemisApp.exerciseActions.resetRepository.offlineIDEExplanation"],["jhiTranslate","artemisApp.exerciseActions.resetRepository.repositoryChoice"],["confirmationText","artemisApp.exerciseActions.resetRepository.typeNameToConfirm","warningTextColor","text-danger","name","confirmExerciseName","ngModel","",3,"entityName"],["type","submit",1,"btn","btn-danger","ms-2",3,"click","disabled"],["jhiTranslate","artemisApp.exerciseActions.resetRepository.resetToGradedParticipation"]],template:function(i,s){i&1&&(Pe(0),t(1,`
    `),x(2,pi,4,10)(3,hi,26,12,"ng-template",null,0,q),t(5,`
`),De(),t(6,`
`)),i&2&&(o(2),u((s.practiceParticipation==null?null:s.practiceParticipation.initializationState)===s.INITIALIZED&&!s.beforeIndividualDueDate||(s.gradedParticipation==null?null:s.gradedParticipation.initializationState)===s.INITIALIZED&&s.beforeIndividualDueDate?2:-1))},dependencies:[Tt,ft,Ge,ee,ke,Y,Oe,J,Le,T,ht,k],styles:[".button-footer[_ngcontent-%COMP%]{justify-content:flex-end;display:flex}"]})}return n})();var gi=(n,l)=>({key:"artemisApp.courseOverview.exerciseDetails.submissionDue",value:n,isDate:l}),Ci=n=>({key:"artemisApp.courseOverview.exerciseDetails.releaseDate",value:n,isDate:!0}),_i=n=>({key:"artemisApp.courseOverview.exerciseDetails.startDate",value:n,isDate:!0}),vi=n=>({key:"artemisApp.courseOverview.exerciseDetails.exampleSolutionPublicationDate",value:n,isDate:!0}),yi=n=>({key:"artemisApp.courseOverview.exerciseDetails.assessmentDue",value:n,isDate:!0}),bi=n=>({key:"artemisApp.courseOverview.exerciseDetails.complaintDue",value:n,isDate:!0}),Si=n=>({key:"artemisApp.courseOverview.exerciseDetails.complaintPossible",value:n,isDate:!1});function Ii(n,l){}function Pi(n,l){if(n&1&&(t(0,`
            `),x(1,Ii,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,Ci,e.exercise.releaseDate))}}function Di(n,l){}function Ti(n,l){if(n&1&&(t(0,`
            `),x(1,Di,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,_i,e.exercise.startDate))}}function Ei(n,l){}function Ai(n,l){}function wi(n,l){if(n&1&&(t(0,`
            `),x(1,Ai,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,vi,e.exercise.exampleSolutionPublicationDate))}}function Ri(n,l){}function Mi(n,l){if(n&1&&(t(0,`
            `),x(1,Ri,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,yi,e.exercise.assessmentDueDate))}}function Oi(n,l){}function Li(n,l){if(n&1&&(t(0,`
            `),x(1,Oi,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,bi,e.individualComplaintDueDate))}}function ki(n,l){}function Bi(n,l){if(n&1&&(t(0,`
            `),x(1,ki,0,0,"ng-template",5),t(2,`
        `)),n&2){let e=p(),i=v(19);o(),m("ngTemplateOutlet",i)("ngTemplateOutletContext",b(2,Si,e.canComplainLaterOn?"global.generic.yes":"global.generic.no"))}}function Fi(n,l){if(n&1&&(t(0,`
    `),r(1,"div",6),t(2,`
        `),r(3,"div",7),t(4),f(5,"artemisTranslate"),a(),t(6,`
        `),r(7,"div",7),t(8),f(9,"artemisDate"),f(10,"artemisTranslate"),a(),t(11,`
    `),a(),t(12,`
`)),n&2){let e=l.key,i=l.value,s=l.isDate;o(4),S(C(5,2,e)),o(4),S(s?C(9,4,i):C(10,6,i))}}var Kt=(()=>{class n{exercise;studentParticipation;dueDate;individualComplaintDueDate;canComplainLaterOn;ngOnInit(){this.dueDate=F(this.exercise,this.studentParticipation),this.exercise.course?.maxComplaintTimeDays&&(this.individualComplaintDueDate=j.getIndividualComplaintDueDate(this.exercise,this.exercise.course.maxComplaintTimeDays,this.studentParticipation?.results?.last(),this.studentParticipation)),this.canComplainLaterOn=(this.dueDate&&y().isBefore(this.dueDate)||!!this.studentParticipation?.submissionCount&&!this.individualComplaintDueDate)&&(this.exercise.allowComplaintsForAutomaticAssessments||this.exercise.assessmentType!==O.AUTOMATIC)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-exercise-info"]],inputs:{exercise:"exercise",studentParticipation:"studentParticipation"},decls:21,vars:11,consts:[["exerciseInfoItem",""],[1,"panel-wrapper","col-12","col-xxl-8"],["jhiTranslate","artemisApp.exercise.details",1,"panel-header"],[1,"vertLine"],[1,"panel-body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"row","mb-1"],[1,"col-6"]],template:function(i,s){if(i&1&&(r(0,"div",1),t(1,`
    `),c(2,"div",2),t(3,`
    `),c(4,"div",3),t(5,`
    `),r(6,"div",4),t(7,`
        `),x(8,Pi,3,4)(9,Ti,3,4)(10,Ei,0,0,"ng-template",5),t(11,`
        `),x(12,wi,3,4)(13,Mi,3,4)(14,Li,3,4)(15,Bi,3,4),a(),t(16,`
`),a(),t(17,`

`),x(18,Fi,13,8,"ng-template",null,0,q),t(20,`
`)),i&2){let h=v(19);o(8),u(s.exercise.releaseDate?8:-1),o(),u(s.exercise.startDate?9:-1),o(),m("ngTemplateOutlet",h)("ngTemplateOutletContext",H(8,gi,s.dueDate?s.dueDate:"artemisApp.courseOverview.exerciseList.noDueDate",!!s.dueDate)),o(2),u(s.exercise.exampleSolutionPublicationDate?12:-1),o(),u(s.exercise.assessmentDueDate?13:-1),o(),u(s.individualComplaintDueDate?14:-1),o(),u(s.dueDate&&!s.individualComplaintDueDate?15:-1)}},dependencies:[T,Re,B,k],styles:[".panel-wrapper[_ngcontent-%COMP%]{border:1px solid var(--overview-blue-border-color);border-radius:3px}.panel-wrapper[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:10px 10px 10px 15px;font-size:16px}.panel-wrapper[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{padding:8px 15px}.panel-wrapper[_ngcontent-%COMP%]   .vertLine[_ngcontent-%COMP%]{height:1px;background-color:var(--overview-blue-border-color)}"]})}return n})();var Zt=(()=>{class n{activeModal=d(Ue);alertService=d(D);router=d(Z);activatedRoute=d(M);password;loginName;passwordResetLocation=["account","reset","request"];readAndUnderstood=!1;clear(){this.alertService.info("artemisApp.lti.startExercise"),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{initialize:null},queryParamsHandling:"merge"}),this.activeModal.dismiss()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-lti-initializer-modal"]],decls:57,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["jhiTranslate","artemisApp.lti.initialization.header"],[1,"modal-body"],["jhiTranslate","artemisApp.lti.initialization.body.welcome"],[1,"d-flex","mb-3","mt-3"],["for","userLoginName",1,"col-sm-2","col-form-label"],["jhiTranslate","artemisApp.lti.initialization.body.loginLabel"],["id","userLoginName","type","text","disabled","",1,"form-control",3,"ngModelChange","ngModel"],[3,"copyText"],["for","userPassword",1,"col-sm-2","col-form-label"],["jhiTranslate","artemisApp.lti.initialization.body.passwordLabel"],["id","userPassword","type","text","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.lti.initialization.body.passwordHint"],["target","_blank","jhiTranslate","artemisApp.lti.initialization.body.passwordChange",3,"routerLink"],["type","checkbox",1,"form-check-input",3,"change","checked"],["jhiTranslate","artemisApp.lti.initialization.body.readAndUnderstood"],["type","button","data-dismiss","modal","jhiTranslate","artemisApp.lti.initialization.body.confirm",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,s){i&1&&(r(0,"div"),t(1,`
    `),r(2,"div",0),t(3,`
        `),r(4,"h4",1),c(5,"span",2),a(),t(6,`
    `),a(),t(7,`
    `),r(8,"div",3),t(9,`
        `),c(10,"span",4),t(11,`
        `),r(12,"div",5),t(13,`
            `),r(14,"label",6),t(15," "),c(16,"span",7),t(17,": "),a(),t(18,`
            `),r(19,"input",8),le("ngModelChange",function(I){return ae(s.loginName,I)||(s.loginName=I),I}),a(),t(20,`
            `),c(21,"jhi-copy-icon-button",9),t(22,`
        `),a(),t(23,`
        `),r(24,"div",5),t(25,`
            `),r(26,"label",10),t(27," "),c(28,"span",11),t(29,": "),a(),t(30,`
            `),r(31,"input",12),le("ngModelChange",function(I){return ae(s.password,I)||(s.password=I),I}),a(),t(32,`
            `),c(33,"jhi-copy-icon-button",9),t(34,`
        `),a(),t(35,`
        `),r(36,"p"),t(37,`
            `),r(38,"span",13),t(39,`
                Make sure to remember your password as you will need it to log in manually or connect with our services for programming exercises.`),c(40,"br"),t(41,`
                If you forget your password, you can reset it on the login page. You can also change your password now:
            `),a(),t(42,`
            `),c(43,"a",14),t(44,`
        `),a(),t(45,`
        `),r(46,"p"),t(47,`
            `),r(48,"input",15),P("change",function(){return s.readAndUnderstood=!s.readAndUnderstood}),a(),t(49,`
            `),c(50,"strong",16),t(51,`
        `),a(),t(52,`
        `),r(53,"button",17),P("click",function(){return s.clear()}),a(),t(54,`
    `),a(),t(55,`
`),a(),t(56,`
`)),i&2&&(o(19),re("ngModel",s.loginName),o(2),m("copyText",s.loginName),o(10),re("ngModel",s.password),o(2),m("copyText",s.password),o(10),m("routerLink",s.passwordResetLocation),o(5),m("checked",s.readAndUnderstood),o(5),m("disabled",!s.readAndUnderstood))},dependencies:[T,ee,Me,Y,J,Ct,X],encapsulation:2})}return n})();var Xt=(()=>{class n{modalService=d(ze);userService=d(pt);alertService=d(D);router=d(Z);activatedRoute=d(M);accountService=d(oe);modalRef;ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{e.initialize!==void 0&&this.userService.initializeLTIUser().subscribe(i=>{let s=i.body?.password;if(!s){this.alertService.info("artemisApp.lti.initializationError"),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{initialize:null},queryParamsHandling:"merge"});return}this.modalRef=this.modalService.open(Zt,{size:"lg",backdrop:"static",keyboard:!1}),this.modalRef.componentInstance.loginName=this.accountService.userIdentity?.login,this.modalRef.componentInstance.password=s})})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-lti-initializer"]],decls:0,vars:0,template:function(i,s){},encapsulation:2})}return n})();var ji=n=>({"content-height-dev":n}),Yt=(n,l)=>["/courses",n,"plagiarism-cases",l];function Ni(n,l){if(n&1&&(t(0,`
                                        `),c(1,"fa-icon",22),t(2,`
                                    `)),n&2){let e=p().$implicit;o(),m("fixedWidth",!0)("icon",e.icon)}}function Ui(n,l){if(n&1&&(t(0,`
                                `),r(1,"a",20),t(2,`
                                    `),x(3,Ni,3,2),c(4,"span",21),t(5,`
                                `),a(),t(6,`
                            `)),n&2){let e=l.$implicit;o(),m("routerLink",e.routerLink),o(2),u(e.icon?3:-1),o(),m("jhiTranslate",e.translation)}}function zi(n,l){if(n&1&&(t(0,`
                    `),r(1,"div",15),t(2,`
                        `),r(3,"button",16),t(4,`
                            `),c(5,"fa-icon",17),t(6,`
                            `),r(7,"span",18),t(8),f(9,"artemisTranslate"),a(),t(10,`
                        `),a(),t(11,`
                        `),r(12,"div",19),t(13,`
                            `),z(14,Ui,7,3,null,null,U),a(),t(16,`
                    `),a(),t(17,`
                `)),n&2){let e=p(2);o(5),m("icon",e.faWrench),o(3),Q(`
                                `,C(9,2,"artemisApp.courseOverview.exerciseDetails.instructorActions.title"+(e.exercise.isAtLeastInstructor?"":"Tutor")),""),o(6),G(e.instructorActionItems)}}function Gi(n,l){n&1&&(t(0,`
                            `),c(1,"span",24),t(2,`
                        `))}function Hi(n,l){n&1&&(t(0,`
                            `),c(1,"span",25),t(2,`
                        `))}function Wi(n,l){if(n&1&&(t(0,`
                    `),r(1,"a",23),t(2,`
                        `),x(3,Gi,3,0)(4,Hi,3,0),a(),t(5,`
                `)),n&2){let e=p(2);o(),m("routerLink",H(3,Yt,e.courseId,e.plagiarismCaseInfo.id)),o(2),u(e.plagiarismCaseInfo!=null&&e.plagiarismCaseInfo.createdByContinuousPlagiarismControl?-1:3),o(),u(e.plagiarismCaseInfo!=null&&e.plagiarismCaseInfo.createdByContinuousPlagiarismControl?4:-1)}}function $i(n,l){if(n&1&&(t(0,`
                                                `),r(1,"h4",35),t(2),f(3,"artemisDate"),a(),t(4,`
                                            `)),n&2){let e=p().$implicit;o(2),Q(`
                                                    `,we(3,1,e.submission.submissionDate,"long-date"),`
                                                `)}}function Vi(n,l){if(n&1&&(t(0,`
                                        `),r(1,"div"),t(2,`
                                            `),x(3,$i,5,4),c(4,"jhi-result",34),t(5,`
                                        `),a(),t(6,`
                                    `)),n&2){let e=l.$implicit,i=l.$index,s=p(4);o(3),u(e.submission&&e.submission.submissionDate&&(i===0||!s.sortedHistoryResults[i-1].submission||!(s.sortedHistoryResults[i-1].submission!=null&&s.sortedHistoryResults[i-1].submission.submissionDate)||!s.dayjs(e.submission.submissionDate).isSame(s.sortedHistoryResults[i-1].submission==null?null:s.sortedHistoryResults[i-1].submission.submissionDate,"day"))?3:-1),o(),m("result",e)("showUngradedResults",!0)("showBadge",!0)("exercise",s.exercise)}}function Qi(n,l){n&1&&(t(0,`
                                        `),c(1,"div",36),t(2,`
                                    `))}function qi(n,l){if(n&1&&(t(0,`
                            `),r(1,"div",30),t(2,`
                                `),r(3,"div",27),t(4,`
                                    `),c(5,"h3",32),t(6,`
                                `),a(),t(7,`
                            `),a(),t(8,`
                            `),r(9,"div",10),t(10,`
                                `),r(11,"div",33),t(12,`
                                    `),z(13,Vi,7,5,null,null,U),x(15,Qi,3,0),a(),t(16,`
                            `),a(),t(17,`
                        `)),n&2){let e=p(3);o(13),G(e.sortedHistoryResults),o(2),u(e.sortedHistoryResults?-1:15)}}function Ki(n,l){if(n&1){let e=w();t(0,`
                    `),r(1,"div",10),t(2,`
                        `),r(3,"div",26),t(4,`
                            `),r(5,"div",27),t(6,`
                                `),c(7,"h3",28),t(8,`
                            `),a(),t(9,`
                        `),a(),t(10,`
                        `),r(11,"div",10),t(12,`
                            `),c(13,"jhi-result-history",29),t(14,`
                        `),a(),t(15,`
                        `),r(16,"div",30),t(17,`
                            `),r(18,"div",27),t(19,`
                                `),r(20,"a",31),P("click",function(){E(e);let s=p(2);return A(s.showMoreResults=!s.showMoreResults)}),t(21),f(22,"artemisTranslate"),c(23,"fa-icon",17),t(24,`
                                `),a(),t(25,`
                            `),a(),t(26,`
                        `),a(),t(27,`
                        `),x(28,qi,18,1),a(),t(29,`
                `)}if(n&2){let e=p(2);o(13),m("results",e.sortedHistoryResults)("exercise",e.exercise),o(8),Q(`
                                    `,C(22,5,"artemisApp.courseOverview.exerciseDetails."+(e.showMoreResults?"hideResults":"showResults")),`
                                    `),o(2),m("icon",e.showMoreResults?e.faAngleUp:e.faAngleDown),o(5),u(e.showMoreResults?28:-1)}}function Zi(n,l){if(n&1&&(t(0,`
                    `),c(1,"jhi-reset-repo-button",37),t(2,`
                `)),n&2){let e=p(2);o(),m("exercise",e.exercise)("participations",e.exercise.studentParticipations)("smallButtons",!1)}}function Xi(n,l){if(n&1&&(t(0,`
                                `),r(1,"dd"),t(2,`
                                    `),c(3,"jhi-modeling-editor",42),t(4,`
                                `),a(),t(5,`
                            `)),n&2){let e=p(4);o(3),m("readOnly",!0)("diagramType",e.exampleSolutionInfo==null||e.exampleSolutionInfo.modelingExercise==null?null:e.exampleSolutionInfo.modelingExercise.diagramType)("umlModel",e.exampleSolutionInfo==null?null:e.exampleSolutionInfo.exampleSolutionUML)("withExplanation",!!(!(e.exampleSolutionInfo==null||e.exampleSolutionInfo.modelingExercise==null)&&e.exampleSolutionInfo.modelingExercise.exampleSolutionExplanation))("explanation",(e.exampleSolutionInfo==null||e.exampleSolutionInfo.modelingExercise==null?null:e.exampleSolutionInfo.modelingExercise.exampleSolutionExplanation)||"")}}function Yi(n,l){if(n&1&&(t(0,`
                                `),c(1,"dd",43),t(2,`
                            `)),n&2){let e=p(4);o(),m("innerHTML",e.exampleSolutionInfo==null?null:e.exampleSolutionInfo.exampleSolution,Se)}}function Ji(n,l){if(n&1&&(t(0,`
                                    `),r(1,"dd",44),t(2,`
                                        `),c(3,"jhi-programming-exercise-example-solution-repo-download",46),f(4,"artemisTranslate"),t(5,`
                                    `),a(),t(6,`
                                `)),n&2){let e=p(5);o(3),Te("ngbTooltip",C(4,4,"artemisApp.programmingExercise.studentDownloadTestsTooltip")),m("exerciseId",e.exercise.id)("includeTests",!0)("title","artemisApp.programmingExercise.export.downloadTestsWithExampleSolution")}}function en(n,l){if(n&1&&(t(0,`
                                `),r(1,"dd",44),t(2,`
                                    `),c(3,"jhi-programming-exercise-example-solution-repo-download",45),t(4,`
                                `),a(),t(5,`
                                `),x(6,Ji,7,6)),n&2){let e=p(4);o(3),m("exerciseId",e.exercise.id)("title","artemisApp.programmingExercise.export.downloadExampleSolution"),o(3),u(!(e.exampleSolutionInfo==null||e.exampleSolutionInfo.programmingExercise==null)&&e.exampleSolutionInfo.programmingExercise.releaseTestsWithExampleSolution?6:-1)}}function tn(n,l){if(n&1&&(t(0,`
                        `),r(1,"dl",41),t(2,`
                            `),x(3,Xi,6,5)(4,Yi,3,1)(5,en,7,3),a(),t(6,`
                    `)),n&2){let e=p(3);o(3),u(e.exampleSolutionInfo!=null&&e.exampleSolutionInfo.exampleSolutionUML&&(e.exampleSolutionInfo!=null&&e.exampleSolutionInfo.modelingExercise)?3:-1),o(),u(e.exampleSolutionInfo!=null&&e.exampleSolutionInfo.exampleSolution?4:-1),o(),u((e.exercise==null?null:e.exercise.type)===e.PROGRAMMING?5:-1)}}function nn(n,l){if(n&1){let e=w();t(0,`
                    `),r(1,"div",30),t(2,`
                        `),r(3,"div",38),P("click",function(){E(e);let s=p(2);return A(s.changeExampleSolution())}),t(4,`
                            `),c(5,"span",39),t(6,`
                            `),c(7,"fa-icon",40),t(8,`
                        `),a(),t(9,`
                    `),a(),t(10,`
                    `),x(11,tn,7,3)}if(n&2){let e=p(2);o(7),m("icon",e.exampleSolutionCollapsed?e.faAngleDown:e.faAngleUp),o(4),u(e.exampleSolutionCollapsed?-1:11)}}function on(n,l){if(n&1&&(t(0,`
                    `),c(1,"jhi-complaint-student-view",47),t(2,`
                `)),n&2){let e=p(2);o(),m("exercise",e.exercise)("participation",e.gradedStudentParticipation)("result",e.resultWithComplaint?e.resultWithComplaint:e.latestRatedResult)}}function sn(n,l){if(n&1&&(t(0,`
                    `),r(1,"div",10),t(2,`
                        `),c(3,"jhi-rating",48),t(4,`
                    `),a(),t(5,`
                `)),n&2){let e=p(2);o(3),m("result",e.latestRatedResult)}}function rn(n,l){if(n&1&&(t(0,`
                    `),c(1,"jhi-exercise-chatbot-button",49),t(2,`
                    `),t(3,`
                `)),n&2){let e=p(2);o(),m("mode",e.ChatServiceMode.EXERCISE)("isChatGptWrapper",e.isChatGptWrapper)}}function an(n,l){if(n&1&&(t(0,`
                    `),r(1,"a",50),t(2,`
                        `),c(3,"span",51),t(4,`
                    `),a(),t(5,`
                `)),n&2){let e=p(2);o(),m("routerLink",H(1,Yt,e.courseId,e.plagiarismCaseInfo==null?null:e.plagiarismCaseInfo.id))}}function ln(n,l){if(n&1&&(t(0,`
                    `),c(1,"jhi-discussion-section",52),t(2,`
                `)),n&2){let e=p(2);o(),m("exercise",e.exercise)}}function cn(n,l){if(n&1&&(t(0,`
    `),r(1,"div",0),t(2,`
        `),r(3,"div",1),t(4,`
            `),r(5,"div",2),t(6,`
                `),r(7,"h5",3),c(8,"fa-icon",4),t(9),a(),t(10,`
            `),a(),t(11,`
            `),r(12,"div",5),t(13,`
                `),x(14,zi,18,4),c(15,"jhi-exercise-details-student-actions",6),t(16,`
                `),x(17,Wi,6,6),a(),t(18,`
        `),a(),t(19,`

        `),c(20,"hr",7),t(21,`
        `),r(22,"div",8),t(23,`
            `),c(24,"jhi-exercise-headers-information",9),t(25,`
        `),a(),t(26,`

        `),t(27,`
        `),r(28,"div",10),t(29,`
            `),r(30,"div",11),t(31,`
                `),t(32,`
                `),x(33,Ki,30,7),c(34,"jhi-problem-statement",12),t(35,`
                `),x(36,Zi,3,3)(37,nn,12,2),c(38,"jhi-exercise-info",13),t(39,`
                `),x(40,on,3,3)(41,sn,6,1)(42,rn,4,2)(43,an,6,4),a(),t(44,`
            `),r(45,"div",14),t(46,`
                `),x(47,ln,3,1),a(),t(48,`
        `),a(),t(49,`
        `),c(50,"jhi-lti-initializer"),t(51,`
    `),a(),t(52,`
`)),n&2){let e,i=p();o(),m("ngClass",b(23,ji,!i.isProduction||i.isTestServer)),o(7),m("icon",i.exerciseIcon),o(),S(i.exercise.title),o(5),u(i.exercise.isAtLeastTutor?14:-1),o(),m("courseId",i.courseId)("exercise",i.exercise),o(2),u(i.plagiarismCaseInfo&&i.plagiarismCaseInfo.verdict!==i.PlagiarismVerdict.NO_PLAGIARISM?17:-1),o(7),m("exercise",i.exercise)("studentParticipation",i.gradedStudentParticipation)("submissionPolicy",i.submissionPolicy)("course",i.exercise.course),o(9),u(i.sortedHistoryResults!=null&&i.sortedHistoryResults.length&&i.sortedHistoryResults.length>1||!(i.practiceStudentParticipation==null||i.practiceStudentParticipation.results==null)&&i.practiceStudentParticipation.results.length?33:-1),o(),m("exercise",i.exercise)("participation",(e=i.practiceStudentParticipation)!==null&&e!==void 0?e:i.gradedStudentParticipation),o(2),u(i.exercise.type===i.PROGRAMMING&&i.exercise.studentParticipations&&i.exercise.studentParticipations.length?36:-1),o(),u(i.exampleSolutionInfo!=null&&i.exampleSolutionInfo.exampleSolutionPublished?37:-1),o(),m("exercise",i.exercise)("studentParticipation",i.gradedStudentParticipation),o(2),u(i.exercise&&i.exercise.type===i.PROGRAMMING&&i.gradedStudentParticipation&&i.latestRatedResult&&(i.latestRatedResult.assessmentType===i.AssessmentType.MANUAL||i.latestRatedResult.assessmentType===i.AssessmentType.SEMI_AUTOMATIC||i.allowComplaintsForAutomaticAssessments)?40:-1),o(),u((i.exercise==null?null:i.exercise.type)===i.PROGRAMMING&&i.gradedStudentParticipation&&i.latestRatedResult&&(i.latestRatedResult.assessmentType===i.AssessmentType.MANUAL||i.latestRatedResult.assessmentType===i.AssessmentType.SEMI_AUTOMATIC)?41:-1),o(),u(i.exercise.type===i.PROGRAMMING&&!i.exercise.exerciseGroup&&(!(i.irisSettings==null||i.irisSettings.irisChatSettings==null)&&i.irisSettings.irisChatSettings.enabled)?42:-1),o(),u((i.plagiarismCaseInfo==null?null:i.plagiarismCaseInfo.verdict)===i.PlagiarismVerdict.NO_PLAGIARISM?43:-1),o(4),u(i.exercise.course&&(i.isCommunicationEnabled(i.exercise.course)||i.isMessagingEnabled(i.exercise.course))?47:-1)}}var Qs=(()=>{class n extends At{exerciseService=d(xe);participationWebsocketService=d(ct);participationService=d(se);route=d(M);profileService=d(et);guidedTourService=d(rt);alertService=d(D);teamService=d(St);quizExerciseService=d(Ot);complaintService=d(j);artemisMarkdown=d(bt);accountService=d(oe);AssessmentType=O;PlagiarismVerdict=Mt;QuizStatus=L;QUIZ_ENDED_STATUS=[L.CLOSED,L.OPEN_FOR_PRACTICE];QUIZ_EDITABLE_STATUS=[L.VISIBLE,L.INVISIBLE];QUIZ=_.QUIZ;PROGRAMMING=_.PROGRAMMING;MODELING=_.MODELING;TEXT=_.TEXT;FILE_UPLOAD=_.FILE_UPLOAD;dayjs=y;ChatServiceMode=Bt;isCommunicationEnabled=ut;isMessagingEnabled=dt;isChatGptWrapper=!1;learningPathMode=!1;exerciseId;courseId;exercise;resultWithComplaint;latestRatedResult;complaint;showMoreResults=!1;sortedHistoryResults;participationUpdateListener;teamAssignmentUpdateListener;submissionSubscription;studentParticipations=[];gradedStudentParticipation;practiceStudentParticipation;isAfterAssessmentDueDate;allowComplaintsForAutomaticAssessments;baseResource;submissionPolicy;exampleSolutionCollapsed;plagiarismCaseInfo;irisSettings;paramsSubscription;profileSubscription;isProduction=!0;isTestServer=!1;instructorActionItems=[];exerciseIcon;exampleSolutionInfo;faBook=Xe;faEye=W;faWrench=ie;faTable=ce;faListAlt=me;faAngleDown=Ke;faAngleUp=Ze;constructor(){super(Et.EXERCISE__OPEN)}ngOnInit(){let e=this.route.parent?.parent?.params,i=this.route.params;e&&(this.paramsSubscription=Ce([e,i]).subscribe(([s,h])=>{let I=this.exerciseId!==parseInt(h.exerciseId,10),Jt=this.courseId!==parseInt(s.courseId,10);this.learningPathMode||(this.exerciseId=parseInt(h.exerciseId,10),this.courseId=parseInt(s.courseId,10)),(I||Jt)&&this.loadExercise(),this.exerciseId&&this.setResourceId(this.exerciseId),this.logEvent()})),this.profileSubscription=this.profileService.getProfileInfo()?.subscribe(s=>{this.isProduction=s?.inProduction,this.isTestServer=s.testServer??!1})}loadExercise(){this.irisSettings=void 0,this.studentParticipations=this.participationWebsocketService.getParticipationsForExercise(this.exerciseId),this.updateStudentParticipations(),this.resultWithComplaint=st(this.gradedStudentParticipation?.results),this.exerciseService.getExerciseDetails(this.exerciseId).subscribe(e=>{this.handleNewExercise(e.body),this.loadComplaintAndLatestRatedResult()})}handleNewExercise(e){if(this.exercise=e.exercise,this.exercise.problemStatement?.includes(lt)&&this.accountService.identity().then(i=>{this.isChatGptWrapper=i&&i.id?i.id%3==0:!1}),this.filterUnfinishedResults(this.exercise.studentParticipations),this.mergeResultsAndSubmissionsForParticipations(),this.isAfterAssessmentDueDate=!this.exercise.assessmentDueDate||y().isAfter(this.exercise.assessmentDueDate),this.allowComplaintsForAutomaticAssessments=!1,this.plagiarismCaseInfo=e.plagiarismCaseInfo,this.exercise.type===_.PROGRAMMING){let i=this.exercise,s=!this.exercise.dueDate||he(this.exercise,this.gradedStudentParticipation)&&(!i.buildAndTestStudentSubmissionsAfterDueDate||y().isAfter(i.buildAndTestStudentSubmissionsAfterDueDate));this.allowComplaintsForAutomaticAssessments=!!i.allowComplaintsForAutomaticAssessments&&s,this.submissionPolicy=i.submissionPolicy,this.profileService.getProfileInfo().subscribe(h=>{h?.activeProfiles?.includes(at)&&(this.irisSettings=e.irisSettings)})}this.showIfExampleSolutionPresent(e.exercise),this.subscribeForNewResults(),this.subscribeToTeamAssignmentUpdates(),this.baseResource=`/course-management/${this.courseId}/${this.exercise.type}-exercises/${this.exercise.id}/`,this.exercise?.type&&(this.exerciseIcon=Ye(this.exercise?.type)),this.createInstructorActions()}showIfExampleSolutionPresent(e){this.exampleSolutionInfo=xe.extractExampleSolutionInfo(e,this.artemisMarkdown),this.exampleSolutionCollapsed=!!e?.isAtLeastTutor}filterUnfinishedResults(e){e?.forEach(i=>{i.results&&(i.results=i.results.filter(s=>s.completionDate))})}sortResults(){this.studentParticipations?.length&&(this.studentParticipations.forEach(e=>e.results?.sort(this.resultSortFunction)),this.sortedHistoryResults=this.studentParticipations.flatMap(e=>e.results??[]).sort(this.resultSortFunction).filter(e=>!(e.assessmentType===O.AUTOMATIC_ATHENA&&!e.successful)))}resultSortFunction=(e,i)=>{let s=y(e.completionDate).valueOf(),h=y(i.completionDate).valueOf();return s-h};mergeResultsAndSubmissionsForParticipations(){this.exercise?.studentParticipations?.length?(this.studentParticipations=this.participationService.mergeStudentParticipations(this.exercise.studentParticipations),this.exercise.studentParticipations=this.studentParticipations,this.updateStudentParticipations(),this.sortResults(),this.studentParticipations.forEach(e=>e.exercise=this.exercise)):this.studentParticipations?.length&&this.exercise&&(this.exercise.studentParticipations=this.studentParticipations)}subscribeForNewResults(){this.exercise&&this.studentParticipations?.length&&(this.studentParticipations.forEach(e=>{this.participationWebsocketService.addParticipation(e,this.exercise)}),this.latestRatedResult&&(this.latestRatedResult.successful?this.guidedTourService.enableTourForExercise(this.exercise,$t,!0):this.guidedTourService.enableTourForExercise(this.exercise,Wt,!0))),this.participationUpdateListener?.unsubscribe(),this.participationUpdateListener=this.participationWebsocketService.subscribeForParticipationChanges().pipe(ye(1)).subscribe(e=>{e&&this.exercise&&e.exercise?.id===this.exercise.id&&(e.exercise?.dueDate&&he(e.exercise,e)&&e.id===this.gradedStudentParticipation?.id&&(e.results?.length||0)>(this.gradedStudentParticipation?.results?.length||0)&&this.alertService.success("artemisApp.exercise.lateSubmissionResultReceived"),((e.results?.length||0)>(this.gradedStudentParticipation?.results?.length||0)||e.results?.last()?.completionDate===void 0)&&e.results?.last()?.assessmentType===O.AUTOMATIC_ATHENA&&e.results?.last()?.successful!==void 0&&(e.results?.last()?.successful===!0?this.alertService.success("artemisApp.exercise.athenaFeedbackSuccessful"):this.alertService.error("artemisApp.exercise.athenaFeedbackFailed")),this.studentParticipations?.some(i=>i.id===e.id)?this.exercise.studentParticipations=this.studentParticipations.map(i=>i.id===e.id?e:i):this.exercise.studentParticipations=[...this.studentParticipations,e],this.updateStudentParticipations(),this.mergeResultsAndSubmissionsForParticipations())})}updateStudentParticipations(){this.gradedStudentParticipation=this.participationService.getSpecificStudentParticipation(this.studentParticipations,!1),this.practiceStudentParticipation=this.participationService.getSpecificStudentParticipation(this.studentParticipations,!0)}subscribeToTeamAssignmentUpdates(){return ge(this,null,function*(){this.teamAssignmentUpdateListener=(yield this.teamService.teamAssignmentUpdates).pipe(_e(({exerciseId:e})=>e===this.exercise?.id)).subscribe(e=>{this.exercise.studentAssignedTeamId=e.teamId,this.exercise.studentParticipations=e.studentParticipations})})}exerciseRatedBadge(e){return e.rated?"bg-success":"bg-info"}get hasMoreResults(){return!this.studentParticipations?.length||!this.sortedHistoryResults.length?!1:this.sortedHistoryResults.length>Ft}loadComplaintAndLatestRatedResult(){if(!this.gradedStudentParticipation?.submissions?.[0]||!this.sortedHistoryResults?.length||(this.complaintService.findBySubmissionId(this.gradedStudentParticipation.submissions[0].id).subscribe({next:i=>{i.body&&(this.complaint=i.body)},error:i=>{this.onError(i.message)}}),this.exercise.type===_.MODELING||this.exercise.type===_.TEXT))return;let e=this.gradedStudentParticipation?.results?.filter(i=>i.rated).sort(this.resultSortFunction);if(e){let i=e.last();i&&(i.participation=this.gradedStudentParticipation),this.latestRatedResult=i}}get quizExerciseStatus(){if(this.exercise.type===_.QUIZ)return this.quizExerciseService.getStatus(this.exercise)}onError(e){this.alertService.error(e)}changeExampleSolution(){this.exampleSolutionCollapsed=!this.exampleSolutionCollapsed}createInstructorActions(){this.exercise?.isAtLeastTutor&&(this.instructorActionItems=this.createTutorActions()),this.exercise?.isAtLeastEditor&&this.instructorActionItems.push(...this.createEditorActions()),this.exercise?.isAtLeastInstructor&&this.QUIZ_ENDED_STATUS.includes(this.quizExerciseStatus)&&this.instructorActionItems.push(this.getReEvaluateItem())}createTutorActions(){let e=[...this.getDefaultItems()];return this.exercise?.type===_.QUIZ?e.push(...this.getQuizItems()):e.push(this.getParticipationItem()),e}getDefaultItems(){return[{routerLink:`${this.baseResource}`,icon:W,translation:"entity.action.view"},{routerLink:`${this.baseResource}scores`,icon:ce,translation:"entity.action.scores"}]}getQuizItems(){return[{routerLink:`${this.baseResource}preview`,icon:W,translation:"artemisApp.quizExercise.preview"},{routerLink:`${this.baseResource}solution`,icon:W,translation:"artemisApp.quizExercise.solution"}]}getParticipationItem(){return{routerLink:`${this.baseResource}participations`,icon:me,translation:"artemisApp.exercise.participations"}}createEditorActions(){let e=[];return this.exercise?.type===_.QUIZ?(e.push(this.getStatisticItem("quiz-point-statistic")),this.QUIZ_EDITABLE_STATUS.includes(this.quizExerciseStatus)&&e.push(this.getQuizEditItem())):this.exercise?.type===_.MODELING?e.push(this.getStatisticItem("exercise-statistics")):this.exercise?.type===_.PROGRAMMING&&e.push(this.getGradingItem()),e}getStatisticItem(e){return{routerLink:`${this.baseResource}${e}`,icon:qe,translation:"artemisApp.courseOverview.exerciseDetails.instructorActions.statistics"}}getGradingItem(){return{routerLink:`${this.baseResource}grading/test-cases`,icon:Qe,translation:"artemisApp.programmingExercise.configureGrading.shortTitle"}}getQuizEditItem(){return{routerLink:`${this.baseResource}edit`,icon:ie,translation:"entity.action.edit"}}getReEvaluateItem(){return{routerLink:`${this.baseResource}re-evaluate`,icon:ie,translation:"entity.action.re-evaluate"}}ngOnDestroy(){this.participationUpdateListener?.unsubscribe(),this.studentParticipations?.forEach(e=>{e.id&&this.exercise&&this.participationWebsocketService.unsubscribeForLatestResultOfParticipation(e.id,this.exercise)}),this.teamAssignmentUpdateListener?.unsubscribe(),this.submissionSubscription?.unsubscribe(),this.paramsSubscription?.unsubscribe(),this.profileSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["jhi-course-exercise-details"]],features:[Ee([vt]),Ie],decls:1,vars:1,consts:[["id","course-exercise-details",1,"px-3","scrollable-content",3,"ngClass"],[1,"d-flex","align-items-center","my-2","justify-content-between"],[1,"d-flex"],["id","exercise-header",1,"mb-0"],[1,"me-2",3,"icon"],[1,"d-flex","gap-1"],[1,"col",3,"courseId","exercise"],[1,"my-0"],[1,"my-3"],[3,"exercise","studentParticipation","submissionPolicy","course"],[1,"row"],[1,"col","flex-grow-1"],[3,"exercise","participation"],[3,"exercise","studentParticipation"],[1,"col","d-flex","flex-grow-1","justify-end",2,"max-width","min-content"],["ngbDropdown","",1,"d-inline"],["id","instructor-actions-dropdown","ngbDropdownToggle","",1,"btn","btn-secondary"],[3,"icon"],[1,"d-none","d-md-inline"],["ngbDropdownMenu","","aria-labelledby","instructor-actions-dropdown"],["ngbDropdownItem","",1,"btn",3,"routerLink"],[3,"jhiTranslate"],[1,"ms-2","me-3",3,"fixedWidth","icon"],[1,"col-auto","btn","btn-danger","btn-sm","me-2",3,"routerLink"],["jhiTranslate","artemisApp.plagiarism.plagiarismCases.plagiarismCase"],["jhiTranslate","artemisApp.plagiarism.plagiarismCases.plagiarismCaseSignificantSimilarity"],[1,"row","mb-2","mt-2","align-items-baseline","d-none","d-md-flex"],[1,"col-auto"],["jhiTranslate","artemisApp.courseOverview.exerciseDetails.recentResults"],[3,"results","exercise"],[1,"row","mb-2","mt-2","align-items-baseline"],[1,"text-primary",3,"click"],["jhiTranslate","artemisApp.courseOverview.exerciseDetails.allResults"],[1,"col-12","col-md-12"],[3,"result","showUngradedResults","showBadge","exercise"],[1,"mt-2"],["jhiTranslate","artemisApp.courseOverview.exerciseDetails.noResults",1,"no-results"],[3,"exercise","participations","smallButtons"],[1,"control-label",3,"click"],["jhiTranslate","artemisApp.exercise.exampleSolution",1,"h3","pe-2"],[1,"pe-3",3,"icon"],[1,"row-md","jh-entity-details","markdown-preview"],[3,"readOnly","diagramType","umlModel","withExplanation","explanation"],[1,"editor-outline-background",3,"innerHTML"],[1,"editor-outline-background"],[1,"ms-2",3,"exerciseId","title"],[1,"ms-2",3,"exerciseId","includeTests","title","ngbTooltip"],[1,"mb-2","mt-2","ms-3",3,"exercise","participation","result"],[1,"mt-2","alert","alert-info",3,"result"],[3,"mode","isChatGptWrapper"],[1,"btn","btn-info","btn-sm","me-2",3,"routerLink"],["jhiTranslate","artemisApp.plagiarism.plagiarismCases.resolvedPlagiarismCase"],[3,"exercise"]],template:function(i,s){i&1&&x(0,cn,53,25),i&2&&u(s.exercise?0:-1)},dependencies:[R,xt,Ne,je,Fe,Be,X,T,Rt,Qt,jt,yt,Gt,qt,It,Lt,te,Kt,Nt,kt,Ut,Ht,Xt,B,k],styles:[".course-body-container[_ngcontent-%COMP%]{position:relative}.refresh-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:flex-start;opacity:0;pointer-events:none;transition:.1s ease-out opacity}.refresh-overlay.active[_ngcontent-%COMP%]{background-color:var(--overview-refresh-overlay-bg-color);opacity:1;pointer-events:auto;transition:.2s ease-in opacity}.refresh-overlay[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{position:relative;top:calc(47.5vh - 150px);transform:translateY(-50%);color:var(--overview-refresh-overlay-color)}.back-button[_ngcontent-%COMP%]{cursor:pointer}.current-week-row[_ngcontent-%COMP%]    >div{background-color:var(--overview-light-primary-background-color)}.statistic-summary[_ngcontent-%COMP%]{margin-top:25px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:flex-end;margin-bottom:20px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-text[_ngcontent-%COMP%]{position:absolute;width:350px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]{margin-bottom:40px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]   .color-legend-entry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:100%}.exercise-row-container[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{cursor:pointer}.exercise-row-container[_ngcontent-%COMP%]   .collapsed[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid var(--overview-light-border-color)}.icon-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;horiz-align:center}.course-information[_ngcontent-%COMP%]{padding-top:29px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]{cursor:pointer;border-radius:3px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover{background-color:var(--overview-light-background-color)}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:var(--primary)}.exercise-divider[_ngcontent-%COMP%]{height:0;width:100%;margin:1rem 0 .5rem;border-top:1px solid var(--overview-light-border-color)}.color-indicator[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0f6ab4;position:relative;top:-4px;margin-right:5px;border-radius:3px}canvas#complete-chart[_ngcontent-%COMP%]{z-index:99}.dev-button[_ngcontent-%COMP%]{text-align:left;color:#fff;background-color:#3e8acc;border:none;border-radius:1px}.dev-button[_ngcontent-%COMP%]:hover{background-color:#0f6ab4}.dev-button[_ngcontent-%COMP%]:active{box-shadow:0 2px 0 var(--artemis-dark)}.dev-button[_ngcontent-%COMP%]:disabled{background-color:gray}.btn-primary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:disabled, .btn-info[_ngcontent-%COMP%], .btn-info[_ngcontent-%COMP%]:hover, .btn-success[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 768px){.col-12[_ngcontent-%COMP%]{width:100%!important}}.fadeInIcon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s;animation-iteration-count:initial}@media (max-width: 655px){.horizontal-scroll[_ngcontent-%COMP%]{overflow-x:auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}50%{opacity:.5}to{visibility:visible;opacity:1}}.exercise-content-sidebar-width[_ngcontent-%COMP%]{width:calc(100% - 263px)!important;transition:width .1s 0s ease-in-out}.exercise-content-width[_ngcontent-%COMP%]{width:100%;transition:width .1s 0s ease-in-out}"]})}return n})();export{Qs as a};
//# sourceMappingURL=chunk-V5J5J5LX.js.map

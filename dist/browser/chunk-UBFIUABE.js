import{a as Y}from"./chunk-GM5QZPKO.js";import{a as he}from"./chunk-NUC4ZXFE.js";import{a as W}from"./chunk-FLFES4R7.js";import{a as be,b as fe}from"./chunk-T4L3VFV2.js";import{a as F}from"./chunk-YSX3GO3R.js";import{e as xe,g as K,h as ge,i as _e}from"./chunk-DXTZ4GAW.js";import{a as me}from"./chunk-O26CMRR4.js";import{a as w}from"./chunk-MP6UGYTC.js";import{e as B}from"./chunk-CK7FH6VF.js";import{a as A}from"./chunk-G4I63THF.js";import{a as le}from"./chunk-PZ7IDTIM.js";import{F as G,K as ne}from"./chunk-VZRSC3LP.js";import{m as pe,t as $,u as de}from"./chunk-VK7JPHFE.js";import{c as ce}from"./chunk-BNDLMKXK.js";import{a as O}from"./chunk-K3W6YFKH.js";import{c as Q}from"./chunk-JXJXC4DZ.js";import{d as ue}from"./chunk-EDXSOKK5.js";import{p as ie}from"./chunk-DID2YGL7.js";import{c as S}from"./chunk-CXQURQM5.js";import{S as oe,nb as re,oa as H,od as se,wb as Z,za as ae}from"./chunk-Z4VHWOB5.js";import{a as L}from"./chunk-HKBU2OOC.js";import{a as D}from"./chunk-U54OSGNH.js";import{i as q}from"./chunk-M6Z6DKZQ.js";import{t as te}from"./chunk-IOA4DPXY.js";import{Ac as V,Bc as U,Cc as I,Db as o,Dc as f,Ea as C,Ed as y,La as j,Ma as _,Mc as h,Na as b,Oc as s,Tb as M,Va as N,Zb as g,aa as k,cd as v,dd as i,kc as c,mc as X,pd as J,rd as E,sc as l,sd as T,td as z,ud as ee,xc as p,yc as d,yd as m,zc as u,zd as x}from"./chunk-5LC5EQRR.js";function Ae(t,r){t&1&&(i(0,`
                `),u(1,"p",7),i(2,`
            `))}function Te(t,r){if(t&1){let e=f();i(0,`
                    `),p(1,"button",8),m(2,"artemisTranslate"),h("click",function(){_(e);let a=s(2);return b(a.startPractice(!0))}),d(),i(3,`
                `)}if(t&2){let e=s(2);o(),c("buttonIcon",e.faRedo)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(2,6,"artemisApp.exerciseActions.practiceMode.practiceWithGradedParticipation"))("buttonLoading",e.startingPracticeMode)("smallButton",e.smallButtons)("hideLabelMobile",!1)}}function Me(t,r){if(t&1){let e=f();i(0,`
        `),p(1,"div",2),i(2,`
            `),u(3,"h5",3),i(4,`
            `),u(5,"p",4),i(6,`
            `),g(7,Ae,3,0),p(8,"div",5),i(9,`
                `),p(10,"button",6),m(11,"artemisTranslate"),h("click",function(){_(e);let a=s();return b(a.startPractice(!1))}),d(),i(12,`
                `),g(13,Te,4,8),d(),i(14,`
        `),d(),i(15,`
    `)}if(t&2){let e=s();o(7),l(e.gradedStudentParticipation?7:-1),o(3),c("buttonIcon",e.faRedo)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(11,8,e.gradedStudentParticipation?"artemisApp.exerciseActions.practiceMode.practiceWithTemplate":"artemisApp.exerciseActions.practice"))("buttonLoading",e.startingPracticeMode)("smallButton",e.smallButtons)("hideLabelMobile",!1),o(3),l(e.gradedStudentParticipation?13:-1)}}var Pe=(()=>{class t{courseExerciseService=C(W);alertService=C(Q);participationService=C(B);FeatureToggle=L;smallButtons;exercise;practiceModeStarted=new N;startingPracticeMode=!1;gradedStudentParticipation;faRedo=Z;ngOnInit(){this.gradedStudentParticipation=this.participationService.getSpecificStudentParticipation(this.exercise.studentParticipations??[],!1)}startPractice(e){this.startingPracticeMode=!0,this.courseExerciseService.startPractice(this.exercise.id,e).pipe(k(()=>this.startingPracticeMode=!1)).subscribe({next:n=>{this.exercise.type===S.PROGRAMMING&&(n?.initializationState===A.INITIALIZED?this.exercise.allowOfflineIde?this.alertService.success("artemisApp.exercise.personalRepositoryClone"):this.alertService.success("artemisApp.exercise.personalRepositoryOnline"):this.alertService.error("artemisApp.exercise.startError"),n&&this.practiceModeStarted.emit(n))},error:()=>{this.alertService.error("artemisApp.exercise.startError")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["jhi-start-practice-mode-button"]],inputs:{smallButtons:"smallButtons",exercise:"exercise"},outputs:{practiceModeStarted:"practiceModeStarted"},decls:9,vars:10,consts:[["popContent",""],["jhi-exercise-action-button","","placement","right auto","container","body",3,"buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile","ngbPopover","autoClose"],[1,"start-practice-popover"],["jhiTranslate","artemisApp.exerciseActions.practiceMode.title"],["jhiTranslate","artemisApp.exerciseActions.practiceMode.explanation"],[1,"button-footer"],["jhi-exercise-action-button","",3,"click","buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile"],["jhiTranslate","artemisApp.exerciseActions.practiceMode.repositoryChoice"],["jhi-exercise-action-button","",1,"ms-2",3,"click","buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile"]],template:function(n,a){if(n&1&&(V(0),i(1,`
    `),u(2,"button",1),m(3,"artemisTranslate"),i(4,`
    `),g(5,Me,16,10,"ng-template",null,0,y),i(7,`
`),U(),i(8,`
`)),n&2){let P=v(6);o(2),c("buttonIcon",a.faRedo)("jhiFeatureToggle",a.FeatureToggle.ProgrammingExercises)("buttonLabel",x(3,8,"artemisApp.exerciseActions.practice"))("buttonLoading",a.startingPracticeMode)("smallButton",a.smallButtons)("hideLabelMobile",!1)("ngbPopover",P)("autoClose","outside")}},dependencies:[F,w,G,D,O],styles:[".button-footer[_ngcontent-%COMP%]{justify-content:flex-end;display:flex}.start-practice-popover[_ngcontent-%COMP%]{max-width:75vw}@media (min-width: 900px){.start-practice-popover[_ngcontent-%COMP%]{max-width:660px}}"]})}return t})();var ve=(t,r)=>[t,r];function Ie(t,r){if(t&1&&(i(0,`
        `),u(1,"button",2),m(2,"artemisTranslate"),i(3,`
    `)),t&2){let e=s();o(),c("id","open-exercise-"+e.exercise.id)("buttonIcon",e.faFolderOpen)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(2,8,"artemisApp.exerciseActions.openCodeEditor"))("buttonLoading",e.loading)("smallButton",e.smallButtons)("hideLabelMobile",e.hideLabelMobile)("routerLink",T(10,ve,e.courseAndExerciseNavigationUrl,e.participations[0].id))}}function ye(t,r){if(t&1&&(i(0,`
        `),u(1,"button",3),m(2,"artemisTranslate"),i(3,`
    `)),t&2){let e=s(),n=v(5);o(),c("buttonIcon",e.faFolderOpen)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(2,8,"artemisApp.exerciseActions.openCodeEditor"))("buttonLoading",e.loading)("smallButton",e.smallButtons)("hideLabelMobile",e.hideLabelMobile)("ngbPopover",n)("autoClose","outside")}}function Le(t,r){if(t&1){let e=f();i(0,`
            `),p(1,"div",4),i(2,`
                `),p(3,"input",5),h("click",function(){_(e);let a=s(2);return b(a.switchPracticeMode())}),d(),i(4,`
                `),u(5,"label",6),i(6,`
            `),d(),i(7,`
        `)}if(t&2){let e=s(2);o(3),c("checked",e.isPracticeMode)}}function Be(t,r){if(t&1&&(i(0,`
        `),g(1,Le,8,1),u(2,"button",2),m(3,"artemisTranslate"),i(4,`
    `)),t&2){let e=s();o(),l(e.participations&&e.participations.length>1?1:-1),o(),c("id","open-exercise-popover-"+e.exercise.id)("buttonIcon",e.faFolderOpen)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(3,9,"artemisApp.exerciseActions."+(e.isPracticeMode?"openPracticeCodeEditor":"openGradedCodeEditor")))("buttonLoading",e.loading)("smallButton",e.smallButtons)("hideLabelMobile",e.hideLabelMobile)("routerLink",T(11,ve,e.courseAndExerciseNavigationUrl,e.activeParticipation.id))}}var Ee=(()=>{class t{participationService=C(B);FeatureToggle=L;loading=!1;smallButtons;participations;courseAndExerciseNavigationUrlSegment;exercise;hideLabelMobile=!1;courseAndExerciseNavigationUrl;activeParticipation;isPracticeMode=!0;faFolderOpen=H;ngOnChanges(){this.courseAndExerciseNavigationUrl=this.courseAndExerciseNavigationUrlSegment.reduce((n,a)=>`${n}/${a}`);let e=this.participationService.shouldPreferPractice(this.exercise);this.activeParticipation=this.participationService.getSpecificStudentParticipation(this.participations,e)??this.participations[0]}switchPracticeMode(){this.isPracticeMode=!this.isPracticeMode,this.activeParticipation=this.participationService.getSpecificStudentParticipation(this.participations,this.isPracticeMode)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["jhi-open-code-editor-button"]],inputs:{loading:"loading",smallButtons:"smallButtons",participations:"participations",courseAndExerciseNavigationUrlSegment:"courseAndExerciseNavigationUrlSegment",exercise:"exercise",hideLabelMobile:"hideLabelMobile"},features:[j],decls:8,vars:2,consts:[["popContent",""],[2,"max-width","660px"],["jhi-exercise-action-button","",1,"open-code-editor",3,"id","buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile","routerLink"],["jhi-exercise-action-button","","placement","right auto",1,"open-code-editor",3,"buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile","ngbPopover","autoClose"],[1,"form-check","form-switch"],["id","switchPracticeMode","mdbCheckbox","","type","checkbox",1,"form-check-input",3,"click","checked"],["for","switchPracticeMode","jhiTranslate","artemisApp.exerciseActions.practiceMode.title",1,"form-check-label"]],template:function(n,a){n&1&&(V(0),i(1,`
    `),g(2,Ie,4,13)(3,ye,4,10)(4,Be,5,14,"ng-template",1,0,y),i(6,`
`),U(),i(7,`
`)),n&2&&(o(2),l(a.participations!=null&&a.participations.length&&(a.participations==null?null:a.participations.length)===1?2:-1),o(),l(a.participations!=null&&a.participations.length&&a.participations.length>1?3:-1))},dependencies:[F,w,q,G,D,O],encapsulation:2})}return t})();var Oe=t=>({icon:t,label:"artemisApp.exerciseActions.practice",quizMode:"practice",hideLabelMobile:!1}),R=t=>({$implicit:t}),De=(t,r)=>({id:t,icon:r,label:"artemisApp.exerciseActions.openQuiz",quizMode:"live",hideLabelMobile:!1}),we=(t,r)=>({id:t,icon:r,label:"artemisApp.exerciseActions.startQuiz",quizMode:"live",hideLabelMobile:!1}),Fe=t=>({icon:t,label:"artemisApp.exerciseActions.viewSubmissions",quizMode:"live",outlined:!0}),ke=t=>({icon:t,label:"artemisApp.exerciseActions.viewResults",quizMode:"live",outlined:!0}),Se=(t,r,e)=>["/courses",t,"exercises",r,"teams",e],ze=(t,r)=>["/courses",t,"exercises","programming-exercises",r,"code-editor"],Re=(t,r,e)=>["/courses",t,"exercises",r,"repository",e],je=(t,r,e,n)=>["/courses",t,"exercises",r,e,"participate",n],Ne=(t,r,e)=>["/courses",t,"exercises","quiz-exercises",r,e];function Ve(t,r){if(t&1&&(i(0,`
                    `),I(1,2),i(2,`
                `)),t&2){let e=s(2),n=v(8);o(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",E(4,R,E(2,Oe,e.faRedo)))}}function Ue(t,r){if(t&1&&(i(0,`
                    `),I(1,2),i(2,`
                `)),t&2){let e=s(2),n=v(8);o(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",E(5,R,T(2,De,"open-exercise-"+e.exercise.id,e.faPlayCircle)))}}function qe(t,r){if(t&1&&(i(0,`
                    `),I(1,2),i(2,`
                `)),t&2){let e=s(2),n=v(8);o(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",E(5,R,T(2,we,"start-exercise-"+e.exercise.id,e.faPlayCircle)))}}function Ge(t,r){if(t&1&&(i(0,`
                    `),I(1,2),i(2,`
                `)),t&2){let e=s(2),n=v(8);o(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",E(4,R,E(2,Fe,e.faEye)))}}function He(t,r){if(t&1&&(i(0,`
                    `),I(1,2),i(2,`
                `)),t&2){let e=s(2),n=v(8);o(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",E(4,R,E(2,ke,e.faEye)))}}function Ze(t,r){if(t&1&&(i(0,`
            `),p(1,"div",1),i(2,`
                `),g(3,Ve,3,6)(4,Ue,3,7)(5,qe,3,7)(6,Ge,3,6)(7,He,3,6),d(),i(8,`
        `)),t&2){let e=s();o(3),l(e.isStartPracticeAvailable()?3:-1),o(),l(e.quizNotStarted||(e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.INITIALIZED?4:-1),o(),l(e.uninitializedQuiz?5:-1),o(),l((e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.FINISHED&&!(!(e.gradedParticipation==null||e.gradedParticipation.results==null)&&e.gradedParticipation.results.length)?6:-1),o(),l(!(e.gradedParticipation==null||e.gradedParticipation.results==null)&&e.gradedParticipation.results.length?7:-1)}}function Qe(t,r){if(t&1&&(i(0,`
                    `),u(1,"button",4),m(2,"artemisTranslate"),i(3,`
                `)),t&2){let e=s(2);o(),c("buttonIcon",e.faUsers)("buttonLabel",x(2,5,"artemisApp.exerciseActions.viewTeam"))("smallButton",e.smallButtons)("hideLabelMobile",!0)("routerLink",z(7,Se,e.courseId,e.exercise.id,e.assignedTeamId))}}function $e(t,r){if(t&1){let e=f();i(0,`
                    `),p(1,"span",5),m(2,"artemisTranslate"),i(3,`
                        `),p(4,"button",6),m(5,"artemisTranslate"),h("click",function(){_(e);let a=s(2);return b(a.startExercise())}),d(),i(6,`
                    `),d(),i(7,`
                `)}if(t&2){let e=s(2);o(),c("ngbTooltip",e.isBeforeStartDateAndStudent?x(2,9,"artemisApp.exerciseActions.startExerciseBeforeStartDate"):""),o(3),c("id","start-exercise-"+e.exercise.id)("buttonIcon",e.faPlayCircle)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(5,11,"artemisApp.exerciseActions.startExercise"))("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)("overwriteDisabled",e.isBeforeStartDateAndStudent)}}function We(t,r){if(t&1){let e=f();i(0,`
                    `),p(1,"jhi-start-practice-mode-button",7),h("practiceModeStarted",function(a){_(e);let P=s(2);return b(P.receiveNewParticipation(a))}),d(),i(2,`
                `)}if(t&2){let e=s(2);o(),c("id","start-practice-"+e.exercise.id)("smallButtons",e.smallButtons)("exercise",e.exercise)}}function Xe(t,r){if(t&1&&(i(0,`
                        `),u(1,"jhi-open-code-editor-button",8),i(2,`
                    `)),t&2){let e=s(3);o(),c("loading",!!e.exercise.loading)("smallButtons",e.smallButtons)("participations",e.exercise.studentParticipations)("courseAndExerciseNavigationUrlSegment",T(6,ze,e.courseId,e.exercise.id))("exercise",e.exercise)("hideLabelMobile",!0)}}function Ke(t,r){if(t&1&&(i(0,`
                        `),u(1,"jhi-code-button",9),i(2,`
                    `)),t&2){let e=s(3);o(),c("loading",!!e.exercise.loading)("smallButtons",e.smallButtons)("participations",e.exercise.studentParticipations)("exercise",e.exercise)("routerLinkForRepositoryView",z(7,Re,e.courseId,e.exercise.id,e.exercise.studentParticipations[0].id))("hideLabelMobile",!0)("repositoryUri","")}}function Ye(t,r){if(t&1){let e=f();i(0,`
                        `),p(1,"a",10),h("click",function(){_(e);let a=s(3);return b(a.startOnlineIDE())}),i(2,`
                            `),u(3,"fa-icon",11),i(4,`
                            `),u(5,"span",12),i(6,`
                        `),d(),i(7,`
                    `)}if(t&2){let e=s(3);o(),X("btn-sm",e.smallButtons),o(2),c("icon",e.faDesktop)("fixedWidth",!0)}}function Je(t,r){if(t&1&&(i(0,`
                        `),u(1,"jhi-request-feedback-button",13),i(2,`
                    `)),t&2){let e=s(3);o(),c("exercise",e.exercise)("smallButtons",e.smallButtons)}}function et(t,r){if(t&1&&(i(0,`
                    `),i(1,`
                    `),i(2,`
                    `),g(3,Xe,3,9)(4,Ke,3,11)(5,Ye,8,4)(6,Je,3,2)),t&2){let e=s(2);o(3),l(!e.examMode&&(e.programmingExercise!=null&&e.programmingExercise.allowOnlineEditor)?3:-1),o(),l(e.programmingExercise!=null&&e.programmingExercise.allowOfflineIde?4:-1),o(),l(e.theiaEnabled?5:-1),o(),l(e.exercise.allowFeedbackRequests&&e.gradedParticipation&&e.exercise.type===e.ExerciseType.PROGRAMMING?6:-1)}}function tt(t,r){if(t&1){let e=f();i(0,`
                    `),p(1,"button",14),m(2,"artemisTranslate"),h("click",function(){_(e);let a=s(2);return b(a.resumeProgrammingExercise(!1))}),d(),i(3,`
                `)}if(t&2){let e=s(2);o(),c("id","resume-exercise-"+e.exercise.id)("buttonIcon",e.faPlayCircle)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(2,7,"artemisApp.exerciseActions.resumeExercise"))("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)}}function it(t,r){if(t&1){let e=f();i(0,`
                    `),p(1,"button",14),m(2,"artemisTranslate"),h("click",function(){_(e);let a=s(2);return b(a.resumeProgrammingExercise(!0))}),d(),i(3,`
                `)}if(t&2){let e=s(2);o(),c("id","resume-practice-exercise-"+e.exercise.id)("buttonIcon",e.faPlayCircle)("jhiFeatureToggle",e.FeatureToggle.ProgrammingExercises)("buttonLabel",x(2,7,"artemisApp.exerciseActions.resumeExercisePractice"))("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)}}function nt(t,r){if(t&1&&(i(0,`
            `),p(1,"div",3),i(2,`
                `),g(3,Qe,4,11)(4,$e,8,13)(5,We,3,3)(6,et,7,4)(7,tt,4,9)(8,it,4,9),d(),i(9,`
        `)),t&2){let e=s();o(3),l(e.isTeamAvailable?3:-1),o(),l(e.isStartExerciseAvailable()?4:-1),o(),l(e.isStartPracticeAvailable()?5:-1),o(),l(e.shouldDisplayIDEButtons()?6:-1),o(),l(((e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.INACTIVE||(e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.FINISHED)&&e.isResumeExerciseAvailable(e.gradedParticipation)?7:-1),o(),l(((e.practiceParticipation==null?null:e.practiceParticipation.initializationState)===e.InitializationState.INACTIVE||(e.practiceParticipation==null?null:e.practiceParticipation.initializationState)===e.InitializationState.FINISHED)&&e.isResumeExerciseAvailable(e.practiceParticipation)?8:-1)}}function ot(t,r){if(t&1&&(i(0,`
                    `),u(1,"button",4),m(2,"artemisTranslate"),i(3,`
                `)),t&2){let e=s(2);o(),c("buttonIcon",e.faUsers)("buttonLabel",x(2,5,"artemisApp.exerciseActions.viewTeam"))("smallButton",e.smallButtons)("hideLabelMobile",!0)("routerLink",z(7,Se,e.courseId,e.exercise.id,e.assignedTeamId))}}function at(t,r){if(t&1){let e=f();i(0,`
                        `),p(1,"button",16),m(2,"artemisTranslate"),h("click",function(){_(e);let a=s(2);return b(a.startExercise())}),d(),i(3,`
                    `)}if(t&2){let e=s(2);o(),c("id","start-exercise-"+e.exercise.id)("buttonIcon",e.faPlayCircle)("buttonLabel",x(2,7,"artemisApp.exerciseActions.startExercise"))("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)("overwriteDisabled",e.isBeforeStartDateAndStudent)}}function rt(t,r){if(t&1){let e=f();i(0,`
                        `),p(1,"jhi-request-feedback-button",18),h("generatingFeedback",function(){_(e);let a=s(3);return b(a.isGeneratingFeedback=!0)}),d(),i(2,`
                    `)}if(t&2){let e,n=s(3);o(),c("exercise",n.exercise)("smallButtons",n.smallButtons)("isGeneratingFeedback",n.isGeneratingFeedback)("isSubmitted",(n.gradedParticipation==null||n.gradedParticipation.submissions==null||(e=n.gradedParticipation.submissions.last())==null?null:e.submitted)||!1)}}function st(t,r){if(t&1&&(i(0,`
                    `),u(1,"button",17),m(2,"artemisTranslate"),i(3,`
                    `),g(4,rt,3,4)),t&2){let e=s(2);o(),c("id","open-exercise-"+e.exercise.id)("buttonIcon",e.faFolderOpen)("buttonLabel",x(2,9,"artemisApp.exerciseActions."+((e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.INITIALIZED||e.beforeDueDate&&!e.hasRatedGradedResult?e.editorLabel:e.hasRatedGradedResult?"viewResults":"viewSubmissions")))("outlined",(!e.beforeDueDate||e.hasRatedGradedResult)&&(e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.FINISHED)("buttonLoading",!!e.exercise.loading)("smallButton",e.smallButtons)("hideLabelMobile",!1)("routerLink",ee(11,je,e.courseId,e.exercise.type+"-exercises",e.exercise.id,e.gradedParticipation.id)),o(3),l(e.exercise.allowFeedbackRequests&&e.athenaEnabled&&(e.exercise.type===e.ExerciseType.TEXT||e.exercise.type===e.ExerciseType.MODELING)&&e.beforeDueDate?4:-1)}}function ct(t,r){if(t&1&&(i(0,`
            `),p(1,"div",15),i(2,`
                `),g(3,ot,4,11),p(4,"span",5),m(5,"artemisTranslate"),i(6,`
                    `),g(7,at,4,9),d(),i(8,`
                `),g(9,st,5,16),d(),i(10,`
        `)),t&2){let e=s();o(3),l(e.isTeamAvailable?3:-1),o(),c("ngbTooltip",e.isBeforeStartDateAndStudent?x(5,4,"artemisApp.exerciseActions.startExerciseBeforeStartDate"):""),o(3),l(!e.gradedParticipation&&e.isStartExerciseAvailable()?7:-1),o(2),l((e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.INITIALIZED&&e.beforeDueDate||(e.gradedParticipation==null?null:e.gradedParticipation.initializationState)===e.InitializationState.FINISHED?9:-1)}}function lt(t,r){if(t&1&&(i(0,`
    `),u(1,"button",19),m(2,"artemisTranslate"),i(3,`
`)),t&2){let e=r.$implicit,n=s();o(),c("id",e.id)("buttonIcon",e.icon)("buttonLabel",x(2,8,e.label))("buttonLoading",!!n.exercise.loading)("smallButton",n.smallButtons)("hideLabelMobile",e.hideLabelMobile)("outlined",e.outlined)("routerLink",z(10,Ne,n.courseId,n.exercise.id,e.quizMode))}}var Si=(()=>{class t{alertService=C(Q);courseExerciseService=C(W);participationService=C(B);profileService=C(ce);FeatureToggle=L;ExerciseType=S;InitializationState=A;ButtonType=me;equalColumns=!0;smallColumns=!1;exercise;courseId;smallButtons;examMode;isGeneratingFeedback;generatingFeedback=new N;uninitializedQuiz;quizNotStarted;gradedParticipation;practiceParticipation;programmingExercise;isTeamAvailable;hasRatedGradedResult;beforeDueDate;editorLabel;localVCEnabled=!1;athenaEnabled=!1;routerLink;repositoryLink;theiaEnabled=!1;theiaPortalURL;faFolderOpen=H;faUsers=oe;faEye=re;faPlayCircle=ae;faRedo=Z;faDesktop=se;ngOnInit(){if(this.exercise.type===S.QUIZ){let e=this.exercise;this.uninitializedQuiz=Y.isUninitialized(e),this.quizNotStarted=Y.notStarted(e)}else this.exercise.type===S.PROGRAMMING?(this.programmingExercise=this.exercise,this.profileService.getProfileInfo().subscribe(e=>{this.localVCEnabled=e.activeProfiles?.includes(pe),this.athenaEnabled=e.activeProfiles?.includes($),e.activeProfiles?.includes(de)&&this.programmingExercise&&(this.theiaEnabled=!0,this.theiaPortalURL=e.theiaPortalURL??"",this.theiaPortalURL===""&&(this.theiaEnabled=!1),this.programmingExercise.allowOnlineIde||(this.theiaEnabled=!1),this.programmingExercise.buildConfig?.theiaImage||(this.theiaEnabled=!1))})):this.exercise.type===S.MODELING?(this.editorLabel="openModelingEditor",this.profileService.getProfileInfo().subscribe(e=>{this.athenaEnabled=e.activeProfiles?.includes($)})):this.exercise.type===S.TEXT?(this.editorLabel="openTextEditor",this.profileService.getProfileInfo().subscribe(e=>{this.athenaEnabled=e.activeProfiles?.includes($)})):this.exercise.type===S.FILE_UPLOAD&&(this.editorLabel="uploadFile");this.beforeDueDate=!this.exercise.dueDate||!xe(this.exercise,this.gradedParticipation)}ngOnChanges(){this.updateParticipations(),this.isTeamAvailable=!!(this.exercise.teamMode&&this.exercise.studentAssignedTeamIdComputed&&this.exercise.studentAssignedTeamId)}startOnlineIDE(){window.open(this.theiaPortalURL,"_blank")}receiveNewParticipation(e){let n=this.exercise.studentParticipations??[];n.map(a=>a.id).includes(e.id)?this.exercise.studentParticipations=n.map(a=>a.id===e.id?e:a):this.exercise.studentParticipations=[...n,e],this.updateParticipations()}updateParticipations(){let e=this.exercise.studentParticipations??[];this.gradedParticipation=this.participationService.getSpecificStudentParticipation(e,!1),this.practiceParticipation=this.participationService.getSpecificStudentParticipation(e,!0),this.hasRatedGradedResult=!!this.gradedParticipation?.results?.some(n=>n.rated===!0&&n.assessmentType!==le.AUTOMATIC_ATHENA)}isStartExerciseAvailable(){let e=!!(!this.exercise.teamMode||this.exercise.studentAssignedTeamId);return!this.examMode&&e&&K(this.exercise,this.gradedParticipation)}isResumeExerciseAvailable(e){return!this.examMode&&ge(this.exercise,e)}isStartPracticeAvailable(){return!this.examMode&&_e(this.exercise,this.practiceParticipation)}startExercise(){this.exercise.loading=!0,this.courseExerciseService.startExercise(this.exercise.id).pipe(k(()=>this.exercise.loading=!1)).subscribe({next:e=>{e&&this.receiveNewParticipation(e),this.programmingExercise&&(e?.initializationState===A.INITIALIZED?this.programmingExercise.allowOfflineIde?this.alertService.success("artemisApp.exercise.personalRepositoryClone"):this.alertService.success("artemisApp.exercise.personalRepositoryOnline"):this.alertService.error("artemisApp.exercise.startError"))},error:()=>{this.alertService.error("artemisApp.exercise.startError")}})}resumeProgrammingExercise(e){this.exercise.loading=!0;let n=e?this.practiceParticipation:this.gradedParticipation;this.courseExerciseService.resumeProgrammingExercise(this.exercise.id,n.id).pipe(k(()=>this.exercise.loading=!1)).subscribe({next:a=>{if(a){a.results=n?n.results:[];let P=this.exercise.studentParticipations.indexOf(n);this.exercise.studentParticipations[P]=a,this.updateParticipations(),this.alertService.success("artemisApp.exercise.resumeProgrammingExercise")}},error:a=>{this.alertService.error(`artemisApp.${a.error.entityName}.errors.${a.error.errorKey}`)}})}get isBeforeStartDateAndStudent(){return!this.exercise.isAtLeastTutor&&!!this.exercise.startDate&&ie().isBefore(this.exercise.startDate)}shouldDisplayIDEButtons(){if(!this.isRepositoryUriSet())return!1;let e=this.participationService.shouldPreferPractice(this.exercise),n=this.practiceParticipation?.initializationState===A.INITIALIZED&&(e||this.examMode),a=this.gradedParticipation?.initializationState===A.INITIALIZED,P=!!this.gradedParticipation?.initializationState&&[A.INACTIVE,A.FINISHED].includes(this.gradedParticipation.initializationState)&&!K(this.exercise,this.gradedParticipation);return n||a||P}isRepositoryUriSet(){let e=this.exercise.studentParticipations??[];return!!(this.participationService.getSpecificStudentParticipation(e,!1)??e[0])?.repositoryUri}get assignedTeamId(){let e=this.exercise.studentParticipations;return e?.length?e[0].team?.id:this.exercise.studentAssignedTeamId}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["jhi-exercise-details-student-actions"]],hostVars:4,hostBindings:function(n,a){n&2&&X("col",a.equalColumns)("col-auto",a.smallColumns)},inputs:{equalColumns:"equalColumns",smallColumns:"smallColumns",exercise:"exercise",courseId:"courseId",smallButtons:"smallButtons",examMode:"examMode",isGeneratingFeedback:"isGeneratingFeedback"},outputs:{generatingFeedback:"generatingFeedback"},features:[J([be]),j],decls:10,vars:1,consts:[["quizActionButton",""],[1,"btn-group"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","gap-1"],["jhi-exercise-action-button","",1,"view-team",3,"buttonIcon","buttonLabel","smallButton","hideLabelMobile","routerLink"],["tabindex","0",3,"ngbTooltip"],["jhi-exercise-action-button","",1,"start-exercise",3,"click","id","buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile","overwriteDisabled"],[1,"start-practice",3,"practiceModeStarted","id","smallButtons","exercise"],[3,"loading","smallButtons","participations","courseAndExerciseNavigationUrlSegment","exercise","hideLabelMobile"],[3,"loading","smallButtons","participations","exercise","routerLinkForRepositoryView","hideLabelMobile","repositoryUri"],["target","_blank","rel","noopener noreferrer",1,"btn","btn-primary",3,"click"],[3,"icon","fixedWidth"],["jhiTranslate","artemisApp.exerciseActions.openOnlineIDE",1,"d-none","d-md-inline"],[3,"exercise","smallButtons"],["jhi-exercise-action-button","",3,"click","id","buttonIcon","jhiFeatureToggle","buttonLabel","buttonLoading","smallButton","hideLabelMobile"],[1,"btn-group","gap-1"],["jhi-exercise-action-button","",1,"start-exercise",3,"click","id","buttonIcon","buttonLabel","buttonLoading","smallButton","hideLabelMobile","overwriteDisabled"],["jhi-exercise-action-button","",1,"open-exercise",3,"id","buttonIcon","buttonLabel","outlined","buttonLoading","smallButton","hideLabelMobile","routerLink"],[3,"generatingFeedback","exercise","smallButtons","isGeneratingFeedback","isSubmitted"],["jhi-exercise-action-button","",3,"id","buttonIcon","buttonLabel","buttonLoading","smallButton","hideLabelMobile","outlined","routerLink"]],template:function(n,a){if(n&1&&(p(0,"div"),i(1,`
    `),g(2,Ze,9,5)(3,nt,10,6)(4,ct,11,6),i(5,`
`),d(),i(6,`

`),g(7,lt,4,14,"ng-template",null,0,y),i(9,`
`)),n&2){let P;o(2),l((P=a.exercise.type)===a.ExerciseType.QUIZ?2:P===a.ExerciseType.PROGRAMMING?3:4)}},dependencies:[te,F,q,ne,w,Pe,Ee,fe,ue,D,he,O],styles:[".course-body-container[_ngcontent-%COMP%]{position:relative}.refresh-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:flex-start;opacity:0;pointer-events:none;transition:.1s ease-out opacity}.refresh-overlay.active[_ngcontent-%COMP%]{background-color:var(--overview-refresh-overlay-bg-color);opacity:1;pointer-events:auto;transition:.2s ease-in opacity}.refresh-overlay[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{position:relative;top:calc(47.5vh - 150px);transform:translateY(-50%);color:var(--overview-refresh-overlay-color)}.back-button[_ngcontent-%COMP%]{cursor:pointer}.current-week-row[_ngcontent-%COMP%]    >div{background-color:var(--overview-light-primary-background-color)}.statistic-summary[_ngcontent-%COMP%]{margin-top:25px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:flex-end;margin-bottom:20px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-text[_ngcontent-%COMP%]{position:absolute;width:350px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]{margin-bottom:40px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]   .color-legend-entry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:100%}.exercise-row-container[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{cursor:pointer}.exercise-row-container[_ngcontent-%COMP%]   .collapsed[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid var(--overview-light-border-color)}.icon-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;horiz-align:center}.course-information[_ngcontent-%COMP%]{padding-top:29px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]{cursor:pointer;border-radius:3px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover{background-color:var(--overview-light-background-color)}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:var(--primary)}.exercise-divider[_ngcontent-%COMP%]{height:0;width:100%;margin:1rem 0 .5rem;border-top:1px solid var(--overview-light-border-color)}.color-indicator[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0f6ab4;position:relative;top:-4px;margin-right:5px;border-radius:3px}canvas#complete-chart[_ngcontent-%COMP%]{z-index:99}.dev-button[_ngcontent-%COMP%]{text-align:left;color:#fff;background-color:#3e8acc;border:none;border-radius:1px}.dev-button[_ngcontent-%COMP%]:hover{background-color:#0f6ab4}.dev-button[_ngcontent-%COMP%]:active{box-shadow:0 2px 0 var(--artemis-dark)}.dev-button[_ngcontent-%COMP%]:disabled{background-color:gray}.btn-primary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:disabled, .btn-info[_ngcontent-%COMP%], .btn-info[_ngcontent-%COMP%]:hover, .btn-success[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 768px){.col-12[_ngcontent-%COMP%]{width:100%!important}}.fadeInIcon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s;animation-iteration-count:initial}@media (max-width: 655px){.horizontal-scroll[_ngcontent-%COMP%]{overflow-x:auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}50%{opacity:.5}to{visibility:visible;opacity:1}}.exercise-content-sidebar-width[_ngcontent-%COMP%]{width:calc(100% - 263px)!important;transition:width .1s 0s ease-in-out}.exercise-content-width[_ngcontent-%COMP%]{width:100%;transition:width .1s 0s ease-in-out}"]})}return t})();export{Si as a};
//# sourceMappingURL=chunk-UBFIUABE.js.map

import{a as d}from"./chunk-UHM5AJSI.js";import{b as r}from"./chunk-CT44YL7Q.js";import{c as h}from"./chunk-JXJXC4DZ.js";import{h as C}from"./chunk-M6Z6DKZQ.js";import{Ea as l,g as S,ya as p}from"./chunk-5LC5EQRR.js";import{a,b as c,d as m}from"./chunk-3E746U5Y.js";function i(){return window}var R=(()=>{class n{router=l(C);alertService=l(h);orionState;orionStateSubject;activeAssessmentComponent=void 0;static initConnector(e){i().artemisClientConnector=e,e.orionState={opened:-1,view:d.STUDENT,cloning:!1,building:!1},e.orionStateSubject=new S(e.orionState)}login(e,t){i().orionSharedUtilConnector.login(e,t)}importParticipation(e,t){i().orionExerciseConnector.importParticipation(e,r(t))}submit(){i().orionVCSConnector.submit()}state(){return this.orionStateSubject}log(e){i().orionSharedUtilConnector.log(e)}onExerciseOpened(e,t){let o=d[t];this.setIDEStateParameter({view:o}),this.setIDEStateParameter({opened:e})}onBuildStarted(e){i().orionBuildConnector.onBuildStarted(e)}onBuildFinished(){i().orionBuildConnector.onBuildFinished()}onBuildFailed(e){i().orionBuildConnector.onBuildFailed(JSON.stringify({errors:e.reduce((t,g)=>{var u=g,{fileName:o,timestamp:s}=u,f=m(u,["fileName","timestamp"]);return c(a({},t),{[o]:[...t[o]||[],c(a({},f),{ts:s})]})},{}),timestamp:e.length>0?e[0].timestamp:Date.now()}))}onTestResult(e,t,o){i().orionBuildConnector.onTestResult(e,t,o)}isBuilding(e){this.setIDEStateParameter({building:e})}isCloning(e){this.setIDEStateParameter({cloning:e})}setIDEStateParameter(e){Object.assign(this.orionState,e),this.orionStateSubject.next(this.orionState)}startedBuildInOrion(e,t){this.router.navigateByUrl(`/courses/${e}/exercises/${t}?withIdeSubmit=true`)}updateAssessment(e,t){if(this.activeAssessmentComponent){let o=JSON.parse(t);this.activeAssessmentComponent.updateFeedback(e,o)}else this.alertService.error("artemisApp.orion.assessment.updateFailed")}editExercise(e){this.isCloning(!0),i().orionExerciseConnector.editExercise(r(e))}selectRepository(e){i().orionVCSConnector.selectRepository(e)}buildAndTestLocally(){i().orionBuildConnector.buildAndTestLocally()}assessExercise(e){this.isCloning(!0),i().orionExerciseConnector.assessExercise(r(e))}downloadSubmission(e,t,o,s){i().orionExerciseConnector.downloadSubmission(String(e),String(t),s)}initializeAssessment(e,t){i().orionExerciseConnector.initializeAssessment(String(e),r(t))}initializeTestRepository(e){e.testRepositoryUri!==void 0?i().orionExerciseConnector.initializeTestRepository(e.testRepositoryUri):i().orionExerciseConnector.initializeTestRepository("null")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{R as a};
//# sourceMappingURL=chunk-7VLYAOO4.js.map

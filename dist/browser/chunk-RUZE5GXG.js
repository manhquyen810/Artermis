import{a as S}from"./chunk-V55WZ52P.js";import{c as I}from"./chunk-BNDLMKXK.js";import{b as u}from"./chunk-R5BZWVRQ.js";import{a as E}from"./chunk-NOBD5HSR.js";import{i as d}from"./chunk-IOA4DPXY.js";import{Ea as r,ya as a}from"./chunk-5LC5EQRR.js";var m=function(e){return e.ADD_FEEDBACK_AUTOMATICALLY_SELECTED_BLOCK="ADD_FEEDBACK_AUTOMATICALLY_SELECTED_BLOCK",e.ADD_FEEDBACK_MANUALLY_SELECTED_BLOCK="ADD_FEEDBACK_MANUALLY_SELECTED_BLOCK",e.DELETE_FEEDBACK="DELETE_FEEDBACK",e.EDIT_AUTOMATIC_FEEDBACK="EDIT_AUTOMATIC_FEEDBACK",e.SUBMIT_ASSESSMENT="SUBMIT_ASSESSMENT",e.ASSESS_NEXT_SUBMISSION="ASSESS_NEXT_SUBMISSION",e}(m||{}),o=class{id;userId;timestamp;eventType;feedbackType;segmentType;courseId;textExerciseId;participationId;submissionId;constructor(i,t,s,n,c){this.userId=i,this.courseId=t,this.textExerciseId=s,this.participationId=n,this.submissionId=c}setEventType(i){return this.eventType=i,this}setFeedbackType(i){this.feedbackType=i}setSegmentType(i){this.segmentType=i}};var C=(()=>{class e{assessmentsService=r(S);accountService=r(u);location=r(d);profileService=r(I);userId;courseId;textExerciseId;participationId;submissionId;eventToSend=new o;INVALID_VALUE=-1;route;analyticsEnabled=!1;constructor(){this.profileService.getProfileInfo().subscribe(t=>{this.analyticsEnabled=t.textAssessmentAnalyticsEnabled||!1})}setComponentRoute(t){this.analyticsEnabled&&(this.route=t,this.subscribeToRouteParameters())}sendAssessmentEvent(t,s=void 0,n=void 0){this.analyticsEnabled&&!this.isExampleSubmissionRoute()&&(this.eventToSend.setEventType(t),this.eventToSend.setFeedbackType(s),this.eventToSend.setSegmentType(n),this.assessmentsService.addTextAssessmentEvent(this.eventToSend).subscribe({error:c=>E("Error sending statistics: "+c.message)}))}isExampleSubmissionRoute(){return!!this.location?.path().includes("example-submission")}subscribeToRouteParameters(){this.route.params.subscribe(t=>{this.userId=this.accountService.userIdentity?Number(this.accountService.userIdentity.id):this.INVALID_VALUE,this.courseId=Number(t.courseId),this.textExerciseId=Number(t.exerciseId),this.participationId=Number(t.participationId),this.submissionId=Number(t.submissionId),this.eventToSend=new o(this.userId,this.courseId,this.textExerciseId,this.participationId,this.submissionId)})}static \u0275fac=function(s){return new(s||e)};static \u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{m as a,C as b};
//# sourceMappingURL=chunk-RUZE5GXG.js.map

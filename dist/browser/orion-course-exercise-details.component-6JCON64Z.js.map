{
  "version": 3,
  "sources": ["src/main/webapp/app/orion/participation/orion-exercise-details-student-actions.component.ts", "src/main/webapp/app/orion/participation/orion-exercise-details-student-actions.component.html", "src/main/webapp/app/orion/participation/orion-course-exercise-details.component.ts"],
  "sourcesContent": ["import { Component, Input, OnInit, inject } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { FeatureToggle } from 'app/shared/feature-toggle/feature-toggle.service';\r\nimport { ProgrammingExercise } from 'app/entities/programming/programming-exercise.model';\r\nimport { ProgrammingExerciseStudentParticipation } from 'app/entities/participation/programming-exercise-student-participation.model';\r\nimport { ExerciseView, OrionState } from 'app/shared/orion/orion';\r\nimport { OrionConnectorService } from 'app/shared/orion/orion-connector.service';\r\nimport { OrionBuildAndTestService } from 'app/shared/orion/orion-build-and-test.service';\r\nimport { Exercise } from 'app/entities/exercise.model';\r\nimport { OrionButtonType } from 'app/shared/orion/orion-button/orion-button.component';\r\nimport { ExerciseDetailsStudentActionsComponent } from 'app/overview/exercise-details/exercise-details-student-actions.component';\r\nimport { OrionButtonComponent } from 'app/shared/orion/orion-button/orion-button.component';\r\nimport { ArtemisTranslatePipe } from 'app/shared/pipes/artemis-translate.pipe';\r\n\r\n@Component({\r\n    selector: 'jhi-orion-exercise-details-student-actions',\r\n    templateUrl: './orion-exercise-details-student-actions.component.html',\r\n    styleUrls: ['../../overview/course-overview.scss'],\r\n    imports: [ExerciseDetailsStudentActionsComponent, OrionButtonComponent, ArtemisTranslatePipe],\r\n})\r\nexport class OrionExerciseDetailsStudentActionsComponent implements OnInit {\r\n    private orionConnectorService = inject(OrionConnectorService);\r\n    private ideBuildAndTestService = inject(OrionBuildAndTestService);\r\n    private route = inject(ActivatedRoute);\r\n\r\n    readonly ExerciseView = ExerciseView;\r\n    orionState: OrionState;\r\n    FeatureToggle = FeatureToggle;\r\n\r\n    @Input() exercise: Exercise;\r\n    @Input() courseId: number;\r\n    @Input() smallButtons: boolean;\r\n    @Input() examMode: boolean;\r\n\r\n    protected readonly OrionButtonType = OrionButtonType;\r\n\r\n    /**\r\n     * get orionState and submit changes if withIdeSubmit set in route query\r\n     */\r\n    ngOnInit(): void {\r\n        if (this.orionConnectorService && this.orionConnectorService.state()) {\r\n            this.orionConnectorService.state().subscribe((orionState: OrionState) => (this.orionState = orionState));\r\n            this.route.queryParams.subscribe((params) => {\r\n                if (params['withIdeSubmit']) {\r\n                    this.submitChanges();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    get isOfflineIdeAllowed() {\r\n        return (this.exercise as ProgrammingExercise).allowOfflineIde;\r\n    }\r\n\r\n    /**\r\n     * Imports the current exercise in the user's IDE and triggers the opening of the new project in the IDE\r\n     */\r\n    importIntoIDE() {\r\n        const repo = (this.exercise.studentParticipations![0] as ProgrammingExerciseStudentParticipation).repositoryUri!;\r\n        this.orionConnectorService.importParticipation(repo, this.exercise as ProgrammingExercise);\r\n    }\r\n\r\n    /**\r\n     * Submits the changes made in the IDE by staging everything, committing the changes and pushing them to master.\r\n     */\r\n    submitChanges() {\r\n        this.orionConnectorService.submit();\r\n        this.ideBuildAndTestService.listenOnBuildOutputAndForwardChanges(this.exercise as ProgrammingExercise);\r\n    }\r\n\r\n    /**\r\n     * Initializes a test repository\r\n     */\r\n    initializeTestRepository() {\r\n        this.orionConnectorService.initializeTestRepository(this.exercise as ProgrammingExercise);\r\n    }\r\n\r\n    /**\r\n     * Returns if the dude date has passed\r\n     */\r\n    isDueDatePassed() {\r\n        // Returns if the due date has passed\r\n        if (this.exercise.dueDate === undefined) {\r\n            return false;\r\n        }\r\n        return this.exercise.dueDate.date() < Date.now();\r\n    }\r\n}\r\n", "<jhi-exercise-details-student-actions [exercise]=\"exercise\" [courseId]=\"courseId\" [smallButtons]=\"smallButtons\" [examMode]=\"examMode\">\r\n    <ng-template #overrideCodeAndOnlineEditorButton>\r\n        @if (orionState !== undefined && orionState.view !== undefined) {\r\n            @if (isOfflineIdeAllowed && (orionState.view !== ExerciseView.STUDENT || orionState.opened !== this.exercise.id)) {\r\n                <jhi-ide-button\r\n                    [featureToggle]=\"FeatureToggle.ProgrammingExercises\"\r\n                    (clickHandler)=\"importIntoIDE()\"\r\n                    [buttonLabel]=\"'artemisApp.exerciseActions.importIntoIDE' | artemisTranslate\"\r\n                    [buttonType]=\"OrionButtonType.Download\"\r\n                    [buttonLoading]=\"this.exercise.loading || orionState.cloning\"\r\n                    [smallButton]=\"smallButtons\"\r\n                />\r\n            }\r\n            @if (isOfflineIdeAllowed && orionState.view === ExerciseView.STUDENT && orionState.opened === this.exercise.id) {\r\n                <jhi-ide-button\r\n                    [featureToggle]=\"FeatureToggle.ProgrammingExercises\"\r\n                    (clickHandler)=\"submitChanges()\"\r\n                    buttonLabel=\"Submit\"\r\n                    [buttonType]=\"OrionButtonType.Submit\"\r\n                    [buttonLoading]=\"this.exercise.loading || orionState.building\"\r\n                    [smallButton]=\"smallButtons\"\r\n                />\r\n            }\r\n            @if (isOfflineIdeAllowed && orionState.view === ExerciseView.STUDENT && orionState.opened === this.exercise.id && isDueDatePassed()) {\r\n                <jhi-ide-button\r\n                    [featureToggle]=\"FeatureToggle.ProgrammingExercises\"\r\n                    (clickHandler)=\"initializeTestRepository()\"\r\n                    buttonLabel=\"Download Tests\"\r\n                    [buttonType]=\"OrionButtonType.Download\"\r\n                    [buttonLoading]=\"this.exercise.loading || orionState.building\"\r\n                    [smallButton]=\"smallButtons\"\r\n                />\r\n            }\r\n        }\r\n    </ng-template>\r\n</jhi-exercise-details-student-actions>\r\n", "import { Component } from '@angular/core';\r\nimport { CourseExerciseDetailsComponent } from 'app/overview/exercise-details/course-exercise-details.component';\r\nimport { OrionExerciseDetailsStudentActionsComponent } from './orion-exercise-details-student-actions.component';\r\n\r\n@Component({\r\n    selector: 'jhi-orion-course-exercise-details',\r\n    template: `\r\n        <jhi-course-exercise-details>\r\n            <ng-template #overrideStudentActions let-exercise=\"exercise\" let-courseId=\"courseId\">\r\n                <jhi-orion-exercise-details-student-actions [exercise]=\"exercise\" [courseId]=\"courseId\" />\r\n            </ng-template>\r\n        </jhi-course-exercise-details>\r\n    `,\r\n    imports: [CourseExerciseDetailsComponent, OrionExerciseDetailsStudentActionsComponent],\r\n})\r\nexport class OrionCourseExerciseDetailsComponent {\r\n    // only replaces the student actions with Orion student actions in the overview\r\n}\r\n"],
  "mappings": "8yKCIgBA,EAAA,EAAA;iBAAA,EAAAC,EAAA,EAAA,iBAAA,CAAA,0BAEIC,EAAA,eAAA,UAAA,CAAAC,EAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAA,CAAA,EAAA,OAAAC,EAAgBF,EAAAG,cAAA,CAAe,CAAA,CAAA,EAFnCC,EAAA,EAQJT,EAAA,EAAA;aAAA,qBAPQU,EAAA,EAAAC,EAAA,gBAAAN,EAAAO,cAAAC,oBAAA,EAAoD,cAAAC,EAAA,EAAA,EAAA,0CAAA,CAAA,EAEyB,aAAAT,EAAAU,gBAAAC,QAAA,EACtC,gBAAAX,EAAAY,SAAAC,SAAAb,EAAAc,WAAAC,OAAA,EACsB,cAAAf,EAAAgB,YAAA,qCAKjErB,EAAA,EAAA;iBAAA,EAAAC,EAAA,EAAA,iBAAA,CAAA,EAEIC,EAAA,eAAA,UAAA,CAAAC,EAAAmB,CAAA,EAAA,IAAAjB,EAAAC,EAAA,CAAA,EAAA,OAAAC,EAAgBF,EAAAkB,cAAA,CAAe,CAAA,CAAA,EAFnCd,EAAA,EAQJT,EAAA,EAAA;aAAA,qBAPQU,EAAA,EAAAC,EAAA,gBAAAN,EAAAO,cAAAC,oBAAA,EAAoD,aAAAR,EAAAU,gBAAAS,MAAA,EAGf,gBAAAnB,EAAAY,SAAAC,SAAAb,EAAAc,WAAAM,QAAA,EACyB,cAAApB,EAAAgB,YAAA,qCAKlErB,EAAA,EAAA;iBAAA,EAAAC,EAAA,EAAA,iBAAA,CAAA,EAEIC,EAAA,eAAA,UAAA,CAAAC,EAAAuB,CAAA,EAAA,IAAArB,EAAAC,EAAA,CAAA,EAAA,OAAAC,EAAgBF,EAAAsB,yBAAA,CAA0B,CAAA,CAAA,EAF9ClB,EAAA,EAQJT,EAAA,EAAA;aAAA,qBAPQU,EAAA,EAAAC,EAAA,gBAAAN,EAAAO,cAAAC,oBAAA,EAAoD,aAAAR,EAAAU,gBAAAC,QAAA,EAGb,gBAAAX,EAAAY,SAAAC,SAAAb,EAAAc,WAAAM,QAAA,EACuB,cAAApB,EAAAgB,YAAA,4BA1BtErB,EAAA,EAAA;aAAA,EAAA4B,EAAA,EAAAC,EAAA,EAAA,CAAA,EAAmH,EAAAC,EAAA,EAAA,CAAA,EAUF,EAAAC,EAAA,EAAA,CAAA,mBAVjHrB,EAAA,EAAAsB,EAAA3B,EAAA4B,sBAAA5B,EAAAc,WAAAe,OAAA7B,EAAA8B,aAAAC,SAAA/B,EAAAc,WAAAkB,SAAAhC,EAAAY,SAAAqB,IAAA,EAAA,EAAA,EAUA5B,EAAA,EAAAsB,EAAA3B,EAAA4B,qBAAA5B,EAAAc,WAAAe,OAAA7B,EAAA8B,aAAAC,SAAA/B,EAAAc,WAAAkB,SAAAhC,EAAAY,SAAAqB,GAAA,EAAA,EAAA,EAUA5B,EAAA,EAAAsB,EAAA3B,EAAA4B,qBAAA5B,EAAAc,WAAAe,OAAA7B,EAAA8B,aAAAC,SAAA/B,EAAAc,WAAAkB,SAAAhC,EAAAY,SAAAqB,IAAAjC,EAAAkC,gBAAA,EAAA,EAAA,EAAA,4BArBJvC,EAAA,EAAA;SAAA,EAAA4B,EAAA,EAAAY,EAAA,EAAA,CAAA,kBAAA9B,EAAA,EAAAsB,EAAA3B,EAAAc,aAAAsB,QAAApC,EAAAc,WAAAe,OAAAO,OAAA,EAAA,EAAA,GDkBR,IAAaC,GAA2C,IAAA,CAAlD,MAAOA,CAA2C,CAC5CC,sBAAwBC,EAAOC,CAAqB,EACpDC,uBAAyBF,EAAOG,CAAwB,EACxDC,MAAQJ,EAAOK,CAAc,EAE5Bd,aAAeA,EACxBhB,WACAP,cAAgBA,EAEPK,SACAiC,SACA7B,aACA8B,SAEUpC,gBAAkBA,EAKrCqC,UAAQ,CACA,KAAKT,uBAAyB,KAAKA,sBAAsBU,MAAK,IAC9D,KAAKV,sBAAsBU,MAAK,EAAGC,UAAWnC,GAA4B,KAAKA,WAAaA,CAAW,EACvG,KAAK6B,MAAMO,YAAYD,UAAWE,GAAU,CACpCA,EAAO,eACP,KAAKjC,cAAa,CAE1B,CAAC,EAET,CAEA,IAAIU,qBAAmB,CACnB,OAAQ,KAAKhB,SAAiCwC,eAClD,CAKAjD,eAAa,CACT,IAAMkD,EAAQ,KAAKzC,SAAS0C,sBAAuB,CAAC,EAA8CC,cAClG,KAAKjB,sBAAsBkB,oBAAoBH,EAAM,KAAKzC,QAA+B,CAC7F,CAKAM,eAAa,CACT,KAAKoB,sBAAsBmB,OAAM,EACjC,KAAKhB,uBAAuBiB,qCAAqC,KAAK9C,QAA+B,CACzG,CAKAU,0BAAwB,CACpB,KAAKgB,sBAAsBhB,yBAAyB,KAAKV,QAA+B,CAC5F,CAKAsB,iBAAe,CAEX,OAAI,KAAKtB,SAAS+C,UAAYvB,OACnB,GAEJ,KAAKxB,SAAS+C,QAAQC,KAAI,EAAKC,KAAKC,IAAG,CAClD,4CAlESzB,EAA2C,2BAA3CA,EAA2C0B,UAAA,CAAA,CAAA,4CAAA,CAAA,EAAAC,OAAA,CAAApD,SAAA,WAAAiC,SAAA,WAAA7B,aAAA,eAAA8B,SAAA,UAAA,EAAAmB,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,oCAAA,EAAA,EAAA,CAAA,EAAA,WAAA,WAAA,eAAA,UAAA,EAAA,CAAA,EAAA,eAAA,gBAAA,cAAA,aAAA,gBAAA,aAAA,EAAA,CAAA,cAAA,SAAA,EAAA,eAAA,gBAAA,aAAA,gBAAA,aAAA,EAAA,CAAA,cAAA,iBAAA,EAAA,eAAA,gBAAA,aAAA,gBAAA,aAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,ICpBxDzE,EAAA,EAAA,uCAAA,CAAA,EACID,EAAA,EAAA;KAAA,EAAA4B,EAAA,EAAAgD,EAAA,EAAA,EAAA,cAAA,KAAA,EAAAC,CAAA,EAkCJ7E,EAAA,EAAA;CAAA,EAAAS,EAAA,EACAT,EAAA,EAAA;CAAA,QApCsCW,EAAA,WAAAgE,EAAA1D,QAAA,EAAqB,WAAA0D,EAAAzB,QAAA,EAAsB,eAAAyB,EAAAtD,YAAA,EAA8B,WAAAsD,EAAAxB,QAAA,iBDkBjG2B,EAAwCC,EAAsBC,CAAoB,EAAAC,OAAA,CAAA,gqHAAA,CAAA,CAAA,SAEnFvC,CAA2C,GAAA,2BEXxCwC,EAAA,EAAA;iBAAA,EAAAC,EAAA,EAAA,6CAAA,CAAA,EACJD,EAAA,EAAA;aAAA,sCADgDE,EAAA,EAAAC,EAAA,WAAAC,CAAA,EAAqB,WAAAC,CAAA,GAMjF,IAAaC,IAAmC,IAAA,CAA1C,MAAOA,CAAmC,4CAAnCA,EAAmC,2BAAnCA,EAAmCC,UAAA,CAAA,CAAA,mCAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,yBAAA,EAAA,EAAA,CAAA,EAAA,WAAA,UAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,IARxCZ,EAAA,EAAA;SAAA,EAAAc,EAAA,EAAA,6BAAA,EACId,EAAA,EAAA;aAAA,EAAAe,EAAA,EAAAC,EAAA,EAAA,EAAA,cAAA,KAAA,EAAAC,CAAA,EAGJjB,EAAA,EAAA;SAAA,EAAAkB,EAAA,EACJlB,EAAA,EAAA;KAAA,kBACUmB,EAAgCC,CAA2C,EAAAC,cAAA,CAAA,CAAA,SAE5Ef,CAAmC,GAAA",
  "names": ["\u0275\u0275text", "\u0275\u0275elementStart", "\u0275\u0275listener", "\u0275\u0275restoreView", "_r1", "ctx_r1", "\u0275\u0275nextContext", "\u0275\u0275resetView", "importIntoIDE", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275property", "FeatureToggle", "ProgrammingExercises", "\u0275\u0275pipeBind1", "OrionButtonType", "Download", "exercise", "loading", "orionState", "cloning", "smallButtons", "_r3", "submitChanges", "Submit", "building", "_r4", "initializeTestRepository", "\u0275\u0275template", "OrionExerciseDetailsStudentActionsComponent_ng_template_2_Conditional_1_Conditional_1_Template", "OrionExerciseDetailsStudentActionsComponent_ng_template_2_Conditional_1_Conditional_2_Template", "OrionExerciseDetailsStudentActionsComponent_ng_template_2_Conditional_1_Conditional_3_Template", "\u0275\u0275conditional", "isOfflineIdeAllowed", "view", "ExerciseView", "STUDENT", "opened", "id", "isDueDatePassed", "OrionExerciseDetailsStudentActionsComponent_ng_template_2_Conditional_1_Template", "undefined", "OrionExerciseDetailsStudentActionsComponent", "orionConnectorService", "inject", "OrionConnectorService", "ideBuildAndTestService", "OrionBuildAndTestService", "route", "ActivatedRoute", "courseId", "examMode", "ngOnInit", "state", "subscribe", "queryParams", "params", "allowOfflineIde", "repo", "studentParticipations", "repositoryUri", "importParticipation", "submit", "listenOnBuildOutputAndForwardChanges", "dueDate", "date", "Date", "now", "selectors", "inputs", "decls", "vars", "consts", "template", "rf", "ctx", "OrionExerciseDetailsStudentActionsComponent_ng_template_2_Template", "\u0275\u0275templateRefExtractor", "ExerciseDetailsStudentActionsComponent", "OrionButtonComponent", "ArtemisTranslatePipe", "styles", "\u0275\u0275text", "\u0275\u0275element", "\u0275\u0275advance", "\u0275\u0275property", "exercise_r1", "courseId_r2", "OrionCourseExerciseDetailsComponent", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275template", "OrionCourseExerciseDetailsComponent_ng_template_3_Template", "\u0275\u0275templateRefExtractor", "\u0275\u0275elementEnd", "CourseExerciseDetailsComponent", "OrionExerciseDetailsStudentActionsComponent", "encapsulation"]
}

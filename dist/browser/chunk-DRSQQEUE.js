import{A as X,B as W,C as m,D as v,E as V,F as b,G as H,H as y,I as Y,J as j,K as w,L as x,a as I,b as A,c as C,d as n,e as o,f as r,h as s,i as U,k as c,l as L,m as a,n as F,o as P,p as f,q as G,r as g,t as p,u,v as M,w as D,x as l,y as h,z as d}from"./chunk-7XXWL6ER.js";import{a as i,b as T,c as B}from"./chunk-TL3DYXRE.js";import{Ea as R,h as S,ya as e}from"./chunk-5LC5EQRR.js";var N=class extends A{type;course;constructor(){super(I.GROUP)}};var z="reloadNotificationsInNotificationSideBar",k=class E{userSettingsService=R(B);static NOTIFICATION_SETTING_ID_TO_NOTIFICATION_TITLE_MAP=new Map([[T.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_SUBMISSION_ASSESSED,[C]],[T.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_RELEASED,[o]],[T.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_OPEN_FOR_PRACTICE,[r]],[T.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_EXERCISE_POST,[s]],[T.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_REPLY_FOR_EXERCISE_POST,[a]],[T.NOTIFICATION__LECTURE_NOTIFICATION__ATTACHMENT_CHANGES,[n]],[T.NOTIFICATION__LECTURE_NOTIFICATION__NEW_LECTURE_POST,[U]],[T.NOTIFICATION__LECTURE_NOTIFICATION__NEW_REPLY_FOR_LECTURE_POST,[F]],[T.NOTIFICATION__EXAM_NOTIFICATION__NEW_EXAM_POST,[c]],[T.NOTIFICATION__EXAM_NOTIFICATION__NEW_REPLY_FOR_EXAM_POST,[f]],[T.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_COURSE_POST,[L]],[T.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_REPLY_FOR_COURSE_POST,[P]],[T.NOTIFICATION__INSTRUCTOR_NOTIFICATION__COURSE_AND_EXAM_ARCHIVING_STARTED,[g,G]],[T.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION,[M,D,l]],[T.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION,[u,p]],[T.NOTIFICATION__USER_NOTIFICATION__CONVERSATION_MESSAGE,[m,b,H,Y,y,j,x,w]],[T.NOTIFICATION__USER_NOTIFICATION__NEW_REPLY_IN_CONVERSATION_MESSAGE,[v]],[T.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_ASSIGN_UNASSIGN,[X,W]],[T.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_DELETE_UPDATE,[h,d]],[T.NOTIFICATION__USER_NOTIFICATION__USER_MENTION,[V]]]);currentNotificationSettings=[];currentNotificationSettingsSubject=new S(1);notificationTitleActivationMap=new Map;constructor(){this.listenForNotificationSettingsChanges()}refreshNotificationSettings(){this.userSettingsService.loadSettings(i.NOTIFICATION_SETTINGS).subscribe({next:_=>{this.currentNotificationSettings=this.userSettingsService.loadSettingsSuccessAsIndividualSettings(_.body,i.NOTIFICATION_SETTINGS),this.notificationTitleActivationMap=this.createUpdatedNotificationTitleActivationMap(),this.currentNotificationSettingsSubject.next(this.currentNotificationSettings)}})}getNotificationSettings(){return this.currentNotificationSettings}getNotificationSettingsUpdates(){return this.currentNotificationSettingsSubject.asObservable()}createUpdatedNotificationTitleActivationMap(){let _=new Map,t;for(let O=0;O<this.currentNotificationSettings.length;O++)t=E.NOTIFICATION_SETTING_ID_TO_NOTIFICATION_TITLE_MAP.get(this.currentNotificationSettings[O].settingId)??[],t.length>0&&t.forEach(q=>{_.set(q,this.currentNotificationSettings[O].webapp)});return _}isNotificationAllowedBySettings(_){return(_ instanceof N||_.notificationType===I.GROUP||_.notificationType===I.SINGLE||_.notificationType===I.CONVERSATION)&&_.title?this.notificationTitleActivationMap.get(_.title)??!0:!0}listenForNotificationSettingsChanges(){this.userSettingsService.userSettingsChangeEvent.subscribe(_=>{_===z&&this.refreshNotificationSettings()})}static \u0275fac=function(t){return new(t||E)};static \u0275prov=e({token:E,factory:E.\u0275fac,providedIn:"root"})};export{z as a,k as b};
//# sourceMappingURL=chunk-DRSQQEUE.js.map

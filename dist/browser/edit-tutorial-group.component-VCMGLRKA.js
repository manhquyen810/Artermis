import{a as V}from"./chunk-O444KNIK.js";import{b as R}from"./chunk-GI2Z27EW.js";import"./chunk-UCG4CBUM.js";import{a as W}from"./chunk-3IKJ4NMW.js";import"./chunk-IQWRONMP.js";import{a as q}from"./chunk-X237AILQ.js";import"./chunk-RTOKZMYN.js";import"./chunk-5QODR5GQ.js";import"./chunk-RNPAFOPW.js";import"./chunk-KZGAUMRM.js";import"./chunk-656XE4CO.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-U4DJRHYQ.js";import"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-Z2YUBN6N.js";import"./chunk-AO5E7TEY.js";import"./chunk-VWRLJYRR.js";import"./chunk-FGXEI5KW.js";import"./chunk-QH7SWO42.js";import"./chunk-P2M2VQE3.js";import"./chunk-GXOKLIFX.js";import"./chunk-5JBXU6VG.js";import"./chunk-4I367PEU.js";import"./chunk-ZPITQMA6.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import{c as M}from"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as k}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-DRSQQEUE.js";import"./chunk-7XXWL6ER.js";import"./chunk-VK7JPHFE.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import"./chunk-TL3DYXRE.js";import{c as A}from"./chunk-JXJXC4DZ.js";import"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import{p as g}from"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as U}from"./chunk-U54OSGNH.js";import{f as w,h as F}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{A as T,Db as d,Dc as E,Ea as a,Id as j,Ma as C,Mc as L,Na as x,Oc as G,Tb as _,W as y,Zb as D,aa as c,dd as u,f as v,kc as h,oa as b,pa as p,sc as I,xc as m,yc as f,zc as O}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function Z(r,$){if(r&1){let e=E();u(0,`
        `),m(1,"jhi-tutorial-group-form",2),L("formSubmitted",function(o){C(e);let s=G();return x(s.updateTutorialGroup(o))}),f(),u(2,`
    `)}if(r&2){let e=G();d(),h("formData",e.formData)("course",e.course)("isEditMode",!0)}}var Gt=(()=>{class r{activatedRoute=a(w);router=a(F);tutorialGroupService=a(M);alertService=a(A);cdr=a(j);ngUnsubscribe=new v;isLoading=!1;tutorialGroup;tutorialGroupSchedule;formData;tutorialGroupId;course;ngOnInit(){this.isLoading=!0,T([this.activatedRoute.paramMap,this.activatedRoute.data]).pipe(y(1),b(([e,{course:i}])=>(this.tutorialGroupId=Number(e.get("tutorialGroupId")),this.course=i,this.tutorialGroupService.getOneOfCourse(this.course.id,this.tutorialGroupId))),c(()=>this.isLoading=!1),p(this.ngUnsubscribe)).subscribe({next:e=>{e.body&&(this.tutorialGroup=e.body,this.formData={title:this.tutorialGroup.title,teachingAssistant:this.tutorialGroup.teachingAssistant,additionalInformation:this.tutorialGroup.additionalInformation,capacity:this.tutorialGroup.capacity,isOnline:this.tutorialGroup.isOnline,language:this.tutorialGroup.language,campus:this.tutorialGroup.campus},this.tutorialGroup.tutorialGroupSchedule&&(this.tutorialGroupSchedule=this.tutorialGroup.tutorialGroupSchedule,this.formData.schedule={period:[this.tutorialGroupSchedule.validFromInclusive.toDate(),this.tutorialGroupSchedule.validToInclusive.toDate()],repetitionFrequency:this.tutorialGroupSchedule.repetitionFrequency,startTime:this.tutorialGroupSchedule.startTime,endTime:this.tutorialGroupSchedule.endTime,dayOfWeek:this.tutorialGroupSchedule.dayOfWeek,location:this.tutorialGroupSchedule.location}))},error:e=>k(this.alertService,e)}).add(()=>this.cdr.detectChanges())}updateTutorialGroup(e){let{title:i,teachingAssistant:o,additionalInformation:s,capacity:K,isOnline:N,language:z,campus:B,schedule:S,notificationText:H,updateTutorialGroupChannelName:J}=e,t=new W;if(t.id=this.tutorialGroup.id,t.title=i,t.teachingAssistant=o,t.additionalInformation=s,t.capacity=K,t.isOnline=N,t.language=z,t.campus=B,S){t.tutorialGroupSchedule=new V,this.tutorialGroup.tutorialGroupSchedule&&(t.tutorialGroupSchedule.id=this.tutorialGroup.tutorialGroupSchedule.id);let{endTime:l,startTime:P,dayOfWeek:Q,repetitionFrequency:X,period:n,location:Y}=S;n&&n.length===2&&(t.tutorialGroupSchedule.validFromInclusive=g(n[0]),t.tutorialGroupSchedule.validToInclusive=g(n[1])),t.tutorialGroupSchedule.dayOfWeek=Q,t.tutorialGroupSchedule.startTime=P,t.tutorialGroupSchedule.endTime=l,t.tutorialGroupSchedule.repetitionFrequency=X,t.tutorialGroupSchedule.location=Y}else t.tutorialGroupSchedule=void 0;this.isLoading=!0,this.tutorialGroupService.update(this.course.id,this.tutorialGroupId,t,H,J).pipe(c(()=>{this.isLoading=!1,this.router.navigate(["/course-management",this.course.id,"tutorial-groups"])}),p(this.ngUnsubscribe)).subscribe({error:l=>this.onError(l)})}onError(e){let i=e.error;i&&i.errorKey&&i.errorKey==="scheduleOverlapsWithSession"?this.alertService.error(i.message,i.params):this.alertService.error("error.unexpectedError",{error:e.message})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=_({type:r,selectors:[["jhi-edit-tutorial-group"]],decls:6,vars:2,consts:[[3,"isLoading"],["jhiTranslate","artemisApp.pages.editTutorialGroup.title"],[3,"formSubmitted","formData","course","isEditMode"]],template:function(i,o){i&1&&(m(0,"jhi-loading-indicator-container",0),u(1,`
    `),O(2,"h3",1),u(3,`
    `),D(4,Z,3,3),f(),u(5,`
`)),i&2&&(h("isLoading",o.isLoading),d(4),I(o.course?4:-1))},dependencies:[q,U,R],encapsulation:2,changeDetection:0})}return r})();export{Gt as EditTutorialGroupComponent};
//# sourceMappingURL=edit-tutorial-group.component-VCMGLRKA.js.map

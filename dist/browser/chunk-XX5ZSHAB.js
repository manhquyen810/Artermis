import{a as H}from"./chunk-HPCUFM6M.js";import{a as $}from"./chunk-2QXIMOEO.js";import{a as S}from"./chunk-PZ7IDTIM.js";import{K as G,h as N,m as P,w as j,x as B,z as L}from"./chunk-WA5GEAJB.js";import{p as _}from"./chunk-DID2YGL7.js";import{c as C}from"./chunk-CXQURQM5.js";import{a as W}from"./chunk-U54OSGNH.js";import{f as V}from"./chunk-M6Z6DKZQ.js";import{s as q,u as I}from"./chunk-IOA4DPXY.js";import{Db as n,Dc as h,Ea as b,La as y,Ma as g,Mc as k,Na as x,Oc as c,Tb as M,Zb as f,dd as t,ed as F,kc as r,ld as T,md as w,nd as D,sc as m,uc as v,vc as E,wc as A,xc as s,yc as l,yd as O,zc as u,zd as R}from"./chunk-5LC5EQRR.js";function U(i,p){if(i&1){let e=h();t(0,`
            `),s(1,"div",1),t(2,`
                `),s(3,"input",5),k("change",function(o){g(e);let d=c(2);return x(d.toggleFeedbackRequests(o))}),l(),t(4,`
                `),u(5,"label",6),t(6,`
                `),u(7,"jhi-help-icon",4),t(8,`
            `),l(),t(9,`
        `)}if(i&2){let e=c(2);n(3),r("checked",!!e.exercise.allowFeedbackRequests),n(4),r("text","artemisApp.textExercise.allowPreliminaryAthenaFeedbackRequestsTooltip")}}function X(i,p){if(i&1&&(t(0,`
                        `),s(1,"option",9),t(2),l(),t(3,`
                    `)),i&2){let e=p.$implicit;n(),r("value",e),n(),F(e)}}function z(i,p){if(i&1){let e=h();t(0,`
            `),s(1,"div",0),t(2,`
                `),s(3,"label",7),t(4,"Athena Module"),l(),t(5,`
                `),s(6,"select",8),D("ngModelChange",function(o){g(e);let d=c(2);return w(d.exercise.feedbackSuggestionModule,o)||(d.exercise.feedbackSuggestionModule=o),x(o)}),t(7,`
                    `),E(8,X,4,2,null,null,v),l(),t(10,`
            `),l(),t(11,`
        `)}if(i&2){let e=c(2);n(6),r("value",e.exercise.feedbackSuggestionModule),T("ngModel",e.exercise.feedbackSuggestionModule),r("disabled",e.inputControlsDisabled()),n(2),A(e.availableAthenaModules)}}function J(i,p){if(i&1){let e=h();t(0,`
    `),s(1,"div",0),t(2,`
        `),s(3,"div",1),t(4,`
            `),s(5,"input",2),k("change",function(o){g(e);let d=c();return x(d.toggleFeedbackSuggestions(o))}),l(),t(6,`
            `),u(7,"label",3),t(8,`
            `),u(9,"jhi-help-icon",4),t(10,`
        `),l(),t(11,`
        `),f(12,U,10,2)(13,z,12,3),l(),t(14,`
`)}if(i&2){let e=c();n(5),r("checked",!!e.exercise.feedbackSuggestionModule)("disabled",e.inputControlsDisabled()),n(2),r("ngStyle",e.getCheckboxLabelStyle()),n(2),r("text","artemisApp.exercise.feedbackSuggestionsEnabledTooltip"),n(3),m(e.exercise.type===e.ExerciseType.TEXT||e.exercise.type===e.ExerciseType.MODELING?12:-1),n(),m(e.exercise.feedbackSuggestionModule?13:-1)}}var ue=(()=>{class i{athenaService=b(H);activatedRoute=b(V);exercise;dueDate;readOnly=!1;ExerciseType=C;AssessmentType=S;assessmentType;isAthenaEnabled$;modulesAvailable;availableAthenaModules;initialAthenaModule;ngOnInit(){let e=Number(this.activatedRoute.snapshot.paramMap.get("courseId"));this.athenaService.getAvailableModules(e,this.exercise).subscribe(a=>{this.availableAthenaModules=a,this.modulesAvailable=a.length>0}),this.isAthenaEnabled$=this.athenaService.isEnabled(),this.initialAthenaModule=this.exercise.feedbackSuggestionModule}ngOnChanges(e){e.dueDate&&!e.dueDate.isFirstChange()&&this.inputControlsDisabled()&&(this.exercise.feedbackSuggestionModule=this.initialAthenaModule)}inputControlsDisabled(){return this.exercise.type==C.PROGRAMMING?this.exercise.assessmentType==S.AUTOMATIC||this.readOnly||this.exercise.dueDate==null||this.hasDueDatePassed():this.hasDueDatePassed()}getCheckboxLabelStyle(){return this.inputControlsDisabled()?{color:"grey"}:{}}toggleFeedbackSuggestions(e){e.target.checked?this.exercise.feedbackSuggestionModule=this.availableAthenaModules.first():(this.exercise.allowFeedbackRequests=!1,this.exercise.feedbackSuggestionModule=void 0)}toggleFeedbackRequests(e){e.target.checked?(this.exercise.feedbackSuggestionModule=this.availableAthenaModules.first(),this.exercise.allowFeedbackRequests=!0):this.exercise.allowFeedbackRequests=!1}hasDueDatePassed(){return _(this.exercise.dueDate).isBefore(_())}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=M({type:i,selectors:[["jhi-exercise-feedback-suggestion-options"]],inputs:{exercise:"exercise",dueDate:"dueDate",readOnly:"readOnly"},features:[y],decls:2,vars:3,consts:[[1,"form-group"],[1,"form-check"],["type","checkbox","name","feedbackSuggestionsEnabledCheck","id","feedbackSuggestionsEnabledCheck",1,"form-check-input",3,"change","checked","disabled"],["for","feedbackSuggestionsEnabledCheck","jhiTranslate","artemisApp.exercise.feedbackSuggestionsEnabled",1,"form-control-label",3,"ngStyle"],["placement","right auto",3,"text"],["type","checkbox","name","allowFeedbackRequests","id","allowFeedbackRequests",1,"form-check-input",3,"change","checked"],["for","allowFeedbackRequests","jhiTranslate","artemisApp.textExercise.allowPreliminaryAthenaFeedbackRequests",1,"form-control-label"],["for","athenaModuleSelect"],["id","athenaModuleSelect",1,"form-select",3,"ngModelChange","value","ngModel","disabled"],[3,"value"]],template:function(a,o){a&1&&(f(0,J,15,6),O(1,"async")),a&2&&m(R(1,1,o.isAthenaEnabled$)&&o.modulesAvailable?0:-1)},dependencies:[W,q,$,G,B,L,j,N,P,I],encapsulation:2})}return i})();export{ue as a};
//# sourceMappingURL=chunk-XX5ZSHAB.js.map

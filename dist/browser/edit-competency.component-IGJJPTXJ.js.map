{
  "version": 3,
  "sources": ["src/main/webapp/app/course/competencies/edit/edit-competency.component.ts", "src/main/webapp/app/course/competencies/edit/edit-competency.component.html"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\r\nimport { onError } from 'app/shared/util/global.utils';\r\nimport { Competency } from 'app/entities/competency.model';\r\nimport { finalize, switchMap, take } from 'rxjs/operators';\r\nimport { CompetencyService } from 'app/course/competencies/competency.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { combineLatest, forkJoin } from 'rxjs';\r\nimport { CompetencyFormComponent } from 'app/course/competencies/forms/competency/competency-form.component';\r\n\r\nimport { EditCourseCompetencyComponent } from 'app/course/competencies/edit/edit-course-competency.component';\r\nimport { CourseCompetencyFormData } from 'app/course/competencies/forms/course-competency-form.component';\r\nimport { TranslateDirective } from 'app/shared/language/translate.directive';\r\n\r\n@Component({\r\n    selector: 'jhi-edit-competency',\r\n    templateUrl: './edit-competency.component.html',\r\n    imports: [CompetencyFormComponent, TranslateDirective],\r\n})\r\nexport class EditCompetencyComponent extends EditCourseCompetencyComponent implements OnInit {\r\n    private competencyService = inject(CompetencyService);\r\n\r\n    competency: Competency;\r\n    formData: CourseCompetencyFormData;\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        combineLatest([this.activatedRoute.paramMap, this.activatedRoute.parent!.parent!.paramMap])\r\n            .pipe(\r\n                take(1),\r\n                switchMap(([params, parentParams]) => {\r\n                    const competencyId = Number(params.get('competencyId'));\r\n                    this.courseId = Number(parentParams.get('courseId'));\r\n\r\n                    const competencyObservable = this.competencyService.findById(competencyId, this.courseId);\r\n                    const competencyCourseProgressObservable = this.competencyService.getCourseProgress(competencyId, this.courseId);\r\n                    return forkJoin([competencyObservable, competencyCourseProgressObservable]);\r\n                }),\r\n                finalize(() => (this.isLoading = false)),\r\n            )\r\n            .subscribe({\r\n                next: ([competencyResult, courseProgressResult]) => {\r\n                    if (competencyResult.body) {\r\n                        this.competency = competencyResult.body;\r\n                        if (courseProgressResult.body) {\r\n                            this.competency.courseProgress = courseProgressResult.body;\r\n                        }\r\n                    }\r\n\r\n                    this.formData = {\r\n                        id: this.competency.id,\r\n                        title: this.competency.title,\r\n                        description: this.competency.description,\r\n                        softDueDate: this.competency.softDueDate,\r\n                        taxonomy: this.competency.taxonomy,\r\n                        masteryThreshold: this.competency.masteryThreshold,\r\n                        optional: this.competency.optional,\r\n                    };\r\n                },\r\n                error: (res: HttpErrorResponse) => onError(this.alertService, res),\r\n            });\r\n    }\r\n\r\n    updateCompetency(formData: CourseCompetencyFormData) {\r\n        const { title, description, softDueDate, taxonomy, masteryThreshold, optional } = formData;\r\n\r\n        this.competency.title = title;\r\n        this.competency.description = description;\r\n        this.competency.softDueDate = softDueDate;\r\n        this.competency.taxonomy = taxonomy;\r\n        this.competency.masteryThreshold = masteryThreshold;\r\n        this.competency.optional = optional;\r\n\r\n        this.isLoading = true;\r\n\r\n        this.competencyService\r\n            .update(this.competency, this.courseId)\r\n            .pipe(\r\n                finalize(() => {\r\n                    this.isLoading = false;\r\n                    // currently at /course-management/{courseId}/competency-management/{competencyId}/edit, going back to /course-management/{courseId}/competency-management/\r\n                    this.router.navigate(['../../'], { relativeTo: this.activatedRoute });\r\n                }),\r\n            )\r\n            .subscribe({\r\n                error: (res: HttpErrorResponse) => onError(this.alertService, res),\r\n            });\r\n    }\r\n}\r\n", "@if (isLoading) {\r\n    <div class=\"d-flex justify-content-center\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"sr-only\" jhiTranslate=\"loading\"></span>\r\n        </div>\r\n    </div>\r\n} @else {\r\n    <div class=\"container\">\r\n        <h3 jhiTranslate=\"artemisApp.competency.edit.title\"></h3>\r\n        <jhi-competency-form\r\n            [isEditMode]=\"true\"\r\n            [formData]=\"formData\"\r\n            (formSubmitted)=\"updateCompetency($event)\"\r\n            [courseId]=\"courseId\"\r\n            [lecturesOfCourseWithLectureUnits]=\"lecturesWithLectureUnits\"\r\n            [averageStudentScore]=\"competency?.courseProgress?.averageStudentScore ?? 0\"\r\n            [competency]=\"competency\"\r\n        />\r\n    </div>\r\n}\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275text", "\u0275\u0275elementStart", "\u0275\u0275element", "\u0275\u0275elementEnd", "\u0275\u0275listener", "$event", "\u0275\u0275restoreView", "_r1", "ctx_r1", "\u0275\u0275nextContext", "\u0275\u0275resetView", "updateCompetency", "\u0275\u0275advance", "\u0275\u0275property", "formData", "courseId", "lecturesWithLectureUnits", "tmp_5_0", "competency", "courseProgress", "averageStudentScore", "undefined", "EditCompetencyComponent", "EditCourseCompetencyComponent", "competencyService", "inject", "CompetencyService", "ngOnInit", "combineLatest", "activatedRoute", "paramMap", "parent", "pipe", "take", "switchMap", "params", "parentParams", "competencyId", "Number", "get", "competencyObservable", "findById", "competencyCourseProgressObservable", "getCourseProgress", "forkJoin", "finalize", "isLoading", "subscribe", "next", "competencyResult", "courseProgressResult", "body", "id", "title", "description", "softDueDate", "taxonomy", "masteryThreshold", "optional", "error", "res", "onError", "alertService", "update", "router", "navigate", "relativeTo", "__ngFactoryType__", "selectors", "features", "\u0275\u0275InheritDefinitionFeature", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275template", "EditCompetencyComponent_Conditional_0_Template", "EditCompetencyComponent_Conditional_1_Template", "\u0275\u0275conditional", "CompetencyFormComponent", "TranslateDirective", "encapsulation"]
}

import{a as Se}from"./chunk-477H2IQN.js";import{a as be,b as ye}from"./chunk-KIXGOQMJ.js";import{a as Pe}from"./chunk-47G2PPX4.js";import{a as Te}from"./chunk-SUUJN3EQ.js";import{a as Ie}from"./chunk-DIZEKHOC.js";import{b as we}from"./chunk-V7PDYRDZ.js";import{a as ge}from"./chunk-KK6FVDB6.js";import{c as k}from"./chunk-JNO6DNVW.js";import{K as Z,L as ee,k as Y}from"./chunk-VZRSC3LP.js";import{a as xe}from"./chunk-K3W6YFKH.js";import{d as Ue,f as ve}from"./chunk-EDXSOKK5.js";import{Eb as de,Fa as oe,Fb as ue,Gb as fe,Ha as re,Ia as le,K as ie,Kd as Ce,Ma as ae,Na as se,ab as ce,cc as he,g as te,ib as pe,n as ne,qb as me,qc as j,zc as _e}from"./chunk-Z4VHWOB5.js";import{a as F}from"./chunk-U54OSGNH.js";import{E as X,n as Q}from"./chunk-IOA4DPXY.js";import{Db as r,Dc as D,Ea as P,Ec as H,Ma as E,Mc as h,Na as B,Oc as m,Pc as z,Qa as g,Qc as G,Qd as S,Rd as K,Tb as f,Tc as $,Vb as N,Xb as x,Ya as y,Za as C,Zb as U,ab as O,dd as n,ed as W,fd as v,kc as p,sc as d,sd as J,wb as q,xc as l,yb as R,yc as a,yd as w,zc as u,zd as I}from"./chunk-5LC5EQRR.js";import{h as Me}from"./chunk-3E746U5Y.js";var T=(()=>{class t extends ye{lectureUnit=C.required();onCompletion=y();onCollapse=y();isPresentationMode=C(!1);constructor(){super(be.LECTURE__OPEN_UNIT),K(()=>{this.setResourceId(this.lectureUnit().id)})}toggleCompletion(e){this.onCompletion.emit({lectureUnit:this.lectureUnit(),completed:e})}toggleCollapse(e){this.onCollapse.emit(e)}static \u0275fac=function(o){return new(o||t)};static \u0275dir=N({type:t,inputs:{lectureUnit:[1,"lectureUnit"],isPresentationMode:[1,"isPresentationMode"]},outputs:{onCompletion:"onCompletion",onCollapse:"onCollapse"},features:[x]})}return t})();var Fe=["*"],ke=(t,_)=>({"text-body-secondary":t,"text-success":_});function Ee(t,_){if(t&1&&(n(0,`
                    `),u(1,"span",7),w(2,"artemisTranslate"),w(3,"artemisDate"),n(4,`
                `)),t&2){let e=m();r(),$("ngbTooltip","",I(2,3,"artemisApp.textUnit.notReleasedTooltip")," ",I(3,5,e.lectureUnit().releaseDate),"")}}function Be(t,_){if(t&1){let e=D();n(0,`
                    `),l(1,"button",8),h("click",function(i){E(e);let s=m();return B(s.handleIsolatedView(i))}),n(2,`
                        `),u(3,"fa-icon",9),n(4,`
                        `),u(5,"span",10),n(6,`
                    `),a(),n(7,`
                `)}if(t&2){let e=m();r(3),p("icon",e.viewIsolatedButtonIcon()),r(2),p("jhiTranslate",e.viewIsolatedButtonLabel())}}function De(t,_){if(t&1){let e=D();n(0,`
                    `),l(1,"fa-icon",11),w(2,"artemisTranslate"),h("click",function(i){E(e);let s=m();return B(s.toggleCompletion(i))}),a(),n(3,`
                `)}if(t&2){let e=m();r(),p("ngClass",J(5,ke,!e.lectureUnit().completed,e.lectureUnit().completed))("icon",e.lectureUnit().completed?e.faSquareCheck:e.faSquare)("ngbTooltip",I(2,3,e.lectureUnit().completed?"artemisApp.lectureUnit.completedTooltip":"artemisApp.lectureUnit.uncompletedTooltip"))}}function je(t,_){t&1&&(n(0,`
        `),l(1,"div",12),n(2,`
            `),G(3),n(4,`
        `),a(),n(5,`
    `))}var b=(()=>{class t{faSquareCheck=ie;faSquare=se;lectureUnit=C.required();icon=C.required();showViewIsolatedButton=C(!1);viewIsolatedButtonLabel=C("artemisApp.textUnit.isolated");viewIsolatedButtonIcon=C(ue);isPresentationMode=C.required();onShowIsolated=y();onCollapse=y();onCompletion=y();isCollapsed=O(!0);isVisibleToStudents=S(()=>this.lectureUnit().visibleToStudents);toggleCompletion(e){e.stopPropagation(),this.onCompletion.emit(!this.lectureUnit().completed)}toggleCollapse(){this.isCollapsed.update(e=>!e),this.onCollapse.emit(this.isCollapsed())}handleIsolatedView(e){e.stopPropagation(),this.onShowIsolated.emit()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=f({type:t,selectors:[["jhi-lecture-unit-card"]],inputs:{lectureUnit:[1,"lectureUnit"],icon:[1,"icon"],showViewIsolatedButton:[1,"showViewIsolatedButton"],viewIsolatedButtonLabel:[1,"viewIsolatedButtonLabel"],viewIsolatedButtonIcon:[1,"viewIsolatedButtonIcon"],isPresentationMode:[1,"isPresentationMode"]},outputs:{onShowIsolated:"onShowIsolated",onCollapse:"onCollapse",onCompletion:"onCompletion"},ngContentSelectors:Fe,decls:24,vars:6,consts:[[1,"lecture-unit-card","col","clickable"],["id","lecture-unit-toggle-button",1,"lecture-unit-header","row","px-4","m-0",3,"click"],[1,"d-flex","p-0","justify-content-between","align-items-center"],[1,"d-flex"],["size","lg",1,"me-3",3,"icon"],[1,"m-0"],[1,"d-flex","align-items-center"],["jhiTranslate","artemisApp.courseOverview.exerciseList.notReleased",1,"badge","bg-warning","ms-2",3,"ngbTooltip"],["id","view-isolated-button",1,"btn","btn-sm","btn-primary",3,"click"],[3,"icon"],[1,"d-none","d-md-inline",3,"jhiTranslate"],["id","completed-checkbox","size","lg",1,"ms-3",3,"click","ngClass","icon","ngbTooltip"],["id","lecture-unit-body",1,"lecture-unit-body","px-4","py-2"]],template:function(o,i){if(o&1&&(z(),l(0,"div",0),n(1,`
    `),l(2,"div",1),h("click",function(){return i.toggleCollapse()}),n(3,`
        `),l(4,"div",2),n(5,`
            `),l(6,"div",3),n(7,`
                `),u(8,"fa-icon",4),n(9,`
                `),l(10,"h5",5),n(11),a(),n(12,`
                `),U(13,Ee,5,7),a(),n(14,`
            `),l(15,"div",6),n(16,`
                `),U(17,Be,8,2)(18,De,4,8),a(),n(19,`
        `),a(),n(20,`
    `),a(),n(21,`
    `),U(22,je,6,0),a(),n(23,`
`)),o&2){let s;r(8),p("icon",i.icon()),r(3),W((s=i.lectureUnit().name)!==null&&s!==void 0?s:""),r(2),d(i.isVisibleToStudents()?-1:13),r(4),d(i.showViewIsolatedButton()?17:-1),r(),d(i.lectureUnit().completed!==void 0&&!i.isPresentationMode()&&i.isVisibleToStudents()?18:-1),r(4),d(i.isCollapsed()?-1:22)}},dependencies:[ve,Ue,Y,F,xe,k,X,Q,ee,Z],styles:[".lecture-unit-card[_ngcontent-%COMP%]{box-shadow:0 2px 6px 0 var(--lecture-unit-card-shadow);border-radius:var(--bs-border-radius-lg)}.lecture-unit-card[_ngcontent-%COMP%]   .lecture-unit-header[_ngcontent-%COMP%]{background:var(--overview-light-background-color);height:50px}.lecture-unit-card[_ngcontent-%COMP%]   .lecture-unit-header[_ngcontent-%COMP%]:hover{background:var(--hover-slightly-darker-body-bg)}.lecture-unit-card[_ngcontent-%COMP%]   .lecture-unit-body[_ngcontent-%COMP%]{background-color:var(--lecture-unit-card-body-background)}"]})}return t})();function Ve(t,_){if(t&1&&(n(0,`
        `),l(1,"div"),n(2,`
            `),l(3,"span",1),n(4,": "),a(),n(5),w(6,"artemisDate"),a(),n(7,`
    `)),t&2){let e,o=m();r(5),v(`
            `,I(6,1,(e=o.lectureUnit().attachment)==null?null:e.uploadDate),`
        `)}}function Ae(t,_){if(t&1&&(n(0,`
        `),l(1,"div"),n(2,`
            `),l(3,"span",2),n(4,": "),a(),n(5),a(),n(6,`
    `)),t&2){let e,o=m();r(5),v(`
            `,(e=o.lectureUnit().attachment)==null?null:e.version,`
        `)}}function Le(t,_){if(t&1&&(n(0,`
        `),l(1,"div"),n(2,`
            `),l(3,"span",3),n(4,": "),a(),n(5),a(),n(6,`
    `)),t&2){let e=m();r(5),v(`
            `,e.getFileName(),`
        `)}}function Oe(t,_){if(t&1&&(n(0,`
        `),l(1,"div"),n(2,`
            `),u(3,"hr"),n(4),a(),n(5,`
    `)),t&2){let e=m();r(4),v(`
            `,e.lectureUnit().description,`
        `)}}var ut=(()=>{class t extends T{faDownload=he;fileService=P(Te);getFileName(){if(this.lectureUnit().attachment?.link){let e=this.lectureUnit().attachment.link,o=e.substring(e.lastIndexOf("/")+1);return this.fileService.replaceAttachmentPrefixAndUnderscores(o)}return""}handleDownload(){if(this.logEvent(),this.lectureUnit().attachment?.link){let e=this.lectureUnit().attachment.link;this.fileService.downloadFileByAttachmentName(e,this.lectureUnit().attachment.name),this.onCompletion.emit({lectureUnit:this.lectureUnit(),completed:!0})}}getAttachmentIcon(){if(this.lectureUnit().attachment?.link)switch(this.lectureUnit().attachment?.link?.split(".").pop().toLocaleLowerCase()){case"png":case"jpg":case"jpeg":case"gif":case"svg":return pe;case"pdf":return fe;case"zip":case"tar":return ae;case"txt":case"rtf":case"md":return te;case"htm":case"html":case"json":return me;case"doc":case"docx":case"pages":case"pages-tef":case"odt":return re;case"csv":return ne;case"xls":case"xlsx":case"numbers":case"ods":return ce;case"ppt":case"pptx":case"key":case"odp":return le;case"odg":case"odc":case"odi":case"odf":return _e;default:return j}return j}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275cmp=f({type:t,selectors:[["jhi-attachment-unit"]],features:[x],decls:7,vars:10,consts:[[3,"onCompletion","onCollapse","onShowIsolated","lectureUnit","icon","showViewIsolatedButton","viewIsolatedButtonLabel","viewIsolatedButtonIcon","isPresentationMode"],["jhiTranslate","artemisApp.attachmentUnit.uploadDate",1,"font-weight-bold"],["jhiTranslate","artemisApp.attachmentUnit.version",1,"font-weight-bold"],["jhiTranslate","artemisApp.attachmentUnit.FileName",1,"font-weight-bold"]],template:function(o,i){if(o&1&&(l(0,"jhi-lecture-unit-card",0),h("onCompletion",function(c){return i.toggleCompletion(c)})("onCollapse",function(c){return i.toggleCollapse(c)})("onShowIsolated",function(){return i.handleDownload()}),n(1,`
    `),U(2,Ve,8,3)(3,Ae,7,1)(4,Le,7,1)(5,Oe,6,1),a(),n(6,`
`)),o&2){let s,c,A,L;p("lectureUnit",i.lectureUnit())("icon",i.getAttachmentIcon())("showViewIsolatedButton",!0)("viewIsolatedButtonLabel","artemisApp.attachmentUnit.download")("viewIsolatedButtonIcon",i.faDownload)("isPresentationMode",i.isPresentationMode()),r(2),d((s=i.lectureUnit().attachment)!=null&&s.uploadDate?2:-1),r(),d((c=i.lectureUnit().attachment)!=null&&c.version?3:-1),r(),d((A=i.lectureUnit().attachment)!=null&&A.link?4:-1),r(),d((L=i.lectureUnit())!=null&&L.description?5:-1)}},dependencies:[b,k,F],encapsulation:2})}return t})();function qe(t,_){if(t&1&&(n(0,`
    `),u(1,"jhi-course-exercise-row",0),n(2,`
`)),t&2){let e=m();r(),p("exercise",e.exerciseUnit.exercise)("course",e.course)("hasGuidedTour",!1)("isPresentationMode",e.isPresentationMode)}}var vt=(()=>{class t{componentClass;constructor(){this.componentClass="exercise-unit"}exerciseUnit;course;isPresentationMode=!1;static \u0275fac=function(o){return new(o||t)};static \u0275cmp=f({type:t,selectors:[["jhi-exercise-unit"]],hostVars:1,hostBindings:function(o,i){o&2&&H("className",i.componentClass)},inputs:{exerciseUnit:"exerciseUnit",course:"course",isPresentationMode:"isPresentationMode"},decls:1,vars:1,consts:[[1,"exercise-row",3,"exercise","course","hasGuidedTour","isPresentationMode"]],template:function(o,i){o&1&&U(0,qe,3,4),o&2&&d(i.exerciseUnit!=null&&i.exerciseUnit.exercise&&i.course?0:-1)},dependencies:[Se],styles:[`.exercise-unit .exercise-row .course-exercise-row{border:none!important;box-shadow:0 2px 6px 0 var(--lecture-unit-card-shadow)}
`],encapsulation:2})}return t})();var V=Me(Pe());var Mt=(()=>{class t extends T{faVideo=Ce;videoUrlAllowList=[RegExp("^https://live\\.rbg\\.tum\\.de/w/\\w+/\\d+(/(CAM|COMB|PRES))?\\?video_only=1$")];completionTimeout;videoUrl=S(()=>{if(this.lectureUnit().source){let e=this.lectureUnit().source;if(this.videoUrlAllowList.some(o=>o.test(e))||!V.default||V.default.parse(e))return e}});toggleCollapse(e){super.toggleCollapse(e),e?clearTimeout(this.completionTimeout):(this.logEvent(),this.completionTimeout=setTimeout(()=>{this.onCompletion.emit({lectureUnit:this.lectureUnit(),completed:!0})},1e3*60*5))}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275cmp=f({type:t,selectors:[["jhi-video-unit"]],features:[x],decls:9,vars:8,consts:[[3,"onCompletion","onCollapse","lectureUnit","icon","showViewIsolatedButton","isPresentationMode"],[1,"ratio","ratio-16x9"],["id","videoFrame","allow","fullscreen",1,"rounded",3,"src"]],template:function(o,i){o&1&&(l(0,"jhi-lecture-unit-card",0),h("onCompletion",function(c){return i.toggleCompletion(c)})("onCollapse",function(c){return i.toggleCollapse(c)}),n(1,`
    `),l(2,"div",1),n(3,`
        `),u(4,"iframe",2),w(5,"safeResourceUrl"),n(6,`
    `),a(),n(7),a(),n(8,`
`)),o&2&&(p("lectureUnit",i.lectureUnit())("icon",i.faVideo)("showViewIsolatedButton",!1)("isPresentationMode",i.isPresentationMode()),r(4),p("src",I(5,6,i.videoUrl()),R),r(3),v(`
    `,i.lectureUnit().description,`
`))},dependencies:[b,ge],encapsulation:2})}return t})();function Re(t,_){if(t&1&&(n(0,`
        `),u(1,"div",1),n(2,`
    `)),t&2){let e=m();r(),p("innerHtml",e.formattedContent(),q)}}var At=(()=>{class t extends T{faScroll=oe;artemisMarkdown=P(Ie);formattedContent=S(()=>{if(this.lectureUnit().content)return this.artemisMarkdown.safeHtmlForMarkdown(this.lectureUnit().content)});handleIsolatedView(){this.logEvent();let e=window.open("about:blank","_blank");e.document.write(`<html><head><title>${this.lectureUnit().name}</title>`),e.document.write('<link rel="stylesheet" href="public/content/github-markdown.css">'),e.document.write('</head><body class="markdown-body">'),e.document.write("</body></html>"),e.document.close(),e.document.body.innerHTML=we(this.lectureUnit().content,[]),e.focus()}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275cmp=f({type:t,selectors:[["jhi-text-unit"]],features:[x],decls:4,vars:5,consts:[[3,"onCompletion","onCollapse","onShowIsolated","lectureUnit","icon","showViewIsolatedButton","isPresentationMode"],["id","printContent",1,"markdown-preview",3,"innerHtml"]],template:function(o,i){o&1&&(l(0,"jhi-lecture-unit-card",0),h("onCompletion",function(c){return i.toggleCompletion(c)})("onCollapse",function(c){return i.toggleCollapse(c)})("onShowIsolated",function(){return i.handleIsolatedView()}),n(1,`
    `),U(2,Re,3,1),a(),n(3,`
`)),o&2&&(p("lectureUnit",i.lectureUnit())("icon",i.faScroll)("showViewIsolatedButton",!0)("isPresentationMode",i.isPresentationMode()),r(2),d(i.formattedContent()?2:-1))},dependencies:[b],encapsulation:2})}return t})();var Nt=(()=>{class t extends T{faUpRightFromSquare=de;handleIsolatedView(){this.logEvent(),this.lectureUnit().source&&(window.open(this.lectureUnit().source,"_blank"),this.onCompletion.emit({lectureUnit:this.lectureUnit(),completed:!0}))}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275cmp=f({type:t,selectors:[["jhi-online-unit"]],features:[x],decls:3,vars:6,consts:[[3,"onCompletion","onCollapse","onShowIsolated","lectureUnit","icon","showViewIsolatedButton","viewIsolatedButtonLabel","isPresentationMode"]],template:function(o,i){o&1&&(l(0,"jhi-lecture-unit-card",0),h("onCompletion",function(c){return i.toggleCompletion(c)})("onCollapse",function(c){return i.toggleCollapse(c)})("onShowIsolated",function(){return i.handleIsolatedView()}),n(1),a(),n(2,`
`)),o&2&&(p("lectureUnit",i.lectureUnit())("icon",i.faUpRightFromSquare)("showViewIsolatedButton",!0)("viewIsolatedButtonLabel","artemisApp.onlineUnit.doOpen")("isPresentationMode",i.isPresentationMode()),r(),v(`
    `,i.lectureUnit().description,`
`))},dependencies:[b],encapsulation:2})}return t})();export{ut as a,vt as b,Mt as c,At as d,Nt as e};
//# sourceMappingURL=chunk-TXYCUEEB.js.map

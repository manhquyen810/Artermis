import{a as ne}from"./chunk-AO5E7TEY.js";import{a as $}from"./chunk-PA7LJOOC.js";import{a as ee}from"./chunk-DTGQ3VYB.js";import{a as te,b as ie}from"./chunk-TECMX7AA.js";import{a as J,b as Q,d as X}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import{c as G}from"./chunk-JNO6DNVW.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{G as N,K as F,c as B,h as I,m as z,p as W}from"./chunk-WA5GEAJB.js";import{a as q}from"./chunk-K3W6YFKH.js";import{c as Y}from"./chunk-JXJXC4DZ.js";import"./chunk-EDXSOKK5.js";import{p as E}from"./chunk-DID2YGL7.js";import{Q as R,tb as H}from"./chunk-Z4VHWOB5.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as Z}from"./chunk-U54OSGNH.js";import{f as j,h as V}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Ad as D,Db as s,Dc as f,Ea as C,L as P,Ma as x,Mc as M,Na as g,Oc as r,Rc as k,Sc as A,T,Tb as K,Zb as y,dd as e,ed as U,f as w,fd as b,kc as _,ld as h,md as S,nd as u,ra as O,sc as m,xc as n,yc as a,yd as v,zc as d,zd as L}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function ae(i,c){i&1&&(e(0,`
    `),d(1,"h1",0),e(2,`
`))}function oe(i,c){i&1&&(e(0,`
        `),d(1,"h1",10),e(2,`
    `))}function se(i,c){i&1&&(e(0,`
        `),d(1,"h1",11),e(2,`
    `))}function re(i,c){i&1&&(e(0,`
                `),n(1,"div"),e(2,`
                    `),d(3,"p",12),e(4,`
                `),a(),e(5,`
            `))}function le(i,c){if(i&1&&(e(0,`
                `),n(1,"div"),e(2,`
                    `),n(3,"p",13),e(4),a(),e(5,`
                `),a(),e(6,`
            `)),i&2){let t=r(2);s(4),U(t.displayedKeyLabel)}}function de(i,c){if(i&1){let t=f();e(0,`
                    `),n(1,"div",28),e(2,`
                        `),n(3,"div",29),e(4,`
                            `),n(5,"jhi-date-time-picker",30),v(6,"artemisTranslate"),u("ngModelChange",function(o){x(t);let p=r(3);return S(p.displayedExpiryDate,o)||(p.displayedExpiryDate=o),g(o)}),M("valueChange",function(){x(t);let o=r(3);return g(o.validateExpiryDate())}),a(),e(7,`
                        `),a(),e(8,`
                    `),a(),e(9,`
                `)}if(i&2){let t=r(3);s(5),k("labelName",L(6,6,"artemisApp.userSettings.sshSettingsPage.expiryDate")),h("ngModel",t.displayedExpiryDate),_("pickerType",t.DateTimePickerType.CALENDAR)("shouldDisplayTimeZoneWarning",!1)("min",t.currentDate)("requiredField",!0)}}function pe(i,c){if(i&1){let t=f();e(0,`
                `),n(1,"div",14),e(2,`
                    `),n(3,"p",15),e(4,`
                        `),n(5,"span",16),e(6," "),a(),e(7,`
                        `),n(8,"code"),e(9),a(),e(10,`
                    `),a(),e(11,`
                `),a(),e(12,`

                `),n(13,"div",17),e(14,`
                    `),d(15,"p",18),e(16,`
                    `),n(17,"textarea",19),u("ngModelChange",function(o){x(t);let p=r(2);return S(p.displayedKeyLabel,o)||(p.displayedKeyLabel=o),g(o)}),e(18,">"),a(),e(19,`
                    `),n(20,"p",15),e(21,`
                        `),n(22,"span",20),e(23," "),a(),e(24,`
                    `),a(),e(25,`
                `),a(),e(26,`

                `),e(27,`
                `),n(28,"div"),e(29,`
                    `),d(30,"span",21),e(31,`
                    `),d(32,"p",22),e(33,`
                `),a(),e(34,`
                `),n(35,"div"),e(36,`
                    `),n(37,"label",23),e(38,`
                        `),n(39,"input",24),u("ngModelChange",function(o){x(t);let p=r(2);return S(p.selectedOption,o)||(p.selectedOption=o),g(o)}),a(),e(40,`
                        `),d(41,"span",25),e(42,`
                    `),a(),e(43,`
                `),a(),e(44,`
                `),n(45,"div"),e(46,`
                    `),n(47,"label",23),e(48,`
                        `),n(49,"input",26),u("ngModelChange",function(o){x(t);let p=r(2);return S(p.selectedOption,o)||(p.selectedOption=o),g(o)}),a(),e(50,`
                        `),d(51,"span",27),e(52,`
                    `),a(),e(53,`
                `),a(),e(54,`

                `),e(55,`
                `),y(56,de,10,8)}if(i&2){let t=r(2);s(9),b(" ",t.copyInstructions," "),s(8),_("readonly",!t.isCreateMode),h("ngModel",t.displayedKeyLabel),s(22),h("ngModel",t.selectedOption),s(10),h("ngModel",t.selectedOption),s(7),m(t.selectedOption==="useExpiration"?56:-1)}}function ce(i,c){if(i&1&&(e(0,`
                    `),n(1,"div",31),e(2,`
                        `),d(3,"div",32),e(4,`
                        `),n(5,"div"),e(6),v(7,"artemisDate"),a(),e(8,`
                    `),a(),e(9,`
                `)),i&2){let t=r(3);s(6),b(`
                            `,D(7,1,t.displayCreationDate,"long-date"),`
                        `)}}function me(i,c){if(i&1&&(e(0,`
                    `),n(1,"div",33),e(2,`
                        `),d(3,"div",34),e(4,`
                        `),n(5,"div"),e(6),v(7,"artemisDate"),a(),e(8,`
                    `),a(),e(9,`
                `)),i&2){let t=r(3);s(6),b(`
                            `,D(7,1,t.displayedLastUsedDate,"long-date"),`
                        `)}}function xe(i,c){if(i&1&&(e(0,`
                    `),n(1,"div",33),e(2,`
                        `),d(3,"div",35),e(4,`
                        `),n(5,"div"),e(6),v(7,"artemisDate"),a(),e(8,`
                    `),a(),e(9,`
                `)),i&2){let t=r(3);s(3),A("jhiTranslate","artemisApp.userSettings.sshSettingsPage.",t.hasExpired?"hasExpiredOn":"expiresOn",""),s(3),b(`
                            `,D(7,3,t.displayedExpiryDate,"long-date"),`
                        `)}}function ge(i,c){if(i&1&&(e(0,`
                `),e(1,`
                `),y(2,ce,10,4)(3,me,10,4)(4,xe,10,6)),i&2){let t=r(2);s(2),m(t.displayCreationDate?2:-1),s(),m(t.displayedLastUsedDate?3:-1),s(),m(t.displayedExpiryDate?4:-1)}}function ye(i,c){if(i&1){let t=f();e(0,`
                    `),n(1,"div",8),e(2,`
                        `),n(3,"jhi-button",36),M("onClick",function(){x(t);let o=r(2);return g(o.saveSshKey())}),a(),e(4,`
                    `),a(),e(5,`
                `)}if(i&2){let t=r(2);s(3),_("disabled",!(t.displayedSshKey&&(t.selectedOption==="useExpiration"&&t.displayedExpiryDate&&t.isExpiryDateValid||t.selectedOption!=="useExpiration")))("btnType",t.ButtonType.PRIMARY)("btnSize",t.ButtonSize.SMALL)("icon",t.faSave)("title","artemisApp.userSettings.sshSettingsPage.saveSshKey")}}function _e(i,c){if(i&1){let t=f();e(0,`
    `),y(1,oe,3,0)(2,se,3,0),n(3,"div",1),e(4,`
        `),e(5,`
        `),n(6,"div",2),e(7,`
            `),n(8,"div",3),e(9,`
                `),n(10,"p"),e(11,`
                    `),d(12,"span",4),e(13,`
                    `),d(14,"jhi-documentation-link",5),e(15,`
                `),a(),e(16,`
            `),a(),e(17,`

            `),y(18,re,6,0)(19,le,7,1),n(20,"div"),e(21,`
                `),n(22,"textarea",6),u("ngModelChange",function(o){x(t);let p=r();return S(p.displayedSshKey,o)||(p.displayedSshKey=o),g(o)}),a(),e(23,`
            `),a(),e(24,`

            `),e(25,`
            `),y(26,pe,57,6)(27,ge,5,3),n(28,"div",7),e(29,`
                `),y(30,ye,6,5),n(31,"div",8),e(32,`
                    `),n(33,"jhi-button",9),M("onClick",function(){x(t);let o=r();return g(o.goBack())}),a(),e(34,`
                `),a(),e(35,`
            `),a(),e(36,`
        `),a(),e(37,`
    `),a(),e(38,`
`)}if(i&2){let t=r();s(),m(t.isCreateMode?2:1),s(13),_("documentationType",t.documentationType)("displayString","artemisApp.userSettings.sshSettingsPage.learnMore"),s(4),m(t.isCreateMode?18:19),s(4),_("readonly",!t.isCreateMode),h("ngModel",t.displayedSshKey),s(4),m(t.isCreateMode?26:27),s(4),m(t.isCreateMode?30:-1),s(3),_("btnType",t.ButtonType.PRIMARY)("btnSize",t.ButtonSize.SMALL)("title",t.isCreateMode?"artemisApp.userSettings.sshSettingsPage.cancelSavingSshKey":"artemisApp.userSettings.sshSettingsPage.back")}}var je=(()=>{class i{sshUserSettingsService=C($);route=C(j);router=C(V);alertService=C(Y);documentationType="SshSetup";invalidKeyFormat="invalidKeyFormat";keyAlreadyExists="keyAlreadyExists";keyLabelTooLong="keyLabelTooLong";faEdit=R;faSave=H;ButtonType=J;ButtonSize=Q;subscription;isCreateMode=!1;isLoading=!0;copyInstructions="";selectedOption="doNotUseExpiration";displayedKeyLabel="";displayedSshKey="";displayedKeyHash="";hasExpired=!1;displayedExpiryDate;isExpiryDateValid=!1;displayCreationDate;displayedLastUsedDate;currentDate;dialogErrorSource=new w;dialogError$=this.dialogErrorSource.asObservable();ngOnInit(){this.setMessageBasedOnOS(ne()),this.currentDate=E(),this.subscription=this.route.params.pipe(P(t=>Number(t.keyId)?(this.isCreateMode=!1,!0):(this.isLoading=!1,this.isCreateMode=!0,!1)),T(t=>this.sshUserSettingsService.getSshPublicKey(Number(t.keyId))),O(t=>{this.displayedSshKey=t.publicKey,this.displayedKeyLabel=t.label,this.displayedKeyHash=t.keyHash,this.displayCreationDate=t.creationDate,this.displayedExpiryDate=t.expiryDate,this.displayedLastUsedDate=t.lastUsedDate,this.hasExpired=t.expiryDate&&E().isAfter(E(t.expiryDate)),this.isLoading=!1})).subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}saveSshKey(){let t={label:this.displayedKeyLabel,publicKey:this.displayedSshKey,expiryDate:this.displayedExpiryDate};this.sshUserSettingsService.addNewSshPublicKey(t).subscribe({next:()=>{this.alertService.success("artemisApp.userSettings.sshSettingsPage.saveSuccess"),this.goBack()},error:l=>{let o=l.error.errorKey;[this.invalidKeyFormat,this.keyAlreadyExists,this.keyLabelTooLong].indexOf(o)>-1?this.alertService.error(`artemisApp.userSettings.sshSettingsPage.${o}`):this.alertService.error("artemisApp.userSettings.sshSettingsPage.saveFailure")}})}goBack(){this.router.navigate(["/user-settings/ssh"])}validateExpiryDate(){this.isExpiryDateValid=!!this.displayedExpiryDate?.isValid()}setMessageBasedOnOS(t){switch(t){case"Windows":this.copyInstructions="cat ~/.ssh/id_ed25519.pub | clip";break;case"MacOS":this.copyInstructions="pbcopy < ~/.ssh/id_ed25519.pub";break;case"Linux":this.copyInstructions="xclip -selection clipboard < ~/.ssh/id_ed25519.pub";break;case"Android":this.copyInstructions="termux-clipboard-set < ~/.ssh/id_ed25519.pub";break;default:this.copyInstructions="Ctrl + C"}}DateTimePickerType=te;static \u0275fac=function(l){return new(l||i)};static \u0275cmp=K({type:i,selectors:[["jhi-account-information"]],decls:2,vars:1,consts:[["jhiTranslate","artemisApp.userSettings.sshSettings"],[1,"list-group","d-block"],[1,"list-group-item"],[1,"d-flex","flex-wrap"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.whatToUseSSHForInfo",1,"large-text"],[3,"documentationType","displayString"],["rows","10","data-testid","sshKeyField",1,"form-control",3,"ngModelChange","readonly","ngModel"],[1,"col","col-auto","text-right","mt-4"],["role","group","aria-label","Actions",1,"btn-group"],[3,"onClick","btnType","btnSize","title"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.sshKeyDetails"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.addNewSshKey"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.key",1,"large-text"],[1,"large-text"],[1,"d-flex","flex-wrap","mb-4"],[1,"small-text"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.alreadyHaveKey"],[1,"mb-4"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.label",1,"large-text"],["rows","1","maxlength","50",1,"form-control","small-text-area",3,"ngModelChange","readonly","ngModel"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.commentUsedAsLabel"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.expiry.title",1,"large-text"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.expiry.info"],[1,"form-check-label"],["type","radio","name","activationOption","value","doNotUseExpiration",1,"form-check-input",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.expiry.doNotExpire"],["type","radio","name","activationOption","value","useExpiration",1,"form-check-input",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.expiry.expireAutomatically"],[1,"mt-4"],[1,"col-sm-4"],["name","expiryDate","id","expiryDate",3,"ngModelChange","valueChange","labelName","ngModel","pickerType","shouldDisplayTimeZoneWarning","min","requiredField"],[1,"text-and-date","large-text","mt-4"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.createdOn"],[1,"text-and-date","large-text","mt-2"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.lastUsedOn"],[3,"jhiTranslate"],["data-testid","saveSshKeyButton",3,"onClick","disabled","btnType","btnSize","icon","title"]],template:function(l,o){l&1&&y(0,ae,3,0)(1,_e,39,11),l&2&&m(o.isLoading?0:1)},dependencies:[Z,ee,F,B,W,I,N,z,ie,X,G,q],styles:["#apply-changes-button[_ngcontent-%COMP%]{width:250px;height:40px;font-size:large;border:0}h3[_ngcontent-%COMP%]{font-weight:700;text-underline-offset:3px}dt[_ngcontent-%COMP%]{font-size:large;font-weight:500}dd[_ngcontent-%COMP%]{font-size:larger}.userSettings-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:gray;font-size:large;font-weight:bolder}.userSettings-info[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{color:gray}.form-check[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}","textarea[_ngcontent-%COMP%]{max-width:600px;width:100%;height:150px;resize:none;font-size:small;font-family:Bitstream Vera Sans Mono,Courier New,monospace;border-color:var(--border-color)!important}.bold-text[_ngcontent-%COMP%]{font-weight:700}.large-text[_ngcontent-%COMP%]{font-size:large}.small-text[_ngcontent-%COMP%]{font-size:small}.text-and-date[_ngcontent-%COMP%]{display:flex;gap:5px}.small-text-area[_ngcontent-%COMP%]{height:30px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:16px;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px}.btn[_ngcontent-%COMP%]{border-radius:0}.rounded-btn[_ngcontent-%COMP%]{border-radius:2px;border-top-width:0}.bottom-border[_ngcontent-%COMP%]{border-bottom-width:2px}.container[_ngcontent-%COMP%]{position:relative}.narrower-box[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.font-medium[_ngcontent-%COMP%]{font-size:medium}.icon-column[_ngcontent-%COMP%]{width:auto;margin-right:15px}.vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;-ms-transform:translateY(-50%);transform:translateY(-50%)}.abbreviate-hash[_ngcontent-%COMP%]{font-size:x-small;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--ssh-key-settings-table-hover-background)}a[_ngcontent-%COMP%]:link:hover{text-decoration:none!important}.dropdown-content[_ngcontent-%COMP%]{overflow-y:auto;position:absolute;background-color:var(--dropdown-bg);border:1px solid var(--border-color);z-index:3000;border-radius:4px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]})}return i})();export{je as SshUserSettingsKeyDetailsComponent};
//# sourceMappingURL=ssh-user-settings-key-details.component-QWAC3Q67.js.map

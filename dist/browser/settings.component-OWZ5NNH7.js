import{a as Q}from"./chunk-LK2RBRW4.js";import{a as $}from"./chunk-ZM53HDCE.js";import{J as P,K as R,L as O,c as V,e as g,h as q,i as I,n as A,s as B,v as G,w,x as D,z as M}from"./chunk-WA5GEAJB.js";import{c as k}from"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import{a as H}from"./chunk-K3W6YFKH.js";import{b as U}from"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as J}from"./chunk-U54OSGNH.js";import"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import{c as z}from"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as i,Dc as j,Ea as x,Ma as T,Mc as K,Na as N,Oc as u,Rc as h,Tb as F,Zb as _,dd as t,ed as S,kc as p,rd as L,sc as l,uc as b,vc as y,wc as E,xc as r,yc as s,yd as f,zc as o,zd as C}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var W=e=>({username:e});function X(e,a){if(e&1&&(t(0,`
                    `),r(1,"h2",2),t(2,`
                        User settings for [`),r(3,"b"),t(4),s(),t(5,`]
                    `),s(),t(6,`
                `)),e&2){let n=u(2);i(),p("translateValues",L(2,W,n.account.login)),i(3),S(n.account.login)}}function Y(e,a){e&1&&(t(0,`
                    `),r(1,"div",3),t(2,`
                        `),r(3,"strong"),t(4,"Settings saved!"),s(),t(5,`
                    `),s(),t(6,`
                `))}function Z(e,a){e&1&&(t(0,`
                                        `),o(1,"small",13),t(2,`
                                    `))}function tt(e,a){e&1&&(t(0,`
                                        `),o(1,"small",14),t(2,`
                                    `))}function et(e,a){e&1&&(t(0,`
                                        `),o(1,"small",15),t(2,`
                                    `))}function nt(e,a){if(e&1&&(t(0,`
                                `),r(1,"div"),t(2,`
                                    `),_(3,Z,3,0)(4,tt,3,0)(5,et,3,0),s(),t(6,`
                            `)),e&2){let n,m,d,c=u(3);i(3),l(!((n=c.settingsForm.get("firstName"))==null||n.errors==null)&&n.errors.required?3:-1),i(),l(!((m=c.settingsForm.get("firstName"))==null||m.errors==null)&&m.errors.minlength?4:-1),i(),l(!((d=c.settingsForm.get("firstName"))==null||d.errors==null)&&d.errors.maxlength?5:-1)}}function it(e,a){e&1&&(t(0,`
                                        `),o(1,"small",16),t(2,`
                                    `))}function at(e,a){e&1&&(t(0,`
                                        `),o(1,"small",17),t(2,`
                                    `))}function lt(e,a){e&1&&(t(0,`
                                        `),o(1,"small",18),t(2,`
                                    `))}function ot(e,a){if(e&1&&(t(0,`
                                `),r(1,"div"),t(2,`
                                    `),_(3,it,3,0)(4,at,3,0)(5,lt,3,0),s(),t(6,`
                            `)),e&2){let n,m,d,c=u(3);i(3),l(!((n=c.settingsForm.get("lastName"))==null||n.errors==null)&&n.errors.required?3:-1),i(),l(!((m=c.settingsForm.get("lastName"))==null||m.errors==null)&&m.errors.minlength?4:-1),i(),l(!((d=c.settingsForm.get("lastName"))==null||d.errors==null)&&d.errors.maxlength?5:-1)}}function rt(e,a){e&1&&(t(0,`
                                        `),o(1,"small",19),t(2,`
                                    `))}function st(e,a){e&1&&(t(0,`
                                        `),o(1,"small",20),t(2,`
                                    `))}function mt(e,a){e&1&&(t(0,`
                                        `),o(1,"small",21),t(2,`
                                    `))}function dt(e,a){e&1&&(t(0,`
                                        `),o(1,"small",22),t(2,`
                                    `))}function ct(e,a){if(e&1&&(t(0,`
                                `),r(1,"div"),t(2,`
                                    `),_(3,rt,3,0)(4,st,3,0)(5,mt,3,0)(6,dt,3,0),s(),t(7,`
                            `)),e&2){let n,m,d,c,v=u(3);i(3),l(!((n=v.settingsForm.get("email"))==null||n.errors==null)&&n.errors.required?3:-1),i(),l(!((m=v.settingsForm.get("email"))==null||m.errors==null)&&m.errors.email?4:-1),i(),l(!((d=v.settingsForm.get("email"))==null||d.errors==null)&&d.errors.minlength?5:-1),i(),l(!((c=v.settingsForm.get("email"))==null||c.errors==null)&&c.errors.maxlength?6:-1)}}function gt(e,a){if(e&1&&(t(0,`
                                        `),r(1,"option",25),t(2),f(3,"findLanguageFromKey"),s(),t(4,`
                                    `)),e&2){let n=a.$implicit;i(),p("value",n),i(),S(C(3,2,n))}}function _t(e,a){if(e&1&&(t(0,`
                            `),r(1,"div",5),t(2,`
                                `),o(3,"label",23),t(4,`
                                `),r(5,"select",24),t(6,`
                                    `),y(7,gt,5,4,null,null,b),s(),t(9,`
                            `),s(),t(10,`
                        `)),e&2){let n=u(3);i(7),E(n.languages)}}function ut(e,a){if(e&1){let n=j();t(0,`
                    `),r(1,"form",4),K("ngSubmit",function(){T(n);let d=u(2);return N(d.save())}),t(2,`
                        `),r(3,"div",5),t(4,`
                            `),o(5,"label",6),t(6,`
                            `),o(7,"input",7),f(8,"artemisTranslate"),t(9,`
                            `),_(10,nt,7,3),s(),t(11,`
                        `),r(12,"div",5),t(13,`
                            `),o(14,"label",8),t(15,`
                            `),o(16,"input",9),f(17,"artemisTranslate"),t(18,`
                            `),_(19,ot,7,3),s(),t(20,`
                        `),r(21,"div",5),t(22,`
                            `),o(23,"label",10),t(24,`
                            `),t(25,`
                            `),o(26,"input",11),f(27,"artemisTranslate"),t(28,`
                            `),_(29,ct,8,4),s(),t(30,`
                        `),_(31,_t,11,0),o(32,"button",12),t(33,`
                    `),s(),t(34,`
                `)}if(e&2){let n=u(2);i(),p("formGroup",n.settingsForm),i(6),h("placeholder",C(8,10,"settings.form.firstname.placeholder")),i(3),l(n.settingsForm.get("firstName").invalid&&(n.settingsForm.get("firstName").dirty||n.settingsForm.get("firstName").touched)?10:-1),i(6),h("placeholder",C(17,12,"settings.form.lastname.placeholder")),i(3),l(n.settingsForm.get("lastName").invalid&&(n.settingsForm.get("lastName").dirty||n.settingsForm.get("lastName").touched)?19:-1),i(7),h("placeholder",C(27,14,"global.form.email.placeholder")),p("disabled",!0),i(3),l(n.settingsForm.get("email").invalid&&(n.settingsForm.get("email").dirty||n.settingsForm.get("email").touched)?29:-1),i(2),l(n.languages&&n.languages.length>0?31:-1),i(),p("disabled",n.settingsForm.invalid)}}function pt(e,a){if(e&1&&(t(0,`
    `),r(1,"div"),t(2,`
        `),r(3,"div",0),t(4,`
            `),r(5,"div",1),t(6,`
                `),_(7,X,7,4)(8,Y,7,0)(9,ut,35,16),s(),t(10,`
        `),s(),t(11,`
    `),s(),t(12,`
`)),e&2){let n=u();i(7),l(n.account?7:-1),i(),l(n.success?8:-1),i(),l(n.account?9:-1)}}var jt=(()=>{class e{accountService=x(U);fb=x(P);translateService=x(z);profileService=x(k);success=!1;account;languages=$;settingsForm;isRegistrationEnabled=!1;ngOnInit(){this.profileService.getProfileInfo().subscribe(n=>{n&&(this.isRegistrationEnabled=n.registrationEnabled||!1)}),this.accountService.identity().then(n=>{n&&(this.settingsForm.patchValue({firstName:n.firstName,lastName:n.lastName,email:n.email,langKey:n.langKey}),this.account=n)}),this.initializeForm()}initializeForm(){this.settingsForm||(this.settingsForm=this.fb.group({firstName:[void 0,[g.required,g.minLength(2),g.maxLength(50)]],lastName:[void 0,[g.required,g.minLength(2),g.maxLength(50)]],email:[void 0,[g.required,g.minLength(5),g.maxLength(100),g.email]],langKey:[void 0]}))}save(){this.success=!1,this.account.firstName=this.settingsForm.get("firstName").value||void 0,this.account.lastName=this.settingsForm.get("lastName").value||void 0,this.account.langKey=this.settingsForm.get("langKey").value||void 0,this.accountService.save(this.account).subscribe({next:()=>{this.success=!0,this.accountService.authenticate(this.account),this.account.langKey!==this.translateService.currentLang&&this.translateService.use(this.account.langKey)},error:()=>this.success=!1})}static \u0275fac=function(m){return new(m||e)};static \u0275cmp=F({type:e,selectors:[["jhi-settings"]],decls:1,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-md-8"],["jhiTranslate","settings.title",3,"translateValues"],["jhiTranslate","settings.messages.success",1,"alert","alert-success"],["name","form","role","form","novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName","jhiTranslate","settings.form.firstname",1,"form-control-label"],["type","text","id","firstName","name","firstName","formControlName","firstName",1,"form-control",3,"placeholder"],["for","lastName","jhiTranslate","settings.form.lastname",1,"form-control-label"],["type","text","id","lastName","name","lastName","formControlName","lastName",1,"form-control",3,"placeholder"],["for","email","jhiTranslate","global.form.email",1,"form-control-label"],["type","email","id","email","name","email","formControlName","email",1,"form-control",3,"disabled","placeholder"],["type","submit","jhiTranslate","settings.form.button",1,"btn","btn-primary",3,"disabled"],["jhiTranslate","settings.messages.validate.firstname.required",1,"form-text","text-danger"],["jhiTranslate","settings.messages.validate.firstname.minlength",1,"form-text","text-danger"],["jhiTranslate","settings.messages.validate.firstname.maxlength",1,"form-text","text-danger"],["jhiTranslate","settings.messages.validate.lastname.required",1,"form-text","text-danger"],["jhiTranslate","settings.messages.validate.lastname.minlength",1,"form-text","text-danger"],["jhiTranslate","settings.messages.validate.lastname.maxlength",1,"form-text","text-danger"],["jhiTranslate","global.messages.validate.email.required",1,"form-text","text-danger"],["jhiTranslate","global.messages.validate.email.invalid",1,"form-text","text-danger"],["jhiTranslate","global.messages.validate.email.minlength",1,"form-text","text-danger"],["jhiTranslate","global.messages.validate.email.maxlength",1,"form-text","text-danger"],["for","langKey","jhiTranslate","settings.form.language"],["id","langKey","name","langKey","formControlName","langKey",1,"form-select"],[3,"value"]],template:function(m,d){m&1&&_(0,pt,13,3),m&2&&l(d.isRegistrationEnabled?0:-1)},dependencies:[J,R,A,D,M,V,w,q,I,O,B,G,H,Q],encapsulation:2})}return e})();export{jt as SettingsComponent};
//# sourceMappingURL=settings.component-OWZ5NNH7.js.map

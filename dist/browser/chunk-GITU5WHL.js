import{c as l,j as F}from"./chunk-3JSWSN6W.js";import{K as b}from"./chunk-VZRSC3LP.js";import{a as w}from"./chunk-K3W6YFKH.js";import{d as k}from"./chunk-EDXSOKK5.js";import{Bb as B,E as M,uc as R}from"./chunk-Z4VHWOB5.js";import{a as I}from"./chunk-U54OSGNH.js";import{c as V}from"./chunk-E2KBL4LX.js";import{n as L,s as j}from"./chunk-IOA4DPXY.js";import{Db as r,Dc as S,Ea as g,Ma as C,Mc as y,Na as h,Oc as u,Tb as d,Wb as x,Zb as T,dd as o,kc as p,qd as D,sc as m,xc as s,ya as A,yc as a,yd as P,zc as E,zd as G}from"./chunk-5LC5EQRR.js";var Q=(()=>{class t{updateFeedbackWithStructuredGradingInstructionEvent(e,n){n.preventDefault();try{let i=n.dataTransfer.getData("text/plain"),c=JSON.parse(i);e.gradingInstruction=c,e.credits=c.credits}catch(i){if(!(i instanceof SyntaxError))throw i}}computeTotalScore(e){let n=0,i={};for(let c of e)c.gradingInstruction?n=this.calculateScoreForGradingInstructions(c,n,i):n+=c.credits;return n}calculateScoreForGradingInstructions(e,n,i){if(i[e.gradingInstruction.id]){let c=e.gradingInstruction.usageCount,v=i[e.gradingInstruction.id];c&&c>0?v>=c?i[e.gradingInstruction.id]=v+1:(i[e.gradingInstruction.id]=v+1,n+=e.gradingInstruction.credits):n+=e.credits}else i[e.gradingInstruction.id]=1,n+=e.credits;return n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ie=(()=>{class t{translateService=g(V);feedback;useDefaultText=!1;faLightbulb=M;get text(){let e=F.getFeedbackSuggestionType(this.feedback);if(e===l.ADAPTED)return"artemisApp.assessment.suggestion.adapted";if(this.useDefaultText)return"artemisApp.assessment.suggestion.default";switch(e){case l.SUGGESTED:return"artemisApp.assessment.suggestion.suggested";case l.ACCEPTED:return"artemisApp.assessment.suggestion.accepted";default:return""}}get tooltip(){if(this.useDefaultText)return this.translateService.instant("artemisApp.assessment.suggestionTitle.default");switch(F.getFeedbackSuggestionType(this.feedback)){case l.SUGGESTED:return this.translateService.instant("artemisApp.assessment.suggestionTitle.suggested");case l.ACCEPTED:return this.translateService.instant("artemisApp.assessment.suggestionTitle.accepted");case l.ADAPTED:return this.translateService.instant("artemisApp.assessment.suggestionTitle.adapted");default:return""}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["jhi-feedback-suggestion-badge"]],inputs:{feedback:"feedback",useDefaultText:"useDefaultText"},decls:8,vars:3,consts:[[1,"badge","suggestion-badge",3,"ngbTooltip"],[3,"icon"],[3,"jhiTranslate"]],template:function(n,i){n&1&&(s(0,"span",0),o(1,`
    `),E(2,"fa-icon",1),o(3,`
    `),s(4,"span",2),o(5,"Suggestion"),a(),o(6,`
`),a(),o(7,`
`)),n&2&&(p("ngbTooltip",i.tooltip),r(2),p("icon",i.faLightbulb),r(2),p("jhiTranslate",i.text))},dependencies:[b,k,I],styles:["[_nghost-%COMP%]{display:inline-block;height:12px}.suggestion-badge[_ngcontent-%COMP%]{position:absolute;top:-8px;vertical-align:middle;background-color:var(--feedback-suggestions-primary);cursor:default}"]})}return t})();function N(t,_){if(t&1){let e=S();o(0,`
    `),s(1,"fa-icon",0),y("click",function(){C(e);let i=u();return h(i.toggle())}),a(),o(2,`
`)}if(t&2){let e=u();r(),p("icon",e.linkIcon)("ngbTooltip",e.setTooltip(e.instruction))}}function O(t,_){if(t&1){let e=S();o(0,`
    `),s(1,"fa-icon",1),P(2,"artemisTranslate"),y("mouseleave",function(){C(e);let i=u();return h(i.toggle())})("click",function(){C(e);let i=u();return h(i.removeLink())}),a(),o(3,`
`)}if(t&2){let e=u();r(),p("ngClass","text-danger")("icon",e.confirmIcon)("ngbTooltip",G(2,3,"artemisApp.assessment.messages.removeAssessmentInstructionLink"))}}var ge=(()=>{class t{artemisTranslatePipe=g(w);linkIcon=R;feedback;instruction;confirmIcon=B;showConfirm=!1;ngOnInit(){this.instruction=this.feedback.gradingInstruction}removeLink(){this.toggle(),this.feedback.gradingInstruction=void 0}setTooltip(e){return this.artemisTranslatePipe.transform("artemisApp.exercise.assessmentInstruction")+e.instructionDescription}toggle(){this.showConfirm=!this.showConfirm}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["jhi-grading-instruction-link-icon"]],inputs:{linkIcon:"linkIcon",feedback:"feedback"},decls:2,vars:2,consts:[[3,"click","icon","ngbTooltip"],[3,"mouseleave","click","ngClass","icon","ngbTooltip"]],template:function(n,i){n&1&&T(0,N,3,2)(1,O,4,5),n&2&&(m(i.showConfirm?-1:0),r(),m(i.showConfirm?1:-1))},dependencies:[k,b,L,w],encapsulation:2})}return t})();var U=()=>({backgroundColor:"#3e8acc"}),$=()=>({backgroundColor:"#ffa561"});function q(t,_){t&1&&(o(0,`
        `),s(1,"h5",0),o(2,`
            `),s(3,"span",1),o(4,"First correction round"),a(),o(5,`
        `),a(),o(6,`
    `)),t&2&&(r(3),p("ngStyle",D(1,U)))}function J(t,_){t&1&&(o(0,`
        `),s(1,"h5",0),o(2,`
            `),s(3,"span",2),o(4,"Second correction round"),a(),o(5,`
        `),a(),o(6,`
    `)),t&2&&(r(3),p("ngStyle",D(1,$)))}var ke=(()=>{class t{feedback;highlightDifferences=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["jhi-assessment-correction-round-badge"]],inputs:{feedback:"feedback",highlightDifferences:"highlightDifferences"},decls:6,vars:2,consts:[[1,"correction-label"],["jhiTranslate","artemisApp.assessment.diffView.correctionRoundDiffFirst",1,"badge","text-white","me-1",3,"ngStyle"],["jhiTranslate","artemisApp.assessment.diffView.correctionRoundDiffSecond",1,"badge","text-white","me-1",3,"ngStyle"]],template:function(n,i){n&1&&(s(0,"div"),o(1,`
    `),o(2,`
    `),T(3,q,7,2)(4,J,7,2),a(),o(5,`
`)),n&2&&(r(3),m(i.highlightDifferences&&i.feedback.copiedFeedbackId?3:-1),r(),m(i.highlightDifferences&&!i.feedback.copiedFeedbackId?4:-1))},dependencies:[I,j],styles:[".correction-label[_ngcontent-%COMP%]{text-align:center}"]})}return t})();var _e=(()=>{class t{transform(e){return e.detailText?e.detailText:e.gradingInstruction?.feedback}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=x({name:"feedbackContent",type:t,pure:!1})}return t})();var Se=(()=>{class t{transform(e,n=""){return e?`${n}"${e}"`:""}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=x({name:"quoted",type:t,pure:!0})}return t})();export{Q as a,ie as b,ge as c,ke as d,_e as e,Se as f};
//# sourceMappingURL=chunk-GITU5WHL.js.map

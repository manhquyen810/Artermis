import{a as Q}from"./chunk-F6JOZY6H.js";import{a as N,b as z}from"./chunk-YLNI6ED3.js";import"./chunk-ZFM7LHJQ.js";import{c as G}from"./chunk-JNO6DNVW.js";import{b as O}from"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import{v as E}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import{c as V}from"./chunk-TL3DYXRE.js";import{b as h,c as k}from"./chunk-JXJXC4DZ.js";import{d as D}from"./chunk-EDXSOKK5.js";import{b as M}from"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{Bb as R,Lc as j,p as w}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as F}from"./chunk-U54OSGNH.js";import"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as o,Dc as S,Ea as f,Ma as g,Mc as C,Na as x,Oc as s,Tb as P,Yc as I,Zb as v,Zc as U,_c as T,dd as t,ed as p,kc as _,sc as m,xc as r,yc as a,yd as A,zc as l,zd as y}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var q=["fileInput"];function H(i,d){if(i&1&&(t(0,`
            `),r(1,"div",3),t(2,`
                `),l(3,"dt",6),t(4,`
                `),r(5,"dd"),t(6),a(),t(7,`
            `),a(),t(8,`
        `)),i&2){let e=s(2);o(6),p(e.currentUser.name)}}function J(i,d){if(i&1&&(t(0,`
            `),r(1,"div",3),t(2,`
                `),l(3,"dt",7),t(4,`
                `),r(5,"dd"),t(6),a(),t(7,`
            `),a(),t(8,`
        `)),i&2){let e=s(2);o(6),p(e.currentUser.login)}}function K(i,d){if(i&1&&(t(0,`
            `),r(1,"div",3),t(2,`
                `),l(3,"dt",8),t(4,`
                `),r(5,"dd"),t(6),a(),t(7,`
            `),a(),t(8,`
        `)),i&2){let e=s(2);o(6),p(e.currentUser.email)}}function W(i,d){if(i&1&&(t(0,`
            `),r(1,"div",3),t(2,`
                `),l(3,"dt",9),t(4,`
                `),r(5,"dd"),t(6),a(),t(7,`
            `),a(),t(8,`
        `)),i&2){let e=s(2);o(6),p(e.currentUser.visibleRegistrationNumber)}}function X(i,d){if(i&1&&(t(0,`
            `),r(1,"div",3),t(2,`
                `),l(3,"dt",10),t(4,`
                `),r(5,"dd"),t(6),A(7,"artemisDate"),a(),t(8,`
            `),a(),t(9,`
        `)),i&2){let e=s(2);o(6),p(y(7,1,e.currentUser.createdDate))}}function Y(i,d){if(i&1){let e=S();t(0,`
                `),r(1,"div",11),t(2,`
                    `),l(3,"jhi-secured-image",12),t(4,`

                    `),r(5,"button",13),C("click",function(){g(e);let c=s(2);return x(c.deleteUserImage())}),t(6,`
                        `),l(7,"fa-icon",14),t(8,`
                    `),a(),t(9,`

                    `),r(10,"button",15),C("click",function(){g(e);let c=s(2);return x(c.triggerUserImageFileInput())}),t(11,`
                        `),l(12,"fa-icon",14),t(13,`
                    `),a(),t(14,`
                `),a(),t(15,`
            `)}if(i&2){let e=s(2);o(3),_("src",e.currentUser.imageUrl)("cachingStrategy",e.CachingStrategy.LOCAL_STORAGE),o(4),_("icon",e.faTrash),o(5),_("icon",e.faPen)}}function Z(i,d){if(i&1){let e=S();t(0,`
                `),r(1,"button",16),C("click",function(){g(e);let c=s(2);return x(c.triggerUserImageFileInput())}),t(2,`
                    `),l(3,"fa-icon",14),t(4,`
                    `),l(5,"div",17),t(6,`
                `),a(),t(7,`
            `)}if(i&2){let e=s(2);o(3),_("icon",e.faPlus)}}function $(i,d){if(i&1){let e=S();t(0,`
    `),r(1,"div",2),t(2,`
        `),v(3,H,9,1)(4,J,9,1)(5,K,9,1)(6,W,9,1)(7,X,10,3),r(8,"div",3),t(9,`
            `),l(10,"dt",4),t(11,`
            `),r(12,"input",5,0),C("change",function(c){g(e);let u=s();return x(u.setUserImage(c))}),a(),t(14,`
            `),v(15,Y,16,4)(16,Z,8,1),a(),t(17,`
    `),a(),t(18,`
`)}if(i&2){let e=s();o(3),m(e.currentUser.name?3:-1),o(),m(e.currentUser.login?4:-1),o(),m(e.currentUser.email?5:-1),o(),m(e.currentUser.visibleRegistrationNumber?6:-1),o(),m(e.currentUser.createdDate?7:-1),o(8),m(e.currentUser.imageUrl?15:-1),o(),m(e.currentUser.imageUrl?-1:16)}}var _e=(()=>{class i{accountService=f(M);modalService=f(E);userSettingsService=f(V);alertService=f(k);currentUser;croppedImage;fileInput;faPen=w;faTrash=R;faPlus=j;ngOnInit(){this.accountService.getAuthenticationState().subscribe(e=>{this.currentUser=e})}setUserImage(e){let n=e.currentTarget;if(n.files&&n.files.length>0){let c=this.modalService.open(Q,{size:"m"});c.componentInstance.roundCropper=!1,c.componentInstance.fileFormat="jpeg",c.componentInstance.uploadFile=n.files[0];let u=n.files[0].type;c.result.then(b=>{if(b){let B=b.replace("data:image/jpeg;base64,",""),L=O(B,u);this.subscribeToUpdateProfilePictureResponse(this.userSettingsService.updateProfilePicture(L))}})}n.value=""}deleteUserImage(){this.subscribeToRemoveProfilePictureResponse(this.userSettingsService.removeProfilePicture())}triggerUserImageFileInput(){this.fileInput.nativeElement.click()}subscribeToUpdateProfilePictureResponse(e){e.subscribe({next:n=>this.onProfilePictureUploadSuccess(n.body),error:n=>this.onProfilePictureUploadError(n)})}subscribeToRemoveProfilePictureResponse(e){e.subscribe({next:()=>this.onProfilePictureRemoveSuccess(),error:n=>this.onProfilePictureRemoveError(n)})}onProfilePictureUploadSuccess(e){e!==null&&e.imageUrl!==void 0&&(this.currentUser.imageUrl=e.imageUrl,this.accountService.setImageUrl(e.imageUrl))}onProfilePictureUploadError(e){let n=e.error?e.error.title:e.headers?.get("x-artemisapp-alert");n&&this.alertService.addAlert({type:h.DANGER,message:n,disableTranslation:!0})}onProfilePictureRemoveSuccess(){this.currentUser.imageUrl=void 0,this.accountService.setImageUrl(void 0)}onProfilePictureRemoveError(e){let n=e.error?e.error.title:e.headers?.get("x-artemisapp-alert");n&&this.alertService.addAlert({type:h.DANGER,message:n,disableTranslation:!0})}CachingStrategy=N;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=P({type:i,selectors:[["jhi-account-information"]],viewQuery:function(n,c){if(n&1&&I(q,5),n&2){let u;U(u=T())&&(c.fileInput=u.first)}},decls:3,vars:1,consts:[["fileInput",""],["jhiTranslate","artemisApp.userSettings.accountInformation"],[1,"list-group","d-block"],[1,"list-group-item"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.profilePicture"],["type","file","accept","image/png, image/jpeg",2,"display","none",3,"change"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.fullName"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.login"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.email"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.registrationNumber"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.joinedArtemis"],[1,"position-relative","d-inline-block","rounded-3","overflow-hidden"],[1,"secured-image",3,"src","cachingStrategy"],["id","delete-course-icon","type","button",1,"btn","icon-button-wrapper","btn-danger","position-absolute","bottom-0","start-0","mb-1","ms-1",3,"click"],[3,"icon"],["id","edit-course-icon","type","button",1,"btn","icon-button-wrapper","btn-warning","position-absolute","bottom-0","end-0","mb-1","me-1",3,"click"],[1,"btn","btn-primary","mt-1",3,"click"],["jhiTranslate","artemisApp.userSettings.accountInformationPage.addProfilePicture",1,"d-inline"]],template:function(n,c){n&1&&(l(0,"h1",1),t(1,`
`),v(2,$,19,7)),n&2&&(o(2),m(c.currentUser?2:-1))},dependencies:[F,z,D,G],styles:["#apply-changes-button[_ngcontent-%COMP%]{width:250px;height:40px;font-size:large;border:0}h3[_ngcontent-%COMP%]{font-weight:700;text-underline-offset:3px}dt[_ngcontent-%COMP%]{font-size:large;font-weight:500}dd[_ngcontent-%COMP%]{font-size:larger}.userSettings-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:gray;font-size:large;font-weight:bolder}.userSettings-info[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{color:gray}.form-check[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}"]})}return i})();export{_e as AccountInformationComponent};
//# sourceMappingURL=account-information.component-UILOQ2OJ.js.map

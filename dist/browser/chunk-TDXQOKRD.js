import{b as l}from"./chunk-IJRVZ46L.js";import{e as g,f as p,g as c,h as o}from"./chunk-U4DJRHYQ.js";import{a as d,b as A}from"./chunk-5JBXU6VG.js";import{a as f}from"./chunk-NOBD5HSR.js";function y(e){return e.id?e.quizMode===A.BATCHED&&e.quizBatches?.length?!1:e.status!==d.ACTIVE&&e.isAtLeastEditor&&!e.quizEnded:!0}function S(e,s,t){if(e.points==null||e.points<=0||e.points>g||e.explanation&&e.explanation.length>c||e.hint&&e.hint.length>o)return!1;switch(e.type){case l.MULTIPLE_CHOICE:{let i=e,n=i.answerOptions.filter(a=>a.isCorrect).length;return(i.singleChoice?n===1:n>0)&&e.title&&e.title!==""&&e.title.length<p&&i.answerOptions.every(a=>a.isCorrect!==void 0&&(!a.explanation||a.explanation.length<=c)&&(!a.hint||a.hint.length<=o))}case l.DRAG_AND_DROP:{let i=e;return e.title&&e.title!==""&&e.title.length<p&&i.correctMappings&&i.correctMappings.length>0&&s.solve(i).length&&s.validateNoMisleadingCorrectMapping(i)}case l.SHORT_ANSWER:{let i=e;return e.title&&e.title!==""&&i.correctMappings&&i.correctMappings.length>0&&t.validateNoMisleadingShortAnswerMapping(i)&&t.everySpotHasASolution(i.correctMappings,i.spots)&&t.everyMappedSolutionHasASpot(i.correctMappings)&&i.solutions?.filter(n=>n.text.trim()==="").length===0&&i.solutions?.filter(n=>n.text.trim().length>=p).length===0&&!t.hasMappingDuplicateValues(i.correctMappings)&&t.atLeastAsManySolutionsAsSpots(i)}default:return f(new Error("Unknown question type: "+e)),e.title&&e.title!==""}}function z(e,s,t,i,n){if((!s.title||s.title==="")&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionTitle",translateValues:{index:t+1}}),s.points==null?e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionScore",translateValues:{index:t+1}}):(s.points<=0||s.points>g)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionScoreInvalid",translateValues:{index:t+1}}),s.type===l.MULTIPLE_CHOICE){let a=s,h=a.answerOptions.filter(r=>r.isCorrect).length;h===0&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionCorrectAnswerOption",translateValues:{index:t+1}}),a.singleChoice&&h>1&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionSingleChoiceCorrectAnswerOptions",translateValues:{index:t+1}}),a.answerOptions.every(r=>r.explanation!=="")||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.explanationIsMissing",translateValues:{index:t+1}}),a.answerOptions.some(r=>r.explanation&&r.explanation.length>c)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.answerExplanationLength",translateValues:{index:t+1,threshold:c}}),a.answerOptions.some(r=>r.hint&&r.hint.length>o)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.answerHintLength",translateValues:{index:t+1,threshold:o}}),a.answerOptions.some(r=>r.isCorrect===void 0)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.multipleChoiceQuestionAnswerOptionInvalid",translateValues:{index:t+1,threshold:o}})}if(s.title&&s.title.length>=p&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionTitleLength",translateValues:{index:t+1,threshold:p}}),s.explanation&&s.explanation.length>c&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionExplanationLength",translateValues:{index:t+1,threshold:c}}),s.hint&&s.hint.length>o&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionHintLength",translateValues:{index:t+1,threshold:o}}),s.type===l.DRAG_AND_DROP){let a=s;!a.correctMappings||a.correctMappings.length===0?e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionCorrectMapping",translateValues:{index:t+1}}):i.solve(a,[]).length===0&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionUnsolvable",translateValues:{index:t+1}}),i.validateNoMisleadingCorrectMapping(a)||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.misleadingCorrectMapping",translateValues:{index:t+1}})}if(s.type===l.SHORT_ANSWER){let a=s;(!a.correctMappings||a.correctMappings.length===0)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.questionCorrectMapping",translateValues:{index:t+1}}),n.validateNoMisleadingShortAnswerMapping(a)||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.misleadingCorrectMapping",translateValues:{index:t+1}}),n.everySpotHasASolution(a.correctMappings,a.spots)||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.shortAnswerQuestionEverySpotHasASolution",translateValues:{index:t+1}}),n.everyMappedSolutionHasASpot(a.correctMappings)||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.shortAnswerQuestionEveryMappedSolutionHasASpot",translateValues:{index:t+1}}),a.solutions?.filter(h=>h.text.trim()==="").length!==0&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.shortAnswerQuestionSolutionHasNoValue",translateValues:{index:t+1}}),a.solutions?.filter(h=>h.text.trim().length>=p).length!==0&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.quizAnswerOptionLength",translateValues:{index:t+1,threshold:p}}),n.hasMappingDuplicateValues(a.correctMappings)&&e.push({translateKey:"artemisApp.quizExercise.invalidReasons.shortAnswerQuestionDuplicateMapping",translateValues:{index:t+1}}),n.atLeastAsManySolutionsAsSpots(a)||e.push({translateKey:"artemisApp.quizExercise.invalidReasons.shortAnswerQuestionUnsolvable",translateValues:{index:t+1}})}}function V(e){let s={};return e.forEach(t=>{let i=t.invalid,n=[];t.type===l.MULTIPLE_CHOICE?u(t.answerOptions,n):t.type===l.DRAG_AND_DROP?(u(t.dragItems,n),u(t.correctMappings,n),u(t.dropLocations,n)):(u(t.solutions,n),u(t.correctMappings,n),u(t.spots,n)),(i||n.length!==0)&&(s[t.id]=n.length!==0?n:[])}),s}function u(e,s){e!==void 0&&e.forEach(function(t){t.invalid&&s.push(t)})}export{y as a,S as b,z as c,V as d};
//# sourceMappingURL=chunk-TDXQOKRD.js.map

import{c as m}from"./chunk-JXJXC4DZ.js";import{b as f}from"./chunk-R5BZWVRQ.js";import{a as p,b as h}from"./chunk-XUCCGZJR.js";import{h as l}from"./chunk-M6Z6DKZQ.js";import{O as u}from"./chunk-IOA4DPXY.js";import{Ea as r,aa as a,s as n,ya as i}from"./chunk-5LC5EQRR.js";var g=(()=>{class e{http=r(u);localStorage=r(p);sessionStorage=r(h);login(t){return this.http.post("api/core/public/authenticate",t)}loginSAML2(t){return this.http.post("api/core/public/saml2",t.toString())}logout(){return this.http.post("api/core/public/logout",null)}clearCaches(){return this.localStorage.clear(),this.sessionStorage.clear(),n(void 0)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var W=(()=>{class e{logoutWasForceful=!1;accountService=r(f);authServerProvider=r(g);router=r(l);alertService=r(m);login(t){return new Promise((o,s)=>{this.authServerProvider.login(t).subscribe({next:()=>{this.accountService.identity(!0).then(()=>{o()})},error:c=>{this.logout(!1),s(c)}})})}loginSAML2(t){return new Promise((o,s)=>{this.authServerProvider.loginSAML2(t).subscribe({next:()=>{this.accountService.identity(!0).then(()=>{o()})},error:c=>{this.logout(!1),s(c)}})})}logout(t){this.logoutWasForceful=!t,t?this.authServerProvider.logout().pipe(a(()=>{this.onLogout()})).subscribe():this.onLogout()}onLogout(){this.accountService.authenticate(void 0),this.alertService.closeAll(),this.router.navigateByUrl("/")}lastLogoutWasForceful(){return this.logoutWasForceful}static \u0275fac=function(o){return new(o||e)};static \u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{W as a};
//# sourceMappingURL=chunk-LBU7A5ET.js.map

import{a as y}from"./chunk-OLYZKWDJ.js";import{a as ce}from"./chunk-5VL4PADI.js";import{a as se}from"./chunk-KYUIVIOO.js";import{a as oe,b as ae}from"./chunk-LWFATUYQ.js";import{a as ne}from"./chunk-JRBFEQNN.js";import"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import{a as re}from"./chunk-OTCBNILH.js";import{a as ie}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{c as X}from"./chunk-5MVJAZRV.js";import{P as J,q as R,r as Y,s as G}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-K3W6YFKH.js";import{c as W}from"./chunk-JXJXC4DZ.js";import{d as Z,f as ee}from"./chunk-EDXSOKK5.js";import"./chunk-DID2YGL7.js";import{Sa as K}from"./chunk-Z4VHWOB5.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as te}from"./chunk-U54OSGNH.js";import{f as Q}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{E as $,n as H}from"./chunk-IOA4DPXY.js";import{Db as o,Dc as D,Ea as m,Ib as M,Ma as k,Mc as q,Na as I,Nb as A,Oc as x,Rd as O,Sc as C,Tb as g,U as _,Za as T,Zb as v,ad as B,bd as V,dd as e,ed as P,f as h,g as F,kc as p,pa as E,rd as z,sc as b,sd as U,uc as d,vc as u,wb as j,wc as f,xc as a,yc as s,yd as L,z as S,zc as c,zd as N}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function de(i,l){if(i&1&&(e(0,`
                `),c(1,"jhi-custom-exercise-category-badge",5),e(2,`
            `)),i&2){let t=l.$implicit;o(),p("category",t)}}var le=(()=>{class i{ngUnsubscribe=new h;faq=T.required();ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=g({type:i,selectors:[["jhi-course-faq-accordion"]],inputs:{faq:[1,"faq"]},decls:19,vars:4,consts:[[1,"faq-container"],[1,"markdown-preview","mb-0"],[1,"badge-container"],[3,"innerHTML"],[1,"mt-0"],[1,"mt-2","ms-1",3,"category"]],template:function(r,n){r&1&&(a(0,"div"),e(1,`
    `),a(2,"div",0),e(3,`
        `),a(4,"h5",1),e(5),s(),e(6,`

        `),a(7,"div",2),e(8,`
            `),u(9,de,3,1,null,null,d),s(),e(11,`
    `),s(),e(12,`
    `),c(13,"div",3),L(14,"htmlForMarkdown"),e(15,`
    `),c(16,"hr",4),e(17,`
`),s(),e(18,`
`)),r&2&&(o(5),P(n.faq().questionTitle),o(4),f(n.faq().categories),o(4),p("innerHTML",N(14,2,n.faq().questionAnswer),j))},dependencies:[y,ne],styles:[".faq-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;box-sizing:border-box}.badge-container[_ngcontent-%COMP%]{display:flex;margin-left:auto}"]})}return i})();var ue=["faqElement"],fe=(i,l)=>({"btn-secondary":i,"btn-success":l}),he=i=>({num:i});function ge(i,l){if(i&1){let t=D();e(0,`
                        `),a(1,"li"),e(2,`
                            `),a(3,"label",8),e(4,`
                                `),a(5,"input",9),q("change",function(){let n=k(t).$implicit,w=x(2);return I(w.toggleFilters(n.category))}),s(),e(6,`
                                `),c(7,"jhi-custom-exercise-category-badge",10),e(8,`
                            `),s(),e(9,`
                        `),s(),e(10,`
                    `)}if(i&2){let t=l.$implicit,r=x(2);o(5),C("id","filter-",t.category,""),p("checked",r.activeFilters.has(t.category)),o(2),p("category",t)}}function ve(i,l){if(i&1&&(e(0,`
                `),a(1,"ul",7),e(2,`
                    `),u(3,ge,11,4,null,null,d),s(),e(5,`
            `)),i&2){let t=x();o(3),f(t.existingCategories)}}function be(i,l){i&1&&(e(0,`
        `),c(1,"h2",11),e(2,`
    `))}function xe(i,l){if(i&1&&(e(0,`
            `),a(1,"div",12,0),e(3,`
                `),c(4,"jhi-course-faq-accordion",13),e(5,`
            `),s(),e(6,`
        `)),i&2){let t=l.$implicit;o(),C("id","faq-",t.id,""),o(3),p("faq",t)}}function ye(i,l){i&1&&(e(0,`
        `),c(1,"h2",14),e(2,`
    `))}var We=(()=>{class i{faqElements=A("faqElement");ngUnsubscribe=new h;parentParamSubscription;courseId;referencedFaqId;faqs;faqState=ae.ACCEPTED;filteredFaqs;existingCategories;activeFilters=new Set;hasCategories=!1;isCollapsed=!1;searchInput=new F("");ButtonType=ie;faFilter=K;route=m(Q);faqService=m(oe);alertService=m(W);sortService=m(re);renderer=m(M);constructor(){O(()=>{this.referencedFaqId&&this.scrollToFaq(this.referencedFaqId)})}ngOnInit(){this.parentParamSubscription=this.route.parent.params.subscribe(t=>{this.courseId=Number(t.courseId),this.loadFaqs(),this.loadCourseExerciseCategories(this.courseId)}),this.route.queryParams.pipe(E(this.ngUnsubscribe)).subscribe(t=>{this.referencedFaqId=t.faqId}),this.searchInput.pipe(_(300)).subscribe(t=>{this.refreshFaqList(t)})}loadCourseExerciseCategories(t){se(t,this.alertService,this.faqService,this.faqState).subscribe(r=>{this.existingCategories=r,this.hasCategories=r.length>0})}loadFaqs(){this.faqService.findAllByCourseIdAndState(this.courseId,this.faqState).pipe(S(t=>t.body)).subscribe({next:t=>{this.faqs=t,this.applyFilters(),this.sortFaqs()},error:t=>X(this.alertService,t)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.parentParamSubscription?.unsubscribe(),this.searchInput.complete()}toggleFilters(t){this.activeFilters=this.faqService.toggleFilter(t,this.activeFilters),this.refreshFaqList(this.searchInput.getValue())}applyFilters(){this.filteredFaqs=this.faqService.applyFilters(this.activeFilters,this.faqs)}applySearch(t){this.filteredFaqs=this.filteredFaqs.filter(r=>this.faqService.hasSearchTokens(r,t))}setSearchValue(t){this.searchInput.next(t)}refreshFaqList(t){this.applyFilters(),this.applySearch(t)}sortFaqs(){this.sortService.sortByProperty(this.filteredFaqs,"id",!0)}scrollToFaq(t){let r=this.faqElements().find(n=>n.nativeElement.id==="faq-"+String(t));r&&this.renderer.selectRootElement(r.nativeElement,!0).scrollIntoView({behavior:"smooth",block:"start"})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=g({type:i,selectors:[["jhi-course-faq"]],viewQuery:function(r,n){r&1&&B(n.faqElements,ue,5),r&2&&V()},decls:28,vars:11,consts:[["faqElement",""],[1,"input-group","mb-2","rounded-3","p-2","me-2","module-bg","d-flex","justify-content-between"],[1,"flex-grow-1",3,"newSearchEvent"],["aria-label","Filter Dropdown","ngbDropdown","",1,"ms-2","me-2"],["ngbDropdownToggle","","id","filter-dropdown-button",1,"btn",3,"ngClass"],[3,"icon"],["jhiTranslate","artemisApp.courseOverview.exerciseList.filter",1,"d-s-none","d-md-inline",3,"translateValues"],["ngbDropdownMenu","","aria-labelledby","filter-dropdown-button",1,"checkbox-menu","text-nowrap","pe-2"],[1,"d-flex","align-items-center"],["type","checkbox",1,"ms-2","form-check-input",3,"change","id","checked"],[1,"mt-2","ms-1",3,"category"],["jhiTranslate","artemisApp.faq.noExisting",1,"markdown-preview"],[3,"id"],[3,"faq"],["jhiTranslate","artemisApp.faq.noMatching",1,"markdown-preview"]],template:function(r,n){r&1&&(a(0,"div"),e(1,`
    `),a(2,"div",1),e(3,`
        `),a(4,"jhi-search-filter",2),q("newSearchEvent",function(pe){return n.setSearchValue(pe)}),s(),e(5,`
        `),a(6,"div",3),e(7,`
            `),a(8,"button",4),e(9,`
                `),c(10,"fa-icon",5),e(11,`
                `),c(12,"span",6),e(13,`
            `),s(),e(14,`
            `),v(15,ve,6,0),s(),e(16,`
    `),s(),e(17,`
    `),c(18,"hr"),e(19,`
    `),v(20,be,3,0),a(21,"div"),e(22,`
        `),u(23,xe,7,3,null,null,d),s(),e(25,`
    `),v(26,ye,3,0),s(),e(27,`
`)),r&2&&(o(8),p("ngClass",U(6,fe,n.activeFilters.size===0,n.activeFilters.size>0)),o(2),p("icon",n.faFilter),o(2),p("translateValues",z(9,he,n.activeFilters.size)),o(3),b(n.hasCategories?15:-1),o(5),b((n.faqs==null?null:n.faqs.length)===0?20:-1),o(3),f(n.filteredFaqs),o(3),b((n.filteredFaqs==null?null:n.filteredFaqs.length)===0&&n.faqs.length>0?26:-1))},dependencies:[le,y,ce,J,G,Y,R,te,ee,Z,$,H],styles:[`.course-body-container{position:relative}.refresh-overlay{position:absolute;inset:0;display:flex;justify-content:center;align-items:flex-start;opacity:0;pointer-events:none;transition:.1s ease-out opacity}.refresh-overlay.active{background-color:var(--overview-refresh-overlay-bg-color);opacity:1;pointer-events:auto;transition:.2s ease-in opacity}.refresh-overlay .ng-fa-icon{position:relative;top:calc(47.5vh - 150px);transform:translateY(-50%);color:var(--overview-refresh-overlay-color)}.back-button{cursor:pointer}.current-week-row ::ng-deep>div{background-color:var(--overview-light-primary-background-color)}.statistic-summary{margin-top:25px}.statistic-summary .chart-container{display:inline-flex;align-items:center;justify-content:flex-end;margin-bottom:20px}.statistic-summary .chart-container .chart-text{position:absolute;width:350px}.statistic-summary .color-legend-container{margin-bottom:40px}.statistic-summary .color-legend-container .color-legend-entry{display:inline-flex;align-items:center;width:100%}.exercise-row-container .control-label{cursor:pointer}.exercise-row-container .collapsed{margin-top:1rem;border-bottom:1px solid var(--overview-light-border-color)}.icon-container{display:inline-block;vertical-align:middle;horiz-align:center}.course-information{padding-top:29px}.course-information .exercise-panel .row.has-exercises{cursor:pointer;border-radius:3px}.course-information .exercise-panel .row.has-exercises:hover{background-color:var(--overview-light-background-color)}.course-information .exercise-panel .row.has-exercises:hover .icon{color:var(--primary)}.exercise-divider{height:0;width:100%;margin:1rem 0 .5rem;border-top:1px solid var(--overview-light-border-color)}.color-indicator{height:20px;width:20px;background-color:#0f6ab4;position:relative;top:-4px;margin-right:5px;border-radius:3px}canvas#complete-chart{z-index:99}.dev-button{text-align:left;color:#fff;background-color:#3e8acc;border:none;border-radius:1px}.dev-button:hover{background-color:#0f6ab4}.dev-button:active{box-shadow:0 2px 0 var(--artemis-dark)}.dev-button:disabled{background-color:gray}.btn-primary,.btn-primary:hover,.btn-primary:disabled,.btn-info,.btn-info:hover,.btn-success,.btn-success:hover{color:#fff}@media (max-width: 768px){.col-12{width:100%!important}}.fadeInIcon{animation:fadeIn .3s;animation-iteration-count:initial}@media (max-width: 655px){.horizontal-scroll{overflow-x:auto}}@keyframes fadeIn{0%{opacity:0}50%{opacity:.5}to{visibility:visible;opacity:1}}.exercise-content-sidebar-width{width:calc(100% - 263px)!important;transition:width .1s 0s ease-in-out}.exercise-content-width{width:100%;transition:width .1s 0s ease-in-out}
`,`.second-layer-modal-bg{background-color:var(--secondary)}.module-bg{background-color:var(--module-bg)}
`],encapsulation:2})}return i})();export{We as CourseFaqComponent};
//# sourceMappingURL=course-faq.component-7GZTQI7P.js.map

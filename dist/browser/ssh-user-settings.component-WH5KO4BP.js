import{a as G}from"./chunk-PA7LJOOC.js";import{a as J}from"./chunk-DTGQ3VYB.js";import{b as X}from"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import{a as R,b as q}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{c as Y}from"./chunk-JNO6DNVW.js";import"./chunk-EELXLOHY.js";import{o as z,p as U,q as B,r as L,s as F}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import{c as V}from"./chunk-JXJXC4DZ.js";import{d as Q}from"./chunk-EDXSOKK5.js";import{p as h}from"./chunk-DID2YGL7.js";import{Bb as $,Q as I,mc as H,tb as N}from"./chunk-Z4VHWOB5.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as W}from"./chunk-U54OSGNH.js";import{i as K}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Ad as A,Db as o,Dc as M,Ea as u,Ma as v,Mc as O,Na as C,Oc as d,Sc as k,Tb as P,Zb as c,dd as e,f as y,fd as g,kc as l,qd as x,ra as b,rd as D,sc as p,uc as w,vc as E,wc as T,xc as t,yc as n,yd as j,zc as a}from"./chunk-5LC5EQRR.js";import{a as f,b as _}from"./chunk-3E746U5Y.js";var Z=()=>["add"],te=()=>["fingerprints"],ne=r=>["view",r];function ie(r,m){if(r&1&&(e(0,`
            `),t(1,"div",2),e(2,`
                `),a(3,"div",3),e(4,`
                `),a(5,"h4",4),e(6,`
                `),t(7,"div",5),e(8,`
                    `),t(9,"p"),e(10,`
                        `),t(11,"span",6),e(12," "),n(),e(13,`
                        `),a(14,"jhi-documentation-link",7),e(15,`
                    `),n(),e(16,`
                `),n(),e(17,`

                `),t(18,"div",8),e(19,`
                    `),t(20,"a",9),e(21,`
                        `),a(22,"span",10),e(23,`
                    `),n(),e(24,`
                `),n(),e(25,`
            `),n(),e(26,`
        `)),r&2){let i=d(2);o(14),l("documentationType",i.documentationType)("displayString","artemisApp.userSettings.sshSettingsPage.learnMore"),o(6),l("routerLink",x(3,Z))}}function re(r,m){if(r&1&&(e(0,`
                                        `),t(1,"div",35),e(2,`
                                            `),a(3,"div",36),e(4,`
                                            `),t(5,"div"),e(6),j(7,"artemisDate"),n(),e(8,`
                                        `),n(),e(9,`
                                    `)),r&2){let i=d().$implicit;o(3),k("jhiTranslate","artemisApp.userSettings.sshSettingsPage.",i.hasExpired?"hasExpiredOn":"expiresOn",""),o(3),g(`
                                                `,A(7,3,i.expiryDate,"long-date"),`
                                            `)}}function oe(r,m){if(r&1){let i=M();e(0,`
                            `),t(1,"tr"),e(2,`
                                `),t(3,"td",22),e(4,`
                                    `),t(5,"div",23),e(6),n(),e(7,`
                                    `),t(8,"div",24),e(9),n(),e(10,`
                                    `),c(11,re,10,6),n(),e(12,`

                                `),t(13,"td",25),e(14,`
                                    `),t(15,"div",26),e(16,`
                                        `),t(17,"div",27),e(18,`
                                            `),t(19,"div",28),e(20,`
                                                `),a(21,"fa-icon",29),e(22,`
                                            `),n(),e(23,`
                                        `),n(),e(24,`
                                        `),t(25,"div",30),e(26,`
                                            `),t(27,"a",31),e(28,`
                                                `),a(29,"div",32),e(30,`
                                            `),n(),e(31,`

                                            `),t(32,"button",33),O("delete",function(){let S=v(i).$implicit,ee=d(3);return C(ee.deleteSshKey(S))}),e(33,`
                                                `),a(34,"div",34),e(35,`
                                            `),n(),e(36,`
                                        `),n(),e(37,`
                                    `),n(),e(38,`
                                `),n(),e(39,`
                            `),n(),e(40,`
                        `)}if(r&2){let i=m.$implicit,s=d(3);o(6),g(`
                                        `,i.label,`
                                    `),o(3),g(`
                                        `,i.keyHash,`
                                    `),o(2),p(i.expiryDate?11:-1),o(10),l("fixedWidth",!0)("icon",s.faEllipsis),o(6),l("routerLink",D(8,ne,i.id)),o(5),l("renderButtonText",!1)("dialogError",s.dialogError$)}}function ae(r,m){if(r&1&&(e(0,`
            `),t(1,"div",11),e(2,`
                `),t(3,"div",12),e(4,`
                    `),t(5,"p"),e(6,`
                        `),t(7,"span",13),e(8," "),n(),e(9,`
                        `),a(10,"jhi-documentation-link",7),e(11,`
                    `),n(),e(12,`
                `),n(),e(13,`

                `),t(14,"table",14),e(15,`
                    `),t(16,"thead"),e(17,`
                        `),t(18,"tr"),e(19,`
                            `),a(20,"th",15),e(21,`
                            `),a(22,"th",16),e(23,`
                        `),n(),e(24,`
                    `),n(),e(25,`
                    `),t(26,"tbody"),e(27,`
                        `),E(28,oe,41,10,null,null,w),n(),e(30,`
                `),n(),e(31,`
                `),t(32,"div",17),e(33,`
                    `),a(34,"div"),e(35,`
                    `),t(36,"div"),e(37,`
                        `),t(38,"a",18),e(39,`
                            `),a(40,"span",19),e(41,`
                        `),n(),e(42,`
                    `),n(),e(43,`
                    `),t(44,"div"),e(45,`
                        `),t(46,"a",20),e(47,`
                            `),a(48,"span",21),e(49,`
                        `),n(),e(50,`
                    `),n(),e(51,`
                `),n(),e(52,`
            `),n(),e(53,`
        `)),r&2){let i=d(2);o(10),l("documentationType",i.documentationType)("displayString","artemisApp.userSettings.sshSettingsPage.learnMore"),o(18),T(i.sshPublicKeys),o(10),l("routerLink",x(4,te)),o(8),l("routerLink",x(5,Z))}}function se(r,m){if(r&1&&(e(0,`
    `),t(1,"div",1),e(2,`
        `),e(3,`
        `),c(4,ie,27,4)(5,ae,54,6),n(),e(6,`
`)),r&2){let i=d();o(4),p(i.keyCount===0?4:-1),o(),p(i.keyCount>0?5:-1)}}var Pe=(()=>{class r{sshUserSettingsService=u(G);alertService=u(V);documentationType="SshSetup";faEdit=I;faSave=N;faTrash=$;faEllipsis=H;ButtonType=R;ButtonSize=q;dialogErrorSource=new y;sshPublicKeys=[];keyCount=0;isLoading=!0;currentDate;dialogError$=this.dialogErrorSource.asObservable();ngOnInit(){this.currentDate=h(),this.refreshSshKeys()}ngOnDestroy(){this.dialogErrorSource.complete()}deleteSshKey(i){this.sshUserSettingsService.deleteSshPublicKey(i.id).subscribe({next:()=>{this.alertService.success("artemisApp.userSettings.sshSettingsPage.deleteSuccess"),this.refreshSshKeys()},error:()=>{this.alertService.error("artemisApp.userSettings.sshSettingsPage.deleteFailure")}}),this.dialogErrorSource.next("")}refreshSshKeys(){this.sshUserSettingsService.getSshPublicKeys().pipe(b(i=>{this.sshPublicKeys=i,this.sshUserSettingsService.sshKeys=i,this.sshPublicKeys=this.sshPublicKeys.map(s=>_(f({},s),{hasExpired:s.expiryDate&&h().isAfter(h(s.expiryDate))})),this.keyCount=i.length,this.isLoading=!1})).subscribe({error:()=>{this.isLoading=!1,this.alertService.error("artemisApp.userSettings.sshSettingsPage.loadKeyFailure")}})}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=P({type:r,selectors:[["jhi-account-information"]],decls:4,vars:1,consts:[["jhiTranslate","artemisApp.userSettings.sshSettingsPage.keysTablePageTitle"],[1,"list-group","d-block"],[1,"list-group-item","px-4","py-4"],[1,"mt-4"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.noKeysHaveBeenAdded",1,"text-center","mb-4","mt-8"],[1,"text-center","mt-4","d-flex","justify-content-center","align-items-center","flex-wrap","narrower-box"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.whatToUseSSHForInfo",1,"font-medium"],[3,"documentationType","displayString"],[1,"d-flex","justify-content-center","mb-4"],["data-testid","addNewSshKeyButton",1,"btn","btn-primary","rounded-btn",3,"routerLink"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.addNewSshKey"],[1,"list-group-item"],[1,"d-flex","flex-wrap"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.whatToUseSSHForInfo",1,"mt-4","font-medium"],[1,"table"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.keys"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.actions"],[1,"d-flex","justify-content-between","align-items-center"],[3,"routerLink"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.fingerprints",2,"font-size","small"],[1,"btn","rounded-btn","btn-primary","btn-sm",3,"routerLink"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.addNewSshKey",1,"jhi-btn__title",2,"font-size","small"],[1,"container",2,"max-width","250px"],[2,"font-size","large"],[1,"abbreviate-hash"],[1,"container"],["ngbDropdown","","container","body","placement","bottom auto",1,"navbar-nav","justify-content-end","flex-grow-1","text-decoration-none","pointer",2,"opacity","1"],["ngbDropdownToggle","",1,"nav-item"],[1,"nav-link","px-3"],[1,"ms-2","me-3",2,"opacity","1",3,"fixedWidth","icon"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"d-flex","align-items-center","py-1","px-2",2,"text-decoration","none",3,"routerLink"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.viewExistingSshKey",1,"h6","fw-normal","mb-0","course-title","text-wrap"],["jhiDeleteButton","","ngbDropdownItem","","deleteQuestion","artemisApp.userSettings.sshSettingsPage.deleteSshKeyQuestion",1,"d-flex","align-items-center","py-1","px-2",3,"delete","renderButtonText","dialogError"],["jhiTranslate","artemisApp.userSettings.sshSettingsPage.deleteSshKey",1,"h6","fw-normal","mb-0","course-title","text-wrap"],[1,"text-and-date"],[3,"jhiTranslate"]],template:function(s,S){s&1&&(e(0,`
`),a(1,"h1",0),e(2,`

`),c(3,se,7,2)),s&2&&(o(3),p(S.isLoading?-1:3))},dependencies:[W,J,K,F,L,Q,B,z,U,X,Y],styles:["#apply-changes-button[_ngcontent-%COMP%]{width:250px;height:40px;font-size:large;border:0}h3[_ngcontent-%COMP%]{font-weight:700;text-underline-offset:3px}dt[_ngcontent-%COMP%]{font-size:large;font-weight:500}dd[_ngcontent-%COMP%]{font-size:larger}.userSettings-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:gray;font-size:large;font-weight:bolder}.userSettings-info[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{color:gray}.form-check[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}","textarea[_ngcontent-%COMP%]{max-width:600px;width:100%;height:150px;resize:none;font-size:small;font-family:Bitstream Vera Sans Mono,Courier New,monospace;border-color:var(--border-color)!important}.bold-text[_ngcontent-%COMP%]{font-weight:700}.large-text[_ngcontent-%COMP%]{font-size:large}.small-text[_ngcontent-%COMP%]{font-size:small}.text-and-date[_ngcontent-%COMP%]{display:flex;gap:5px}.small-text-area[_ngcontent-%COMP%]{height:30px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:16px;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px}.btn[_ngcontent-%COMP%]{border-radius:0}.rounded-btn[_ngcontent-%COMP%]{border-radius:2px;border-top-width:0}.bottom-border[_ngcontent-%COMP%]{border-bottom-width:2px}.container[_ngcontent-%COMP%]{position:relative}.narrower-box[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.font-medium[_ngcontent-%COMP%]{font-size:medium}.icon-column[_ngcontent-%COMP%]{width:auto;margin-right:15px}.vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;-ms-transform:translateY(-50%);transform:translateY(-50%)}.abbreviate-hash[_ngcontent-%COMP%]{font-size:x-small;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--ssh-key-settings-table-hover-background)}a[_ngcontent-%COMP%]:link:hover{text-decoration:none!important}.dropdown-content[_ngcontent-%COMP%]{overflow-y:auto;position:absolute;background-color:var(--dropdown-bg);border:1px solid var(--border-color);z-index:3000;border-radius:4px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]})}return r})();export{Pe as SshUserSettingsComponent};
//# sourceMappingURL=ssh-user-settings.component-WH5KO4BP.js.map

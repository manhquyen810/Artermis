{
  "version": 3,
  "sources": ["src/main/webapp/app/lti/lti13-dynamic-registration.component.ts", "src/main/webapp/app/lti/lti13-dynamic-registration.component.html"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { TranslateDirective } from '../shared/language/translate.directive';\r\n\r\n@Component({\r\n    selector: 'jhi-dynamic-registration',\r\n    templateUrl: './lti13-dynamic-registration.component.html',\r\n    imports: [TranslateDirective],\r\n})\r\nexport class Lti13DynamicRegistrationComponent implements OnInit {\r\n    private route = inject(ActivatedRoute);\r\n    private http = inject(HttpClient);\r\n\r\n    courseId: number;\r\n    isRegistering = true;\r\n    registeredSuccessfully: boolean;\r\n\r\n    /**\r\n     * perform LTI 13 dynamic registration\r\n     */\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe((params) => {\r\n            this.courseId = Number(params['courseId']);\r\n        });\r\n\r\n        const openIdConfiguration = this.route.snapshot.queryParamMap.get('openid_configuration');\r\n        const registrationToken = this.route.snapshot.queryParamMap.get('registration_token');\r\n\r\n        if (!openIdConfiguration) {\r\n            this.isRegistering = false;\r\n            this.registeredSuccessfully = false;\r\n            return;\r\n        }\r\n\r\n        let httpParams = new HttpParams().set('openid_configuration', openIdConfiguration);\r\n        if (registrationToken) {\r\n            httpParams = httpParams.set('registration_token', registrationToken);\r\n        }\r\n\r\n        this.http\r\n            .post(`api/lti/admin/lti13/dynamic-registration`, null, { observe: 'response', params: httpParams })\r\n            .subscribe({\r\n                next: () => {\r\n                    this.registeredSuccessfully = true;\r\n                },\r\n                error: () => {\r\n                    this.registeredSuccessfully = false;\r\n                },\r\n            })\r\n            .add(() => {\r\n                this.isRegistering = false;\r\n                (window.opener || window.parent).postMessage({ subject: 'org.imsglobal.lti.close' }, '*');\r\n            });\r\n    }\r\n}\r\n", "<h1 [hidden]=\"!isRegistering\" jhiTranslate=\"artemisApp.lti13.dynamicRegistration.registering\"></h1>\r\n<h2 [hidden]=\"isRegistering || !registeredSuccessfully\" jhiTranslate=\"artemisApp.lti13.dynamicRegistration.registeredSuccessfully\"></h2>\r\n<h2 [hidden]=\"isRegistering || registeredSuccessfully\" jhiTranslate=\"artemisApp.lti13.dynamicRegistration.registerFailed\"></h2>\r\n"],
  "mappings": "gUAUA,IAAaA,GAAiC,IAAA,CAAxC,MAAOA,CAAiC,CAClCC,MAAQC,EAAOC,CAAc,EAC7BC,KAAOF,EAAOG,CAAU,EAEhCC,SACAC,cAAgB,GAChBC,uBAKAC,UAAQ,CACJ,KAAKR,MAAMS,OAAOC,UAAWD,GAAU,CACnC,KAAKJ,SAAWM,OAAOF,EAAO,QAAW,CAC7C,CAAC,EAED,IAAMG,EAAsB,KAAKZ,MAAMa,SAASC,cAAcC,IAAI,sBAAsB,EAClFC,EAAoB,KAAKhB,MAAMa,SAASC,cAAcC,IAAI,oBAAoB,EAEpF,GAAI,CAACH,EAAqB,CACtB,KAAKN,cAAgB,GACrB,KAAKC,uBAAyB,GAC9B,MACJ,CAEA,IAAIU,EAAa,IAAIC,EAAU,EAAGC,IAAI,uBAAwBP,CAAmB,EAC7EI,IACAC,EAAaA,EAAWE,IAAI,qBAAsBH,CAAiB,GAGvE,KAAKb,KACAiB,KAAK,2CAA4C,KAAM,CAAEC,QAAS,WAAYZ,OAAQQ,CAAU,CAAE,EAClGP,UAAU,CACPY,KAAMA,IAAK,CACP,KAAKf,uBAAyB,EAClC,EACAgB,MAAOA,IAAK,CACR,KAAKhB,uBAAyB,EAClC,EACH,EACAiB,IAAI,IAAK,CACN,KAAKlB,cAAgB,IACpBmB,OAAOC,QAAUD,OAAOE,QAAQC,YAAY,CAAEC,QAAS,yBAAyB,EAAI,GAAG,CAC5F,CAAC,CACT,4CA5CS9B,EAAiC,2BAAjCA,EAAiC+B,UAAA,CAAA,CAAA,0BAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,eAAA,mDAAA,EAAA,QAAA,EAAA,CAAA,eAAA,8DAAA,EAAA,QAAA,EAAA,CAAA,eAAA,sDAAA,EAAA,QAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,ICV9CE,EAAA,EAAA,KAAA,CAAA,EACAC,EAAA,EAAA;CAAA,EAAAD,EAAA,EAAA,KAAA,CAAA,EACAC,EAAA,EAAA;CAAA,EAAAD,EAAA,EAAA,KAAA,CAAA,EACAC,EAAA,EAAA;CAAA,SAHIC,EAAA,SAAA,CAAAH,EAAA9B,aAAA,EACAkC,EAAA,CAAA,EAAAD,EAAA,SAAAH,EAAA9B,eAAA,CAAA8B,EAAA7B,sBAAA,EACAiC,EAAA,CAAA,EAAAD,EAAA,SAAAH,EAAA9B,eAAA8B,EAAA7B,sBAAA,kBDMUkC,CAAkB,EAAAC,cAAA,CAAA,CAAA,SAEnB3C,CAAiC,GAAA",
  "names": ["Lti13DynamicRegistrationComponent", "route", "inject", "ActivatedRoute", "http", "HttpClient", "courseId", "isRegistering", "registeredSuccessfully", "ngOnInit", "params", "subscribe", "Number", "openIdConfiguration", "snapshot", "queryParamMap", "get", "registrationToken", "httpParams", "HttpParams", "set", "post", "observe", "next", "error", "add", "window", "opener", "parent", "postMessage", "subject", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275element", "\u0275\u0275text", "\u0275\u0275property", "\u0275\u0275advance", "TranslateDirective", "encapsulation"]
}

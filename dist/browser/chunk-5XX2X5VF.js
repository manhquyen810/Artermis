import{a as H}from"./chunk-6FT4PREA.js";import{a as nt,c as st}from"./chunk-6I3MUES2.js";import{a as it}from"./chunk-JRBFEQNN.js";import{a as et,d as tt}from"./chunk-O26CMRR4.js";import{a as qe}from"./chunk-AZBLKUAM.js";import{c as pe,d as U,e as Z,g as E,j as K}from"./chunk-2CUFQLAH.js";import{a as Je,b as Ye}from"./chunk-EELXLOHY.js";import{K as ke,v as Pe}from"./chunk-VZRSC3LP.js";import{K as Le,c as ye,h as Oe,m as Ae}from"./chunk-WA5GEAJB.js";import{e as Qe}from"./chunk-5GXY5RYT.js";import{a as Ze}from"./chunk-K3W6YFKH.js";import{d as ie}from"./chunk-EDXSOKK5.js";import{b as te}from"./chunk-R5BZWVRQ.js";import{Bb as je,Bd as Ge,Ed as We,I as Re,Ja as De,Mc as ze,Nb as Ve,Nc as $e,eb as Ne,kc as Ue,rc as He,wb as Fe,yd as Xe}from"./chunk-Z4VHWOB5.js";import{a as ee}from"./chunk-5ZXXURLP.js";import{a as Ke}from"./chunk-U54OSGNH.js";import{i as Ee}from"./chunk-M6Z6DKZQ.js";import{c as Be}from"./chunk-E2KBL4LX.js";import{O as q,n as Te}from"./chunk-IOA4DPXY.js";import{Ad as v,Db as r,Dc as I,Ea as f,Ed as we,La as he,Ma as b,Mc as C,Na as x,Oc as o,P as k,Rc as xe,Tb as X,Va as le,Wb as ge,Yc as F,Zb as g,Zc as j,_c as V,cd as _e,dd as n,ed as Q,f as ue,fd as J,g as M,gd as Ce,kc as u,lc as G,ld as Se,mc as O,md as ve,nc as fe,nd as Ie,ra as B,rd as Me,s as z,sc as h,t as P,tc as be,uc as W,vc as A,wb as $,wc as L,x as me,xc as c,ya as T,yc as l,yd as S,z as w,zc as m,zd as Y}from"./chunk-5LC5EQRR.js";var y=function(t){return t.LLM="LLM",t.USER="USER",t}(y||{}),ne=class{id;content;sentAt;sender;helpful},se=class{id;content;sentAt;sender;messageDifferentiator};var d=function(t){return t.SESSION_LOAD_FAILED="artemisApp.exerciseChatbot.errors.sessionLoadFailed",t.SEND_MESSAGE_FAILED="artemisApp.exerciseChatbot.errors.sendMessageFailed",t.HISTORY_LOAD_FAILED="artemisApp.exerciseChatbot.errors.historyLoadFailed",t.INVALID_SESSION_STATE="artemisApp.exerciseChatbot.errors.invalidSessionState",t.SESSION_CREATION_FAILED="artemisApp.exerciseChatbot.errors.sessionCreationFailed",t.RATE_MESSAGE_FAILED="artemisApp.exerciseChatbot.errors.rateMessageFailed",t.IRIS_DISABLED="artemisApp.exerciseChatbot.errors.irisDisabled",t.IRIS_SERVER_RESPONSE_TIMEOUT="artemisApp.exerciseChatbot.errors.timeout",t.EMPTY_MESSAGE="artemisApp.exerciseChatbot.errors.emptyMessage",t.FORBIDDEN="artemisApp.exerciseChatbot.errors.forbidden",t.INTERNAL_PYRIS_ERROR="artemisApp.exerciseChatbot.errors.internalPyrisError",t.INVALID_TEMPLATE="artemisApp.exerciseChatbot.errors.invalidTemplate",t.NO_MODEL_AVAILABLE="artemisApp.exerciseChatbot.errors.noModelAvailable",t.NO_RESPONSE="artemisApp.exerciseChatbot.errors.noResponse",t.PARSE_RESPONSE="artemisApp.exerciseChatbot.errors.parseResponse",t.TECHNICAL_ERROR_RESPONSE="artemisApp.exerciseChatbot.errors.technicalError",t.IRIS_NOT_AVAILABLE="artemisApp.exerciseChatbot.errors.irisNotAvailable",t.RATE_LIMIT_EXCEEDED="artemisApp.exerciseChatbot.errors.rateLimitExceeded",t}(d||{}),pt=[{key:d.SESSION_LOAD_FAILED,fatal:!0},{key:d.SEND_MESSAGE_FAILED,fatal:!1},{key:d.HISTORY_LOAD_FAILED,fatal:!0},{key:d.INVALID_SESSION_STATE,fatal:!0},{key:d.SESSION_CREATION_FAILED,fatal:!0},{key:d.RATE_MESSAGE_FAILED,fatal:!1},{key:d.IRIS_DISABLED,fatal:!0},{key:d.IRIS_SERVER_RESPONSE_TIMEOUT,fatal:!1},{key:d.EMPTY_MESSAGE,fatal:!1},{key:d.INTERNAL_PYRIS_ERROR,fatal:!0},{key:d.INVALID_TEMPLATE,fatal:!0},{key:d.NO_MODEL_AVAILABLE,fatal:!0},{key:d.NO_RESPONSE,fatal:!0},{key:d.PARSE_RESPONSE,fatal:!0},{key:d.FORBIDDEN,fatal:!0},{key:d.TECHNICAL_ERROR_RESPONSE,fatal:!0},{key:d.IRIS_NOT_AVAILABLE,fatal:!0},{key:d.RATE_LIMIT_EXCEEDED,fatal:!0}],Kt=Object.freeze(pt.reduce((t,a)=>(t[a.key]=a,t),{}));var rt=(()=>{class t{httpClient=f(q);apiPrefix="api/iris";randomInt(){return Math.floor(Math.random()*2147483647)}getMessages(e){return this.httpClient.get(`${this.apiPrefix}/sessions/${e}/messages`,{observe:"response"}).pipe(w(i=>{let s=i.body;if(!s)return i;let p=s.map(_=>Object.assign({},_,{sentAt:Ye(_.sentAt)}));return p.sort((_,N)=>_.sentAt&&N.sentAt?_.sentAt===N.sentAt?0:_.sentAt.isBefore(N.sentAt)?-1:1:0),Object.assign({},i,{body:p})}))}createMessage(e,i){return i.messageDifferentiator=this.randomInt(),this.httpClient.post(`${this.apiPrefix}/sessions/${e}/messages`,Object.assign({},i,{sentAt:Je(i.sentAt)}),{observe:"response"})}resendMessage(e,i){return i.messageDifferentiator=i.messageDifferentiator??this.randomInt(),this.httpClient.post(`${this.apiPrefix}/sessions/${e}/messages/${i.id}/resend`,null,{observe:"response"}).pipe(B(s=>{s.body&&s.body.id&&(i.id=s.body.id)}))}rateMessage(e,i,s){return this.httpClient.put(`${this.apiPrefix}/sessions/${e}/messages/${i}/helpful`,s,{observe:"response"})}getCurrentSessionOrCreateIfNotExists(e){return this.httpClient.post(`${this.apiPrefix}/${e}/sessions/current`,null,{observe:"response"})}createSession(e){return this.httpClient.post(`${this.apiPrefix}/${e}/sessions`,null,{observe:"response"})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ot=(()=>{class t{websocketService=f(ee);subscribedChannels=new Map;ngOnDestroy(){this.subscribedChannels.forEach((e,i)=>{e.wsSubscription.unsubscribe(),this.websocketService.unsubscribe(this.getChannelFromSessionId(i))})}subscribeToSession(e){if(!e)throw new Error("Session ID is required");return this.subscribedChannels.computeIfAbsent(e,()=>{let s=this.getChannelFromSessionId(e),p=new ue;return{wsSubscription:this.websocketService.subscribe(s).receive(s).subscribe(N=>{p.next(N)}),subject:p}}).subject.asObservable()}unsubscribeFromSession(e){let i=this.subscribedChannels.get(e);if(i){i.wsSubscription.unsubscribe(),this.subscribedChannels.delete(e);let s=this.getChannelFromSessionId(e);return this.websocketService.unsubscribe(s),!0}return!1}getChannelFromSessionId(e){return"/user/topic/iris/"+e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var re=function(t){return t.MESSAGE="MESSAGE",t.STATUS="STATUS",t}(re||{});var oe=class{currentMessageCount;rateLimit;rateLimitTimeframeHours;constructor(a,e,i){this.currentMessageCount=a,this.rateLimit=e,this.rateLimitTimeframeHours=i}};var ae=(()=>{class t{websocketService=f(ee);httpClient=f(q);intervalId;websocketStatusSubscription;disconnected=!1;active=!0;activeSubject=new M(this.active);currentRatelimitInfoSubject=new M(new oe(0,0,0));constructor(){this.checkHeartbeat(),this.intervalId=setInterval(()=>{this.checkHeartbeat()},6e4),this.websocketStatusSubscription=this.websocketService.connectionState.subscribe(e=>{this.disconnected=!e.connected&&!e.intendedDisconnect&&e.wasEverConnectedBefore})}getActiveStatus(){return this.activeSubject.asObservable()}currentRatelimitInfo(){return this.currentRatelimitInfoSubject.asObservable()}handleRateLimitInfo(e){this.currentRatelimitInfoSubject.next(e)}checkHeartbeat(){this.disconnected||me(this.getIrisStatus()).then(e=>{e.body?(this.active=!!e.body.active,e.body.rateLimitInfo&&this.currentRatelimitInfoSubject.next(e.body.rateLimitInfo)):this.active=!1,this.activeSubject.next(this.active)})}ngOnDestroy(){this.intervalId!==void 0&&clearInterval(this.intervalId),this.websocketStatusSubscription.unsubscribe()}getIrisStatus(){return this.httpClient.get("api/iris/status",{observe:"response"})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ce=function(t){return t.TEXT="text",t}(ce||{}),de=class{type;id;messageId;constructor(a){this.type=a}},D=class extends de{textContent;constructor(a){super(ce.TEXT),this.textContent=a}};var dt=function(t){return t.TEXT_EXERCISE="text-exercise-chat",t.EXERCISE="exercise-chat",t.COURSE="course-chat",t.LECTURE="lecture-chat",t}(dt||{}),at=(()=>{class t{http=f(rt);ws=f(ot);status=f(ae);userService=f(qe);accountService=f(te);sessionId;messages=new M([]);newIrisMessage=new M(void 0);numNewMessages=new M(0);stages=new M([]);suggestions=new M([]);error=new M(void 0);rateLimitInfo;rateLimitSubscription;acceptSubscription;sessionCreationIdentifier;hasJustAcceptedExternalLLMUsage=!1;constructor(){this.rateLimitSubscription=this.status.currentRatelimitInfo().subscribe(e=>this.rateLimitInfo=e)}ngOnDestroy(){this.rateLimitSubscription.unsubscribe(),this.acceptSubscription?.unsubscribe()}start(){(this.accountService.userIdentity?.externalLLMUsageAccepted||this.hasJustAcceptedExternalLLMUsage)&&this.getCurrentSessionOrCreate().subscribe(this.handleNewSession())}sendMessage(e){if(!this.sessionId)return P(()=>new Error("Not initialized"));this.suggestions.next([]),e=e.trim();let i=new se;return i.content=[new D(e)],this.http.createMessage(this.sessionId,i).pipe(B(s=>{this.replaceOrAddMessage(s.body)}),w(()=>{}),k(s=>(this.handleSendHttpError(s),z())))}replaceOrAddMessage(e){this.replaceMessage(e)||(e.sender===y.LLM&&this.newIrisMessage.next(e),this.messages.next([...this.messages.getValue(),e]))}resendMessage(e){return this.sessionId?this.http.resendMessage(this.sessionId,e).pipe(w(i=>i.body),B(i=>this.replaceMessage(i)),w(()=>{}),k(i=>(this.handleSendHttpError(i),z()))):P(()=>new Error("Not initialized"))}handleSendHttpError(e){e.status===403?this.error.next(d.IRIS_DISABLED):e.status===429?(new Map().set("hours",this.rateLimitInfo?.rateLimitTimeframeHours),this.error.next(d.RATE_LIMIT_EXCEEDED)):this.error.next(d.SEND_MESSAGE_FAILED)}rateMessage(e,i){return this.sessionId?this.http.rateMessage(this.sessionId,e.id,!!i).pipe(w(s=>s.body),B(s=>this.replaceMessage(s)),w(()=>{}),k(()=>(this.error.next(d.RATE_MESSAGE_FAILED),z()))):P(()=>new Error("Not initialized"))}messagesRead(){this.numNewMessages.next(0),this.newIrisMessage.next(void 0)}setUserAccepted(){this.acceptSubscription?.unsubscribe(),this.acceptSubscription=this.userService.acceptExternalLLMUsage().subscribe(()=>{this.hasJustAcceptedExternalLLMUsage=!0,this.accountService.setUserAcceptedExternalLLMUsage(),this.closeAndStart()})}replaceMessage(e){let i=[...this.messages.getValue()],s=i.findIndex(p=>p.id===e.id);return s>=0?(i[s]=e,this.messages.next(i),!0):!1}handleNewSession(){return{next:e=>{this.sessionId=e.id,this.messages.next(e.messages||[]),this.parseLatestSuggestions(e.latestSuggestions),this.ws.subscribeToSession(this.sessionId).subscribe(i=>this.handleWebsocketMessage(i))},error:e=>{this.error.next(e)}}}parseLatestSuggestions(e){if(!e){this.suggestions.next([]);return}let i=JSON.parse(e);this.suggestions.next(i)}clearChat(){this.close(),this.createNewSession().subscribe(this.handleNewSession())}handleWebsocketMessage(e){switch(e.rateLimitInfo&&this.status.handleRateLimitInfo(e.rateLimitInfo),e.type){case re.MESSAGE:e.message?.sender===y.LLM&&this.numNewMessages.next(this.numNewMessages.getValue()+1),e.message?.id&&this.replaceOrAddMessage(e.message),e.stages&&this.stages.next(e.stages);break;case re.STATUS:this.stages.next(e.stages||[]),e.suggestions&&this.suggestions.next(e.suggestions);break}}close(){this.sessionId&&(this.ws.unsubscribeFromSession(this.sessionId),this.sessionId=void 0,this.messages.next([]),this.stages.next([]),this.suggestions.next([]),this.numNewMessages.next(0),this.newIrisMessage.next(void 0)),this.error.next(void 0)}getCurrentSessionOrCreate(){if(!this.sessionCreationIdentifier)throw new Error("Session creation identifier not set");return this.http.getCurrentSessionOrCreateIfNotExists(this.sessionCreationIdentifier).pipe(w(e=>{if(e.body)return e.body;throw new Error(d.SESSION_LOAD_FAILED)}),k(()=>P(()=>new Error(d.SESSION_LOAD_FAILED))))}createNewSession(){if(!this.sessionCreationIdentifier)throw new Error("Session creation identifier not set");return this.http.createSession(this.sessionCreationIdentifier).pipe(w(e=>{if(e.body)return e.body;throw new Error(d.SESSION_CREATION_FAILED)}),k(()=>P(()=>new Error(d.SESSION_CREATION_FAILED))))}switchTo(e,i){let s=e&&i?e+"/"+i:void 0,p=this.sessionCreationIdentifier!==s;this.sessionCreationIdentifier=s,p&&this.closeAndStart()}closeAndStart(){this.close(),this.sessionCreationIdentifier&&this.start()}currentMessages(){return this.messages.asObservable()}currentStages(){return this.stages.asObservable()}currentError(){return this.error.asObservable()}currentNumNewMessages(){return this.numNewMessages.asObservable()}currentSuggestions(){return this.suggestions.asObservable()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ut(t,a){if(t&1&&(n(0,`
                    `),m(1,"fa-icon",3),n(2,`
                `)),t&2){let e=o(2);r(),u("icon",e.faCircleXmark)}}function mt(t,a){if(t&1&&(n(0,`
                    `),m(1,"fa-icon",4),n(2,`
                `)),t&2){let e=o(2);r(),u("icon",e.faArrowsRotate)}}function ht(t,a){if(t&1&&(n(0,`
                    `),c(1,"div",5),n(2),l(),n(3,`
                `)),t&2){let e=o(2);r(2),Q(e.displayedSubText)}}function gt(t,a){if(t&1&&(n(0,`
            `),g(1,ut,3,1)(2,mt,3,1),n(3,`

            `),c(4,"div"),n(5),g(6,ht,4,1),l(),n(7,`
        `)),t&2){let e,i=o();r(),h((e=i.activeStage==null?null:i.activeStage.state)===i.IrisStageStateDTO.ERROR?1:2),r(4),J(`
                `,i.displayedText,`
                `),r(),h(i.displayedSubText?6:-1)}}function ft(t,a){if(t&1&&(n(0,`
            `),m(1,"div",6),n(2,`
        `)),t&2){let e=a.$implicit,i=o();r(),fe(e.state===i.IrisStageStateDTO.IN_PROGRESS?i.style:void 0),G("flex-grow",e.weight),u("ngClass",e.lowerCaseState)}}var ct=(()=>{class t{open=!1;openTimeout;styleTimeout;activeStage;displayedText;displayedSubText;style;stages=[];faArrowsRotate=De;faCircleXmark=Ge;JSON=JSON;IrisStageStateDTO=H;ngOnChanges(){this.stages?.forEach(i=>i.lowerCaseState=i.state?.toLowerCase());let e=this.stages?.find(i=>!this.isStageFinished(i));e?(clearTimeout(this.openTimeout),clearTimeout(this.styleTimeout),this.open=!0,e.name!==this.activeStage?.name&&(this.style=void 0,this.styleTimeout=setTimeout(()=>this.style="transform: scaleX(0.9)",500)),this.activeStage=e,this.displayedText=e.name,this.displayedSubText=e.message||void 0):(this.activeStage=void 0,this.open&&(this.openTimeout=setTimeout(()=>{this.open=!1,this.displayedText=void 0,this.displayedSubText=void 0},5e3)))}isStageFinished(e){return e.state==="DONE"||e.state==="SKIPPED"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["jhi-chat-status-bar"]],inputs:{stages:"stages"},features:[he],decls:12,vars:9,consts:[[1,"chat-status-bar"],[1,"display"],[1,"progress-bar"],[3,"icon"],["animation","spin",3,"icon"],[1,"message"],[1,"part",3,"ngClass"]],template:function(i,s){i&1&&(c(0,"div",0),n(1,`
    `),c(2,"div",1),n(3,`
        `),g(4,gt,8,3),l(),n(5,`
    `),c(6,"div",2),n(7,`
        `),A(8,ft,3,5,null,null,be),l(),n(10,`
`),l(),n(11,`
`)),i&2&&(O("open",s.open),r(2),O("active",s.activeStage)("has-message",s.displayedSubText)("error",(s.activeStage==null?null:s.activeStage.state)===s.IrisStageStateDTO.ERROR),r(2),h(s.displayedText?4:-1),r(4),L(s.stages))},dependencies:[ie,Te],styles:[".chat-status-bar[_ngcontent-%COMP%]{transition:all .3s;opacity:0;overflow:hidden;background:var(--iris-client-chat-background);border-top:0 solid var(--border-color)}.chat-status-bar[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;transition:all .2s;max-height:0;min-height:0;padding:0 5px;display:flex;align-items:center;gap:5px}.chat-status-bar[_ngcontent-%COMP%]   .display.active[_ngcontent-%COMP%]{max-height:1.5lh;min-height:1.5lh;padding:3px 5px}.chat-status-bar[_ngcontent-%COMP%]   .display.active.has-message[_ngcontent-%COMP%]{max-height:2.1lh;min-height:2.1lh}.chat-status-bar[_ngcontent-%COMP%]   .display.error[_ngcontent-%COMP%]{background-color:var(--artemis-alert-danger-background);color:var(--artemis-alert-danger-color)}.chat-status-bar[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:80%}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:100%}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part[_ngcontent-%COMP%]{flex:1;min-height:3px;max-height:3px;opacity:0;background-color:gray;transform:scaleX(0);transform-origin:left center;transition:all .5s linear}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part.done[_ngcontent-%COMP%]{background-color:var(--success);transform:scaleX(1)}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part.in_progress[_ngcontent-%COMP%]{background-color:var(--warning);transition:transform 10s linear;transform:scaleX(.05)}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part.skipped[_ngcontent-%COMP%]{transform:scaleX(1)}.chat-status-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part.error[_ngcontent-%COMP%]{background-color:var(--danger);transform:scaleX(1)}.chat-status-bar.open[_ngcontent-%COMP%]{border-top-width:1px;opacity:1}.chat-status-bar.open[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .part[_ngcontent-%COMP%]{opacity:1}@keyframes _ngcontent-%COMP%_growX{0%{transform:scaleX(.1)}to{transform:scaleX(.9)}}"]})}return t})();var lt=(()=>{class t{transform(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=ge({name:"as",type:t,pure:!0})}return t})();var bt=["messagesElement"],xt=["scrollArrow"],_t=["messageTextarea"],Ct=["acceptButton"],St=t=>({hours:t}),vt=(t,a)=>a.id;function It(t,a){if(t&1&&(n(0,`
            `),m(1,"jhi-iris-logo",15),n(2,`
        `)),t&2){let e=o();r(),u("size",e.IrisLogoSize.FLUID)}}function Mt(t,a){t&1&&(n(0,`
            `),n(1,`
            `),m(2,"img",16),n(3,`
        `))}function wt(t,a){if(t&1&&(n(0,`
            `),c(1,"a",17),n(2,`
                `),m(3,"fa-icon",18),n(4,`
            `),l(),n(5,`
        `)),t&2){let e=o();r(),u("routerLink","/about-iris"),r(2),u("icon",e.faCircleInfo)}}function Tt(t,a){if(t&1&&(n(0,`
            `),c(1,"div",10),n(2,`
                `),c(3,"span",19),S(4,"artemisTranslate"),n(5),l(),n(6,`
            `),l(),n(7,`
        `)),t&2){let e=o();r(3),u("ngbTooltip",v(4,3,"artemisApp.exerciseChatbot.rateLimitTooltip",Me(6,St,e.rateLimitInfo.rateLimitTimeframeHours))),r(2),Ce(`
                    `,e.rateLimitInfo.currentMessageCount," / ",e.rateLimitInfo.rateLimit,`
                `)}}function Et(t,a){if(t&1){let e=I();n(0,`
                `),c(1,"button",20),C("click",function(){b(e);let s=o(),p=_e(24);return x(s.onClearSession(p))}),n(2,`
                    `),m(3,"fa-icon",14),n(4,`
                `),l(),n(5,`
            `)}if(t&2){let e=o();r(3),u("icon",e.faTrash)}}function yt(t,a){if(t&1&&(n(0,`
                        `),m(1,"fa-icon",14),n(2,`
                    `)),t&2){let e=o(2);r(),u("icon",e.faExpand)}}function Ot(t,a){if(t&1&&(n(0,`
                        `),m(1,"fa-icon",14),n(2,`
                    `)),t&2){let e=o(2);r(),u("icon",e.faCompress)}}function At(t,a){if(t&1){let e=I();n(0,`
                `),c(1,"button",21),C("click",function(){b(e);let s=o();return x(s.fullSizeToggle.next())}),n(2,`
                    `),g(3,yt,3,1)(4,Ot,3,1),l(),n(5,`
            `)}if(t&2){let e=o();r(3),h(e.fullSize?4:3)}}function Lt(t,a){if(t&1){let e=I();n(0,`
                `),c(1,"button",21),C("click",function(){b(e);let s=o();return x(s.closeChat())}),n(2,`
                    `),m(3,"fa-icon",14),n(4,`
                `),l(),n(5,`
            `)}if(t&2){let e=o();r(3),u("icon",e.faXmark)}}function Pt(t,a){if(t&1){let e=I();n(0,`
    `),c(1,"div",22),n(2,`
        `),c(3,"h4",23),n(4,`
            `),m(5,"span",24),n(6,`
        `),l(),n(7,`
        `),c(8,"button",25),C("click",function(){let s=b(e).$implicit;return x(s.dismiss())}),l(),n(9,`
    `),l(),n(10,`
    `),c(11,"div",26),n(12,`
        `),m(13,"p",27),n(14,`
    `),l(),n(15,`
    `),c(16,"div",28),n(17,`
        `),c(18,"button",29),C("click",function(){let s=b(e).$implicit;return x(s.close("confirm"))}),n(19,`
            `),m(20,"span",30),n(21,`
        `),l(),n(22,`
    `),l(),n(23,`
`)}}function kt(t,a){if(t&1){let e=I();n(0,`
                        `),c(1,"button",33),C("click",function(){let s=b(e).$implicit,p=o(3);return x(p.onSuggestionClick(s))}),l(),n(2,`
                    `)}if(t&2){let e=a.$implicit;r(),u("innerHTML",e,$)}}function Bt(t,a){if(t&1&&(n(0,`
                `),c(1,"div",32),n(2,`
                    `),A(3,kt,3,1,null,null,W),l(),n(5,`
            `)),t&2){let e=o(2);r(),u("@suggestionAnimation",void 0),r(2),L(e.suggestions)}}function Rt(t,a){if(t&1&&(n(0,`
                                                `),m(1,"div",36),n(2,`
                                            `)),t&2){let e=a.$implicit;r(),u("innerHTML",e,$)}}function Dt(t,a){if(t&1&&(n(0,`
                                        `),c(1,"span",35),n(2,`
                                            `),A(3,Rt,3,1,null,null,W),S(5,"as"),l(),n(6,`
                                    `)),t&2){let e=o(2).$implicit,i=o(3);r(3),L(v(5,0,e,i.IrisTextMessageContent).textContent.split(`
`))}}function Nt(t,a){if(t&1&&(n(0,`
                                `),c(1,"div",34),n(2,`
                                    `),g(3,Dt,7,3),l(),n(4,`
                            `)),t&2){let e=o().$implicit,i=o(3);r(3),h(e.type===i.IrisMessageContentType.TEXT?3:-1)}}function Ft(t,a){if(t&1){let e=I();n(0,`
                                        `),c(1,"div",38),n(2,`
                                            `),m(3,"span",36),S(4,"as"),S(5,"htmlForMarkdown"),n(6,`
                                        `),l(),n(7,`

                                        `),c(8,"div",39),n(9,`
                                            `),c(10,"button",40),S(11,"as"),S(12,"as"),S(13,"as"),S(14,"as"),C("click",function(){b(e);let s=o(3).$implicit,p=o(2);return x(p.rateMessage(s,!0))}),n(15,`
                                                `),m(16,"fa-icon",14),n(17,`
                                            `),l(),n(18,`
                                            `),c(19,"button",40),S(20,"as"),S(21,"as"),S(22,"as"),S(23,"as"),C("click",function(){b(e);let s=o(3).$implicit,p=o(2);return x(p.rateMessage(s,!1))}),n(24,`
                                                `),m(25,"fa-icon",14),n(26,`
                                            `),l(),n(27,`
                                        `),l(),n(28,`
                                    `)}if(t&2){let e=o(2).$implicit,i=o().$implicit,s=o(2);r(3),u("innerHTML",Y(5,20,v(4,17,e,s.IrisTextMessageContent).textContent),$),r(7),O("thumbs-up-clicked",v(11,22,i,s.IrisAssistantMessage).helpful)("clickable",!v(12,25,i,s.IrisAssistantMessage).helpful)("rate-button-not-clicked",!v(13,28,i,s.IrisAssistantMessage).helpful),u("disabled",v(14,31,i,s.IrisAssistantMessage).helpful),r(6),u("icon",s.faThumbsUp),r(3),O("thumbs-down-clicked",v(20,34,i,s.IrisAssistantMessage).helpful===!1)("clickable",v(21,37,i,s.IrisAssistantMessage).helpful!==!1)("rate-button-not-clicked",v(22,40,i,s.IrisAssistantMessage).helpful!==!1),u("disabled",v(23,43,i,s.IrisAssistantMessage).helpful===!1),r(6),u("icon",s.faThumbsDown)}}function jt(t,a){if(t&1&&(n(0,`
                                `),c(1,"div",37),n(2,`
                                    `),g(3,Ft,29,46),l(),n(4,`
                            `)),t&2){let e=o().$implicit,i=o(3);r(3),h(e.type===i.IrisMessageContentType.TEXT?3:-1)}}function Vt(t,a){if(t&1&&(n(0,`
                        `),c(1,"div"),n(2,`
                            `),g(3,Nt,5,1)(4,jt,5,1),l(),n(5,`
                    `)),t&2){let e=o().$implicit,i=o(2);r(3),h(e.sender===i.IrisSender.USER?3:-1),r(),h(e.sender===i.IrisSender.LLM?4:-1)}}function Ut(t,a){if(t&1&&(n(0,`
                `),c(1,"div"),n(2,`
                    `),A(3,Vt,6,2,null,null,W),l(),n(5,`
            `)),t&2){let e=a.$implicit,i=o(2);r(),G("transform-origin",e.sender===i.IrisSender.USER?"bottom right":"bottom left"),u("@messageAnimation",void 0)("@.disabled",!i.shouldAnimate),r(2),L(e.content)}}function Ht(t,a){if(t&1){let e=I();n(0,`
        `),c(1,"div",31,3),C("scroll",function(){b(e);let s=o();return x(s.checkChatScroll())}),n(3,`
            `),g(4,Bt,6,1),A(5,Ut,6,4,null,null,vt),l(),n(7,`
    `)}if(t&2){let e=o();r(4),h(e.suggestions!=null&&e.suggestions.length&&e.userAccepted&&!e.isLoading&&e.active&&(!(e.rateLimitInfo!=null&&e.rateLimitInfo.rateLimit)||(e.rateLimitInfo==null?null:e.rateLimitInfo.currentMessageCount)!==(e.rateLimitInfo==null?null:e.rateLimitInfo.rateLimit))&&!e.hasActiveStage?4:-1),r(),L(e.messages)}}function zt(t,a){if(t&1&&(n(0,`
                `),m(1,"jhi-iris-logo",15),n(2,`
            `)),t&2){let e=o(2);r(),u("size",e.IrisLogoSize.SMALL)}}function $t(t,a){t&1&&(n(0,`
                `),n(1,`
                `),m(2,"img",43),n(3,`
            `))}function Xt(t,a){if(t&1&&(n(0,`
        `),c(1,"div",41),n(2,`
            `),g(3,zt,3,1)(4,$t,4,0),m(5,"h3",42),n(6,`
        `),l(),n(7,`
    `)),t&2){let e=o();r(3),h(e.isChatGptWrapper?4:3)}}function Gt(t,a){if(t&1){let e=I();n(0,`
        `),c(1,"div",44),n(2,`
            `),m(3,"div",45),n(4,`
            `),c(5,"div",46),n(6,`
                `),c(7,"button",47,4),C("click",function(){b(e);let s=o();return x(s.acceptPermission())}),l(),n(9,`
                `),c(10,"button",48),C("click",function(){b(e);let s=o();return x(s.closeChat())}),l(),n(11,`
            `),l(),n(12,`
        `),l(),n(13,`
    `)}}function Wt(t,a){if(t&1&&(n(0,`
        `),c(1,"div",49),n(2),S(3,"artemisTranslate"),l(),n(4,`
    `)),t&2){let e=o();r(2),J(`
            `,Y(3,1,e.error),`
        `)}}function Qt(t,a){if(t&1&&(n(0,`
        `),m(1,"div",50),n(2,`
    `)),t&2){let e=o();r(),u("jhiTranslate",e.IrisErrorMessageKey.IRIS_NOT_AVAILABLE)}}function Jt(t,a){t&1&&(n(0,`
                `),m(1,"span",54),n(2,`
            `))}function Yt(t,a){t&1&&(n(0,`
                `),m(1,"span",55),n(2,`
            `))}function qt(t,a){if(t&1){let e=I();n(0,`
        `),c(1,"div",51),n(2,`
            `),c(3,"textarea",52,5),S(5,"artemisTranslate"),Ie("ngModelChange",function(s){b(e);let p=o();return ve(p.newMessageTextContent,s)||(p.newMessageTextContent=s),x(s)}),C("ngModelChange",function(){b(e);let s=o();return x(s.onModelChange())})("input",function(){b(e);let s=o();return x(s.onInput())})("paste",function(){b(e);let s=o();return x(s.onPaste())})("keydown",function(s){b(e);let p=o();return x(p.handleKey(s))}),l(),n(6,`
            `),c(7,"jhi-button",53),C("onClick",function(){b(e);let s=o();return x(s.onSend())}),l(),n(8,`
            `),g(9,Jt,3,0)(10,Yt,3,0),l(),n(11,`
    `)}if(t&2){let e=o();r(3),xe("placeholder",Y(5,7,"artemisApp.exerciseChatbot.inputMessage")),Se("ngModel",e.newMessageTextContent),u("disabled",e.isLoading||!e.active||(e.rateLimitInfo==null?null:e.rateLimitInfo.rateLimit)&&(e.rateLimitInfo==null?null:e.rateLimitInfo.currentMessageCount)===(e.rateLimitInfo==null?null:e.rateLimitInfo.rateLimit)||e.hasActiveStage),r(4),u("btnType",e.ButtonType.SUCCESS_OUTLINE)("icon",e.faPaperPlane)("disabled",e.isLoading||!e.active||(e.rateLimitInfo==null?null:e.rateLimitInfo.rateLimit)&&(e.rateLimitInfo==null?null:e.rateLimitInfo.currentMessageCount)===(e.rateLimitInfo==null?null:e.rateLimitInfo.rateLimit)||e.hasActiveStage),r(2),h(e.isChatGptWrapper?10:9)}}var _n=(()=>{class t{accountService=f(te);modalService=f(Pe);translateService=f(Be);statusService=f(ae);chatService=f(at);faTrash=je;faCircle=Ne;faPaperPlane=Xe;faExpand=ze;faXmark=$e;faArrowDown=He;faCircleInfo=Ve;faCompress=Re;faThumbsUp=We;faThumbsDown=Ue;faRedo=Fe;messagesSubscription;stagesSubscription;errorSubscription;numNewMessageSubscription;rateLimitSubscription;activeStatusSubscription;suggestionsSubscription;messages=[];stages=[];suggestions=[];error;numNewMessages=0;rateLimitInfo;active=!0;newMessageTextContent="";isLoading;shouldAnimate=!1;hasActiveStage=!1;userAccepted;isScrolledToBottom=!0;rows=1;resendAnimationActive;ButtonType=et;fullSize;showCloseButton=!1;isChatGptWrapper=!1;fullSizeToggle=new le;closeClicked=new le;messagesElement;scrollArrow;messageTextarea;acceptButton;IrisLogoSize=nt;IrisMessageContentType=ce;IrisAssistantMessage=ne;IrisTextMessageContent=D;IrisSender=y;IrisErrorMessageKey=d;ngOnInit(){this.messagesSubscription=this.chatService.currentMessages().subscribe(e=>{e.length!==this.messages?.length&&(this.scrollToBottom("auto"),setTimeout(()=>this.messageTextarea?.nativeElement?.focus(),10)),this.messages=Qe(e).reverse(),this.messages.forEach(i=>{if(i.content?.[0]?.textContent){let s=i.content[0];s.textContent=s.textContent.replace(/\n\n/g,`
\xA0
`),s.textContent=s.textContent.replace(/\n/g,`

`)}})}),this.stagesSubscription=this.chatService.currentStages().subscribe(e=>{this.stages=e,this.hasActiveStage=e?.some(i=>[H.IN_PROGRESS,H.NOT_STARTED].includes(i.state))}),this.errorSubscription=this.chatService.currentError().subscribe(e=>this.error=e),this.numNewMessageSubscription=this.chatService.currentNumNewMessages().subscribe(e=>{this.numNewMessages=e,this.checkUnreadMessageScroll()}),this.rateLimitSubscription=this.statusService.currentRatelimitInfo().subscribe(e=>this.rateLimitInfo=e),this.activeStatusSubscription=this.statusService.getActiveStatus().subscribe(e=>{e||(this.isLoading=!1,this.resendAnimationActive=!1),this.active=e}),this.suggestionsSubscription=this.chatService.currentSuggestions().subscribe(e=>{this.suggestions=e}),this.checkIfUserAcceptedExternalLLMUsage(),setTimeout(()=>{this.messageTextarea?this.messageTextarea.nativeElement.focus():this.acceptButton.nativeElement.focus()},150)}ngAfterViewInit(){this.checkUnreadMessageScroll(),setTimeout(()=>this.shouldAnimate=!0)}checkUnreadMessageScroll(){this.numNewMessages>0&&this.scrollToBottom("smooth")}ngOnDestroy(){this.messagesSubscription.unsubscribe(),this.stagesSubscription.unsubscribe(),this.errorSubscription.unsubscribe(),this.numNewMessageSubscription.unsubscribe(),this.rateLimitSubscription.unsubscribe(),this.activeStatusSubscription.unsubscribe(),this.suggestionsSubscription.unsubscribe()}checkIfUserAcceptedExternalLLMUsage(){this.userAccepted=!!this.accountService.userIdentity?.externalLLMUsageAccepted,setTimeout(()=>this.adjustTextareaRows(),0)}onSend(){this.chatService.messagesRead(),this.newMessageTextContent&&(this.isLoading=!0,this.chatService.sendMessage(this.newMessageTextContent).subscribe(()=>{this.isLoading=!1}),this.newMessageTextContent=""),this.resetChatBodyHeight()}resendMessage(e){if(e.sender!==y.USER)return;let i;if(e.id)i=this.chatService.resendMessage(e),this.resendAnimationActive=!0;else if(e.content?.[0]?.textContent)i=this.chatService.sendMessage(e.content[0].textContent);else{this.resendAnimationActive=!1;return}this.isLoading=!0,i.subscribe(()=>{this.resendAnimationActive=!1,this.isLoading=!1,this.chatService.messagesRead()})}rateMessage(e,i){e.sender===y.LLM&&(e.helpful=!!i,this.chatService.rateMessage(e,i).subscribe())}scrollToBottom(e){setTimeout(()=>{this.messagesElement.nativeElement.scrollTo({top:0,behavior:e})})}onClearSession(e){this.modalService.open(e).result.then(i=>{i==="confirm"&&(this.isLoading=!1,this.chatService.clearChat())})}acceptPermission(){this.chatService.setUserAccepted(),this.userAccepted=!0}closeChat(){this.chatService.messagesRead(),this.closeClicked.emit()}handleKey(e){if(e.key==="Enter")if(!this.isLoading&&this.active)if(!e.shiftKey)e.preventDefault(),this.onSend();else{let i=e.target,{selectionStart:s,selectionEnd:p}=i,_=i.value;i.value=_.slice(0,s)+_.slice(p),i.selectionStart=i.selectionEnd=s+1}else e.preventDefault()}onInput(){this.adjustTextareaRows()}onPaste(){setTimeout(()=>{this.adjustTextareaRows()},0)}adjustTextareaRows(){let e=this.messageTextarea.nativeElement;e.style.height="auto";let s=parseInt(getComputedStyle(e).lineHeight,10)+4,_=s*3;e.style.height=`${Math.min(e.scrollHeight,_)}px`,this.adjustScrollButtonPosition(Math.min(e.scrollHeight,_)/s)}onModelChange(){let e=this.messageTextarea.nativeElement,i=e.value.split(`
`).length;i!=this.rows&&i<=3&&(e.rows=i,this.adjustScrollButtonPosition(i),this.rows=i)}adjustScrollButtonPosition(e){let i=this.messageTextarea.nativeElement,s=this.scrollArrow.nativeElement,p=parseInt(window.getComputedStyle(i).lineHeight),_=p*e-p;setTimeout(()=>{s.style.bottom=`calc(11% + ${_}px)`},10)}resetChatBodyHeight(){let e=this.messageTextarea.nativeElement,i=this.scrollArrow.nativeElement;e.rows=1,e.style.height="",i.style.bottom=""}checkChatScroll(){let i=this.messagesElement.nativeElement.scrollTop;this.isScrolledToBottom=i<50}onSuggestionClick(e){this.newMessageTextContent=e,this.onSend()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["jhi-iris-base-chatbot"]],viewQuery:function(i,s){if(i&1&&(F(bt,5),F(xt,5),F(_t,5),F(Ct,5)),i&2){let p;j(p=V())&&(s.messagesElement=p.first),j(p=V())&&(s.scrollArrow=p.first),j(p=V())&&(s.messageTextarea=p.first),j(p=V())&&(s.acceptButton=p.first)}},inputs:{fullSize:"fullSize",showCloseButton:"showCloseButton",isChatGptWrapper:"isChatGptWrapper"},outputs:{fullSizeToggle:"fullSizeToggle",closeClicked:"closeClicked"},decls:45,vars:18,consts:[["clearConfirmModal",""],["chatBody",""],["scrollArrow",""],["messagesElement",""],["acceptButton",""],["messageTextarea",""],[1,"chat-header"],[1,"header-start"],[1,"word-iris"],[1,"d-flex","gap-2"],[1,"toolbox"],[1,"chat-body"],[3,"stages"],[1,"scroll-to-bottom",3,"click","hidden"],[3,"icon"],[3,"size"],["src","public/images/chatgpt-temp/ChatGPT_logo.svg","alt","Iris Logo",1,"iris-logo",2,"height","27px"],["target","_blank",3,"routerLink"],[1,"info-button",3,"icon"],[1,"rate-limit",3,"ngbTooltip"],["id","clear-chat-button",1,"header-icon",3,"click"],[1,"header-icon",3,"click"],[1,"modal-header"],[1,"modal-title"],["jhiTranslate","artemisApp.exerciseChatbot.clearSession.title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["jhiTranslate","artemisApp.exerciseChatbot.clearSession.text"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["jhiTranslate","artemisApp.exerciseChatbot.clearSession.submit"],[1,"messages",3,"scroll"],[1,"suggestions-container"],[1,"suggestion-button",3,"click","innerHTML"],[1,"d-flex","justify-content-end","align-items-center"],[1,"bubble-right"],[3,"innerHTML"],[2,"width","fit-content","position","relative"],[1,"bubble-left"],[1,"rate-message-buttons","toolbox"],[1,"btn","btn-sm",3,"click","disabled"],[1,"empty-chat-message"],["jhiTranslate","artemisApp.iris.chat.helpOffer"],["src","public/images/chatgpt-temp/ChatGPT_logo.svg","alt","Iris Logo",1,"iris-logo",2,"height","35px"],[1,"p-chat"],["jhiTranslate","artemisApp.exerciseActions.externalLLMUsage.popUpMessage",1,"message-text"],[1,"button-container"],["type","button","jhiTranslate","artemisApp.exerciseChatbot.accept",1,"btn","btn-primary",3,"click"],["type","button","jhiTranslate","artemisApp.exerciseChatbot.decline",1,"btn","btn-secondary",3,"click"],[1,"client-chat-error"],[1,"client-chat-error",3,"jhiTranslate"],[1,"chat-input"],["rows","1","type","text",1,"form-control",3,"ngModelChange","input","paste","keydown","ngModel","disabled","placeholder"],["id","irisSendButton",3,"onClick","btnType","icon","disabled"],["jhiTranslate","artemisApp.exerciseChatbot.disclaimer",1,"disclaimer-message"],["jhiTranslate","artemisApp.exerciseChatbot.disclaimerGPT",1,"disclaimer-message"]],template:function(i,s){if(i&1){let p=I();n(0,`
`),c(1,"div",6),n(2,`
    `),c(3,"div",7),n(4,`
        `),g(5,It,3,1)(6,Mt,4,0),c(7,"div",8),n(8),l(),n(9,`
        `),g(10,wt,6,2),l(),n(11,`
    `),c(12,"div",9),n(13,`
        `),g(14,Tt,8,8),c(15,"div",10),n(16,`
            `),g(17,Et,6,1)(18,At,6,1)(19,Lt,6,1),l(),n(20,`
    `),l(),n(21,`
`),l(),n(22,`
`),g(23,Pt,24,0,"ng-template",null,0,we),n(25,`
`),n(26,`
`),c(27,"div",11,1),n(29,`
    `),g(30,Ht,8,1)(31,Xt,8,1),m(32,"jhi-chat-status-bar",12),n(33,`
    `),g(34,Gt,14,0),c(35,"div",13,2),C("click",function(){return b(p),x(s.scrollToBottom("smooth"))}),n(37,`
        `),m(38,"fa-icon",14),n(39,`
    `),l(),n(40,`
    `),g(41,Wt,5,3)(42,Qt,3,1)(43,qt,12,9),l(),n(44,`
`)}i&2&&(r(5),h(s.isChatGptWrapper?6:5),r(3),Q(s.isChatGptWrapper?"ChatGPT":"Iris"),r(2),h(s.isChatGptWrapper?-1:10),r(4),h(s.rateLimitInfo.rateLimit>0?14:-1),r(3),h(s.messages.length>=1?17:-1),r(),h(s.fullSize!==void 0?18:-1),r(),h(s.showCloseButton?19:-1),r(8),O("not-accepted",!s.userAccepted),r(3),h(s.messages!=null&&s.messages.length?30:-1),r(),h(s.messages!=null&&s.messages.length?-1:31),r(),u("stages",s.stages),r(2),h(s.userAccepted?-1:34),r(),u("hidden",s.isScrolledToBottom),r(3),u("icon",s.faArrowDown),r(3),h(s.error?41:-1),r(),h(s.active?-1:42),r(),h(s.userAccepted?43:-1))},dependencies:[st,Ee,ie,ke,Ke,ct,Le,ye,Oe,Ae,tt,Ze,lt,it],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;max-height:100%;border-radius:var(--bs-border-radius-lg)}.header-start[_ngcontent-%COMP%]{text-align:start;flex:1;font-size:20px;display:flex;gap:4px;min-width:0}.header-start[_ngcontent-%COMP%]   .word-iris[_ngcontent-%COMP%], .header-start[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{align-self:center}.button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:10px;gap:10px}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.suggestions-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;padding:10px;justify-content:center;align-items:stretch}.suggestion-button[_ngcontent-%COMP%]{background-color:var(--iris-suggestion-background);color:var(--bs-body-color);padding:5px 10px;cursor:pointer;font-size:12px;text-wrap:wrap;display:flex;align-items:center;justify-content:center;transition:background-color .3s,color .3s;border:1px solid var(--border-color);border-radius:var(--bs-border-radius-lg);flex:1}.suggestion-button[_ngcontent-%COMP%]:hover{background-color:var(--iris-tool-background)}.toolbox[_ngcontent-%COMP%]{background:var(--iris-tool-background);border:1px solid var(--border-color);border-radius:var(--bs-border-radius-lg);display:flex}.toolbox[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff!important}.chat-header[_ngcontent-%COMP%]{display:flex;font-weight:700;padding:5px;width:100%;height:36px;flex:0;z-index:10;background-color:var(--iris-chat-widget-background);border-radius:var(--bs-border-radius-lg) var(--bs-border-radius-lg) 0 0;box-shadow:0 15px 15px -15px #0000004d;border-bottom:1px solid var(--bs-border-color)}.chat-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-block:1px}.header-icon[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--secondary)}.rate-limit[_ngcontent-%COMP%]{padding:3px 5px}.info-button[_ngcontent-%COMP%]{cursor:pointer;vertical-align:middle;padding-left:3px;font-size:13px;color:var(--blue)}.chat-body[_ngcontent-%COMP%]{height:100%;overflow-y:hidden;display:flex;flex-direction:column;flex:1}.chat-body.not-accepted[_ngcontent-%COMP%]{height:100%}.chat-body[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{padding:0 10px 10px;display:flex;flex-direction:column-reverse;gap:5px;flex:1;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--bs-border-color) transparent}.chat-body[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-body[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--bs-border-color);border-radius:6px}.chat-body[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chat-body[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{margin-top:5px}.empty-chat-message[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;gap:8px}[_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%], [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]{--r: 13px;--t: 10px;max-width:100%;margin-bottom:10px;color:var(--bs-body-color);padding:10px;-webkit-mask:radial-gradient(var(--t) at var(--_d) 0,rgba(0,0,0,0) 98%,#000 102%) var(--_d) 100%/calc(100% - var(--r)) var(--t) no-repeat,conic-gradient(at var(--r) var(--r),#000 75%,rgba(0,0,0,0) 0) calc(var(--r) / -2) calc(var(--r) / -2) padding-box,radial-gradient(50% 50%,#000 98%,rgba(0,0,0,0) 101%) 0 0/var(--r) var(--r) space padding-box;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word}[_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%]    >span>p, [_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%]    >p, [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]    >span>p, [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]    >p{margin-bottom:0}[_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%]    >span>p:not(:last-child), [_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%]    >p:not(:last-child), [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]    >span>p:not(:last-child), [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]    >p:not(:last-child){margin-bottom:7px}[_nghost-%COMP%]   .bubble-left[_ngcontent-%COMP%]     pre code, [_nghost-%COMP%]   .bubble-right[_ngcontent-%COMP%]     pre code{line-height:1}.bubble-left[_ngcontent-%COMP%]{--_d: 0%;border-left:var(--t) solid rgba(0,0,0,0);background-color:var(--iris-client-chat-background);margin-right:var(--t);place-self:start}.bubble-right[_ngcontent-%COMP%]{--_d: 100%;border-right:var(--t) solid rgba(0,0,0,0);margin-left:var(--t);place-self:end;float:right;background-color:var(--iris-my-chat-background)}.client-chat-error[_ngcontent-%COMP%]{background-color:var(--artemis-alert-danger-background);color:var(--bs-body-color);padding:5px;border-top:1px solid var(--artemis-alert-danger-border);display:flex;align-content:center;justify-content:center}pre[_ngcontent-%COMP%]{background:transparent;white-space:pre-wrap;padding:0;margin:0;border:transparent;font-family:inherit;font-size:inherit}.chat-input[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;background-color:var(--iris-client-chat-input);padding:5px;flex:0 1 auto;border-radius:0 0 var(--bs-border-radius-lg) var(--bs-border-radius-lg)}.disclaimer-message[_ngcontent-%COMP%]{font-size:60%;color:var(--gray-600);text-align:center;width:100%;padding-top:5px}.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:5px 13px;margin-right:5px;resize:none}.chat-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border-color:var(--primary)}.p-chat[_ngcontent-%COMP%]{background-color:var(--iris-client-chat-background);color:var(--bs-body-color);border-radius:var(--bs-border-radius-lg);display:flex;flex-direction:column;align-items:stretch;margin:5px}.message-text[_ngcontent-%COMP%]{padding:10px;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:1px solid var(--iris-client-chat-background)}.scroll-to-bottom[_ngcontent-%COMP%]{position:absolute;bottom:60px;right:20px;width:30px;height:30px;border-radius:50%;background-color:var(--secondary);color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 0 50px #0006}.rate-message-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:absolute;left:20px;bottom:-.5lh;padding:3px;height:1lh;gap:5px;background:var(--iris-rate-background)}.rate-message-buttons[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{padding:0;display:flex;align-items:center;justify-content:center;border:none}.thumbs-up-clicked[_ngcontent-%COMP%]{color:var(--green)}.thumbs-down-clicked[_ngcontent-%COMP%]{color:var(--red)}.rate-button-not-clicked[_ngcontent-%COMP%]{color:var(--secondary)}#irisSendButton[_ngcontent-%COMP%]{margin-bottom:auto}  ngb-modal-backdrop{z-index:9999!important}  ngb-modal-window{z-index:9999!important}cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:auto}"],data:{animation:[pe("messageAnimation",[K(":enter",[E({height:"0",transform:"scale(0)"}),Z([U("0.3s ease-in-out",E({height:"*"})),U("0.3s 0.1s cubic-bezier(.2,1.22,.64,1)",E({transform:"scale(1)"}))])])]),pe("suggestionAnimation",[K(":enter",[E({height:0,opacity:0}),Z([U("0.3s 0.5s ease-in-out",E({height:"*",opacity:1}))])]),K(":leave",[E({height:"*",opacity:1}),Z([U("0.3s ease-in-out",E({height:0,opacity:0}))])])])]}})}return t})();export{D as a,dt as b,at as c,_n as d};
//# sourceMappingURL=chunk-5XX2X5VF.js.map

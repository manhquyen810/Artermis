import{Qa as o,ya as l}from"./chunk-5LC5EQRR.js";var s=class{filterMap=new Map;numberOfActiveFilters=0;getCurrentFilterState(c){return this.filterMap.get(c)}};var g=(()=>{class r extends s{exerciseCategories;allCategoriesSelected=!0;includeExercisesWithNoCategory=!0;exercisesWithoutCategoriesPresent;determineDisplayableCategories(e){let t=e.filter(i=>i.categories).flatMap(i=>i.categories).map(i=>i.category);return new Set(t)}setupCategoryFilter(e){this.exerciseCategories=this.determineDisplayableCategories(e),this.exercisesWithoutCategoriesPresent=e.some(t=>!t.categories),this.exerciseCategories.forEach(t=>this.filterMap.set(t,!0)),this.allCategoriesSelected=!0,this.includeExercisesWithNoCategory=this.exercisesWithoutCategoriesPresent,this.calculateNumberOfAppliedFilters()}calculateNumberOfAppliedFilters(){this.numberOfActiveFilters=this.exerciseCategories.size+(this.includeExercisesWithNoCategory?1:0)}toggleCategory(e,t){let i=this.filterMap.get(t);return this.filterMap.set(t,!i),this.numberOfActiveFilters+=i?-1:1,this.areAllCategoriesSelected(!i),this.applyCurrentFilter(e)}toggleExercisesWithNoCategory(e){return this.numberOfActiveFilters+=this.includeExercisesWithNoCategory?-1:1,this.includeExercisesWithNoCategory=!this.includeExercisesWithNoCategory,this.areAllCategoriesSelected(this.includeExercisesWithNoCategory),this.applyCurrentFilter(e)}toggleAllCategories(e){return this.allCategoriesSelected?(this.exerciseCategories.forEach(t=>this.filterMap.set(t,!1)),this.numberOfActiveFilters-=this.exerciseCategories.size+1,this.allCategoriesSelected=!1,this.includeExercisesWithNoCategory=!1):(this.setupCategoryFilter(e),this.includeExercisesWithNoCategory=!0,this.calculateNumberOfAppliedFilters()),this.applyCurrentFilter(e)}applyCurrentFilter(e){return e.filter(t=>t.categories?t.categories.flatMap(i=>this.filterMap.get(i.category)).reduce((i,a)=>i||a):this.includeExercisesWithNoCategory)}areAllCategoriesSelected(e){e?this.exercisesWithoutCategoriesPresent&&!this.includeExercisesWithNoCategory?this.allCategoriesSelected=!1:(this.allCategoriesSelected=!0,this.filterMap.forEach(t=>this.allCategoriesSelected=t&&this.allCategoriesSelected)):this.allCategoriesSelected=!1}static \u0275fac=(()=>{let e;return function(i){return(e||(e=o(r)))(i||r)}})();static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var C=(()=>{class r extends s{typeSet=new Set;initializeFilterOptions(e){this.typeSet=new Set(e.map(t=>t.exerciseType)),this.typeSet.forEach(t=>{this.filterMap.set(r.convertToMapKey(t),!0)}),this.numberOfActiveFilters=this.typeSet.size}toggleExerciseType(e,t){let i=r.convertToMapKey(e),a=this.filterMap.get(i);return this.filterMap.set(i,!a),this.numberOfActiveFilters+=a?-1:1,this.applyCurrentFilter(t)}applyCurrentFilter(e){return e.filter(t=>this.filterMap.get(r.convertToMapKey(t.exerciseType)))}static convertToMapKey(e){return e.toLowerCase().replace("_","-")}static \u0275fac=(()=>{let e;return function(i){return(e||(e=o(r)))(i||r)}})();static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{C as a,g as b};
//# sourceMappingURL=chunk-2ZSCKKMJ.js.map

import{b as te}from"./chunk-X4WQDEX3.js";import{a as ie}from"./chunk-5FAM7LIP.js";import{a as ee}from"./chunk-BIK4CL5A.js";import{d as Z}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{a as $}from"./chunk-2QXIMOEO.js";import{a as Y}from"./chunk-UDBRF4PR.js";import"./chunk-PUNMJFMR.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-PZ7IDTIM.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{C as G,H as J,K,b as N,c as q,h as H,m as U}from"./chunk-WA5GEAJB.js";import{a as X}from"./chunk-K3W6YFKH.js";import"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import{m as Q}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as M}from"./chunk-U54OSGNH.js";import{f as L,h as I}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{L as z,O as A}from"./chunk-IOA4DPXY.js";import{Db as o,Dc as E,Ea as p,Ma as S,Mc as k,Na as C,Oc as l,Sc as D,Tb as w,Za as u,Zb as _,dd as e,ed as y,fd as R,kc as v,ld as x,md as f,nd as g,rd as j,sc as b,uc as F,vc as O,wc as T,xc as s,ya as P,yc as r,yd as W,zc as c,zd as V}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var ne=(()=>{class n{http=p(A);getSuspiciousSessions(t,a,i){let d=new z().set("differentStudentExamsSameIPAddress",i.sameIpAddressDifferentStudentExams.toString()).set("differentStudentExamsSameBrowserFingerprint",i.sameBrowserFingerprintDifferentStudentExams.toString()).set("sameStudentExamDifferentIPAddresses",i.differentIpAddressesSameStudentExam.toString()).set("sameStudentExamDifferentBrowserFingerprints",i.differentIpAddressesSameStudentExam.toString()).set("ipOutsideOfRange",i.ipAddressOutsideOfRange.toString());return i.ipSubnet&&(d=d.set("ipSubnet",i.ipSubnet)),this.http.get(`api/exam/courses/${t}/exams/${a}/suspicious-sessions`,{params:d})}static \u0275fac=function(a){return new(a||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se=(()=>{class n{http=p(A);resourceUrlExercises="api/plagiarism/exercises";getNumberOfPlagiarismResultsForExercise(t){return this.http.get(`${this.resourceUrlExercises}/${t}/potential-plagiarism-count`)}static \u0275fac=function(a){return new(a||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ae(n,h){if(n&1){let t=E();e(0,`
            `),s(1,"tr"),e(2,`
                `),s(3,"th",7),e(4),r(),e(5,`
                `),s(6,"td"),e(7),r(),e(8,`
                `),s(9,"td"),e(10),r(),e(11,`
                `),s(12,"td"),e(13),r(),e(14,`
                `),s(15,"td"),e(16,`
                    `),s(17,"button",8),k("click",function(){let i=S(t).$implicit,d=l();return C(d.goToPlagiarismDetection(i))}),r(),e(18,`
                `),r(),e(19,`
            `),r(),e(20,`
        `)}if(n&2){let t=h.$implicit,a=h.$index,i=l();o(4),y(a+1),o(3),y(t.title),o(3),y(i.plagiarismResultsPerExercise().get(t)),o(3),y(i.plagiarismCasesPerExercise().get(t)),o(4),D("id","view-plagiarism-results-btn-",a,"")}}function oe(n,h){if(n&1){let t=E();e(0,`
    `),s(1,"button",9),k("click",function(){S(t);let i=l();return C(i.goToPlagiarismCases())}),r(),e(2,`
`)}}var re=(()=>{class n{router=p(I);exercises=u.required();plagiarismCasesPerExercise=u.required();plagiarismResultsPerExercise=u.required();anyPlagiarismCases=u(!1);courseId=u.required();examId=u.required();goToPlagiarismDetection(t){let a=t.exerciseGroup?.id,i=t.type;this.router.navigate(["/course-management",this.courseId(),"exams",this.examId(),"exercise-groups",a,Q(i),t.id,"plagiarism"])}goToPlagiarismCases(){this.router.navigate(["/course-management",this.courseId(),"exams",this.examId(),"plagiarism-cases"])}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=w({type:n,selectors:[["jhi-plagiarism-cases-overview"]],inputs:{exercises:[1,"exercises"],plagiarismCasesPerExercise:[1,"plagiarismCasesPerExercise"],plagiarismResultsPerExercise:[1,"plagiarismResultsPerExercise"],anyPlagiarismCases:[1,"anyPlagiarismCases"],courseId:[1,"courseId"],examId:[1,"examId"]},decls:28,vars:1,consts:[["jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.title"],[1,"table"],["scope","col"],["scope","col","jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.exerciseName"],["scope","col","jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.numberOfResults"],["scope","col","jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.numberOfCases"],["scope","col","jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.actions"],["scope","row"],["jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.viewResultsOrRunDetection",1,"btn","btn-primary",3,"click","id"],["id","view-plagiarism-cases-btn","jhiTranslate","artemisApp.examManagement.plagiarismCasesOverview.viewCases",1,"btn","btn-primary",3,"click"]],template:function(a,i){a&1&&(c(0,"h5",0),e(1,`
`),s(2,"table",1),e(3,`
    `),s(4,"thead"),e(5,`
        `),s(6,"tr"),e(7,`
            `),s(8,"th",2),e(9,"#"),r(),e(10,`
            `),c(11,"th",3),e(12,`
            `),c(13,"th",4),e(14,`
            `),c(15,"th",5),e(16,`
            `),c(17,"th",6),e(18,`
        `),r(),e(19,`
    `),r(),e(20,`
    `),s(21,"tbody"),e(22,`
        `),O(23,ae,21,6,null,null,F),r(),e(25,`
`),r(),e(26,`
`),_(27,oe,3,0)),a&2&&(o(23),T(i.exercises()),o(4),b(i.anyPlagiarismCases()?27:-1))},dependencies:[M],encapsulation:2})}return n})();var me=n=>({numberOfSuspiciousSessions:n});function ce(n,h){if(n&1){let t=E();e(0,`
    `),s(1,"div",16),e(2,`
        `),s(3,"div",17),e(4,`
            `),c(5,"label",18),e(6,`
            `),c(7,"jhi-help-icon",19),e(8,`
        `),r(),e(9,`
        `),s(10,"input",20),g("ngModelChange",function(i){S(t);let d=l();return f(d.ipSubnet,i)||(d.ipSubnet=i),C(i)}),r(),e(11,`
    `),r(),e(12,`
`)}if(n&2){let t=l();o(10),x("ngModel",t.ipSubnet),v("pattern",t.ipSubnetRegexPattern)}}function de(n,h){if(n&1&&(e(0,`
        `),c(1,"p",21),e(2,`
    `)),n&2){let t=l();o(),v("translateValues",j(1,me,t.suspiciousSessions==null?null:t.suspiciousSessions.length))}}function pe(n,h){if(n&1){let t=E();e(0,`
        `),s(1,"button",22),k("click",function(){S(t);let i=l();return C(i.goToSuspiciousSessions())}),e(2,`
            `),c(3,"span",23),e(4,`
        `),r(),e(5,`
    `)}}var Ne=(()=>{class n{suspiciousSessionsService=p(ne);activatedRoute=p(L);plagiarismCasesService=p(ie);examService=p(ee);plagiarismResultsService=p(se);router=p(I);exercises=[];plagiarismCasesPerExercise=new Map;plagiarismResultsPerExercise=new Map;anyPlagiarismCases=!1;suspiciousSessions=[];examId;courseId;checkboxCriterionDifferentStudentExamsSameIPAddressChecked=!1;checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked=!1;checkboxCriterionSameStudentExamDifferentIPAddressesChecked=!1;checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked=!1;checkboxCriterionIPOutsideOfASpecificRangeChecked=!1;ipSubnet;analyzing=!1;analyzed=!1;ipSubnetRegexPattern=new RegExp("(^([0-9]{1,3}.){3}[0-9]{1,3}(/([0-9]|[1-2][0-9]|3[0-2]))?$)|(^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$)");documentationType="SuspiciousBehavior";ngOnInit(){this.examId=Number(this.activatedRoute.snapshot.paramMap.get("examId")),this.courseId=Number(this.activatedRoute.snapshot.paramMap.get("courseId")),this.examService.getExercisesWithPotentialPlagiarismForExam(this.courseId,this.examId).subscribe(t=>{this.exercises=t,this.retrievePlagiarismCases()})}retrievePlagiarismCases=()=>{this.exercises.forEach(t=>{this.plagiarismCasesService.getNumberOfPlagiarismCasesForExercise(t).subscribe(a=>{this.plagiarismCasesPerExercise.computeIfAbsent(t,()=>a),a>0&&(this.anyPlagiarismCases=!0)}),this.plagiarismResultsService.getNumberOfPlagiarismResultsForExercise(t.id).subscribe(a=>{this.plagiarismResultsPerExercise.computeIfAbsent(t,()=>a)})})};get analyzeButtonEnabled(){return(this.checkboxCriterionDifferentStudentExamsSameIPAddressChecked||this.checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked||this.checkboxCriterionSameStudentExamDifferentIPAddressesChecked||this.checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked||this.checkboxCriterionIPOutsideOfASpecificRangeChecked)&&(!this.checkboxCriterionIPOutsideOfASpecificRangeChecked||this.checkboxCriterionIPOutsideOfASpecificRangeChecked&&this.ipSubnetRegexPattern.test(this.ipSubnet))}goToSuspiciousSessions(){this.router.navigate(["/course-management",this.courseId,"exams",this.examId,"suspicious-behavior","suspicious-sessions"],{state:{suspiciousSessions:this.suspiciousSessions,ipSubnet:this.ipSubnet}})}analyzeSessions(){let t=new te(this.checkboxCriterionDifferentStudentExamsSameIPAddressChecked,this.checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked,this.checkboxCriterionSameStudentExamDifferentIPAddressesChecked,this.checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked,this.checkboxCriterionIPOutsideOfASpecificRangeChecked,this.ipSubnet);this.analyzing=!0,this.suspiciousSessionsService.getSuspiciousSessions(this.courseId,this.examId,t).subscribe({next:a=>{this.suspiciousSessions=a,this.analyzing=!1,this.analyzed=!0},error:()=>{this.analyzing=!1,this.analyzed=!0}})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=w({type:n,selectors:[["jhi-suspicious-behavior"]],decls:56,vars:21,consts:[[3,"type"],["jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionDescription"],["type","checkbox","id","different-student-exams-same-ip",1,"form-check-input",3,"ngModelChange","ngModel"],["for","different-student-exams-same-ip","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionCriterionIpAddress"],["type","checkbox","id","different-student-exams-same-fingerprints",1,"form-check-input",3,"ngModelChange","ngModel"],["for","different-student-exams-same-fingerprints","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionCriterionBrowserFingerprint"],["type","checkbox","id","same-student-exam-different-ips",1,"form-check-input",3,"ngModelChange","ngModel"],["for","same-student-exam-different-ips","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionCriterionDifferentIpAddress"],["type","checkbox","id","same-student-exam-different-fingerprints",1,"form-check-input",3,"ngModelChange","ngModel"],["for","same-student-exam-different-fingerprints","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionCriterionDifferentBrowserFingerprint"],["type","checkbox","id","ip-outside-of-range",1,"form-check-input",3,"ngModelChange","ngModel"],["for","ip-outside-of-range","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessionCriterionIpOutsideOfRange"],[1,"mt-3","mb-3"],[3,"onClick","title","disabled","isLoading"],[1,"column"],[3,"exercises","plagiarismCasesPerExercise","plagiarismResultsPerExercise","anyPlagiarismCases","courseId","examId"],[1,"form-group","col-6"],[1,"d-flex"],["for","ip-subnet","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.subnet",1,"me-2"],["text","artemisApp.examManagement.suspiciousBehavior.subnetHelp"],["type","text","id","ip-subnet","required","",1,"form-control",3,"ngModelChange","ngModel","pattern"],["jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessions.number",3,"translateValues"],["type","submit",1,"btn","btn-primary","mb-5",3,"click"],["id","view-sessions-btn","jhiTranslate","artemisApp.examManagement.suspiciousBehavior.suspiciousSessions.view",1,"d-none","d-md-inline"]],template:function(a,i){a&1&&(s(0,"h5"),e(1),W(2,"artemisTranslate"),c(3,"jhi-documentation-button",0),e(4,`
`),r(),e(5,`
`),c(6,"p",1),e(7,`
`),s(8,"div"),e(9,`
    `),s(10,"input",2),g("ngModelChange",function(m){return f(i.checkboxCriterionDifferentStudentExamsSameIPAddressChecked,m)||(i.checkboxCriterionDifferentStudentExamsSameIPAddressChecked=m),m}),r(),e(11,`
    `),c(12,"label",3),e(13,`
`),r(),e(14,`
`),s(15,"div"),e(16,`
    `),s(17,"input",4),g("ngModelChange",function(m){return f(i.checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked,m)||(i.checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked=m),m}),r(),e(18,`
    `),c(19,"label",5),e(20,`
`),r(),e(21,`
`),s(22,"div"),e(23,`
    `),s(24,"input",6),g("ngModelChange",function(m){return f(i.checkboxCriterionSameStudentExamDifferentIPAddressesChecked,m)||(i.checkboxCriterionSameStudentExamDifferentIPAddressesChecked=m),m}),r(),e(25,`
    `),c(26,"label",7),e(27,`
`),r(),e(28,`
`),s(29,"div"),e(30,`
    `),s(31,"input",8),g("ngModelChange",function(m){return f(i.checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked,m)||(i.checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked=m),m}),r(),e(32,`
    `),c(33,"label",9),e(34,`
`),r(),e(35,`
`),s(36,"div"),e(37,`
    `),s(38,"input",10),g("ngModelChange",function(m){return f(i.checkboxCriterionIPOutsideOfASpecificRangeChecked,m)||(i.checkboxCriterionIPOutsideOfASpecificRangeChecked=m),m}),r(),e(39,`
    `),c(40,"label",11),e(41,`
`),r(),e(42,`
`),_(43,ce,13,2),s(44,"div",12),e(45,`
    `),s(46,"jhi-button",13),k("onClick",function(){return i.analyzeSessions()}),r(),e(47,`
`),r(),e(48,`
`),s(49,"div",14),e(50,`
    `),_(51,de,3,3)(52,pe,6,0),r(),e(53,`
`),c(54,"jhi-plagiarism-cases-overview",15),e(55,`
`)),a&2&&(o(),R(`
    `,V(2,19,"artemisApp.examManagement.suspiciousBehavior.title"),`
    `),o(2),v("type",i.documentationType),o(7),x("ngModel",i.checkboxCriterionDifferentStudentExamsSameIPAddressChecked),o(7),x("ngModel",i.checkboxCriterionDifferentStudentExamsSameBrowserFingerprintChecked),o(7),x("ngModel",i.checkboxCriterionSameStudentExamDifferentIPAddressesChecked),o(7),x("ngModel",i.checkboxCriterionSameStudentExamDifferentBrowserFingerprintsChecked),o(7),x("ngModel",i.checkboxCriterionIPOutsideOfASpecificRangeChecked),o(5),b(i.checkboxCriterionIPOutsideOfASpecificRangeChecked?43:-1),o(3),v("title","artemisApp.examManagement.suspiciousBehavior.analyzeSessions")("disabled",!i.analyzeButtonEnabled)("isLoading",i.analyzing),o(5),b(i.analyzed?51:-1),o(),b(i.suspiciousSessions.length!==0?52:-1),o(2),v("exercises",i.exercises)("plagiarismCasesPerExercise",i.plagiarismCasesPerExercise)("plagiarismResultsPerExercise",i.plagiarismResultsPerExercise)("anyPlagiarismCases",i.anyPlagiarismCases)("courseId",i.courseId)("examId",i.examId))},dependencies:[K,q,N,H,G,J,U,M,X,re,Z,$,Y],encapsulation:2})}return n})();export{Ne as SuspiciousBehaviorComponent};
//# sourceMappingURL=suspicious-behavior.component-QOERI3RH.js.map

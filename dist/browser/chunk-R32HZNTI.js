import{a as w,m as L}from"./chunk-CJVQ2B7U.js";import{a as M}from"./chunk-HQ6UGNQX.js";import{a as y}from"./chunk-U54OSGNH.js";import{f as S,g as x,h as P}from"./chunk-M6Z6DKZQ.js";import{n as O}from"./chunk-IOA4DPXY.js";import{Db as c,Dc as _,Ea as s,Ma as v,Mc as b,Na as C,Oc as g,Tb as h,Zb as u,dd as t,kc as l,rd as f,sc as d,xc as i,yc as a,zc as p}from"./chunk-5LC5EQRR.js";var D=n=>({"sidebar-collapsed":n});function T(n,m){if(n&1){let e=_();t(0,`
            `),i(1,"div",3),t(2,`
                `),i(3,"router-outlet",4),b("deactivate",function(){v(e);let o=g(2);return C(o.onSubRouteDeactivate())}),a(),t(4,`
            `),a(),t(5,`
        `)}}function A(n,m){n&1&&(t(0,`
            `),i(1,"div",5),t(2,`
                `),p(3,"div",6),t(4,`
            `),a(),t(5,`
        `))}function I(n,m){if(n&1&&(t(0,`
        `),i(1,"div",1),t(2,`
            `),p(3,"jhi-sidebar",2),t(4,`
        `),a(),t(5,`

        `),u(6,T,6,0)(7,A,6,0)),n&2){let e=g();c(),l("ngClass",f(7,D,e.isCollapsed)),c(2),l("itemSelected",e.lectureSelected)("courseId",e.courseId)("sidebarData",e.sidebarData)("collapseState",e.DEFAULT_COLLAPSE_STATE)("sidebarItemAlwaysShow",e.DEFAULT_SHOW_ALWAYS),c(3),d(e.lectureSelected?6:7)}}var E={future:{entityData:[]},current:{entityData:[]},dueSoon:{entityData:[]},past:{entityData:[]},noDate:{entityData:[]}},U={future:!0,current:!1,dueSoon:!0,past:!0,noDate:!0},k={future:!1,current:!1,dueSoon:!1,past:!1,noDate:!1},V=(()=>{class n{courseStorageService=s(M);route=s(S);router=s(P);courseOverviewService=s(w);parentParamSubscription;courseUpdatesSubscription;course;courseId;lectureSelected=!0;sidebarData;accordionLectureGroups=E;sortedLectures=[];sidebarLectures=[];isCollapsed=!1;DEFAULT_COLLAPSE_STATE=U;DEFAULT_SHOW_ALWAYS=k;ngOnInit(){this.isCollapsed=this.courseOverviewService.getSidebarCollapseStateFromStorage("lecture"),this.parentParamSubscription=this.route.parent.params.subscribe(e=>{this.courseId=Number(e.courseId)}),this.course=this.courseStorageService.getCourse(this.courseId),this.prepareSidebarData(),this.courseUpdatesSubscription=this.courseStorageService.subscribeToCourseUpdates(this.courseId).subscribe(e=>{this.course=e,this.prepareSidebarData()}),this.navigateToLecture()}navigateToLecture(){let e=this.courseOverviewService.getUpcomingLecture(this.course?.lectures),r=this.getLastSelectedLecture(),o=this.route.firstChild?.snapshot.params.lectureId;!o&&r?this.router.navigate([r],{relativeTo:this.route,replaceUrl:!0}):!o&&e?this.router.navigate([e.id],{relativeTo:this.route,replaceUrl:!0}):this.lectureSelected=!!o}prepareSidebarData(){this.course?.lectures&&(this.sortedLectures=this.courseOverviewService.sortLectures(this.course.lectures),this.sidebarLectures=this.courseOverviewService.mapLecturesToSidebarCardElements(this.sortedLectures),this.accordionLectureGroups=this.courseOverviewService.groupLecturesByStartDate(this.sortedLectures),this.updateSidebarData())}updateSidebarData(){this.sidebarData={groupByCategory:!0,storageId:"lecture",groupedData:this.accordionLectureGroups,ungroupedData:this.sidebarLectures}}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.courseOverviewService.setSidebarCollapseState("lecture",this.isCollapsed)}getLastSelectedLecture(){return sessionStorage.getItem("sidebar.lastSelectedItem.lecture.byCourse."+this.courseId)}onSubRouteDeactivate(){this.route.firstChild||this.navigateToLecture()}ngOnDestroy(){this.courseUpdatesSubscription?.unsubscribe(),this.parentParamSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=h({type:n,selectors:[["jhi-course-lectures"]],decls:4,vars:1,consts:[[1,"d-flex","justify-content-between"],[3,"ngClass"],[3,"itemSelected","courseId","sidebarData","collapseState","sidebarItemAlwaysShow"],[1,"vw-100","module-bg","rounded-3"],[3,"deactivate"],[1,"vw-100","module-bg","rounded-3","p-3","d-flex","justify-content-between"],["jhiTranslate","artemisApp.courseOverview.lectureDetails.selectLecture",1,"col-12","text-center","my-auto"]],template:function(r,o){r&1&&(i(0,"div",0),t(1,`
    `),u(2,I,8,9),a(),t(3,`
`)),r&2&&(c(2),d(o.course?2:-1))},dependencies:[O,L,x,y],styles:[".course-body-container[_ngcontent-%COMP%]{position:relative}.refresh-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:flex-start;opacity:0;pointer-events:none;transition:.1s ease-out opacity}.refresh-overlay.active[_ngcontent-%COMP%]{background-color:var(--overview-refresh-overlay-bg-color);opacity:1;pointer-events:auto;transition:.2s ease-in opacity}.refresh-overlay[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{position:relative;top:calc(47.5vh - 150px);transform:translateY(-50%);color:var(--overview-refresh-overlay-color)}.back-button[_ngcontent-%COMP%]{cursor:pointer}.current-week-row[_ngcontent-%COMP%]    >div{background-color:var(--overview-light-primary-background-color)}.statistic-summary[_ngcontent-%COMP%]{margin-top:25px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:flex-end;margin-bottom:20px}.statistic-summary[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-text[_ngcontent-%COMP%]{position:absolute;width:350px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]{margin-bottom:40px}.statistic-summary[_ngcontent-%COMP%]   .color-legend-container[_ngcontent-%COMP%]   .color-legend-entry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:100%}.exercise-row-container[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{cursor:pointer}.exercise-row-container[_ngcontent-%COMP%]   .collapsed[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid var(--overview-light-border-color)}.icon-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;horiz-align:center}.course-information[_ngcontent-%COMP%]{padding-top:29px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]{cursor:pointer;border-radius:3px}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover{background-color:var(--overview-light-background-color)}.course-information[_ngcontent-%COMP%]   .exercise-panel[_ngcontent-%COMP%]   .row.has-exercises[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:var(--primary)}.exercise-divider[_ngcontent-%COMP%]{height:0;width:100%;margin:1rem 0 .5rem;border-top:1px solid var(--overview-light-border-color)}.color-indicator[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0f6ab4;position:relative;top:-4px;margin-right:5px;border-radius:3px}canvas#complete-chart[_ngcontent-%COMP%]{z-index:99}.dev-button[_ngcontent-%COMP%]{text-align:left;color:#fff;background-color:#3e8acc;border:none;border-radius:1px}.dev-button[_ngcontent-%COMP%]:hover{background-color:#0f6ab4}.dev-button[_ngcontent-%COMP%]:active{box-shadow:0 2px 0 var(--artemis-dark)}.dev-button[_ngcontent-%COMP%]:disabled{background-color:gray}.btn-primary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:disabled, .btn-info[_ngcontent-%COMP%], .btn-info[_ngcontent-%COMP%]:hover, .btn-success[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 768px){.col-12[_ngcontent-%COMP%]{width:100%!important}}.fadeInIcon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s;animation-iteration-count:initial}@media (max-width: 655px){.horizontal-scroll[_ngcontent-%COMP%]{overflow-x:auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}50%{opacity:.5}to{visibility:visible;opacity:1}}.exercise-content-sidebar-width[_ngcontent-%COMP%]{width:calc(100% - 263px)!important;transition:width .1s 0s ease-in-out}.exercise-content-width[_ngcontent-%COMP%]{width:100%;transition:width .1s 0s ease-in-out}"]})}return n})();export{V as a};
//# sourceMappingURL=chunk-R32HZNTI.js.map

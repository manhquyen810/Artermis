import{a as f}from"./chunk-IL7JUOEF.js";import{a as x}from"./chunk-T3DAFG3B.js";import"./chunk-2D32KPWA.js";import"./chunk-7MKMUXV6.js";import{a as l}from"./chunk-X4L2PWEV.js";import{a as M}from"./chunk-PVMY5D66.js";import{a as P}from"./chunk-DO3GZ3ZH.js";import"./chunk-DOLVNMRR.js";import"./chunk-RNPAFOPW.js";import"./chunk-U4DJRHYQ.js";import"./chunk-TECMX7AA.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import"./chunk-HQ6UGNQX.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as E}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import{a as d}from"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import{c as R}from"./chunk-JXJXC4DZ.js";import"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import{p as _}from"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import"./chunk-U54OSGNH.js";import{f as I,h as j}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{A as v,Db as y,Dc as b,Ea as n,Ma as T,Mc as w,Na as U,Tb as g,Yc as A,Zc as L,_c as S,dd as c,kc as h,xc as p,yc as u}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var N=["attachmentUnitForm"],Z=(()=>{class a{activatedRoute=n(I);router=n(j);attachmentUnitService=n(M);alertService=n(R);attachmentUnitForm;attachmentUnitToCreate=new l;attachmentToCreate=new f;isLoading;lectureId;courseId;ngOnInit(){let t=this.activatedRoute.parent.parent;v([t.paramMap,t.parent.paramMap]).subscribe(([e,i])=>{this.lectureId=Number(e.get("lectureId")),this.courseId=Number(i.get("courseId"))}),this.attachmentUnitToCreate=new l,this.attachmentToCreate=new f}createAttachmentUnit(t){if(!t?.formProperties?.name||!t?.fileProperties?.file||!t?.fileProperties?.fileName)return;let{description:e,name:i,releaseDate:r,competencyLinks:C}=t.formProperties,{file:s,fileName:F}=t.fileProperties;this.attachmentToCreate.name=i,this.attachmentToCreate.releaseDate=r,this.attachmentToCreate.attachmentType="FILE",this.attachmentToCreate.version=1,this.attachmentToCreate.uploadDate=_(),this.attachmentUnitToCreate.description=e,this.attachmentUnitToCreate.competencyLinks=C||[],this.isLoading=!0;let o=new FormData;o.append("file",s,F),o.append("attachment",d(this.attachmentToCreate)),o.append("attachmentUnit",d(this.attachmentUnitToCreate)),this.attachmentUnitService.create(o,this.lectureId).subscribe({next:()=>this.router.navigate(["../../"],{relativeTo:this.activatedRoute}),error:m=>{m.error.params==="file"&&m?.error?.title?this.alertService.error(m.error.title):E(this.alertService,m)}}).add(()=>this.isLoading=!1)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=g({type:a,selectors:[["jhi-create-attachment-unit"]],viewQuery:function(e,i){if(e&1&&A(N,5),e&2){let r;L(r=S())&&(i.attachmentUnitForm=r.first)}},decls:6,vars:2,consts:[["attachmentUnitForm",""],[3,"isLoading"],[3,"formSubmitted","isEditMode"]],template:function(e,i){if(e&1){let r=b();p(0,"jhi-lecture-unit-layout",1),c(1,`
    `),p(2,"jhi-attachment-unit-form",2,0),w("formSubmitted",function(s){return T(r),U(i.createAttachmentUnit(s))}),u(),c(4,`
`),u(),c(5,`
`)}e&2&&(h("isLoading",i.isLoading),y(2),h("isEditMode",!1))},dependencies:[P,x],encapsulation:2})}return a})();export{Z as CreateAttachmentUnitComponent};
//# sourceMappingURL=create-attachment-unit.component-WP2JEAP5.js.map

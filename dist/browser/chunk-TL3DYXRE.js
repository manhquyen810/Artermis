import{a as o}from"./chunk-R5BZWVRQ.js";import{O}from"./chunk-IOA4DPXY.js";import{Ea as c,f as T,ya as N}from"./chunk-5LC5EQRR.js";var I=function(e){return e.NOTIFICATION_SETTINGS="NOTIFICATION_SETTINGS",e.SCIENCE_SETTINGS="SCIENCE_SETTINGS",e}(I||{}),t=function(e){return e.NOTIFICATION__WEEKLY_SUMMARY__BASIC_WEEKLY_SUMMARY="notification.weekly-summary.basic-weekly-summary",e.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_COURSE_POST="notification.course-wide-discussion.new-course-post",e.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_REPLY_FOR_COURSE_POST="notification.course-wide-discussion.new-reply-for-course-post",e.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_ANNOUNCEMENT_POST="notification.course-wide-discussion.new-announcement-post",e.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_SUBMISSION_ASSESSED="notification.exercise-notification.exercise-submission-assessed",e.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_RELEASED="notification.exercise-notification.exercise-released",e.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_OPEN_FOR_PRACTICE="notification.exercise-notification.exercise-open-for-practice",e.NOTIFICATION__EXERCISE_NOTIFICATION__FILE_SUBMISSION_SUCCESSFUL="notification.exercise-notification.file-submission-successful",e.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_EXERCISE_POST="notification.exercise-notification.new-exercise-post",e.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_REPLY_FOR_EXERCISE_POST="notification.exercise-notification.new-reply-for-exercise-post",e.NOTIFICATION__LECTURE_NOTIFICATION__ATTACHMENT_CHANGES="notification.lecture-notification.attachment-changes",e.NOTIFICATION__LECTURE_NOTIFICATION__NEW_LECTURE_POST="notification.lecture-notification.new-lecture-post",e.NOTIFICATION__LECTURE_NOTIFICATION__NEW_REPLY_FOR_LECTURE_POST="notification.lecture-notification.new-reply-for-lecture-post",e.NOTIFICATION__EXAM_NOTIFICATION__NEW_EXAM_POST="notification.exam-notification.new-exam-post",e.NOTIFICATION__EXAM_NOTIFICATION__NEW_REPLY_FOR_EXAM_POST="notification.exam-notification.new-reply-for-exam-post",e.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION="notification.tutorial-group-notification.tutorial-group-registration",e.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_DELETE_UPDATE="notification.tutorial-group-notification.tutorial-group-delete-update",e.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION="notification.tutor-notification.tutorial-group-registration",e.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_ASSIGN_UNASSIGN="notification.tutor-notification.tutorial-group-assign-unassign",e.NOTIFICATION__EDITOR_NOTIFICATION__PROGRAMMING_TEST_CASES_CHANGED="notification.editor-notification.programming-test-cases-changed",e.NOTIFICATION__INSTRUCTOR_NOTIFICATION__COURSE_AND_EXAM_ARCHIVING_STARTED="notification.instructor-notification.course-and-exam-archiving-started",e.NOTIFICATION__USER_NOTIFICATION__CONVERSATION_MESSAGE="notification.user-notification.conversation-message",e.NOTIFICATION__USER_NOTIFICATION__NEW_REPLY_IN_CONVERSATION_MESSAGE="notification.user-notification.new-reply-in-conversation",e.NOTIFICATION__USER_NOTIFICATION__USER_MENTION="notification.user-notification.user-mention",e.SCIENCE__GENERAL__ACTIVITY_TRACKING="science.general.activity-tracking",e}(t||{});var E={category:I.NOTIFICATION_SETTINGS,groups:[{key:"weeklySummary",restrictionLevels:[o.USER],settings:[{key:"basicWeeklySummary",descriptionKey:"basicWeeklySummaryDescription",settingId:t.NOTIFICATION__WEEKLY_SUMMARY__BASIC_WEEKLY_SUMMARY,emailSupport:!0,webappSupport:!1}]},{key:"courseWideDiscussionNotifications",restrictionLevels:[o.USER],settings:[{key:"newCoursePost",descriptionKey:"newCoursePostDescription",settingId:t.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_COURSE_POST},{key:"newReplyForCoursePost",descriptionKey:"newReplyForCoursePostDescription",settingId:t.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_REPLY_FOR_COURSE_POST},{key:"newAnnouncementPost",descriptionKey:"newAnnouncementPostDescription",settingId:t.NOTIFICATION__COURSE_WIDE_DISCUSSION__NEW_ANNOUNCEMENT_POST,emailSupport:!0,webappSupport:!1}]},{key:"exerciseNotifications",restrictionLevels:[o.USER],settings:[{key:"exerciseReleased",descriptionKey:"exerciseReleasedDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_RELEASED,emailSupport:!0},{key:"exerciseOpenForPractice",descriptionKey:"exerciseOpenForPracticeDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_OPEN_FOR_PRACTICE,emailSupport:!0},{key:"exerciseSubmissionAssessed",descriptionKey:"exerciseSubmissionAssessedDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__EXERCISE_SUBMISSION_ASSESSED,emailSupport:!0},{key:"fileSubmissionSuccessful",descriptionKey:"fileSubmissionSuccessfulDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__FILE_SUBMISSION_SUCCESSFUL,emailSupport:!0},{key:"newExercisePost",descriptionKey:"newExercisePostDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_EXERCISE_POST},{key:"newReplyForExercisePost",descriptionKey:"newReplyForExercisePostDescription",settingId:t.NOTIFICATION__EXERCISE_NOTIFICATION__NEW_REPLY_FOR_EXERCISE_POST}]},{key:"lectureNotifications",restrictionLevels:[o.USER],settings:[{key:"attachmentChanges",descriptionKey:"attachmentChangesDescription",settingId:t.NOTIFICATION__LECTURE_NOTIFICATION__ATTACHMENT_CHANGES,emailSupport:!0},{key:"newLecturePost",descriptionKey:"newLecturePostDescription",settingId:t.NOTIFICATION__LECTURE_NOTIFICATION__NEW_LECTURE_POST},{key:"newReplyForLecturePost",descriptionKey:"newReplyForLecturePostDescription",settingId:t.NOTIFICATION__LECTURE_NOTIFICATION__NEW_REPLY_FOR_LECTURE_POST}]},{key:"examNotifications",restrictionLevels:[o.USER],settings:[{key:"newExamPost",descriptionKey:"newExamPostDescription",settingId:t.NOTIFICATION__EXAM_NOTIFICATION__NEW_EXAM_POST},{key:"newReplyForExamPost",descriptionKey:"newReplyForExamPostDescription",settingId:t.NOTIFICATION__EXAM_NOTIFICATION__NEW_REPLY_FOR_EXAM_POST}]},{key:"userMentionNotifications",restrictionLevels:[o.USER],settings:[{key:"newUserMention",descriptionKey:"newUserMentionDescription",settingId:t.NOTIFICATION__USER_NOTIFICATION__USER_MENTION}]},{key:"conversationNotifications",restrictionLevels:[o.USER],settings:[{key:"newConversationMessages",descriptionKey:"newConversationMessageDescription",settingId:t.NOTIFICATION__USER_NOTIFICATION__CONVERSATION_MESSAGE,emailSupport:!1},{key:"newReplyMessage",descriptionKey:"conversationNewReplyMessageDescription",settingId:t.NOTIFICATION__USER_NOTIFICATION__NEW_REPLY_IN_CONVERSATION_MESSAGE,emailSupport:!1}]},{key:"tutorialGroupNotifications",restrictionLevels:[o.USER],settings:[{key:"registrationTutorialGroup",descriptionKey:"registrationTutorialGroupStudentDescription",settingId:t.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION,emailSupport:!0},{key:"tutorialGroupUpdateDelete",descriptionKey:"tutorialGroupUpdateDeleteDescription",settingId:t.NOTIFICATION__TUTORIAL_GROUP_NOTIFICATION__TUTORIAL_GROUP_DELETE_UPDATE,emailSupport:!0}]},{key:"tutorNotifications",restrictionLevels:[o.TA,o.EDITOR,o.INSTRUCTOR],settings:[{key:"registrationTutorialGroup",descriptionKey:"registrationTutorialGroupTutorDescription",settingId:t.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_REGISTRATION,emailSupport:!0},{key:"assignUnassignTutorialGroup",descriptionKey:"assignUnassignTutorialGroupDescription",settingId:t.NOTIFICATION__TUTOR_NOTIFICATION__TUTORIAL_GROUP_ASSIGN_UNASSIGN,emailSupport:!0}]},{key:"editorNotifications",restrictionLevels:[o.EDITOR,o.INSTRUCTOR],settings:[{key:"programmingTestCasesChanged",descriptionKey:"programmingTestCasesChangedDescription",settingId:t.NOTIFICATION__EDITOR_NOTIFICATION__PROGRAMMING_TEST_CASES_CHANGED}]},{key:"instructorNotifications",restrictionLevels:[o.INSTRUCTOR],settings:[{key:"courseAndExamArchivingStarted",descriptionKey:"courseAndExamArchivingStartedDescription",settingId:t.NOTIFICATION__INSTRUCTOR_NOTIFICATION__COURSE_AND_EXAM_ARCHIVING_STARTED}]}]};var a={category:I.SCIENCE_SETTINGS,groups:[{key:"general",restrictionLevels:[o.USER],settings:[{key:"activity",descriptionKey:"activityDescription",settingId:t.SCIENCE__GENERAL__ACTIVITY_TRACKING,active:!0}]}]};var G=(()=>{class e{http=c(O);notificationSettingsResourceUrl="api/communication/notification-settings";scienceSettingsResourceUrl="api/atlas/science-settings";profilePictureResourceUrl="api/core/account/profile-picture";applyNewChangesSource=new T;userSettingsChangeEvent=this.applyNewChangesSource.asObservable();error;loadSettings(i){switch(i){case I.NOTIFICATION_SETTINGS:return this.http.get(this.notificationSettingsResourceUrl,{observe:"response"});case I.SCIENCE_SETTINGS:return this.http.get(this.scienceSettingsResourceUrl,{observe:"response"})}}loadSettingsSuccessAsSettingsStructure(i,s){let n=e.loadSettingsStructure(s);return this.updateSettingsStructure(i,n),n}loadSettingsSuccessAsIndividualSettings(i,s){let n=this.loadSettingsSuccessAsSettingsStructure(i,s);return this.extractIndividualSettingsFromSettingsStructure(n)}saveSettings(i,s){switch(s){case I.NOTIFICATION_SETTINGS:return this.http.put(this.notificationSettingsResourceUrl,i,{observe:"response"});case I.SCIENCE_SETTINGS:return this.http.put(this.scienceSettingsResourceUrl,i,{observe:"response"})}}saveSettingsSuccess(i,s){return this.updateSettingsStructure(s,i),i}extractIndividualSettingsFromSettingsStructure(i){let s=[];return i.groups.forEach(n=>{n.settings.forEach(r=>{r.changed=!1,s.push(r)})}),s}updateSettingsStructure(i,s){for(let n=0;n<s.groups.length;n++)for(let r=0;r<s.groups[n].settings.length;r++){let S=s.groups[n].settings[r],_=i.find(C=>C.settingId===S.settingId);_!=null&&Object.assign(s.groups[n].settings[r],_)}}static loadSettingsStructure(i){switch(i){case I.NOTIFICATION_SETTINGS:return E;case I.SCIENCE_SETTINGS:return a}}sendApplyChangesEvent(i){this.applyNewChangesSource.next(i)}updateProfilePicture(i){let s=new FormData;return s.append("file",i,"placeholderName.jpeg"),this.http.put(`${this.profilePictureResourceUrl}`,s,{observe:"response"})}removeProfilePicture(){return this.http.delete(`${this.profilePictureResourceUrl}`,{observe:"response"})}static \u0275fac=function(s){return new(s||e)};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{I as a,t as b,G as c};
//# sourceMappingURL=chunk-TL3DYXRE.js.map

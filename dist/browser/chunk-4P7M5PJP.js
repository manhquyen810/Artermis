import{b as p}from"./chunk-EELXLOHY.js";import{L as c,O as h}from"./chunk-IOA4DPXY.js";import{Ea as u,ya as m,z as n}from"./chunk-5LC5EQRR.js";var g=(()=>{class i{http=u(h);MAX_FEEDBACK_TEXT_LENGTH=500;MAX_FEEDBACK_DETAIL_TEXT_LENGTH=5e3;resourceUrl="api/modeling";saveAssessment(t,e,s,r,a=!1){let o=new c;a&&(o=o.set("submit","true"));let l={feedbacks:e,assessmentNote:r},f=`${this.resourceUrl}/modeling-submissions/${s}/result/${t}/assessment`;return this.http.put(f,l,{params:o}).pipe(n(E=>this.convertResult(E)))}saveExampleAssessment(t,e){let s=`${this.resourceUrl}/modeling-submissions/${e}/example-assessment`;return this.http.put(s,t).pipe(n(r=>this.convertResult(r)))}updateAssessmentAfterComplaint(t,e,s,r){let a=`${this.resourceUrl}/modeling-submissions/${s}/assessment-after-complaint`,o={feedbacks:t,complaintResponse:e,assessmentNote:r};return this.http.put(a,o,{observe:"response"}).pipe(n(l=>this.convertResultEntityResponseTypeFromServer(l)))}getAssessment(t){return this.http.get(`${this.resourceUrl}/modeling-submissions/${t}/result`).pipe(n(e=>this.convertResult(e)))}getExampleAssessment(t,e){let s=`${this.resourceUrl}/exercise/${t}/modeling-submissions/${e}/example-assessment`;return this.http.get(s).pipe(n(r=>this.convertResult(r)))}cancelAssessment(t){return this.http.put(`${this.resourceUrl}/modeling-submissions/${t}/cancel-assessment`,null)}deleteAssessment(t,e,s){return this.http.delete(`${this.resourceUrl}/participations/${t}/modeling-submissions/${e}/results/${s}`)}convertResultEntityResponseTypeFromServer(t){let e=i.convertItemFromServer(t.body);return e=this.convertResult(e),e.completionDate=p(e.completionDate),e.submission&&(e.submission.submissionDate=p(e.submission.submissionDate)),e.participation&&(e.participation.initializationDate=p(e.participation.initializationDate)),t.clone({body:e})}static convertItemFromServer(t){return Object.assign({},t)}convertResult(t){if(!t||!t.feedbacks)return t;for(let e of t.feedbacks)e.reference&&(e.referenceType=e.reference.split(":")[0],e.referenceId=e.reference.split(":")[1]);return t}isFeedbackTextValid(t){return t?t.every(e=>(!e.text||e.text.length<=this.MAX_FEEDBACK_TEXT_LENGTH)&&(!e.detailText||e.detailText.length<=this.MAX_FEEDBACK_DETAIL_TEXT_LENGTH)):!0}static \u0275fac=function(e){return new(e||i)};static \u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{g as a};
//# sourceMappingURL=chunk-4P7M5PJP.js.map

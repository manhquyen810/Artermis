import{a as de,b as he}from"./chunk-F3NFBBHK.js";import{a as me}from"./chunk-OTCBNILH.js";import{N as ie,o as J,p as X,q as Z,r as ee,s as te}from"./chunk-VZRSC3LP.js";import{b as v,c as L,t as Q}from"./chunk-5GXY5RYT.js";import{a as le}from"./chunk-K3W6YFKH.js";import{d as ce}from"./chunk-EDXSOKK5.js";import{Qa as oe,j as ae,vb as se,y as re}from"./chunk-Z4VHWOB5.js";import{a as ne}from"./chunk-XUCCGZJR.js";import{a as pe}from"./chunk-U54OSGNH.js";import{t as q}from"./chunk-IOA4DPXY.js";import{Ad as I,Cc as M,Db as r,Dc as D,Ea as P,Fb as A,La as U,Ma as T,Mc as N,Na as x,Oc as d,Tb as k,U as B,Va as j,Xc as K,Yc as $,Zb as C,Zc as V,_ as G,_c as R,dd as t,fd as b,kc as m,mc as u,ra as w,rd as _,sc as g,uc as O,vc as W,wc as z,xc as s,yc as l,yd as E,z as S,zc as f,zd as Y}from"./chunk-5LC5EQRR.js";var fe=["ngbTypeahead"],ge=n=>({number:n}),ye=n=>({length:n});function Se(n,p){if(n&1){let e=D();t(0,`
                            `),s(1,"button",5),N("click",function(){let a=T(e).$implicit,o=d(3);return x(o.setEntitiesPerPage(a))}),t(2),E(3,"artemisTranslate"),l(),t(4,`
                        `)}if(n&2){let e=p.$implicit,i=d(3);r(),u("selected",e===i.pagingValue),r(),b(`
                                `,I(3,3,i.perPageTranslation(e),_(6,ge,e)),`
                            `)}}function Te(n,p){if(n&1&&(t(0,`
                `),s(1,"div",2),t(2,`
                    `),s(3,"button",3),t(4),E(5,"artemisTranslate"),l(),t(6,`
                    `),s(7,"div",4),t(8,`
                        `),W(9,Se,5,8,null,null,O),l(),t(11,`
                `),l(),t(12,`
            `)),n&2){let e=d(2);r(4),b(`
                        `,I(5,1,e.perPageTranslation(e.pagingValue),_(4,ge,e.pagingValue)),`
                    `),r(5),z(e.PAGING_VALUES)}}function xe(n,p){if(n&1){let e=D();t(0,`
                `),s(1,"div",6),t(2,`
                    `),s(3,"input",7,0),E(5,"artemisTranslate"),N("selectItem",function(a){T(e);let o=d(2);return x(o.onAutocompleteSelect(a.item))})("blur",function(){T(e);let a=d(2);return x(a.onSearchInputBlur())}),l(),t(6,`
                    `),s(7,"div",8),t(8,`
                        `),f(9,"fa-icon",9),t(10,`
                    `),l(),t(11,`
                    `),s(12,"div",8),t(13,`
                        `),f(14,"span",10),t(15,`
                    `),l(),t(16,`
                    `),s(17,"div",8),t(18,`
                        `),s(19,"span",11),t(20," No results "),l(),t(21,`
                    `),l(),t(22,`
                    `),s(23,"div",8),t(24,`
                        `),s(25,"span",12),t(26),l(),t(27,`
                    `),l(),t(28,`
                `),l(),t(29,`
            `)}if(n&2){let e=d(2);r(3),m("placeholder",Y(5,17,e.searchPlaceholderTranslation))("ngbTypeahead",e.onSearch)("resultFormatter",e.searchResultFormatter)("inputFormatter",e.searchInputFormatter),r(4),u("active",e.isSearching),r(2),m("icon",e.faCircleNotch),r(3),u("active",e.searchFailed),r(5),u("active",e.searchNoResults),r(2),m("jhiTranslate",e.searchNoResultsTranslation),r(4),u("active",e.searchQueryTooShort),r(2),m("jhiTranslate",e.minQueryLengthHintTranslation)("translateValues",_(19,ye,e.MIN_SEARCH_QUERY_LENGTH)),r(),b(`
                            Please enter at least `,e.MIN_SEARCH_QUERY_LENGTH,` characters
                        `)}}function Ce(n,p){if(n&1&&(t(0,`
        `),s(1,"div",1),t(2,`
            `),C(3,Te,13,6)(4,xe,30,21),l(),t(5,`
    `)),n&2){let e=d();r(3),g(e.showPageSizeDropdown?3:-1),r(),g(e.searchEnabled?4:-1)}}function be(n,p){n&1&&M(0)}function _e(n,p){if(n&1&&(t(0,`
        `),s(1,"div",13),t(2,`
            `),C(3,be,1,0,"ng-container",14),t(4,`
            `),s(5,"div",15),t(6,`
                `),f(7,"fa-icon",9),t(8,`
            `),l(),t(9,`
        `),l(),t(10,`
    `)),n&2){let e=d();r(3),m("ngTemplateOutlet",e.templateRef)("ngTemplateOutletContext",e.context),r(2),u("active",e.isTransitioning),r(2),m("icon",e.faCircleNotch)}}function Ee(n,p){if(n&1&&(t(0,`
        `),s(1,"div",16),t(2,`
            `),f(3,"fa-icon",9),t(4,`
        `),l(),t(5,`
    `)),n&2){let e=d();r(3),m("icon",e.faCircleNotch)}}var h=function(n){return n.ASC="asc",n.DESC="desc",n}(h||{}),H={NONE:oe,ASC:se,DESC:ae},ve={[h.ASC]:H.ASC,[h.DESC]:H.DESC},$e=(()=>{class n{sortService=P(me);localStorage=P(ne);templateRef;ngbTypeahead;isLoading=!1;isSearching=!1;searchFailed=!1;searchNoResults=!1;isTransitioning=!1;showPageSizeDropdown=!0;showSearchField=!0;entityType="entity";allEntities=[];entitiesPerPageTranslation;showAllEntitiesTranslation;searchNoResultsTranslation="artemisApp.dataTable.search.noResults";searchPlaceholderTranslation;minQueryLengthHintTranslation="artemisApp.dataTable.search.minQueryLengthHint";searchFields=[];searchEnabled=!0;searchEntityFilterEnabled=!0;searchTextFromEntity=ue;searchResultFormatter=ue;onSearchWrapper=Fe;onAutocompleteSelectWrapper=we;customFilter=()=>!0;customFilterKey={};entitiesSizeChange=new j;PAGING_VALUES=[10,20,50,100,200,500,1e3,"all"];DEFAULT_PAGING_VALUE=50;isRendering;entities;pagingValue;entityCriteria;searchQueryTooShort;MIN_SEARCH_QUERY_LENGTH=3;faCircleNotch=re;constructor(){this.entities=[],this.entityCriteria={textSearch:[],sortProp:{field:"id",order:h.ASC}}}ngOnInit(){this.pagingValue=this.getCachedEntitiesPerPage(),this.onSort=this.onSort.bind(this),this.iconForSortPropField=this.iconForSortPropField.bind(this)}ngOnChanges(e){(e.allEntities||e.customFilterKey)&&this.updateEntities()}get context(){return{settings:{limit:this.pageLimit,sortType:he.multi,columnMode:de.force,headerHeight:50,footerHeight:50,rowHeight:"auto",rows:this.entities,rowClass:"",scrollbarH:!0},controls:{iconForSortPropField:this.iconForSortPropField,onSort:this.onSort}}}get isPreparing(){return this.isLoading||this.isRendering}get pageLimit(){return Q(this.pagingValue)?this.pagingValue:void 0}perPageTranslation(e){return Q(e)?this.entitiesPerPageTranslation:this.showAllEntitiesTranslation}get perPageCacheKey(){return`${this.entityType}-items-per-page`}getCachedEntitiesPerPage=()=>{let e=this.localStorage.retrieve(this.perPageCacheKey);if(e){let i=parseInt(e,10)||e;if(this.PAGING_VALUES.includes(i))return i}return this.DEFAULT_PAGING_VALUE};setEntitiesPerPage=e=>{this.isRendering=!0,setTimeout(()=>{this.pagingValue=e,this.isRendering=!1},500),this.localStorage.store(this.perPageCacheKey,e.toString())};updateEntities(){let e=a=>!this.searchEntityFilterEnabled||this.filterEntityByTextSearch(this.entityCriteria.textSearch,a,this.searchFields),i=this.allEntities.filter(a=>this.customFilter(a)&&e(a));this.entities=this.sortService.sortByProperty(i,this.entityCriteria.sortProp.field,this.entityCriteria.sortProp.order===h.ASC),setTimeout(()=>this.entitiesSizeChange.emit(this.entities.length))}filterEntityByTextSearch=(e,i,a)=>{if(!e.length)return!0;let o=c=>e.some(this.foundIn(c));return this.entityFieldValues(i,a).some(o)};entityFieldValues=(e,i)=>L(i.map(a=>this.collectEntityFieldValues(e,a))).filter(Boolean);collectEntityFieldValues=(e,i)=>{let a=".",[o,...c]=i.split(a);if(c.length>0){let y=v(e,o);return Array.isArray(y)?L(y.map(F=>this.collectEntityFieldValues(F,c.join(a)))):this.collectEntityFieldValues(y,c.join(a))}return[v(e,o,!1)]};foundIn=e=>i=>{let a=i.toLowerCase().split(" ");return e&&i&&a.every(o=>{let c=o.replace(/[.+\-^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(c).test(e.toLowerCase())})};onSearch=e=>this.onSearchWrapper(e.pipe(B(200),G(),w(()=>{this.searchQueryTooShort=!1}),S(i=>{let a=i.split(",").map(o=>o.trim());return{text:i,searchWords:a.length===1&&!a[0]?[]:a}}),w(({searchWords:i})=>{this.entityCriteria.textSearch=i,this.updateEntities()}),S(({text:i,searchWords:a})=>{let o=a.last();return!o||o.length<this.MIN_SEARCH_QUERY_LENGTH?(this.searchQueryTooShort=!0,{text:i,entities:[]}):{text:i,entities:this.entities.filter(c=>this.entityFieldValues(c,this.searchFields).some(F=>this.foundIn(F)(o)))}})));onSearchInputBlur(){this.searchQueryTooShort=!1}get typeaheadButtons(){return v(this.ngbTypeahead,"nativeElement.nextSibling.children",[])}onAutocompleteSelect=e=>{this.entityCriteria.textSearch[this.entityCriteria.textSearch.length-1]=this.searchTextFromEntity(e),this.onAutocompleteSelectWrapper(e,this.filterAfterAutocompleteSelect)};filterAfterAutocompleteSelect=()=>{this.updateEntities()};searchInputFormatter=()=>this.entityCriteria.textSearch.join(", ");onSort(e){let a=this.entityCriteria.sortProp&&this.entityCriteria.sortProp.field===e?this.invertSort(this.entityCriteria.sortProp.order):h.ASC;this.entityCriteria.sortProp={field:e,order:a},this.updateEntities()}invertSort=e=>e===h.ASC?h.DESC:h.ASC;iconForSortPropField(e){return this.entityCriteria.sortProp.field!==e?H.NONE:ve[this.entityCriteria.sortProp.order]}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=k({type:n,selectors:[["jhi-data-table"]],contentQueries:function(i,a,o){if(i&1&&K(o,A,5,A),i&2){let c;V(c=R())&&(a.templateRef=c.first)}},viewQuery:function(i,a){if(i&1&&$(fe,5),i&2){let o;V(o=R())&&(a.ngbTypeahead=o.first)}},inputs:{isLoading:"isLoading",isSearching:"isSearching",searchFailed:"searchFailed",searchNoResults:"searchNoResults",isTransitioning:"isTransitioning",showPageSizeDropdown:"showPageSizeDropdown",showSearchField:"showSearchField",entityType:"entityType",allEntities:"allEntities",entitiesPerPageTranslation:"entitiesPerPageTranslation",showAllEntitiesTranslation:"showAllEntitiesTranslation",searchNoResultsTranslation:"searchNoResultsTranslation",searchPlaceholderTranslation:"searchPlaceholderTranslation",minQueryLengthHintTranslation:"minQueryLengthHintTranslation",searchFields:"searchFields",searchEnabled:"searchEnabled",searchEntityFilterEnabled:"searchEntityFilterEnabled",searchTextFromEntity:"searchTextFromEntity",searchResultFormatter:"searchResultFormatter",onSearchWrapper:"onSearchWrapper",onAutocompleteSelectWrapper:"onAutocompleteSelectWrapper",customFilter:"customFilter",customFilterKey:"customFilterKey"},outputs:{entitiesSizeChange:"entitiesSizeChange"},features:[U],decls:6,vars:2,consts:[["ngbTypeahead",""],[1,"d-flex","mb-2","gap-1","flex-column","flex-md-row"],["ngbDropdown","",1,"d-inline-block","me-2"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary","w-100"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"search-container"],["id","typeahead-basic","type","text",1,"form-control",3,"selectItem","blur","placeholder","ngbTypeahead","resultFormatter","inputFormatter"],[1,"search-info"],["size","lg","animation","spin",3,"icon"],["jhiTranslate","artemisApp.dataTable.search.failed",1,"badge","bg-danger"],[1,"badge","bg-warning",3,"jhiTranslate"],[1,"badge","bg-info",3,"jhiTranslate","translateValues"],[1,"table-responsive","data-table-container"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"transitioning-container"],[1,"loading-container","d-flex","justify-content-center","align-items-center"]],template:function(i,a){i&1&&(s(0,"div"),t(1,`
    `),C(2,Ce,6,2)(3,_e,11,5)(4,Ee,6,1),l(),t(5,`
`)),i&2&&(r(2),g(a.showPageSizeDropdown||a.showSearchField?2:-1),r(),g(a.entities&&!a.isPreparing?3:4))},dependencies:[te,ee,Z,X,J,ie,ce,pe,q,le],styles:[`@charset "UTF-8";[class^=datatable-icon-]:before,[class*=" datatable-icon-"]:before{display:inline-block;position:relative;transform:scale(1.5,.6);top:-.2rem;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none}.datatable-icon-left:before{content:"\\27e8"}.datatable-icon-right:before{content:"\\27e9"}.datatable-icon-down:before{content:"\\2228"}.datatable-icon-skip:before{content:"\\27eb"}.datatable-icon-prev:before{content:"\\27ea"}.datatable-scroll{width:100%!important}.loading-container{height:40vh}.data-table-container{position:relative}.transitioning-container{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:.05s ease-out opacity}.transitioning-container.active{background-color:var(--data-table-transitioning-container-active-background-color);opacity:1;pointer-events:auto;transition:.15s ease-in opacity}.search-container{position:relative;flex:1}.search-info{position:absolute;top:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;padding:0 .75rem;font-size:18px;pointer-events:none;opacity:0;transition:.1s ease-out opacity}.search-info.active{opacity:1;transition:.2s ease-in opacity}ngb-typeahead-window.dropdown-menu.show{max-height:calc(100vh - 380px);overflow-y:auto!important;will-change:unset!important}.dropdown-item.selected{background-color:var(--data-table-dropdown-item-selected-background-color)}.datatable-body-cell-label{display:flex;align-items:center;height:100%}
`],encapsulation:2})}return n})(),ue=n=>n.id.toString(),Fe=n=>n.pipe(S(({entities:p})=>p)),we=(n,p)=>{p(n)};export{$e as a};
//# sourceMappingURL=chunk-G4HSJ7ME.js.map

{
  "version": 3,
  "sources": ["src/main/webapp/app/shared/image-cropper/interfaces/cropper.settings.ts", "src/main/webapp/app/shared/image-cropper/interfaces/move-start.interface.ts", "src/main/webapp/app/shared/image-cropper/utils/resize.utils.ts", "src/main/webapp/app/shared/image-cropper/services/crop.service.ts", "src/main/webapp/app/shared/image-cropper/services/cropper-position.service.ts", "src/main/webapp/app/shared/image-cropper/utils/exif.utils.ts", "src/main/webapp/app/shared/image-cropper/services/load-image.service.ts", "src/main/webapp/app/shared/image-cropper/utils/keyboard.utils.ts", "src/main/webapp/app/shared/image-cropper/component/image-cropper.component.ts", "src/main/webapp/app/shared/image-cropper/component/image-cropper.component.html", "src/main/webapp/app/course/manage/image-cropper-modal.component.ts", "src/main/webapp/app/course/manage/image-cropper-modal.component.html"],
  "sourcesContent": ["import { CropperOptions, OutputFormat } from './cropper-options.interface';\r\nimport { ImageTransform } from './image-transform.interface';\r\nimport { SimpleChanges } from '@angular/core';\r\n\r\nexport class CropperSettings implements CropperOptions {\r\n    // From options\r\n    format: OutputFormat = 'png';\r\n    maintainAspectRatio = true;\r\n    transform: ImageTransform = {};\r\n    aspectRatio = 1;\r\n    resizeToWidth = 0;\r\n    resizeToHeight = 0;\r\n    cropperMinWidth = 0;\r\n    cropperMinHeight = 0;\r\n    cropperMaxHeight = 0;\r\n    cropperMaxWidth = 0;\r\n    cropperStaticWidth = 0;\r\n    cropperStaticHeight = 0;\r\n    canvasRotation = 0;\r\n    initialStepSize = 3;\r\n    roundCropper = false;\r\n    onlyScaleDown = false;\r\n    imageQuality = 92;\r\n    autoCrop = true;\r\n    backgroundColor?: string = undefined;\r\n    containWithinAspectRatio = false;\r\n    hideResizeSquares = false;\r\n    alignImage: 'left' | 'center' = 'center';\r\n\r\n    // Internal\r\n    cropperScaledMinWidth = 20;\r\n    cropperScaledMinHeight = 20;\r\n    cropperScaledMaxWidth = 20;\r\n    cropperScaledMaxHeight = 20;\r\n    stepSize = this.initialStepSize;\r\n\r\n    /**\r\n     * Updates the properties of the target object with the values from the source object.\r\n     * This method only updates the properties that exist in both the source and target objects.\r\n     *\r\n     * @template T - A type extending CropperOptions, representing the shape of the objects being updated.\r\n     * @param {Partial<T>} source - The source object containing the new property values. Only properties that are defined will be considered.\r\n     * @param {T} target - The target object that will be updated with values from the source. It should be a complete object of type T.\r\n     *\r\n     * @remarks\r\n     * This method is used to update an instance of an object with new values from a partial object,\r\n     * such as updating configuration settings or applying changes. It ensures that only properties\r\n     * common to both the source and target are updated, preserving other properties of the target.\r\n     * After applying the new options, it validates the updated configuration to ensure\r\n     * all constraints and rules are maintained.\r\n     *\r\n     * @example\r\n     * const sourceOptions = { resizeToWidth: 200, imageQuality: 90 };\r\n     * const cropperSettings = new CropperSettings();\r\n     * updateProperties(sourceOptions, cropperSettings);\r\n     * // cropperSettings.resizeToWidth is now 200\r\n     * // cropperSettings.imageQuality is now 90\r\n     */\r\n    private updateProperties<T extends CropperOptions>(source: Partial<T>, target: Partial<T>) {\r\n        Object.assign(target, source);\r\n        this.validateOptions();\r\n    }\r\n\r\n    /**\r\n     * Sets the cropper settings options by updating the current instance with new values.\r\n     * This method applies new configuration settings from a partial `CropperOptions` object\r\n     * to the existing instance, preserving any unspecified properties.\r\n     *\r\n     * @param {Partial<CropperOptions>} options - An object containing the new option values to be applied.\r\n     * Only properties specified in this object will be updated.\r\n     *\r\n     * @returns {void} This method does not return a value.\r\n     *\r\n     * @remarks\r\n     * This method is intended to be used for updating the cropper settings dynamically.\r\n     *\r\n     * @example\r\n     * const newOptions = { format: 'jpeg', aspectRatio: 16/9 };\r\n     * cropperSettings.setOptions(newOptions);\r\n     * // cropperSettings.format is now 'jpeg'\r\n     * // cropperSettings.aspectRatio is now 16/9\r\n     * // Other settings remain unchanged.\r\n     */\r\n    setOptions(options: Partial<CropperOptions>): void {\r\n        this.updateProperties(options, this);\r\n    }\r\n\r\n    /**\r\n     * Updates the cropper settings using changes detected in Angular's `SimpleChanges`.\r\n     * This method extracts the current values from the `SimpleChanges` object and applies\r\n     * them to the current instance of cropper settings.\r\n     *\r\n     * @param {SimpleChanges} changes - An object containing the changes detected by Angular,\r\n     * typically from an `ngOnChanges` lifecycle hook. Each change includes the previous and current values.\r\n     *\r\n     * @returns {void} This method does not return a value.\r\n     *\r\n     * @remarks\r\n     * This method is particularly useful when using Angular's two-way data binding and input properties.\r\n     * It efficiently updates the cropper settings based on changes to input properties, ensuring\r\n     * that the cropper configuration remains consistent with the external state.\r\n     *\r\n     * @example\r\n     * ngOnChanges(changes: SimpleChanges) {\r\n     *   this.cropperSettings.setOptionsFromChanges(changes);\r\n     * }\r\n     * // Any changes to input properties bound to cropper settings will be applied automatically.\r\n     */\r\n    setOptionsFromChanges(changes: SimpleChanges): void {\r\n        const entries = Object.entries(changes).map(([key, change]) => [key, change.currentValue]);\r\n        const changedValues = Object.fromEntries(entries) as Partial<CropperOptions>;\r\n        this.updateProperties(changedValues, this);\r\n    }\r\n\r\n    private validateOptions(): void {\r\n        if (this.maintainAspectRatio && !this.aspectRatio) {\r\n            throw new Error('`aspectRatio` should > 0 when `maintainAspectRatio` is enabled');\r\n        }\r\n    }\r\n}\r\n", "export interface MoveStart {\r\n    active: boolean;\r\n    type?: MoveTypes;\r\n    position?: string;\r\n    x1: number;\r\n    y1: number;\r\n    x2: number;\r\n    y2: number;\r\n    clientX: number;\r\n    clientY: number;\r\n}\r\n\r\nexport enum MoveTypes {\r\n    Move = 'move',\r\n    Resize = 'resize',\r\n    Pinch = 'pinch',\r\n}\r\n", "/*\r\n * Hermite resize - fast image resize/resample using Hermite filter.\r\n * https://github.com/viliusle/Hermite-resize\r\n */\r\nexport function resizeCanvas(canvas: HTMLCanvasElement, width: number, height: number) {\r\n    const widthSource = canvas.width;\r\n    const heightSource = canvas.height;\r\n    width = Math.round(width);\r\n    height = Math.round(height);\r\n\r\n    const ratioWidth = widthSource / width;\r\n    const ratioHeight = heightSource / height;\r\n    const ratioWidthHalf = Math.ceil(ratioWidth / 2);\r\n    const ratioHeightHalf = Math.ceil(ratioHeight / 2);\r\n\r\n    const context = canvas.getContext('2d');\r\n    if (context) {\r\n        const image = context.getImageData(0, 0, widthSource, heightSource);\r\n        const newImage = context.createImageData(width, height);\r\n        const data = image.data;\r\n        const newData = newImage.data;\r\n\r\n        for (let j = 0; j < height; j++) {\r\n            for (let i = 0; i < width; i++) {\r\n                const x2 = (i + j * width) * 4;\r\n                const center_y = j * ratioHeight;\r\n                let weight = 0;\r\n                let weights = 0;\r\n                let weights_alpha = 0;\r\n                let gx_r = 0;\r\n                let gx_g = 0;\r\n                let gx_b = 0;\r\n                let gx_a = 0;\r\n\r\n                const xx_start = Math.floor(i * ratioWidth);\r\n                const yy_start = Math.floor(j * ratioHeight);\r\n                let xx_stop = Math.ceil((i + 1) * ratioWidth);\r\n                let yy_stop = Math.ceil((j + 1) * ratioHeight);\r\n                xx_stop = Math.min(xx_stop, widthSource);\r\n                yy_stop = Math.min(yy_stop, heightSource);\r\n\r\n                for (let yy = yy_start; yy < yy_stop; yy++) {\r\n                    const dy = Math.abs(center_y - yy) / ratioHeightHalf;\r\n                    const center_x = i * ratioWidth;\r\n                    const w0 = dy * dy; // pre-calc part of w\r\n                    for (let xx = xx_start; xx < xx_stop; xx++) {\r\n                        const dx = Math.abs(center_x - xx) / ratioWidthHalf;\r\n                        const w = Math.sqrt(w0 + dx * dx);\r\n                        if (w >= 1) {\r\n                            // pixel too far\r\n                            continue;\r\n                        }\r\n                        // hermite filter\r\n                        weight = 2 * w * w * w - 3 * w * w + 1;\r\n                        const pos_x = 4 * (xx + yy * widthSource);\r\n                        // alpha\r\n                        gx_a += weight * data[pos_x + 3];\r\n                        weights_alpha += weight;\r\n                        // colors\r\n                        if (data[pos_x + 3] < 255) {\r\n                            weight = (weight * data[pos_x + 3]) / 250;\r\n                        }\r\n                        gx_r += weight * data[pos_x];\r\n                        gx_g += weight * data[pos_x + 1];\r\n                        gx_b += weight * data[pos_x + 2];\r\n                        weights += weight;\r\n                    }\r\n                }\r\n                newData[x2] = gx_r / weights;\r\n                newData[x2 + 1] = gx_g / weights;\r\n                newData[x2 + 2] = gx_b / weights;\r\n                newData[x2 + 3] = gx_a / weights_alpha;\r\n            }\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        // draw\r\n        context.putImageData(newImage, 0, 0);\r\n    }\r\n}\r\n", "import { ElementRef, Injectable } from '@angular/core';\r\nimport { CropperSettings } from '../interfaces/cropper.settings';\r\nimport { resizeCanvas } from '../utils/resize.utils';\r\nimport { LoadedImage } from 'app/shared/image-cropper/interfaces/loaded-image.interface';\r\nimport { CropperPosition } from 'app/shared/image-cropper/interfaces/cropper-position.interface';\r\nimport { ImageCroppedEvent } from 'app/shared/image-cropper/interfaces/image-cropped-event.interface';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CropService {\r\n    crop(sourceImage: ElementRef, loadedImage: LoadedImage, cropper: CropperPosition, settings: CropperSettings): ImageCroppedEvent | undefined {\r\n        const imagePosition = CropService.getImagePosition(sourceImage, loadedImage, cropper, settings);\r\n        const width = imagePosition.x2 - imagePosition.x1;\r\n        const height = imagePosition.y2 - imagePosition.y1;\r\n        const cropCanvas = document.createElement('canvas') as HTMLCanvasElement;\r\n        cropCanvas.width = width;\r\n        cropCanvas.height = height;\r\n\r\n        const ctx = cropCanvas.getContext('2d');\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        if (settings.backgroundColor != undefined) {\r\n            ctx.fillStyle = settings.backgroundColor;\r\n            ctx.fillRect(0, 0, width, height);\r\n        }\r\n\r\n        const scaleX = (settings.transform.scale || 1) * (settings.transform.flipH ? -1 : 1);\r\n        const scaleY = (settings.transform.scale || 1) * (settings.transform.flipV ? -1 : 1);\r\n\r\n        const transformedImage = loadedImage.transformed!;\r\n        ctx.setTransform(scaleX, 0, 0, scaleY, transformedImage.size.width / 2, transformedImage.size.height / 2);\r\n        ctx.translate(-imagePosition.x1 / scaleX, -imagePosition.y1 / scaleY);\r\n        ctx.rotate(((settings.transform.rotate || 0) * Math.PI) / 180);\r\n        ctx.drawImage(transformedImage.image, -transformedImage.size.width / 2, -transformedImage.size.height / 2);\r\n\r\n        const output: ImageCroppedEvent = {\r\n            width,\r\n            height,\r\n            imagePosition,\r\n            cropperPosition: { ...cropper },\r\n        };\r\n        if (settings.containWithinAspectRatio) {\r\n            output.offsetImagePosition = CropService.getOffsetImagePosition(sourceImage, loadedImage, cropper, settings);\r\n        }\r\n        const resizeRatio = this.getResizeRatio(width, height, settings);\r\n        if (resizeRatio !== 1) {\r\n            output.width = Math.round(width * resizeRatio);\r\n            output.height = settings.maintainAspectRatio ? Math.round(output.width / settings.aspectRatio) : Math.round(height * resizeRatio);\r\n            resizeCanvas(cropCanvas, output.width, output.height);\r\n        }\r\n        output.base64 = cropCanvas.toDataURL('image/' + settings.format, this.getQuality(settings));\r\n        return output;\r\n    }\r\n\r\n    private static getImagePosition(sourceImage: ElementRef, loadedImage: LoadedImage, cropper: CropperPosition, settings: CropperSettings): CropperPosition {\r\n        const sourceImageElement = sourceImage.nativeElement;\r\n        const ratio = loadedImage.transformed!.size.width / sourceImageElement.offsetWidth;\r\n\r\n        const out: CropperPosition = {\r\n            x1: Math.round(cropper.x1 * ratio),\r\n            y1: Math.round(cropper.y1 * ratio),\r\n            x2: Math.round(cropper.x2 * ratio),\r\n            y2: Math.round(cropper.y2 * ratio),\r\n        };\r\n\r\n        if (!settings.containWithinAspectRatio) {\r\n            out.x1 = Math.max(out.x1, 0);\r\n            out.y1 = Math.max(out.y1, 0);\r\n            out.x2 = Math.min(out.x2, loadedImage.transformed!.size.width);\r\n            out.y2 = Math.min(out.y2, loadedImage.transformed!.size.height);\r\n        }\r\n\r\n        return out;\r\n    }\r\n\r\n    private static getOffsetImagePosition(sourceImage: ElementRef, loadedImage: LoadedImage, cropper: CropperPosition, settings: CropperSettings): CropperPosition {\r\n        const canvasRotation = settings.canvasRotation + loadedImage.exifTransform.rotate;\r\n        const sourceImageElement = sourceImage.nativeElement;\r\n        const ratio = loadedImage.transformed!.size.width / sourceImageElement.offsetWidth;\r\n        let offsetX: number;\r\n        let offsetY: number;\r\n\r\n        if (canvasRotation % 2) {\r\n            offsetX = (loadedImage.transformed!.size.width - loadedImage.original.size.height) / 2;\r\n            offsetY = (loadedImage.transformed!.size.height - loadedImage.original.size.width) / 2;\r\n        } else {\r\n            offsetX = (loadedImage.transformed!.size.width - loadedImage.original.size.width) / 2;\r\n            offsetY = (loadedImage.transformed!.size.height - loadedImage.original.size.height) / 2;\r\n        }\r\n\r\n        const out: CropperPosition = {\r\n            x1: Math.round(cropper.x1 * ratio) - offsetX,\r\n            y1: Math.round(cropper.y1 * ratio) - offsetY,\r\n            x2: Math.round(cropper.x2 * ratio) - offsetX,\r\n            y2: Math.round(cropper.y2 * ratio) - offsetY,\r\n        };\r\n\r\n        if (!settings.containWithinAspectRatio) {\r\n            out.x1 = Math.max(out.x1, 0);\r\n            out.y1 = Math.max(out.y1, 0);\r\n            out.x2 = Math.min(out.x2, loadedImage.transformed!.size.width);\r\n            out.y2 = Math.min(out.y2, loadedImage.transformed!.size.height);\r\n        }\r\n\r\n        return out;\r\n    }\r\n\r\n    getResizeRatio(width: number, height: number, settings: CropperSettings): number {\r\n        const ratioWidth = settings.resizeToWidth / width;\r\n        const ratioHeight = settings.resizeToHeight / height;\r\n        const ratios = new Array<number>();\r\n\r\n        if (settings.resizeToWidth > 0) {\r\n            ratios.push(ratioWidth);\r\n        }\r\n        if (settings.resizeToHeight > 0) {\r\n            ratios.push(ratioHeight);\r\n        }\r\n\r\n        const result = ratios.length === 0 ? 1 : Math.min(...ratios);\r\n\r\n        if (result > 1 && !settings.onlyScaleDown) {\r\n            return result;\r\n        }\r\n        return Math.min(result, 1);\r\n    }\r\n\r\n    getQuality(settings: CropperSettings): number {\r\n        return Math.min(1, Math.max(0, settings.imageQuality / 100));\r\n    }\r\n}\r\n", "import { ElementRef, Injectable } from '@angular/core';\r\nimport { CropperSettings } from '../interfaces/cropper.settings';\r\nimport { CropperPosition } from 'app/shared/image-cropper/interfaces/cropper-position.interface';\r\nimport { MoveStart } from 'app/shared/image-cropper/interfaces/move-start.interface';\r\nimport { Dimensions } from 'app/shared/image-cropper/interfaces/dimensions.interface';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CropperPositionService {\r\n    resetCropperPosition(sourceImage: ElementRef, cropperPosition: CropperPosition, settings: CropperSettings): void {\r\n        if (!sourceImage?.nativeElement) {\r\n            return;\r\n        }\r\n        const sourceImageElement = sourceImage.nativeElement;\r\n        if (settings.cropperStaticHeight && settings.cropperStaticWidth) {\r\n            cropperPosition.x1 = 0;\r\n            cropperPosition.x2 = sourceImageElement.offsetWidth > settings.cropperStaticWidth ? settings.cropperStaticWidth : sourceImageElement.offsetWidth;\r\n            cropperPosition.y1 = 0;\r\n            cropperPosition.y2 = sourceImageElement.offsetHeight > settings.cropperStaticHeight ? settings.cropperStaticHeight : sourceImageElement.offsetHeight;\r\n        } else {\r\n            const cropperWidth = Math.min(settings.cropperScaledMaxWidth, sourceImageElement.offsetWidth);\r\n            const cropperHeight = Math.min(settings.cropperScaledMaxHeight, sourceImageElement.offsetHeight);\r\n            if (!settings.maintainAspectRatio) {\r\n                cropperPosition.x1 = 0;\r\n                cropperPosition.x2 = cropperWidth;\r\n                cropperPosition.y1 = 0;\r\n                cropperPosition.y2 = cropperHeight;\r\n            } else if (sourceImageElement.offsetWidth / settings.aspectRatio < sourceImageElement.offsetHeight) {\r\n                cropperPosition.x1 = 0;\r\n                cropperPosition.x2 = cropperWidth;\r\n                const cropperHeightWithAspectRatio = cropperWidth / settings.aspectRatio;\r\n                cropperPosition.y1 = (sourceImageElement.offsetHeight - cropperHeightWithAspectRatio) / 2;\r\n                cropperPosition.y2 = cropperPosition.y1 + cropperHeightWithAspectRatio;\r\n            } else {\r\n                cropperPosition.y1 = 0;\r\n                cropperPosition.y2 = cropperHeight;\r\n                const cropperWidthWithAspectRatio = cropperHeight * settings.aspectRatio;\r\n                cropperPosition.x1 = (sourceImageElement.offsetWidth - cropperWidthWithAspectRatio) / 2;\r\n                cropperPosition.x2 = cropperPosition.x1 + cropperWidthWithAspectRatio;\r\n            }\r\n        }\r\n    }\r\n\r\n    move(event: Event, moveStart: MoveStart, cropperPosition: CropperPosition) {\r\n        const diffX = this.getClientX(event) - moveStart.clientX;\r\n        const diffY = this.getClientY(event) - moveStart.clientY;\r\n\r\n        cropperPosition.x1 = moveStart.x1 + diffX;\r\n        cropperPosition.y1 = moveStart.y1 + diffY;\r\n        cropperPosition.x2 = moveStart.x2 + diffX;\r\n        cropperPosition.y2 = moveStart.y2 + diffY;\r\n    }\r\n\r\n    resize(event: any, moveStart: MoveStart, cropperPosition: CropperPosition, maxSize: Dimensions, settings: CropperSettings): void {\r\n        const moveX = this.getClientX(event) - moveStart.clientX;\r\n        const moveY = this.getClientY(event) - moveStart.clientY;\r\n        switch (moveStart.position) {\r\n            case 'left':\r\n                cropperPosition.x1 = Math.min(\r\n                    Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x2 - settings.cropperScaledMinWidth,\r\n                );\r\n                break;\r\n            case 'topleft':\r\n                cropperPosition.x1 = Math.min(\r\n                    Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x2 - settings.cropperScaledMinWidth,\r\n                );\r\n                cropperPosition.y1 = Math.min(\r\n                    Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y2 - settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'top':\r\n                cropperPosition.y1 = Math.min(\r\n                    Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y2 - settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'topright':\r\n                cropperPosition.x2 = Math.max(\r\n                    Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x1 + settings.cropperScaledMinWidth,\r\n                );\r\n                cropperPosition.y1 = Math.min(\r\n                    Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y2 - settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'right':\r\n                cropperPosition.x2 = Math.max(\r\n                    Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x1 + settings.cropperScaledMinWidth,\r\n                );\r\n                break;\r\n            case 'bottomright':\r\n                cropperPosition.x2 = Math.max(\r\n                    Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x1 + settings.cropperScaledMinWidth,\r\n                );\r\n                cropperPosition.y2 = Math.max(\r\n                    Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y1 + settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'bottom':\r\n                cropperPosition.y2 = Math.max(\r\n                    Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y1 + settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'bottomleft':\r\n                cropperPosition.x1 = Math.min(\r\n                    Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth),\r\n                    cropperPosition.x2 - settings.cropperScaledMinWidth,\r\n                );\r\n                cropperPosition.y2 = Math.max(\r\n                    Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight),\r\n                    cropperPosition.y1 + settings.cropperScaledMinHeight,\r\n                );\r\n                break;\r\n            case 'center':\r\n                const newWidth = Math.min(Math.max(settings.cropperScaledMinWidth, Math.abs(moveStart.x2 - moveStart.x1) * event.scale), settings.cropperScaledMaxWidth);\r\n                const newHeight = Math.min(Math.max(settings.cropperScaledMinHeight, Math.abs(moveStart.y2 - moveStart.y1) * event.scale), settings.cropperScaledMaxHeight);\r\n                cropperPosition.x1 = moveStart.clientX - newWidth / 2;\r\n                cropperPosition.x2 = moveStart.clientX + newWidth / 2;\r\n                cropperPosition.y1 = moveStart.clientY - newHeight / 2;\r\n                cropperPosition.y2 = moveStart.clientY + newHeight / 2;\r\n                if (cropperPosition.x1 < 0) {\r\n                    cropperPosition.x2 -= cropperPosition.x1;\r\n                    cropperPosition.x1 = 0;\r\n                } else if (cropperPosition.x2 > maxSize.width) {\r\n                    cropperPosition.x1 -= cropperPosition.x2 - maxSize.width;\r\n                    cropperPosition.x2 = maxSize.width;\r\n                }\r\n                if (cropperPosition.y1 < 0) {\r\n                    cropperPosition.y2 -= cropperPosition.y1;\r\n                    cropperPosition.y1 = 0;\r\n                } else if (cropperPosition.y2 > maxSize.height) {\r\n                    cropperPosition.y1 -= cropperPosition.y2 - maxSize.height;\r\n                    cropperPosition.y2 = maxSize.height;\r\n                }\r\n                break;\r\n        }\r\n\r\n        if (settings.maintainAspectRatio) {\r\n            this.checkAspectRatio(moveStart.position!, cropperPosition, maxSize, settings);\r\n        }\r\n    }\r\n\r\n    checkAspectRatio(position: string, cropperPosition: CropperPosition, maxSize: Dimensions, settings: CropperSettings): void {\r\n        let overflowX = 0;\r\n        let overflowY = 0;\r\n\r\n        switch (position) {\r\n            case 'top':\r\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\r\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\r\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x2 -= overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y1 += overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'bottom':\r\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\r\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\r\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x2 -= overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y2 -= overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'topleft':\r\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\r\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\r\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x1 += overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y1 += overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'topright':\r\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\r\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\r\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x2 -= overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y1 += overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'right':\r\n            case 'bottomright':\r\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\r\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\r\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x2 -= overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y2 -= overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'left':\r\n            case 'bottomleft':\r\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\r\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\r\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\r\n                if (overflowX > 0 || overflowY > 0) {\r\n                    cropperPosition.x1 += overflowY * settings.aspectRatio > overflowX ? overflowY * settings.aspectRatio : overflowX;\r\n                    cropperPosition.y2 -= overflowY * settings.aspectRatio > overflowX ? overflowY : overflowX / settings.aspectRatio;\r\n                }\r\n                break;\r\n            case 'center':\r\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\r\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\r\n                const overflowX1 = Math.max(0 - cropperPosition.x1, 0);\r\n                const overflowX2 = Math.max(cropperPosition.x2 - maxSize.width, 0);\r\n                const overflowY1 = Math.max(cropperPosition.y2 - maxSize.height, 0);\r\n                const overflowY2 = Math.max(0 - cropperPosition.y1, 0);\r\n                if (overflowX1 > 0 || overflowX2 > 0 || overflowY1 > 0 || overflowY2 > 0) {\r\n                    cropperPosition.x1 += overflowY1 * settings.aspectRatio > overflowX1 ? overflowY1 * settings.aspectRatio : overflowX1;\r\n                    cropperPosition.x2 -= overflowY2 * settings.aspectRatio > overflowX2 ? overflowY2 * settings.aspectRatio : overflowX2;\r\n                    cropperPosition.y1 += overflowY2 * settings.aspectRatio > overflowX2 ? overflowY2 : overflowX2 / settings.aspectRatio;\r\n                    cropperPosition.y2 -= overflowY1 * settings.aspectRatio > overflowX1 ? overflowY1 : overflowX1 / settings.aspectRatio;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    getClientX(event: any): number {\r\n        return event.touches?.[0].clientX || event.clientX || 0;\r\n    }\r\n\r\n    getClientY(event: any): number {\r\n        return event.touches?.[0].clientY || event.clientY || 0;\r\n    }\r\n}\r\n", "import { ExifTransform } from '../interfaces/exif-transform.interface';\r\n\r\n// Black 2x1 JPEG, with the following meta information set:\r\n// - EXIF Orientation: 6 (Rotated 90° CCW)\r\n// Source: https://github.com/blueimp/JavaScript-Load-Image\r\nconst testAutoOrientationImageURL =\r\n    'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\r\n    'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\r\n    'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\r\n    'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\r\n    'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\r\n    'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\r\n\r\nexport function supportsAutomaticRotation(): Promise<boolean> {\r\n    return new Promise((resolve) => {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n            // Check if browser supports automatic image orientation:\r\n            const supported = img.width === 1 && img.height === 2;\r\n            resolve(supported);\r\n        };\r\n        img.src = testAutoOrientationImageURL;\r\n    });\r\n}\r\n\r\nexport function getTransformationsFromExifData(exifRotationOrBase64Image: number | string): ExifTransform {\r\n    if (typeof exifRotationOrBase64Image === 'string') {\r\n        exifRotationOrBase64Image = getExifRotation(exifRotationOrBase64Image);\r\n    }\r\n    switch (exifRotationOrBase64Image) {\r\n        case 2:\r\n            return { rotate: 0, flip: true };\r\n        case 3:\r\n            return { rotate: 2, flip: false };\r\n        case 4:\r\n            return { rotate: 2, flip: true };\r\n        case 5:\r\n            return { rotate: 1, flip: true };\r\n        case 6:\r\n            return { rotate: 1, flip: false };\r\n        case 7:\r\n            return { rotate: 3, flip: true };\r\n        case 8:\r\n            return { rotate: 3, flip: false };\r\n        default:\r\n            return { rotate: 0, flip: false };\r\n    }\r\n}\r\n\r\nfunction getExifRotation(imageBase64: string): number {\r\n    const view = new DataView(base64ToArrayBuffer(imageBase64));\r\n    if (view.getUint16(0, false) !== 0xffd8) {\r\n        return -2;\r\n    }\r\n    const length = view.byteLength;\r\n    let offset = 2;\r\n    while (offset < length) {\r\n        if (view.getUint16(offset + 2, false) <= 8) {\r\n            return -1;\r\n        }\r\n        const marker = view.getUint16(offset, false);\r\n        offset += 2;\r\n        if (marker === 0xffe1) {\r\n            if (view.getUint32((offset += 2), false) !== 0x45786966) {\r\n                return -1;\r\n            }\r\n\r\n            const little = view.getUint16((offset += 6), false) === 0x4949;\r\n            offset += view.getUint32(offset + 4, little);\r\n            const tags = view.getUint16(offset, little);\r\n            offset += 2;\r\n            for (let i = 0; i < tags; i++) {\r\n                if (view.getUint16(offset + i * 12, little) === 0x0112) {\r\n                    return view.getUint16(offset + i * 12 + 8, little);\r\n                }\r\n            }\r\n        } else if ((marker & 0xff00) !== 0xff00) {\r\n            break;\r\n        } else {\r\n            offset += view.getUint16(offset, false);\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n\r\nfunction base64ToArrayBuffer(imageBase64: string) {\r\n    imageBase64 = imageBase64.replace(/^data:([^;]+);base64,/gim, '');\r\n    const binaryString = window.atob(imageBase64);\r\n    const len = binaryString.length;\r\n    const bytes = new Uint8Array(len);\r\n    for (let i = 0; i < len; i++) {\r\n        bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n", "import { Injectable } from '@angular/core';\r\nimport { CropperSettings } from '../interfaces/cropper.settings';\r\nimport { ExifTransform } from '../interfaces/exif-transform.interface';\r\nimport { getTransformationsFromExifData, supportsAutomaticRotation } from '../utils/exif.utils';\r\nimport { LoadedImage } from 'app/shared/image-cropper/interfaces/loaded-image.interface';\r\nimport { Dimensions } from 'app/shared/image-cropper/interfaces/dimensions.interface';\r\n\r\ninterface LoadImageBase64 {\r\n    originalImage: HTMLImageElement;\r\n    originalBase64: string;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LoadImageService {\r\n    private autoRotateSupported: Promise<boolean> = supportsAutomaticRotation();\r\n\r\n    loadImageFile(file: File, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        return new Promise((resolve, reject) => {\r\n            const fileReader = new FileReader();\r\n            fileReader.onload = (event: any) => {\r\n                this.loadImage(event.target.result, file.type, cropperSettings).then(resolve).catch(reject);\r\n            };\r\n            fileReader.readAsDataURL(file);\r\n        });\r\n    }\r\n\r\n    private loadImage(imageBase64: string, imageType: string, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        if (!LoadImageService.isValidImageType(imageType)) {\r\n            return Promise.reject(new Error('Invalid image type: ' + imageType + ' is not supported'));\r\n        }\r\n        return this.loadBase64Image(imageBase64, cropperSettings);\r\n    }\r\n\r\n    private static isValidImageType(type: string): boolean {\r\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(type);\r\n    }\r\n\r\n    loadImageFromURL(url: string, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n            img.onerror = () => reject;\r\n            img.onload = () => {\r\n                const canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d')!;\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n                context.drawImage(img, 0, 0);\r\n                this.loadBase64Image(canvas.toDataURL(), cropperSettings).then(resolve);\r\n            };\r\n            img.crossOrigin = 'anonymous';\r\n            img.src = url;\r\n        });\r\n    }\r\n\r\n    loadBase64Image(imageBase64: string, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        return new Promise<LoadImageBase64>((resolve, reject) => {\r\n            const originalImage = new Image();\r\n            originalImage.onload = () =>\r\n                resolve({\r\n                    originalImage,\r\n                    originalBase64: imageBase64,\r\n                });\r\n            originalImage.onerror = reject;\r\n            originalImage.src = imageBase64;\r\n        }).then((res: LoadImageBase64) => this.transformImageBase64(res, cropperSettings));\r\n    }\r\n\r\n    private async transformImageBase64(res: LoadImageBase64, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        const autoRotate = await this.autoRotateSupported;\r\n        const exifTransform = await getTransformationsFromExifData(autoRotate ? -1 : res.originalBase64);\r\n        if (!res.originalImage || !res.originalImage.complete) {\r\n            return Promise.reject(new Error('No image loaded'));\r\n        }\r\n        const loadedImage = {\r\n            original: {\r\n                base64: res.originalBase64,\r\n                image: res.originalImage,\r\n                size: {\r\n                    width: res.originalImage.naturalWidth,\r\n                    height: res.originalImage.naturalHeight,\r\n                },\r\n            },\r\n            exifTransform,\r\n        };\r\n        return this.transformLoadedImage(loadedImage, cropperSettings);\r\n    }\r\n\r\n    async transformLoadedImage(loadedImage: LoadedImage, cropperSettings: CropperSettings): Promise<LoadedImage> {\r\n        const canvasRotation = cropperSettings.canvasRotation + loadedImage.exifTransform.rotate;\r\n        const originalSize = {\r\n            width: loadedImage.original.image.naturalWidth,\r\n            height: loadedImage.original.image.naturalHeight,\r\n        };\r\n        if (canvasRotation === 0 && !loadedImage.exifTransform.flip && !cropperSettings.containWithinAspectRatio) {\r\n            return {\r\n                original: {\r\n                    base64: loadedImage.original.base64,\r\n                    image: loadedImage.original.image,\r\n                    size: { ...originalSize },\r\n                },\r\n                transformed: {\r\n                    base64: loadedImage.original.base64,\r\n                    image: loadedImage.original.image,\r\n                    size: { ...originalSize },\r\n                },\r\n                exifTransform: loadedImage.exifTransform,\r\n            };\r\n        }\r\n\r\n        const transformedSize = LoadImageService.getTransformedSize(originalSize, loadedImage.exifTransform, cropperSettings);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = transformedSize.width;\r\n        canvas.height = transformedSize.height;\r\n        const context = canvas.getContext('2d')!;\r\n        context.setTransform(loadedImage.exifTransform.flip ? -1 : 1, 0, 0, 1, canvas.width / 2, canvas.height / 2);\r\n        context.rotate(Math.PI * (canvasRotation / 2));\r\n        context.drawImage(loadedImage.original.image, -originalSize.width / 2, -originalSize.height / 2);\r\n        const transformedBase64 = canvas.toDataURL();\r\n        const transformedImage = await this.loadImageFromBase64(transformedBase64);\r\n        return {\r\n            original: {\r\n                base64: loadedImage.original.base64,\r\n                image: loadedImage.original.image,\r\n                size: { ...originalSize },\r\n            },\r\n            transformed: {\r\n                base64: transformedBase64,\r\n                image: transformedImage,\r\n                size: {\r\n                    width: transformedImage.width,\r\n                    height: transformedImage.height,\r\n                },\r\n            },\r\n            exifTransform: loadedImage.exifTransform,\r\n        };\r\n    }\r\n\r\n    private loadImageFromBase64(imageBase64: string): Promise<HTMLImageElement> {\r\n        return new Promise<HTMLImageElement>((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onload = () => resolve(image);\r\n            image.onerror = reject;\r\n            image.src = imageBase64;\r\n        });\r\n    }\r\n\r\n    private static getTransformedSize(originalSize: { width: number; height: number }, exifTransform: ExifTransform, cropperSettings: CropperSettings): Dimensions {\r\n        const canvasRotation = cropperSettings.canvasRotation + exifTransform.rotate;\r\n        if (cropperSettings.containWithinAspectRatio) {\r\n            if (canvasRotation % 2) {\r\n                const minWidthToContain = originalSize.width * cropperSettings.aspectRatio;\r\n                const minHeightToContain = originalSize.height / cropperSettings.aspectRatio;\r\n                return {\r\n                    width: Math.max(originalSize.height, minWidthToContain),\r\n                    height: Math.max(originalSize.width, minHeightToContain),\r\n                };\r\n            } else {\r\n                const minWidthToContain = originalSize.height * cropperSettings.aspectRatio;\r\n                const minHeightToContain = originalSize.width / cropperSettings.aspectRatio;\r\n                return {\r\n                    width: Math.max(originalSize.width, minWidthToContain),\r\n                    height: Math.max(originalSize.height, minHeightToContain),\r\n                };\r\n            }\r\n        }\r\n\r\n        if (canvasRotation % 2) {\r\n            return {\r\n                // rotate height and width\r\n                height: originalSize.width,\r\n                width: originalSize.height,\r\n            };\r\n        }\r\n        return {\r\n            width: originalSize.width,\r\n            height: originalSize.height,\r\n        };\r\n    }\r\n}\r\n", "export function getPositionForKey(key: string): string {\r\n    switch (key) {\r\n        case 'ArrowUp':\r\n            return 'top';\r\n        case 'ArrowRight':\r\n            return 'right';\r\n        case 'ArrowDown':\r\n            return 'bottom';\r\n        case 'ArrowLeft':\r\n        default:\r\n            return 'left';\r\n    }\r\n}\r\n\r\nexport function getInvertedPositionForKey(key: string): string {\r\n    switch (key) {\r\n        case 'ArrowUp':\r\n            return 'bottom';\r\n        case 'ArrowRight':\r\n            return 'left';\r\n        case 'ArrowDown':\r\n            return 'top';\r\n        case 'ArrowLeft':\r\n        default:\r\n            return 'right';\r\n    }\r\n}\r\n\r\nexport function getEventForKey(key: string, stepSize: number): any {\r\n    switch (key) {\r\n        case 'ArrowUp':\r\n            return { clientX: 0, clientY: stepSize * -1 };\r\n        case 'ArrowRight':\r\n            return { clientX: stepSize, clientY: 0 };\r\n        case 'ArrowDown':\r\n            return { clientX: 0, clientY: stepSize };\r\n        case 'ArrowLeft':\r\n        default:\r\n            return { clientX: stepSize * -1, clientY: 0 };\r\n    }\r\n}\r\n", "import {\r\n    ChangeDetectionStrategy,\r\n    ChangeDetectorRef,\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    HostBinding,\r\n    HostListener,\r\n    Input,\r\n    OnChanges,\r\n    OnInit,\r\n    Output,\r\n    SimpleChanges,\r\n    ViewChild,\r\n    inject,\r\n} from '@angular/core';\r\nimport { DomSanitizer, SafeStyle, SafeUrl } from '@angular/platform-browser';\r\nimport { OutputFormat } from '../interfaces/cropper-options.interface';\r\nimport { CropperSettings } from '../interfaces/cropper.settings';\r\nimport { MoveStart, MoveTypes } from '../interfaces/move-start.interface';\r\nimport { CropService } from '../services/crop.service';\r\nimport { CropperPositionService } from '../services/cropper-position.service';\r\nimport { LoadImageService } from '../services/load-image.service';\r\nimport { getEventForKey, getInvertedPositionForKey, getPositionForKey } from '../utils/keyboard.utils';\r\nimport { LoadedImage } from 'app/shared/image-cropper/interfaces/loaded-image.interface';\r\nimport { Dimensions } from 'app/shared/image-cropper/interfaces/dimensions.interface';\r\nimport { ImageTransform } from 'app/shared/image-cropper/interfaces/image-transform.interface';\r\nimport { CropperPosition } from 'app/shared/image-cropper/interfaces/cropper-position.interface';\r\nimport { ImageCroppedEvent } from 'app/shared/image-cropper/interfaces/image-cropped-event.interface';\r\nimport { captureException } from '@sentry/angular';\r\n\r\n// Note: this component and all files in the image-cropper folder were taken from https://github.com/Mawi137/ngx-image-cropper because the framework was not maintained anymore\r\n// Note: Partially adapted to fit Artemis needs\r\n\r\n@Component({\r\n    selector: 'image-cropper',\r\n    templateUrl: './image-cropper.component.html',\r\n    styleUrls: ['./image-cropper.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ImageCropperComponent implements OnChanges, OnInit {\r\n    private cropService = inject(CropService);\r\n    private cropperPositionService = inject(CropperPositionService);\r\n    private loadImageService = inject(LoadImageService);\r\n    private sanitizer = inject(DomSanitizer);\r\n    private changeDetector = inject(ChangeDetectorRef);\r\n\r\n    settings = new CropperSettings();\r\n    setImageMaxSizeRetries = 0;\r\n    moveStart: MoveStart;\r\n    loadedImage?: LoadedImage;\r\n\r\n    safeImgDataUrl: SafeUrl | string;\r\n    safeTransformStyle: SafeStyle | string;\r\n    marginLeft: SafeStyle | string = '0px';\r\n    maxSize: Dimensions;\r\n    moveTypes = MoveTypes;\r\n    imageVisible = false;\r\n\r\n    @ViewChild('wrapper', { static: true }) wrapper: ElementRef<HTMLDivElement>;\r\n    @ViewChild('sourceImage', { static: false }) sourceImage: ElementRef<HTMLDivElement>;\r\n\r\n    @Input() imageChangedEvent?: Event;\r\n    @Input() imageURL?: string;\r\n    @Input() imageBase64?: string;\r\n    @Input() imageFile?: File;\r\n\r\n    @Input() format: OutputFormat = this.settings.format;\r\n    @Input() transform: ImageTransform = {};\r\n    @Input() maintainAspectRatio = this.settings.maintainAspectRatio;\r\n    @Input() aspectRatio = this.settings.aspectRatio;\r\n    @Input() resizeToWidth = this.settings.resizeToWidth;\r\n    @Input() resizeToHeight = this.settings.resizeToHeight;\r\n    @Input() cropperMinWidth = this.settings.cropperMinWidth;\r\n    @Input() cropperMinHeight = this.settings.cropperMinHeight;\r\n    @Input() cropperMaxHeight = this.settings.cropperMaxHeight;\r\n    @Input() cropperMaxWidth = this.settings.cropperMaxWidth;\r\n    @Input() cropperStaticWidth = this.settings.cropperStaticWidth;\r\n    @Input() cropperStaticHeight = this.settings.cropperStaticHeight;\r\n    @Input() canvasRotation = this.settings.canvasRotation;\r\n    @Input() initialStepSize = this.settings.initialStepSize;\r\n    @Input() roundCropper = this.settings.roundCropper;\r\n    @Input() onlyScaleDown = this.settings.onlyScaleDown;\r\n    @Input() imageQuality = this.settings.imageQuality;\r\n    @Input() autoCrop = this.settings.autoCrop;\r\n    @Input() backgroundColor = this.settings.backgroundColor;\r\n    @Input() containWithinAspectRatio = this.settings.containWithinAspectRatio;\r\n    @Input() hideResizeSquares = this.settings.hideResizeSquares;\r\n    @Input() cropper: CropperPosition = {\r\n        x1: -100,\r\n        y1: -100,\r\n        x2: 10000,\r\n        y2: 10000,\r\n    };\r\n    @HostBinding('style.text-align')\r\n    @Input()\r\n    alignImage: 'left' | 'center' = this.settings.alignImage;\r\n    @HostBinding('class.disabled')\r\n    @Input()\r\n    disabled = false;\r\n\r\n    @Output() imageCropped = new EventEmitter<ImageCroppedEvent>();\r\n    @Output() startCropImage = new EventEmitter<void>();\r\n    @Output() imageLoaded = new EventEmitter<LoadedImage>();\r\n    @Output() cropperReady = new EventEmitter<Dimensions>();\r\n    @Output() loadImageFailed = new EventEmitter<void>();\r\n\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.settings.stepSize = this.initialStepSize;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        this.onChangesUpdateSettings(changes);\r\n        this.onChangesInputImage(changes);\r\n\r\n        if (this.loadedImage?.original.image.complete && (changes.containWithinAspectRatio || changes.canvasRotation)) {\r\n            this.loadImageService\r\n                .transformLoadedImage(this.loadedImage, this.settings)\r\n                .then((res) => this.setLoadedImage(res))\r\n                .catch((err: Error) => this.loadImageError(err));\r\n        }\r\n        if (changes.cropper || changes.maintainAspectRatio || changes.aspectRatio) {\r\n            this.setMaxSize();\r\n            this.setCropperScaledMinSize();\r\n            this.setCropperScaledMaxSize();\r\n            if (this.maintainAspectRatio && (changes.maintainAspectRatio || changes.aspectRatio)) {\r\n                this.resetCropperPosition();\r\n            } else if (changes.cropper) {\r\n                this.checkCropperPosition(false);\r\n                this.doAutoCrop();\r\n            }\r\n            this.changeDetector.markForCheck();\r\n        }\r\n        if (changes.transform) {\r\n            this.transform = this.transform || {};\r\n            this.setCssTransform();\r\n            this.doAutoCrop();\r\n        }\r\n    }\r\n\r\n    private onChangesUpdateSettings(changes: SimpleChanges) {\r\n        this.settings.setOptionsFromChanges(changes);\r\n\r\n        if (this.settings.cropperStaticHeight && this.settings.cropperStaticWidth) {\r\n            this.settings.setOptions({\r\n                hideResizeSquares: true,\r\n                cropperMinWidth: this.settings.cropperStaticWidth,\r\n                cropperMinHeight: this.settings.cropperStaticHeight,\r\n                cropperMaxHeight: this.settings.cropperStaticHeight,\r\n                cropperMaxWidth: this.settings.cropperStaticWidth,\r\n                maintainAspectRatio: false,\r\n            });\r\n        }\r\n    }\r\n\r\n    private onChangesInputImage(changes: SimpleChanges): void {\r\n        if (changes.imageChangedEvent || changes.imageURL || changes.imageBase64 || changes.imageFile) {\r\n            this.reset();\r\n        }\r\n        if (changes.imageChangedEvent && this.isValidImageChangedEvent()) {\r\n            const element = this.imageChangedEvent?.currentTarget as HTMLInputElement;\r\n            if (element.files) {\r\n                this.loadImageFile(element.files[0]);\r\n            }\r\n        }\r\n        if (changes.imageURL && this.imageURL) {\r\n            this.loadImageFromURL(this.imageURL);\r\n        }\r\n        if (changes.imageBase64 && this.imageBase64) {\r\n            this.loadBase64Image(this.imageBase64);\r\n        }\r\n        if (changes.imageFile && this.imageFile) {\r\n            this.loadImageFile(this.imageFile);\r\n        }\r\n    }\r\n\r\n    private isValidImageChangedEvent(): boolean {\r\n        if (!this.imageChangedEvent?.currentTarget) {\r\n            return false;\r\n        }\r\n        const element = this.imageChangedEvent.currentTarget as HTMLInputElement;\r\n\r\n        return !!element.files?.length;\r\n    }\r\n\r\n    private setCssTransform() {\r\n        this.safeTransformStyle = this.sanitizer.bypassSecurityTrustStyle(\r\n            'scaleX(' +\r\n                (this.transform.scale || 1) * (this.transform.flipH ? -1 : 1) +\r\n                ')' +\r\n                'scaleY(' +\r\n                (this.transform.scale || 1) * (this.transform.flipV ? -1 : 1) +\r\n                ')' +\r\n                'rotate(' +\r\n                (this.transform.rotate || 0) +\r\n                'deg)',\r\n        );\r\n    }\r\n\r\n    private reset(): void {\r\n        this.imageVisible = false;\r\n        this.loadedImage = undefined;\r\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg' + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU' + 'AAarVyFEAAAAASUVORK5CYII=';\r\n        this.moveStart = {\r\n            active: false,\r\n            type: undefined,\r\n            position: undefined,\r\n            x1: 0,\r\n            y1: 0,\r\n            x2: 0,\r\n            y2: 0,\r\n            clientX: 0,\r\n            clientY: 0,\r\n        };\r\n        this.maxSize = {\r\n            width: 0,\r\n            height: 0,\r\n        };\r\n        this.cropper.x1 = -100;\r\n        this.cropper.y1 = -100;\r\n        this.cropper.x2 = 10000;\r\n        this.cropper.y2 = 10000;\r\n    }\r\n\r\n    private loadImageFile(file: File): void {\r\n        this.loadImageService\r\n            .loadImageFile(file, this.settings)\r\n            .then((res) => this.setLoadedImage(res))\r\n            .catch((err) => this.loadImageError(err));\r\n    }\r\n\r\n    private loadBase64Image(imageBase64: string): void {\r\n        this.loadImageService\r\n            .loadBase64Image(imageBase64, this.settings)\r\n            .then((res) => this.setLoadedImage(res))\r\n            .catch((err) => this.loadImageError(err));\r\n    }\r\n\r\n    private loadImageFromURL(url: string): void {\r\n        this.loadImageService\r\n            .loadImageFromURL(url, this.settings)\r\n            .then((res) => this.setLoadedImage(res))\r\n            .catch((err) => this.loadImageError(err));\r\n    }\r\n\r\n    private setLoadedImage(loadedImage: LoadedImage): void {\r\n        this.loadedImage = loadedImage;\r\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(loadedImage.transformed!.base64);\r\n        this.changeDetector.markForCheck();\r\n    }\r\n\r\n    private loadImageError(error: Error): void {\r\n        this.loadImageFailed.emit();\r\n        captureException(error);\r\n    }\r\n\r\n    imageLoadedInView(): void {\r\n        if (this.loadedImage != undefined) {\r\n            this.imageLoaded.emit(this.loadedImage);\r\n            this.setImageMaxSizeRetries = 0;\r\n            setTimeout(() => this.checkImageMaxSizeRecursively());\r\n        }\r\n    }\r\n\r\n    private checkImageMaxSizeRecursively(): void {\r\n        if (this.setImageMaxSizeRetries > 40) {\r\n            this.loadImageFailed.emit();\r\n        } else if (this.sourceImageLoaded()) {\r\n            this.setMaxSize();\r\n            this.setCropperScaledMinSize();\r\n            this.setCropperScaledMaxSize();\r\n            this.resetCropperPosition();\r\n            this.cropperReady.emit({ ...this.maxSize });\r\n            this.changeDetector.markForCheck();\r\n        } else {\r\n            this.setImageMaxSizeRetries++;\r\n            setTimeout(() => this.checkImageMaxSizeRecursively(), 50);\r\n        }\r\n    }\r\n\r\n    private sourceImageLoaded(): boolean {\r\n        return this.sourceImage?.nativeElement?.offsetWidth > 0;\r\n    }\r\n\r\n    @HostListener('window:resize')\r\n    onResize(): void {\r\n        if (!this.loadedImage) {\r\n            return;\r\n        }\r\n        this.resizeCropperPosition();\r\n        this.setMaxSize();\r\n        this.setCropperScaledMinSize();\r\n        this.setCropperScaledMaxSize();\r\n    }\r\n\r\n    private resizeCropperPosition(): void {\r\n        const sourceImageElement = this.sourceImage.nativeElement;\r\n        if (this.maxSize.width !== sourceImageElement.offsetWidth || this.maxSize.height !== sourceImageElement.offsetHeight) {\r\n            this.cropper.x1 = (this.cropper.x1 * sourceImageElement.offsetWidth) / this.maxSize.width;\r\n            this.cropper.x2 = (this.cropper.x2 * sourceImageElement.offsetWidth) / this.maxSize.width;\r\n            this.cropper.y1 = (this.cropper.y1 * sourceImageElement.offsetHeight) / this.maxSize.height;\r\n            this.cropper.y2 = (this.cropper.y2 * sourceImageElement.offsetHeight) / this.maxSize.height;\r\n        }\r\n    }\r\n\r\n    resetCropperPosition(): void {\r\n        this.cropperPositionService.resetCropperPosition(this.sourceImage, this.cropper, this.settings);\r\n        this.doAutoCrop();\r\n        this.imageVisible = true;\r\n    }\r\n\r\n    keyboardAccess(event: KeyboardEvent) {\r\n        this.changeKeyboardStepSize(event);\r\n        this.keyboardMoveCropper(event);\r\n    }\r\n\r\n    private changeKeyboardStepSize(event: KeyboardEvent): void {\r\n        const key = +event.key;\r\n        if (key >= 1 && key <= 9) {\r\n            this.settings.stepSize = key;\r\n        }\r\n    }\r\n\r\n    private keyboardMoveCropper(event: KeyboardEvent) {\r\n        const keyboardWhiteList: string[] = ['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft'];\r\n        if (!keyboardWhiteList.includes(event.key)) {\r\n            return;\r\n        }\r\n        const moveType = event.shiftKey ? MoveTypes.Resize : MoveTypes.Move;\r\n        const position = event.altKey ? getInvertedPositionForKey(event.key) : getPositionForKey(event.key);\r\n        const moveEvent = getEventForKey(event.key, this.settings.stepSize);\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.startMove({ clientX: 0, clientY: 0 } as MouseEvent, moveType, position);\r\n        this.moveImg(moveEvent);\r\n        this.moveStop();\r\n    }\r\n\r\n    startMove(event: MouseEvent | TouchEvent, moveType: MoveTypes, position?: string): void {\r\n        if (this.moveStart?.active && this.moveStart?.type === MoveTypes.Pinch) {\r\n            return;\r\n        }\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n        }\r\n        this.moveStart = {\r\n            active: true,\r\n            type: moveType,\r\n            position,\r\n            clientX: this.cropperPositionService.getClientX(event),\r\n            clientY: this.cropperPositionService.getClientY(event),\r\n            ...this.cropper,\r\n        };\r\n    }\r\n\r\n    @HostListener('document:mousemove', ['$event'])\r\n    @HostListener('document:touchmove', ['$event'])\r\n    moveImg(event: MouseEvent | TouchEvent): void {\r\n        if (this.moveStart.active) {\r\n            if (event.stopPropagation) {\r\n                event.stopPropagation();\r\n            }\r\n            if (event.preventDefault) {\r\n                event.preventDefault();\r\n            }\r\n            if (this.moveStart.type === MoveTypes.Move) {\r\n                this.cropperPositionService.move(event, this.moveStart, this.cropper);\r\n                this.checkCropperPosition(true);\r\n            } else if (this.moveStart.type === MoveTypes.Resize) {\r\n                if (!this.cropperStaticWidth && !this.cropperStaticHeight) {\r\n                    this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\r\n                }\r\n                this.checkCropperPosition(false);\r\n            }\r\n            this.changeDetector.detectChanges();\r\n        }\r\n    }\r\n\r\n    private setMaxSize(): void {\r\n        if (this.sourceImage) {\r\n            const sourceImageElement = this.sourceImage.nativeElement;\r\n            this.maxSize.width = sourceImageElement.offsetWidth;\r\n            this.maxSize.height = sourceImageElement.offsetHeight;\r\n            this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\r\n        }\r\n    }\r\n\r\n    private setCropperScaledMinSize(): void {\r\n        if (this.loadedImage?.transformed?.image) {\r\n            this.setCropperScaledMinWidth();\r\n            this.setCropperScaledMinHeight();\r\n        } else {\r\n            this.settings.cropperScaledMinWidth = 20;\r\n            this.settings.cropperScaledMinHeight = 20;\r\n        }\r\n    }\r\n\r\n    private setCropperScaledMinWidth(): void {\r\n        this.settings.cropperScaledMinWidth =\r\n            this.cropperMinWidth > 0 ? Math.max(20, (this.cropperMinWidth / this.loadedImage!.transformed!.image.width) * this.maxSize.width) : 20;\r\n    }\r\n\r\n    private setCropperScaledMinHeight(): void {\r\n        if (this.maintainAspectRatio) {\r\n            this.settings.cropperScaledMinHeight = Math.max(20, this.settings.cropperScaledMinWidth / this.aspectRatio);\r\n        } else if (this.cropperMinHeight > 0) {\r\n            this.settings.cropperScaledMinHeight = Math.max(20, (this.cropperMinHeight / this.loadedImage!.transformed!.image.height) * this.maxSize.height);\r\n        } else {\r\n            this.settings.cropperScaledMinHeight = 20;\r\n        }\r\n    }\r\n\r\n    private setCropperScaledMaxSize(): void {\r\n        if (this.loadedImage?.transformed?.image) {\r\n            const ratio = this.loadedImage.transformed.size.width / this.maxSize.width;\r\n            this.settings.cropperScaledMaxWidth = this.cropperMaxWidth > 20 ? this.cropperMaxWidth / ratio : this.maxSize.width;\r\n            this.settings.cropperScaledMaxHeight = this.cropperMaxHeight > 20 ? this.cropperMaxHeight / ratio : this.maxSize.height;\r\n            if (this.maintainAspectRatio) {\r\n                if (this.settings.cropperScaledMaxWidth > this.settings.cropperScaledMaxHeight * this.aspectRatio) {\r\n                    this.settings.cropperScaledMaxWidth = this.settings.cropperScaledMaxHeight * this.aspectRatio;\r\n                } else if (this.settings.cropperScaledMaxWidth < this.settings.cropperScaledMaxHeight * this.aspectRatio) {\r\n                    this.settings.cropperScaledMaxHeight = this.settings.cropperScaledMaxWidth / this.aspectRatio;\r\n                }\r\n            }\r\n        } else {\r\n            this.settings.cropperScaledMaxWidth = this.maxSize.width;\r\n            this.settings.cropperScaledMaxHeight = this.maxSize.height;\r\n        }\r\n    }\r\n\r\n    private checkCropperPosition(maintainSize = false): void {\r\n        if (this.cropper.x1 < 0) {\r\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\r\n            this.cropper.x1 = 0;\r\n        }\r\n        if (this.cropper.y1 < 0) {\r\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\r\n            this.cropper.y1 = 0;\r\n        }\r\n        if (this.cropper.x2 > this.maxSize.width) {\r\n            this.cropper.x1 -= maintainSize ? this.cropper.x2 - this.maxSize.width : 0;\r\n            this.cropper.x2 = this.maxSize.width;\r\n        }\r\n        if (this.cropper.y2 > this.maxSize.height) {\r\n            this.cropper.y1 -= maintainSize ? this.cropper.y2 - this.maxSize.height : 0;\r\n            this.cropper.y2 = this.maxSize.height;\r\n        }\r\n    }\r\n\r\n    @HostListener('document:mouseup')\r\n    @HostListener('document:touchend')\r\n    moveStop(): void {\r\n        if (this.moveStart.active) {\r\n            this.moveStart.active = false;\r\n            this.doAutoCrop();\r\n        }\r\n    }\r\n\r\n    private doAutoCrop(): void {\r\n        if (this.autoCrop) {\r\n            this.crop();\r\n        }\r\n    }\r\n\r\n    crop(): ImageCroppedEvent | undefined {\r\n        if (this.loadedImage?.transformed?.image != undefined) {\r\n            this.startCropImage.emit();\r\n            const output = this.cropService.crop(this.sourceImage, this.loadedImage, this.cropper, this.settings);\r\n            if (output != undefined) {\r\n                this.imageCropped.emit(output);\r\n            }\r\n            return output;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n", "<div [style.background]=\"imageVisible && backgroundColor\" #wrapper>\r\n    @if (safeImgDataUrl) {\r\n        <img\r\n            #sourceImage\r\n            class=\"ngx-ic-source-image\"\r\n            [src]=\"safeImgDataUrl\"\r\n            [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\r\n            [style.transform]=\"safeTransformStyle\"\r\n            (load)=\"imageLoadedInView()\"\r\n        />\r\n    }\r\n    <div class=\"ngx-ic-overlay\" [style.width.px]=\"maxSize.width\" [style.height.px]=\"maxSize.height\" [style.margin-left]=\"alignImage === 'center' ? marginLeft : null\"></div>\r\n    @if (imageVisible) {\r\n        <div\r\n            class=\"ngx-ic-cropper\"\r\n            [class.ngx-ic-round]=\"roundCropper\"\r\n            [style.top.px]=\"cropper.y1\"\r\n            [style.left.px]=\"cropper.x1\"\r\n            [style.width.px]=\"cropper.x2 - cropper.x1\"\r\n            [style.height.px]=\"cropper.y2 - cropper.y1\"\r\n            [style.margin-left]=\"alignImage === 'center' ? marginLeft : null\"\r\n            [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\r\n            (keydown)=\"keyboardAccess($event)\"\r\n            tabindex=\"0\"\r\n        >\r\n            <div (mousedown)=\"startMove($event, moveTypes.Move)\" (touchstart)=\"startMove($event, moveTypes.Move)\" class=\"ngx-ic-move\"></div>\r\n            @if (!hideResizeSquares) {\r\n                <span\r\n                    class=\"ngx-ic-resize ngx-ic-topleft\"\r\n                    (mousedown)=\"startMove($event, moveTypes.Resize, 'topleft')\"\r\n                    (touchstart)=\"startMove($event, moveTypes.Resize, 'topleft')\"\r\n                >\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span class=\"ngx-ic-resize ngx-ic-top\">\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span\r\n                    class=\"ngx-ic-resize ngx-ic-topright\"\r\n                    (mousedown)=\"startMove($event, moveTypes.Resize, 'topright')\"\r\n                    (touchstart)=\"startMove($event, moveTypes.Resize, 'topright')\"\r\n                >\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span class=\"ngx-ic-resize ngx-ic-right\">\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span\r\n                    class=\"ngx-ic-resize ngx-ic-bottomright\"\r\n                    (mousedown)=\"startMove($event, moveTypes.Resize, 'bottomright')\"\r\n                    (touchstart)=\"startMove($event, moveTypes.Resize, 'bottomright')\"\r\n                >\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span class=\"ngx-ic-resize ngx-ic-bottom\">\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span\r\n                    class=\"ngx-ic-resize ngx-ic-bottomleft\"\r\n                    (mousedown)=\"startMove($event, moveTypes.Resize, 'bottomleft')\"\r\n                    (touchstart)=\"startMove($event, moveTypes.Resize, 'bottomleft')\"\r\n                >\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span class=\"ngx-ic-resize ngx-ic-left\">\r\n                    <span class=\"ngx-ic-square\"></span>\r\n                </span>\r\n                <span class=\"ngx-ic-resize-bar ngx-ic-top\" (mousedown)=\"startMove($event, moveTypes.Resize, 'top')\" (touchstart)=\"startMove($event, moveTypes.Resize, 'top')\">\r\n                </span>\r\n                <span class=\"ngx-ic-resize-bar ngx-ic-right\" (mousedown)=\"startMove($event, moveTypes.Resize, 'right')\" (touchstart)=\"startMove($event, moveTypes.Resize, 'right')\">\r\n                </span>\r\n                <span\r\n                    class=\"ngx-ic-resize-bar ngx-ic-bottom\"\r\n                    (mousedown)=\"startMove($event, moveTypes.Resize, 'bottom')\"\r\n                    (touchstart)=\"startMove($event, moveTypes.Resize, 'bottom')\"\r\n                >\r\n                </span>\r\n                <span class=\"ngx-ic-resize-bar ngx-ic-left\" (mousedown)=\"startMove($event, moveTypes.Resize, 'left')\" (touchstart)=\"startMove($event, moveTypes.Resize, 'left')\">\r\n                </span>\r\n            }\r\n        </div>\r\n    }\r\n</div>\r\n", "import { Component, inject } from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ImageCroppedEvent } from 'app/shared/image-cropper/interfaces/image-cropped-event.interface';\r\nimport { OutputFormat } from 'app/shared/image-cropper/interfaces/cropper-options.interface';\r\nimport { TranslateDirective } from 'app/shared/language/translate.directive';\r\nimport { ImageCropperComponent } from 'app/shared/image-cropper/component/image-cropper.component';\r\n\r\n@Component({\r\n    selector: 'jhi-image-cropper-modal',\r\n    templateUrl: './image-cropper-modal.component.html',\r\n    imports: [TranslateDirective, ImageCropperComponent],\r\n})\r\nexport class ImageCropperModalComponent {\r\n    private activeModal = inject(NgbActiveModal);\r\n\r\n    uploadFile?: File;\r\n    croppedImage?: string;\r\n    roundCropper = true;\r\n    fileFormat: OutputFormat = 'png';\r\n\r\n    /**\r\n     * Called when an image is cropped.\r\n     * @param event The event containing the cropped image data.\r\n     */\r\n    imageCropped(event: ImageCroppedEvent) {\r\n        this.croppedImage = event.base64;\r\n    }\r\n\r\n    /**\r\n     * Method is called when the modal is closed by clicking 'Cancel' button.\r\n     */\r\n    onCancel(): void {\r\n        this.activeModal.close();\r\n    }\r\n\r\n    /**\r\n     * Called when the modal is closed by clicking the 'Save' button.\r\n     * The changes are saved and the croppedImage information is transferred.\r\n     */\r\n    onSave(): void {\r\n        this.activeModal.close(this.croppedImage);\r\n    }\r\n}\r\n", "<div class=\"modal-header justify-between\">\r\n    <h4 class=\"modal-title\">\r\n        <span jhiTranslate=\"artemisApp.course.imageCropper.title\"></span>\r\n    </h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"row\">\r\n        <image-cropper\r\n            [imageFile]=\"uploadFile\"\r\n            [maintainAspectRatio]=\"true\"\r\n            [format]=\"fileFormat\"\r\n            [aspectRatio]=\"1\"\r\n            [resizeToWidth]=\"200\"\r\n            [cropperMinWidth]=\"100\"\r\n            [onlyScaleDown]=\"true\"\r\n            [roundCropper]=\"roundCropper\"\r\n            (imageCropped)=\"imageCropped($event)\"\r\n        />\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button id=\"cancel-cropping-button\" type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"onCancel()\"><span jhiTranslate=\"entity.action.cancel\"></span></button>\r\n    <button id=\"save-cropping-button\" type=\"button\" class=\"btn btn-primary\" (click)=\"onSave()\">\r\n        <span jhiTranslate=\"entity.action.save\"></span>\r\n    </button>\r\n</div>\r\n"],
  "mappings": "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",
  "names": ["CropperSettings", "format", "maintainAspectRatio", "transform", "aspectRatio", "resizeToWidth", "resizeToHeight", "cropperMinWidth", "cropperMinHeight", "cropperMaxHeight", "cropperMaxWidth", "cropperStaticWidth", "cropperStaticHeight", "canvasRotation", "initialStepSize", "roundCropper", "onlyScaleDown", "imageQuality", "autoCrop", "backgroundColor", "undefined", "containWithinAspectRatio", "hideResizeSquares", "alignImage", "cropperScaledMinWidth", "cropperScaledMinHeight", "cropperScaledMaxWidth", "cropperScaledMaxHeight", "stepSize", "updateProperties", "source", "target", "Object", "assign", "validateOptions", "setOptions", "options", "setOptionsFromChanges", "changes", "entries", "map", "key", "change", "currentValue", "changedValues", "fromEntries", "Error", "MoveTypes", "resizeCanvas", "canvas", "width", "height", "widthSource", "heightSource", "Math", "round", "ratioWidth", "ratioHeight", "ratioWidthHalf", "ceil", "ratioHeightHalf", "context", "getContext", "image", "getImageData", "newImage", "createImageData", "data", "newData", "j", "i", "x2", "center_y", "weight", "weights", "weights_alpha", "gx_r", "gx_g", "gx_b", "gx_a", "xx_start", "floor", "yy_start", "xx_stop", "yy_stop", "min", "yy", "dy", "abs", "center_x", "w0", "xx", "dx", "w", "sqrt", "pos_x", "putImageData", "CropService", "crop", "sourceImage", "loadedImage", "cropper", "settings", "imagePosition", "getImagePosition", "width", "x2", "x1", "height", "y2", "y1", "cropCanvas", "document", "createElement", "ctx", "getContext", "backgroundColor", "undefined", "fillStyle", "fillRect", "scaleX", "transform", "scale", "flipH", "scaleY", "flipV", "transformedImage", "transformed", "setTransform", "size", "translate", "rotate", "Math", "PI", "drawImage", "image", "output", "cropperPosition", "__spreadValues", "containWithinAspectRatio", "offsetImagePosition", "getOffsetImagePosition", "resizeRatio", "getResizeRatio", "round", "maintainAspectRatio", "aspectRatio", "resizeCanvas", "base64", "toDataURL", "format", "getQuality", "sourceImageElement", "nativeElement", "ratio", "offsetWidth", "out", "max", "min", "canvasRotation", "exifTransform", "offsetX", "offsetY", "original", "ratioWidth", "resizeToWidth", "ratioHeight", "resizeToHeight", "ratios", "Array", "push", "result", "length", "onlyScaleDown", "imageQuality", "factory", "\u0275fac", "providedIn", "CropperPositionService", "resetCropperPosition", "sourceImage", "cropperPosition", "settings", "nativeElement", "sourceImageElement", "cropperStaticHeight", "cropperStaticWidth", "x1", "x2", "offsetWidth", "y1", "y2", "offsetHeight", "cropperWidth", "Math", "min", "cropperScaledMaxWidth", "cropperHeight", "cropperScaledMaxHeight", "maintainAspectRatio", "aspectRatio", "cropperHeightWithAspectRatio", "cropperWidthWithAspectRatio", "move", "event", "moveStart", "diffX", "getClientX", "clientX", "diffY", "getClientY", "clientY", "resize", "maxSize", "moveX", "moveY", "position", "max", "cropperScaledMinWidth", "cropperScaledMinHeight", "newWidth", "abs", "scale", "newHeight", "width", "height", "checkAspectRatio", "overflowX", "overflowY", "overflowX1", "overflowX2", "overflowY1", "overflowY2", "touches", "factory", "\u0275fac", "providedIn", "testAutoOrientationImageURL", "supportsAutomaticRotation", "Promise", "resolve", "img", "Image", "onload", "supported", "width", "height", "src", "getTransformationsFromExifData", "exifRotationOrBase64Image", "getExifRotation", "rotate", "flip", "imageBase64", "view", "DataView", "base64ToArrayBuffer", "getUint16", "length", "byteLength", "offset", "marker", "getUint32", "little", "tags", "i", "replace", "binaryString", "window", "atob", "len", "bytes", "Uint8Array", "charCodeAt", "buffer", "LoadImageService", "autoRotateSupported", "supportsAutomaticRotation", "loadImageFile", "file", "cropperSettings", "Promise", "resolve", "reject", "fileReader", "FileReader", "onload", "event", "loadImage", "target", "result", "type", "then", "catch", "readAsDataURL", "imageBase64", "imageType", "isValidImageType", "loadBase64Image", "Error", "test", "loadImageFromURL", "url", "img", "Image", "onerror", "canvas", "document", "createElement", "context", "getContext", "width", "height", "drawImage", "toDataURL", "crossOrigin", "src", "originalImage", "originalBase64", "res", "transformImageBase64", "__async", "autoRotate", "exifTransform", "getTransformationsFromExifData", "complete", "loadedImage", "original", "base64", "image", "size", "naturalWidth", "naturalHeight", "transformLoadedImage", "canvasRotation", "rotate", "originalSize", "flip", "containWithinAspectRatio", "__spreadValues", "transformed", "transformedSize", "getTransformedSize", "setTransform", "Math", "PI", "transformedBase64", "transformedImage", "loadImageFromBase64", "minWidthToContain", "aspectRatio", "minHeightToContain", "max", "factory", "\u0275fac", "providedIn", "getPositionForKey", "key", "getInvertedPositionForKey", "getEventForKey", "stepSize", "clientX", "clientY", "\u0275\u0275text", "\u0275\u0275elementStart", "\u0275\u0275listener", "\u0275\u0275restoreView", "_r1", "ctx_r1", "\u0275\u0275nextContext", "\u0275\u0275resetView", "imageLoadedInView", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275styleProp", "imageVisible", "safeTransformStyle", "\u0275\u0275property", "safeImgDataUrl", "\u0275\u0275sanitizeUrl", "$event", "_r4", "startMove", "moveTypes", "Resize", "\u0275\u0275element", "_r3", "keyboardAccess", "Move", "\u0275\u0275template", "ImageCropperComponent_Conditional_6_Conditional_5_Template", "cropper", "y1", "x1", "x2", "y2", "alignImage", "marginLeft", "\u0275\u0275classProp", "roundCropper", "\u0275\u0275conditional", "hideResizeSquares", "ImageCropperComponent", "cropService", "inject", "CropService", "cropperPositionService", "CropperPositionService", "loadImageService", "LoadImageService", "sanitizer", "DomSanitizer", "changeDetector", "ChangeDetectorRef", "settings", "CropperSettings", "setImageMaxSizeRetries", "moveStart", "loadedImage", "maxSize", "MoveTypes", "wrapper", "sourceImage", "imageChangedEvent", "imageURL", "imageBase64", "imageFile", "format", "transform", "maintainAspectRatio", "aspectRatio", "resizeToWidth", "resizeToHeight", "cropperMinWidth", "cropperMinHeight", "cropperMaxHeight", "cropperMaxWidth", "cropperStaticWidth", "cropperStaticHeight", "canvasRotation", "initialStepSize", "onlyScaleDown", "imageQuality", "autoCrop", "backgroundColor", "containWithinAspectRatio", "disabled", "imageCropped", "EventEmitter", "startCropImage", "imageLoaded", "cropperReady", "loadImageFailed", "constructor", "reset", "ngOnInit", "stepSize", "ngOnChanges", "changes", "onChangesUpdateSettings", "onChangesInputImage", "original", "image", "complete", "transformLoadedImage", "then", "res", "setLoadedImage", "catch", "err", "loadImageError", "setMaxSize", "setCropperScaledMinSize", "setCropperScaledMaxSize", "resetCropperPosition", "checkCropperPosition", "doAutoCrop", "markForCheck", "setCssTransform", "setOptionsFromChanges", "setOptions", "isValidImageChangedEvent", "element", "currentTarget", "files", "loadImageFile", "loadImageFromURL", "loadBase64Image", "length", "bypassSecurityTrustStyle", "scale", "flipH", "flipV", "rotate", "undefined", "active", "type", "position", "clientX", "clientY", "width", "height", "file", "url", "bypassSecurityTrustResourceUrl", "transformed", "base64", "error", "emit", "captureException", "setTimeout", "checkImageMaxSizeRecursively", "sourceImageLoaded", "__spreadValues", "nativeElement", "offsetWidth", "onResize", "resizeCropperPosition", "sourceImageElement", "offsetHeight", "event", "changeKeyboardStepSize", "keyboardMoveCropper", "key", "includes", "moveType", "shiftKey", "altKey", "getInvertedPositionForKey", "getPositionForKey", "moveEvent", "getEventForKey", "preventDefault", "stopPropagation", "moveImg", "moveStop", "Pinch", "getClientX", "getClientY", "move", "resize", "detectChanges", "setCropperScaledMinWidth", "setCropperScaledMinHeight", "cropperScaledMinWidth", "cropperScaledMinHeight", "Math", "max", "ratio", "size", "cropperScaledMaxWidth", "cropperScaledMaxHeight", "maintainSize", "crop", "output", "selectors", "viewQuery", "rf", "ctx", "\u0275\u0275resolveWindow", "\u0275\u0275resolveDocument", "ImageCropperComponent_Conditional_3_Template", "ImageCropperComponent_Conditional_6_Template", "ImageCropperModalComponent", "activeModal", "inject", "NgbActiveModal", "uploadFile", "croppedImage", "roundCropper", "fileFormat", "imageCropped", "event", "base64", "onCancel", "close", "onSave", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275element", "\u0275\u0275elementEnd", "\u0275\u0275listener", "$event", "\u0275\u0275advance", "\u0275\u0275property", "TranslateDirective", "ImageCropperComponent", "encapsulation"]
}

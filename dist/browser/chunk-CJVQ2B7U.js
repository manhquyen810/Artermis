import{a as Lt}from"./chunk-JZVTXCJO.js";import{a as fn}from"./chunk-OLYZKWDJ.js";import{a as gn}from"./chunk-5VL4PADI.js";import{a as Cn}from"./chunk-4S5JQ74I.js";import{a as Oe}from"./chunk-L7AAAQDH.js";import{a as it,b as Rt}from"./chunk-DKAABN5U.js";import{a as hn}from"./chunk-BCAUGGBR.js";import{a as un}from"./chunk-KNK6NHCW.js";import{a as pn}from"./chunk-VPHPBAVR.js";import{j as Vt}from"./chunk-5AQXEKLE.js";import{f as qt}from"./chunk-DXTZ4GAW.js";import{k as mn}from"./chunk-Z2YUBN6N.js";import{a as Pe}from"./chunk-LYZAUST5.js";import{a as dn}from"./chunk-ZMTDPOTL.js";import{b as ln}from"./chunk-T624HJJL.js";import{b as cn}from"./chunk-FGXEI5KW.js";import{A as Ue,B as he,D as rn,F as we,G as Fe,I as an,b as Pt,q as en,r as z,s as ue,u as fe,v as tn,w as kt,x as nn,y as on,z as Me}from"./chunk-QH7SWO42.js";import{a as Ot,c as Xi,d as Ji,e as tt,g as Zi,h as j,i as M}from"./chunk-P2M2VQE3.js";import{d as Qi}from"./chunk-AR57MWOI.js";import{e as Yi}from"./chunk-CK7FH6VF.js";import{c as L}from"./chunk-5MVJAZRV.js";import{m as Ve}from"./chunk-CT44YL7Q.js";import{c as Ut}from"./chunk-JNO6DNVW.js";import{D as xi,K as _i,N as Dt,P as bi,a as gi,o as He,p as $e,q as Ye,r as Qe,s as Xe,u as vi,v as J}from"./chunk-VZRSC3LP.js";import{J as qe,K as pe,L as Te,a as ui,b as It,c as be,e as K,h as me,i as Se,k as Ge,m as Ke,n as ye,p as At,s as ze,v as We,w as hi,x as Ci,z as fi}from"./chunk-WA5GEAJB.js";import{c as $i}from"./chunk-BNDLMKXK.js";import{b as Hi,e as Ee}from"./chunk-5GXY5RYT.js";import{a as V}from"./chunk-K3W6YFKH.js";import{c as Z}from"./chunk-JXJXC4DZ.js";import{d as O,f as sn}from"./chunk-EDXSOKK5.js";import{b as qi}from"./chunk-R5BZWVRQ.js";import{p as re}from"./chunk-DID2YGL7.js";import{a as Ae,c as ae,h as De}from"./chunk-CXQURQM5.js";import{Bb as wi,C as Ze,Ea as wt,Hc as Li,Hd as zi,K as Ti,Kc as Ni,Ld as Wi,P as et,Pa as Ai,Rb as Fi,Sa as Ft,Uc as ji,Xb as Pi,Zc as Bi,_ as Ii,bc as Oi,ca as pt,da as Mt,db as Di,fb as Ei,id as Ie,mc as ki,md as Gi,qc as Ui,r as Si,rd as Ki,u as yi,w as Je,xb as Mi,xc as Vi,yc as Ri}from"./chunk-Z4VHWOB5.js";import{a as F}from"./chunk-U54OSGNH.js";import{f as _e,h as je,i as de,j as Be}from"./chunk-M6Z6DKZQ.js";import{c as Et}from"./chunk-E2KBL4LX.js";import{i as Ne,n as X,w as pi}from"./chunk-IOA4DPXY.js";import{Ac as ri,Ad as mt,Bc as ai,Bd as xe,Db as r,Dc as b,Ea as x,Ed as di,Id as Tt,J as Jt,L as vt,La as ce,Lb as ii,Ma as f,Mc as v,Na as g,Oc as d,P as Y,Qa as Re,Rc as ke,Rd as mi,Sc as si,Tb as I,U as le,Va as R,Vb as ni,Xb as Le,Ya as k,Yc as st,Za as w,Zb as C,Zc as lt,_ as Q,_c as ct,aa as Wt,ab as ti,cd as bt,dd as t,ea as Zt,ed as ie,f as P,fd as E,gd as dt,j as ee,jc as oi,kc as p,ld as ne,mc as G,md as $,nd as oe,oa as xt,pa as A,pd as li,qd as W,r as se,ra as at,rc as _t,rd as U,s as zt,sc as u,sd as St,td as yt,uc as Ce,ud as ci,vc as q,wc as H,xc as a,ya as ei,yc as s,yd as S,z as te,zc as m,zd as y}from"./chunk-5LC5EQRR.js";import{a as ve,b as gt}from"./chunk-3E746U5Y.js";var vn={future:{entityData:[]},dueSoon:{entityData:[]},current:{entityData:[]},past:{entityData:[]},noDate:{entityData:[]}},eo={none:{none:"noDate",past:"past",soon:"dueSoon",future:"current"},past:{none:"noDate",past:"past",soon:"dueSoon",future:"current"},future:{none:"future",past:"future",soon:"future",future:"future"}},xn={favoriteChannels:{entityData:[]},recents:{entityData:[]},generalChannels:{entityData:[]},exerciseChannels:{entityData:[]},lectureChannels:{entityData:[]},examChannels:{entityData:[]},feedbackDiscussion:{entityData:[]},archivedChannels:{entityData:[]}},us=(()=>{class i{participationService=x(Yi);translate=x(Et);conversationService=x(he);faBullhorn=Mt;faHashtag=Ie;faLock=et;getUpcomingTutorialGroup(e){if(e&&e.length)return e?.reduce((o,l)=>(o?.nextSession?.start?.valueOf()??0)>(l?.nextSession?.start?.valueOf()??0)?o:l)}getUpcomingLecture(e){if(e&&e.length)return e?.reduce((o,l)=>(o?.startDate?.valueOf()??0)>(l?.startDate?.valueOf()??0)?o:l)}getUpcomingExam(e){if(e&&e.length)return e?.reduce((o,l)=>(o?.startDate?.valueOf()??0)>(l?.startDate?.valueOf()??0)?o:l)}getUpcomingExercise(e){if(e&&e.length)return e?.reduce((o,l)=>(o?.dueDate?.valueOf()??0)>(l?.dueDate?.valueOf()??0)?o:l)}getCorrespondingExerciseGroupByDate(e){let n=re(),o=this.getStartDateGroup(e,n),l=this.getEndDateGroup(e,n);return eo[o][l]}getStartDateGroup(e,n){let o=e.startDate??e.releaseDate;return o===void 0?"none":n.isAfter(re(o))?"past":"future"}getEndDateGroup(e,n){let o=e.dueDate?re(e.dueDate):void 0;return o===void 0?"none":n.isAfter(o)?"past":o.isBefore(n.add(3,"days"))?"soon":"future"}getCorrespondingLectureGroupByDate(e,n){if(!e)return"noDate";let o=re(),l=e.isBetween(o.subtract(1,"week"),o);return(n?n.isBefore(o):e.isBefore(o.subtract(1,"week")))?"past":(n?o.isBetween(e,n,void 0,"[]"):l)?"current":"future"}getConversationGroup(e){let n=[];if(e.isHidden)return n.push("archivedChannels"),n;if(e.isFavorite&&n.push("favoriteChannels"),z(e))n.push("groupChats");else if(fe(e))n.push("directMessages");else{let o=this.getCorrespondingChannelSubType(M(e)?.subType);n.push(o)}return n}getCorrespondingChannelSubType(e){let n={[tt.EXERCISE]:"exerciseChannels",[tt.GENERAL]:"generalChannels",[tt.LECTURE]:"lectureChannels",[tt.EXAM]:"examChannels",[tt.FEEDBACK_DISCUSSION]:"feedbackDiscussion"};return e?n[e]:"generalChannels"}groupExercisesByDueDate(e){let n=Ee(vn);for(let o of e){let l=this.getCorrespondingExerciseGroupByDate(o),h=this.mapExerciseToSidebarCardElement(o);n[l].entityData.push(h)}return n}groupLecturesByStartDate(e){let n=Ee(vn);for(let o of e){let l=this.getCorrespondingLectureGroupByDate(o.startDate,o?.endDate),h=this.mapLectureToSidebarCardElement(o);n[l].entityData.push(h)}return n}groupConversationsByChannelType(e,n,o){let l=o?gt(ve({},xn),{groupChats:{entityData:[]},directMessages:{entityData:[]}}):xn,h=Ee(l);h.savedPosts={isHideCount:!0,entityData:[{title:this.translate.instant("artemisApp.courseOverview.sidebar.progress"),id:Pt.PROGRESS.toString(),type:Ot.CHANNEL,icon:Ii,size:"S"},{title:this.translate.instant("artemisApp.courseOverview.sidebar.completed"),id:Pt.COMPLETED.toString(),type:Ot.CHANNEL,icon:Ti,size:"S"},{title:this.translate.instant("artemisApp.courseOverview.sidebar.archived"),id:Pt.ARCHIVED.toString(),type:Ot.CHANNEL,icon:Je,size:"S"}]};for(let _ of n){let T=this.getConversationGroup(_),D=this.mapConversationToSidebarCardElement(e,_);for(let B of T)h[B].entityData.push(D)}for(let _ in h)h[_].entityData.sort((T,D)=>{let B=T.conversation?.isFavorite?1:0;return(D.conversation?.isFavorite?1:0)-B});return h}mapLecturesToSidebarCardElements(e){return e.map(n=>this.mapLectureToSidebarCardElement(n))}mapTutorialGroupsToSidebarCardElements(e){return e.map(n=>this.mapTutorialGroupToSidebarCardElement(n))}mapExercisesToSidebarCardElements(e){return e.map(n=>this.mapExerciseToSidebarCardElement(n))}mapExamsToSidebarCardElements(e,n){return e.map((o,l)=>this.mapExamToSidebarCardElement(o,n?.[l]))}mapConversationsToSidebarCardElements(e,n){return n.map(o=>this.mapConversationToSidebarCardElement(e,o))}mapLectureToSidebarCardElement(e){return{title:e.title??"",id:e.id??"",subtitleLeft:e.startDate?.format("MMM DD, YYYY")??this.translate.instant("artemisApp.courseOverview.sidebar.noDate"),size:"M"}}mapTutorialGroupToSidebarCardElement(e){return{title:e.title??"",id:e.id??"",size:"M",subtitleLeft:e.nextSession?.start?.format("MMM DD, YYYY")??this.translate.instant("artemisApp.courseOverview.sidebar.noUpcomingSession"),subtitleRight:this.getUtilization(e)}}getUtilization(e){if(e.capacity&&e.averageAttendance){let n=Math.round(e.averageAttendance/e.capacity*100);return this.translate.instant("artemisApp.entities.tutorialGroup.utilization")+": "+n+"%"}else return e?.averageAttendance?"\xD8 "+this.translate.instant("artemisApp.entities.tutorialGroup.attendance")+": "+e.averageAttendance:""}mapExerciseToSidebarCardElement(e){return{title:e.title??"",id:e.id??"",subtitleLeft:e.dueDate?.format("MMM DD, YYYY")??this.translate.instant("artemisApp.courseOverview.sidebar.noDueDate"),type:e.type,icon:De(e.type),difficulty:e.difficulty,exercise:e,studentParticipation:e?.studentParticipations?.length?this.participationService.getSpecificStudentParticipation(e.studentParticipations,!1):void 0,size:"M"}}mapExamToSidebarCardElement(e,n){return{title:e.title??"",id:e.id??"",icon:Wi,subtitleLeft:e.moduleNumber??"",startDateWithTime:e.startDate,workingTime:e.workingTime,studentExam:n,attainablePoints:e.examMaxPoints??0,size:"L"}}getChannelIcon(e){let n=M(e);return n?.isAnnouncementChannel?this.faBullhorn:n?.isPublic?this.faHashtag:this.faLock}mapConversationToSidebarCardElement(e,n){let o=!1,l=M(n),h=l?.subTypeReferenceId,_=re(),T=_.subtract(1.5,"week"),D=_.add(1.5,"week"),B=null;if(h&&e.exercises&&l?.subType==="exercise"){let Ct=e.exercises.find(Kt=>Kt.id===h);o=[Ct?.releaseDate,Ct?.dueDate].filter(Boolean).some(Kt=>re(Kt).isBetween(T,D,"day","[]"))}else h&&e.lectures&&l?.subType==="lecture"?(B=e.lectures.find(ft=>ft.id===h)?.startDate||null,o=B?re(B).isBetween(T,D,"day","[]"):!1):h&&e.exams&&l?.subType==="exam"&&(B=e.exams.find(ft=>ft.id===h)?.startDate||null,o=B?re(B).isBetween(T,D,"day","[]"):!1);return{title:this.conversationService.getConversationName(n)??"",id:n.id??"",type:n.type,icon:this.getChannelIcon(n),conversation:n,size:"S",isCurrent:o}}sortLectures(e){return e.sort((o,l)=>{let h=o.startDate?o.startDate.valueOf():re().valueOf(),_=l.startDate?l.startDate.valueOf():re().valueOf();return _-h!==0?_-h:this.sortByTitle(o,l)})}sortExercises(e){return e?.sort((o,l)=>{let h=qt(o,this.studentParticipation(o))?.valueOf()??0,_=qt(l,this.studentParticipation(l))?.valueOf()??0;return _-h!==0?_-h:this.sortByTitle(o,l)})}studentParticipation(e){return e.studentParticipations?.length?e.studentParticipations[0]:void 0}sortByTitle(e,n){return e.title&&n.title?e.title.localeCompare(n.title):0}getSidebarCollapseStateFromStorage(e){let n=localStorage.getItem("sidebar.collapseState."+e);return n?JSON.parse(n):!1}setSidebarCollapseState(e,n){localStorage.setItem("sidebar.collapseState."+e,JSON.stringify(n))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ei({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function _n(i){if(!i)return!1;let c=n=>!!n.isMember,e=n=>!n.isCourseWide&&nt(n);if(j(i))return e(i);if(z(i))return c(i);if(fe(i))return!1;throw new Error("Conversation type not supported")}function xs(i){if(!i)return!1;let c=o=>!!o.isMember,e=o=>!!o.isMember,n=o=>!!o.isMember&&!o.isArchived&&(!o.isAnnouncementChannel||o.isAnnouncementChannel&&!!o.hasChannelModerationRights);if(j(i))return n(i);if(z(i))return c(i);if(fe(i))return e(i);throw new Error("Conversation type not supported")}function bn(i){return nt(i)}function Sn(i){return nt(i)}function yn(i){if(!i)return!1;let c=n=>!!n.isMember,e=n=>!!n.hasChannelModerationRights;if(j(i))return e(i);if(z(i))return c(i);if(fe(i))return!1;throw new Error("Conversation type not supported")}function Tn(i){return!(!i||!i.isMember||j(i)&&(i?.isCreator||i?.isCourseWide)||fe(i))}function _s(i){return!i||i.isMember?!1:nt(i)?!0:!!i.isPublic}function In(i){return nt(i)}function An(i){return nt(i)}function Dn(i,c){let e=c.isCreator,n=i.isAtLeastInstructor,o=c.isChannelModerator;return!(!!c.tutorialGroupId||!!c.tutorialGroupTitle)&&(!!n||!!(o&&e))}function bs(i){return i?.isAtLeastTutor??!1}function En(i){return i?!!i.hasChannelModerationRights:!1}function Mn(i){return i?!!i.isMember:!1}var nt=i=>i?!!i.hasChannelModerationRights:!1;var Ht=1,Fn=20,$t=1,Yt=5,to=[{name:"artemisApp.exercise.easy",value:Ae.EASY,checked:!1},{name:"artemisApp.exercise.medium",value:Ae.MEDIUM,checked:!1},{name:"artemisApp.exercise.hard",value:Ae.HARD,checked:!1}],io=[{name:"artemisApp.courseStatistics.programming",value:ae.PROGRAMMING,checked:!1,icon:De(ae.PROGRAMMING)},{name:"artemisApp.courseStatistics.quiz",value:ae.QUIZ,checked:!1,icon:De(ae.QUIZ)},{name:"artemisApp.courseStatistics.modeling",value:ae.MODELING,checked:!1,icon:De(ae.MODELING)},{name:"artemisApp.courseStatistics.text",value:ae.TEXT,checked:!1,icon:De(ae.TEXT)},{name:"artemisApp.courseStatistics.file-upload",value:ae.FILE_UPLOAD,checked:!1,icon:De(ae.FILE_UPLOAD)}];function no(i){return i?.ungroupedData?.filter(o=>o.exercise?.categories!==void 0)?.flatMap(o=>o.exercise?.categories||[])?.map(o=>({category:o,searched:!1}))}function oo(i){return i?.reduce((c,e)=>(c.some(n=>n.category.equals(e.category))||c.push(e),c),[])}function ro(i){return i?.sort((c,e)=>c.category.compare(e.category))??[]}function Pn(i,c){if(c?.categoryFilter)return c?.categoryFilter;let e=no(i),n=oo(e);return{isDisplayed:!!ro(n).length,options:n??[]}}function On(i,c){if(c?.exerciseTypesFilter)return c?.exerciseTypesFilter;let e=i?.ungroupedData?.filter(o=>o.type!==void 0).map(o=>o.type),n=io?.filter(o=>e?.includes(o.value));return{isDisplayed:n.length>1,options:n}}function kn(i,c){if(c?.difficultyFilter)return c.difficultyFilter;let e=i?.ungroupedData?.filter(o=>o.difficulty!==void 0).map(o=>o.difficulty),n=to?.filter(o=>e?.includes(o.value));return{isDisplayed:!!n.length,options:n}}function ut(i){if(!i?.filter)return!1;let c=i.filter,e=c.selectedMin!==c.generalMin,n=c.selectedMax!==c.generalMax;return e||n}function wn(i,c,e){let n=i,o=c;return e<i&&(n=e),e>c&&(o=e),{updatedMinValue:n,updatedMaxValue:o}}function ao(i){let c=1/0,e=-1/0,n=1/0,o=-1/0;return i.ungroupedData?.forEach(l=>{if(l.exercise?.maxPoints){let h=l.exercise.maxPoints,{updatedMinValue:_,updatedMaxValue:T}=wn(c,e,h);if(c=_,e=T,l.studentParticipation){let D=Vt(l.studentParticipation,!0)?.score;if(D!==void 0){let{updatedMinValue:B,updatedMaxValue:ge}=wn(n,o,D);n=B,o=ge}}}}),{minAchievablePoints:c,maxAchievablePoints:e,minAchievedScore:n,maxAchievedScore:o}}function so(i,c,e,n){let h=Ve(i,Ht,!1),_=Ve(c,Ht,!0),T,D;return n>Fn?(T=Ve(e,Yt,!1),D=Ve(n,Yt,!0)):(T=Ve(e,$t,!1),D=Ve(n,$t,!0)),{minAchievablePointsRounded:h,maxAchievablePointsRounded:_,minAchievedScoreRounded:T,maxAchievedScoreRounded:D}}function lo(i){let{minAchievablePoints:c,maxAchievablePoints:e,minAchievedScore:n,maxAchievedScore:o}=ao(i),{minAchievablePointsRounded:l,maxAchievablePointsRounded:h,minAchievedScoreRounded:_,maxAchievedScoreRounded:T}=so(c,e,n,o);return{achievablePoints:{isDisplayed:l<h,filter:{generalMin:l,generalMax:h,selectedMin:l,selectedMax:h,step:Ht}},achievedScore:{isDisplayed:_<T&&_!==1/0,filter:{generalMin:_,generalMax:T,selectedMin:_,selectedMax:T,step:T<=Fn?$t:Yt}}}}function Un(i,c){if(!i?.ungroupedData)return{achievablePoints:void 0,achievedScore:void 0};let e=ut(c?.achievablePoints),n=ut(c?.achievedScore);return e||n||!c?.achievablePoints||!c?.achievedScore?lo(i):{achievablePoints:c?.achievablePoints,achievedScore:c?.achievedScore}}function co(i,c){return c?.length?i.difficulty?c.includes(i.difficulty):!1:!0}function mo(i,c){return c?.length?i.exercise?.type?c.includes(i.exercise.type):!1:!0}function po(i,c){return c.length?i?.exercise?.categories?i.exercise.categories.some(n=>c.some(o=>o.equals(n))):!1:!0}function uo(i,c,e){if(!c||!e)return!0;let n=Vt(i.studentParticipation,!0);if(!n?.score)return e.filter.selectedMin===0;let o=n.score>=e.filter.selectedMin,l=n.score<=e.filter.selectedMax;return o&&l}function ho(i,c,e){if(!c||!e)return!0;if(!i.exercise?.maxPoints)return!1;let n=i.exercise.maxPoints>=e.filter.selectedMin,o=i.exercise.maxPoints<=e.filter.selectedMax;return n&&o}function Qt(i,c){return po(i,c.selectedCategories)&&co(i,c.searchedDifficulties)&&mo(i,c.searchedTypes)&&uo(i,c.isScoreFilterApplied,c.achievedScore)&&ho(i,c.isPointsFilterApplied,c.achievablePoints)}var Co=["categoriesFilterSelection"];function fo(i,c){i&1&&(t(0,`
                `),a(1,"div"),t(2,`
                    `),m(3,"span",15),t(4,`
                `),s(),t(5,`
            `))}function go(i,c){if(i&1&&(t(0,`
                            `),a(1,"div",20),t(2,`
                                `),m(3,"jhi-custom-exercise-category-badge",21),t(4,`
                            `),s(),t(5,`
                        `)),i&2){let e=c.$implicit,n=d(2);r(3),p("category",e.category)("displayRemoveButton",!0)("onClick",n.removeItem(e))("fontSize","small")}}function vo(i,c){if(i&1){let e=b();t(0,`
                `),m(1,"label",16),t(2,`

                `),a(3,"input",17,0),S(5,"artemisTranslate"),oe("ngModelChange",function(o){f(e);let l=d();return $(l.model,o)||(l.model=o),g(o)}),v("focus",function(o){f(e);let l=d();return g(l.focus$.next(o.target.value))})("click",function(o){f(e);let l=d();return g(l.click$.next(o.target.value))})("selectItem",function(o){f(e);let l=d();return g(l.onSelectItem(o))})("keydown.enter",function(o){f(e);let l=d();return g(l.onSelectItem(o))}),s(),t(6,`

                `),a(7,"div",18),t(8,`
                    `),a(9,"div",19),t(10,`
                        `),q(11,go,6,4,null,null,Ce),s(),t(13,`
                `),s(),t(14,`
            `)}if(i&2){let e=d();r(3),ne("ngModel",e.model),p("ngbTypeahead",e.search)("placeholder",y(5,5,e.selectableCategoryOptions.length?"artemisApp.exercise.selectCategories":"artemisApp.courseOverview.exerciseFilter.noMoreOptions"))("resultFormatter",e.resultFormatter)("disabled",!e.selectableCategoryOptions.length),r(8),H(e.selectedCategoryOptions)}}function xo(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",24),t(2,`
                            `),a(3,"label",25),t(4,`
                                `),a(5,"input",26),oe("ngModelChange",function(o){let l=f(e).$implicit;return $(l.checked,o)||(l.checked=o),g(o)}),s(),t(6,`
                                `),m(7,"fa-icon",27),t(8,`
                                `),m(9,"span",28),t(10,`
                            `),s(),t(11,`
                        `),s(),t(12,`
                    `)}if(i&2){let e=c.$implicit;r(5),ne("ngModel",e.checked),p("name",e.value),r(2),p("icon",e.icon),r(2),p("jhiTranslate",e.name)}}function _o(i,c){if(i&1&&(t(0,`
            `),a(1,"div",8),t(2,`
                `),m(3,"label",22),t(4,`
                `),a(5,"div",23),t(6,`
                    `),q(7,xo,13,4,null,null,Ce),s(),t(9,`
            `),s(),t(10,`
        `)),i&2){let e=d();r(7),H(e.typeFilter.options)}}function bo(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",24),t(2,`
                            `),a(3,"label",25),t(4,`
                                `),a(5,"input",26),oe("ngModelChange",function(o){let l=f(e).$implicit;return $(l.checked,o)||(l.checked=o),g(o)}),s(),t(6,`
                                `),m(7,"span",28),t(8,`
                            `),s(),t(9,`
                        `),s(),t(10,`
                    `)}if(i&2){let e=c.$implicit;r(5),ne("ngModel",e.checked),p("name",e.value),r(2),p("jhiTranslate",e.name)}}function So(i,c){if(i&1&&(t(0,`
            `),a(1,"div",8),t(2,`
                `),m(3,"label",29),t(4,`
                `),a(5,"div",30),t(6,`
                    `),q(7,bo,11,3,null,null,Ce),s(),t(9,`
            `),s(),t(10,`
        `)),i&2){let e=d();r(7),H(e.difficultyFilter.options)}}function yo(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",8),t(2,`
                `),m(3,"label",31),t(4,`
                `),a(5,"jhi-range-slider",32),oe("selectedMinValueChange",function(o){f(e);let l=d();return $(l.achievedScore.filter.selectedMin,o)||(l.achievedScore.filter.selectedMin=o),g(o)})("selectedMaxValueChange",function(o){f(e);let l=d();return $(l.achievedScore.filter.selectedMax,o)||(l.achievedScore.filter.selectedMax=o),g(o)}),s(),t(6,`
            `),s(),t(7,`
        `)}if(i&2){let e=d();r(5),p("generalMinValue",e.achievedScore.filter.generalMin)("generalMaxValue",e.achievedScore.filter.generalMax),ne("selectedMinValue",e.achievedScore.filter.selectedMin)("selectedMaxValue",e.achievedScore.filter.selectedMax),p("step",e.achievedScore.filter.step)("labelSymbol","%")}}function To(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",8),t(2,`
                `),m(3,"label",33),t(4,`
                `),a(5,"jhi-range-slider",34),oe("selectedMinValueChange",function(o){f(e);let l=d();return $(l.achievablePoints.filter.selectedMin,o)||(l.achievablePoints.filter.selectedMin=o),g(o)})("selectedMaxValueChange",function(o){f(e);let l=d();return $(l.achievablePoints.filter.selectedMax,o)||(l.achievablePoints.filter.selectedMax=o),g(o)}),s(),t(6,`
            `),s(),t(7,`
        `)}if(i&2){let e=d();r(5),p("generalMinValue",e.achievablePoints.filter.generalMin)("generalMaxValue",e.achievablePoints.filter.generalMax),ne("selectedMinValue",e.achievablePoints.filter.selectedMin)("selectedMaxValue",e.achievablePoints.filter.selectedMax),p("step",e.achievablePoints.filter.step)}}var Vn=(()=>{class i{activeModal=x(vi);faFilter=Ft;faBackward=Si;filterApplied=new R;instance;selectedCategoryOptions=[];selectableCategoryOptions=[];noFiltersAvailable=!1;focus$=new P;click$=new P;form;model;sidebarData;categoryFilter;typeFilter;difficultyFilter;achievablePoints;achievedScore;exerciseFilters;ngOnInit(){this.categoryFilter=this.exerciseFilters?.categoryFilter,this.typeFilter=this.exerciseFilters?.exerciseTypesFilter,this.difficultyFilter=this.exerciseFilters?.difficultyFilter,this.achievablePoints=this.exerciseFilters?.achievablePoints,this.achievedScore=this.exerciseFilters?.achievedScore,this.noFiltersAvailable=!(this.categoryFilter?.isDisplayed||this.typeFilter?.isDisplayed||this.difficultyFilter?.isDisplayed||this.achievedScore?.isDisplayed||this.achievablePoints?.isDisplayed),this.updateCategoryOptionsStates()}closeModal(){this.activeModal.close()}search=e=>{let n=e.pipe(le(200),Q()),o=this.click$.pipe(vt(()=>!this.instance.isPopupOpen())),l=this.focus$;return Jt(n,l,o).pipe(te(h=>h===""?this.selectableCategoryOptions:this.selectableCategoryOptions.filter(_=>_.category.category!==void 0?_.category.category?.toLowerCase().indexOf(h.toLowerCase())>-1:!1)))};resultFormatter=e=>e.category.category??"";onSelectItem(e){if(!e.item){e.preventDefault(),e.stopPropagation();return}e.preventDefault();let o=e.item;o.searched=!0,this.updateCategoryOptionsStates(),this.model=void 0}removeItem(e){return()=>{e.searched=!1,this.updateCategoryOptionsStates()}}applyFilter(){if(!this.sidebarData?.groupedData)return;let e=this.getAppliedFilterDetails();for(let n in this.sidebarData.groupedData)this.sidebarData.groupedData[n].entityData=this.sidebarData.groupedData[n].entityData.filter(o=>Qt(o,e));this.sidebarData.ungroupedData=this.sidebarData.ungroupedData?.filter(n=>Qt(n,e)),this.filterApplied.emit({filteredSidebarData:this.sidebarData,appliedExerciseFilters:this.exerciseFilters,isFilterActive:this.isFilterActive(e)}),this.closeModal()}getAppliedFilterDetails(){return{searchedTypes:this.getSearchedTypes(),selectedCategories:this.getSelectedCategories(),searchedDifficulties:this.getSearchedDifficulties(),isScoreFilterApplied:ut(this.achievedScore),isPointsFilterApplied:ut(this.achievablePoints),achievedScore:this.achievedScore,achievablePoints:this.achievablePoints}}getSearchedTypes(){return this.typeFilter?.options.filter(e=>e.checked).map(e=>e.value)}getSelectedCategories(){return this.selectedCategoryOptions.filter(e=>e.searched).map(e=>e.category)}getSearchedDifficulties(){return this.difficultyFilter?.options.filter(e=>e.checked).map(e=>e.value)}isFilterActive(e){return!!e.selectedCategories.length||!!e.searchedTypes?.length||!!e.searchedDifficulties?.length||e.isScoreFilterApplied||e.isPointsFilterApplied}clearFilter(){this.categoryFilter?.options.forEach(e=>e.searched=!1),this.typeFilter?.options.forEach(e=>e.checked=!1),this.difficultyFilter?.options.forEach(e=>e.checked=!1),this.resetRangeFilter(this.achievedScore),this.resetRangeFilter(this.achievablePoints),this.applyFilter()}resetRangeFilter(e){if(!e?.filter)return;let n=e.filter;n.selectedMin=n.generalMin,n.selectedMax=n.generalMax}updateCategoryOptionsStates(){this.selectedCategoryOptions=this.getUpdatedSelectedCategoryOptions(),this.selectableCategoryOptions=this.getSelectableCategoryOptions()}getUpdatedSelectedCategoryOptions(){return this.categoryFilter?.options.filter(e=>e.searched)??[]}getSelectableCategoryOptions(){return this.categoryFilter?.options.filter(e=>!e.searched)??[]}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-exercise-filter-modal"]],viewQuery:function(n,o){if(n&1&&st(Co,5),n&2){let l;lt(l=ct())&&(o.instance=l.first)}},outputs:{filterApplied:"filterApplied"},decls:42,vars:8,consts:[["categoriesFilterSelection","ngbTypeahead"],["name","exerciseFilterForm",3,"ngSubmit"],[1,"modal-header"],[1,"modal-title"],[3,"icon"],["jhiTranslate","artemisApp.courseOverview.exerciseFilter.modalTitle"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["jhiTranslate","artemisApp.courseOverview.exerciseFilter.clearFilter"],[1,"ms-auto"],["type","button","jhiTranslate","entity.action.cancel","aria-label","Close",1,"btn","btn-secondary",3,"click"],["type","button","jhiTranslate","artemisApp.courseOverview.exerciseFilter.applyFilter",1,"btn","btn-primary",3,"click","disabled"],["jhiTranslate","artemisApp.courseOverview.exerciseFilter.noFilterAvailable"],["for","exercise-categories-filter-selection","jhiTranslate","artemisApp.exercise.categories",1,"form-control-label","h6"],["id","exercise-categories-filter-selection","type","text","name","category-filter-selection",1,"form-control","mb-2",3,"ngModelChange","focus","click","selectItem","keydown.enter","ngModel","ngbTypeahead","placeholder","resultFormatter","disabled"],[1,"row"],[1,"d-flex","flex-row","flex-wrap"],[1,"p-1"],[3,"category","displayRemoveButton","onClick","fontSize"],["for","exercise-type-filter-selection","jhiTranslate","artemisApp.ratingList.exerciseType",1,"form-control-label","h6"],["id","exercise-type-filter-selection"],[1,"form-check","form-check-inline","no-left-margin-padding"],[1,"pointer"],["type","checkbox",1,"pointer",3,"ngModelChange","ngModel","name"],[1,"ms-2",3,"icon"],[1,"ms-1",3,"jhiTranslate"],["for","difficulty-filter-selection","jhiTranslate","artemisApp.exercise.difficulty",1,"form-control-label","h6"],["id","difficulty-filter-selection"],["for","achieved-score-range-slider","jhiTranslate","artemisApp.courseOverview.exerciseFilter.achievedScore",1,"form-control-label","h6"],["id","achieved-score-range-slider",3,"selectedMinValueChange","selectedMaxValueChange","generalMinValue","generalMaxValue","selectedMinValue","selectedMaxValue","step","labelSymbol"],["for","achieved-points-range-slider","jhiTranslate","artemisApp.courseOverview.exerciseFilter.achievablePoints",1,"form-control-label","h6"],["id","achieved-points-range-slider",3,"selectedMinValueChange","selectedMaxValueChange","generalMinValue","generalMaxValue","selectedMinValue","selectedMaxValue","step"]],template:function(n,o){n&1&&(a(0,"form",1),v("ngSubmit",function(){return o.applyFilter()}),t(1,`
    `),a(2,"div",2),t(3,`
        `),a(4,"h4",3),t(5,`
            `),m(6,"fa-icon",4),t(7,`
            `),m(8,"span",5),t(9,`
        `),s(),t(10,`
        `),a(11,"button",6),v("click",function(){return o.closeModal()}),s(),t(12,`
    `),s(),t(13,`
    `),a(14,"div",7),t(15,`
        `),a(16,"div",8),t(17,`
            `),C(18,fo,6,0)(19,vo,15,7),s(),t(20,`

        `),C(21,_o,11,0)(22,So,11,0)(23,yo,8,6)(24,To,8,5),s(),t(25,`
    `),a(26,"div",9),t(27,`
        `),a(28,"button",10),v("click",function(){return o.clearFilter()}),t(29,`
            `),m(30,"span",11),t(31,`
        `),s(),t(32,`

        `),a(33,"div",12),t(34,`
            `),a(35,"button",13),v("click",function(){return o.closeModal()}),s(),t(36,`
            `),a(37,"button",14),v("click",function(){return o.applyFilter()}),s(),t(38,`
        `),s(),t(39,`
    `),s(),t(40,`
`),s(),t(41,`
`)),n&2&&(r(6),p("icon",o.faFilter),r(12),u(o.noFiltersAvailable?18:-1),r(),u(o.selectableCategoryOptions.length||o.selectedCategoryOptions.length?19:-1),r(2),u(o.typeFilter!=null&&o.typeFilter.isDisplayed?21:-1),r(),u(o.difficultyFilter!=null&&o.difficultyFilter.isDisplayed&&o.difficultyFilter?22:-1),r(),u(o.achievedScore&&(o.achievedScore!=null&&o.achievedScore.isDisplayed)?23:-1),r(),u(o.achievablePoints&&o.achievablePoints.isDisplayed?24:-1),r(13),p("disabled",o.noFiltersAvailable))},dependencies:[pe,ye,be,It,me,Se,Ke,Ge,Te,sn,O,fn,Cn,bi,Dt,F,V],styles:["[_nghost-%COMP%]     ngb-typeahead-window.dropdown-menu{max-height:25rem;overflow-y:auto}.no-left-margin-padding[_ngcontent-%COMP%]:first-child{margin-left:0;padding-left:0}.form-control[_ngcontent-%COMP%]:disabled, .form-control[disabled][_ngcontent-%COMP%]{pointer-events:none}"]})}return i})();var Io=i=>({"mt-1":i});function Ao(i,c){if(i&1&&(t(0,`
                        `),m(1,"fa-icon",11),t(2,`
                    `)),i&2){let e=d(3);r(),p("fixedWidth",!0)("icon",e.sidebarItem.icon)}}function Do(i,c){if(i&1&&(t(0),S(1,"artemisDate"),S(2,"artemisDate")),i&2){let e=d(3);dt(`
                        `,mt(1,2,e.sidebarItem.startDateWithTime,"long-date"),`
                        -
                        `,mt(2,5,e.sidebarItem.startDateWithTime,"time"),`
                    `)}}function Eo(i,c){if(i&1&&(t(0,`
                        `),m(1,"jhi-student-exam-working-time",12),t(2,`
                    `)),i&2){let e=d(3);r(),p("studentExam",e.sidebarItem.studentExam)}}function Mo(i,c){if(i&1&&(t(0),S(1,"artemisDurationFromSeconds")),i&2){let e=d(3);E(`
                        `,y(1,1,e.sidebarItem.workingTime),`
                    `)}}function wo(i,c){if(i&1&&t(0),i&2){let e=d(3);E(`
                        `,e.sidebarItem.attainablePoints,`
                    `)}}function Fo(i,c){if(i&1&&(t(0,`
            `),a(1,"div",1),t(2,`
                `),a(3,"span",2),t(4,`
                    `),C(5,Ao,3,2),t(6),s(),t(7,`
            `),s(),t(8,`
            `),a(9,"div",3),t(10,`
                `),a(11,"div",4),t(12),s(),t(13,`
            `),s(),t(14,`
            `),a(15,"div",5),t(16,`
                `),m(17,"small",6),t(18,`
                `),a(19,"small",7),t(20,`
                    `),C(21,Do,3,8),s(),t(22,`
            `),s(),t(23,`
            `),m(24,"hr",8),t(25,`
            `),a(26,"div",5),t(27,`
                `),m(28,"small",9),t(29,`
                `),a(30,"small",7),t(31,`
                    `),C(32,Eo,3,1)(33,Mo,2,3),s(),t(34,`
            `),s(),t(35,`
            `),m(36,"hr",8),t(37,`
            `),a(38,"div",5),t(39,`
                `),m(40,"small",10),t(41,`
                `),a(42,"small",7),t(43,`
                    `),C(44,wo,1,1),s(),t(45,`
            `),s(),t(46,`
        `)),i&2){let e=d(2);r(3),p("title",e.sidebarItem.title),r(2),u(e.sidebarItem.icon?5:-1),r(),E(`
                    `,e.sidebarItem.title,`
                `),r(6),E(`
                    `,e.sidebarItem.subtitleLeft,`
                `),r(9),u(e.sidebarItem.startDateWithTime?21:-1),r(11),u(e.sidebarItem.studentExam?32:e.sidebarItem.workingTime?33:-1),r(12),u(e.sidebarItem.attainablePoints?44:-1)}}function Po(i,c){if(i&1&&(t(0,`
                        `),m(1,"jhi-profile-picture",16),t(2,`
                    `)),i&2){let e=d(3);r(),p("imageSizeInRem","1.1")("fontSizeInRem","0.5")("imageId","sidebar-profile-picture")("defaultPictureId","sidebar-default-profile-picture")("isGray",!1)("authorId",e.otherUser.id)("authorName",e.otherUser.name)("imageUrl",e.otherUser.imageUrl)("isEditable",!1)}}function Oo(i,c){if(i&1&&(t(0,`
                        `),m(1,"fa-icon",11),t(2,`
                    `)),i&2){let e=d(3);r(),p("fixedWidth",!0)("icon",e.sidebarItem.icon)}}function ko(i,c){if(i&1&&(t(0,`
                        `),m(1,"fa-icon",11),t(2,`
                    `)),i&2){let e=d(3);r(),p("fixedWidth",!0)("icon",e.sidebarItem.rightIcon)}}function Uo(i,c){if(i&1&&(t(0,`
                    `),a(1,"span",17),t(2),s(),t(3,`
                `)),i&2){let e=d(3);r(2),ie(e.formattedUnreadCount)}}function Vo(i,c){if(i&1&&(t(0,`
                        `),m(1,"jhi-submission-result-status",18),t(2,`
                    `)),i&2){let e=d(3);r(),p("exercise",e.sidebarItem.exercise)("studentParticipation",e.sidebarItem.studentParticipation)("triggerLastGraded",!1)("isInSidebarCard",!0)}}function Ro(i,c){if(i&1&&t(0),i&2){let e=d(3);E(`
                        `,e.sidebarItem.subtitleRight,`
                    `)}}function Lo(i,c){if(i&1&&(t(0,`
            `),a(1,"div",1),t(2,`
                `),a(3,"span",13),t(4,`
                    `),C(5,Po,3,9)(6,Oo,3,2),t(7),s(),t(8,`
                `),a(9,"span"),t(10,`
                    `),C(11,ko,3,2),s(),t(12,`
                `),C(13,Uo,4,1),s(),t(14,`
            `),a(15,"div",14),t(16,`
                `),a(17,"small",4),t(18),s(),t(19,`
                `),a(20,"small",15),t(21,`
                    `),C(22,Vo,3,4)(23,Ro,1,1),s(),t(24,`
            `),s(),t(25,`
        `)),i&2){let e=d(2);r(3),G("muted",e.sidebarItem.conversation==null?null:e.sidebarItem.conversation.isMuted),p("title",e.sidebarItem.title)("ngClass",e.unreadCount()>0?"fw-bold":"fw-normal"),r(2),u(e.otherUser?5:e.sidebarItem.icon?6:-1),r(2),E(`
                    `,e.sidebarItem.title,""),r(4),u(e.sidebarItem.rightIcon?11:-1),r(2),u(e.unreadCount()>0?13:-1),r(2),p("ngClass",U(11,Io,e.sidebarItem.subtitleLeft)),r(3),E(`
                    `,e.sidebarItem.subtitleLeft,`
                `),r(4),u(e.sidebarType==="exercise"&&e.sidebarItem.exercise?22:23)}}function No(i,c){if(i&1&&(t(0,`
    `),a(1,"div",0),t(2,`
        `),C(3,Fo,47,7)(4,Lo,26,13),s(),t(5,`
`)),i&2){let e=d();r(3),u(e.sidebarType==="exam"?3:4)}}var ot=(()=>{class i{sidebarItem;sidebarType;groupKey;unreadCount=w(0);otherUser;faPeopleGroup=Ze;formattedUnreadCount="";ngOnInit(){this.formattedUnreadCount=this.getFormattedUnreadCount(),this.extractMessageUser()}ngOnChanges(e){e.unreadCount&&(this.formattedUnreadCount=this.getFormattedUnreadCount())}getFormattedUnreadCount(){return this.unreadCount()>99?"99+":this.unreadCount().toString()||""}extractMessageUser(){this.sidebarItem.type==="oneToOneChat"&&this.sidebarItem.conversation?.members?this.otherUser=this.sidebarItem.conversation.members.find(e=>!e.isRequestingUser):this.otherUser=null,this.sidebarItem.type==="groupChat"&&(this.sidebarItem.icon=this.faPeopleGroup)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-sidebar-card-item"]],inputs:{sidebarItem:"sidebarItem",sidebarType:"sidebarType",groupKey:"groupKey",unreadCount:[1,"unreadCount"]},features:[ce],decls:2,vars:1,consts:[[1,"mx-1"],[1,"d-flex","justify-content-between","align-items-baseline"],["id","test-sidebar-card-title",1,"me-2","mb-2",3,"title"],[1,"d-flex","justify-content-between","mb-1","align-items-baseline"],[1,"me-2","text-truncate"],[1,"d-flex","flex-column","align-items-baseline"],["jhiTranslate","artemisApp.courseOverview.sidebar.start",1,"me-2","text-truncate","fw-semibold","small-title-color"],[1,"me-2","text-truncate","fw-semibold"],[1,"my-1","mx-0"],["jhiTranslate","artemisApp.courseOverview.sidebar.workingTime",1,"me-2","text-truncate","fw-semibold","small-title-color"],["jhiTranslate","artemisApp.courseOverview.sidebar.attainablePoints",1,"me-2","text-truncate","fw-semibold","small-title-color"],[3,"fixedWidth","icon"],[3,"studentExam"],["id","test-sidebar-card-title",1,"small","text-truncate","me-2",3,"title","ngClass"],[1,"d-flex","justify-content-between","align-items-baseline","small",3,"ngClass"],[1,"text-truncate","d-inline"],[3,"imageSizeInRem","fontSizeInRem","imageId","defaultPictureId","isGray","authorId","authorName","imageUrl","isEditable"],[1,"unread-count","me-n2"],[1,"text-truncate","result",3,"exercise","studentParticipation","triggerLastGraded","isInSidebarCard"]],template:function(n,o){n&1&&(t(0,`
`),C(1,No,6,1)),n&2&&(r(),u(o.sidebarItem?1:-1))},dependencies:[O,F,hn,X,Pe,un,Ut,pn],styles:[".small-title-color[_ngcontent-%COMP%]{color:var(--gray-600)}.muted[_ngcontent-%COMP%]{color:var(--metis-conversation-sidebar-muted)}.unread-count[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);border-radius:50%;font-size:.6rem;width:1.1rem;min-width:1.1rem;height:1.1rem;display:flex;justify-content:center;align-items:center;overflow:hidden;white-space:nowrap}",".search-height-normal[_ngcontent-%COMP%]{--search-height: 97px}.search-height-conversations[_ngcontent-%COMP%]{--search-height: 152px}.scrollable-item-content[_ngcontent-%COMP%]{overflow-y:auto;height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))}.scrollable-item-content.content-height-dev[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-dev) - var(--header-height) - var(--search-height))}@media (max-width: 768px){.scrollable-item-content[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))!important;height:calc(100dvh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))!important}}.sidebar[_ngcontent-%COMP%]{background-color:var(--module-bg);height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height))}.sidebar.sidebar-height-dev[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-dev) - var(--header-height))}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height))!important;height:calc(100dvh - var(--sidebar-footer-height-prod) - var(--header-height))!important}}.bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}@media print{.hide-on_print[_ngcontent-%COMP%]{display:none!important}}.item-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.dropdown-menu[_ngcontent-%COMP%]{padding:0}.dropdown-item[_ngcontent-%COMP%]{display:flex;margin-left:.2rem}.square-button[_ngcontent-%COMP%]{width:45px;height:35px;padding:.2rem;display:flex;align-items:center;justify-content:center;border-radius:.2rem}.search-filter[_ngcontent-%COMP%]{height:35px}"]})}return i})();var rt=(()=>{class i{isPublic=w(!0);isAnnouncementChannel=w(!1);faHashtag=Ie;faLock=et;faBullhorn=Mt;getIcon(){return this.isAnnouncementChannel()?this.faBullhorn:this.isPublic()?this.faHashtag:this.faLock}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-channel-icon"]],inputs:{isPublic:[1,"isPublic"],isAnnouncementChannel:[1,"isAnnouncementChannel"]},decls:5,vars:1,consts:[["size","xs",3,"icon"]],template:function(n,o){n&1&&(ri(0),t(1,`
    `),m(2,"fa-icon",0),t(3,`
`),ai(),t(4,`
`)),n&2&&(r(2),p("icon",o.getIcon()))},dependencies:[O],encapsulation:2})}return i})();var jo=["instance"],Bo=["searchInput"];function Go(i,c){if(i&1&&(t(0,`
            `),a(1,"label",6),t(2),s(),t(3,`
        `)),i&2){let e=d();r(),p("for",e.id+"-user-input"),r(),ie(e.label)}}function Ko(i,c){if(i&1&&(t(0,`
            `),a(1,"div",7),t(2,`
                `),m(3,"jhi-profile-picture",8),t(4,`
                `),a(5,"span"),t(6),s(),t(7,`
            `),s(),t(8,`
        `)),i&2){let e=c.result,n=d();r(3),p("imageSizeInRem","1.1")("fontSizeInRem","0.5")("imageId","sidebar-profile-picture")("defaultPictureId","sidebar-default-profile-picture")("isGray",!1)("authorId",e.id)("authorName",e.name)("imageUrl",e.imageUrl)("isEditable",!1),r(3),ie(n.getUserLabel(e))}}function zo(i,c){i&1&&(t(0,`
            `),m(1,"small",9),t(2,`
            `),m(3,"br"),t(4,`
        `))}function Wo(i,c){i&1&&(t(0,`
            `),m(1,"small",10),t(2,`
            `),m(3,"br"),t(4,`
        `))}function qo(i,c){i&1&&(t(0,`
            `),m(1,"small",11),t(2,`
        `))}function Ho(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",12),t(2,`
                `),a(3,"input",13),v("change",function(){f(e);let o=d();return o.searchStudents=!o.searchStudents,g(o.onFilterChange())}),s(),t(4,`
                `),m(5,"label",14),t(6,`
            `),s(),t(7,`
        `)}if(i&2){let e=d();r(3),p("checked",e.searchStudents)}}function $o(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",12),t(2,`
                `),a(3,"input",15),v("change",function(){f(e);let o=d();return o.searchTutors=!o.searchTutors,g(o.onFilterChange())}),s(),t(4,`
                `),m(5,"label",16),t(6,`
            `),s(),t(7,`
        `)}if(i&2){let e=d();r(3),p("checked",e.searchTutors)}}function Yo(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",12),t(2,`
                `),a(3,"input",17),v("change",function(){f(e);let o=d();return o.searchInstructors=!o.searchInstructors,g(o.onFilterChange())}),s(),t(4,`
                `),m(5,"label",18),t(6,`
            `),s(),t(7,`
        `)}if(i&2){let e=d();r(3),p("checked",e.searchInstructors)}}function Qo(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"button",22),v("click",function(){f(e);let o=d().$index,l=d(2);return g(l.onDelete(o))}),t(2,`
                            `),m(3,"fa-icon",23),t(4,`
                        `),s(),t(5,`
                    `)}if(i&2){let e=d(3);r(3),p("icon",e.faX)}}function Xo(i,c){if(i&1&&(t(0,`
                `),a(1,"li",20),t(2,`
                    `),a(3,"span",21),t(4),s(),t(5,`
                    `),C(6,Qo,6,1),s(),t(7,`
            `)),i&2){let e=c.$implicit,n=d(2);r(4),ie(n.getUserLabel(e)),r(2),u(n.disabled?-1:6)}}function Jo(i,c){if(i&1&&(t(0,`
        `),a(1,"ul",19),t(2,`
            `),q(3,Xo,8,2,null,null,_t().trackIdentity,!0),s(),t(5,`
    `)),i&2){let e=d();r(3),H(e.selectedUsers)}}var Zo=0,Rn=(()=>{class i{courseManagementService=x(Qi);cdr=x(Tt);hostClass=!0;ngUnsubscribe=new P;typeAheadInstance;disabled=!1;searchInput;courseId;id="users-selector"+Zo++;label;rolesToAllowSearchingIn=["tutors","students","instructors"];multiSelect=!0;showUserList=!0;searchStudents=!0;searchTutors=!0;searchInstructors=!0;faX=zi;selectedUsers=[];isSearching=!1;searchFailed=!1;ngOnInit(){this.rolesToAllowSearchingIn.includes("students")&&(this.searchStudents=!0),this.rolesToAllowSearchingIn.includes("tutors")&&(this.searchTutors=!0),this.rolesToAllowSearchingIn.includes("instructors")&&(this.searchInstructors=!0)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}usersFormatter=e=>this.getUserLabel(e);trackIdentity(e,n){return n.id}getUserLabel(e){let n="";return e.firstName&&(n+=e.firstName+" "),e.lastName&&(n+=e.lastName+" "),e.login&&(n+="("+e.login+")"),n.trim()}onSelectItem(e){this.onUserSelected(e.item),e.preventDefault(),this.resetSearchInput()}onDelete(e){this.selectedUsers.splice(e,1),this.onChange(this.selectedUsers)}onInputChange(e){e.target.value.length<3&&this.typeAheadInstance.dismissPopup()}onFilterChange(){this.typeAheadInstance?.dismissPopup(),this.searchInput.nativeElement.dispatchEvent(new Event("input"))}search=e=>e.pipe(le(200),Q(),te(n=>n?n.trim().toLowerCase():""),vt(n=>n.length>=3||!this.searchStudents),xt(n=>{let o=[];return this.searchStudents&&o.push("students"),this.searchTutors&&o.push("tutors"),this.searchInstructors&&o.push("instructors"),o.length===0?(this.searchFailed=!1,zt([])):(this.isSearching=!0,this.courseManagementService.searchUsers(this.courseId,n,o).pipe(te(l=>l.body),te(l=>l.filter(h=>!this.selectedUsers.find(_=>_.id===h.id))),at(()=>{this.isSearching=!1,this.searchFailed=!1}),Y(()=>(this.searchFailed=!0,this.isSearching=!1,zt([]))),A(this.ngUnsubscribe)))}),A(this.ngUnsubscribe));onChange=e=>{};onTouched=()=>{};registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){if(!e){this.selectedUsers=[],this.cdr.detectChanges();return}this.multiSelect?this.selectedUsers=e??[]:this.selectedUsers=e?.length?[e[0]]:[],this.cdr.detectChanges()}onUserSelected(e){e&&(this.selectedUsers.find(n=>n.id===e.id)||(this.multiSelect?this.selectedUsers=[...this.selectedUsers,e]:this.selectedUsers=[e],this.onChange(this.selectedUsers)))}resetSearchInput(){this.searchInput&&(this.searchInput.nativeElement.value="")}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-course-users-selector"]],viewQuery:function(n,o){if(n&1&&(st(jo,7),st(Bo,5)),n&2){let l;lt(l=ct())&&(o.typeAheadInstance=l.first),lt(l=ct())&&(o.searchInput=l.first)}},hostVars:3,hostBindings:function(n,o){n&2&&(oi("id",o.id),G("course-users-selector",o.hostClass))},inputs:{disabled:"disabled",courseId:"courseId",id:"id",label:"label",rolesToAllowSearchingIn:"rolesToAllowSearchingIn",multiSelect:"multiSelect",showUserList:"showUserList"},features:[li([{provide:ui,useExisting:i,multi:!0}])],decls:25,vars:18,consts:[["searchInput","","instance","ngbTypeahead"],["resultTemplate",""],[3,"focusout"],[1,"form-group"],["type","text","placement","bottom-start",1,"form-control",3,"selectItem","input","disabled","id","placeholder","ngbTypeahead","inputFormatter","resultTemplate","editable","focusFirst"],[1,"text-end"],[3,"for"],[1,"d-flex","align-items-center"],[1,"me-2",3,"imageSizeInRem","fontSizeInRem","imageId","defaultPictureId","isGray","authorId","authorName","imageUrl","isEditable"],["jhiTranslate","artemisApp.userSelector.searchingText",1,"form-text","text-body-secondary"],["jhiTranslate","artemisApp.userSelector.searchFailedText"],["jhiTranslate","artemisApp.userSelector.helpText",1,"form-text","text-body-secondary"],[1,"form-check","form-check-inline"],["type","checkbox","id","students",1,"form-check-input",3,"change","checked"],["for","students","jhiTranslate","artemisApp.course.students",1,"form-check-label"],["type","checkbox","id","tutors",1,"form-check-input",3,"change","checked"],["for","tutors","jhiTranslate","artemisApp.course.tutors",1,"form-check-label"],["type","checkbox","id","instructors",1,"form-check-input",3,"change","checked"],["for","instructors","jhiTranslate","artemisApp.course.instructors",1,"form-check-label"],[1,"list-group"],[1,"selected-user","list-group-item","d-flex","justify-content-between","align-items-center"],[1,"d-inline-block"],["type","button",1,"delete-user","btn","btn-outline-secondary","d-inline-block",3,"click"],[3,"icon"]],template:function(n,o){if(n&1){let l=b();a(0,"div",2),v("focusout",function(){return f(l),g(o.onTouched())}),t(1,`
    `),a(2,"div",3),t(3,`
        `),C(4,Go,4,2),a(5,"input",4,0),S(8,"artemisTranslate"),v("selectItem",function(_){return f(l),g(o.onSelectItem(_))})("input",function(_){return f(l),g(o.onInputChange(_))}),s(),t(9,`
        `),C(10,Ko,9,10,"ng-template",null,1,di),t(12,`
        `),C(13,zo,5,0)(14,Wo,5,0)(15,qo,3,0),s(),t(16,`
    `),a(17,"div",5),t(18,`
        `),C(19,Ho,8,1)(20,$o,8,1)(21,Yo,8,1),s(),t(22,`
    `),C(23,Jo,6,0),s(),t(24,`
`)}if(n&2){let l=bt(11);r(4),u(o.label?4:-1),r(),p("disabled",o.disabled)("id",o.id+"-user-input")("placeholder",y(8,16,"artemisApp.userSelector.placeholderText"))("ngbTypeahead",o.search)("inputFormatter",o.usersFormatter)("resultTemplate",l)("editable",!1)("focusFirst",!1),r(8),u(o.isSearching?13:-1),r(),u(o.searchFailed?14:-1),r(),u(o.searchStudents?15:-1),r(4),u(o.rolesToAllowSearchingIn.includes("students")?19:-1),r(),u(o.rolesToAllowSearchingIn.includes("tutors")?20:-1),r(),u(o.rolesToAllowSearchingIn.includes("instructors")?21:-1),r(2),u(o.showUserList?23:-1)}},dependencies:[Dt,Pe,F,O,V],styles:[`.course-users-selector.ng-invalid{border:none}
`],encapsulation:2})}return i})();var Ln=()=>({standalone:!0}),Nn=i=>({max:i});function er(i,c){if(i&1&&(t(0,`
                `),m(1,"div",24),t(2,`
            `)),i&2){let e=d(2);r(),p("translateValues",U(1,Nn,e.maxSelectable))}}function tr(i,c){i&1&&(t(0,`
                                        `),m(1,"div",26),t(2,`
                                    `))}function ir(i,c){if(i&1&&(t(0,`
                                        `),m(1,"div",27),t(2,`
                                    `)),i&2){let e=d(3);r(),p("translateValues",U(1,Nn,e.maxSelectable))}}function nr(i,c){if(i&1&&(t(0,`
                                `),a(1,"div",25),t(2,`
                                    `),C(3,tr,3,0)(4,ir,3,3),s(),t(5,`
                            `)),i&2){let e=d(2);r(3),u(!(e.selectedUsersControl==null||e.selectedUsersControl.errors==null)&&e.selectedUsersControl.errors.required?3:-1),r(),u(!(e.selectedUsersControl==null||e.selectedUsersControl.errors==null)&&e.selectedUsersControl.errors.maxlength?4:-1)}}function or(i,c){if(i&1&&(t(0,`
                                    `),m(1,"fa-icon",28),t(2,`
                                `)),i&2){let e=d(2);r(),p("icon",e.faSpinner)}}function rr(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",0),t(2,`
        `),a(3,"div",1),t(4,`
            `),C(5,er,3,3),a(6,"div",2),t(7,`
                `),a(8,"div",3),t(9,`
                    `),a(10,"div",4),t(11,`
                        `),a(12,"div",5),t(13,`
                            `),a(14,"input",6),oe("ngModelChange",function(o){f(e);let l=d();return $(l.mode,o)||(l.mode=o),g(o)}),s(),t(15,`
                            `),m(16,"label",7),t(17,`
                            `),a(18,"input",8),oe("ngModelChange",function(o){f(e);let l=d();return $(l.mode,o)||(l.mode=o),g(o)}),s(),t(19,`
                            `),m(20,"label",9),t(21,`
                        `),s(),t(22,`
                    `),s(),t(23,`
                `),s(),t(24,`
                `),a(25,"form",10),v("ngSubmit",function(){f(e);let o=d();return g(o.submitForm())}),t(26,`
                    `),a(27,"div",11),t(28,`
                        `),a(29,"div",1),t(30,`
                            `),m(31,"jhi-course-users-selector",12),S(32,"artemisTranslate"),t(33,`
                            `),C(34,nr,6,2),s(),t(35,`
                    `),s(),t(36,`
                    `),a(37,"div",13),t(38,`
                        `),a(39,"div",1),t(40,`
                            `),a(41,"div",14),t(42,`
                                `),m(43,"input",15),t(44,`
                                `),m(45,"label",16),t(46,`
                            `),s(),t(47,`
                            `),a(48,"div",14),t(49,`
                                `),m(50,"input",17),t(51,`
                                `),m(52,"label",18),t(53,`
                            `),s(),t(54,`
                            `),a(55,"div",14),t(56,`
                                `),m(57,"input",19),t(58,`
                                `),m(59,"label",20),t(60,`
                            `),s(),t(61,`
                        `),s(),t(62,`
                    `),s(),t(63,`
                    `),a(64,"div",0),t(65,`
                        `),a(66,"div",21),t(67,`
                            `),a(68,"button",22),t(69,`
                                `),m(70,"span",23),t(71,`
                                `),C(72,or,3,1),s(),t(73,`
                        `),s(),t(74,`
                    `),s(),t(75,`
                `),s(),t(76,`
            `),s(),t(77,`
        `),s(),t(78,`
    `),s(),t(79,`
`)}if(i&2){let e=d();r(5),u(e.maxSelectable!==void 0?5:-1),r(),p("hidden",e.maxSelectable===0),r(2),p("hidden",!e.getAsChannel(e.activeConversation)),r(6),ne("ngModel",e.mode),p("value","individual")("ngModelOptions",W(19,Ln)),r(4),ne("ngModel",e.mode),p("value","group")("ngModelOptions",W(20,Ln)),r(7),p("formGroup",e.form),r(2),p("hidden",e.mode!=="individual"),r(4),p("courseId",e.courseId)("label",y(32,17,"artemisApp.dialogs.addUsers.addUsersForm.addUserLabel")),r(3),u(e.selectedUsersControl!=null&&e.selectedUsersControl.invalid&&(e.selectedUsersControl!=null&&e.selectedUsersControl.dirty||e.selectedUsersControl!=null&&e.selectedUsersControl.touched)?34:-1),r(3),p("hidden",e.mode!=="group"),r(31),p("disabled",!e.isSubmitPossible),r(4),u(e.isLoading()?72:-1)}}var jn=(()=>{class i{fb=x(qe);formSubmitted=new R;courseId;maxSelectable=void 0;activeConversation;isLoading=w(!1);form;faSpinner=Bi;getAsChannel=M;mode="individual";get selectedUsersControl(){return this.form.get("selectedUsers")}get isSubmitPossible(){return!this.isLoading()&&(this.mode==="individual"&&!this.form.invalid||this.mode==="group"&&(this.form.value?.addAllStudents||this.form.value?.addAllTutors||this.form.value?.addAllInstructors))}ngOnInit(){this.initializeForm()}ngOnChanges(){this.initializeForm()}initializeForm(){if(this.form)return;let e=this.maxSelectable?[K.required,K.maxLength(this.maxSelectable)]:[K.required];this.form=this.fb.group({selectedUsers:[[],e],addAllStudents:[!1],addAllTutors:[!1],addAllInstructors:[!1]})}submitForm(){this.formSubmitted.emit(ve({},this.form.value))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-conversation-add-users-form"]],inputs:{courseId:"courseId",maxSelectable:"maxSelectable",activeConversation:"activeConversation",isLoading:[1,"isLoading"]},outputs:{formSubmitted:"formSubmitted"},features:[ce],decls:1,vars:1,consts:[[1,"row"],[1,"col-12"],[3,"hidden"],[1,"mode-switch",3,"hidden"],[1,"form-group"],["role","group",1,"btn-group"],["type","radio","id","individual","autocomplete","off",1,"btn-check",3,"ngModelChange","ngModel","value","ngModelOptions"],["for","individual","jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addIndividualUsers",1,"btn","btn-secondary"],["type","radio","id","group","autocomplete","off",1,"btn-check",3,"ngModelChange","ngModel","value","ngModelOptions"],["for","group","jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addWholeGroups",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],[1,"row","individual-select",3,"hidden"],["formControlName","selectedUsers",3,"courseId","label"],[1,"row","group-select",3,"hidden"],[1,"form-check","form-check-inline"],["type","checkbox","id","allStudents","formControlName","addAllStudents",1,"form-check-input"],["for","allStudents","jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addAllStudents",1,"form-check-label"],["type","checkbox","id","allTutors","formControlName","addAllTutors",1,"form-check-input"],["for","allTutors","jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addAllTutors",1,"form-check-label"],["type","checkbox","id","allInstructors","formControlName","addAllInstructors",1,"form-check-input"],["for","allInstructors","jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addAllInstructors",1,"form-check-label"],[1,"col-12","text-end"],["type","submit","id","submitButton",1,"btn","btn-primary",3,"disabled"],["jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.addUsersButton"],["jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.maxUsersNote",1,"alert","alert-info",3,"translateValues"],[1,"alert","alert-danger"],["jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.requiredError"],["jhiTranslate","artemisApp.dialogs.addUsers.addUsersForm.maxError",3,"translateValues"],["animation","spin",1,"ms-2",3,"icon"]],template:function(n,o){n&1&&C(0,rr,80,21),n&2&&u(o.activeConversation&&o.courseId?0:-1)},dependencies:[F,pe,ye,be,It,At,me,Se,Ke,Te,ze,We,Rn,O,V],encapsulation:2})}return i})();function sr(i,c){if(i&1&&(t(0,`
                    `),a(1,"span"),t(2),S(3,"artemisTranslate"),m(4,"jhi-channel-icon",5),t(5),s(),t(6,`
                `)),i&2){let e=c,n=d(2);r(2),E(`
                        `,y(3,4,"artemisApp.dialogs.addUsers.addUsersToChannel"),`
                        `),r(2),p("isPublic",e.isPublic)("isAnnouncementChannel",e.isAnnouncementChannel),r(),E(`
                        `,n.conversationService.getConversationName(e),`
                    `)}}function lr(i,c){i&1&&(t(0,`
                    `),m(1,"span",6),t(2,`
                `))}function cr(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div"),t(2,`
        `),a(3,"div",0),t(4,`
            `),a(5,"h4",1),t(6,`
                `),C(7,sr,7,6)(8,lr,3,0),s(),t(9,`
            `),a(10,"button",2),v("click",function(){f(e);let o=d();return g(o.dismiss())}),s(),t(11,`
        `),s(),t(12,`
        `),a(13,"div",3),t(14,`
            `),a(15,"jhi-conversation-add-users-form",4),v("formSubmitted",function(o){f(e);let l=d();return g(l.onFormSubmitted(o))}),s(),t(16,`
        `),s(),t(17,`
    `),s(),t(18,`
`)}if(i&2){let e,n=d();r(7),u((e=n.getAsChannel(n.activeConversation))?7:-1,e),r(),u(n.getAsGroupChat(n.activeConversation)?8:-1),r(7),p("isLoading",n.isLoading)("maxSelectable",n.maxSelectable)("courseId",n.course.id)("activeConversation",n.activeConversation)}}var Bn=(()=>{class i extends it{alertService=x(Z);channelService=x(we);conversationService=x(he);groupChatService=x(Fe);ngUnsubscribe=new P;course;activeConversation;isInitialized=!1;maxSelectable;isLoading=!1;initialize(){super.initialize(["course","activeConversation"]),this.isInitialized&&z(this.activeConversation)&&(this.maxSelectable=10-(this.activeConversation?.numberOfMembers??0))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onFormSubmitted({selectedUsers:e,addAllStudents:n,addAllTutors:o,addAllInstructors:l}){this.addUsers(e??[],n,o,l)}getAsChannel=M;getAsGroupChat=ue;addUsers(e,n,o,l){let h=e.map(_=>_.login);if(this.isLoading=!0,j(this.activeConversation))this.channelService.registerUsersToChannel(this.course.id,this.activeConversation.id,n,o,l,h).pipe(Wt(()=>this.close()),A(this.ngUnsubscribe)).subscribe({next:()=>{},error:_=>{L(this.alertService,_)},complete:()=>{this.isLoading=!1}});else if(z(this.activeConversation))this.groupChatService.addUsersToGroupChat(this.course.id,this.activeConversation.id,h).pipe(Wt(()=>this.close()),A(this.ngUnsubscribe)).subscribe({next:()=>{},error:_=>{L(this.alertService,_)},complete:()=>{this.isLoading=!1}});else throw new Error("Conversation type not supported")}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Re(i)))(o||i)}})();static \u0275cmp=I({type:i,selectors:[["jhi-conversation-add-users-dialog"]],inputs:{course:"course",activeConversation:"activeConversation"},features:[Le],decls:1,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formSubmitted","isLoading","maxSelectable","courseId","activeConversation"],[3,"isPublic","isAnnouncementChannel"],["jhiTranslate","artemisApp.dialogs.addUsers.addUsersToGroupChat"]],template:function(n,o){n&1&&C(0,cr,19,6),n&2&&u(o.isInitialized?0:-1)},dependencies:[rt,F,jn,V],encapsulation:2})}return i})();var dr=["jhi-conversation-member-row",""],mr=i=>({disabled:i});function pr(i,c){if(i&1&&(t(0,`
                `),m(1,"fa-icon",7),S(2,"artemisTranslate"),t(3,`
            `)),i&2){let e=d(2);r(),p("icon",e.faUserGear)("ngbTooltip",y(2,2,"artemisApp.dialogs.conversationDetail.memberTab.memberRow.channelModeratorTooltip"))}}function ur(i,c){if(i&1&&(t(0,`
                `),m(1,"fa-icon",8),t(2,`
            `)),i&2){let e=d(2);r(),p("icon",e.userIcon)("ngbTooltip",e.userTooltip)}}function hr(i,c){if(i&1&&(t(0,`
                `),a(1,"button",9),t(2,`
                    `),m(3,"fa-icon",10),t(4,`
                `),s(),t(5,`
            `)),i&2){let e=d(2);r(3),p("icon",e.faEllipsis)}}function Cr(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"button",11),v("click",function(o){f(e);let l=d(2);return g(l.openRemoveFromConversationDialog(o))}),s(),t(2,`
                `)}}function fr(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"button",12),v("click",function(o){f(e);let l=d(2);return g(l.openGrantChannelModeratorRoleDialog(o))}),s(),t(2,`
                `)}}function gr(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"button",13),v("click",function(o){f(e);let l=d(2);return g(l.openRevokeChannelModeratorRoleDialog(o))}),s(),t(2,`
                `)}}function vr(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",1),v("mouseleave",function(o){f(e);let l=bt(14);return o.stopPropagation(),g(l.close())}),t(2,`
        `),a(3,"span",2),t(4,`
            `),m(5,"jhi-profile-picture",3),t(6,`
            `),C(7,pr,4,4),a(8,"a",4),v("click",function(){f(e);let o=d();return g(o.userNameClicked())}),t(9),s(),t(10,`
            `),C(11,ur,3,2),s(),t(12,`
        `),a(13,"div",5,0),t(15,`
            `),C(16,hr,6,1),a(17,"div",6),t(18,`
                `),C(19,Cr,3,0)(20,fr,3,0)(21,gr,3,0),s(),t(22,`
        `),s(),t(23,`
    `),s(),t(24,`
`)}if(i&2){let e,n,o=d();r(5),p("authorId",o.userId)("authorName",o.userName)("imageUrl",o.userImageUrl),r(2),u(o.isChannel(o.activeConversation())&&((e=o.conversationMember())!=null&&e.isChannelModerator)?7:-1),r(),p("ngClass",U(11,mr,o.isCurrentUser)),r(),E(" ",o.userLabel," "),r(2),u((n=o.conversationMember())!=null&&n.isStudent?-1:11),r(5),u(o.canBeRemovedFromConversation||o.canBeGrantedChannelModeratorRole||o.canBeRevokedChannelModeratorRole?16:-1),r(3),u(o.canBeRemovedFromConversation?19:-1),r(),u(o.canBeGrantedChannelModeratorRole?20:-1),r(),u(o.canBeRevokedChannelModeratorRole?21:-1)}}var Gn=(()=>{class i{ngUnsubscribe=new P;activeConversation=w.required();course=w();changePerformed=k();conversationMember=w();onUserNameClicked=k();idOfLoggedInUser;isCurrentUser=!1;isCreator=!1;canBeRemovedFromConversation=!1;canBeGrantedChannelModeratorRole=!1;canBeRevokedChannelModeratorRole=!1;userLabel;userName;userId;userImageUrl;userIcon=pt;userTooltip="";faEllipsis=ki;faUserGear=Mi;isChannel=j;canGrantChannelModeratorRole=bn;canRevokeChannelModeratorRole=Sn;canRemoveUsersFromConversation=yn;accountService=x(qi);modalService=x(J);translateService=x(Et);channelService=x(we);groupChatService=x(Fe);alertService=x(Z);ngOnInit(){this.conversationMember()&&this.activeConversation()&&this.accountService.identity().then(e=>{if(this.idOfLoggedInUser=e.id,this.conversationMember()?.id===this.idOfLoggedInUser&&(this.isCurrentUser=!0),this.conversationMember()?.id===this.activeConversation()?.creator?.id&&(this.isCreator=!0),this.userImageUrl=this.conversationMember()?.imageUrl,this.userId=this.conversationMember()?.id,this.userName=this.conversationMember()?.name,this.userLabel=kt(this.conversationMember()),this.setUserAuthorityIconAndTooltip(),this.canBeRemovedFromConversation=!this.isCurrentUser&&this.canRemoveUsersFromConversation(this.activeConversation()),j(this.activeConversation())){let n=this.activeConversation();this.canBeRemovedFromConversation=this.canBeRemovedFromConversation&&!this.isCreator&&!n.isCourseWide,this.canBeGrantedChannelModeratorRole=this.canGrantChannelModeratorRole(n)&&!this.conversationMember()?.isChannelModerator,this.canBeRevokedChannelModeratorRole=this.canRevokeChannelModeratorRole(n)&&!this.isCreator&&!!this.conversationMember()?.isChannelModerator}})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}openGrantChannelModeratorRoleDialog(e){e.stopPropagation();let n=M(this.activeConversation());if(!n)return;let o={titleKey:"artemisApp.dialogs.grantChannelModerator.title",questionKey:"artemisApp.dialogs.grantChannelModerator.question",descriptionKey:"artemisApp.dialogs.grantChannelModerator.description",confirmButtonKey:"artemisApp.dialogs.grantChannelModerator.confirmButton"},l={channelName:n.name,userName:this.userLabel},h=()=>{let _=this.course?.()?.id,T=n?.id,D=this.conversationMember?.()?.login;if(!_||!T||!D)throw new Error("Required parameters are missing");return this.channelService.grantChannelModeratorRole(_,T,[D])};this.openConfirmationDialog(o,l,h)}openRevokeChannelModeratorRoleDialog(e){e.stopPropagation();let n=M(this.activeConversation());if(!n)return;let o={titleKey:"artemisApp.dialogs.revokeChannelModerator.title",questionKey:"artemisApp.dialogs.revokeChannelModerator.question",descriptionKey:"artemisApp.dialogs.revokeChannelModerator.description",confirmButtonKey:"artemisApp.dialogs.revokeChannelModerator.confirmButton"},l={channelName:n.name,userName:this.userLabel},h=()=>{let _=this.course?.()?.id,T=n?.id,D=this.conversationMember?.()?.login;if(!_||!T||!D)throw new Error("Required parameters are missing");return this.channelService.revokeChannelModeratorRole(_,T,[D])};this.openConfirmationDialog(o,l,h)}openRemoveFromChannelDialog(e){e.stopPropagation();let n=M(this.activeConversation());if(!n)return;let o;n.isPublic?o={titleKey:"artemisApp.dialogs.removeUserPublicChannel.title",questionKey:"artemisApp.dialogs.removeUserPublicChannel.question",descriptionKey:"artemisApp.dialogs.removeUserPublicChannel.warning",confirmButtonKey:"artemisApp.dialogs.removeUserPublicChannel.remove"}:o={titleKey:"artemisApp.dialogs.removeUserPrivateChannel.title",questionKey:"artemisApp.dialogs.removeUserPrivateChannel.question",descriptionKey:"artemisApp.dialogs.removeUserPrivateChannel.warning",confirmButtonKey:"artemisApp.dialogs.removeUserPrivateChannel.remove"};let l={userName:this.userLabel,channelName:n.name},h=()=>{let _=this.course?.()?.id,T=this.activeConversation()?.id,D=this.conversationMember?.()?.login;if(!_||!T||!D)throw new Error("Required parameters are missing");return this.channelService.deregisterUsersFromChannel(_,T,[D])};this.openConfirmationDialog(o,l,h)}openRemoveFromGroupChatDialog(e){if(e.stopPropagation(),!ue(this.activeConversation()))return;let o={titleKey:"artemisApp.dialogs.removeUserGroupChat.title",questionKey:"artemisApp.dialogs.removeUserGroupChat.question",descriptionKey:"artemisApp.dialogs.removeUserGroupChat.warning",confirmButtonKey:"artemisApp.dialogs.removeUserGroupChat.remove"},l={userName:this.userLabel},h=()=>{let _=this.course?.()?.id,T=this.activeConversation()?.id,D=this.conversationMember?.()?.login;if(!_||!T||!D)throw new Error("Required parameters are missing");return this.groupChatService.removeUsersFromGroupChat(_,T,[D])};this.openConfirmationDialog(o,l,h)}openConfirmationDialog(e,n,o){let l=this.modalService.open(Rt,Me);l.componentInstance.translationParameters=n,l.componentInstance.translationKeys=e,l.componentInstance.canBeUndone=!0,l.componentInstance.isDangerousAction=!0,l.componentInstance.initialize(),se(l.result).pipe(Y(()=>ee),A(this.ngUnsubscribe)).subscribe(()=>{o().pipe(A(this.ngUnsubscribe)).subscribe({next:()=>{this.changePerformed.emit()},error:h=>L(this.alertService,h)})})}openRemoveFromConversationDialog(e){if(j(this.activeConversation()))this.openRemoveFromChannelDialog(e);else if(z(this.activeConversation()))this.openRemoveFromGroupChatDialog(e);else throw new Error("Unsupported conversation type")}setUserAuthorityIconAndTooltip(){let e="artemisApp.metis.userAuthorityTooltips.";this.conversationMember()?.isInstructor?(this.userIcon=Li,this.userTooltip=this.translateService.instant(e+"instructor")):this.conversationMember()?.isEditor||this.conversationMember()?.isTeachingAssistant?(this.userIcon=yi,this.userTooltip=this.translateService.instant(e+"tutor")):(this.userIcon=pt,this.userTooltip=this.translateService.instant(e+"student"))}userNameClicked(){let e=this.conversationMember()?.id;e&&this.onUserNameClicked.emit(e)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["","jhi-conversation-member-row",""]],hostVars:2,hostBindings:function(n,o){n&2&&G("active",o.isCurrentUser)},inputs:{activeConversation:[1,"activeConversation"],course:[1,"course"],conversationMember:[1,"conversationMember"]},outputs:{changePerformed:"changePerformed",onUserNameClicked:"onUserNameClicked"},attrs:dr,decls:1,vars:1,consts:[["userDropdown","ngbDropdown"],[1,"d-flex","justify-content-between","align-items-center","conversation-member-row",3,"mouseleave"],[1,"d-inline-block"],["imageSizeInRem","2","fontSizeInRem","0.8","imageId","user-profile-picture","defaultPictureId","user-default-profile-picture",3,"authorId","authorName","imageUrl"],[1,"bs-body-color",3,"click","ngClass"],["ngbDropdown","",1,"d-inline-block"],["ngbDropdownMenu",""],[3,"icon","ngbTooltip"],[1,"ms-1","text-secondary",3,"icon","ngbTooltip"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-secondary","dropdown-toggle","interaction"],["size","xs",3,"icon"],["ngbDropdownItem","","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.memberRow.removeUser",1,"text-danger","remove-member",3,"click"],["ngbDropdownItem","","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.memberRow.grantModeratorRole",1,"text-danger","grant-moderator",3,"click"],["ngbDropdownItem","","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.memberRow.revokeModeratorRole",1,"text-danger","revoke-moderator",3,"click"]],template:function(n,o){n&1&&C(0,vr,25,13),n&2&&u(o.activeConversation()&&o.course()?0:-1)},dependencies:[Pe,O,_i,Xe,Qe,Ye,$e,He,F,V,X],styles:[".conversation-member-row[_ngcontent-%COMP%]{min-height:3rem}.conversation-member-row[_ngcontent-%COMP%]   .interaction[_ngcontent-%COMP%]{visibility:hidden}.conversation-member-row[_ngcontent-%COMP%]:hover   .interaction[_ngcontent-%COMP%]{visibility:visible}.conversation-member-row[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{content:none}.bs-body-color[_ngcontent-%COMP%]{color:var(--bs-body-color)}"]})}return i})();var xr=(i,c,e)=>({page:i,totalItems:c,itemsPerPage:e});function _r(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"button",16),v("click",function(o){f(e);let l=d(2);return g(l.openAddUsersDialog(o))}),t(2,`
                        `),m(3,"fa-icon",17),t(4),S(5,"artemisTranslate"),s(),t(6,`
                `)}if(i&2){let e=d(2);r(3),p("icon",e.faUserPlus),r(),E(`
                        `,y(5,2,"artemisApp.dialogs.conversationDetail.memberTab.addUsers"),`
                    `)}}function br(i,c){if(i&1&&(t(0,`
                            `),m(1,"option",18),t(2,`
                        `)),i&2){let e=d(2);r(),p("value",e.CHANNEL_MODERATOR_FILTER_OPTION)}}function Sr(i,c){i&1&&(t(0,`
                `),a(1,"div",19),t(2,`
                    `),m(3,"small",20),t(4,`
                `),s(),t(5,`
            `))}function yr(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"li",25),v("changePerformed",function(){f(e);let o=d(3);return g(o.onChangePerformed())})("onUserNameClicked",function(o){f(e);let l=d(3);return g(l.userNameClicked.emit(o))}),s(),t(2,`
                        `)}if(i&2){let e=c.$implicit,n=d(3);r(),p("id","user-"+e.id)("conversationMember",e)("activeConversation",n.activeConversation())("course",n.course())}}function Tr(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"div",3),t(2,`
                `),a(3,"div",19),t(4,`
                    `),a(5,"ul",21),t(6,`
                        `),q(7,yr,3,4,null,null,_t().trackIdentity,!0),s(),t(9,`
                `),s(),t(10,`
                `),a(11,"div",19),t(12,`
                    `),a(13,"div",22),t(14,`
                        `),m(15,"jhi-item-count",23),t(16,`
                    `),s(),t(17,`
                    `),a(18,"div",22),t(19,`
                        `),a(20,"ngb-pagination",24),oe("pageChange",function(o){f(e);let l=d(2);return $(l.page,o)||(l.page=o),g(o)}),v("pageChange",function(){f(e);let o=d(2);return g(o.transition())}),s(),t(21,`
                    `),s(),t(22,`
                `),s(),t(23,`
            `),s(),t(24,`
        `)}if(i&2){let e=d(2);r(7),H(e.members),r(8),p("params",yt(7,xr,e.page,e.totalItems,e.itemsPerPage)),r(5),p("collectionSize",e.totalItems),ne("page",e.page),p("pageSize",e.itemsPerPage)("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ir(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",0),t(2,`
        `),a(3,"div",1),t(4,`
            `),a(5,"div",2),t(6,`
                `),C(7,_r,7,4),s(),t(8,`
        `),s(),t(9,`
        `),a(10,"div",3),t(11,`
            `),a(12,"div",4),t(13,`
                `),a(14,"div",5),t(15,`
                    `),a(16,"span",6),t(17,`
                        `),m(18,"fa-icon",7),t(19,`
                    `),s(),t(20,`
                    `),a(21,"input",8),S(22,"artemisTranslate"),v("input",function(o){f(e);let l=d();return g(l.onSearchQueryInput(o))}),s(),t(23,`
                `),s(),t(24,`
            `),s(),t(25,`
            `),a(26,"div",9),t(27,`
                `),a(28,"div",5),t(29,`
                    `),m(30,"label",10),t(31,`
                    `),a(32,"select",11),v("ngModelChange",function(o){f(e);let l=d();return g(l.onFilterChange(o))}),t(33,`
                        `),m(34,"option",12),t(35,`
                        `),m(36,"option",13),t(37,`
                        `),m(38,"option",14),t(39,`
                        `),m(40,"option",15),t(41,`
                        `),C(42,br,3,1),s(),t(43,`
                `),s(),t(44,`
            `),s(),t(45,`
            `),C(46,Sr,6,0),s(),t(47,`
        `),C(48,Tr,25,11),s(),t(49,`
`)}if(i&2){let e=d();r(7),u(e.canAddUsersToConversation(e.activeConversation())?7:-1),r(11),p("icon",e.faMagnifyingGlass),r(3),p("placeholder",y(22,11,"artemisApp.dialogs.conversationDetail.memberTab.findMembers")),r(11),p("ngModel",e.selectedFilter),r(2),p("value",e.ALL),r(2),p("value",e.INSTRUCTOR_FILTER_OPTION),r(2),p("value",e.TUTOR_FILTER_OPTION),r(2),p("value",e.STUDENT_FILTER_OPTION),r(2),u(e.isChannel(e.activeConversation())?42:-1),r(4),u(e.isSearching?46:-1),r(2),u(e.members&&e.members.length>0?48:-1)}}var Kn=(()=>{class i{ngUnsubscribe=new P;search$=new P;course=w.required();activeConversationInput=w.required();activeConversation=ti(void 0);changesPerformed=k();userNameClicked=k();canAddUsersToConversation=_n;getAsChannel=M;isChannel=j;members=[];page=1;itemsPerPage=10;totalItems=0;isSearching=!0;searchTerm="";faMagnifyingGlass=Vi;faUserPlus=Ki;selectedFilter=Ue.ALL;ALL=Ue.ALL;INSTRUCTOR_FILTER_OPTION=Ue.INSTRUCTOR;TUTOR_FILTER_OPTION=Ue.TUTOR;STUDENT_FILTER_OPTION=Ue.STUDENT;CHANNEL_MODERATOR_FILTER_OPTION=Ue.CHANNEL_MODERATOR;conversationService=x(he);alertService=x(Z);modalService=x(J);cdr=x(Tt);trackIdentity(e,n){return n.id}openAddUsersDialog(e){e.stopPropagation();let n=this.modalService.open(Bn,Me);n.componentInstance.course=this.course(),n.componentInstance.activeConversation=this.activeConversation(),n.componentInstance.initialize(),se(n.result).pipe(Y(()=>ee),A(this.ngUnsubscribe)).subscribe(()=>{this.onChangePerformed()})}onChangePerformed(){this.search$.next({searchTerm:this.searchTerm,force:!0}),this.changesPerformed.emit()}ngOnInit(){this.search$.pipe(le(300),Q((n,o)=>o.force===!0?!1:n===o),at(()=>this.members=[]),te(n=>(n.searchTerm!==null&&n.searchTerm!==void 0?n.searchTerm:"").trim().toLowerCase()),at(n=>{this.isSearching=!0,this.searchTerm=n}),xt(()=>this.course()?.id&&this.activeConversation()?.id?this.conversationService.searchMembersOfConversation(this.course().id,this.activeConversation().id,this.searchTerm,this.page-1,this.itemsPerPage,Number(this.selectedFilter)):ee),A(this.ngUnsubscribe)).subscribe({next:n=>{this.isSearching=!1,this.onSuccess(n.body,n.headers)},error:n=>{this.isSearching=!1,L(this.alertService,n)}}),this.search$.next({searchTerm:"",force:!0});let e=this.activeConversationInput();e&&this.activeConversation.set(e)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onFilterChange(e){this.selectedFilter=e,this.page=1,this.search$.next({searchTerm:this.searchTerm,force:!0})}transition(){this.search$.next({searchTerm:this.searchTerm,force:!0})}onSearchQueryInput(e){this.page=1;let n=e.target.value?.trim().toLowerCase()??"";this.search$.next({searchTerm:n,force:!1})}onSuccess(e,n){this.totalItems=Number(n.get("X-Total-Count")),this.activeConversation&&this.activeConversation.update(o=>o&&gt(ve({},o),{numberOfMembers:this.totalItems})),this.members=e||[],this.cdr.detectChanges()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-conversation-members"]],inputs:{course:[1,"course"],activeConversationInput:[1,"activeConversationInput"]},outputs:{changesPerformed:"changesPerformed",userNameClicked:"userNameClicked"},decls:1,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-auto"],[1,"row","mt-2"],[1,"col-8"],[1,"input-group"],[1,"input-group-text"],["size","xs",3,"icon"],["id","searchQuery","type","text",1,"form-control",3,"input","placeholder"],[1,"col-4"],["for","searchFilter","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.filter",1,"input-group-text"],["id","searchFilter",1,"form-select","form-select",3,"ngModelChange","ngModel"],["id","allFilter","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.allFilter",3,"value"],["id","instructorFilter","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.instructorFilter",3,"value"],["id","tutorFilter","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.tutorFilter",3,"value"],["id","studentFilter","jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.studentFilter",3,"value"],["type","button",1,"btn","btn-outline-secondary","addUsers",3,"click"],[3,"icon"],["jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.channelModeratorFilter",3,"value"],[1,"col-12"],["jhiTranslate","artemisApp.dialogs.conversationDetail.memberTab.searching",1,"form-text","text-body-secondary","d-inline-block"],[1,"list-group"],[1,"d-flex","justify-content-center"],[3,"params"],[3,"pageChange","collectionSize","page","pageSize","maxSize","rotate","boundaryLinks"],["jhi-conversation-member-row","",1,"list-group-item",3,"changePerformed","onUserNameClicked","id","conversationMember","activeConversation","course"]],template:function(n,o){n&1&&C(0,Ir,50,13),n&2&&u(o.course()&&o.activeConversation()?0:-1)},dependencies:[O,F,pe,Ci,fi,hi,me,Ke,Gn,dn,xi,V],encapsulation:2})}return i})();var Ar=i=>({max:i});function Dr(i,c){if(i&1&&(t(0,`
                                            `),a(1,"div"),t(2),S(3,"artemisTranslate"),s(),t(4,`
                                        `)),i&2){let e=d(4);r(2),E(`
                                                `,y(3,1,e.translationKeys.requiredErrorKey),`
                                            `)}}function Er(i,c){if(i&1&&(t(0,`
                                            `),a(1,"div"),t(2),S(3,"artemisTranslate"),s(),t(4,`
                                        `)),i&2){let e=d(4);r(2),E(`
                                                `,mt(3,1,e.translationKeys.maxLengthErrorKey,U(4,Ar,e.maxPropertyLength)),`
                                            `)}}function Mr(i,c){if(i&1&&(t(0,`
                                            `),a(1,"div"),t(2),S(3,"artemisTranslate"),s(),t(4,`
                                        `)),i&2){let e=d(4);r(2),E(`
                                                `,y(3,1,e.translationKeys.regexErrorKey),`
                                            `)}}function wr(i,c){if(i&1&&(t(0,`
                                    `),a(1,"div",15),t(2,`
                                        `),C(3,Dr,5,3)(4,Er,5,6)(5,Mr,5,3),s(),t(6,`
                                `)),i&2){let e=d(3);r(3),u(!(e.control==null||e.control.errors==null)&&e.control.errors.required?3:-1),r(),u(!(e.control==null||e.control.errors==null)&&e.control.errors.maxlength?4:-1),r(),u(!(!(e.control==null||e.control.errors==null)&&e.control.errors.required)&&!(!(e.control==null||e.control.errors==null)&&e.control.errors.maxlength)&&(!(e.control==null||e.control.errors==null)&&e.control.errors.pattern)?5:-1)}}function Fr(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"form",7),v("ngSubmit",function(){f(e);let o=d(2);return g(o.submitForm())}),t(2,`
                            `),a(3,"div",8),t(4,`
                                `),a(5,"label",9),t(6),S(7,"artemisTranslate"),s(),t(8,`
                                `),m(9,"input",10),t(10,`
                                `),a(11,"small",11),t(12),S(13,"artemisTranslate"),s(),t(14,`
                                `),C(15,wr,7,3),s(),t(16,`
                            `),a(17,"div",5),t(18,`
                                `),a(19,"div",12),t(20,`
                                    `),a(21,"button",13),t(22,`
                                        `),m(23,"span",14),t(24,`
                                    `),s(),t(25,`
                                `),s(),t(26,`
                            `),s(),t(27,`
                        `),s(),t(28,`
                    `)}if(i&2){let e=d(2);r(),p("formGroup",e.form),r(4),p("for",e.propertyName),r(),ie(y(7,9,e.translationKeys.labelKey)),r(3),p("id",e.propertyName)("formControlName",e.propertyName),r(2),p("id",e.propertyName+"-help"),r(),ie(y(13,11,e.translationKeys.helpKey)),r(3),u(e.control!=null&&e.control.invalid&&(e.control!=null&&e.control.dirty||e.control!=null&&e.control.touched)?15:-1),r(6),p("disabled",!e.isSubmitPossible)}}function Pr(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",0),t(2,`
        `),a(3,"div",1),t(4,`
            `),a(5,"h4",2),t(6),S(7,"artemisTranslate"),s(),t(8,`
            `),a(9,"button",3),v("click",function(){f(e);let o=d();return g(o.clear())}),s(),t(10,`
        `),s(),t(11,`
        `),a(12,"div",4),t(13,`
            `),a(14,"form",5),t(15,`
                `),a(16,"div",6),t(17,`
                    `),C(18,Fr,29,13),s(),t(19,`
            `),s(),t(20,`
        `),s(),t(21,`
    `),s(),t(22,`
`)}if(i&2){let e=d();r(6),E(`
                `,y(7,2,e.translationKeys.titleKey),`
            `),r(12),u(e.form?18:-1)}}var zn=(()=>{class i extends it{fb=x(qe);propertyName;isRequired=!1;regexPattern;maxPropertyLength;initialValue;translationKeys;form;initialize(){super.initialize(["propertyName","maxPropertyLength","translationKeys"]),this.isInitialized&&this.initializeForm()}get isSubmitPossible(){return!this.form.invalid}get control(){return this.form.get(this.propertyName)}initializeForm(){if(this.form)return;let e=[];this.isRequired&&e.push(K.required),this.regexPattern&&e.push(K.pattern(this.regexPattern)),this.maxPropertyLength&&e.push(K.maxLength(this.maxPropertyLength)),this.form=this.fb.group({[this.propertyName]:[this.initialValue,e]})}clear(){this.dismiss()}submitForm(){this.close(this.control.value)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Re(i)))(o||i)}})();static \u0275cmp=I({type:i,selectors:[["jhi-generic-update-text-property-dialog"]],inputs:{propertyName:"propertyName",isRequired:"isRequired",regexPattern:"regexPattern",maxPropertyLength:"maxPropertyLength",initialValue:"initialValue",translationKeys:"translationKeys"},features:[Le],decls:1,vars:1,consts:[[1,"channels-overview"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close","dismiss",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12"],[3,"ngSubmit","formGroup"],[1,"form-group"],[3,"for"],["type","text",1,"form-control",3,"id","formControlName"],[1,"form-text","text-body-secondary",3,"id"],[1,"col-12","text-end"],["type","submit","id","submitButton",1,"btn","btn-primary",3,"disabled"],["jhiTranslate","entity.action.save"],[1,"alert","alert-danger"]],template:function(n,o){n&1&&C(0,Pr,23,4),n&2&&u(o.isInitialized?0:-1)},dependencies:[pe,ye,be,me,Se,Ge,Te,ze,We,F,V],encapsulation:2})}return i})();var Or=()=>({max:"30"}),kr=()=>({max:"250"});function Ur(i,c){i&1&&(t(0,`
                                `),m(1,"div",35),t(2,`
                            `))}function Vr(i,c){i&1&&(t(0,`
                                `),m(1,"div",36),t(2,`
                            `)),i&2&&(r(),p("translateValues",W(1,Or)))}function Rr(i,c){i&1&&(t(0,`
                                `),m(1,"div",37),t(2,`
                            `))}function Lr(i,c){if(i&1&&(t(0,`
                        `),a(1,"div",34),t(2,`
                            `),C(3,Ur,3,0)(4,Vr,3,2)(5,Rr,3,0),s(),t(6,`
                    `)),i&2){let e=d(2);r(3),u(!(e.nameControl==null||e.nameControl.errors==null)&&e.nameControl.errors.required?3:-1),r(),u(!(e.nameControl==null||e.nameControl.errors==null)&&e.nameControl.errors.maxlength?4:-1),r(),u(!(!(e.nameControl==null||e.nameControl.errors==null)&&e.nameControl.errors.required)&&!(!(e.nameControl==null||e.nameControl.errors==null)&&e.nameControl.errors.maxlength)&&(!(e.nameControl==null||e.nameControl.errors==null)&&e.nameControl.errors.pattern)?5:-1)}}function Nr(i,c){i&1&&(t(0,`
                                `),m(1,"div",38),t(2,`
                            `)),i&2&&(r(),p("translateValues",W(1,kr)))}function jr(i,c){if(i&1&&(t(0,`
                        `),a(1,"div",34),t(2,`
                            `),C(3,Nr,3,2),s(),t(4,`
                    `)),i&2){let e=d(2);r(3),u(!(e.descriptionControl==null||e.descriptionControl.errors==null)&&e.descriptionControl.errors.maxlength?3:-1)}}function Br(i,c){if(i&1){let e=b();t(0,`
            `),a(1,"form",2),v("ngSubmit",function(){f(e);let o=d();return g(o.submitForm())}),t(2,`
                `),t(3,`
                `),a(4,"div",3),t(5,`
                    `),m(6,"label",4),t(7,`
                    `),a(8,"div",5),t(9,`
                        `),a(10,"span",6),t(11,`
                            `),m(12,"jhi-channel-icon",7),t(13,`
                        `),s(),t(14,`
                        `),m(15,"input",8),S(16,"artemisTranslate"),t(17,`
                    `),s(),t(18,`
                    `),C(19,Lr,7,3),s(),t(20,`
                `),t(21,`
                `),a(22,"div",3),t(23,`
                    `),m(24,"label",9),t(25,`
                    `),m(26,"input",10),t(27,`
                    `),m(28,"small",11),t(29,`
                    `),C(30,jr,5,1),s(),t(31,`
                `),t(32,`
                `),a(33,"div"),t(34,`
                    `),a(35,"div",3),t(36,`
                        `),m(37,"label",12),t(38,`
                        `),a(39,"div",13),t(40,`
                            `),m(41,"input",14),t(42,`
                            `),m(43,"label",15),t(44,`
                            `),m(45,"input",16),t(46,`
                            `),m(47,"label",17),t(48,`
                        `),s(),t(49,`
                        `),m(50,"small",18),t(51,`
                    `),s(),t(52,`
                `),s(),t(53,`
                `),t(54,`
                `),a(55,"div"),t(56,`
                    `),a(57,"div",3),t(58,`
                        `),m(59,"label",19),t(60,`
                        `),a(61,"div",13),t(62,`
                            `),m(63,"input",20),t(64,`
                            `),m(65,"label",21),t(66,`
                            `),m(67,"input",22),t(68,`
                            `),m(69,"label",23),t(70,`
                        `),s(),t(71,`
                        `),m(72,"small",24),t(73,`
                    `),s(),t(74,`
                `),s(),t(75,`
                `),t(76,`
                `),a(77,"div"),t(78,`
                    `),a(79,"div",3),t(80,`
                        `),m(81,"label",25),t(82,`
                        `),a(83,"div",13),t(84,`
                            `),m(85,"input",26),t(86,`
                            `),m(87,"label",27),t(88,`
                            `),m(89,"input",28),t(90,`
                            `),m(91,"label",29),t(92,`
                        `),s(),t(93,`
                        `),m(94,"small",30),t(95,`
                    `),s(),t(96,`
                `),s(),t(97,`
                `),a(98,"div",0),t(99,`
                    `),a(100,"div",31),t(101,`
                        `),a(102,"button",32),t(103,`
                            `),m(104,"span",33),t(105,`
                        `),s(),t(106,`
                    `),s(),t(107,`
                `),s(),t(108,`
            `),s(),t(109,`
        `)}if(i&2){let e=d();r(),p("formGroup",e.form),r(11),p("isPublic",e.isPublicControl==null?null:e.isPublicControl.value)("isAnnouncementChannel",e.isisAnnouncementChannelControl==null?null:e.isisAnnouncementChannelControl.value),r(3),p("placeholder",y(16,13,"artemisApp.dialogs.createChannel.channelForm.nameInput.placeholder")),r(4),u(e.nameControl!=null&&e.nameControl.invalid&&(e.nameControl!=null&&e.nameControl.dirty||e.nameControl!=null&&e.nameControl.touched)?19:-1),r(11),u(e.descriptionControl!=null&&e.descriptionControl.invalid&&(e.descriptionControl!=null&&e.descriptionControl.dirty||e.descriptionControl!=null&&e.descriptionControl.touched)?30:-1),r(11),p("value",!0),r(4),p("value",!1),r(18),p("value",!0),r(4),p("value",!1),r(18),p("value",!0),r(4),p("value",!1),r(13),p("disabled",!e.isSubmitPossible)}}var Xt=new RegExp("^[a-z0-9-]{1}[a-z0-9-]{0,30}$"),Td=(()=>{class i{fb=x(qe);ngUnsubscribe=new P;formData={name:void 0,description:void 0,isPublic:void 0,isAnnouncementChannel:void 0,isCourseWideChannel:void 0};formSubmitted=new R;channelTypeChanged=new R;isAnnouncementChannelChanged=new R;isCourseWideChannelChanged=k();form;get nameControl(){return this.form.get("name")}get descriptionControl(){return this.form.get("description")}get isPublicControl(){return this.form.get("isPublic")}get isisAnnouncementChannelControl(){return this.form.get("isAnnouncementChannel")}get isCourseWideChannelControl(){return this.form.get("isCourseWideChannel")}get isSubmitPossible(){return!this.form.invalid}ngOnInit(){this.initializeForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngOnChanges(){this.initializeForm()}submitForm(){this.formSubmitted.emit(ve({},this.form.value))}initializeForm(){this.form||(this.form=this.fb.group({name:[void 0,[K.required,K.maxLength(20),K.pattern(Xt)]],description:[void 0,[K.maxLength(250)]],isPublic:[!0,[K.required]],isAnnouncementChannel:[!1,[K.required]],isCourseWideChannel:[!1,[K.required]]}),this.isPublicControl&&this.isPublicControl.valueChanges.pipe(A(this.ngUnsubscribe)).subscribe(e=>{this.channelTypeChanged.emit(e?"PUBLIC":"PRIVATE")}),this.isisAnnouncementChannelControl&&this.isisAnnouncementChannelControl.valueChanges.pipe(A(this.ngUnsubscribe)).subscribe(e=>{this.isAnnouncementChannelChanged.emit(e)}),this.isCourseWideChannelControl&&this.isCourseWideChannelControl.valueChanges.pipe(A(this.ngUnsubscribe)).subscribe(e=>{this.isCourseWideChannelChanged.emit(e)}))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-channel-form"]],outputs:{formSubmitted:"formSubmitted",channelTypeChanged:"channelTypeChanged",isAnnouncementChannelChanged:"isAnnouncementChannelChanged",isCourseWideChannelChanged:"isCourseWideChannelChanged"},features:[ce],decls:7,vars:1,consts:[[1,"row"],[1,"col-12"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.nameInput.label",1,"required"],[1,"input-group"],[1,"input-group-text"],[3,"isPublic","isAnnouncementChannel"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["for","description","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.descriptionInput.label"],["type","text","id","description","formControlName","description",1,"form-control"],["id","descriptionHelp","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.descriptionInput.descriptionHelp",1,"form-text","text-body-secondary"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isPublicInput.label",1,"d-block"],["role","group",1,"btn-group"],["formControlName","isPublic","type","radio","id","public","autocomplete","off","checked","",1,"btn-check",3,"value"],["for","public","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isPublicInput.public",1,"btn","btn-outline-secondary"],["formControlName","isPublic","type","radio","id","private","autocomplete","off",1,"btn-check",3,"value"],["for","private","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isPublicInput.private",1,"btn","btn-outline-secondary"],["id","isPublicHelp","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isPublicInput.explanation",1,"form-text","text-body-secondary","d-block"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isCourseWideChannelInput.label",1,"d-block"],["formControlName","isCourseWideChannel","type","radio","id","isCourseWideChannel","autocomplete","off","checked","",1,"btn-check",3,"value"],["for","isCourseWideChannel","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isCourseWideChannelInput.true",1,"btn","btn-outline-secondary"],["formControlName","isCourseWideChannel","type","radio","id","isNotCourseWideChannel","autocomplete","off",1,"btn-check",3,"value"],["for","isNotCourseWideChannel","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isCourseWideChannelInput.false",1,"btn","btn-outline-secondary"],["id","isCourseWideChannelHelp","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isCourseWideChannelInput.explanation",1,"form-text","text-body-secondary","d-block"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isAnnouncementChannelInput.label",1,"d-block"],["formControlName","isAnnouncementChannel","type","radio","id","isAnnouncementChannel","autocomplete","off","checked","",1,"btn-check",3,"value"],["for","isAnnouncementChannel","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isAnnouncementChannelInput.true",1,"btn","btn-outline-secondary"],["formControlName","isAnnouncementChannel","type","radio","id","isNotAnnouncementChannel","autocomplete","off",1,"btn-check",3,"value"],["for","isNotAnnouncementChannel","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isAnnouncementChannelInput.false",1,"btn","btn-outline-secondary"],["id","isAnnouncementChannelHelp","jhiTranslate","artemisApp.dialogs.createChannel.channelForm.isAnnouncementChannelInput.explanation",1,"form-text","text-body-secondary","d-block"],[1,"col-12","text-end"],["type","submit","id","submitButton",1,"btn","btn-primary",3,"disabled"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.createButton"],[1,"alert","alert-danger"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.nameInput.requiredValidationError"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.nameInput.maxLengthValidationError",3,"translateValues"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.nameInput.regexValidationError"],["jhiTranslate","artemisApp.dialogs.createChannel.channelForm.descriptionInput.maxLengthValidationError",3,"translateValues"]],template:function(n,o){n&1&&(a(0,"form",0),t(1,`
    `),a(2,"div",1),t(3,`
        `),C(4,Br,110,15),s(),t(5,`
`),s(),t(6,`
`)),n&2&&(r(4),u(o.form?4:-1))},dependencies:[pe,ye,be,At,me,Se,Ge,Te,ze,We,F,rt,V],encapsulation:2})}return i})();var jt=class extends cn{isChannelModerator;isRequestingUser};function Gr(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"button",8),v("click",function(o){f(e);let l=d(3);return g(l.openEditNameModal(o))}),s(),t(2,`
                        `)}}function Kr(i,c){if(i&1&&(t(0,`
                `),a(1,"div",4),t(2,`
                    `),a(3,"div",5),t(4,`
                        `),a(5,"textarea",6),S(6,"artemisTranslate"),t(7,"                        "),s(),t(8,`
                        `),m(9,"label",7),t(10,`
                        `),C(11,Gr,3,0),s(),t(12,`
                `),s(),t(13,`
            `)),i&2){let e,n=c,o=d(2);r(),G("interactive",!o.readOnlyMode),r(4),ke("value",(e=n.name)!==null&&e!==void 0?e:y(6,4,"artemisApp.dialogs.conversationDetail.infoTab.noName")),r(6),u(o.isChannel(n)&&o.canChangeChannelProperties(n)||o.isGroupChat(n)&&o.canChangeGroupChatProperties(n)?11:-1)}}function zr(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"button",12),v("click",function(o){f(e);let l=d(3);return g(l.openEditTopicModal(o))}),s(),t(2,`
                        `)}}function Wr(i,c){if(i&1&&(t(0,`
                `),a(1,"div",9),t(2,`
                    `),a(3,"div",5),t(4,`
                        `),a(5,"textarea",10),S(6,"artemisTranslate"),t(7,"                        "),s(),t(8,`
                        `),m(9,"label",11),t(10,`
                        `),C(11,zr,3,0),s(),t(12,`
                `),s(),t(13,`
            `)),i&2){let e,n=c,o=d(2);r(),G("interactive",!o.readOnlyMode),r(4),ke("value",(e=n.topic)!==null&&e!==void 0?e:y(6,4,"artemisApp.dialogs.conversationDetail.infoTab.noTopic")),r(6),u(o.canChangeChannelProperties(n)?11:-1)}}function qr(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"button",16),v("click",function(o){f(e);let l=d(3);return g(l.openDescriptionTopicModal(o))}),s(),t(2,`
                        `)}}function Hr(i,c){if(i&1&&(t(0,`
                `),a(1,"div",13),t(2,`
                    `),a(3,"div",5),t(4,`
                        `),a(5,"textarea",14),S(6,"artemisTranslate"),t(7,"                        "),s(),t(8,`
                        `),m(9,"label",15),t(10,`
                        `),C(11,qr,3,0),s(),t(12,`
                `),s(),t(13,`
            `)),i&2){let e,n=c,o=d(2);r(),G("interactive",!o.readOnlyMode),r(4),ke("value",(e=n.description)!==null&&e!==void 0?e:y(6,4,"artemisApp.dialogs.conversationDetail.infoTab.noDescription")),r(6),u(o.canChangeChannelProperties(n)?11:-1)}}function $r(i,c){if(i&1&&(t(0,`
                        `),a(1,"li"),t(2),S(3,"artemisTranslate"),s(),t(4,`
                    `)),i&2){let e=d(2);r(2),dt(`
                            `,y(3,2,"artemisApp.dialogs.conversationDetail.infoTab.createdBy"),`:
                            `,e.getCreator()?e.getUserLabel(e.getCreator()):"",`
                        `)}}function Yr(i,c){if(i&1&&(t(0,`
    `),a(1,"div",0),t(2,`
        `),a(3,"div",1),t(4,`
            `),t(5,`
            `),C(6,Kr,14,6)(7,Wr,14,6)(8,Hr,14,6),a(9,"div",2),t(10,`
                `),a(11,"div"),t(12,`
                    `),m(13,"h6",3),t(14,`
                `),s(),t(15,`
                `),a(16,"ul"),t(17,`
                    `),C(18,$r,5,4),a(19,"li"),t(20),S(21,"artemisTranslate"),S(22,"artemisDate"),s(),t(23,`
                `),s(),t(24,`
            `),s(),t(25,`
        `),s(),t(26,`
    `),s(),t(27,`
`)),i&2){let e,n,o,l,h=d();r(6),u((e=h.getAsChannelOrGroupChat(h.activeConversation()))?6:-1,e),r(),u((n=h.getAsChannel(h.activeConversation()))?7:-1,n),r(),u((o=h.getAsChannel(h.activeConversation()))?8:-1,o),r(10),u((l=h.activeConversation())!=null&&l.creator?18:-1),r(2),dt(`
                        `,y(21,6,"artemisApp.dialogs.conversationDetail.infoTab.createdOn"),`:
                        `,h.activeConversation().creationDate?y(22,8,h.activeConversation().creationDate):"",`
                    `)}}var Wn=(()=>{class i{ngUnsubscribe=new P;isGroupChat=z;isChannel=j;getAsChannel=M;getUserLabel=kt;canChangeChannelProperties=En;canChangeGroupChatProperties=Mn;getAsChannelOrGroupChat(e){return M(e)||ue(e)}getCreator(){return this.activeConversation()?.creator}activeConversation=w.required();course=w();changesPerformed=k();channelService=x(we);groupChatService=x(Fe);modalService=x(J);alertService=x(Z);readOnlyMode=!1;ngOnInit(){this.activeConversation()&&M(this.activeConversation())&&(this.readOnlyMode=!!M(this.activeConversation())?.isArchived)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onChangePerformed(){this.changesPerformed.emit()}openEditNameModal(e){let n=this.getAsChannelOrGroupChat(this.activeConversation());if(!n)return;let o={labelKey:"artemisApp.dialogs.createChannel.channelForm.nameInput.label",titleKey:"artemisApp.dialogs.createChannel.channelForm.nameInput.label",helpKey:"",maxLengthErrorKey:"artemisApp.dialogs.createChannel.channelForm.nameInput.maxLengthValidationError",requiredErrorKey:"artemisApp.dialogs.createChannel.channelForm.nameInput.requiredValidationError",regexErrorKey:"artemisApp.dialogs.createChannel.channelForm.nameInput.regexValidationError"};e.stopPropagation(),this.openEditPropertyDialog(n,"name",30,!0,Xt,o)}openEditTopicModal(e){let n=M(this.activeConversation());if(!n)return;let o={labelKey:"artemisApp.dialogs.editChannelTopic.topicInput.label",titleKey:"artemisApp.dialogs.editChannelTopic.topicInput.topicHelp",helpKey:"artemisApp.dialogs.editChannelTopic.topicInput.topicHelp",maxLengthErrorKey:"artemisApp.dialogs.editChannelTopic.topicInput.maxLengthValidationError",requiredErrorKey:"",regexErrorKey:""};e.stopPropagation(),this.openEditPropertyDialog(n,"topic",250,!1,void 0,o)}openDescriptionTopicModal(e){let n=M(this.activeConversation());if(!n)return;let o={labelKey:"artemisApp.dialogs.createChannel.channelForm.descriptionInput.label",titleKey:"artemisApp.dialogs.createChannel.channelForm.descriptionInput.label",helpKey:"artemisApp.dialogs.createChannel.channelForm.descriptionInput.descriptionHelp",maxLengthErrorKey:"artemisApp.dialogs.createChannel.channelForm.descriptionInput.maxLengthValidationError",requiredErrorKey:"",regexErrorKey:""};e.stopPropagation(),this.openEditPropertyDialog(n,"description",250,!1,void 0,o)}openEditPropertyDialog(e,n,o,l,h,_){let T=this.modalService.open(zn,Me);T.componentInstance.propertyName=n,T.componentInstance.maxPropertyLength=o,T.componentInstance.translationKeys=_,T.componentInstance.isRequired=l,T.componentInstance.regexPattern=h;let D=Hi(e,n);D&&typeof D=="string"&&D.length>0&&(T.componentInstance.initialValue=D),T.componentInstance.initialize(),se(T.result).pipe(Y(()=>ee),A(this.ngUnsubscribe)).subscribe(B=>{let ge=null;B&&B.trim().length>0?ge=B.trim():ge="",j(e)?this.updateChannel(e,n,ge):this.updateGroupChat(e,n,ge)})}updateGroupChat(e,n,o){let l=this.course()?.id;if(!l)return;let h=new en;h[n]=o,this.groupChatService.update(l,e.id,h).pipe(te(_=>_.body),A(this.ngUnsubscribe)).subscribe({next:_=>{e[n]=_[n],this.onChangePerformed()},error:_=>L(this.alertService,_)})}updateChannel(e,n,o){let l=this.course()?.id;if(!l)return;let h=new Zi;h[n]=o,this.channelService.update(l,e.id,h).pipe(te(_=>_.body),A(this.ngUnsubscribe)).subscribe({next:_=>{e[n]=_[n],this.onChangePerformed()},error:_=>{_.error?.skipAlert&&L(this.alertService,_)}})}ConversationDTO=Xi;ConversationUserDTO=jt;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-conversation-info"]],inputs:{activeConversation:[1,"activeConversation"],course:[1,"course"]},outputs:{changesPerformed:"changesPerformed"},decls:1,vars:1,consts:[[1,"container-fluid","conversation-info"],[1,"row","info-container"],["id","moreinfo-section",1,"col-12","info-section"],["jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.moreInfo"],["id","name-section",1,"col-12","info-section"],[1,"form-floating"],["readonly","","disabled","","placeholder","dummyPlaceholder","id","name",1,"form-control",3,"value"],["for","name","jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.name"],["jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.editName",1,"action-button","right","btn","btn-link","btn-sm",3,"click"],["id","topic-section",1,"col-12","info-section"],["readonly","","disabled","","placeholder","dummyPlaceholder","id","topic",1,"form-control","large",3,"value"],["for","topic","jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.topic"],["jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.editTopic",1,"action-button","right","btn","btn-link","btn-sm",3,"click"],["id","description-section",1,"col-12","info-section"],["readonly","","disabled","","placeholder","dummyPlaceholder","id","description",1,"form-control","large",3,"value"],["for","description","jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.description"],["jhiTranslate","artemisApp.dialogs.conversationDetail.infoTab.editDescription",1,"action-button","right","btn","btn-link","btn-sm",3,"click"]],template:function(n,o){n&1&&C(0,Yr,28,10),n&2&&u(o.activeConversation()&&o.course()?0:-1)},dependencies:[F,Ut,V],styles:[".conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{padding:.5rem}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin:.25rem;text-decoration:none}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .action-button.right[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .wide-button[_ngcontent-%COMP%]{width:50%}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:5rem;resize:none}.conversation-info[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   textarea.large[_ngcontent-%COMP%]{min-height:8rem}"]})}return i})();function Qr(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"button",3),v("click",function(o){f(e);let l=d(3);return g(l.leaveConversation(o))}),s(),t(2,`
                    `)}}function Xr(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",2),t(2,`
                            `),a(3,"button",4),v("click",function(){f(e);let o=d(4);return g(o.toggleChannelPrivacy())}),t(4,`
                                `),m(5,"fa-icon",5),t(6,`
                                `),m(7,"span",6),t(8,`
                            `),s(),t(9,`
                        `),s(),t(10,`
                    `)}if(i&2){let e=d(),n=d(3);r(5),p("icon",e.isPublic?n.faLock:n.faHashtag),r(2),ke("jhiTranslate",e.isPublic?"artemisApp.dialogs.conversationSettings.actions.privateChannel":"artemisApp.dialogs.conversationSettings.actions.publicChannel")}}function Jr(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",2),t(2,`
                            `),a(3,"button",7),v("click",function(o){f(e);let l=d(4);return g(l.toggleChannelArchivalState(o))}),t(4,`
                                `),m(5,"fa-icon",5),t(6,`
                                `),m(7,"span",6),t(8,`
                            `),s(),t(9,`
                        `),s(),t(10,`
                    `)}if(i&2){let e=d(),n=d(3);r(5),p("icon",e.isArchived?n.faBoxOpen:n.faBoxArchive),r(2),ke("jhiTranslate",e.isArchived?"artemisApp.dialogs.conversationSettings.actions.unarchiveChannel":"artemisApp.dialogs.conversationSettings.actions.archiveChannel")}}function Zr(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",2),t(2,`
                            `),a(3,"button",8),v("delete",function(){f(e);let o=d(4);return g(o.deleteChannel())}),t(4,`
                                `),m(5,"fa-icon",9),t(6,`
                                `),m(7,"span",10),t(8,`
                            `),s(),t(9,`
                        `),s(),t(10,`
                    `)}if(i&2){let e=d(),n=d(3);r(3),p("id","delete-"+e.id)("renderButtonStyle",!1)("renderButtonText",!1)("entityTitle",e.name||"")("dialogError",n.dialogError$),r(2),p("icon",n.faTrash)}}function ea(i,c){if(i&1&&(t(0,`
                    `),C(1,Xr,11,2)(2,Jr,11,2)(3,Zr,11,6)),i&2){let e=d(3);r(),u(e.canChangeChannelPrivacyState?1:-1),r(),u(e.canChangeChannelArchivalState?2:-1),r(),u(e.canDeleteChannel?3:-1)}}function ta(i,c){if(i&1&&(t(0,`
            `),a(1,"div",1),t(2,`
                `),a(3,"div",2),t(4,`
                    `),C(5,Qr,3,0),s(),t(6,`
                `),C(7,ea,4,3),s(),t(8,`
        `)),i&2){let e,n=d(2);r(5),u(n.canLeaveConversation?5:-1),r(2),u((e=n.conversationAsChannel)?7:-1,e)}}function ia(i,c){i&1&&(t(0,`
            `),m(1,"div",11),t(2,`
        `))}function na(i,c){if(i&1&&(t(0,`
    `),a(1,"div",0),t(2,`
        `),C(3,ta,9,2)(4,ia,3,0),s(),t(5,`
`)),i&2){let e=d();r(3),u(e.canLeaveConversation||e.canChangeChannelArchivalState||e.canDeleteChannel?3:4)}}var qn=(()=>{class i{ngUnsubscribe=new P;activeConversation=w.required();course=w.required();channelArchivalChange=k();channelPrivacyChange=k();channelDeleted=k();conversationLeave=k();dialogErrorSource=new P;dialogError$=this.dialogErrorSource.asObservable();faTrash=wi;faBoxArchive=Je;faBoxOpen=wt;faHashtag=Ie;faLock=et;conversationAsChannel;canLeaveConversation;canChangeChannelArchivalState;canChangeChannelPrivacyState;canDeleteChannel;modalService=x(J);channelService=x(we);groupChatService=x(Fe);alertService=x(Z);ngOnInit(){let e=this.activeConversation();e&&(this.canLeaveConversation=Tn(e),this.conversationAsChannel=M(e),this.canChangeChannelArchivalState=this.conversationAsChannel?In(this.conversationAsChannel):!1,this.canChangeChannelPrivacyState=this.conversationAsChannel?An(this.conversationAsChannel):!1,this.canDeleteChannel=this.conversationAsChannel?Dn(this.course(),this.conversationAsChannel):!1)}leaveConversation(e){if(e.stopPropagation(),z(this.activeConversation())){this.groupChatService.removeUsersFromGroupChat(this.course().id,this.activeConversation().id).pipe(A(this.ngUnsubscribe)).subscribe(()=>{this.conversationLeave.emit()});return}else if(j(this.activeConversation())){this.channelService.deregisterUsersFromChannel(this.course().id,this.activeConversation().id).pipe(A(this.ngUnsubscribe)).subscribe(()=>{this.conversationLeave.emit()});return}throw new Error("The conversation type is not supported")}toggleChannelArchivalState(e){let n=M(this.activeConversation());n&&(n.isArchived?this.openUnArchivalModal(n):this.openArchivalModal(n))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}openArchivalModal(e){let n={titleKey:"artemisApp.dialogs.archiveChannel.title",questionKey:"artemisApp.dialogs.archiveChannel.question",descriptionKey:"artemisApp.dialogs.archiveChannel.description",confirmButtonKey:"artemisApp.dialogs.archiveChannel.confirmButton"},o=this.createModal(e,n);this.openModal(o,()=>{this.channelService.archive(this.course().id,e.id).subscribe({next:()=>{this.channelArchivalChange.emit()},error:l=>L(this.alertService,l)})})}openUnArchivalModal(e){let n={titleKey:"artemisApp.dialogs.unArchiveChannel.title",questionKey:"artemisApp.dialogs.unArchiveChannel.question",descriptionKey:"artemisApp.dialogs.unArchiveChannel.description",confirmButtonKey:"artemisApp.dialogs.unArchiveChannel.confirmButton"},o=this.createModal(e,n);this.openModal(o,()=>{this.channelService.unarchive(this.course().id,e.id).pipe(A(this.ngUnsubscribe)).subscribe({next:()=>{this.channelArchivalChange.emit()},error:l=>L(this.alertService,l)})})}openModal(e,n){se(e.result).pipe(Y(()=>ee),A(this.ngUnsubscribe)).subscribe(n)}createModal(e,n){let o=this.modalService.open(Rt,Me);return o.componentInstance.translationParameters={channelName:e.name},o.componentInstance.translationKeys=n,o.componentInstance.canBeUndone=!0,o.componentInstance.initialize(),o}deleteChannel(){let e=M(this.activeConversation());e&&this.channelService.delete(this.course().id,e.id).pipe(A(this.ngUnsubscribe)).subscribe({next:()=>{this.dialogErrorSource.next(""),this.channelDeleted.emit()},error:n=>this.dialogErrorSource.next(n.message)})}openPublicChannelModal(e){let n={titleKey:"artemisApp.dialogs.publicChannel.title",questionKey:"artemisApp.dialogs.publicChannel.question",descriptionKey:"artemisApp.dialogs.publicChannel.description",confirmButtonKey:"artemisApp.dialogs.publicChannel.confirmButton"};this.openPrivacyChangeModal(e,n)}openPrivateChannelModal(e){let n={titleKey:"artemisApp.dialogs.privateChannel.title",questionKey:"artemisApp.dialogs.privateChannel.question",descriptionKey:"artemisApp.dialogs.privateChannel.description",confirmButtonKey:"artemisApp.dialogs.privateChannel.confirmButton"};this.openPrivacyChangeModal(e,n)}openPrivacyChangeModal(e,n){let o=this.createModal(e,n);this.openModal(o,()=>{this.channelService.toggleChannelPrivacy(this.course().id,e.id).pipe(A(this.ngUnsubscribe)).subscribe({next:l=>{let h=l.body;h&&(this.conversationAsChannel=h,this.channelPrivacyChange.emit())},error:l=>L(this.alertService,l)})})}toggleChannelPrivacy(){let e=M(this.activeConversation());e&&(e.isPublic?this.openPrivateChannelModal(e):this.openPublicChannelModal(e))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-conversation-settings"]],inputs:{activeConversation:[1,"activeConversation"],course:[1,"course"]},outputs:{channelArchivalChange:"channelArchivalChange",channelPrivacyChange:"channelPrivacyChange",channelDeleted:"channelDeleted",conversationLeave:"conversationLeave"},decls:1,vars:1,consts:[[1,"container-fluid","conversation-settings"],[1,"row","settings-container"],[1,"col-12","settings-section","text-center"],["type","button","jhiTranslate","artemisApp.dialogs.conversationSettings.actions.leave",1,"btn","btn-danger","leave-conversation",3,"click"],["type","button",1,"btn","btn-danger","privacy-toggle",3,"click"],[1,"me-2",3,"icon"],[3,"jhiTranslate"],["type","button",1,"btn","btn-danger","archive-toggle",3,"click"],["jhiDeleteButton","","deleteQuestion","artemisApp.dialogs.deleteChannel.question","deleteConfirmationText","artemisApp.dialogs.deleteChannel.confirm",1,"btn","btn-danger","delete",3,"delete","id","renderButtonStyle","renderButtonText","entityTitle","dialogError"],[3,"icon"],["jhiTranslate","artemisApp.dialogs.conversationSettings.actions.deleteChannel",1,"ms-2"],["jhiTranslate","artemisApp.dialogs.conversationSettings.settingsUnavailable",1,"col-12","settings-section","text-center"]],template:function(n,o){n&1&&C(0,na,6,1),n&2&&u(o.activeConversation()&&o.course()?0:-1)},dependencies:[F,ln,O],styles:[".conversation-settings[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]{padding:.5rem}.conversation-settings[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}"]})}return i})();var oa=(i,c)=>["/courses",i,"tutorial-groups",c],ra=i=>({title:i});function aa(i,c){if(i&1&&(t(0,`
                        `),m(1,"jhi-channel-icon",8),t(2,`
                    `)),i&2){let e=c;r(),p("isPublic",e.isPublic)("isAnnouncementChannel",e.isAnnouncementChannel)}}function sa(i,c){if(i&1&&(t(0,`
                        `),m(1,"fa-icon",9),t(2,`
                    `)),i&2){let e=d(2);r(),p("icon",e.faPeopleGroup)}}function la(i,c){if(i&1&&(t(0,`
                        `),m(1,"jhi-profile-picture",10),t(2,`
                    `)),i&2){let e=d(2);r(),p("authorId",e.otherUser==null?null:e.otherUser.id)("authorName",e.otherUser==null?null:e.otherUser.name)("imageUrl",e.otherUser==null?null:e.otherUser.imageUrl)}}function ca(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"a",11),v("click",function(){f(e);let o=d(3);return g(o.clear())}),s(),t(2,`
                    `)}if(i&2){let e=d(),n=d(2);r(),p("routerLink",St(2,oa,n.course.id,e.tutorialGroupId))("translateValues",U(5,ra,e.tutorialGroupTitle))}}function da(i,c){if(i&1&&(t(0,`
                    `),C(1,ca,3,7)),i&2){let e=c;r(),u(e.tutorialGroupId&&e.tutorialGroupTitle?1:-1)}}function ma(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"li",12),t(2,`
                        `),a(3,"a",13),v("click",function(){f(e);let o=d(2);return g(o.selectedTab=o.Tabs.MEMBERS)}),s(),t(4,`
                    `),s(),t(5,`
                    `),a(6,"li",14),t(7,`
                        `),a(8,"a",15),v("click",function(){f(e);let o=d(2);return g(o.selectedTab=o.Tabs.SETTINGS)}),s(),t(9,`
                    `),s(),t(10,`
                `)}if(i&2){let e=d(2);r(3),G("active",e.selectedTab===e.Tabs.MEMBERS),r(5),G("active",e.selectedTab===e.Tabs.SETTINGS)}}function pa(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"jhi-conversation-members",16),v("changesPerformed",function(){f(e);let o=d(2);return g(o.changesWerePerformed=!0)})("userNameClicked",function(o){f(e);let l=d(2);return g(l.onUserNameClicked(o))}),s(),t(2,`
                `)}if(i&2){let e=d(2);r(),p("course",e.course)("activeConversationInput",e.activeConversation)}}function ua(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"jhi-conversation-info",17),v("changesPerformed",function(){f(e);let o=d(2);return g(o.changesWerePerformed=!0)}),s(),t(2,`
                `)}if(i&2){let e=d(2);r(),p("activeConversation",e.activeConversation)("course",e.course)}}function ha(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"jhi-conversation-settings",18),v("channelArchivalChange",function(){f(e);let o=d(2);return g(o.onArchivalChange())})("channelPrivacyChange",function(){f(e);let o=d(2);return g(o.onPrivacyChange())})("channelDeleted",function(){f(e);let o=d(2);return g(o.onChannelDeleted())})("conversationLeave",function(){f(e);let o=d(2);return g(o.onConversationLeave())}),s(),t(2,`
                `)}if(i&2){let e=d(2);r(),p("activeConversation",e.activeConversation)("course",e.course)}}function Ca(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",0),t(2,`
        `),a(3,"div",1),t(4,`
            `),a(5,"h4",2),t(6,`
                `),a(7,"span"),t(8,`
                    `),C(9,aa,3,2)(10,sa,3,1)(11,la,3,3),t(12),s(),t(13,`
                `),C(14,da,2,1),s(),t(15,`
            `),a(16,"button",3),v("click",function(){f(e);let o=d();return g(o.clear())}),s(),t(17,`
        `),s(),t(18,`
        `),a(19,"div"),t(20,`
            `),a(21,"ul",4),t(22,`
                `),a(23,"li",5),t(24,`
                    `),a(25,"a",6),v("click",function(){f(e);let o=d();return g(o.selectedTab=o.Tabs.INFO)}),s(),t(26,`
                `),s(),t(27,`
                `),C(28,ma,11,4),s(),t(29,`
        `),s(),t(30,`
        `),a(31,"div",7),t(32,`
            `),C(33,pa,3,2)(34,ua,3,2)(35,ha,3,2),t(36,`
        `),s(),t(37,`
    `),s(),t(38,`
`)}if(i&2){let e,n,o,l=d();r(9),u((e=l.getAsChannel(l.activeConversation))?9:l.getAsGroupChat(l.activeConversation)?10:11,e),r(3),E(`
                    `,l.conversationService.getConversationName(l.activeConversation,!0),`
                `),r(2),u((n=l.getAsChannel(l.activeConversation))?14:-1,n),r(11),G("active",l.selectedTab===l.Tabs.INFO),r(3),u(l.isOneToOneChat?-1:28),r(5),u((o=l.selectedTab)===l.Tabs.MEMBERS?33:o===l.Tabs.INFO?34:o===l.Tabs.SETTINGS?35:-1)}}var ht=function(i){return i.MEMBERS="members",i.INFO="info",i.SETTINGS="settings",i}(ht||{}),Hn=(()=>{class i extends it{conversationService=x(he);activeConversation;course;selectedTab=ht.MEMBERS;isInitialized=!1;isOneToOneChat=!1;otherUser;faPeopleGroup=Ze;userNameClicked=k();initialize(){if(super.initialize(["course","activeConversation","selectedTab"]),this.activeConversation){let e=tn(this.activeConversation);e&&(this.isOneToOneChat=!0,this.otherUser=e.members?.find(n=>!n.isRequestingUser))}}getAsChannel=M;getAsGroupChat=ue;changesWerePerformed=!1;Tabs=ht;clear(){this.changesWerePerformed?this.close():this.dismiss()}onConversationLeave(){this.markAsChangedAndClose()}onArchivalChange(){this.markAsChangedAndClose()}onPrivacyChange(){this.markAsChangedAndClose()}onChannelDeleted(){this.markAsChangedAndClose()}markAsChangedAndClose(){this.changesWerePerformed=!0,this.clear()}onUserNameClicked(e){this.userNameClicked.emit(e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Re(i)))(o||i)}})();static \u0275cmp=I({type:i,selectors:[["jhi-conversation-detail-dialog"]],inputs:{activeConversation:"activeConversation",course:"course",selectedTab:"selectedTab"},outputs:{userNameClicked:"userNameClicked"},features:[Le],decls:1,vars:1,consts:[[1,"conversation-detail-dialog"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"nav","nav-tabs"],[1,"nav-item"],["role","button","jhiTranslate","artemisApp.dialogs.conversationDetail.tabs.info",1,"nav-link","info-tab",3,"click"],[1,"modal-body"],[3,"isPublic","isAnnouncementChannel"],["size","xs",3,"icon"],["imageSizeInRem","2","fontSizeInRem","0.8","imageId","user-profile-picture","defaultPictureId","user-default-profile-picture",3,"authorId","authorName","imageUrl"],["role","button","jhiTranslate","artemisApp.entities.tutorialGroup.channelReverse",1,"btn","btn-info","btn-sm","ms-2",3,"click","routerLink","translateValues"],[1,"nav-item","members-tab"],["role","button","jhiTranslate","artemisApp.dialogs.conversationDetail.tabs.members",1,"nav-link",3,"click"],[1,"nav-item","settings-tab"],["role","button","jhiTranslate","artemisApp.dialogs.conversationDetail.tabs.settings",1,"nav-link",3,"click"],[3,"changesPerformed","userNameClicked","course","activeConversationInput"],[3,"changesPerformed","activeConversation","course"],[3,"channelArchivalChange","channelPrivacyChange","channelDeleted","conversationLeave","activeConversation","course"]],template:function(n,o){n&1&&C(0,Ca,39,7),n&2&&u(o.isInitialized?0:-1)},dependencies:[rt,O,F,de,Kn,Wn,qn,Pe],encapsulation:2})}return i})();function fa(i,c){if(i&1&&(t(0,`
                `),a(1,"a",9),t(2),S(3,"artemisTranslate"),s(),t(4,`
            `)),i&2){let e=d();r(),p("routerLink",e.channelSubTypeReferenceRouterLink),r(),E(`
                    `,y(3,2,e.channelSubTypeReferenceTranslationKey),`
                `)}}function ga(i,c){if(i&1){let e=b();t(0,`
                `),a(1,"button",10),v("click",function(o){f(e);let l=d();return g(l.openConversationDetailDialog(o))}),t(2,`
                    `),m(3,"fa-icon",7),t(4),S(5,"artemisTranslate"),s(),t(6,`
            `)}if(i&2){let e=d();r(3),p("icon",e.faGear),r(),E(`
                    `,y(5,2,"artemisApp.conversationsLayout.conversationSelectionSideBar.sideBarSection.settings"),`
                `)}}var $n=(()=>{class i{conversationService=x(he);metisService=x(rn);notificationService=x(an);alertService=x(Z);modalService=x(J);ngUnsubscribe=new P;favorite$=new P;hide$=new P;mute$=new P;course;conversation;onUpdateSidebar=new R;conversationAsChannel;channelSubTypeReferenceTranslationKey;channelSubTypeReferenceRouterLink;faEllipsisVertical=Oi;faHeartSolid=Di;faHeartRegular=mn;faBoxArchive=Je;faBoxOpen=wt;faVolumeXmark=Ni;faVolumeUp=Ei;faGear=Pi;getAsGroupChat=ue;isOneToOneChat=fe;ngOnInit(){this.course=this.metisService.getCourse(),this.updateConversationIsFavorite(),this.updateConversationIsHidden(),this.updateConversationIsMuted(),this.updateConversationShouldNotifyRecipient(),this.conversationAsChannel=M(this.conversation),this.channelSubTypeReferenceTranslationKey=nn(this.conversationAsChannel?.subType),this.channelSubTypeReferenceRouterLink=this.metisService.getLinkForChannelSubType(this.conversationAsChannel)}onArchiveClicked(e){e.stopPropagation(),!(!this.course.id||!this.conversation.id)&&(!this.conversation.isHidden&&this.conversation.isFavorite&&this.conversationService.updateIsFavorite(this.course.id,this.conversation.id,!1).subscribe({next:()=>{this.conversation.isFavorite=!1},error:n=>L(this.alertService,n)}),this.hide$.next(!this.conversation.isHidden))}onFavoriteClicked(e){e.stopPropagation(),!(!this.course.id||!this.conversation.id)&&(this.conversation.isHidden&&!this.conversation.isFavorite&&this.conversationService.updateIsHidden(this.course.id,this.conversation.id,!1).subscribe({next:()=>{this.conversation.isHidden=!1},error:n=>L(this.alertService,n)}),this.favorite$.next(!this.conversation.isFavorite))}onMuteClicked(e){e.stopPropagation(),this.mute$.next(!this.conversation.isMuted)}openConversationDetailDialog(e){e.stopPropagation();let n=this.modalService.open(Hn,on);n.componentInstance.course=this.course,n.componentInstance.activeConversation=this.conversation,n.componentInstance.selectedTab=ht.SETTINGS,n.componentInstance.initialize(),se(n.result).pipe(Y(()=>ee),A(this.ngUnsubscribe)).subscribe(()=>{this.onUpdateSidebar.emit()})}updateConversationIsFavorite(){this.favorite$.pipe(le(100),Q(),A(this.ngUnsubscribe)).subscribe(e=>{!this.course.id||!this.conversation.id||this.conversationService.updateIsFavorite(this.course.id,this.conversation.id,e).subscribe({next:()=>{this.conversation.isFavorite=e,this.onUpdateSidebar.emit()},error:n=>L(this.alertService,n)})})}updateConversationIsHidden(){this.hide$.pipe(le(100),Q(),A(this.ngUnsubscribe)).subscribe(e=>{!this.course.id||!this.conversation.id||this.conversationService.updateIsHidden(this.course.id,this.conversation.id,e).subscribe({next:()=>{this.conversation.isHidden=e,this.onUpdateSidebar.emit()},error:n=>L(this.alertService,n)})})}updateConversationIsMuted(){this.mute$.pipe(le(100),Q(),A(this.ngUnsubscribe)).subscribe(e=>{!this.course.id||!this.conversation.id||this.conversationService.updateIsMuted(this.course.id,this.conversation.id,e).subscribe({next:()=>{this.conversation.isMuted=e,this.onUpdateSidebar.emit()},error:n=>L(this.alertService,n)})})}updateConversationShouldNotifyRecipient(){this.onUpdateSidebar.pipe(Zt(this.onUpdateSidebar),A(this.ngUnsubscribe)).subscribe(()=>{this.conversation.id&&(Ji(this.conversation)?this.notificationService.unmuteNotificationsForConversation(this.conversation.id):this.notificationService.muteNotificationsForConversation(this.conversation.id))})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-conversation-options"]],inputs:{conversation:"conversation"},outputs:{onUpdateSidebar:"onUpdateSidebar"},decls:35,vars:16,consts:[[1,"option-buttons",3,"click"],["type","button",1,"favorite","btn","btn-outline-secondary","sidebar-button","p-0",3,"click"],["size","sm",3,"icon"],["ngbDropdown","","container","body",1,"d-inline-block"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-secondary","dropdown-toggle","sidebar-button","py-0","px-2"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"mute",3,"click"],["size","sm",1,"me-1",3,"icon"],["ngbDropdownItem","",1,"hide",3,"click"],["ngbDropdownItem","",1,"sub-type-reference",3,"routerLink"],["ngbDropdownItem","",1,"setting",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0),v("click",function(h){return h.stopPropagation()}),t(1,`
    `),a(2,"button",1),v("click",function(h){return o.onFavoriteClicked(h)}),t(3,`
        `),m(4,"fa-icon",2),t(5,`
    `),s(),t(6,`
    `),a(7,"div",3),t(8,`
        `),a(9,"button",4),t(10,`
            `),m(11,"fa-icon",2),t(12,`
        `),s(),t(13,`
        `),a(14,"div",5),t(15,`
            `),C(16,fa,5,4)(17,ga,7,4),a(18,"button",6),v("click",function(h){return o.onMuteClicked(h)}),t(19,`
                `),m(20,"fa-icon",7),t(21),S(22,"artemisTranslate"),S(23,"artemisTranslate"),s(),t(24,`
            `),a(25,"button",8),v("click",function(h){return o.onArchiveClicked(h)}),t(26,`
                `),m(27,"fa-icon",7),t(28),S(29,"artemisTranslate"),S(30,"artemisTranslate"),s(),t(31,`
        `),s(),t(32,`
    `),s(),t(33,`
`),s(),t(34,`
`)),n&2&&(r(4),p("icon",o.conversation.isFavorite?o.faHeartSolid:o.faHeartRegular),r(7),p("icon",o.faEllipsisVertical),r(5),u(o.conversationAsChannel!=null&&o.conversationAsChannel.subTypeReferenceId?16:-1),r(),u(o.isOneToOneChat(o.conversation)?-1:17),r(3),p("icon",o.conversation.isMuted?o.faVolumeUp:o.faVolumeXmark),r(),E(`
                `,o.conversation.isMuted?y(22,8,"artemisApp.conversationsLayout.conversationSelectionSideBar.sideBarSection.unmute"):y(23,10,"artemisApp.conversationsLayout.conversationSelectionSideBar.sideBarSection.mute"),`
            `),r(6),p("icon",o.conversation.isHidden?o.faBoxOpen:o.faBoxArchive),r(),E(`
                `,o.conversation.isHidden?y(29,12,"artemisApp.conversationsLayout.conversationSelectionSideBar.sideBarSection.show"):y(30,14,"artemisApp.conversationsLayout.conversationSelectionSideBar.sideBarSection.hide"),`
            `))},dependencies:[O,Xe,Qe,Ye,He,de,$e,V],styles:[`.option-buttons .sidebar-button{border-width:0}.option-buttons .sidebar-button:hover{background-color:var(--transparent);color:var(--link-item-color)}.option-buttons .dropdown-toggle:after{content:none}
`],encapsulation:2,changeDetection:0})}return i})();var va=i=>({conversationId:i});function xa(i,c){if(i&1){let e=b();t(0,`
        `),a(1,"div"),t(2,`
            `),a(3,"jhi-conversation-options",3),v("onUpdateSidebar",function(){f(e);let o=d();return g(o.onUpdateSidebar.emit())}),s(),t(4,`
        `),s(),t(5,`
    `)}if(i&2){let e=d();r(3),p("conversation",e.sidebarItem.conversation)}}var Yn=(()=>{class i{sidebarEventService=x(Oe);router=x(je);route=x(_e);location=x(Ne);DifficultyLevel=Ae;onUpdateSidebar=new R;sidebarItem;sidebarType;itemSelected;groupKey;emitStoreAndRefresh(e){this.sidebarEventService.emitSidebarCardEvent(e),this.sidebarType!=="conversation"&&this.refreshChildComponent()}refreshChildComponent(){this.router.navigate(["../"],{skipLocationChange:!0,relativeTo:this.route.firstChild}).then(()=>{this.itemSelected?this.router.navigate(["./"+this.sidebarItem?.id],{relativeTo:this.route}):this.router.navigate([this.location.path(),this.sidebarItem?.id],{replaceUrl:!0})})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-small-sidebar-card"]],inputs:{sidebarItem:"sidebarItem",sidebarType:"sidebarType",itemSelected:"itemSelected",groupKey:"groupKey"},outputs:{onUpdateSidebar:"onUpdateSidebar"},decls:10,vars:11,consts:[["id","test-sidebar-card-small",1,"d-flex","justify-content-between","rounded-3","border-start","border-5","highlight-card","bg-module","align-items-end","py-1",3,"click","ngClass","routerLink","queryParams","routerLinkActive"],[1,"w-75","align-self-center"],[3,"unreadCount","groupKey","sidebarType","sidebarItem"],[3,"onUpdateSidebar","conversation"]],template:function(n,o){if(n&1&&(t(0,`
`),a(1,"div",0),v("click",function(){return o.emitStoreAndRefresh(o.sidebarItem.id)}),t(2,`
    `),a(3,"div",1),t(4,`
        `),m(5,"jhi-sidebar-card-item",2),t(6,`
    `),s(),t(7,`
    `),C(8,xa,6,1),s(),t(9,`
`)),n&2){let l;r(),p("ngClass",o.sidebarItem.conversation!=null&&o.sidebarItem.conversation.hasUnreadMessage?"border-primary":"border-module")("routerLink",o.itemSelected?"../communication":"./communication")("queryParams",U(9,va,o.sidebarItem==null?null:o.sidebarItem.id))("routerLinkActive","bg-selected border-selected"),r(4),p("unreadCount",(l=o.sidebarItem.conversation==null?null:o.sidebarItem.conversation.unreadMessagesCount)!==null&&l!==void 0?l:0)("groupKey",o.groupKey)("sidebarType",o.sidebarType)("sidebarItem",o.sidebarItem),r(3),u(o.sidebarItem.conversation?8:-1)}},dependencies:[X,de,Be,ot,$n],styles:[".bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}.border-module[_ngcontent-%COMP%]{border-color:var(--module-bg)!important}.bg-selected[_ngcontent-%COMP%]{background-color:var(--sidebar-card-selected-bg)}.bg-selected.border-module[_ngcontent-%COMP%]{border-color:var(--sidebar-card-selected-bg)!important}"]})}return i})();var _a=i=>({"bg-selected border-selected":i}),ba=(i,c,e,n)=>({"border-success":i,"border-warning":c,"border-danger":e,"border-module":n});function Sa(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",0),v("click",function(){f(e);let o=d();return g(o.emitPageChangeForExam())}),t(2,`
        `),m(3,"jhi-sidebar-card-item",1),t(4,`
    `),s(),t(5,`
`)}if(i&2){let e=d();r(),p("ngClass",U(4,_a,e.itemSelected)),r(2),p("groupKey",e.groupKey)("sidebarType",e.sidebarType)("sidebarItem",e.sidebarItem)}}function ya(i,c){if(i&1){let e=b();t(0,`
    `),a(1,"div",2),v("click",function(){f(e);let o=d();return g(o.emitStoreAndRefresh(o.sidebarItem.id))}),t(2,`
        `),m(3,"jhi-sidebar-card-item",3),t(4,`
    `),s(),t(5,`
`)}if(i&2){let e,n=d();r(),p("ngClass",ci(7,ba,(n.sidebarItem==null?null:n.sidebarItem.difficulty)===n.DifficultyLevel.EASY,(n.sidebarItem==null?null:n.sidebarItem.difficulty)===n.DifficultyLevel.MEDIUM,(n.sidebarItem==null?null:n.sidebarItem.difficulty)===n.DifficultyLevel.HARD,!(n.sidebarItem!=null&&n.sidebarItem.difficulty)))("routerLink","./"+(n.sidebarItem==null?null:n.sidebarItem.id))("routerLinkActive","bg-selected border-selected"),r(2),p("unreadCount",(e=n.sidebarItem.conversation==null?null:n.sidebarItem.conversation.unreadMessagesCount)!==null&&e!==void 0?e:0)("groupKey",n.groupKey)("sidebarType",n.sidebarType)("sidebarItem",n.sidebarItem)}}var Qn=(()=>{class i{sidebarEventService=x(Oe);router=x(je);route=x(_e);location=x(Ne);DifficultyLevel=Ae;sidebarItem;sidebarType;itemSelected;pageChange=new R;groupKey;emitStoreAndRefresh(e){this.sidebarEventService.emitSidebarCardEvent(e),this.refreshChildComponent()}emitPageChangeForExam(){this.pageChange.emit()}refreshChildComponent(){this.router.navigate(["../"],{skipLocationChange:!0,relativeTo:this.route.firstChild}).then(()=>{this.itemSelected?this.router.navigate(["./"+this.sidebarItem?.id],{relativeTo:this.route}):this.router.navigate([this.location.path(),this.sidebarItem?.id],{replaceUrl:!0})})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-medium-sidebar-card"]],inputs:{sidebarItem:"sidebarItem",sidebarType:"sidebarType",itemSelected:"itemSelected",groupKey:"groupKey"},outputs:{pageChange:"pageChange"},decls:2,vars:1,consts:[["id","test-sidebar-card-medium",1,"pointer","rounded-3","col-12","px-1","pt-2","pb-1","border-5","highlight-card","bg-module","hover-effect",3,"click","ngClass"],[3,"groupKey","sidebarType","sidebarItem"],["id","test-sidebar-card-medium",1,"pointer","rounded-3","col-12","px-1","py-2","border-start","border-5","highlight-card","bg-module","hover-effect",3,"click","ngClass","routerLink","routerLinkActive"],[3,"unreadCount","groupKey","sidebarType","sidebarItem"]],template:function(n,o){n&1&&C(0,Sa,6,6)(1,ya,6,12),n&2&&u(o.sidebarType==="inExam"?0:1)},dependencies:[X,ot,de,Be],styles:[".bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}.border-module[_ngcontent-%COMP%]{border-color:var(--module-bg)!important}.hover-effect[_ngcontent-%COMP%]:hover{background-color:var(--hover-slightly-darker-body-bg)}.bg-selected[_ngcontent-%COMP%]{background-color:var(--sidebar-card-selected-bg)}.bg-selected.border-module[_ngcontent-%COMP%]{border-color:var(--sidebar-card-selected-bg)!important}"]})}return i})();var Xn=(()=>{class i{sidebarEventService=x(Oe);router=x(je);route=x(_e);location=x(Ne);sidebarItem;sidebarType;itemSelected;groupKey;emitStoreAndRefresh(e){this.sidebarEventService.emitSidebarCardEvent(e),this.refreshChildComponent()}refreshChildComponent(){this.router.navigate(["../"],{skipLocationChange:!0,relativeTo:this.route.firstChild}).then(()=>{this.itemSelected?this.router.navigate(["./"+this.sidebarItem?.id],{relativeTo:this.route}):this.router.navigate([this.location.path(),this.sidebarItem?.id],{replaceUrl:!0})})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-large-sidebar-card"]],inputs:{sidebarItem:"sidebarItem",sidebarType:"sidebarType",itemSelected:"itemSelected",groupKey:"groupKey"},decls:6,vars:5,consts:[["id","test-sidebar-card-large",1,"pointer","rounded-3","col-12","px-1","py-2","border-5","highlight-card","bg-module",3,"click","routerLink","routerLinkActive"],[3,"groupKey","sidebarType","sidebarItem"]],template:function(n,o){n&1&&(a(0,"div",0),v("click",function(){return o.emitStoreAndRefresh(o.sidebarItem.id)}),t(1,`
    `),t(2,`
    `),m(3,"jhi-sidebar-card-item",1),t(4,`
`),s(),t(5,`
`)),n&2&&(p("routerLink","./"+(o.sidebarItem==null?null:o.sidebarItem.id))("routerLinkActive","bg-selected border-selected"),r(3),p("groupKey",o.groupKey)("sidebarType",o.sidebarType)("sidebarItem",o.sidebarItem))},dependencies:[de,Be,ot],styles:[".bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}.border-module[_ngcontent-%COMP%]{border-color:var(--module-bg)!important}.bg-selected[_ngcontent-%COMP%]{background-color:var(--sidebar-card-selected-bg)}.bg-selected.border-module[_ngcontent-%COMP%]{border-color:var(--sidebar-card-selected-bg)!important}"]})}return i})();var Bt=(()=>{class i{viewContainerRef=x(ii);size="M";sidebarItem;sidebarType;itemSelected;groupKey;onUpdateSidebar=new R;componentRef;ngOnInit(){let n={S:Yn,M:Qn,L:Xn}[this.size];n&&(this.componentRef=this.viewContainerRef.createComponent(n),this.assignAttributes())}ngOnDestroy(){this.componentRef&&this.componentRef.destroy()}assignAttributes(){this.componentRef&&(this.groupKey!==void 0&&(this.componentRef.instance.groupKey=this.groupKey),this.componentRef.instance.itemSelected=this.itemSelected,this.componentRef.instance.sidebarType=this.sidebarType,this.componentRef.instance.sidebarItem=this.sidebarItem,this.componentRef.instance.sidebarItem.title=this.removeChannelPrefix(this.sidebarItem.title),this.size=="S"&&(this.componentRef.instance.onUpdateSidebar=this.onUpdateSidebar))}removeChannelPrefix(e){let n=["exercise-","lecture-","exam-"];return["exerciseChannels","lectureChannels","examChannels"].includes(this.groupKey)&&n.forEach(l=>{e?.startsWith(l)&&(e=e.substring(l.length))}),e}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ni({type:i,selectors:[["","jhiSidebarCard",""]],inputs:{size:"size",sidebarItem:"sidebarItem",sidebarType:"sidebarType",itemSelected:"itemSelected",groupKey:"groupKey"},outputs:{onUpdateSidebar:"onUpdateSidebar"}})}return i})();var Gt=()=>["title","type"],Ta=i=>({"mb-2":i});function Ia(i,c){if(i&1&&(t(0,`
                        `),m(1,"fa-icon",5),t(2,`
                    `)),i&2){let e=d(2).$implicit,n=d();r(),p("fixedWidth",!0)("icon",n.channelTypeIcon==null?null:n.channelTypeIcon[e])}}function Aa(i,c){if(i&1&&(t(0),S(1,"searchFilter")),i&2){let e,n=d(2).$implicit,o=d();E(`
                        (`,(e=xe(1,1,o.groupedData[n].entityData,W(5,Gt),o.searchValue))==null?null:e.length,`)
                    `)}}function Da(i,c){if(i&1&&(t(0,`
                        `),a(1,"span",6),t(2),s(),t(3,`
                    `)),i&2){let e=d(2).$implicit,n=d();r(2),ie(n.totalUnreadMessagesPerGroup[e])}}function Ea(i,c){if(i&1){let e=b();t(0,`
                        `),a(1,"div",9),t(2,`
                            `),t(3,`
                            `),a(4,"div",10),v("onUpdateSidebar",function(){f(e);let o=d(4);return g(o.onUpdateSidebar.emit())}),s(),t(5,`
                        `),s(),t(6,`
                    `)}if(i&2){let e=c.$implicit,n=c.$index,o=c.$count,l=d(3).$implicit,h=d();r(),p("ngClass",U(6,Ta,n!==o-1)),r(3),p("size",e.size)("itemSelected",h.itemSelected)("sidebarType",h.sidebarType)("sidebarItem",e)("groupKey",l)}}function Ma(i,c){i&1&&(t(0,`
                    `),m(1,"hr",7),t(2,`
                `))}function wa(i,c){if(i&1&&(t(0,`
                `),m(1,"hr",7),t(2,`
                `),a(3,"div",8),t(4,`
                    `),q(5,Ea,7,8,null,null,Ce),S(7,"searchFilter"),s(),t(8,`
                `),C(9,Ma,3,0)),i&2){let e=d(2).$implicit,n=d();r(3),p("ngbCollapse",n.collapseState[e]),r(2),H(xe(7,2,n.groupedData[e].entityData,W(6,Gt),n.searchValue)),r(4),u(n.collapseState[e]?-1:9)}}function Fa(i,c){if(i&1){let e=b();t(0,`
        `),a(1,"div",0),t(2,`
            `),a(3,"div",1),v("click",function(){f(e);let o=d().$implicit,l=d();return g(l.toggleGroupCategoryCollapse(o))}),t(4,`
                `),a(5,"div",2),t(6,`
                    `),C(7,Ia,3,2),t(8),S(9,"artemisTranslate"),S(10,"titlecase"),C(11,Aa,2,6),s(),t(12,`
                `),a(13,"div",3),t(14,`
                    `),C(15,Da,4,1),m(16,"fa-icon",4),t(17,`
                `),s(),t(18,`
            `),s(),t(19,`
            `),C(20,wa,10,7),S(21,"searchFilter"),s(),t(22,`
    `)}if(i&2){let e,n=d(),o=n.$implicit,l=n.$index,h=d();r(),si("id","test-accordion-item-container-",l,""),r(2),p("id","test-accordion-item-header-"+o),r(4),u(h.showLeadingIcon?7:-1),r(),E(`
                    `,y(10,13,y(9,11,"artemisApp.courseOverview.sidebar."+o)),`
                    `),r(3),u(h.groupedData[o].isHideCount?-1:11),r(4),u(h.totalUnreadMessagesPerGroup[o]>0&&h.collapseState[o]?15:-1),r(),G("rotated",!h.collapseState[o]),p("icon",h.faChevronRight),r(4),u((e=xe(21,15,h.groupedData[o].entityData,W(19,Gt),h.searchValue))!=null&&e.length?20:-1)}}function Pa(i,c){if(i&1&&(t(0,`
    `),C(1,Fa,23,20),S(2,"searchFilter")),i&2){let e,n=c.$implicit,o=d();r(),u((e=xe(2,1,o.groupedData[n].entityData,W(5,Gt),o.searchValue))!=null&&e.length||o.sidebarItemAlwaysShow()[n]?1:-1)}}var Jn=(()=>{class i{Object=Object;onUpdateSidebar=new R;searchValue;routeParams;groupedData;sidebarType;storageId="";courseId;itemSelected;showLeadingIcon=!1;channelTypeIcon;sidebarItemAlwaysShow=w.required();collapseState;isFilterActive=!1;faChevronRight=ji;faFile=Ui;totalUnreadMessagesPerGroup={};ngOnInit(){this.expandGroupWithSelectedItem(),this.setStoredCollapseState()}ngOnChanges(){this.searchValue||this.isFilterActive?this.expandAll():this.setStoredCollapseState(),this.calculateUnreadMessagesOfGroup()}setStoredCollapseState(){let e=localStorage.getItem("sidebar.accordion.collapseState."+this.storageId+".byCourse."+this.courseId);e&&(this.collapseState=JSON.parse(e))}expandAll(){Object.keys(this.collapseState).forEach(e=>{this.collapseState[e]=!1})}expandGroupWithSelectedItem(){if(this.routeParams){let e=Object.keys(this.routeParams)[0];if(this.routeParams[e]&&this.groupedData){let n=Object.entries(this.groupedData).find(o=>o[1].entityData.some(l=>l.id===Number(this.routeParams[e])));if(n){let o=n[0];this.collapseState[o]=!1}}}}calculateUnreadMessagesOfGroup(){if(!this.groupedData){this.totalUnreadMessagesPerGroup={};return}Object.keys(this.groupedData).forEach(e=>{this.totalUnreadMessagesPerGroup[e]=this.groupedData[e].entityData.filter(n=>n.conversation?.unreadMessagesCount).reduce((n,o)=>n+(o.conversation?.unreadMessagesCount||0),0)})}toggleGroupCategoryCollapse(e){this.collapseState[e]=!this.collapseState[e],localStorage.setItem("sidebar.accordion.collapseState."+this.storageId+".byCourse."+this.courseId,JSON.stringify(this.collapseState))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-sidebar-accordion"]],inputs:{searchValue:"searchValue",routeParams:"routeParams",groupedData:"groupedData",sidebarType:"sidebarType",storageId:"storageId",courseId:"courseId",itemSelected:"itemSelected",showLeadingIcon:"showLeadingIcon",channelTypeIcon:"channelTypeIcon",sidebarItemAlwaysShow:[1,"sidebarItemAlwaysShow"],collapseState:"collapseState",isFilterActive:"isFilterActive"},outputs:{onUpdateSidebar:"onUpdateSidebar"},features:[ce],decls:2,vars:0,consts:[[1,"pointer",3,"id"],[1,"control-label","d-flex","align-items-center","justify-content-between","py-2","bg-module",3,"click","id"],[1,"my-2"],[1,"icon-container","pe-3"],[1,"rotate-icon","chevron-position",3,"icon"],[3,"fixedWidth","icon"],[1,"unread-count","me-2"],[1,"my-0"],["id","test-accordion-item-content",1,"p-2","bg-body",3,"ngbCollapse"],[3,"ngClass"],["jhiSidebarCard","",3,"onUpdateSidebar","size","itemSelected","sidebarType","sidebarItem","groupKey"]],template:function(n,o){n&1&&q(0,Pa,3,6,null,null,Ce),n&2&&H(o.Object.keys(o.groupedData))},dependencies:[O,gi,X,Bt,pi,V,Lt],styles:[".bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}hr[_ngcontent-%COMP%]{border-top-color:var(--overview-light-border-color)}.unread-count[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);border-radius:50%;font-size:.6rem;width:1.1rem;height:1.1rem;display:flex;justify-content:center;align-items:center;overflow:hidden;white-space:nowrap}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center}"]})}return i})();var Oa=(i,c)=>({"sidebar-height-dev":i,collapsed:c}),ka=i=>({collapsed:i}),Zn=()=>["title","type"],Ua=i=>({"d-flex align-items-center":i}),Va=i=>({"content-height-dev":i}),Ra=(i,c,e)=>({"content-height-dev":i,"search-height-conversations":c,"search-height-normal":e}),La=i=>({"mb-2":i});function Na(i,c){if(i&1&&(t(0,`
                                        `),m(1,"fa-icon",9),t(2,`
                                    `)),i&2){let e=d(3);r(),p("icon",e.faFilterCurrentlyApplied)}}function ja(i,c){if(i&1&&(t(0,`
                                        `),m(1,"fa-icon",9),t(2,`
                                    `)),i&2){let e=d(3);r(),p("icon",e.faFilter)}}function Ba(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"div",6),t(2,`
                                `),a(3,"a",7),v("click",function(){f(e);let o=d(2);return g(o.openFilterExercisesDialog())}),t(4,`
                                    `),C(5,Na,3,1)(6,ja,3,1),m(7,"span",8),t(8,`
                                `),s(),t(9,`
                            `),s(),t(10,`
                        `)}if(i&2){let e=d(2);r(5),u(e.isFilterActive?5:6)}}function Ga(i,c){if(i&1){let e=b();t(0,`
                                        `),a(1,"button",14),v("click",function(){f(e);let o=d(3);return g(o.createDirectChat())}),t(2,`
                                            `),m(3,"fa-icon",17),t(4,`
                                            `),m(5,"span",18),t(6,`
                                        `),s(),t(7,`
                                        `),a(8,"button",14),v("click",function(){f(e);let o=d(3);return g(o.createGroupChat())}),t(9,`
                                            `),m(10,"fa-icon",17),t(11,`
                                            `),m(12,"span",19),t(13,`
                                        `),s(),t(14,`
                                    `)}if(i&2){let e=d(3);r(3),p("icon",e.faUser)("fixedWidth",!0),r(7),p("icon",e.faPeopleGroup)("fixedWidth",!0)}}function Ka(i,c){if(i&1){let e=b();t(0,`
                                        `),a(1,"button",20),v("click",function(){f(e);let o=d(3);return g(o.createNewChannel())}),t(2,`
                                            `),m(3,"fa-icon",12),t(4,`
                                            `),m(5,"span",21),t(6,`
                                        `),s(),t(7,`
                                    `)}if(i&2){let e=d(3);r(3),p("icon",e.faHashtag)}}function za(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"div",10),t(2,`
                                `),a(3,"button",11),t(4,`
                                    `),m(5,"fa-icon",12),t(6,`
                                `),s(),t(7,`

                                `),a(8,"div",13),t(9,`
                                    `),C(10,Ga,15,4)(11,Ka,8,1),a(12,"button",14),v("click",function(){f(e);let o=d(2);return g(o.browseChannels())}),t(13,`
                                        `),m(14,"fa-icon",12),t(15,`
                                        `),m(16,"span",15),t(17,`
                                    `),s(),t(18,`
                                    `),a(19,"button",14),v("click",function(){f(e);let o=d(2);return g(o.markAllMessagesAsChecked())}),t(20,`
                                        `),m(21,"fa-icon",12),t(22,`
                                        `),m(23,"span",16),t(24,`
                                    `),s(),t(25,`
                                `),s(),t(26,`
                            `),s(),t(27,`
                        `)}if(i&2){let e=d(2);r(5),p("icon",e.faPlusCircle),r(5),u(e.sidebarData!=null&&e.sidebarData.messagingEnabled?10:-1),r(),u(e.sidebarData!=null&&e.sidebarData.canCreateChannel?11:-1),r(3),p("icon",e.faSearch),r(7),p("icon",e.faCheckDouble)}}function Wa(i,c){if(i&1){let e=b();t(0,`
                    `),a(1,"div",4),t(2,`
                        `),a(3,"jhi-search-filter",5),v("newSearchEvent",function(o){f(e);let l=d();return g(l.setSearchValue(o))}),s(),t(4,`
                        `),C(5,Ba,11,1)(6,za,28,5),s(),t(7,`
                `)}if(i&2){let e=d();r(),p("ngClass",U(3,Ua,e.inCommunication())),r(4),u(e.showFilter?5:-1),r(),u(e.inCommunication()?6:-1)}}function qa(i,c){if(i&1&&(t(0,`
                    `),m(1,"div",22),t(2,`
                `)),i&2){let e,n=d();r(),p("ngClass",U(2,Va,!n.isProduction||n.isTestServer))("jhiTranslate",((e=n.sidebarDataBeforeFiltering==null||n.sidebarDataBeforeFiltering.ungroupedData==null?null:n.sidebarDataBeforeFiltering.ungroupedData.length)!==null&&e!==void 0?e:0)>0&&(n.sidebarData.ungroupedData==null?null:n.sidebarData.ungroupedData.length)===0?"artemisApp.courseOverview.general.noElementFoundWithAppliedFilter":"artemisApp.courseOverview.general.noDataFound")}}function Ha(i,c){if(i&1){let e=b();t(0,`
                            `),a(1,"jhi-sidebar-accordion",24),v("onUpdateSidebar",function(){f(e);let o=d(2);return g(o.onUpdateSidebar.emit())}),s(),t(2,`
                        `)}if(i&2){let e,n=d(2);r(),p("searchValue",n.searchValue)("groupedData",n.sidebarData.groupedData)("sidebarType",n.sidebarData.sidebarType)("storageId",n.sidebarData.storageId)("routeParams",n.routeParams)("courseId",n.courseId)("itemSelected",n.itemSelected)("showLeadingIcon",(e=n.sidebarData.showAccordionLeadingIcon)!==null&&e!==void 0?e:!1)("channelTypeIcon",n.channelTypeIcon)("sidebarItemAlwaysShow",n.sidebarItemAlwaysShow())("collapseState",n.collapseState)("isFilterActive",n.isFilterActive)}}function $a(i,c){if(i&1&&(t(0,`
                                `),a(1,"div",25),t(2,`
                                    `),m(3,"div",26),t(4,`
                                `),s(),t(5,`
                            `)),i&2){let e=c.$implicit,n=c.$index,o=c.$count,l=d(3);r(),p("ngClass",U(5,La,n!==o-1)),r(2),p("size",e.size)("itemSelected",l.itemSelected)("sidebarType",l.sidebarData.sidebarType)("sidebarItem",e)}}function Ya(i,c){if(i&1&&(t(0,`
                            `),q(1,$a,6,7,null,null,Ce),S(3,"searchFilter")),i&2){let e=d(2);r(),H(xe(3,0,e.sidebarData==null?null:e.sidebarData.ungroupedData,W(4,Zn),e.searchValue))}}function Qa(i,c){if(i&1&&(t(0,`
                    `),a(1,"div",23),t(2,`
                        `),C(3,Ha,3,12)(4,Ya,4,5),s(),t(5,`
                `)),i&2){let e=d();r(),p("ngClass",yt(2,Ra,!e.isProduction||e.isTestServer,(e.sidebarData==null?null:e.sidebarData.sidebarType)==="conversation",(e.sidebarData==null?null:e.sidebarData.sidebarType)!=="conversation")),r(2),u(e.sidebarData!=null&&e.sidebarData.groupByCategory&&e.sidebarData.groupedData?3:4)}}var Au=(()=>{class i{route=x(_e);profileService=x($i);sidebarEventService=x(Oe);modalService=x(J);onSelectConversation=new R;onUpdateSidebar=new R;onDirectChatPressed=k();onGroupChatPressed=k();onBrowsePressed=k();onCreateChannelPressed=k();onMarkAllChannelsAsRead=k();searchFieldEnabled=!0;sidebarData;courseId;itemSelected;channelTypeIcon;collapseState;sidebarItemAlwaysShow=w.required();showFilter=!1;inCommunication=w(!1);searchValue="";isCollapsed=!1;reEmitNonDistinctSidebarEvents=w(!1);exerciseId;paramSubscription;profileSubscription;sidebarEventSubscription;routeParams;isProduction=!0;isTestServer=!1;modalRef;faFilter=Ft;faFilterCurrentlyApplied=Ai;faUser=pt;faPeopleGroup=Ze;faPlusCircle=Gi;faSearch=Ri;faHashtag=Ie;faCheckDouble=Fi;sidebarDataBeforeFiltering;exerciseFilters;isFilterActive=!1;constructor(){mi(()=>{this.subscribeToSidebarEvents()})}createNewChannel(){this.onCreateChannelPressed.emit()}browseChannels(){this.onBrowsePressed.emit()}createDirectChat(){this.onDirectChatPressed.emit()}createGroupChat(){this.onGroupChatPressed.emit()}ngOnInit(){this.profileSubscription=this.profileService.getProfileInfo()?.subscribe(e=>{this.isProduction=e?.inProduction,this.isTestServer=e?.testServer??!1})}subscribeToSidebarEvents(){this.sidebarEventSubscription?.unsubscribe();let e=this.sidebarEventService.sidebarCardEventListener(),n;this.reEmitNonDistinctSidebarEvents()?n=e:n=e.pipe(Q()),this.sidebarEventSubscription=n.subscribe(o=>{o&&(this.storeLastSelectedItem(o),this.sidebarData.sidebarType=="conversation"&&(this.onSelectConversation.emit(o),this.onUpdateSidebar.emit()))})}ngOnChanges(){this.paramSubscription?.unsubscribe(),this.paramSubscription=this.route.params?.subscribe(e=>{this.routeParams=e})}setSearchValue(e){this.searchValue=e}storeLastSelectedItem(e){sessionStorage.setItem("sidebar.lastSelectedItem."+this.sidebarData.storageId+".byCourse."+this.courseId,JSON.stringify(e))}ngOnDestroy(){this.paramSubscription?.unsubscribe(),this.profileSubscription?.unsubscribe(),this.sidebarEventSubscription?.unsubscribe(),this.sidebarEventService.emitResetValue()}getSize(){let e={exercise:"M",default:"M",conversation:"S",exam:"L",inExam:"M"};return this.sidebarData.sidebarType?e[this.sidebarData.sidebarType]:"M"}openFilterExercisesDialog(){this.initializeFilterOptions(),this.sidebarDataBeforeFiltering||(this.sidebarDataBeforeFiltering=Ee(this.sidebarData)),this.modalRef=this.modalService.open(Vn,{size:"lg",backdrop:"static",animation:!0}),this.modalRef.componentInstance.sidebarData=Ee(this.sidebarDataBeforeFiltering),this.modalRef.componentInstance.exerciseFilters=Ee(this.exerciseFilters),this.modalRef.componentInstance.filterApplied.subscribe(e=>{this.sidebarData=e.filteredSidebarData,this.exerciseFilters=e.appliedExerciseFilters,this.isFilterActive=e.isFilterActive})}initializeFilterOptions(){if(this.exerciseFilters)return;let e=Un(this.sidebarData,this.exerciseFilters);this.exerciseFilters={categoryFilter:Pn(this.sidebarData,this.exerciseFilters),exerciseTypesFilter:On(this.sidebarData,this.exerciseFilters),difficultyFilter:kn(this.sidebarData,this.exerciseFilters),achievedScore:e?.achievedScore,achievablePoints:e?.achievablePoints}}markAllMessagesAsChecked(){this.onMarkAllChannelsAsRead.emit()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=I({type:i,selectors:[["jhi-sidebar"]],inputs:{searchFieldEnabled:"searchFieldEnabled",sidebarData:"sidebarData",courseId:"courseId",itemSelected:"itemSelected",channelTypeIcon:"channelTypeIcon",collapseState:"collapseState",sidebarItemAlwaysShow:[1,"sidebarItemAlwaysShow"],showFilter:"showFilter",inCommunication:[1,"inCommunication"],reEmitNonDistinctSidebarEvents:[1,"reEmitNonDistinctSidebarEvents"]},outputs:{onSelectConversation:"onSelectConversation",onUpdateSidebar:"onUpdateSidebar",onDirectChatPressed:"onDirectChatPressed",onGroupChatPressed:"onGroupChatPressed",onBrowsePressed:"onBrowsePressed",onCreateChannelPressed:"onCreateChannelPressed",onMarkAllChannelsAsRead:"onMarkAllChannelsAsRead"},features:[ce],decls:16,vars:14,consts:[[1,"sidebar-wrap"],[1,"d-flex","sidebar","rounded-3","px-2","sidebar-width","hide-on_print",3,"ngClass"],[1,"w-100","bg-module"],[1,"sidebar-content",3,"ngClass"],[1,"mt-2","mb-1",3,"ngClass"],[1,"mb-1","flex-grow-1","search-filter",3,"newSearchEvent"],[1,"ms-2","mt-2","text-primary"],[3,"click"],["jhiTranslate","artemisApp.courseOverview.exerciseFilter.filter"],[3,"icon"],["ngbDropdown","",1,"ms-2","mb-1"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm","square-button"],[1,"item-icon",3,"icon"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"p-2",3,"click"],["jhiTranslate","artemisApp.courseOverview.sidebar.browseChannels"],["jhiTranslate","artemisApp.courseOverview.sidebar.setChannelAsRead"],[1,"item-icon",3,"icon","fixedWidth"],["jhiTranslate","artemisApp.courseOverview.sidebar.createDirectChat"],["jhiTranslate","artemisApp.courseOverview.sidebar.createGroupChat"],["ngbDropdownItem","",1,"p-2","createChannel",3,"click"],["jhiTranslate","artemisApp.courseOverview.sidebar.createChannel"],[1,"mt-2","text-center","scrollable-item-content",3,"ngClass","jhiTranslate"],[1,"scrollable-item-content","my-2",3,"ngClass"],[3,"onUpdateSidebar","searchValue","groupedData","sidebarType","storageId","routeParams","courseId","itemSelected","showLeadingIcon","channelTypeIcon","sidebarItemAlwaysShow","collapseState","isFilterActive"],[3,"ngClass"],["jhiSidebarCard","",3,"size","itemSelected","sidebarType","sidebarItem"]],template:function(n,o){if(n&1&&(a(0,"div",0),t(1,`
    `),a(2,"div",1),t(3,`
        `),a(4,"div",2),t(5,`
            `),a(6,"div",3),t(7,`
                `),C(8,Wa,8,5)(9,qa,3,4),S(10,"searchFilter"),C(11,Qa,6,6),s(),t(12,`
        `),s(),t(13,`
    `),s(),t(14,`
`),s(),t(15,`
`)),n&2){let l;r(2),p("ngClass",St(8,Oa,!o.isProduction||o.isTestServer,o.isCollapsed)),r(4),p("ngClass",U(11,ka,o.isCollapsed)),r(2),u(o.searchFieldEnabled?8:-1),r(),u(!(o.sidebarData!=null&&o.sidebarData.ungroupedData)||!((l=xe(10,4,o.sidebarData==null?null:o.sidebarData.ungroupedData,W(13,Zn),o.searchValue))!=null&&l.length)?9:11)}},dependencies:[X,gn,O,F,Xe,Qe,Ye,$e,He,Jn,Bt,Lt],styles:[".search-height-normal[_ngcontent-%COMP%]{--search-height: 97px}.search-height-conversations[_ngcontent-%COMP%]{--search-height: 152px}.scrollable-item-content[_ngcontent-%COMP%]{overflow-y:auto;height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))}.scrollable-item-content.content-height-dev[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-dev) - var(--header-height) - var(--search-height))}@media (max-width: 768px){.scrollable-item-content[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))!important;height:calc(100dvh - var(--sidebar-footer-height-prod) - var(--header-height) - var(--search-height))!important}}.sidebar[_ngcontent-%COMP%]{background-color:var(--module-bg);height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height))}.sidebar.sidebar-height-dev[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-dev) - var(--header-height))}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{height:calc(100vh - var(--sidebar-footer-height-prod) - var(--header-height))!important;height:calc(100dvh - var(--sidebar-footer-height-prod) - var(--header-height))!important}}.bg-module[_ngcontent-%COMP%]{background-color:var(--module-bg)}@media print{.hide-on_print[_ngcontent-%COMP%]{display:none!important}}.item-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.dropdown-menu[_ngcontent-%COMP%]{padding:0}.dropdown-item[_ngcontent-%COMP%]{display:flex;margin-left:.2rem}.square-button[_ngcontent-%COMP%]{width:45px;height:35px;padding:.2rem;display:flex;align-items:center;justify-content:center;border-radius:.2rem}.search-filter[_ngcontent-%COMP%]{height:35px}"]})}return i})();export{us as a,rt as b,Rn as c,Bn as d,_n as e,xs as f,Tn as g,_s as h,bs as i,Td as j,ht as k,Hn as l,Au as m};
//# sourceMappingURL=chunk-CJVQ2B7U.js.map

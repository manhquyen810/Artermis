import{b as ni}from"./chunk-DKAABN5U.js";import{a as ii,b as ti}from"./chunk-A2YNMNYM.js";import{a as ei}from"./chunk-UFNSBNWD.js";import"./chunk-AWTDBAYB.js";import{a as L}from"./chunk-TDXQOKRD.js";import{a as Ye,b as Je}from"./chunk-TLJ4QAPU.js";import{a as $e}from"./chunk-HOVEUVZP.js";import{a as Xe}from"./chunk-YKUEDDG2.js";import"./chunk-F75WZTS2.js";import"./chunk-2SI4Q343.js";import{a as Ze}from"./chunk-4YACL3TM.js";import{a as Ke}from"./chunk-IJQAYIKN.js";import{a as He}from"./chunk-DMHWBHTD.js";import"./chunk-57BCHYEO.js";import{a as Ge}from"./chunk-EJ5LGD43.js";import"./chunk-UQA7EKND.js";import{a as Pe}from"./chunk-2D32KPWA.js";import"./chunk-7MKMUXV6.js";import{b as W}from"./chunk-IJRVZ46L.js";import"./chunk-SUUJN3EQ.js";import"./chunk-MD22LTSS.js";import"./chunk-RKZRHQUL.js";import"./chunk-GAUWMTOK.js";import"./chunk-DOLVNMRR.js";import"./chunk-RTOKZMYN.js";import"./chunk-5QODR5GQ.js";import"./chunk-RNPAFOPW.js";import"./chunk-KZGAUMRM.js";import"./chunk-656XE4CO.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-U4DJRHYQ.js";import"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-EGRHWZRV.js";import"./chunk-MBS3WUDO.js";import"./chunk-BNRTXX46.js";import"./chunk-Z2YUBN6N.js";import"./chunk-OTCBNILH.js";import"./chunk-AO5E7TEY.js";import{b as We}from"./chunk-TECMX7AA.js";import"./chunk-BIK4CL5A.js";import"./chunk-VRAVBLUK.js";import"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import{d as Fe}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-D6LEDP6W.js";import"./chunk-VWRLJYRR.js";import{a as Le}from"./chunk-2QXIMOEO.js";import"./chunk-35PLMJNP.js";import{a as Be}from"./chunk-UDBRF4PR.js";import"./chunk-QH7SWO42.js";import"./chunk-P2M2VQE3.js";import"./chunk-GXOKLIFX.js";import{b as w,c as O,d as F,e as Ae}from"./chunk-5JBXU6VG.js";import"./chunk-4I367PEU.js";import"./chunk-ZPITQMA6.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import{a as Re}from"./chunk-DRMCDU75.js";import"./chunk-VL2AJDYR.js";import"./chunk-2CSD5TLZ.js";import"./chunk-ZM53HDCE.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import{d as Ue}from"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import{c as Ie}from"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as De}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import{d as Oe}from"./chunk-CT44YL7Q.js";import"./chunk-YLNI6ED3.js";import"./chunk-ZFM7LHJQ.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import{K as ye,v as Se}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{A as Ee,B as ze,F as qe,K as ve,b as ce,c as de,h as ue,i as pe,k as me,m as xe,n as _e,o as he,w as Ce,x as ge,z as fe}from"./chunk-WA5GEAJB.js";import"./chunk-DRSQQEUE.js";import"./chunk-7XXWL6ER.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import{e as N}from"./chunk-5GXY5RYT.js";import{a as je}from"./chunk-K3W6YFKH.js";import"./chunk-TL3DYXRE.js";import{c as Ve}from"./chunk-JXJXC4DZ.js";import{d as ke}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import{p as f}from"./chunk-DID2YGL7.js";import{f as B,g as Me}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{G as be,Lc as we,Nc as Qe}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as Ne}from"./chunk-U54OSGNH.js";import{f as se,h as le}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import{c as Te}from"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{n as re,z as ae}from"./chunk-IOA4DPXY.js";import{Ac as K,Bb as G,Bc as Y,Db as r,Dc as g,Ea as q,Ed as k,Id as oe,La as R,Ma as p,Mc as C,Na as m,Oc as l,Qa as P,Rc as v,Sc as X,Tb as H,Xb as Z,Yc as J,Zb as h,Zc as $,_c as ee,cd as D,dd as i,ed as U,fd as A,kc as _,ld as S,md as y,nd as T,pd as ie,qd as te,rd as ne,sc as x,sd as j,uc as M,vc as V,wc as I,xc as a,yc as s,yd as E,zc as u,zd as z}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var oi=["quizQuestionsEdit"],ri=()=>[],ai=(o,d)=>({index:o,threshold:d}),si=o=>({index:o}),li=(o,d)=>({"btn-secondary":o,"btn-danger":d});function ci(o,d){o&1&&(i(0,`
                        `),u(1,"h4",29),i(2,`
                    `))}function di(o,d){o&1&&(i(0,`
                        `),u(1,"h4",30),i(2,`
                    `))}function ui(o,d){o&1&&(i(0,`
                        `),u(1,"h4",31),i(2,`
                    `))}function pi(o,d){o&1&&(i(0,`
                `),a(1,"div"),i(2,`
                    `),u(3,"div",32),i(4,`
                    `),a(5,"div",33),i(6,`
                        `),u(7,"span",34),i(8,`
                    `),s(),i(9,`
                `),s(),i(10,`
            `))}function mi(o,d){if(o&1){let e=g();i(0,`
                    `),a(1,"div",35),i(2,`
                        `),u(3,"label",36),i(4,`
                        `),u(5,"jhi-help-icon",37),i(6,`
                        `),a(7,"jhi-category-selector",38),C("selectedCategories",function(t){p(e);let c=l(2);return m(c.updateCategories(t))})("ngModelChange",function(){p(e);let t=l(2);return m(t.cacheValidation())}),s(),i(8,`
                    `),s(),i(9,`
                `)}if(o&2){let e=l(2);r(7),_("categories",e.exerciseCategories)("existingCategories",e.existingCategories)}}function xi(o,d){if(o&1){let e=g();i(0,`
                                `),u(1,"label",39),i(2,`
                                `),a(3,"div",40),i(4,`
                                    `),a(5,"input",41),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.duration.minutes,t)||(c.duration.minutes=t),m(t)}),C("ngModelChange",function(){p(e);let t=l(2);return m(t.onDurationChange())}),s(),i(6,`
                                    `),u(7,"span",42),i(8,`
                                    `),a(9,"input",43),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.duration.seconds,t)||(c.duration.seconds=t),m(t)}),C("ngModelChange",function(){p(e);let t=l(2);return m(t.onDurationChange())}),s(),i(10,`
                                    `),u(11,"span",44),i(12,`
                                `),s(),i(13,`
                            `)}if(o&2){let e=l(2);r(5),S("ngModel",e.duration.minutes),r(4),S("ngModel",e.duration.seconds)}}function _i(o,d){o&1&&(i(0,`
                                        `),u(1,"span",53),i(2,`
                                    `))}function hi(o,d){if(o&1){let e=g();i(0,`
                                    `),a(1,"jhi-date-time-picker",52),E(2,"artemisTranslate"),C("valueChange",function(){p(e);let t=l(3);return m(t.cacheValidation())}),T("ngModelChange",function(t){p(e);let c=l(3);return y(c.quizExercise.dueDate,t)||(c.quizExercise.dueDate=t),m(t)}),s(),i(3,`
                                    `),h(4,_i,3,0)}if(o&2){let e=l(3);r(),v("labelName",z(2,4,"artemisApp.exercise.dueDate")),_("error",!!e.quizExercise.dueDateError),S("ngModel",e.quizExercise.dueDate),r(3),x(e.quizExercise.dueDateError?4:-1)}}function Ci(o,d){if(o&1){let e=g();i(0,`
                                    `),a(1,"div",20),i(2,`
                                        `),a(3,"input",54),T("ngModelChange",function(t){p(e);let c=l(3);return y(c.scheduleQuizStart,t)||(c.scheduleQuizStart=t),m(t)}),C("ngModelChange",function(){p(e);let t=l(3);return m(t.cacheValidation())}),s(),i(4,`
                                        `),u(5,"label",55),i(6,`
                                        `),u(7,"jhi-help-icon",56),i(8,`
                                    `),s(),i(9,`
                                `)}if(o&2){let e=l(3);r(3),S("ngModel",e.scheduleQuizStart)}}function gi(o,d){if(o&1){let e=g();i(0,`
                                    `),a(1,"div",20),i(2,`
                                        `),i(3,`
                                        `),a(4,"jhi-button",57),C("click",function(){p(e);let t=l(3);return m(t.addQuizBatch())}),s(),i(5,`
                                    `),s(),i(6,`
                                `)}if(o&2){let e=l(3);r(4),_("btnType",e.ButtonType.DEFAULT)}}function fi(o,d){if(o&1&&(i(0,`
                                                `),a(1,"span",59),i(2),E(3,"artemisTranslate"),s(),i(4,`
                                            `)),o&2){let e=l(5);r(2),U(z(3,1,e.quizExercise.quizMode===e.QuizMode.SYNCHRONIZED?"artemisApp.quizExercise.startTimeErrorSynchronized":"artemisApp.quizExercise.startTimeError"))}}function Ei(o,d){if(o&1){let e=g();i(0,`
                                                `),a(1,"jhi-button",60),C("click",function(){p(e);let t=l().$implicit,c=l(4);return m(c.removeQuizBatch(t))}),s(),i(2,`
                                            `)}if(o&2){let e=l(5);r(),_("btnType",e.ButtonType.ERROR)("icon",e.faXmark)}}function zi(o,d){if(o&1){let e=g();i(0,`
                                        `),a(1,"div"),i(2,`
                                            `),i(3,`
                                            `),a(4,"jhi-date-time-picker",58),E(5,"artemisTranslate"),C("valueChange",function(){p(e);let t=l(4);return m(t.cacheValidation())}),T("ngModelChange",function(t){let c=p(e).$implicit;return y(c.startTime,t)||(c.startTime=t),m(t)}),s(),i(6,`
                                            `),h(7,fi,5,3)(8,Ei,3,2),s(),i(9,`
                                    `)}if(o&2){let e,n=d.$implicit,t=d.$index;r(4),v("labelName",z(5,6,"artemisApp.quizExercise.startTime")),_("shouldDisplayTimeZoneWarning",t===0)("error",(e=n.startTimeError)!==null&&e!==void 0?e:!1),S("ngModel",n.startTime),r(3),x(n.startTimeError?7:-1),r(),x(-1)}}function qi(o,d){if(o&1&&(i(0,`
                                    `),i(1,`
                                    `),V(2,zi,10,8,null,null,M)),o&2){let e=l(3);r(2),I(e.quizExercise.quizBatches)}}function vi(o,d){if(o&1){let e=g();i(0,`
                                `),u(1,"label",45),i(2,`
                                `),u(3,"jhi-help-icon",46),i(4,`
                                `),a(5,"select",47),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.quizExercise.quizMode,t)||(c.quizExercise.quizMode=t),m(t)}),C("ngModelChange",function(){p(e);let t=l(2);return m(t.cacheValidation())}),i(6,`
                                    `),u(7,"option",48),i(8,`
                                    `),u(9,"option",49),i(10,`
                                    `),u(11,"option",50),i(12,`
                                `),s(),i(13,`
                                `),K(14),i(15,`
                                    `),i(16,`
                                    `),a(17,"jhi-date-time-picker",51),E(18,"artemisTranslate"),E(19,"artemisTranslate"),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.quizExercise.releaseDate,t)||(c.quizExercise.releaseDate=t),m(t)}),C("valueChange",function(){p(e);let t=l(2);return m(t.cacheValidation())}),s(),i(20,`
                                `),Y(),i(21,`
                                `),h(22,hi,5,6)(23,Ci,10,1)(24,gi,7,1)(25,qi,4,0)}if(o&2){let e=l(2);r(5),S("ngModel",e.quizExercise.quizMode),r(2),_("value",e.QuizMode.SYNCHRONIZED),r(2),_("value",e.QuizMode.BATCHED),r(2),_("value",e.QuizMode.INDIVIDUAL),r(6),v("labelName",z(18,12,"artemisApp.quizExercise.releaseDate")),v("labelTooltip",z(19,14,"artemisApp.quizExercise.releaseDateExplanation."+e.quizExercise.quizMode)),S("ngModel",e.quizExercise.releaseDate),_("error",!1),r(5),x(e.quizExercise.quizMode!==e.QuizMode.SYNCHRONIZED?22:-1),r(),x(e.quizExercise.quizMode===e.QuizMode.SYNCHRONIZED?23:-1),r(),x((e.quizExercise.quizMode,e.QuizMode.BATCHED,-1)),r(),x(e.quizExercise.quizBatches&&e.quizExercise.quizMode===e.QuizMode.SYNCHRONIZED?25:-1)}}function Si(o,d){if(o&1){let e=g();i(0,`
                                    `),a(1,"jhi-included-in-overall-score-picker",61),C("includedInOverallScoreChange",function(t){p(e);let c=l(2);return m(c.includedInOverallScoreChange(t))}),s(),i(2,`
                                `)}if(o&2){let e=l(2);r(),_("includedInOverallScore",e.quizExercise.includedInOverallScore)("allowNotIncluded",!e.isExamMode)}}function yi(o,d){if(o&1){let e=g();i(0,`
                        `),a(1,"div",16),i(2,`
                            `),a(3,"jhi-competency-selection",62),E(4,"artemisTranslate"),E(5,"artemisTranslate"),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.quizExercise.competencyLinks,t)||(c.quizExercise.competencyLinks=t),m(t)}),C("ngModelChange",function(){p(e);let t=l(2);return m(t.cacheValidation())}),s(),i(6,`
                        `),s(),i(7,`
                    `)}if(o&2){let e=l(2);r(3),_("labelName",z(4,3,"artemisApp.competency.link.title"))("labelTooltip",z(5,5,"artemisApp.competency.link.exercise")),S("ngModel",e.quizExercise.competencyLinks)}}function Ti(o,d){if(o&1){let e=g();i(0,`
                    `),a(1,"jhi-quiz-question-list-edit",63,2),C("onQuestionAdded",function(){p(e);let t=l(2);return m(t.handleQuestionChanged())})("onQuestionDeleted",function(){p(e);let t=l(2);return m(t.handleQuestionChanged())})("onQuestionUpdated",function(){p(e);let t=l(2);return m(t.handleQuestionChanged())}),s(),i(3,`
                `)}if(o&2){let e,n=l(2);r(),_("courseId",n.courseId)("quizQuestions",(e=n.quizExercise.quizQuestions)!==null&&e!==void 0?e:te(2,ri))}}function bi(o,d){if(o&1){let e=g();i(0,`
                        `),a(1,"div",64),i(2,`
                            `),a(3,"div",65),i(4,`
                                `),a(5,"input",66),E(6,"artemisTranslate"),T("ngModelChange",function(t){p(e);let c=l(2);return y(c.notificationText,t)||(c.notificationText=t),m(t)}),s(),i(7,`
                            `),s(),i(8,`
                        `),s(),i(9,`
                    `)}if(o&2){let e=l(2);r(5),v("placeholder",z(6,2,"artemisApp.exercise.notificationText")),S("ngModel",e.notificationText)}}function wi(o,d){o&1&&(i(0,`
                            `),u(1,"span",67),i(2,`
                        `))}function Qi(o,d){o&1&&(i(0,`
                            `),u(1,"span",68),i(2,`
                        `))}function Mi(o,d){o&1&&(i(0,`
                            `),u(1,"span",69),i(2,`
                        `))}function Vi(o,d){if(o&1&&(i(0,`
                                        `),u(1,"p",70),i(2,`
                                    `)),o&2){let e=l().$implicit;r(),v("jhiTranslate",e.translateKey),_("translateValues",j(2,ai,e.translateValues.index,e.translateValues.threshold))}}function Ii(o,d){if(o&1&&(i(0,`
                                        `),u(1,"p",71),i(2,`
                                    `)),o&2){let e=l().$implicit;r(),v("jhiTranslate",e.translateKey)}}function Di(o,d){if(o&1&&(i(0,`
                                `),a(1,"div"),i(2,`
                                    `),h(3,Vi,3,5),E(4,"json"),h(5,Ii,3,1),E(6,"json"),s(),i(7,`
                            `)),o&2){let e=d.$implicit;r(3),x(z(4,2,e.translateValues)!=="{}"?3:-1),r(2),x(z(6,4,e.translateValues)==="{}"?5:-1)}}function Ui(o,d){if(o&1&&(i(0,`
                            `),V(1,Di,8,6,null,null,M)),o&2){let e=l(2);r(),I(e.computeInvalidReasons())}}function Ai(o,d){if(o&1&&(i(0,`
                                        `),u(1,"p",70),i(2,`
                                    `)),o&2){let e=l().$implicit;r(),v("jhiTranslate",e.translateKey),_("translateValues",ne(2,si,e.translateValues.index))}}function ji(o,d){if(o&1&&(i(0,`
                                        `),u(1,"p",71),i(2,`
                                    `)),o&2){let e=l().$implicit;r(),v("jhiTranslate",e.translateKey)}}function ki(o,d){if(o&1&&(i(0,`
                                `),a(1,"div"),i(2,`
                                    `),h(3,Ai,3,4),E(4,"json"),h(5,ji,3,1),E(6,"json"),s(),i(7,`
                            `)),o&2){let e=d.$implicit;r(3),x(z(4,2,e.translateValues)!=="{}"?3:-1),r(2),x(z(6,4,e.translateValues)==="{}"?5:-1)}}function Bi(o,d){if(o&1&&(i(0,`
                            `),V(1,ki,8,6,null,null,M)),o&2){let e=l(2);r(),I(e.computeInvalidWarnings())}}function Ni(o,d){if(o&1&&(i(0,`
                            `),a(1,"span",72),i(2,`
                                `),u(3,"fa-icon",73),i(4,`
                                `),u(5,"span",74),i(6,`
                                `),a(7,"span"),i(8),s(),i(9,`
                            `),s(),i(10,`
                        `)),o&2){l();let e=D(112),n=l();r(),_("ngbTooltip",e),r(2),_("icon",n.faExclamationCircle),r(5),A("(",n.computeInvalidReasons().length,")")}}function Oi(o,d){if(o&1&&(i(0,`
                            `),a(1,"span",75),i(2,`
                                `),u(3,"span",76),i(4,`
                                `),a(5,"span"),i(6),s(),i(7,`
                            `),s(),i(8,`
                        `)),o&2){l();let e=D(115),n=l();r(),_("ngbTooltip",e),r(5),A("(",n.computeInvalidWarnings().length,")")}}function Fi(o,d){if(o&1){let e=g();i(0,`
                            `),a(1,"button",77),C("click",function(){p(e);let t=l(2);return m(t.previousState())}),s(),i(2,`
                        `)}if(o&2){let e=l(2);r(),v("jhiTranslate",e.pendingChangesCache?"entity.action.cancel":"entity.action.back"),_("ngClass",j(2,li,!e.pendingChangesCache,e.pendingChangesCache))}}function Wi(o,d){if(o&1){let e=g();i(0,`
    `),a(1,"div",3),i(2,`
        `),a(3,"div",4),i(4,`
            `),a(5,"div",5),i(6,`
                `),a(7,"div",6),i(8,`
                    `),h(9,ci,3,0)(10,di,3,0)(11,ui,3,0),u(12,"jhi-documentation-button",7),i(13,`
                `),s(),i(14,`
                `),a(15,"h4"),i(16,`
                    `),a(17,"span",8),i(18,`
                        `),u(19,"span",9),i(20,`\xA0
                        `),a(21,"span",10),i(22),s(),i(23,`
                        `),u(24,"span",11),i(25,`
                    `),s(),i(26,`
                `),s(),i(27,`
            `),s(),i(28,`
            `),h(29,pi,11,0),a(30,"div",12),i(31,`
                `),a(32,"form",13),i(33,`
                    `),a(34,"jhi-exercise-title-channel-name",14),C("onTitleChange",function(){p(e);let t=l();return m(t.cacheValidation())})("onChannelNameChange",function(){p(e);let t=l();return m(t.cacheValidation())}),s(),i(35,`
                `),s(),i(36,`
                `),h(37,mi,10,2),a(38,"div",3),i(39,`
                    `),a(40,"div",15),i(41,`
                        `),a(42,"div",16),i(43,`
                            `),u(44,"label",17),i(45,`
                            `),a(46,"div"),i(47,`
                                `),a(48,"jhi-difficulty-picker",18),C("ngModelChange",function(){p(e);let t=l();return m(t.cacheValidation())}),s(),i(49,`
                            `),s(),i(50,`
                        `),s(),i(51,`
                    `),s(),i(52,`
                    `),a(53,"div",15),i(54,`
                        `),a(55,"div",16),i(56,`
                            `),h(57,xi,14,2),s(),i(58,`
                    `),s(),i(59,`
                    `),a(60,"div",15),i(61,`
                        `),a(62,"div",16),i(63,`
                            `),u(64,"label",19),i(65,`
                            `),a(66,"div",20),i(67,`
                                `),a(68,"input",21),T("ngModelChange",function(t){p(e);let c=l();return y(c.quizExercise.randomizeQuestionOrder,t)||(c.quizExercise.randomizeQuestionOrder=t),m(t)}),C("ngModelChange",function(){p(e);let t=l();return m(t.cacheValidation())}),s(),i(69,`
                                `),u(70,"label",22),i(71,`
                            `),s(),i(72,`
                            `),h(73,vi,26,16),s(),i(74,`
                    `),s(),i(75,`
                `),s(),i(76,`
                `),a(77,"div",3),i(78,`
                    `),a(79,"div",23),i(80,`
                        `),a(81,"div",16),i(82,`
                            `),u(83,"label",24),i(84,`
                            `),a(85,"div"),i(86,`
                                `),h(87,Si,3,2),s(),i(88,`
                        `),s(),i(89,`
                    `),s(),i(90,`
                `),s(),i(91,`
                `),a(92,"div",3),i(93,`
                    `),h(94,yi,8,7),s(),i(95,`
                `),h(96,Ti,4,3),s(),i(97,`
        `),s(),i(98,`
        `),a(99,"div",25),i(100,`
            `),a(101,"div",26),i(102,`
                `),a(103,"div",27),i(104,`
                    `),h(105,bi,10,4),a(106,"div",16),i(107,`
                        `),h(108,wi,3,0)(109,Qi,3,0)(110,Mi,3,0)(111,Ui,3,0,"ng-template",null,0,k),i(113,`
                        `),h(114,Bi,3,0,"ng-template",null,1,k),i(116,`
                        `),h(117,Ni,11,3)(118,Oi,9,2)(119,Fi,3,5),a(120,"button",28),C("click",function(){p(e);let t=l();return m(t.validateItemLimit())}),s(),i(121,`
                    `),s(),i(122,`
                `),s(),i(123,`
            `),s(),i(124,`
        `),s(),i(125,`
    `),s(),i(126,`
`)}if(o&2){let e=D(112),n=l();r(9),x(n.quizExercise.id?-1:9),r(),x(!n.isImport&&n.quizExercise.id?10:-1),r(),x(n.isImport?11:-1),r(),_("type",n.documentationType),r(10),U(n.calculateMaxExerciseScore()),r(7),x(n.hasSavedQuizStarted?29:-1),r(5),_("exercise",n.quizExercise)("course",n.quizExercise.course)("isExamMode",n.isExamMode)("isImport",n.isImport),r(3),x(n.isExamMode?-1:37),r(11),_("exercise",n.quizExercise),r(9),x(n.isExamMode?-1:57),r(11),S("ngModel",n.quizExercise.randomizeQuestionOrder),r(5),x(n.isExamMode?-1:73),r(10),X("jhiTranslate","artemisApp.exercise.includedInOverallScore",n.quizExercise.course?"Course":"Exam","Label"),r(4),x(n.quizExercise.includedInOverallScore?87:-1),r(7),x(n.isExamMode?-1:94),r(2),x(n.courseId?96:-1),r(9),x(!n.isExamMode&&n.quizExercise.id?105:-1),r(3),x(!n.pendingChangesCache&&!n.isSaving?108:-1),r(),x(n.pendingChangesCache&&n.quizIsValid&&!n.isSaving?109:-1),r(),x(n.isSaving?110:-1),r(7),x(n.quizIsValid?-1:117),r(),x(n.warningQuizCache?118:-1),r(),x(n.quizExercise.course||n.quizExercise.exerciseGroup?119:-1),r(),_("disabled",n.isSaveDisabled())("ngbTooltip",n.quizIsValid?"":e)}}var At=(()=>{class o extends ti{route=q(se);courseService=q(Ue);quizExerciseService=q(He);router=q(le);translateService=q(Te);exerciseService=q(Ie);alertService=q(Ve);changeDetector=q(oe);exerciseGroupService=q(Ge);navigationUtilService=q(Re);modalService=q(Se);quizQuestionListEditComponent;course;exerciseGroup;courseRepository;notificationText;isImport=!1;showExistingQuestions=!1;exams=[];courses=[];quizExercises;allExistingQuestions;existingQuestions;importFile;importFileName;searchQueryText;dndFilterEnabled;mcqFilterEnabled;shortAnswerFilterEnabled;duration=new ii(0,0);isSaving=!1;scheduleQuizStart=!1;exerciseCategories;existingCategories;examId;courseId;faPlus=we;faXmark=Qe;faExclamationCircle=be;QuizMode=w;documentationType="Quiz";DRAG_AND_DROP=W.DRAG_AND_DROP;SHORT_ANSWER=W.SHORT_ANSWER;defaultSecondLayerDialogOptions={size:"md",scrollable:!1,backdrop:"static",backdropClass:"second-layer-modal-bg",centered:!0};ngOnInit(){this.showExistingQuestions=!1,this.quizExercises=[],this.allExistingQuestions=[],this.existingQuestions=[],this.importFile=void 0,this.importFileName="",this.searchQueryText="",this.dndFilterEnabled=!0,this.mcqFilterEnabled=!0,this.shortAnswerFilterEnabled=!0,this.notificationText=void 0,this.courseId=Number(this.route.snapshot.paramMap.get("courseId")),this.examId=Number(this.route.snapshot.paramMap.get("examId"));let e=Number(this.route.snapshot.paramMap.get("exerciseId")),n=Number(this.route.snapshot.paramMap.get("exerciseGroupId"));this.examId&&n&&(this.isExamMode=!0),this.router.url.includes("/import")&&(this.isImport=!0),this.courseId&&this.courseService.find(this.courseId).subscribe(t=>{this.course=t.body,this.isExamMode?this.exerciseGroupService.find(this.courseId,this.examId,n).subscribe(c=>{this.exerciseGroup=c.body||void 0,e?this.quizExercise&&(this.quizExercise.exerciseGroup=this.exerciseGroup,this.savedEntity.exerciseGroup=this.exerciseGroup):this.init()}):e?this.quizExercise&&(this.quizExercise.course=this.course,this.savedEntity.course=this.course):this.init()}),e&&this.quizExerciseService.find(e).subscribe(t=>{this.quizExercise=t.body,this.init(),this.quizExercise.isEditable||this.alertService.error("error.http.403"),this.testRunExistsAndShouldNotBeIgnored()&&this.alertService.warning(this.translateService.instant("artemisApp.quizExercise.edit.testRunSubmissionsExist"))}),this.courseRepository=this.courseService}initializeNewQuizExercise(){let e=new F(void 0,void 0);return e.title="",e.duration=600,e.isOpenForPractice=!1,e.releaseDate=f(),e.randomizeQuestionOrder=!0,e.quizQuestions=[],e.quizMode=w.SYNCHRONIZED,e.allowedNumberOfAttempts=1,e.isEditable=!0,this.prepareEntity(e),e}init(){this.quizExercise?this.quizExercise.isEditable=L(this.quizExercise):this.quizExercise=this.initializeNewQuizExercise(),(this.isImport||this.isExamMode)&&Ae(this.quizExercise),this.isExamMode?(this.quizExercise.course=void 0,(!this.quizExercise.exerciseGroup||this.isImport)&&(this.quizExercise.exerciseGroup=this.exerciseGroup)):(this.quizExercise.exerciseGroup=void 0,(!this.quizExercise.course||this.isImport)&&(this.quizExercise.course=this.course)),this.isExamMode||(this.exerciseCategories=this.quizExercise.categories||[],this.courseService.findAllCategoriesOfCourse(this.courseId).subscribe({next:e=>{this.existingCategories=this.exerciseService.convertExerciseCategoriesAsStringFromServer(e.body)},error:e=>De(this.alertService,e)})),this.isExamMode&&this.quizExercise.includedInOverallScore===B.NOT_INCLUDED&&(this.quizExercise.includedInOverallScore=B.INCLUDED_COMPLETELY),this.scheduleQuizStart=(this.quizExercise.quizBatches?.length??0)>0,this.updateDuration(),this.exerciseService.validateDate(this.quizExercise),this.savedEntity=this.quizExercise.id&&!this.isImport?N(this.quizExercise):new F(void 0,void 0),this.cacheValidation()}validateDate(){this.exerciseService.validateDate(this.quizExercise);let e=this.quizExercise.quizMode===w.SYNCHRONIZED?void 0:this.quizExercise.dueDate;this.quizExercise?.quizBatches?.forEach(n=>{let t=f(n.startTime),c=t.add(f.duration(this.duration.minutes,"minutes")).add(f.duration(this.duration.seconds,"seconds"));n.startTimeError=t.isBefore(this.quizExercise.releaseDate)||e!=null&&c.isAfter(e)})}cacheValidation(){return this.quizExercise.quizMode===w.SYNCHRONIZED&&(this.quizExercise.dueDate=void 0,this.scheduleQuizStart?(this.quizExercise.quizBatches?.length??0)!==1&&(this.quizExercise.quizBatches=[this.quizExercise.quizBatches?.[0]??new O]):(this.quizExercise.quizBatches?.length??0)!==0&&(this.quizExercise.quizBatches=[])),this.validateDate(),super.cacheValidation(this.changeDetector)}addQuizBatch(){this.quizExercise.quizBatches||(this.quizExercise.quizBatches=[]),this.quizExercise.quizBatches.push(new O)}removeQuizBatch(e){if(this.quizExercise.quizBatches){let n=this.quizExercise.quizBatches.indexOf(e);n>=0&&this.quizExercise.quizBatches.splice(n,1)}}ngOnChanges(e){(e.course||e.quizExercise)&&this.init()}updateCategories(e){this.quizExercise.categories=e,this.exerciseCategories=e,this.cacheValidation()}get showDropdown(){return!this.quizExercise||!this.quizExercise.quizStarted||this.isImport?"isVisibleBeforeStart":this.quizExercise.quizEnded?"isOpenForPractice":"active"}canDeactivate(){return!this.pendingChangesCache}unloadNotification(e){return this.canDeactivate()?!0:(e.preventDefault(),this.translateService.instant("pendingChanges"))}isDateInPast=(e,n)=>n.month<f().month()+1||f().year(e.year).month(e.month-1).date(e.day).isBefore(f());calculateMaxExerciseScore(){let e=0;return this.quizExercise.quizQuestions.forEach(n=>e+=n.points),e}deleteQuestion(e){this.quizExercise.quizQuestions=this.quizExercise.quizQuestions?.filter(n=>n!==e),this.cacheValidation()}checkItemCountDragAndDrop(e){return e?e?.some(n=>{let t=n.dropLocations?.length??1,c=n.dragItems?.length??1;return(n.correctMappings?.length??1)*c*t>2197}):!1}checkItemCountShortAnswer(e){return e?e?.some(n=>{let t=n.correctMappings?.length??1,c=n.spots?.length??1,b=n.solutions?.length??1;return t*c*b>2197}):!1}validateItemLimit(){let e=this.quizExercise.quizQuestions?.filter(b=>b.type===this.DRAG_AND_DROP),n=this.quizExercise.quizQuestions?.filter(b=>b.type===this.SHORT_ANSWER),t=this.checkItemCountDragAndDrop(e),c=this.checkItemCountShortAnswer(n);if(t||c){let b={titleKey:"artemisApp.quizWarning.title",questionKey:"artemisApp.quizWarning.question",descriptionKey:"artemisApp.quizWarning.description",confirmButtonKey:"artemisApp.quizWarning.confirmButton"},Q=this.modalService.open(ni,this.defaultSecondLayerDialogOptions);Q.componentInstance.translationKeys=b,Q.componentInstance.canBeUndone=!0,Q.componentInstance.initialize(),Q.result.then(()=>{this.save()},()=>{})}else this.save()}save(){if(this.hasSavedQuizStarted||!this.pendingChangesCache||!this.quizIsValid)return;Me.sanitize(this.quizExercise);let e=this.quizQuestionListEditComponent.fileMap,n=new Map;if(e.forEach((t,c)=>{n.set(c,t.file)}),this.isSaving=!0,this.quizQuestionListEditComponent.parseAllQuestions(),this.quizExercise.id!==void 0)if(this.isImport)this.quizExerciseService.import(this.quizExercise,n).subscribe({next:t=>{t.body?this.onSaveSuccess(t.body,!0):this.onSaveError()},error:t=>this.onSaveError(t)});else{let t={};this.notificationText&&(t.notificationText=this.notificationText),this.quizExerciseService.update(this.quizExercise.id,this.quizExercise,n,t).subscribe({next:c=>{this.notificationText=void 0,c.body?this.onSaveSuccess(c.body,!1):this.onSaveError()},error:c=>this.onSaveError(c)})}else this.quizExerciseService.create(this.quizExercise,n).subscribe({next:t=>{t.body?this.onSaveSuccess(t.body,!0):this.onSaveError()},error:t=>this.onSaveError(t)})}onSaveSuccess(e,n){this.isSaving=!1,this.pendingChangesCache=!1,this.prepareEntity(e),this.quizQuestionListEditComponent.fileMap.clear(),this.quizExercise=e,this.quizExercise.isEditable=L(this.quizExercise),this.exerciseService.validateDate(this.quizExercise),this.savedEntity=N(e),this.changeDetector.detectChanges(),this.isImport?this.previousState():n&&this.router.navigate(["..",e.id,"edit"],{relativeTo:this.route,skipLocationChange:!0})}onSaveError=e=>{e?.error&&e.error.title&&this.alertService.addErrorAlert(e.error.title,e.error.message,e.error.params),this.alertService.error("artemisApp.quizExercise.saveError"),this.isSaving=!1,this.changeDetector.detectChanges()};prepareEntity(e){this.isExamMode||(e.releaseDate=e.releaseDate?f(e.releaseDate):f(),e.duration=Number(e.duration),e.duration=isNaN(e.duration)?10:e.duration)}onDurationChange(){if(this.isExamMode){if(this.quizExercise.releaseDate&&this.quizExercise.dueDate){let e=f(this.quizExercise.dueDate).diff(this.quizExercise.releaseDate,"s");this.quizExercise.duration=Oe(e),this.updateDuration(),this.cacheValidation()}}else{let e=f.duration(this.duration.minutes,"minutes").add(this.duration.seconds,"seconds");this.quizExercise.duration=Math.min(Math.max(e.asSeconds(),0),10*60*60),this.updateDuration(),this.cacheValidation()}}updateDuration(){let e=f.duration(this.quizExercise.duration,"seconds");this.changeDetector.detectChanges(),this.duration.minutes!==void 0&&(this.duration.minutes=60*e.hours()+e.minutes()),this.duration.seconds!==void 0&&(this.duration.seconds=e.seconds())}previousState(){this.navigationUtilService.navigateBackFromExerciseUpdate(this.quizExercise)}get hasSavedQuizStarted(){return!!(this.savedEntity&&this.savedEntity.quizBatches&&this.savedEntity.quizBatches.some(e=>f(e.startTime).isBefore(f())))}includedInOverallScoreChange(e){this.quizExercise.includedInOverallScore=e,this.cacheValidation()}computeInvalidReasons(){let e=new Array;return this.quizExercise?super.computeInvalidReasons().concat(e):[]}isSaveDisabled(){return this.isSaving||!this.pendingChangesCache||!this.quizIsValid||this.hasSavedQuizStarted||this.quizExercise.dueDateError||this.hasErrorInQuizBatches()}hasErrorInQuizBatches(){return!!this.quizExercise?.quizBatches?.some(e=>e.startTimeError)}handleQuestionChanged(){this.cacheValidation()}static \u0275fac=(()=>{let e;return function(t){return(e||(e=P(o)))(t||o)}})();static \u0275cmp=H({type:o,selectors:[["jhi-quiz-exercise-detail"]],viewQuery:function(n,t){if(n&1&&J(oi,5),n&2){let c;$(c=ee())&&(t.quizQuestionListEditComponent=c.first)}},hostBindings:function(n,t){n&1&&C("beforeunload",function(b){return t.unloadNotification(b)},!1,G)},features:[ie([Ze,Ke]),Z,R],decls:1,vars:1,consts:[["tooltipTranslate",""],["warningTranslate",""],["quizQuestionsEdit",""],[1,"row"],[1,"col-lg-12"],[1,"title"],[1,"col-sm","d-flex","align-items-center"],[3,"type"],[1,"badge","bg-info","align-text-top","float-end"],["jhiTranslate","artemisApp.quizExercise.maxScore"],[1,"badge","max-score"],["jhiTranslate","artemisApp.quizExercise.maxScore",1,"sr-only"],[1,"edit-quiz"],["name","editForm","role","form","novalidate",""],[3,"onTitleChange","onChannelNameChange","exercise","course","isExamMode","isImport"],[1,"col-lg-4","col-sm-12"],[1,"form-group"],["jhiTranslate","artemisApp.exercise.difficulty",1,"form-control-label"],[3,"ngModelChange","exercise"],["for","cbRandomizeOrder","jhiTranslate","artemisApp.quizExercise.options"],[1,"form-check","custom-control","custom-checkbox"],["type","checkbox","id","cbRandomizeOrder",1,"form-check-input","custom-control-input",3,"ngModelChange","ngModel"],["for","cbRandomizeOrder","jhiTranslate","artemisApp.quizExercise.randomizeQuestionOrder",1,"form-check-label","custom-control-label"],[1,"col"],[1,"form-control-label",3,"jhiTranslate"],[1,"edit-quiz-footer"],[1,"container"],[1,"edit-quiz-footer-content"],["id","quiz-save","jhiTranslate","entity.action.save","tooltip-placement","top-right auto","tooltip-class","invalid-reasons-tooltip",1,"btn","btn-success",3,"click","disabled","ngbTooltip"],["id","jhi-text-exercise-heading-create","jhiTranslate","artemisApp.quizExercise.home.createLabel"],["id","jhi-text-exercise-heading-edit","jhiTranslate","artemisApp.quizExercise.home.editLabel"],["id","jhi-text-exercise-heading-import","jhiTranslate","artemisApp.quizExercise.home.importLabel"],[1,"quiz-is-active-background"],[1,"quiz-is-active-overlay","alert","alert-warning"],["jhiTranslate","artemisApp.quizExercise.edit.quizHasStarted"],[1,"form-group","position-relative"],["jhiTranslate","artemisApp.exercise.categories",1,"form-control-label"],["text","artemisApp.exercise.categoriesTooltip"],[3,"selectedCategories","ngModelChange","categories","existingCategories"],["for","quiz-duration-minutes","jhiTranslate","artemisApp.quizExercise.duration"],[1,"d-flex","align-items-center"],["id","quiz-duration-minutes","title","Duration","type","number","min","0","max","600",1,"form-control","me-2",2,"width","70px",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.quizExercise.minutes"],["id","quiz-duration-seconds","title","Duration","type","number","max","60","min","-1",1,"form-control","me-2","ms-2",2,"width","70px",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.quizExercise.seconds"],["for","quizMode","jhiTranslate","artemisApp.quizExercise.quizMode.title",1,"colon-suffix","no-flex-shrink"],["text","artemisApp.quizExercise.quizMode.explanation"],["id","quizMode",1,"form-select",3,"ngModelChange","ngModel"],["jhiTranslate","artemisApp.quizExercise.quizMode.synchronized",3,"value"],["jhiTranslate","artemisApp.quizExercise.quizMode.batched",3,"value"],["jhiTranslate","artemisApp.quizExercise.quizMode.individual",3,"value"],["id","pick-releaseDate","name","releaseDate",1,"form-element",3,"ngModelChange","valueChange","labelName","labelTooltip","ngModel","error"],["id","pick-dueDate","name","dueDate",1,"form-element",3,"valueChange","ngModelChange","error","labelName","ngModel"],["jhiTranslate","artemisApp.quizExercise.dueDateError",1,"invalid-feedback"],["type","checkbox","id","cbScheduleQuizStart",1,"form-check-input","custom-control-input",3,"ngModelChange","ngModel"],["for","cbScheduleQuizStart","jhiTranslate","artemisApp.quizExercise.setStartTime",1,"form-check-label","custom-control-label"],["text","artemisApp.quizExercise.startTimeExplanation"],["title","artemisApp.quizExercise.addBatch",3,"click","btnType"],["name","startTime",1,"form-element",3,"valueChange","ngModelChange","shouldDisplayTimeZoneWarning","labelName","error","ngModel"],[1,"invalid-feedback"],[3,"click","btnType","icon"],[3,"includedInOverallScoreChange","includedInOverallScore","allowNotIncluded"],["id","competencies","name","competencyLinks",3,"ngModelChange","labelName","labelTooltip","ngModel"],[3,"onQuestionAdded","onQuestionDeleted","onQuestionUpdated","courseId","quizQuestions"],[1,"form-group","flex-fill","ms-3"],[1,"form-group","flex-fill"],["minlength","3","type","text","name","notificationText","id","field_notification_text",1,"form-control","flex-fill",3,"ngModelChange","placeholder","ngModel"],["jhiTranslate","artemisApp.quizExercise.edit.saved",1,"badge","bg-success"],["jhiTranslate","artemisApp.quizExercise.edit.pendingChanges",1,"badge","bg-secondary"],["jhiTranslate","artemisApp.quizExercise.edit.saving",1,"badge","bg-secondary"],[3,"jhiTranslate","translateValues"],[3,"jhiTranslate"],["tooltip-placement","top-right auto",1,"badge","bg-danger",3,"ngbTooltip"],[3,"icon"],["jhiTranslate","artemisApp.quizExercise.edit.invalidInput"],["tooltip-placement","top-right auto",1,"badge","bg-warning",3,"ngbTooltip"],["jhiTranslate","artemisApp.quizExercise.edit.warning"],["id","quiz-cancel-back-button",1,"btn","btn-default",3,"click","ngClass","jhiTranslate"]],template:function(n,t){n&1&&h(0,Wi,127,29),n&2&&x(t.quizExercise&&t.quizExercise.isEditable?0:-1)},dependencies:[Ne,Be,ve,_e,ge,fe,de,he,ce,Ce,ue,pe,qe,ze,Ee,xe,me,Je,Le,$e,Ye,We,Fe,Xe,Pe,ei,ye,ke,re,ae,je],styles:[`.title{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.title>span{margin-bottom:10px}.title .badge.max-score{background:var(--quiz-exercise-detail-max-score-background);color:var(--quiz-exercise-detail-max-score-color)}.btn-block{display:block;width:100%}.quiz-is-active-background{position:fixed;inset:0;z-index:6;background:#0006}
`,`.question-options{display:flex;align-items:center;justify-content:space-between;width:100%}.question-options input,.question-options .input-group-btn{display:inline-block;width:1rem}.question-options .datepicker-input{max-width:140px}.question-options .checkbox{display:inline-block}.question-options .input-group>input{height:100%}.question-options .form-group{display:flex;align-items:center;margin:0 5px 15px}.question-options .form-group>*{margin:0 4px}.question-options .background-file{display:flex}.edit-quiz-footer-content{height:100%;display:flex;align-items:center;justify-content:space-between}.edit-quiz-footer-content .form-control,.edit-quiz-footer-content .input-group-btn{width:auto}.edit-quiz-footer-content .form-group{display:flex;align-items:center}.edit-quiz-footer-content .form-group>*{margin:0 4px}.edit-quiz-footer-content .invalid-reasons-tooltip .tooltip-inner{text-align:left;max-width:300px}.edit-quiz-footer-content .invalid-reasons-tooltip .tooltip-inner p{margin:4px 0;padding:4px}.edit-quiz-footer-content #remaining-time{text-align:center;width:100%}.edit-quiz-footer-content #remaining-time>div{text-align:center;width:100%}.edit-quiz-footer-content #remaining-time-value{font-weight:700;white-space:nowrap}.edit-quiz-footer-content #quiz-score{text-align:center;font-weight:700;color:green}.edit-quiz-footer-content #quiz-score.incorrect{color:#000}.edit-quiz-footer-content .time-warning{color:orange}.edit-quiz-footer-content .time-critical{color:red}@media (max-width: 767.98px){.edit-quiz-footer-content .connection-status-quiz{font-size:11px}}@media (max-width: 767.98px){.edit-quiz-footer-content{font-size:12px}}
`],encapsulation:2,changeDetection:0})}return o})();export{At as QuizExerciseUpdateComponent};
//# sourceMappingURL=quiz-exercise-update.component-2BO6H2G7.js.map

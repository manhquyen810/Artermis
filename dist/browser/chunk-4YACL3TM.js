import{d as O,g as R,h as N}from"./chunk-KZGAUMRM.js";import{a as W}from"./chunk-35PLMJNP.js";import{b as H}from"./chunk-YLNI6ED3.js";import{a as L}from"./chunk-U54OSGNH.js";import{n as b,s as P}from"./chunk-IOA4DPXY.js";import{Bb as M,Db as d,Ea as I,Ib as w,La as F,Mc as _,Oc as v,Tb as E,Vb as C,Zb as g,_a as z,dd as r,ed as D,kc as f,rd as k,sc as x,xc as l,ya as y,yc as c,zc as u}from"./chunk-5LC5EQRR.js";var q=(()=>{class i{solve(t,e){if(!t.correctMappings)return[];let n=new Array,o=t.dragItems,m=t.dropLocations?.filter(a=>t.correctMappings?.some(s=>this.isSameEntityWithTempId(s.dropLocation,a),this),this);return e&&e.forEach(function(a){let s=this.getMapping(t.correctMappings,a.dragItem,a.dropLocation);s&&(n.push(s),m=m?.filter(function(p){return!this.isSameEntityWithTempId(p,a.dropLocation)},this),o=o?.filter(function(p){return!this.isSameEntityWithTempId(p,a.dragItem)},this))},this),this.solveRec(t.correctMappings,m,o,n)?n:[]}solveRec(t,e,n,o){if(!e||e.length===0)return!0;let m=e[0];return n?.some(function(T,a){let s=this.getMapping(t,T,m);if(s){o.push(s),e.splice(0,1),n.splice(a,1);let p=this.solveRec(t,e,n,o);return e.splice(0,0,m),n.splice(a,0,T),p||o.pop(),p}else return!1},this)}validateNoMisleadingCorrectMapping(t){if(!t.correctMappings||!t.dragItems)return!0;for(let e=0;e<t.dragItems.length;e++)for(let n=0;n<e;n++){let o=t.dragItems[e],m=t.dragItems[n];if(t.dropLocations?.some(function(a){let s=this.isMappedTogether(t.correctMappings,o,a),p=this.isMappedTogether(t.correctMappings,m,a);return s&&p},this)){let a=this.getAllDropLocationsForDragItem(t.correctMappings,o),s=this.getAllDropLocationsForDragItem(t.correctMappings,m);if(!this.isSameSetOfDropLocations(a,s))return!1}}return!0}isMappedTogether(t,e,n){return!!this.getMapping(t,e,n)}getMapping(t,e,n){return t.find(o=>this.isSameEntityWithTempId(n,o.dropLocation)&&this.isSameEntityWithTempId(e,o.dragItem),this)}getAllDropLocationsForDragItem(t,e){return t.filter(n=>this.isSameEntityWithTempId(n.dragItem,e)).map(n=>n.dropLocation)}isSameSetOfDropLocations(t,e){return t.length!==e.length?!1:t.every(n=>e.some(o=>this.isSameEntityWithTempId(n,o)))&&e.every(n=>t.some(o=>this.isSameEntityWithTempId(o,n)))}isSameEntityWithTempId(t,e){return t===e||t!=null&&e!=null&&(t.id&&e.id&&t.id===e.id||t.tempID!=null&&e.tempID!=null&&t.tempID===e.tempID)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function j(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}var S=class{id;tempID;constructor(){this.tempID=j()}},U=class extends S{posX;posY;width;height;invalid=!1;question;constructor(){super()}};var B=class extends S{pictureFilePath;text;question;invalid=!1;constructor(){super()}};var V=(()=>{class i{renderer=I(w);fitText=!0;compression=1;activateOnResize=!0;minFontSize=0;maxFontSize=Number.POSITIVE_INFINITY;delay=100;innerHTML;fontUnit="px";fitTextElement;computed;newlines;lineHeight;display;fitTextParent;fitTextMinFontSize;fitTextMaxFontSize;calcSize=10;resizeTimeout;constructor(){let t=I(z);this.fitTextElement=t.nativeElement,this.fitTextParent=this.fitTextElement.parentElement,this.computed=window.getComputedStyle(this.fitTextElement),this.newlines=this.fitTextElement.childElementCount>0?this.fitTextElement.childElementCount:1,this.lineHeight=this.computed.lineHeight,this.display=this.computed.display}onWindowResize=()=>{this.activateOnResize&&this.setFontSize()};ngOnInit(){this.fitTextMinFontSize=this.minFontSize==="inherit"?Number(this.computed.fontSize):this.minFontSize,this.fitTextMaxFontSize=this.maxFontSize==="inherit"?Number(this.computed.fontSize):this.maxFontSize}ngAfterViewInit(){this.setFontSize(0)}ngOnChanges(t){t.compression&&!t.compression.firstChange&&this.setFontSize(0),t.innerHTML&&(this.fitTextElement.innerHTML=this.innerHTML,t.innerHTML.firstChange||this.setFontSize(0))}ngOnDestroy(){clearTimeout(this.resizeTimeout)}setFontSize=(t=this.delay)=>{this.resizeTimeout=setTimeout(()=>{this.fitTextElement.offsetHeight*this.fitTextElement.offsetWidth!==0&&(this.setStyles(this.calcSize,1,"inline-block"),this.setStyles(this.calculateNewFontSize(),this.lineHeight,this.display))},t)};calculateNewFontSize=()=>{let t=this.calcSize*this.newlines/this.fitTextElement.offsetWidth/this.newlines;return Math.max(Math.min((this.fitTextParent.offsetWidth-(parseFloat(getComputedStyle(this.fitTextParent).paddingLeft)+parseFloat(getComputedStyle(this.fitTextParent).paddingRight))-6)*t*this.compression,this.fitTextMaxFontSize),this.fitTextMinFontSize)};setStyles=(t,e,n)=>{this.renderer.setStyle(this.fitTextElement,"fontSize",t.toString()+this.fontUnit),this.renderer.setStyle(this.fitTextElement,"lineHeight",e.toString()),this.renderer.setStyle(this.fitTextElement,"display",n)};static \u0275fac=function(e){return new(e||i)};static \u0275dir=C({type:i,selectors:[["","fitText",""]],hostBindings:function(e,n){e&1&&_("resize",function(){return n.onWindowResize()},!1,M)},inputs:{fitText:"fitText",compression:"compression",activateOnResize:"activateOnResize",minFontSize:"minFontSize",maxFontSize:"maxFontSize",delay:"delay",innerHTML:"innerHTML",fontUnit:"fontUnit"},features:[F]})}return i})();var X=i=>({"min-width":i});function Y(i,h){if(i&1&&(r(0,`
                `),u(1,"jhi-secured-image",3),r(2,`
            `)),i&2){let t=v(2);d(),f("src",t.filePreviewPaths.get(t.dragItem.pictureFilePath)||t.dragItem.pictureFilePath)("mobileDragAndDrop",t.isMobile)}}function G(i,h){i&1&&u(0,"div")}function J(i,h){if(i&1&&(r(0,`
        `),l(1,"div",1),r(2,`
            `),g(3,Y,3,2)(4,G,1,0,"div",2),r(5,`
        `),c(),r(6,`
    `)),i&2){let t=v();d(),f("cdkDragDisabled",t.clickDisabled)("cdkDragData",t.dragItem),d(2),x(t.dragItem.pictureFilePath?3:-1)}}function K(i,h){i&1&&u(0,"div")}function Q(i,h){if(i&1&&(l(0,"div",8),r(1,`
                        `),l(2,"div",9),r(3),c(),r(4,`
                    `),c()),i&2){let t=v(2);d(3),D(t.dragItem.text)}}function Z(i,h){if(i&1&&(r(0,`
        `),l(1,"div",4),r(2,`
            `),l(3,"div",5),r(4,`
                `),l(5,"div",6),r(6,`
                    `),l(7,"span"),r(8),c(),r(9,`
                    `),g(10,K,1,0,"div",2),r(11,`
                    `),g(12,Q,5,1,"div",7),r(13,`
                `),c(),r(14,`
            `),c(),r(15,`
        `),c(),r(16,`
    `)),i&2){let t=v();d(3),f("fitText",!0)("activateOnResize",!0)("maxFontSize",17)("minFontSize",15)("delay",150),d(2),f("cdkDragDisabled",t.clickDisabled)("cdkDragData",t.dragItem),d(3),D(t.dragItem.text)}}function $(i,h){i&1&&(r(0,`
        `),l(1,"div",10),r(2,`
            `),u(3,"span",11),r(4,`
        `),c(),r(5,`
    `))}var St=(()=>{class i{minWidth;dragItem;clickDisabled;invalid;filePreviewPaths=new Map;isMobile=!1;ngOnInit(){this.isMobile=W(window.navigator.userAgent).any}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["jhi-drag-item"]],inputs:{minWidth:"minWidth",dragItem:"dragItem",clickDisabled:"clickDisabled",invalid:"invalid",filePreviewPaths:"filePreviewPaths"},decls:6,vars:6,consts:[["ngClass","{'no-click': clickDisabled}",1,"drag-item",3,"ngStyle"],["cdkDrag","",1,"drag-item-picture",3,"cdkDragDisabled","cdkDragData"],[4,"cdkDragPlaceholder"],[3,"src","mobileDragAndDrop"],[1,"drag-item-text"],[3,"fitText","activateOnResize","maxFontSize","minFontSize","delay"],["cdkDrag","",1,"drag-box",3,"cdkDragDisabled","cdkDragData"],["matchSize","",4,"cdkDragPreview"],["matchSize",""],[2,"border","1px solid #000","background","white","color","black","padding","4px","overflow","hidden","text-overflow","ellipsis"],[1,"invalid"],["jhiTranslate","artemisApp.showStatistic.invalid"]],template:function(e,n){e&1&&(l(0,"div",0),r(1,`
    `),g(2,J,7,3)(3,Z,17,8)(4,$,6,0),c(),r(5,`
`)),e&2&&(f("ngStyle",k(4,X,n.minWidth)),d(2),x(n.dragItem&&n.dragItem.pictureFilePath?2:-1),d(),x(n.dragItem&&!n.dragItem.pictureFilePath?3:-1),d(),x(n.invalid?4:-1))},dependencies:[b,P,O,H,N,V,R,L],styles:[`.drag-item{background:transparent;border:none;position:relative;max-width:360px;margin:5px 4px}.drag-item img{max-width:160px;max-height:160px}.drag-item.no-click *{cursor:default!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.drag-item .drag-item-picture{cursor:move;padding:0;margin:0;text-align:center}.drag-item .drag-item-text{display:flex;align-items:center;justify-content:center;text-align:center;height:100%;width:100%;white-space:pre-wrap}.drag-item .drag-item-text div{display:flex;overflow:hidden}.drag-item .drag-item-text span{border:1px solid #000;background:#fff;color:#000;padding:4px;overflow:hidden;text-overflow:ellipsis}.cdk-drag-preview img{max-height:158px;max-width:160px}
`],encapsulation:2})}return i})();export{q as a,S as b,U as c,B as d,St as e};
//# sourceMappingURL=chunk-4YACL3TM.js.map

import{a as X}from"./chunk-DHJSYRNR.js";import{a as W,c as Y}from"./chunk-NTCPM4SY.js";import"./chunk-IJQAYIKN.js";import{a as V}from"./chunk-DMHWBHTD.js";import"./chunk-57BCHYEO.js";import"./chunk-IJRVZ46L.js";import"./chunk-SKB5UJGX.js";import"./chunk-SUUJN3EQ.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-EGRHWZRV.js";import"./chunk-MBS3WUDO.js";import{f as U,g as B}from"./chunk-BDII35IB.js";import"./chunk-LARBQRTJ.js";import"./chunk-T77OIOZ4.js";import"./chunk-Z2YUBN6N.js";import"./chunk-5JBXU6VG.js";import"./chunk-QA7Y7QBM.js";import"./chunk-2CUFQLAH.js";import"./chunk-Z6NSEM73.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import{d as b}from"./chunk-CT44YL7Q.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import{d as P}from"./chunk-EDXSOKK5.js";import{a as r,b as j}from"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{Ka as O}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import{a as M}from"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as N}from"./chunk-U54OSGNH.js";import{f as R,h as F}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as s,Dc as y,Ea as m,Id as k,Ma as g,Mc as T,Na as _,Oc as p,Qa as A,Tb as z,Xb as D,Zb as x,cd as Q,dd as t,ed as I,fd as S,kc as h,rd as L,sc as u,uc as w,vc as E,wc as q,xc as n,yc as a,zc as c}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var $=i=>[i,500];function G(i,d){i&1&&(t(0,`
                                                    `),c(1,"span",17),t(2,`
                                                `))}function H(i,d){if(i&1&&(t(0,`
                                    `),n(1,"li",16),t(2,`
                                        `),n(3,"p"),t(4,`
                                            `),n(5,"span"),t(6),x(7,G,3,0),t(8),a(),t(9,`
                                        `),a(),t(10,`
                                    `),a(),t(11,`
                                `)),i&2){let o=d.$implicit;s(6),S("",o.title,`\xA0
                                                `),s(),u(o.invalid?7:-1),s(),S(`
                                                \xA0(`,o.points,"P)")}}function J(i,d){if(i&1&&(t(0,`
                            `),n(1,"ol"),t(2,`
                                `),E(3,H,12,3,null,null,w),a(),t(5,`
                        `)),i&2){let o=p(2);s(3),q(o.quizExercise.quizQuestions)}}function K(i,d){i&1&&(t(0,`
                                        `),c(1,"span",18),t(2,`
                                    `))}function Z(i,d){i&1&&(t(0,`
                                        `),c(1,"span",19),t(2,`
                                    `))}function tt(i,d){i&1&&(t(0,`
                                    `),c(1,"span",20),t(2,`
                                `))}function et(i,d){i&1&&(t(0,`
                                    `),c(1,"span",21),t(2,`
                                `))}function it(i,d){if(i&1){let o=y();t(0,`
    `),n(1,"div"),t(2,`
        `),n(3,"div",1),t(4,`
            `),n(5,"div",2),t(6,`
                `),n(7,"h3"),t(8),a(),t(9,`
                `),n(10,"div",1),t(11,`
                    `),n(12,"div",3),t(13,`
                        `),c(14,"h4",4),t(15,`
                        `),x(16,J,6,0),a(),t(17,`
                    `),n(18,"div",5,0),t(20,`
                        `),n(21,"p"),t(22,"\xA0"),a(),t(23,`
                        `),n(24,"div",1),t(25,`
                            `),n(26,"div",6),t(27,`
                                `),n(28,"p",7),t(29,`
                                    `),x(30,K,3,0)(31,Z,3,0),a(),t(32,`
                            `),a(),t(33,`
                            `),n(34,"div",8),t(35,`
                                `),n(36,"p",9),t(37,`
                                    `),n(38,"span"),t(39),a(),c(40,"span",10),t(41,`
                                `),a(),t(42,`
                            `),a(),t(43,`
                        `),a(),t(44,`
                        `),c(45,"ngx-charts-bar-vertical",11),t(46,`
                        `),n(47,"div",12),t(48,`
                            `),n(49,"button",13),T("click",function(){g(o);let l=p();return _(l.switchRated())}),t(50,`
                                `),c(51,"fa-icon",14),t(52,`\xA0
                                `),x(53,tt,3,0)(54,et,3,0),a(),t(55,`
                        `),a(),t(56,`
                        `),n(57,"p"),t(58,"\xA0"),a(),t(59,`
                    `),a(),t(60,`
                `),a(),t(61,`
            `),a(),t(62,`
        `),a(),t(63,`
        `),c(64,"jhi-quiz-statistics-footer",15),t(65,`
    `),a(),t(66,`
`)}if(i&2){let o=Q(19),e=p();s(8),I(e.quizExercise.title),s(8),u(e.quizExercise.quizQuestions?16:-1),s(14),u(e.rated?30:-1),s(),u(e.rated?-1:31),s(8),S("",e.participants," "),s(6),h("view",L(23,$,o.offsetWidth))("results",e.ngxData)("scheme",e.ngxColor)("showDataLabel",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("xAxis",!0)("yAxis",!0)("yScaleMax",e.maxScale)("tooltipDisabled",!0)("dataLabelFormatting",e.bindFormatting)("roundEdges",!1),s(6),h("icon",e.faSync),s(2),u(e.rated?53:-1),s(),u(e.rated?-1:54),s(10),h("isQuizStatistic",!0)}}var vt=(()=>{class i extends W{route=m(R);router=m(F);accountService=m(j);quizExerciseService=m(V);websocketService=m(M);changeDetector=m(k);quizExercise;label=[];backgroundColor=[];ratedAverage;unratedAverage;maxScore;websocketChannelForData;faSync=O;ngOnInit(){this.translateService.onLangChange.subscribe(()=>{this.setAxisLabels("showStatistic.quizStatistic.xAxes","showStatistic.quizStatistic.yAxes"),this.ngxData[this.ngxData.length-1].name=this.translateService.instant("showStatistic.quizStatistic.average"),this.ngxData=[...this.ngxData]}),this.route.params.subscribe(o=>{this.accountService.hasAnyAuthorityDirect([r.ADMIN,r.INSTRUCTOR,r.EDITOR,r.TA])&&this.quizExerciseService.find(o.exerciseId).subscribe(e=>{this.loadQuizSuccess(e.body)}),this.websocketChannelForData="/topic/statistic/"+o.exerciseId,this.websocketService.subscribe(this.websocketChannelForData),this.websocketService.receive(this.websocketChannelForData).subscribe(()=>{this.accountService.hasAnyAuthorityDirect([r.ADMIN,r.INSTRUCTOR,r.EDITOR,r.TA])&&this.quizExerciseService.find(o.exerciseId).subscribe(e=>{this.loadQuizSuccess(e.body)})})}),this.changeDetector.detectChanges()}ngOnDestroy(){this.websocketService.unsubscribe(this.websocketChannelForData)}loadQuizSuccess(o){this.accountService.hasAnyAuthorityDirect([r.ADMIN,r.INSTRUCTOR,r.EDITOR,r.TA])||this.router.navigate(["/courses"]),this.quizExercise=o,this.maxScore=X(this.quizExercise),this.loadData()}loadData(){this.label=[],this.backgroundColor=[],this.ratedData=[],this.unratedData=[],this.ratedAverage=0,this.unratedAverage=0;for(let e=0;e<this.quizExercise.quizQuestions.length;e++){let l=this.quizExercise.quizQuestions[e],C=l.quizQuestionStatistic,f=C.ratedCorrectCounter,v=C.unRatedCorrectCounter;this.label.push(e+1+"."),this.backgroundColor.push("#5bc0de"),this.ratedData.push(f),this.unratedData.push(v),this.ratedAverage=this.ratedAverage+f*l.points,this.unratedAverage=this.unratedAverage+v*l.points}for(let e=0;e<this.quizExercise.quizQuestions.length;e++)this.quizExercise.quizQuestions[e].invalid&&(this.backgroundColor[e]="#949494");this.backgroundColor.push("#1e3368"),this.ratedData.push(b(this.ratedAverage/this.maxScore,2)),this.unratedData.push(b(this.unratedAverage/this.maxScore,2));let o=this.translateService.instant("artemisApp.showStatistic.quizStatistic.average");this.label.push(o),this.chartLabels=this.label,this.ngxColor.domain=this.backgroundColor,this.loadDataInDiagram()}loadDataInDiagram(){this.setData(this.quizExercise.quizPointStatistic),this.pushDataToNgxEntry(this.changeDetector),this.setAxisLabels("artemisApp.showStatistic.quizStatistic.xAxes","artemisApp.showStatistic.quizStatistic.yAxes")}static \u0275fac=(()=>{let o;return function(l){return(o||(o=A(i)))(l||i)}})();static \u0275cmp=z({type:i,selectors:[["jhi-quiz-statistic"]],features:[D],decls:1,vars:1,consts:[["containerRef",""],[1,"row"],[1,"col-md-8","offset-md-2","text-center"],[1,"col-md-4","text-start"],["jhiTranslate","artemisApp.showStatistic.quizQuestions"],[1,"col-md-8","text-center"],[1,"col-md-7","text-start"],["id","text",1,"chart-title-text"],[1,"col-md-5","text-end"],[1,"chart-title-text"],["jhiTranslate","artemisApp.showStatistic.participants"],[3,"view","results","scheme","showDataLabel","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxis","yAxis","yScaleMax","tooltipDisabled","dataLabelFormatting","roundEdges"],[1,"col-md-12","text-center","button-row"],["type","button",1,"btn","btn-primary",3,"click"],[3,"icon"],[3,"isQuizStatistic"],[1,"question-title"],["jhiTranslate","artemisApp.showStatistic.invalid",1,"invalid-question"],["jhiTranslate","artemisApp.showStatistic.quizStatistic.titleRated"],["jhiTranslate","artemisApp.showStatistic.quizStatistic.titleUnrated"],["jhiTranslate","artemisApp.showStatistic.switchToUnrated"],["jhiTranslate","artemisApp.showStatistic.switchToRated"]],template:function(e,l){e&1&&x(0,it,67,25),e&2&&u(l.quizExercise?0:-1)},dependencies:[N,B,U,P,Y],styles:[".chart-title-text[_ngcontent-%COMP%]{font-size:large}.question-title[_ngcontent-%COMP%]{font-size:medium}.invalid-question[_ngcontent-%COMP%]{color:red}.button-row[_ngcontent-%COMP%]{padding-left:61px}@media (max-width: 575px){.button-row[_ngcontent-%COMP%]{padding-left:0}}@media (max-width: 430px){.show-solution[_ngcontent-%COMP%]{margin-bottom:.25rem}}","[_nghost-%COMP%]  .textDataLabel{font-weight:bolder;font-size:small!important;alignment-baseline:middle;text-anchor:start}@media (min-width: 1420px){[_nghost-%COMP%]  .textDataLabel{transform:rotate(0);font-size:medium!important;alignment-baseline:baseline;text-anchor:middle}}"]})}return i})();export{vt as QuizStatisticComponent};
//# sourceMappingURL=quiz-statistic.component-PVVNMWYQ.js.map

import{a as Q}from"./chunk-G5WFAKZV.js";import{a as N}from"./chunk-SLVT6IA5.js";import"./chunk-FAFORKWV.js";import{a as M}from"./chunk-4NYYKXW4.js";import"./chunk-MY22ELD7.js";import"./chunk-W3K7VYWC.js";import"./chunk-QU4DXSXD.js";import{j as F}from"./chunk-5QODR5GQ.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-22YQSX6Z.js";import"./chunk-R56P6PAY.js";import"./chunk-65Z25AP3.js";import"./chunk-5M3YV54C.js";import"./chunk-RYZEETVB.js";import"./chunk-VTF2OQPK.js";import"./chunk-BNRTXX46.js";import"./chunk-VPHPBAVR.js";import"./chunk-N4VVKRBU.js";import"./chunk-5AQXEKLE.js";import"./chunk-3JSWSN6W.js";import"./chunk-7XNS72RJ.js";import"./chunk-KYCCMZSV.js";import"./chunk-DXTZ4GAW.js";import"./chunk-2UXGFGK3.js";import"./chunk-O4VJ5OXY.js";import"./chunk-BDII35IB.js";import"./chunk-LARBQRTJ.js";import"./chunk-OTNXTVPX.js";import"./chunk-Z2YUBN6N.js";import"./chunk-OTCBNILH.js";import"./chunk-AO5E7TEY.js";import"./chunk-6EYB5QBP.js";import"./chunk-GERFCPB6.js";import"./chunk-JHBUBEY6.js";import"./chunk-4I367PEU.js";import"./chunk-QA7Y7QBM.js";import"./chunk-ZPITQMA6.js";import"./chunk-2CUFQLAH.js";import"./chunk-Z6NSEM73.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as L}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import"./chunk-JNO6DNVW.js";import"./chunk-EELXLOHY.js";import{K as R}from"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import{a as k}from"./chunk-K3W6YFKH.js";import{c as U}from"./chunk-JXJXC4DZ.js";import{d as z}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{y as V,za as I}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as D}from"./chunk-U54OSGNH.js";import{f as A}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import{O as j}from"./chunk-IOA4DPXY.js";import{Db as l,Dc as S,Ea as d,Ma as c,Mc as f,Na as u,Oc as h,Tb as y,Yc as T,Zb as x,Zc as B,_c as w,dd as i,kc as s,sc as g,xc as r,ya as C,yc as a,yd as P,zc as p,zd as _}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var $=(()=>{class t{http=d(j);resourceUrl="/api/programming/programming-exercises";getBuildPlan(e){return this.http.get(`${this.resourceUrl}/${e}/build-plan/for-editor`,{observe:"response"})}putBuildPlan(e,n){return this.http.put(`${this.resourceUrl}/${e}/build-plan`,n,{observe:"response"})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var H=["editor"];function q(t,E){if(t&1&&(i(0,`
                    `),p(1,"jhi-updating-result",13),i(2,`
                `)),t&2){let e=h(2);l(),s("exercise",e.programmingExercise)("participation",e.programmingExercise.templateParticipation)("showUngradedResults",!0)("personalParticipation",!1)}}function W(t,E){if(t&1&&(i(0,`
                    `),p(1,"jhi-updating-result",13),i(2,`
                `)),t&2){let e=h(2);l(),s("exercise",e.programmingExercise)("participation",e.programmingExercise.solutionParticipation)("showUngradedResults",!0)("personalParticipation",!1)}}function G(t,E){if(t&1&&(i(0,`
        `),r(1,"div",10),i(2,`
            `),r(3,"div"),i(4,`
                `),p(5,"span",11),i(6,`
                `),x(7,q,3,4),a(),i(8,`
            `),r(9,"div"),i(10,`
                `),p(11,"span",12),i(12,`
                `),x(13,W,3,4),a(),i(14,`
        `),a(),i(15,`
    `)),t&2){let e=h();l(7),g(e.programmingExercise.templateParticipation?7:-1),l(6),g(e.programmingExercise.solutionParticipation?13:-1)}}var fe=(()=>{class t{buildPlanService=d($);programmingExerciseService=d(N);alertService=d(U);activatedRoute=d(A);faCircleNotch=V;farPlayCircle=I;editor;isLoading=!1;loadingResults=!0;exerciseId;programmingExercise;buildPlan;ngOnInit(){this.activatedRoute.data.subscribe(({exercise:e})=>{this.programmingExercise=e,this.loadSolutionAndTemplateParticipation()})}ngAfterViewInit(){this.loadBuildPlan(this.activatedRoute.snapshot.params.exerciseId)}loadSolutionAndTemplateParticipation(){this.programmingExerciseService.findWithTemplateAndSolutionParticipationAndLatestResults(this.programmingExercise.id).subscribe(e=>{this.programmingExercise=e.body,this.exerciseId=this.programmingExercise.id,this.loadingResults=!1})}loadBuildPlan(e){this.isLoading=!0,this.buildPlanService.getBuildPlan(e).subscribe({next:n=>{this.buildPlan=n.body,this.initEditor(),this.isLoading=!1},error:n=>{this.buildPlan=void 0,this.isLoading=!1,n.status==404?this.alertService.error("artemisApp.programmingExercise.buildPlanFetchError"):L(this.alertService,n)}})}initEditor(){this.onBuildPlanUpdate(),this.editor.layout()}onBuildPlanUpdate(){let e=this.buildPlan?.buildPlan??"";this.editor.setText(e)}submit(){this.buildPlan&&this.buildPlanService.putBuildPlan(this.exerciseId,this.buildPlan).subscribe(e=>{this.buildPlan=e.body,this.onBuildPlanUpdate()})}onTextChanged(e){this.buildPlan.buildPlan=e}updateTabSize(e){this.editor.updateModelIndentationSize(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=y({type:t,selectors:[["jhi-build-plan-editor"]],viewQuery:function(n,o){if(n&1&&T(H,7),n&2){let m;B(m=w())&&(o.editor=m.first)}},decls:30,vars:14,consts:[["editor",""],[1,"d-flex","align-content-between","flex-wrap","mb-2"],["id","submit_button","type","button",1,"guided-tour-submit-button","btn","btn-success","navbar-btn","ms-auto",3,"click","disabled","ngbTooltip"],[3,"icon"],["jhiTranslate","artemisApp.editor.submit"],[1,"card","build-plan-editor"],[3,"onValidateTabSize","fileName","isLoading"],[1,"d-flex","card-body","build-plan-editor__content"],[1,"build-plan-editor__content__editor"],["id","build-plan-editor",3,"textChanged","stickyScroll","readOnly","shrinkToFit","textChangedEmitDelay"],[1,"f-flex","flex-column"],["jhiTranslate","artemisApp.participation.templateParticipation",1,"me-1"],["jhiTranslate","artemisApp.participation.solutionParticipation",1,"me-1"],[3,"exercise","participation","showUngradedResults","personalParticipation"]],template:function(n,o){if(n&1){let m=S();r(0,"div",1),i(1,`
    `),x(2,G,16,2),r(3,"button",2),P(4,"artemisTranslate"),f("click",function(){return c(m),u(o.submit())}),i(5,`
        `),r(6,"span"),i(7,`
            `),p(8,"fa-icon",3),i(9,`
            `),p(10,"span",4),i(11,`
        `),a(),i(12,`
    `),a(),i(13,`
`),a(),i(14,`
`),r(15,"div",5),i(16,`
    `),r(17,"jhi-code-editor-header",6),P(18,"artemisTranslate"),f("onValidateTabSize",function(b){return c(m),u(o.updateTabSize(b))}),a(),i(19,`
    `),r(20,"div",7),i(21,`
        `),r(22,"div",8),i(23,`
            `),r(24,"jhi-monaco-editor",9,0),f("textChanged",function(b){return c(m),u(o.onTextChanged(b))}),a(),i(26,`
        `),a(),i(27,`
    `),a(),i(28,`
`),a(),i(29,`
`)}n&2&&(l(2),g(o.loadingResults?-1:2),l(),s("disabled",!o.buildPlan)("ngbTooltip",_(4,10,"artemisApp.editor.submitDescription")),l(5),s("icon",o.farPlayCircle),l(9),s("fileName",_(18,12,"artemisApp.programmingExercise.buildplan"))("isLoading",o.isLoading),l(7),s("stickyScroll",!1)("readOnly",o.isLoading)("shrinkToFit",!1)("textChangedEmitDelay",200))},dependencies:[D,M,R,z,Q,F,k],styles:[`.build-plan-editor{flex:1 1 auto;display:flex}.build-plan-editor__content{height:60vh;padding:0;display:flex;flex:1 1 auto}.build-plan-editor__content__editor{flex:1 1 auto;max-width:100%;max-height:100%;margin-bottom:.15em}
`],encapsulation:2})}return t})();export{fe as BuildPlanEditorComponent};
//# sourceMappingURL=build-plan-editor.component-VLKBJC2I.js.map

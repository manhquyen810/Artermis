import{a as m}from"./chunk-NTCPM4SY.js";import{a as C}from"./chunk-DMHWBHTD.js";import{a as i,b as S}from"./chunk-R5BZWVRQ.js";import{a as b}from"./chunk-5ZXXURLP.js";import{f as l,h as d}from"./chunk-M6Z6DKZQ.js";import{Ea as s,Id as h,Qa as n,Tb as c,Xb as u}from"./chunk-5LC5EQRR.js";var I="#d9534f",L="#5cb85c",z="#428bca",p="#5bc0de",D="#838383",R=(()=>{class a extends m{route=s(l);router=s(d);accountService=s(S);quizExerciseService=s(C);websocketService=s(b);changeDetector=s(h);question;questionStatistic;quizExercise;questionIdParam;sub;labels=[];solutionLabels=[];ratedCorrectData;unratedCorrectData;maxScore;showSolution=!1;websocketChannelForData;questionTextRendered;backgroundColors=[];backgroundSolutionColors=[];ngOnInit(){this.translateService.onLangChange.subscribe(()=>{this.setAxisLabels("showStatistic.questionStatistic.xAxes","showStatistic.questionStatistic.yAxes")}),this.sub=this.route.params.subscribe(t=>{this.questionIdParam=+t.questionId,this.accountService.hasAnyAuthorityDirect([i.ADMIN,i.INSTRUCTOR,i.EDITOR,i.TA])&&this.quizExerciseService.find(t.exerciseId).subscribe(e=>{this.loadQuiz(e.body,!1)}),this.websocketChannelForData="/topic/statistic/"+t.exerciseId,this.websocketService.subscribe(this.websocketChannelForData),this.websocketService.receive(this.websocketChannelForData).subscribe(e=>{this.loadQuiz(e,!0)})})}ngOnDestroy(){this.websocketService.unsubscribe(this.websocketChannelForData)}resetLabelsColors(){this.labels=[],this.solutionLabels=[],this.backgroundColors=[],this.backgroundSolutionColors=[]}resetData(){this.ratedData=[],this.unratedData=[]}addData(t,e){this.ratedData.push(t),this.unratedData.push(e)}getLetter(t){return String.fromCharCode(65+t)}updateData(){this.ratedCorrectData=this.questionStatistic.ratedCorrectCounter,this.unratedCorrectData=this.questionStatistic.unRatedCorrectCounter,this.chartLabels=this.labels,this.loadDataInDiagram()}switchSolution(){this.showSolution=!this.showSolution,this.loadDataInDiagram()}loadQuizCommon(t){this.accountService.hasAnyAuthorityDirect([i.ADMIN,i.INSTRUCTOR,i.EDITOR,i.TA])||this.router.navigateByUrl("courses"),this.quizExercise=t;let e=this.quizExercise.quizQuestions?.filter(o=>this.questionIdParam===o.id)[0];if(!e){this.router.navigateByUrl("courses");return}return this.question=e,this.questionStatistic=e.quizQuestionStatistic,e}loadInvalidLayout(t){let e=this.translateService.instant("artemisApp.showStatistic.invalid");t.forEach((o,r)=>{o.invalid&&(this.backgroundColors[r]=D,this.backgroundSolutionColors[r]=D,this.labels[r]=this.getLetter(r)+". "+e)})}addLastBarLayout(t){this.backgroundColors.push(p),this.backgroundSolutionColors[t]=p;let e=this.translateService.instant("artemisApp.showStatistic.quizStatistic.yAxes");this.solutionLabels[t]=e,this.labels[t]=e,this.chartLabels=this.labels}loadDataInDiagram(){if(this.ngxColor.domain=[],this.showSolution){this.ngxColor.domain=this.backgroundSolutionColors,this.setData(this.questionStatistic);let t=this.rated?this.ratedCorrectData:this.unratedCorrectData;this.data.push(t),this.chartLabels=this.solutionLabels}else this.ngxColor.domain=this.backgroundColors,this.setData(this.questionStatistic),this.chartLabels=this.labels;this.pushDataToNgxEntry(this.changeDetector),this.setAxisLabels("artemisApp.showStatistic.questionStatistic.xAxes","artemisApp.showStatistic.questionStatistic.yAxes")}static \u0275fac=(()=>{let t;return function(o){return(t||(t=n(a)))(o||a)}})();static \u0275cmp=c({type:a,selectors:[["ng-component"]],features:[u],decls:0,vars:0,template:function(e,o){},encapsulation:2})}return a})();export{I as a,L as b,z as c,R as d};
//# sourceMappingURL=chunk-ITOSPRIX.js.map

{
  "version": 3,
  "sources": ["src/main/webapp/app/course/course-access-storage.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { LocalStorageService } from 'ngx-webstorage';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CourseAccessStorageService {\r\n    private localStorage = inject(LocalStorageService);\r\n\r\n    public static readonly STORAGE_KEY = 'artemis.courseAccess';\r\n    public static readonly STORAGE_KEY_DROPDOWN = 'artemis.courseAccessDropdown';\r\n    public static readonly MAX_DISPLAYED_RECENTLY_ACCESSED_COURSES_OVERVIEW = 3;\r\n    // Maximum number of recently accessed courses displayed in the dropdown, including the current course. The current course will be removed before displaying the dropdown so only 6 - 1 courses will be displayed in the dropdown.\r\n    public static readonly MAX_DISPLAYED_RECENTLY_ACCESSED_COURSES_DROPDOWN = 6;\r\n\r\n    onCourseAccessed(courseId: number, storageKey: string, maxAccessedCourses: number): void {\r\n        const courseAccessMap: { [key: number]: number } = this.localStorage.retrieve(storageKey) || {};\r\n\r\n        courseAccessMap[courseId] = Date.now();\r\n\r\n        if (Object.keys(courseAccessMap).length > maxAccessedCourses) {\r\n            const oldestEntry = Object.entries(courseAccessMap).reduce((prev, curr) => (prev[1] < curr[1] ? prev : curr));\r\n            delete courseAccessMap[Number(oldestEntry[0])];\r\n        }\r\n\r\n        this.localStorage.store(storageKey, courseAccessMap);\r\n    }\r\n\r\n    getLastAccessedCourses(storageKey: string): number[] {\r\n        const courseAccessMap: { [key: number]: number } = this.localStorage.retrieve(storageKey) || {};\r\n\r\n        return Object.entries(courseAccessMap)\r\n            .sort((a, b) => b[1] - a[1])\r\n            .map((entry) => Number(entry[0]));\r\n    }\r\n}\r\n"],
  "mappings": "yFAMA,IAAaA,GAA0B,IAAA,CAAjC,MAAOA,CAA0B,CAC3BC,aAAeC,EAAOC,CAAmB,EAE1C,OAAgBC,YAAc,uBAC9B,OAAgBC,qBAAuB,+BACvC,OAAgBC,iDAAmD,EAEnE,OAAgBC,iDAAmD,EAE1EC,iBAAiBC,EAAkBC,EAAoBC,EAA0B,CAC7E,IAAMC,EAA6C,KAAKX,aAAaY,SAASH,CAAU,GAAK,CAAA,EAI7F,GAFAE,EAAgBH,CAAQ,EAAIK,KAAKC,IAAG,EAEhCC,OAAOC,KAAKL,CAAe,EAAEM,OAASP,EAAoB,CAC1D,IAAMQ,EAAcH,OAAOI,QAAQR,CAAe,EAAES,OAAO,CAACC,EAAMC,IAAUD,EAAK,CAAC,EAAIC,EAAK,CAAC,EAAID,EAAOC,CAAK,EAC5G,OAAOX,EAAgBY,OAAOL,EAAY,CAAC,CAAC,CAAC,CACjD,CAEA,KAAKlB,aAAawB,MAAMf,EAAYE,CAAe,CACvD,CAEAc,uBAAuBhB,EAAkB,CACrC,IAAME,EAA6C,KAAKX,aAAaY,SAASH,CAAU,GAAK,CAAA,EAE7F,OAAOM,OAAOI,QAAQR,CAAe,EAChCe,KAAK,CAACC,EAAGC,IAAMA,EAAE,CAAC,EAAID,EAAE,CAAC,CAAC,EAC1BE,IAAKC,GAAUP,OAAOO,EAAM,CAAC,CAAC,CAAC,CACxC,4CA5BS/B,EAA0B,6BAA1BA,EAA0BgC,QAA1BhC,EAA0BiC,UAAAC,WAFvB,MAAM,CAAA,SAETlC,CAA0B,GAAA",
  "names": ["CourseAccessStorageService", "localStorage", "inject", "LocalStorageService", "STORAGE_KEY", "STORAGE_KEY_DROPDOWN", "MAX_DISPLAYED_RECENTLY_ACCESSED_COURSES_OVERVIEW", "MAX_DISPLAYED_RECENTLY_ACCESSED_COURSES_DROPDOWN", "onCourseAccessed", "courseId", "storageKey", "maxAccessedCourses", "courseAccessMap", "retrieve", "Date", "now", "Object", "keys", "length", "oldestEntry", "entries", "reduce", "prev", "curr", "Number", "store", "getLastAccessedCourses", "sort", "a", "b", "map", "entry", "factory", "\u0275fac", "providedIn"]
}

import{a as ce}from"./chunk-3MCREQ7G.js";import{a as se}from"./chunk-E7G2YXU6.js";import{a as ee}from"./chunk-VDG3BHQZ.js";import{a as ae}from"./chunk-23SCGJT4.js";import{b as I}from"./chunk-GGF54D4U.js";import"./chunk-GITU5WHL.js";import"./chunk-G5WFAKZV.js";import{a as re}from"./chunk-VJKFYSDP.js";import{a as oe}from"./chunk-FLTLUO4X.js";import"./chunk-NUC4ZXFE.js";import"./chunk-FLFES4R7.js";import{a as te}from"./chunk-POPNQ63B.js";import{a as $}from"./chunk-A2A6JFSH.js";import"./chunk-MD6Z63OB.js";import"./chunk-M2FHCXD3.js";import"./chunk-RGQYMQQL.js";import{e as ie}from"./chunk-FAFORKWV.js";import"./chunk-FLZTDUOG.js";import{a as ne}from"./chunk-4NYYKXW4.js";import"./chunk-5A2TLSYI.js";import"./chunk-MY22ELD7.js";import"./chunk-W3K7VYWC.js";import{a as Z}from"./chunk-QU4DXSXD.js";import"./chunk-5QODR5GQ.js";import"./chunk-RNPAFOPW.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import"./chunk-EGRHWZRV.js";import"./chunk-MBS3WUDO.js";import"./chunk-22YQSX6Z.js";import"./chunk-R56P6PAY.js";import"./chunk-65Z25AP3.js";import"./chunk-5M3YV54C.js";import"./chunk-RYZEETVB.js";import"./chunk-VTF2OQPK.js";import"./chunk-BNRTXX46.js";import"./chunk-VPHPBAVR.js";import"./chunk-N4VVKRBU.js";import{A as J,n as X}from"./chunk-5AQXEKLE.js";import{b as q,l as P}from"./chunk-3JSWSN6W.js";import"./chunk-7XNS72RJ.js";import"./chunk-KYCCMZSV.js";import{e as Y}from"./chunk-DXTZ4GAW.js";import"./chunk-2UXGFGK3.js";import"./chunk-O4VJ5OXY.js";import"./chunk-BDII35IB.js";import"./chunk-LARBQRTJ.js";import"./chunk-OTNXTVPX.js";import"./chunk-Z2YUBN6N.js";import"./chunk-AO5E7TEY.js";import"./chunk-6EYB5QBP.js";import"./chunk-GERFCPB6.js";import"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import{b as W}from"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-JHBUBEY6.js";import{a as p,c as h,e as V,f as S,i as x,l as U,y as H}from"./chunk-R2SUWIPY.js";import"./chunk-35PLMJNP.js";import"./chunk-4I367PEU.js";import"./chunk-QA7Y7QBM.js";import"./chunk-ZPITQMA6.js";import"./chunk-AZBLKUAM.js";import"./chunk-2CUFQLAH.js";import"./chunk-DRMCDU75.js";import"./chunk-2CSD5TLZ.js";import"./chunk-Z6NSEM73.js";import"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import"./chunk-ZFM7LHJQ.js";import"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import"./chunk-JXJXC4DZ.js";import{d as z}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import{c as M,f as D,k as G}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import{Cd as j,y as L}from"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as Q}from"./chunk-U54OSGNH.js";import{f as B}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as n,Dc as T,Ea as f,Ma as b,Mc as _,Na as E,Oc as m,Tb as F,Yc as R,Zb as g,Zc as k,_c as N,dd as t,ed as A,kc as l,ra as w,rd as K,sc as u,sd as y,xc as a,yc as s,z as O,zc as d}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var le={settingsKey:"code_editor_tour",resetParticipation:V.EXERCISE_PARTICIPATION,steps:[new S({highlightSelector:".editor-sidebar-left .guided-tour-file-browser",headlineTranslateKey:"tour.programmingExercise.codeEditor.fileBrowser.headline",contentTranslateKey:"tour.programmingExercise.codeEditor.fileBrowser.content",highlightPadding:10,orientation:p.RIGHT}),new x({highlightSelector:".list-group-item.file-item:not(.node-selected)",headlineTranslateKey:"tour.programmingExercise.codeEditor.exerciseFile.headline",contentTranslateKey:"tour.programmingExercise.codeEditor.exerciseFile.content",highlightPadding:5,orientation:p.RIGHT,userInteractionEvent:h.CLICK}),new x({highlightSelector:".guided-tour-editor",headlineTranslateKey:"tour.programmingExercise.codeEditor.monacoEditor.headline",contentTranslateKey:"tour.programmingExercise.codeEditor.monacoEditor.content",highlightPadding:5,orientation:p.RIGHT,userInteractionEvent:h.MONACO_EDITOR}),new x({highlightSelector:".guided-tour-save-button",headlineTranslateKey:"tour.programmingExercise.codeEditor.saveChanges.headline",contentTranslateKey:"tour.programmingExercise.codeEditor.saveChanges.content",highlightPadding:10,orientation:p.BOTTOMRIGHT,userInteractionEvent:h.CLICK,triggerNextStep:!0}),new x({highlightSelector:".guided-tour-submit-button",headlineTranslateKey:"tour.programmingExercise.codeEditor.submitChanges.headline",contentTranslateKey:"tour.programmingExercise.codeEditor.submitChanges.content",hintTranslateKey:"tour.programmingExercise.codeEditor.submitChanges.hint",highlightPadding:10,orientation:p.BOTTOMRIGHT,userInteractionEvent:h.CLICK,triggerNextStep:!0}),new x({highlightSelector:"jhi-updating-result",headlineTranslateKey:"tour.programmingExercise.buildLoading.headline",contentTranslateKey:"tour.programmingExercise.buildLoading.content",highlightPadding:10,orientation:p.BOTTOMRIGHT,userInteractionEvent:h.WAIT_FOR_SELECTOR}),new S({highlightSelector:"jhi-updating-result .guided-tour.text-success",headlineTranslateKey:"tour.programmingExercise.buildStatus.headline",contentTranslateKey:"tour.programmingExercise.buildStatus.content",hintTranslateKey:"tour.programmingExercise.buildStatus.hint",highlightPadding:10,orientation:p.BOTTOMRIGHT,skipStepIfNoSelector:!0}),new x({highlightSelector:"jhi-updating-result .guided-tour.text-danger .guided-tour.result",headlineTranslateKey:"tour.programmingExercise.buildStatus.headline",contentTranslateKey:"tour.programmingExercise.buildStatus.content",hintTranslateKey:"tour.programmingExercise.buildStatus.hint",highlightPadding:10,orientation:p.BOTTOMRIGHT,userInteractionEvent:h.CLICK,skipStepIfNoSelector:!0,triggerNextStep:!0}),new S({highlightSelector:".modal-body pre",headlineTranslateKey:"tour.programmingExercise.testCases.headline",contentTranslateKey:"tour.programmingExercise.testCases.content",highlightPadding:20,orientation:p.BOTTOM,skipStepIfNoSelector:!0,closeAction:()=>{U(".modal-header .close")}}),new S({highlightSelector:"jhi-programming-exercise-instructions-task-status .guided-tour.success",headlineTranslateKey:"tour.programmingExercise.testSuccess.headline",contentTranslateKey:"tour.programmingExercise.testSuccess.content",highlightPadding:20,orientation:p.LEFT,skipStepIfNoSelector:!0}),new S({highlightSelector:"jhi-programming-exercise-instructions-task-status .guided-tour.failed",headlineTranslateKey:"tour.programmingExercise.testFailure.headline",contentTranslateKey:"tour.programmingExercise.testFailure.content",highlightPadding:20,orientation:p.LEFT,skipStepIfNoSelector:!0})]};var de=(i,c)=>({points:i,bonusPoints:c}),ue=(i,c)=>({submissionCount:i,totalSubmissions:c}),me=i=>({points:i});function pe(i,c){if(i&1&&(t(0,`
                    `),a(1,"span"),t(2,`
                        `),d(3,"fa-icon",4),t(4,`
                        `),d(5,"p",5),t(6,`
                    `),s(),t(7,`
                `)),i&2){let e=m(2);n(3),l("icon",e.faCircleNotch)}}function ge(i,c){if(i&1&&(t(0,`
                    `),a(1,"span"),t(2,`
                        `),d(3,"fa-icon",6),t(4,`
                        `),d(5,"p",7),t(6,`
                    `),s(),t(7,`
                `)),i&2){let e=m(2);n(3),l("icon",e.faTimesCircle)}}function he(i,c){if(i&1&&(t(0,`
        `),a(1,"nav",2),t(2,`
            `),a(3,"div",3),t(4,`
                `),g(5,pe,8,1)(6,ge,8,1),s(),t(7,`
        `),s(),t(8,`
    `)),i&2){let e=m();n(5),u(e.loadingParticipation?5:-1),n(),u(e.participationCouldNotBeFetched?6:-1)}}function xe(i,c){i&1&&(t(0,`
        `),a(1,"div",8),t(2,`
            `),d(3,"span",9),t(4,`
        `),s(),t(5,`
    `))}function Ce(i,c){if(i&1&&(t(0,`
                        `),d(1,"jhi-included-in-score-badge",17),t(2,`
                    `)),i&2){let e=m(2);n(),l("includedInOverallScore",e.exercise.includedInOverallScore)}}function fe(i,c){if(i&1&&(t(0,`
                        `),d(1,"span",19),t(2,`
                    `)),i&2){let e=m(3);n(),l("translateValues",K(1,me,e.exercise.submissionPolicy.exceedingPenalty))}}function Se(i,c){if(i&1&&(t(0,`
                    `),d(1,"span",18),t(2,`
                    `),g(3,fe,3,3)),i&2){let e=m(2);n(),l("translateValues",y(2,ue,e.numberOfSubmissionsForSubmissionPolicy,e.exercise.submissionPolicy.submissionLimit)),n(2),u(e.exercise.submissionPolicy.type===e.SubmissionPolicyType.SUBMISSION_PENALTY?3:-1)}}function be(i,c){i&1&&(t(0,`
                `),d(1,"jhi-code-editor-repository-is-locked",20),t(2,`
              `))}function Ee(i,c){if(i&1){let e=T();t(0,`
                `),a(1,"jhi-updating-result",21),_("onParticipationChange",function(){b(e);let r=m(2);return E(r.receivedNewResult())}),s(),t(2,`
              `)}if(i&2){let e=m(2);n(),l("exercise",e.exercise)("showUngradedResults",!0)("showBadge",!0)("participation",e.participation)("personalParticipation",!0)("showProgressBar",!0)("showProgressBarBorder",!0)}}function Te(i,c){if(i&1){let e=T();t(0,`
        `),a(1,"jhi-code-editor-container",10),t(2,`
            `),a(3,"div",11),t(4,`
                `),a(5,"span"),t(6),s(),t(7,`
                `),d(8,"span",12),t(9,`
                `),a(10,"span"),t(11,`
                    `),g(12,Ce,3,1),s(),t(13,`
            `),s(),t(14,`
            `),a(15,"div",13),t(16,`
                `),g(17,Se,4,5),s(),t(18,`
            `),t(19,`
            `),a(20,"div",14),t(21,`
              `),g(22,be,3,0)(23,Ee,3,7),d(24,"jhi-programming-exercise-student-trigger-build-button",15),t(25,`
            `),s(),t(26,`
            `),a(27,"jhi-programming-exercise-instructions",16),_("onNoInstructionsAvailable",function(){b(e);let r=m();return E(r.showEditorInstructions=!1)}),s(),t(28,`
        `),s(),t(29,`
    `)}if(i&2){let e=m();n(),l("editable",!e.repositoryIsLocked)("participation",e.participation)("showEditorInstructions",e.showEditorInstructions)("isTutorAssessment",e.hasTutorAssessment)("readOnlyManualFeedback",!0)("course",e.course),n(5),A(e.exercise==null?null:e.exercise.title),n(2),l("jhiTranslate",e.exercise!=null&&e.exercise.bonusPoints?"artemisApp.examParticipation.bonus":"artemisApp.examParticipation.points")("translateValues",y(19,de,e.exercise==null?null:e.exercise.maxPoints,e.exercise==null?null:e.exercise.bonusPoints)),n(4),u(e.exercise.includedInOverallScore!==e.IncludedInOverallScore.INCLUDED_COMPLETELY?12:-1),n(5),u(e.exercise.submissionPolicy&&e.exercise.submissionPolicy.active&&e.numberOfSubmissionsForSubmissionPolicy!==void 0?17:-1),n(5),u(e.repositoryIsLocked?22:-1),n(),u(e.participation?23:-1),n(),l("exercise",e.exercise)("participation",e.participation)("btnSize",e.ButtonSize.MEDIUM),n(3),l("exercise",e.exercise)("participation",e.participation)("personalParticipation",!0)}}function _e(i,c){if(i&1&&(t(0,`
            `),d(1,"jhi-additional-feedback",22),t(2,`
        `)),i&2){let e=m();n(),l("feedback",e.unreferencedFeedback)("additional",!0)("course",e.course)}}var nt=(()=>{class i{domainService=f(re);programmingExerciseParticipationService=f(Z);guidedTourService=f(H);submissionPolicyService=f(ce);route=f(B);codeEditorContainer;IncludedInOverallScore=D;SubmissionPolicyType=ee;ButtonSize=W;PROGRAMMING=M.PROGRAMMING;paramSub;participation;exercise;course;loadingParticipation=!1;participationCouldNotBeFetched=!1;repositoryIsLocked=!1;showEditorInstructions=!0;latestResult;hasTutorAssessment=!1;isIllegalSubmission=!1;numberOfSubmissionsForSubmissionPolicy;faCircleNotch=L;faTimesCircle=j;ngOnInit(){this.paramSub=this.route.params.subscribe(e=>{this.loadingParticipation=!0,this.participationCouldNotBeFetched=!1;let o=Number(e.participationId);this.loadParticipationWithLatestResult(o).pipe(w(r=>{this.domainService.setDomain([ie.PARTICIPATION,r]),this.participation=r,this.exercise=this.participation.exercise;let C=Y(this.exercise,this.participation);this.repositoryIsLocked=this.participation.locked??!1,this.latestResult=this.participation.results?this.participation.results[0]:void 0,this.isIllegalSubmission=this.latestResult?.submission?.type==="ILLEGAL",this.checkForTutorAssessment(C),this.course=G(this.exercise),this.submissionPolicyService.getSubmissionPolicyOfProgrammingExercise(this.exercise.id).subscribe(v=>{v?.active&&(this.exercise.submissionPolicy=v,this.getNumberOfSubmissionsForSubmissionPolicy())}),this.participation.results&&this.participation.results[0]&&this.participation.results[0].feedbacks&&P(this.participation.results[0].feedbacks)})).subscribe({next:()=>{this.loadingParticipation=!1,this.guidedTourService.enableTourForExercise(this.exercise,le,!0)},error:()=>{this.participationCouldNotBeFetched=!0,this.loadingParticipation=!1}})})}ngOnDestroy(){this.paramSub&&this.paramSub.unsubscribe()}loadParticipationWithLatestResult(e){return this.programmingExerciseParticipationService.getStudentParticipationWithLatestResult(e).pipe(O(o=>(o.results?.length&&(o.results[0].participation=o),o)))}checkForTutorAssessment(e){let o=!1,r=!1;this.latestResult&&(o=J(this.latestResult),o&&(r=this.latestResult.feedbacks.some(C=>C.type===q.MANUAL))),this.hasTutorAssessment=e&&o&&r}getNumberOfSubmissionsForSubmissionPolicy(){this.participation.id&&this.submissionPolicyService.getParticipationSubmissionCount(this.participation.id).subscribe(e=>{this.numberOfSubmissionsForSubmissionPolicy=e})}get unreferencedFeedback(){return this.latestResult?.feedbacks?(P(this.latestResult.feedbacks),X(this.latestResult.feedbacks)??[]):[]}receivedNewResult(){this.getNumberOfSubmissionsForSubmissionPolicy()}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=F({type:i,selectors:[["jhi-code-editor-student"]],viewQuery:function(o,r){if(o&1&&R(I,5),o&2){let C;k(C=N())&&(r.codeEditorContainer=C.first)}},decls:10,vars:5,consts:[[3,"id"],[1,"row","ms-0"],[1,"card"],[1,"card-body"],["animation","spin",3,"icon"],["jhiTranslate","artemisApp.editor.fetchingParticipation",1,"d-inline"],[1,"text-danger",3,"icon"],["jhiTranslate","artemisApp.editor.errors.participationNotFound",1,"d-inline"],[1,"row-container"],["jhiTranslate","artemisApp.assessment.assessmentIllegalSubmission",1,"badge","bg-danger"],[3,"editable","participation","showEditorInstructions","isTutorAssessment","readOnlyManualFeedback","course"],["editorTitle",""],[3,"jhiTranslate","translateValues"],["submissionPolicy","",1,"ps-2","pt-1","justify-self-center"],["editorToolbar","",1,"d-inline-flex","align-items-center"],[1,"me-2",3,"exercise","participation","btnSize"],["editorSidebar","",1,"instructions-wrapper__content","card-body","p-0",3,"onNoInstructionsAvailable","exercise","participation","personalParticipation"],[3,"includedInOverallScore"],["jhiTranslate","artemisApp.programmingExercise.submissionPolicy.submissionsAllowed",3,"translateValues"],["jhiTranslate","artemisApp.programmingExercise.submissionPolicy.submissionPenalty.penaltyInfoLabel",3,"translateValues"],[1,"me-3"],[1,"me-2",3,"onParticipationChange","exercise","showUngradedResults","showBadge","participation","personalParticipation","showProgressBar","showProgressBarBorder"],[1,"col-xl-8","mt-3","alert","unreferencedFeedback",3,"feedback","additional","course"]],template:function(o,r){o&1&&(a(0,"div",0),t(1,`
    `),g(2,he,9,2)(3,xe,6,0)(4,Te,30,22),a(5,"div",1),t(6,`
        `),g(7,_e,3,3),s(),t(8,`
`),s(),t(9,`
`)),o&2&&(l("id","exercise-"+(r.exercise==null?null:r.exercise.id)),n(2),u(r.loadingParticipation||r.participationCouldNotBeFetched?2:-1),n(),u(r.isIllegalSubmission?3:-1),n(),u(!r.loadingParticipation&&!r.participationCouldNotBeFetched?4:-1),n(3),u(r.unreferencedFeedback.length>0?7:-1))},dependencies:[z,Q,I,te,se,ne,oe,$,ae],encapsulation:2})}return i})();export{nt as CodeEditorStudentContainerComponent};
//# sourceMappingURL=code-editor-student-container.component-VHU4NRUN.js.map

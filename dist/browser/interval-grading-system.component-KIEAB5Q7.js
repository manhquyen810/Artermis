import{a as te}from"./chunk-TRIJ3OLY.js";import{a as T,b as ee}from"./chunk-ZR3WKJ5U.js";import"./chunk-GRLLGFUW.js";import"./chunk-XUG3TIT6.js";import"./chunk-TDPG6WFH.js";import"./chunk-PTO7UATL.js";import{a as Z}from"./chunk-FLZTDUOG.js";import{a as Y}from"./chunk-WIZ2YSLS.js";import{a as re}from"./chunk-WL6UHE7V.js";import"./chunk-BIK4CL5A.js";import{b as J}from"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import{a as X}from"./chunk-2QXIMOEO.js";import"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import{B as $,C as q,K as z,c as D,h as L,m as H,o as R}from"./chunk-WA5GEAJB.js";import"./chunk-5GXY5RYT.js";import{a as U}from"./chunk-K3W6YFKH.js";import"./chunk-JXJXC4DZ.js";import{d as K}from"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as Q}from"./chunk-U54OSGNH.js";import"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Ad as A,Bd as F,Db as d,Dc as C,Ma as y,Mc as f,Na as v,Oc as s,Qa as N,Tb as V,Xb as k,Zb as G,dd as e,fd as M,gd as b,kc as g,ld as h,md as E,nd as P,rd as B,sc as x,uc as W,vc as O,wb as w,wc as j,xc as i,yc as a,yd as c,zc as p,zd as S}from"./chunk-5LC5EQRR.js";import{h as ae}from"./chunk-3E746U5Y.js";var ie=ae(re());var ne=o=>({default:o});function oe(o,u){o&1&&(e(0,`
                            `),i(1,"td"),e(2,`
                                `),p(3,"jhi-help-icon",21),e(4,`
                            `),a(),e(5,`
                        `))}function de(o,u){if(o&1){let t=C();e(0,`
                                `),i(1,"td"),e(2,`
                                    `),i(3,"input",22),f("ngModelChange",function(n){y(t);let l=s(2).$index,m=s();return v(m.setPercentageInterval(l,n))}),a(),e(4,`
                                `),a(),e(5,`
                            `)}if(o&2){let t=s(2).$implicit,r=s();d(3),g("ngModel",r.getPercentageInterval(t))}}function le(o,u){if(o&1){let t=C();e(0,`
                                `),i(1,"td"),e(2,`
                                    `),i(3,"input",23),f("ngModelChange",function(n){y(t);let l=s(2).$index,m=s();return v(m.setPointsInterval(l,n))}),a(),e(4,`
                                `),a(),e(5,`
                            `)}if(o&2){let t=s(2).$implicit,r=s();d(3),g("ngModel",r.getPointsInterval(t))("required",r.maxPoints!==void 0&&r.maxPoints>0)("disabled",r.maxPoints===void 0||r.maxPoints<=0)}}function pe(o,u){if(o&1&&(e(0,`
                            `),G(1,de,6,1)(2,le,6,3)),o&2){let t=s(2);d(),x(t.gradeEditMode===t.GradeEditMode.PERCENTAGE?1:-1),d(),x(t.gradeEditMode===t.GradeEditMode.POINTS?2:-1)}}function se(o,u){if(o&1){let t=C();e(0,`
                            `),i(1,"td"),e(2,`
                                `),i(3,"input",24),P("ngModelChange",function(n){y(t);let l=s().$implicit;return E(l.gradeName,n)||(l.gradeName=n),v(n)}),a(),e(4,`
                            `),a(),e(5,`
                        `)}if(o&2){let t=s().$implicit;d(3),h("ngModel",t.gradeName)}}function me(o,u){if(o&1){let t=C();e(0,`
                            `),i(1,"td"),e(2,`
                                `),i(3,"input",25),P("ngModelChange",function(n){y(t);let l=s().$implicit;return E(l.gradeName,n)||(l.gradeName=n),v(n)}),a(),e(4,`
                            `),a(),e(5,`
                        `)}if(o&2){let t=s().$implicit;d(3),h("ngModel",t.gradeName)}}function ge(o,u){if(o&1){let t=C();e(0,`
                    `),i(1,"tr",8),e(2,`
                        `),G(3,oe,6,0)(4,pe,3,2),i(5,"td"),e(6,`
                            `),p(7,"span",18),c(8,"gradeStepBounds"),c(9,"safeHtml"),e(10,`
                        `),a(),e(11,`
                        `),i(12,"td"),e(13,`
                            `),p(14,"span",18),c(15,"gradeStepBounds"),c(16,"safeHtml"),e(17,`
                        `),a(),e(18,`
                        `),G(19,se,6,1)(20,me,6,1),i(21,"td"),e(22,`
                            `),i(23,"button",19),f("click",function(){let n=y(t).$index,l=s();return v(l.deleteGradeStep(n))}),e(24,`
                                `),p(25,"fa-icon",14),e(26,`
                                `),p(27,"span",20),e(28,`
                            `),a(),e(29,`
                        `),a(),e(30,`
                    `),a(),e(31,`
                `)}if(o&2){let t=u.$implicit,r=u.$index,n=u.$count,l=s();d(3),x(r===n-1?3:4),d(4),g("innerHTML",S(9,10,F(8,6,t,l.GradeEditMode.PERCENTAGE,r===n-1)),w),d(7),g("innerHTML",S(16,16,F(15,12,t,l.GradeEditMode.POINTS,r===n-1)),w),d(5),x(l.gradingScale.gradeType!==l.GradeType.BONUS?19:-1),d(),x(l.gradingScale.gradeType===l.GradeType.BONUS?20:-1),d(5),g("icon",l.faTimes)}}function ce(o,u){if(o&1){let t=C();e(0,`
            `),i(1,"button",26),f("delete",function(){y(t);let n=s();return v(n.delete())}),e(2,`
                `),i(3,"fa-icon",14),p(4,"span",20),a(),e(5,`
            `),a(),e(6,`
        `)}if(o&2){let t=s();d(),g("entityTitle","")("buttonSize",t.ButtonSize.MEDIUM)("dialogError",t.dialogError$)("disabled",t.isLoading),d(2),g("icon",t.faTimes)}}function ue(o,u){if(o&1&&(e(0,`
            `),i(1,"div",27),e(2,`
                `),p(3,"fa-icon",14),e(4,`
                `),p(5,"span",28),e(6,`
            `),a(),e(7,`
        `)),o&2){let t=s();d(3),g("icon",t.faInfo)}}function xe(o,u){if(o&1&&(e(0,`
            `),i(1,"div",29),e(2,`
                `),p(3,"fa-icon",14),e(4,`
                `),i(5,"span"),e(6),a(),e(7,`
            `),a(),e(8,`
        `)),o&2){let t=s();d(3),g("icon",t.faExclamationTriangle),d(3),M(`
                    `,t.invalidGradeStepsMessage,`
                `)}}var Ie=(()=>{class o extends ee{GradeEditMode=T;gradeEditMode=T.PERCENTAGE;modePickerOptions=[{value:T.PERCENTAGE,labelKey:"artemisApp.gradingSystem.intervalTab.percentageMode",btnClass:"btn-secondary"},{value:T.POINTS,labelKey:"artemisApp.gradingSystem.intervalTab.pointsMode",btnClass:"btn-info"}];createGradeStep(){this.gradingScale?.gradeSteps?.length===0&&super.createGradeStep();let t=this.gradingScale.gradeSteps.pop();super.createGradeStep(),this.gradingScale.gradeSteps.push(t);let r=this.gradingScale.gradeSteps.length-2;this.setPercentageInterval(r)}setInclusivity(){let t=this.gradingScale?.gradeSteps;t?.length>0&&(t.forEach(r=>{r.lowerBoundInclusive=this.lowerBoundInclusivity,r.upperBoundInclusive=!this.lowerBoundInclusivity}),t.first().lowerBoundInclusive=!0,t.last().upperBoundInclusive=!0)}setPercentageInterval(t,r){let n=this.gradingScale.gradeSteps,l;for(let m=t;m<n.length;m++){let _=n[m],I;l?(I=this.getPercentageInterval(_),_.lowerBoundPercentage=l.upperBoundPercentage):I=r??this.getPercentageInterval(_),_.upperBoundPercentage=_.lowerBoundPercentage+I,this.setPoints(_,!0),this.setPoints(_,!1),l=_}}setPointsInterval(t,r){let n=this.gradingScale.gradeSteps[t];if(n.lowerBoundPoints==null)throw new Error(`lowerBoundPoints are not set yet for selectedIndex: '${t}'`);n.upperBoundPoints=n.lowerBoundPoints+r,this.setPercentage(n,!1),this.setPercentageInterval(t)}getPercentageInterval(t){return t.upperBoundPercentage-t.lowerBoundPercentage}getPointsInterval(t){if(!(t.upperBoundPoints==null||t.lowerBoundPoints==null))return t.upperBoundPoints-t.lowerBoundPoints}deleteGradeStep(t){this.setPercentageInterval(t,0),super.deleteGradeStep(t);let r=this.gradingScale.gradeSteps;r.length>0&&(r.last().upperBoundPercentage<100&&(r.last().upperBoundPercentage=100),r.first().lowerBoundInclusive=!0,r.last().upperBoundInclusive=!0)}parseCSVFile(t){return new Promise((r,n)=>{(0,ie.parse)(t,{header:!0,skipEmptyLines:!0,dynamicTyping:!1,complete:l=>r(l.data),error:l=>n(l)})})}shouldShowGradingStepsAboveMaxPointsWarning(){let t=[...this.gradingScale.gradeSteps].slice(0,this.gradingScale.gradeSteps.length-1);return this.isAnyGradingStepAboveMaxPoints(t)}static \u0275fac=(()=>{let t;return function(n){return(t||(t=N(o)))(n||o)}})();static \u0275cmp=V({type:o,selectors:[["jhi-interval-grading-system"]],features:[k],decls:130,vars:42,consts:[[1,"dropdown-container"],[1,"form-group"],["jhiTranslate","artemisApp.gradingSystem.intervalTab.mode",1,"colon-suffix","no-flex-shrink"],[3,"valueChange","options","value"],[1,"table","table-striped","align-middle"],["jhiTranslate","artemisApp.gradingSystem.intervalTab.title"],[3,"colSpan"],[3,"jhiTranslate"],[1,"grading-scale-table-row"],["placement","auto","text","artemisApp.gradingSystem.plagiarismGradeHelp"],["type","text",3,"ngModelChange","ngModel","placeholder"],["placement","auto","text","artemisApp.gradingSystem.noParticipationGradeHelp"],[2,"margin-bottom","1em"],["type","button",1,"btn","btn-success","me-1","mb-1",3,"click"],[3,"icon"],["jhiTranslate","artemisApp.gradingSystem.add"],["type","button",1,"btn","btn-primary","mr-1","mb-1",3,"click","disabled"],["jhiTranslate","artemisApp.gradingSystem.save"],[3,"innerHTML"],["type","button",1,"btn","btn-danger",2,"float","right",3,"click"],["jhiTranslate","artemisApp.gradingSystem.delete"],["text","artemisApp.gradingSystem.stickyGradeStep"],["type","number","step","0.5","min","0.5","required","",3,"ngModelChange","ngModel"],["type","number","step","0.5","min","0.5",3,"ngModelChange","ngModel","required","disabled"],["type","text","required","",3,"ngModelChange","ngModel"],["type","number","step","0.25","min","0","placeholder","0","required","",3,"ngModelChange","ngModel"],["jhiDeleteButton","","deleteQuestion","artemisApp.gradingSystem.deleteQuestion",1,"mb-1",3,"delete","entityTitle","buttonSize","dialogError","disabled"],[1,"alert","alert-info","mt-3"],["jhiTranslate","artemisApp.gradingSystem.gradingStepsAboveMaxPointsWarning"],[1,"alert","alert-warning","mt-3"]],template:function(r,n){r&1&&(i(0,"div"),e(1,`
    `),i(2,"div"),e(3,`
        `),i(4,"div",0),e(5,`
            `),i(6,"div",1),e(7,`
                `),p(8,"span",2),e(9,`
                `),i(10,"jhi-mode-picker",3),P("valueChange",function(m){return E(n.gradeEditMode,m)||(n.gradeEditMode=m),m}),a(),e(11,`
            `),a(),e(12,`
        `),a(),e(13,`
    `),a(),e(14,`
    `),i(15,"div"),e(16,`
        `),i(17,"table",4),e(18,`
            `),i(19,"thead"),e(20,`
                `),i(21,"tr"),e(22,`
                    `),i(23,"th"),e(24,`
                        `),p(25,"span",5),e(26,`
                    `),a(),e(27,`
                    `),i(28,"th"),e(29,`
                        `),i(30,"span"),e(31),c(32,"artemisTranslate"),c(33,"artemisTranslate"),a(),e(34,`
                    `),a(),e(35,`
                    `),i(36,"th"),e(37,`
                        `),i(38,"span"),e(39),c(40,"artemisTranslate"),c(41,"artemisTranslate"),a(),e(42,`
                    `),a(),e(43,`
                    `),i(44,"th",6),e(45,`
                        `),p(46,"span",7),e(47,`
                    `),a(),e(48,`
                `),a(),e(49,`
            `),a(),e(50,`
            `),i(51,"tbody"),e(52,`
                `),i(53,"tr",8),e(54,`
                    `),i(55,"td"),e(56),c(57,"artemisTranslate"),p(58,"jhi-help-icon",9),e(59,`
                    `),a(),e(60,`
                    `),e(61,`
                    `),i(62,"td"),e(63,"\u2014"),a(),e(64,`
                    `),i(65,"td"),e(66,"\u2014"),a(),e(67,`
                    `),i(68,"td"),e(69,`
                        `),i(70,"input",10),c(71,"artemisTranslate"),P("ngModelChange",function(m){return E(n.gradingScale.plagiarismGrade,m)||(n.gradingScale.plagiarismGrade=m),m}),a(),e(72,`
                    `),a(),e(73,`
                    `),p(74,"td"),e(75,`
                `),a(),e(76,`
                `),i(77,"tr",8),e(78,`
                    `),i(79,"td"),e(80),c(81,"artemisTranslate"),p(82,"jhi-help-icon",11),e(83,`
                    `),a(),e(84,`
                    `),e(85,`
                    `),i(86,"td"),e(87,"\u2014"),a(),e(88,`
                    `),i(89,"td"),e(90,"\u2014"),a(),e(91,`
                    `),i(92,"td"),e(93,`
                        `),i(94,"input",10),c(95,"artemisTranslate"),P("ngModelChange",function(m){return E(n.gradingScale.noParticipationGrade,m)||(n.gradingScale.noParticipationGrade=m),m}),a(),e(96,`
                    `),a(),e(97,`
                    `),p(98,"td"),e(99,`
                `),a(),e(100,`
                `),O(101,ge,32,18,null,null,W),a(),e(103,`
        `),a(),e(104,`
    `),a(),e(105,`
    `),i(106,"div",12),e(107,`
        `),i(108,"button",13),f("click",function(){return n.createGradeStep()}),e(109,`
            `),p(110,"fa-icon",14),e(111,`
            `),p(112,"span",15),e(113,`
        `),a(),e(114,`
    `),a(),e(115,`
    `),i(116,"div"),e(117,`
        `),i(118,"button",16),f("click",function(){return n.save()}),e(119,`
            `),p(120,"fa-icon",14),e(121,"\xA0"),p(122,"span",17),e(123,`
        `),a(),e(124,`
        `),G(125,ce,7,5)(126,ue,8,1)(127,xe,9,2),a(),e(128,`
`),a(),e(129,`
`)),r&2&&(d(10),g("options",n.modePickerOptions),h("value",n.gradeEditMode),d(21),b(`
                            `,S(32,20,"artemisApp.gradingSystem.min"),`
                            - `,S(33,22,"artemisApp.gradingSystem.max"),`
                        `),d(8),b(`
                            `,S(40,24,"artemisApp.gradingSystem.minPoints"),`
                            - `,S(41,26,"artemisApp.gradingSystem.maxPoints"),`
                        `),d(5),g("colSpan",2),d(2),g("jhiTranslate",n.gradingScale.gradeType===n.GradeType.GRADE?"artemisApp.gradingSystem.gradeName":"artemisApp.gradingSystem.bonusPoints"),d(10),M(`
                        `,S(57,28,"artemisApp.gradingScale.plagiarismGrade"),`
                        `),d(14),h("ngModel",n.gradingScale.plagiarismGrade),g("placeholder",A(71,30,"artemisApp.gradingSystem.defaultGradeName",B(38,ne,n.GradingScale.DEFAULT_PLAGIARISM_GRADE))),d(10),M(`
                        `,S(81,33,"artemisApp.gradingScale.noParticipationGrade"),`
                        `),d(14),h("ngModel",n.gradingScale.noParticipationGrade),g("placeholder",A(95,35,"artemisApp.gradingSystem.defaultGradeName",B(40,ne,n.GradingScale.DEFAULT_NO_PARTICIPATION_GRADE))),d(7),j(n.gradingScale.gradeSteps),d(9),g("icon",n.faPlus),d(8),g("disabled",n.isLoading||!n.validGradeSteps()||!n.validPresentationsConfig()),d(2),g("icon",n.faSave),d(5),x(n.existingGradingScale?125:-1),d(),x(n.shouldShowGradingStepsAboveMaxPointsWarning()?126:-1),d(),x(n.invalidGradeStepsMessage?127:-1))},dependencies:[Q,z,D,R,L,q,$,H,K,U,Z,te,Y,J,X],styles:[".grading-scale-table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:17%}.grading-scale-table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:50%;background:var(--base-grading-system-input-background);color:var(--base-grading-system-input-color)}.dropdown-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:18%;min-width:15%}"]})}return o})();export{Ie as IntervalGradingSystemComponent};
//# sourceMappingURL=interval-grading-system.component-KIEAB5Q7.js.map

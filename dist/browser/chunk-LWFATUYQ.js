import{L as u,O as g}from"./chunk-IOA4DPXY.js";import{Ea as p,ya as c,z as n}from"./chunk-5LC5EQRR.js";var a=class{color;category;constructor(i,e){this.color=e,this.category=i}equals(i){return this.color===i.color&&this.category===i.category}compare(i){if(this.category===i.category)return 0;let e=this.category?.toLowerCase()??"",r=i.category?.toLowerCase()??"";return e<r?-1:1}};var A=(()=>{class t{resourceUrl="api/communication/courses";http=p(g);create(e,r){let o=t.convertFaqFromClient(r);return this.http.post(`${this.resourceUrl}/${e}/faqs`,o,{observe:"response"}).pipe(n(s=>s))}update(e,r){let o=t.convertFaqFromClient(r);return this.http.put(`${this.resourceUrl}/${e}/faqs/${r.id}`,o,{observe:"response"}).pipe(n(s=>s))}find(e,r){return this.http.get(`${this.resourceUrl}/${e}/faqs/${r}`,{observe:"response"}).pipe(n(o=>t.convertFaqCategoriesFromServer(o)))}findAllByCourseId(e){return this.http.get(`${this.resourceUrl}/${e}/faqs`,{observe:"response"}).pipe(n(r=>t.convertFaqCategoryArrayFromServer(r)))}findAllByCourseIdAndState(e,r){return this.http.get(`${this.resourceUrl}/${e}/faq-state/${r}`,{observe:"response"}).pipe(n(o=>t.convertFaqCategoryArrayFromServer(o)))}delete(e,r){return this.http.delete(`${this.resourceUrl}/${e}/faqs/${r}`,{observe:"response"})}findAllCategoriesByCourseId(e){return this.http.get(`${this.resourceUrl}/${e}/faq-categories`,{observe:"response"})}static convertFaqCategoriesFromServer(e){return e.body?.categories&&t.parseFaqCategories(e.body),e}static stringifyFaqCategories(e){return e.categories?.map(r=>JSON.stringify(r))}convertFaqCategoriesAsStringFromServer(e){return e.map(r=>JSON.parse(r))}static convertFaqCategoryArrayFromServer(e){return e.body&&e.body.forEach(r=>t.parseFaqCategories(r)),e}static parseFaqCategories(e){e?.categories&&(e.categories=e.categories.map(r=>{let o=JSON.parse(r);return new a(o.category,o.color)}))}static convertFaqFromClient(e){let r=Object.assign({},e);return r.categories=t.stringifyFaqCategories(r),r}toggleFilter(e,r){return r.has(e)?r.delete(e):r.add(e),r}applyFilters(e,r){return e.size===0?r:r.filter(o=>this.hasFilteredCategory(o,e))}hasFilteredCategory(e,r){let o=e.categories?.map(s=>s.category);if(o)return o.some(s=>r.has(s))}hasSearchTokens(e,r){if(r==="")return!0;let o=r.toLowerCase().split(" "),s=`${e.questionTitle??""} ${e.questionAnswer??""}`.toLowerCase();return o.every(h=>s.includes(h))}findAllCategoriesByCourseIdAndCategory(e,r){return this.http.get(`${this.resourceUrl}/${e}/faq-categories/${r}`,{observe:"response"})}ingestFaqsInPyris(e){let r=new u;return this.http.post(`api/communication/courses/${e}/faqs/ingest`,null,{params:r,observe:"response"})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var y=function(t){return t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.PROPOSED="PROPOSED",t}(y||{}),l=class{id;questionTitle;questionAnswer;faqState;course;categories};export{A as a,y as b,l as c};
//# sourceMappingURL=chunk-LWFATUYQ.js.map

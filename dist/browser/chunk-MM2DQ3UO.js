import{e as q}from"./chunk-PR2Y3QVB.js";import{a as _}from"./chunk-VPHPBAVR.js";import{d as j}from"./chunk-CT44YL7Q.js";import{A as F,B as L,C as V,K as N,a as y,c as v,h as D,m as E,o as P}from"./chunk-WA5GEAJB.js";import{a as A}from"./chunk-U54OSGNH.js";import{Db as l,Dc as M,Ea as b,Ma as k,Mc as u,Na as x,Oc as g,Tb as W,Zb as h,dd as i,kc as d,ld as p,md as c,nd as T,pd as S,sc as C,xc as o,yc as r,zc as w}from"./chunk-5LC5EQRR.js";function O(t,f){if(t&1&&(i(0,`
            `),w(1,"label",9),i(2,`
        `)),t&2){let e=g();l(),d("jhiTranslate",e.durationLabelText)}}function B(t,f){if(t&1&&(i(0,`
                `),w(1,"label",12),i(2,`
            `)),t&2){let e=g(2);l(),d("jhiTranslate",e.relativeLabelText)}}function H(t,f){if(t&1){let e=M();i(0,`
        `),o(1,"div",1),i(2,`
            `),h(3,B,3,1),o(4,"div",2),i(5,`
                `),o(6,"input",10),T("ngModelChange",function(n){k(e);let s=g();return c(s.workingTime.percent,n)||(s.workingTime.percent=n),x(n)}),u("ngModelChange",function(){k(e);let n=g();return x(n.onPercentChanged())}),r(),i(7,`
                `),o(8,"label",11),i(9,"%"),r(),i(10,`
            `),r(),i(11,`
        `),r(),i(12,`
    `)}if(t&2){let e=g();l(3),C(e.relativeLabelText?3:-1),l(3),p("ngModel",e.workingTime.percent),d("disabled",e.disabled)("min",e.allowNegative?-100:0)}}var Z=(()=>{class t{artemisDurationFromSecondsPipe=b(_);disabled=!1;allowNegative=!1;relative=!1;durationLabelText;relativeLabelText;set exam(e){this.currentExam=e,this.initWorkingTimeFromCurrentExam()}get exam(){return this.currentExam}currentExam;workingTime={hours:0,minutes:0,seconds:0,percent:0};touched=!1;onTouched=()=>{};onChange=()=>{};writeValue(e){typeof e=="number"&&(this.workingTimeSeconds=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}set workingTimeSeconds(e){this.setWorkingTimeDuration(e),this.updateWorkingTimePercentFromDuration()}get workingTimeSeconds(){return this.artemisDurationFromSecondsPipe.durationToSeconds({days:0,hours:this.workingTime.hours,minutes:this.workingTime.minutes,seconds:this.workingTime.seconds})}initWorkingTimeFromCurrentExam(){this.exam&&(this.updateWorkingTimePercentFromDuration(),this.emitWorkingTimeChange())}onPercentChanged(){this.markAsTouched(),this.updateWorkingTimeDurationFromPercent(),this.emitWorkingTimeChange()}onDurationChanged(){this.markAsTouched(),this.updateWorkingTimePercentFromDuration(),this.emitWorkingTimeChange()}updateWorkingTimePercentFromDuration(){this.exam&&(this.workingTime.percent=q(this.exam,this.workingTimeSeconds))}updateWorkingTimeDurationFromPercent(){if(this.exam){let e=this.exam.workingTime,a=j(e*(1+this.workingTime.percent/100),0);this.setWorkingTimeDuration(a)}}setWorkingTimeDuration(e){let a=this.artemisDurationFromSecondsPipe.secondsToDuration(e);this.workingTime.hours=a.days*24+a.hours,this.workingTime.minutes=a.minutes,this.workingTime.seconds=a.seconds}emitWorkingTimeChange(){this.onChange(this.workingTimeSeconds)}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=W({type:t,selectors:[["jhi-working-time-control"]],inputs:{disabled:"disabled",allowNegative:"allowNegative",relative:"relative",durationLabelText:"durationLabelText",relativeLabelText:"relativeLabelText",exam:"exam"},features:[S([_,{provide:y,multi:!0,useExisting:t}])],decls:26,vars:11,consts:[[1,"d-flex","flex-column","gap-1","working-time-control"],[1,"d-flex","flex-column","gap-1"],[1,"input-group"],["id","workingTimeHours","name","hours","type","number","step","1","required","",1,"text-center","form-control","form-number-input",3,"ngModelChange","ngModel","disabled","min"],["for","workingTimeHours",1,"input-group-text"],["id","workingTimeMinutes","name","minutes","type","number","max","59","step","1","required","",1,"text-center","form-control","form-number-input",3,"ngModelChange","ngModel","disabled","min"],["for","workingTimeMinutes",1,"input-group-text"],["id","workingTimeSeconds","name","seconds","type","number","max","59","step","1","required","",1,"text-center","form-control","form-number-input",3,"ngModelChange","ngModel","disabled","min"],["for","workingTimeSeconds",1,"input-group-text"],["for","workingTimeHours",1,"me-4",3,"jhiTranslate"],["id","workingTimePercent","name","percent","type","number","step",".01","required","",1,"text-center","form-control","form-number-input",3,"ngModelChange","ngModel","disabled","min"],["for","workingTimePercent",1,"input-group-text"],["for","workingTimePercent",1,"me-4","flex-fill",3,"jhiTranslate"]],template:function(a,n){a&1&&(o(0,"div",0),i(1,`
    `),o(2,"div",1),i(3,`
        `),h(4,O,3,1),o(5,"div",2),i(6,`
            `),o(7,"input",3),T("ngModelChange",function(m){return c(n.workingTime.hours,m)||(n.workingTime.hours=m),m}),u("ngModelChange",function(){return n.onDurationChanged()}),r(),i(8,`
            `),o(9,"label",4),i(10,"h"),r(),i(11,`
            `),o(12,"input",5),T("ngModelChange",function(m){return c(n.workingTime.minutes,m)||(n.workingTime.minutes=m),m}),u("ngModelChange",function(){return n.onDurationChanged()}),r(),i(13,`
            `),o(14,"label",6),i(15,"min"),r(),i(16,`
            `),o(17,"input",7),T("ngModelChange",function(m){return c(n.workingTime.seconds,m)||(n.workingTime.seconds=m),m}),u("ngModelChange",function(){return n.onDurationChanged()}),r(),i(18,`
            `),o(19,"label",8),i(20,"s"),r(),i(21,`
        `),r(),i(22,`
    `),r(),i(23,`
    `),h(24,H,13,4),r(),i(25,`
`)),a&2&&(l(4),C(n.durationLabelText?4:-1),l(3),p("ngModel",n.workingTime.hours),d("disabled",n.disabled)("min",n.allowNegative?null:0),l(5),p("ngModel",n.workingTime.minutes),d("disabled",n.disabled)("min",n.allowNegative?-59:0),l(5),p("ngModel",n.workingTime.seconds),d("disabled",n.disabled)("min",n.allowNegative?-59:0),l(7),C(n.exam&&n.relative?24:-1))},dependencies:[A,N,v,P,D,V,L,F,E],styles:[".working-time-control[_ngcontent-%COMP%]{width:fit-content}.form-number-input[_ngcontent-%COMP%]{max-width:100px;min-width:64px}"]})}return t})();export{Z as a};
//# sourceMappingURL=chunk-MM2DQ3UO.js.map

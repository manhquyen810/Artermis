import{L as a,O as p}from"./chunk-IOA4DPXY.js";import{Ea as m,w as o,ya as g,z as s}from"./chunk-5LC5EQRR.js";var P=(()=>{class i{http=m(p);ideSettingsUrl="api/programming/ide-settings";idePreferences;loadPredefinedIdes(){return this.http.get(this.ideSettingsUrl+"/predefined")}ongoingRequest=void 0;cacheTimestamp=void 0;cacheDuration=60*1e3;loadIdePreferences(t){let e=new Date().getTime();return this.idePreferences&&!t&&this.cacheTimestamp&&e-this.cacheTimestamp<this.cacheDuration?Promise.resolve(this.idePreferences):this.ongoingRequest?this.ongoingRequest:(this.ongoingRequest=o(this.http.get(this.ideSettingsUrl).pipe(s(n=>(this.idePreferences=new Map(n.map(r=>[r.programmingLanguage,r.ide])),this.cacheTimestamp=new Date().getTime(),this.idePreferences)))).finally(()=>{this.ongoingRequest=void 0}),this.ongoingRequest)}saveIdePreference(t,e){let n=new a().set("programmingLanguage",t);return this.http.put(this.ideSettingsUrl,e,{params:n}).pipe(s(r=>r.ide))}deleteIdePreference(t){let e=new a().set("programmingLanguage",t);return this.http.delete(this.ideSettingsUrl,{params:e,observe:"response"})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{P as a};
//# sourceMappingURL=chunk-USOMQCKZ.js.map

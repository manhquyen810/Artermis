import{a as h}from"./chunk-I5BNMRWY.js";import{d as g}from"./chunk-O4VJ5OXY.js";import{b as F,j as N,k as j}from"./chunk-BDII35IB.js";import{b as k}from"./chunk-ZPITQMA6.js";import{f as R}from"./chunk-CT44YL7Q.js";import{a as M}from"./chunk-K3W6YFKH.js";import{d as L}from"./chunk-EDXSOKK5.js";import{k as A}from"./chunk-CXQURQM5.js";import{Zc as O}from"./chunk-Z4VHWOB5.js";import{h as b,i as I}from"./chunk-M6Z6DKZQ.js";import{n as D}from"./chunk-IOA4DPXY.js";import{Db as r,Ea as S,La as v,Mc as y,Oc as l,Tb as x,Zb as m,dd as t,ed as C,fd as E,gd as _,kc as u,qd as P,sc as c,xc as o,yc as a,yd as f,zc as d,zd as T}from"./chunk-5LC5EQRR.js";var B=()=>[200,200];function V(i,p){if(i&1&&(t(0,`
        `),o(1,"a",4),t(2,`
            `),o(3,"h4",5),t(4),f(5,"artemisTranslate"),a(),t(6,`
        `),a(),t(7,`
    `)),i&2){let n=l();r(),u("routerLink",n.titleLink),r(3),C(T(5,2,"exercise-statistics."+n.doughnutChartTitle))}}function U(i,p){if(i&1&&(t(0,`
        `),o(1,"h4",5),t(2),f(3,"artemisTranslate"),a(),t(4,`
    `)),i&2){let n=l();r(2),C(T(3,1,"exercise-statistics."+n.doughnutChartTitle))}}function H(i,p){if(i&1&&(t(0,`
                `),o(1,"h2",5),t(2),a(),t(3,`
            `)),i&2){let n=l();r(2),E("",n.currentPercentage,"%")}}function Q(i,p){if(i&1&&(t(0,`
                `),o(1,"h4",5),t(2),a(),t(3,`
            `)),i&2){let n=l();r(2),_("",n.currentAbsolute," / ",n.currentMax,"")}}function X(i,p){if(i&1&&(t(0,`
                `),o(1,"h1",6),t(2,`
                    `),d(3,"fa-icon",7),t(4,`
                `),a(),t(5,`
            `)),i&2){let n=l();r(3),u("icon",n.faSpinner)}}var w=[0,0,1],$=(()=>{class i{router=S(b);course;contentType;exerciseId;exerciseType;currentPercentage;currentAbsolute;currentMax;receivedStats=!1;doughnutChartTitle;stats;titleLink;faSpinner=O;ngxDoughnutData=[{name:"Done",value:0},{name:"Not done",value:0},{name:"N/A",value:0}];ngxColor={name:"vivid",selectable:!0,group:F.Ordinal,domain:[g.GREEN,g.RED,g.LIGHT_GREY]};bindFormatting=this.valueFormatting.bind(this);ngOnChanges(){if(this.currentAbsolute==null&&!this.receivedStats)this.updatePieChartData(w);else{this.receivedStats=!0;let n=R(this.currentMax-this.currentAbsolute,this.course);return this.stats=[this.currentAbsolute,n,0],this.currentMax===0?this.updatePieChartData(w):this.updatePieChartData(this.stats)}}ngOnInit(){switch(this.contentType){case h.AVERAGE_EXERCISE_SCORE:this.doughnutChartTitle="averageScore",this.titleLink=[`/course-management/${this.course.id}/${this.exerciseType}-exercises/${this.exerciseId}/scores`];break;case h.PARTICIPATIONS:this.doughnutChartTitle="participationRate",this.titleLink=[`/course-management/${this.course.id}/${this.exerciseType}-exercises/${this.exerciseId}/participations`];break;case h.QUESTIONS:this.doughnutChartTitle="resolved_posts",this.titleLink=[`/courses/${this.course.id}/exercises/${this.exerciseId}`];break;default:this.doughnutChartTitle="",this.titleLink=void 0}}openCorrespondingPage(){this.course.id&&this.exerciseId&&this.titleLink&&this.router.navigate(this.titleLink)}updatePieChartData(n){this.ngxDoughnutData.forEach((s,e)=>s.value=n[e]),this.ngxDoughnutData=[...this.ngxDoughnutData]}valueFormatting(n){return this.currentMax===0?"0":n.value}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=x({type:i,selectors:[["jhi-doughnut-chart"]],inputs:{course:"course",contentType:"contentType",exerciseId:"exerciseId",exerciseType:"exerciseType",currentPercentage:"currentPercentage",currentAbsolute:"currentAbsolute",currentMax:"currentMax"},features:[v],decls:16,vars:12,consts:[[1,"mx-2","d-flex","flex-column","justify-content-between","h-100"],[1,"doughnut-chart-container",3,"click","ngClass"],[1,"doughnut-chart-text"],[3,"view","results","scheme","doughnut","tooltipText"],[3,"routerLink"],[1,"text-center"],[1,"text-center",2,"z-index","1"],["animation","spin",3,"icon"]],template:function(s,e){s&1&&(o(0,"div",0),t(1,`
    `),m(2,V,8,4)(3,U,5,3),o(4,"div",1),y("click",function(){return e.openCorrespondingPage()}),t(5,`
        `),o(6,"div",2),t(7,`
            `),m(8,H,4,1)(9,Q,4,2)(10,X,6,1),a(),t(11,`
        `),d(12,"ngx-charts-pie-chart",3),t(13,`
    `),a(),t(14,`
`),a(),t(15,`
`)),s&2&&(r(2),c(e.titleLink?2:-1),r(),c(e.titleLink?-1:3),r(),u("ngClass",e.titleLink?"clickable":""),r(4),c(e.receivedStats?8:-1),r(),c(e.receivedStats?9:-1),r(),c(e.receivedStats?-1:10),r(2),u("view",P(11,B))("results",e.ngxDoughnutData)("scheme",e.ngxColor)("doughnut",!0)("tooltipText",e.bindFormatting))},dependencies:[I,D,L,j,N,M],styles:[".doughnut-chart-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.doughnut-chart-container[_ngcontent-%COMP%]   .doughnut-chart-text[_ngcontent-%COMP%]{position:absolute;min-height:50px}.clickable[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();function z(i,p){if(i&1&&(t(0,`
        `),d(1,"jhi-doughnut-chart",1),t(2,`
    `)),i&2){let n=l();r(),u("course",n.course)("contentType",n.DoughnutChartType.QUESTIONS)("exerciseId",n.exercise.id)("exerciseType",n.exerciseType)("currentPercentage",n.doughnutStats==null?null:n.doughnutStats.resolvedPostsInPercent)("currentAbsolute",n.doughnutStats==null?null:n.doughnutStats.numberOfResolvedPosts)("currentMax",n.doughnutStats==null?null:n.doughnutStats.numberOfPosts)}}var ye=(()=>{class i{exercise;doughnutStats;exerciseType;course;isCommunicationEnabled=k;DoughnutChartType=h;ngOnInit(){this.course=A(this.exercise)}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=x({type:i,selectors:[["jhi-exercise-detail-statistics"]],inputs:{exercise:"exercise",doughnutStats:"doughnutStats",exerciseType:"exerciseType"},decls:8,vars:15,consts:[[1,"row","d-flex","justify-content-between"],[1,"col-md-4",3,"course","contentType","exerciseId","exerciseType","currentPercentage","currentAbsolute","currentMax"]],template:function(s,e){s&1&&(o(0,"div",0),t(1,`
    `),d(2,"jhi-doughnut-chart",1),t(3,`
    `),d(4,"jhi-doughnut-chart",1),t(5,`
    `),m(6,z,3,7),a(),t(7,`
`)),s&2&&(r(2),u("course",e.course)("contentType",e.DoughnutChartType.AVERAGE_EXERCISE_SCORE)("exerciseId",e.exercise.id)("exerciseType",e.exerciseType)("currentPercentage",e.doughnutStats==null?null:e.doughnutStats.averageScoreOfExercise)("currentAbsolute",e.doughnutStats==null?null:e.doughnutStats.absoluteAveragePoints)("currentMax",e.doughnutStats==null?null:e.doughnutStats.maxPointsOfExercise),r(2),u("course",e.course)("contentType",e.DoughnutChartType.PARTICIPATIONS)("exerciseId",e.exercise.id)("exerciseType",e.exerciseType)("currentPercentage",e.doughnutStats==null?null:e.doughnutStats.participationsInPercent)("currentAbsolute",e.doughnutStats==null?null:e.doughnutStats.numberOfParticipations)("currentMax",e.doughnutStats==null?null:e.doughnutStats.numberOfStudentsOrTeamsInCourse),r(2),c(e.isCommunicationEnabled(e.course)?6:-1))},dependencies:[$],encapsulation:2})}return i})();export{ye as a};
//# sourceMappingURL=chunk-W2XOXZZX.js.map

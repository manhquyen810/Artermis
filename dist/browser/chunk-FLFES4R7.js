import{a as m}from"./chunk-JHBUBEY6.js";import{c as u}from"./chunk-CK7FH6VF.js";import{b as r}from"./chunk-EELXLOHY.js";import{b as c}from"./chunk-R5BZWVRQ.js";import{O as p}from"./chunk-IOA4DPXY.js";import{Ea as o,ya as n,z as s}from"./chunk-5LC5EQRR.js";var g=(()=>{class i{http=o(p);participationWebsocketService=o(m);accountService=o(c);findAllProgrammingExercisesForCourse(e){return this.http.get(`api/programming/courses/${e}/programming-exercises`,{observe:"response"}).pipe(s(t=>this.processExercisesHttpResponses(t)))}findAllModelingExercisesForCourse(e){return this.http.get(`api/modeling/courses/${e}/modeling-exercises`,{observe:"response"}).pipe(s(t=>this.processExercisesHttpResponses(t)))}findAllTextExercisesForCourse(e){return this.http.get(`api/text/courses/${e}/text-exercises`,{observe:"response"}).pipe(s(t=>this.processExercisesHttpResponses(t)))}findAllFileUploadExercisesForCourse(e){return this.http.get(`api/fileupload/courses/${e}/file-upload-exercises`,{observe:"response"}).pipe(s(t=>this.processExercisesHttpResponses(t)))}processExercisesHttpResponses(e){return this.convertExerciseResponseArrayDatesFromServer(e),u.convertExerciseCategoryArrayFromServer(e),e.body&&e.body.forEach(t=>this.accountService.setAccessRightsForExercise(t)),e}startExercise(e){return this.http.post(`api/exercise/exercises/${e}/participations`,{}).pipe(s(t=>this.handleParticipation(t)))}startPractice(e,t){return this.http.post(`api/exercise/exercises/${e}/participations/practice?useGradedParticipation=${t}`,{}).pipe(s(a=>this.handleParticipation(a)))}resumeProgrammingExercise(e,t){return this.http.put(`api/exercise/exercises/${e}/resume-programming-participation/${t}`,{}).pipe(s(a=>this.handleParticipation(a)))}requestFeedback(e){return this.http.put(`api/exercise/exercises/${e}/request-feedback`,{}).pipe(s(t=>t))}handleParticipation(e){if(e){if(e.initializationDate=r(e.initializationDate),e.exercise){let t=e.exercise;this.convertExerciseDatesFromServer(t),t.studentParticipations=[e]}this.participationWebsocketService.addParticipation(e)}return e}convertExerciseDatesFromServer(e){return e.releaseDate=r(e.releaseDate),e.startDate=r(e.startDate),e.dueDate=r(e.dueDate),e.assessmentDueDate=r(e.assessmentDueDate),e.exampleSolutionPublicationDate=r(e.exampleSolutionPublicationDate),e}convertExerciseResponseArrayDatesFromServer(e){return e.body&&e.body.forEach(t=>{t.releaseDate=r(t.releaseDate),t.startDate=r(t.startDate),t.dueDate=r(t.dueDate),t.assessmentDueDate=r(t.assessmentDueDate),t.exampleSolutionPublicationDate=r(t.exampleSolutionPublicationDate)}),e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{g as a};
//# sourceMappingURL=chunk-FLFES4R7.js.map

import{a as u}from"./chunk-5ZXXURLP.js";import{Ea as b,L as n,g as c,ra as o,ya as r}from"./chunk-5LC5EQRR.js";var v=(()=>{class s{websocketService=b(u);connections=[];subjects={};ngOnDestroy(){Object.values(this.connections).forEach(e=>this.websocketService.unsubscribe(e))}notifySubscribers(e,t){this.subjects[e].next(t)}initTestCaseStateSubscription(e){let t=`/topic/programming-exercises/${e}/test-cases-changed`;return this.websocketService.subscribe(t),this.connections[e]=t,this.subjects[e]=new c(void 0),this.websocketService.receive(t).pipe(o(i=>this.notifySubscribers(e,i))).subscribe(),this.subjects[e]}getTestCaseState(e){return(this.subjects[e]||this.initTestCaseStateSubscription(e)).asObservable().pipe(n(i=>i!==void 0))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=r({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{v as a};
//# sourceMappingURL=chunk-PMLSEW7X.js.map

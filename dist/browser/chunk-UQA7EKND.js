import{a as J}from"./chunk-2QXIMOEO.js";import{C as U,F as k,G as H,H as B,K as G,c as R,d as z,f as O,h as j,k as q,m as Q}from"./chunk-WA5GEAJB.js";import{a as $}from"./chunk-U54OSGNH.js";import{Db as o,Dc as V,Ma as C,Mb as w,Mc as v,Na as g,Oc as m,Qd as A,Rd as y,Tb as F,Vb as L,Ya as _,Yc as M,Za as d,Zb as c,Zc as D,_c as E,ab as x,ad as S,bd as P,cd as I,dd as n,f as b,kc as N,oc as T,pd as p,sc as h,xc as r,yc as s,zc as u}from"./chunk-5LC5EQRR.js";var K=(()=>{class i{disallowedValues=d.required();validate(e){return e==null?null:this.disallowedValues().has(e.value)?{disallowedValue:!0}:null}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","notIncludedIn","","ngModel",""],["","notIncludedIn","","formControl",""]],inputs:{disallowedValues:[1,"disallowedValues"]},features:[p([{provide:z,useExisting:i,multi:!0}])]})}return i})();var Y=["field_channel_name"],Z=["field_title"];function ee(i,f){if(i&1&&(n(0,`
                `),u(1,"label",4),n(2,`
            `)),i&2){let e=m(2);o(),T("form-control-label"+(e.emphasizeLabels?" emphasized-label":""))}}function ie(i,f){i&1&&(n(0,`
                `),u(1,"div",5),n(2,`
            `))}function te(i,f){if(i&1){let e=V();n(0,`
        `),r(1,"div",2),n(2,`
            `),c(3,ee,3,2),r(4,"input",3,0),v("ngModelChange",function(l){C(e);let a=m();return g(a.updateTitle(l))}),s(),n(6,`
            `),c(7,ie,3,0),s(),n(8,`
    `)}if(i&2){let e=I(5),t=m();o(3),h(t.hideTitleLabel?-1:3),o(),N("minlength",t.minTitleLength)("pattern",t.titlePattern)("ngModel",t.title)("disallowedValues",t.alreadyUsedTitles()),o(3),h(!(e==null||e.control==null||e.control.errors==null)&&e.control.errors.disallowedValue?7:-1)}}function ne(i,f){if(i&1){let e=V();n(0,`
        `),r(1,"div",2),n(2,`
            `),r(3,"div"),n(4,`
                `),r(5,"label",6),n(6,"Channel Name"),s(),n(7,`
                `),u(8,"jhi-help-icon",7),n(9,`
            `),s(),n(10,`
            `),r(11,"input",8,1),v("ngModelChange",function(l){C(e);let a=m();return g(a.formatChannelName(l))}),s(),n(13,`
        `),s(),n(14,`
    `)}if(i&2){let e=m();o(5),T("form-control-label"+(e.emphasizeLabels?" emphasized-label":"")),o(6),N("ngModel",e.channelName)}}var xe=(()=>{class i{title;channelName;channelNamePrefix;titlePattern;hideTitleLabel;emphasizeLabels=!1;minTitleLength;initChannelName=!0;hideChannelName=d();isEditFieldDisplayedRecord=d();alreadyUsedTitles=d(new Set);titleOnPageLoad=x(void 0);field_title;field_channel_name=w("field_channel_name");titleChange=_();channelNameChange=_();isFormValidSignal=x(!1);formValid;formValidChanges=new b;fieldTitleSubscription;fieldChannelNameSubscription;isChannelFieldDisplayed=A(()=>!this.hideChannelName()&&(!this.isEditFieldDisplayedRecord()||this.isEditFieldDisplayedRecord()?.channelName));constructor(){y(()=>{this.isEditFieldDisplayedRecord(),this.registerChangeListeners()}),y(function(){this.titleOnPageLoad()&&this.alreadyUsedTitles().delete(this.titleOnPageLoad())}.bind(this))}ngAfterViewInit(){this.registerChangeListeners()}ngOnInit(){this.channelNamePrefix||(this.channelNamePrefix=""),this.initChannelName&&setTimeout(()=>{this.formatChannelName(this.channelNamePrefix+(this.title??""),!1,!!this.title)}),this.titleOnPageLoad.set(this.title)}registerChangeListeners(){this.fieldTitleSubscription=this.field_title?.valueChanges?.subscribe(()=>this.calculateFormValid()),this.fieldChannelNameSubscription=this.field_channel_name()?.valueChanges?.subscribe(()=>this.calculateFormValid())}ngOnDestroy(){this.fieldTitleSubscription?.unsubscribe(),this.fieldChannelNameSubscription?.unsubscribe()}calculateFormValid(){let e=!!(this.field_title.valid&&(!this.isChannelFieldDisplayed()||this.field_channel_name()?.valid));this.isFormValidSignal.set(e),this.formValid=e,this.formValidChanges.next(this.formValid)}updateTitle(e){this.title=e,this.titleChange.emit(this.title),this.formatChannelName(this.channelNamePrefix+this.title,!1,!!this.title)}formatChannelName(e,t=!0,l=!1){let a=t?/[^a-z0-9-]+/g:/[^a-z0-9]+/g,W=l?/-$/:new RegExp("[]");this.channelName=e.toLowerCase().replaceAll(a,"-").replace(W,"").slice(0,30),this.channelNameChange.emit(this.channelName)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=F({type:i,selectors:[["jhi-title-channel-name"]],viewQuery:function(t,l){if(t&1&&(S(l.field_channel_name,Y,5),M(Z,5)),t&2){P();let a;D(a=E())&&(l.field_title=a.first)}},inputs:{title:"title",channelName:"channelName",channelNamePrefix:"channelNamePrefix",titlePattern:"titlePattern",hideTitleLabel:"hideTitleLabel",emphasizeLabels:"emphasizeLabels",minTitleLength:"minTitleLength",initChannelName:"initChannelName",hideChannelName:[1,"hideChannelName"],isEditFieldDisplayedRecord:[1,"isEditFieldDisplayedRecord"],alreadyUsedTitles:[1,"alreadyUsedTitles"]},outputs:{titleChange:"titleChange",channelNameChange:"channelNameChange"},features:[p([],[{provide:O,useExisting:q}])],decls:5,vars:2,consts:[["field_title","ngModel"],["field_channel_name","ngModel"],[1,"form-group"],["required","","type","text","name","title","id","field_title","notIncludedIn","",1,"form-control",3,"ngModelChange","minlength","pattern","ngModel","disallowedValues"],["jhiTranslate","artemisApp.lecture.title","for","field_title"],["jhiTranslate","artemisApp.exercise.form.title.disallowedValue",1,"alert","alert-danger"],["jhiTranslate","artemisApp.lecture.channelName","for","field_channel_name"],["text","artemisApp.programmingExercise.channelNameTooltip"],["required","","type","text","name","channelName","id","field_channel_name","maxlength","30",1,"form-control",3,"ngModelChange","ngModel"]],template:function(t,l){if(t&1&&(r(0,"div"),n(1,`
    `),c(2,te,9,6)(3,ne,15,3),s(),n(4,`
`)),t&2){let a;o(2),h(!l.isEditFieldDisplayedRecord()||(a=l.isEditFieldDisplayedRecord())!=null&&a.title?2:-1),o(),h(l.isChannelFieldDisplayed()?3:-1)}},dependencies:[$,G,R,j,U,k,H,B,Q,K,J],encapsulation:2})}return i})();export{K as a,xe as b};
//# sourceMappingURL=chunk-UQA7EKND.js.map

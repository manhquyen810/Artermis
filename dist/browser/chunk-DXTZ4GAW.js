import{a as b}from"./chunk-CK7FH6VF.js";import{a as p}from"./chunk-G4I63THF.js";import{a as h}from"./chunk-PZ7IDTIM.js";import{b as R}from"./chunk-JXJXC4DZ.js";import{p as i}from"./chunk-DID2YGL7.js";import{c as n,g as I}from"./chunk-CXQURQM5.js";import{B as c,ea as S,pa as P,r as x,s as E,z as D}from"./chunk-5LC5EQRR.js";var l=function(e){return e[e.IMPORT=0]="IMPORT",e[e.CREATE=1]="CREATE",e[e.UPDATE=2]="UPDATE",e}(l||{}),T=class{modalService;popupService;exerciseService;backupExercise;editType;alertService;constructor(t,r,u,d,v,m){this.modalService=t,this.popupService=r,this.exerciseService=u,this.backupExercise=d,this.editType=v,this.alertService=m}save(t,r,u){let d=()=>{switch(this.editType){case l.UPDATE:return u?{notificationText:u}:{};default:return{}}};t.exampleSolutionPublicationDateWarning&&this.alertService.addAlert({type:R.WARNING,message:"artemisApp.exercise.exampleSolutionPublicationDateWarning"});let v=([o,f])=>{let s=I.sanitize(t);switch(this.editType){case l.IMPORT:return this.exerciseService.import(s);case l.CREATE:return this.exerciseService.create(s);case l.UPDATE:return o?this.exerciseService.reevaluateAndUpdate(s,f):this.exerciseService.update(s,f)}},m=E([!1,d()]),A=x(this.popupService.checkExerciseBeforeUpdate(t,this.backupExercise,r));if(this.modalService.hasOpenModals()){let o=A.pipe(c(a=>a.componentInstance.confirmed.pipe(D(()=>[!1,d()])))),f=A.pipe(c(a=>a.componentInstance.reEvaluated.pipe(D(()=>[!0,{deleteFeedback:a.componentInstance.deleteFeedback}])))),s=A.pipe(c(a=>a.componentInstance.canceled));m=o.pipe(S(f),P(s))}return m.pipe(c(v),D(o=>o.body))}},g=e=>e.exercise&&e.exercise.currentValue&&(!e.exercise.previousValue||e.exercise.previousValue.id!==e.exercise.currentValue.id),z=e=>e.exercise&&e.exercise.currentValue&&(!e.exercise.previousValue||e.exercise.previousValue.problemStatement!==e.exercise.currentValue.problemStatement),B=(e,t)=>{if(e.dueDate===void 0)return!1;let r=O(e,t);return i(r).isBefore(i())};function O(e,t){if(e.dueDate!==void 0)return t?.individualDueDate??e.dueDate}var w=(e,t)=>{let r=e.type===n.PROGRAMMING;return(!r||!e.dueDate||i().isBefore(e.dueDate))&&(!t||r&&M(t))},W=(e,t)=>{let r=t?.individualDueDate??e.dueDate;return(!r||i().isBefore(r))===!b(t)},_=(e,t)=>{switch(e.type){case n.QUIZ:let r=e;return!!(r.isOpenForPractice&&r.quizEnded);case n.PROGRAMMING:return e.dueDate!=null&&i().isAfter(e.dueDate)&&!e.teamMode&&(!t||M(t));default:return!1}},L=e=>{if(e.type===n.QUIZ)return!1;if(e.type!==n.PROGRAMMING)return!e.dueDate||i().isAfter(e.dueDate);{let t=e.buildAndTestStudentSubmissionsAfterDueDate??e.dueDate;return e.assessmentType!==h.AUTOMATIC&&(!t||i().isAfter(t))}},Z=(e,t)=>(e<0&&(e=0),e>t&&(e=t),+e.toFixed(2)),q=e=>(e?.maxPoints??0)+(e?.bonusPoints??0),M=e=>!!e.initializationState&&[p.UNINITIALIZED,p.BUILD_PLAN_CONFIGURED,p.REPO_CONFIGURED,p.REPO_COPIED].includes(e.initializationState);export{l as a,T as b,g as c,z as d,B as e,O as f,w as g,W as h,_ as i,L as j,Z as k,q as l};
//# sourceMappingURL=chunk-DXTZ4GAW.js.map

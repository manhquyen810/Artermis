import{c as S}from"./chunk-TL3DYXRE.js";import{c as g}from"./chunk-JXJXC4DZ.js";import{Ea as r,Id as n,Vb as i}from"./chunk-5LC5EQRR.js";var v=(()=>{class s{userSettingsService=r(S);changeDetector=r(n);alertService=r(g);settingsChanged=!1;currentUser;userSettingsCategory;changeEventMessage;userSettings;settings;page=0;error;ngOnInit(){this.alertService.closeAll(),this.loadSetting()}loadSetting(){this.userSettingsService.loadSettings(this.userSettingsCategory).subscribe({next:e=>{this.userSettings=this.userSettingsService.loadSettingsSuccessAsSettingsStructure(e.body,this.userSettingsCategory),this.settings=this.userSettingsService.extractIndividualSettingsFromSettingsStructure(this.userSettings),this.changeDetector.detectChanges(),this.alertService.closeAll()},error:e=>this.onError(e)})}saveSettings(){this.userSettingsService.saveSettings(this.settings,this.userSettingsCategory).subscribe({next:e=>{this.userSettings=this.userSettingsService.saveSettingsSuccess(this.userSettings,e.body),this.settings=this.userSettingsService.extractIndividualSettingsFromSettingsStructure(this.userSettings),this.finishSaving()},error:e=>this.onError(e)})}finishSaving(){this.createApplyChangesEvent(),this.settingsChanged=!1,this.alertService.closeAll(),this.alertService.success("artemisApp.userSettings.saveSettingsSuccessAlert")}createApplyChangesEvent(){this.userSettingsService.sendApplyChangesEvent(this.changeEventMessage)}onError(e){let t=e.error;t?this.alertService.error(t.message,t.params):this.alertService.error("error.unexpectedError",{error:e.message})}static \u0275fac=function(t){return new(t||s)};static \u0275dir=i({type:s})}return s})();export{v as a};
//# sourceMappingURL=chunk-PXNUDHQF.js.map

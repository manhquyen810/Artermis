import{a as M}from"./chunk-T3DAFG3B.js";import"./chunk-2D32KPWA.js";import"./chunk-7MKMUXV6.js";import{a as R}from"./chunk-PVMY5D66.js";import{a as F}from"./chunk-DO3GZ3ZH.js";import"./chunk-DOLVNMRR.js";import"./chunk-RNPAFOPW.js";import"./chunk-U4DJRHYQ.js";import"./chunk-TECMX7AA.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import"./chunk-HQ6UGNQX.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import{c as f}from"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import{a as u}from"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import{c as x}from"./chunk-JXJXC4DZ.js";import"./chunk-EDXSOKK5.js";import"./chunk-R5BZWVRQ.js";import"./chunk-DID2YGL7.js";import"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import"./chunk-U54OSGNH.js";import{f as w,h as T}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{A as U,Db as S,Dc as _,Ea as a,Ma as g,Mc as A,Na as b,Tb as D,W as v,Yc as C,Zc as E,_c as I,aa as y,dd as m,kc as h,oa as L,xc as d,yc as p}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";var N=["attachmentUnitForm"],Y=(()=>{class r{activatedRoute=a(w);router=a(T);attachmentUnitService=a(R);alertService=a(x);attachmentUnitForm;isLoading=!1;attachmentUnit;attachment;formData;lectureId;notificationText;ngOnInit(){this.isLoading=!0;let n=this.activatedRoute.parent.parent;U([this.activatedRoute.paramMap,n.paramMap]).pipe(v(1),L(([t,e])=>{let i=Number(t.get("attachmentUnitId"));return this.lectureId=Number(e.get("lectureId")),this.attachmentUnitService.findById(i,this.lectureId)}),y(()=>{this.isLoading=!1})).subscribe({next:t=>{this.attachmentUnit=t.body,this.attachment=this.attachmentUnit.attachment,this.attachmentUnit.attachment=void 0,this.attachment.attachmentUnit=void 0,this.formData={formProperties:{name:this.attachment.name,description:this.attachmentUnit.description,releaseDate:this.attachment.releaseDate,version:this.attachment.version,competencyLinks:this.attachmentUnit.competencyLinks},fileProperties:{fileName:this.attachment.link}}},error:t=>f(this.alertService,t)})}updateAttachmentUnit(n){let{description:t,name:e,releaseDate:i,updateNotificationText:c,competencyLinks:s}=n.formProperties,{file:l,fileName:j}=n.fileProperties;c&&(this.notificationText=c),this.attachment.name=e,this.attachment.releaseDate=i,this.attachment.attachmentType="FILE",this.attachmentUnit.description=t,this.attachmentUnit.competencyLinks=s,this.isLoading=!0;let o=new FormData;l&&o.append("file",l,j),o.append("attachment",u(this.attachment)),o.append("attachmentUnit",u(this.attachmentUnit)),this.attachmentUnitService.update(this.lectureId,this.attachmentUnit.id,o,this.notificationText).subscribe({next:()=>this.router.navigate(["../../../"],{relativeTo:this.activatedRoute}),error:k=>f(this.alertService,k)}).add(()=>this.isLoading=!1)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=D({type:r,selectors:[["jhi-edit-attachment-unit"]],viewQuery:function(t,e){if(t&1&&C(N,5),t&2){let i;E(i=I())&&(e.attachmentUnitForm=i.first)}},decls:6,vars:3,consts:[["attachmentUnitForm",""],[3,"isLoading"],[3,"formSubmitted","formData","isEditMode"]],template:function(t,e){if(t&1){let i=_();d(0,"jhi-lecture-unit-layout",1),m(1,`
    `),d(2,"jhi-attachment-unit-form",2,0),A("formSubmitted",function(s){return g(i),b(e.updateAttachmentUnit(s))}),p(),m(4,`
`),p(),m(5,`
`)}t&2&&(h("isLoading",e.isLoading),S(2),h("formData",e.formData)("isEditMode",!0))},dependencies:[F,M],encapsulation:2})}return r})();export{Y as EditAttachmentUnitComponent};
//# sourceMappingURL=edit-attachment-unit.component-PVVIQMOU.js.map

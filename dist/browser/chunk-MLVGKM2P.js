import{c as a}from"./chunk-CK7FH6VF.js";import{c as S}from"./chunk-5MVJAZRV.js";import{a as u}from"./chunk-G3JOQOSD.js";import{a as C}from"./chunk-5YQ3ACZE.js";import{a as m,b as p}from"./chunk-EELXLOHY.js";import{e as A}from"./chunk-5GXY5RYT.js";import{c as b}from"./chunk-JXJXC4DZ.js";import{Fa as v,Kd as y,Ta as d,cc as D,uc as E}from"./chunk-Z4VHWOB5.js";import{L as f,O as l}from"./chunk-IOA4DPXY.js";import{Ea as c,ya as h,z as i}from"./chunk-5LC5EQRR.js";var o=function(s){return s.ATTACHMENT="attachment",s.EXERCISE="exercise",s.TEXT="text",s.VIDEO="video",s.ONLINE="online",s}(o||{}),N={[o.ATTACHMENT]:D,[o.EXERCISE]:d,[o.TEXT]:v,[o.VIDEO]:y,[o.ONLINE]:E},H={[o.ATTACHMENT]:"artemisApp.attachmentUnit.tooltip",[o.EXERCISE]:"",[o.TEXT]:"artemisApp.textUnit.tooltip",[o.VIDEO]:"artemisApp.videoUnit.tooltip",[o.ONLINE]:"artemisApp.onlineUnit.tooltip"},F=class{id;name;releaseDate;lecture;competencyLinks;type;visibleToStudents;completed;constructor(g){this.type=g}};var x=(()=>{class s{http=c(l);resourceUrl="api/lecture/attachments";create(e,t){let r=this.convertAttachmentDatesFromClient(e);return r.attachmentUnit&&(r.attachmentUnit.lecture=void 0,r.attachmentUnit.competencyLinks=void 0),r.lecture&&(r.lecture.lectureUnits=void 0,r.lecture.course=void 0,r.lecture.posts=void 0),this.http.post(this.resourceUrl,this.createFormData(r,t),{headers:{"ngsw-bypass":"true"},observe:"response"}).pipe(i(n=>this.convertAttachmentResponseDatesFromServer(n)))}update(e,t,r,n){let T=u(n),I=this.convertAttachmentDatesFromClient(t);return this.http.put(this.resourceUrl+"/"+e,this.createFormData(I,r),{headers:{"ngsw-bypass":"true"},params:T,observe:"response"}).pipe(i(R=>this.convertAttachmentResponseDatesFromServer(R)))}find(e){return this.http.get(`${this.resourceUrl}/${e}`,{observe:"response"}).pipe(i(t=>this.convertAttachmentResponseDatesFromServer(t)))}query(e){let t=u(e);return this.http.get(this.resourceUrl,{params:t,observe:"response"}).pipe(i(r=>this.convertAttachmentArrayResponseDatesFromServer(r)))}findAllByLectureId(e){return this.http.get(`api/lecture/lectures/${e}/attachments`,{observe:"response"}).pipe(i(t=>this.convertAttachmentArrayResponseDatesFromServer(t)))}delete(e){return this.http.delete(`${this.resourceUrl}/${e}`,{observe:"response"})}convertAttachmentDatesFromClient(e){return Object.assign({},A(e),{releaseDate:m(e.releaseDate),uploadDate:m(e.uploadDate)})}convertAttachmentDatesFromServer(e){return e&&(e.releaseDate=p(e.releaseDate),e.uploadDate=p(e.uploadDate)),e}convertAttachmentResponseDatesFromServer(e){return e.body&&this.convertAttachmentDatesFromServer(e.body),e}convertAttachmentArrayResponseDatesFromServer(e){return e.body&&e.body.forEach(t=>{this.convertAttachmentDatesFromServer(t)}),e}createFormData(e,t){let r=new FormData;return r.append("attachment",C(e)),t&&r.append("file",t),r}getAttachmentFile(e,t){return this.http.get(`api/core/files/courses/${e}/attachments/${t}`,{responseType:"blob"})}static \u0275fac=function(t){return new(t||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var ee=(()=>{class s{httpClient=c(l);attachmentService=c(x);alertService=c(b);resourceURL="api/lecture";updateOrder(e,t){let r=t.map(n=>n.id);return this.httpClient.put(`${this.resourceURL}/lectures/${e}/lecture-units-order`,r,{observe:"response"}).pipe(i(n=>this.convertLectureUnitResponseArrayDatesFromServer(n)))}delete(e,t){return this.httpClient.delete(`${this.resourceURL}/lectures/${t}/lecture-units/${e}`,{observe:"response"})}completeLectureUnit(e,t){t.lectureUnit.visibleToStudents&&t.lectureUnit.completed!==t.completed&&this.setCompletion(t.lectureUnit.id,e.id,t.completed).subscribe({next:()=>{t.lectureUnit.completed=t.completed},error:r=>S(this.alertService,r)})}setCompletion(e,t,r){let n=new f().set("completed",r.toString());return this.httpClient.post(`${this.resourceURL}/lectures/${t}/lecture-units/${e}/completion`,null,{params:n,observe:"response"})}convertLectureUnitDatesFromClient(e){if(e.type===o.ATTACHMENT){if(e.attachment)return e.attachment=this.attachmentService.convertAttachmentDatesFromClient(e.attachment),e}else if(e.type===o.EXERCISE&&e.exercise)return e.exercise=a.convertExerciseDatesFromClient(e.exercise),e.exercise.categories=a.stringifyExerciseCategories(e.exercise),e;return Object.assign({},e,{releaseDate:m(e.releaseDate)})}convertLectureUnitArrayDatesFromClient(e){if(e?.length)for(let t=0;t<e.length;t++)e[t]=this.convertLectureUnitDatesFromClient(e[t]);return e}convertLectureUnitResponseDatesFromServer(e){return e.body&&(e.body.type===o.ATTACHMENT?e.body.attachment&&(e.body.attachment=this.attachmentService.convertAttachmentDatesFromServer(e.body.attachment)):e.body.type===o.EXERCISE?e.body.exercise&&(e.body.exercise=a.convertExerciseDatesFromServer(e.body.exercise),a.parseExerciseCategories(e.body.exercise)):e.body.releaseDate=p(e.body.releaseDate)),e}convertLectureUnitDateFromServer(e){return e.type===o.ATTACHMENT?e.attachment&&(e.attachment=this.attachmentService.convertAttachmentDatesFromServer(e.attachment)):e.type===o.EXERCISE?e.exercise&&(e.exercise=a.convertExerciseDatesFromServer(e.exercise),a.parseExerciseCategories(e.exercise)):e.releaseDate=p(e.releaseDate),e}convertLectureUnitResponseArrayDatesFromServer(e){return e.body&&e.body.forEach(t=>{this.convertLectureUnitDateFromServer(t)}),e}convertLectureUnitArrayDatesFromServer(e){return e&&e.forEach(t=>{this.convertLectureUnitDateFromServer(t)}),e}getLectureUnitName(e){return e.type===o.ATTACHMENT?e?.attachment?.name:e.type===o.EXERCISE?e?.exercise?.title:e.name}getLectureUnitReleaseDate(e){return e.type===o.ATTACHMENT?e?.attachment?.releaseDate:e.type===o.EXERCISE?e?.exercise?.releaseDate:e.releaseDate}getLectureUnitForLearningPathNodeDetails(e){return this.httpClient.get(`${this.resourceURL}/lecture-units/${e}/for-learning-path-node-details`,{observe:"response"})}getLectureUnitById(e){return this.httpClient.get(`${this.resourceURL}/lecture-units/${e}`)}getIngestionState(e,t){return this.httpClient.get(`api/iris/courses/${e}/lectures/${t}/lecture-units/ingestion-state`,{observe:"response"})}ingestLectureUnitInPyris(e,t){return this.httpClient.post(`${this.resourceURL}/lectures/${t}/lecture-units/${e}/ingest`,null,{observe:"response"})}static \u0275fac=function(t){return new(t||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{o as a,N as b,H as c,F as d,x as e,ee as f};
//# sourceMappingURL=chunk-MLVGKM2P.js.map

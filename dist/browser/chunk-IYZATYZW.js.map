{
  "version": 3,
  "sources": ["src/main/webapp/app/localvc/localvc-guard.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport { firstValueFrom } from 'rxjs';\r\n\r\nimport { ProfileService } from 'app/shared/layouts/profiles/profile.service';\r\nimport { PROFILE_LOCALVC } from 'app/app.constants';\r\nimport { captureException } from '@sentry/angular';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class LocalVCGuard implements CanActivate {\r\n    private profileService = inject(ProfileService);\r\n    private router = inject(Router);\r\n\r\n    localVCActive = false;\r\n\r\n    async canActivate(): Promise<boolean> {\r\n        try {\r\n            const profileInfo = await firstValueFrom(this.profileService.getProfileInfo());\r\n\r\n            if (profileInfo) {\r\n                this.localVCActive = profileInfo?.activeProfiles.includes(PROFILE_LOCALVC);\r\n            }\r\n\r\n            if (!this.localVCActive) {\r\n                this.router.navigate(['/']);\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (error) {\r\n            captureException('Error fetching profile information:', error);\r\n            this.router.navigate(['/']);\r\n            return false;\r\n        }\r\n    }\r\n}\r\n"],
  "mappings": "gQAWA,IAAaA,GAAY,IAAA,CAAnB,MAAOA,CAAY,CACbC,eAAiBC,EAAOC,CAAc,EACtCC,OAASF,EAAOG,CAAM,EAE9BC,cAAgB,GAEVC,aAAW,QAAAC,EAAA,sBACb,GAAI,CACA,IAAMC,EAAc,MAAMC,EAAe,KAAKT,eAAeU,eAAc,CAAE,EAM7E,OAJIF,IACA,KAAKH,cAAgBG,GAAaG,eAAeC,SAASC,CAAe,GAGxE,KAAKR,cAIH,IAHH,KAAKF,OAAOW,SAAS,CAAC,GAAG,CAAC,EACnB,GAGf,OAASC,EAAO,CACZC,OAAAA,EAAiB,sCAAuCD,CAAK,EAC7D,KAAKZ,OAAOW,SAAS,CAAC,GAAG,CAAC,EACnB,EACX,CACJ,8CAxBSf,EAAY,6BAAZA,EAAYkB,QAAZlB,EAAYmB,UAAAC,WAFT,MAAM,CAAA,SAETpB,CAAY,GAAA",
  "names": ["LocalVCGuard", "profileService", "inject", "ProfileService", "router", "Router", "localVCActive", "canActivate", "__async", "profileInfo", "firstValueFrom", "getProfileInfo", "activeProfiles", "includes", "PROFILE_LOCALVC", "navigate", "error", "captureException", "factory", "\u0275fac", "providedIn"]
}

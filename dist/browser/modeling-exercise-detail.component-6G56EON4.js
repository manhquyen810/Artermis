import{a as L}from"./chunk-WXB2CQV4.js";import{a as V,b as F,c as H,d as N,e as U}from"./chunk-64RPW7Y5.js";import"./chunk-NGVPTCRP.js";import"./chunk-3FYXV53Z.js";import{a as G}from"./chunk-W2XOXZZX.js";import"./chunk-I5BNMRWY.js";import"./chunk-CWEZ7BG4.js";import{a as d,b as I}from"./chunk-LFOGFBTL.js";import"./chunk-GXLYQKDJ.js";import"./chunk-HTZAAFOQ.js";import"./chunk-3GEJHWIQ.js";import"./chunk-XX5ZSHAB.js";import"./chunk-HPCUFM6M.js";import"./chunk-RTRBZQHM.js";import"./chunk-3A7JIXAS.js";import"./chunk-GOZO62KC.js";import{a as P}from"./chunk-YUF2Y3HT.js";import"./chunk-CCVWGTN5.js";import"./chunk-MD22LTSS.js";import"./chunk-RKZRHQUL.js";import"./chunk-JCAGYDTX.js";import"./chunk-OI2L2OHD.js";import"./chunk-4RRONT5E.js";import"./chunk-5PWC33TE.js";import"./chunk-A2A6JFSH.js";import"./chunk-MD6Z63OB.js";import"./chunk-M2FHCXD3.js";import"./chunk-RGQYMQQL.js";import"./chunk-EAC2ODNH.js";import"./chunk-SLVT6IA5.js";import"./chunk-FAFORKWV.js";import"./chunk-YOWUV6EQ.js";import"./chunk-X3HHHVRJ.js";import"./chunk-EHCOTJGL.js";import"./chunk-FLZTDUOG.js";import"./chunk-4NYYKXW4.js";import"./chunk-5A2TLSYI.js";import"./chunk-MY22ELD7.js";import"./chunk-T4L3VFV2.js";import"./chunk-YSX3GO3R.js";import"./chunk-W3K7VYWC.js";import"./chunk-QU4DXSXD.js";import"./chunk-2OQEG3U2.js";import"./chunk-GAUWMTOK.js";import"./chunk-656XE4CO.js";import"./chunk-YGSJB6WY.js";import"./chunk-O2WHE2S3.js";import"./chunk-JJUII2KT.js";import"./chunk-U4DJRHYQ.js";import"./chunk-BIKLNSC4.js";import"./chunk-QZKVSIAC.js";import"./chunk-JRBFEQNN.js";import{a as O}from"./chunk-DIZEKHOC.js";import"./chunk-V7PDYRDZ.js";import"./chunk-EANMTTQG.js";import"./chunk-PNTOXB52.js";import{a as j}from"./chunk-2DI3RHO4.js";import"./chunk-MBS3WUDO.js";import"./chunk-22YQSX6Z.js";import"./chunk-R56P6PAY.js";import"./chunk-65Z25AP3.js";import"./chunk-5M3YV54C.js";import"./chunk-RYZEETVB.js";import"./chunk-VTF2OQPK.js";import"./chunk-BNRTXX46.js";import"./chunk-VPHPBAVR.js";import"./chunk-N4VVKRBU.js";import"./chunk-5AQXEKLE.js";import"./chunk-3JSWSN6W.js";import"./chunk-7XNS72RJ.js";import"./chunk-KYCCMZSV.js";import"./chunk-DXTZ4GAW.js";import"./chunk-2UXGFGK3.js";import"./chunk-O4VJ5OXY.js";import"./chunk-BDII35IB.js";import"./chunk-LARBQRTJ.js";import"./chunk-OTNXTVPX.js";import"./chunk-Z2YUBN6N.js";import"./chunk-OTCBNILH.js";import"./chunk-PA7LJOOC.js";import"./chunk-AOI2U3YC.js";import"./chunk-USOMQCKZ.js";import"./chunk-6EYB5QBP.js";import"./chunk-GERFCPB6.js";import"./chunk-T624HJJL.js";import"./chunk-HQTS6JOY.js";import"./chunk-HMZID6NQ.js";import"./chunk-O26CMRR4.js";import"./chunk-MP6UGYTC.js";import"./chunk-ZK23IHB5.js";import"./chunk-2QXIMOEO.js";import"./chunk-JHBUBEY6.js";import"./chunk-R2SUWIPY.js";import"./chunk-35PLMJNP.js";import{a as w}from"./chunk-UDBRF4PR.js";import"./chunk-4I367PEU.js";import"./chunk-QA7Y7QBM.js";import"./chunk-ZPITQMA6.js";import"./chunk-HK7MJBP6.js";import"./chunk-2CUFQLAH.js";import"./chunk-MKPB4JKY.js";import"./chunk-I76AVIQH.js";import"./chunk-H2ETPEH6.js";import"./chunk-Z6NSEM73.js";import"./chunk-AR57MWOI.js";import"./chunk-A5PTZAPN.js";import"./chunk-AU6UEH3U.js";import"./chunk-FGAONQTL.js";import"./chunk-HQ6UGNQX.js";import"./chunk-ZLJ76G5I.js";import"./chunk-MLVGKM2P.js";import"./chunk-CK7FH6VF.js";import"./chunk-PUNMJFMR.js";import"./chunk-R75LTV62.js";import"./chunk-5MVJAZRV.js";import"./chunk-XBLNBTXN.js";import"./chunk-G3JOQOSD.js";import"./chunk-G4I63THF.js";import"./chunk-PZ7IDTIM.js";import"./chunk-CT44YL7Q.js";import"./chunk-ZFM7LHJQ.js";import"./chunk-JNO6DNVW.js";import"./chunk-5YQ3ACZE.js";import"./chunk-EELXLOHY.js";import"./chunk-VZRSC3LP.js";import"./chunk-5SKDOIBQ.js";import"./chunk-WA5GEAJB.js";import"./chunk-VK7JPHFE.js";import{c as D}from"./chunk-BNDLMKXK.js";import"./chunk-BQNBT6PW.js";import"./chunk-5GXY5RYT.js";import"./chunk-K3W6YFKH.js";import{a as _,c as T}from"./chunk-JXJXC4DZ.js";import"./chunk-EDXSOKK5.js";import{b as A}from"./chunk-R5BZWVRQ.js";import{p as C}from"./chunk-DID2YGL7.js";import{c as y}from"./chunk-CXQURQM5.js";import"./chunk-S4QLGR2R.js";import"./chunk-Z4VHWOB5.js";import"./chunk-XUCCGZJR.js";import"./chunk-HKBU2OOC.js";import"./chunk-5ZXXURLP.js";import"./chunk-NOBD5HSR.js";import{a as k}from"./chunk-U54OSGNH.js";import{f as M}from"./chunk-M6Z6DKZQ.js";import"./chunk-3Y6745HG.js";import"./chunk-E2KBL4LX.js";import"./chunk-PZTBTDSR.js";import"./chunk-IOA4DPXY.js";import{Db as l,Dc as f,Ea as o,Ma as g,Mc as h,Na as E,Oc as m,Tb as v,Zb as p,dd as i,fd as b,kc as x,sc as u,xc as s,yc as r,zc as c}from"./chunk-5LC5EQRR.js";import"./chunk-3E746U5Y.js";function q(n,S){if(n&1&&(i(0,`
                        `),c(1,"jhi-non-programming-exercise-detail-common-actions",10),i(2,`
                    `)),n&2){let e=m(2);l(),x("isExamExercise",e.isExamExercise)("course",e.course)("exercise",e.modelingExercise)}}function z(n,S){if(n&1&&(i(0,`
                    `),s(1,"div",11),i(2,`
                        `),c(3,"jhi-exercise-detail-statistics",12),i(4,`
                    `),r(),i(5,`
                `)),n&2){let e=m(2);l(3),x("exercise",e.modelingExercise)("doughnutStats",e.doughnutStats)("exerciseType",e.ExerciseType.MODELING)}}function K(n,S){if(n&1){let e=f();i(0,`
            `),s(1,"div"),i(2,`
                `),s(3,"div",2),i(4,`
                    `),s(5,"h2"),c(6,"span",3),i(7),r(),i(8,`
                    `),c(9,"jhi-documentation-button",4),i(10,`
                `),r(),i(11,`
                `),c(12,"hr"),i(13,`
                `),s(14,"div",5),i(15,`
                    `),p(16,q,3,3),r(),i(17,`
                `),c(18,"hr"),i(19,`
                `),s(20,"div",6),i(21,`
                    `),s(22,"button",7),h("click",function(){g(e);let a=m();return E(a.buildModelClusters())}),r(),i(23,`
                    `),s(24,"button",8),h("click",function(){g(e);let a=m();return E(a.deleteModelClusters())}),r(),i(25,`
                `),r(),i(26,`
                `),p(27,z,6,3),c(28,"jhi-detail-overview-list",9),i(29,`
            `),r(),i(30,`
        `)}if(n&2){let e=m();l(7),b(" ",e.modelingExercise.id,""),l(2),x("type",e.documentationType),l(7),u(e.course?16:-1),l(11),u(!e.modelingExercise.releaseDate||e.dayjs(e.modelingExercise.releaseDate).isBefore(e.dayjs())?27:-1),l(),x("sections",e.detailOverviewSections)}}var ue=(()=>{class n{eventManager=o(_);modelingExerciseService=o(P);route=o(M);artemisMarkdown=o(O);alertService=o(T);statisticsService=o(j);accountService=o(A);profileService=o(D);documentationType="Model";ExerciseType=y;dayjs=C;modelingExercise;course;subscription;eventSubscriber;problemStatement;gradingInstructions;exampleSolution;exampleSolutionUML;numberOfClusters;detailOverviewSections;doughnutStats;isExamExercise;isAdmin=!1;isApollonProfileActive=!1;ngOnInit(){this.isAdmin=this.accountService.isAdmin(),this.subscription=this.route.params.subscribe(e=>{this.profileService.getProfileInfo().subscribe(t=>{t&&t.activeProfiles.includes("apollon")&&(this.isApollonProfileActive=!0),this.load(e.exerciseId)})}),this.registerChangeInModelingExercises()}load(e){this.modelingExerciseService.find(e).subscribe(t=>{this.modelingExercise=t.body,this.isExamExercise=this.modelingExercise.exerciseGroup!==void 0,this.course=this.isExamExercise?this.modelingExercise.exerciseGroup?.exam?.course:this.modelingExercise.course,this.problemStatement=this.artemisMarkdown.safeHtmlForMarkdown(this.modelingExercise.problemStatement),this.gradingInstructions=this.artemisMarkdown.safeHtmlForMarkdown(this.modelingExercise.gradingInstructions),this.exampleSolution=this.artemisMarkdown.safeHtmlForMarkdown(this.modelingExercise.exampleSolutionExplanation),this.modelingExercise.exampleSolutionModel&&this.modelingExercise.exampleSolutionModel!==""&&(this.exampleSolutionUML=JSON.parse(this.modelingExercise.exampleSolutionModel)),this.detailOverviewSections=this.getExerciseDetailSections()}),this.statisticsService.getExerciseStatistics(e).subscribe(t=>{this.doughnutStats=t}),this.isAdmin&&this.countModelClusters(e)}getExerciseDetailSections(){let e=this.modelingExercise,t=V(e),a=F(e),B=H(this.problemStatement,this.modelingExercise),J=N(e),R=U(e,this.gradingInstructions);return[t,a,B,{headline:"artemisApp.exercise.sections.solution",details:[{type:d.ModelingEditor,title:"artemisApp.exercise.sections.solution",data:{umlModel:this.exampleSolutionUML,diagramType:e.diagramType,title:e.title,isApollonProfileActive:this.isApollonProfileActive}},{title:"artemisApp.modelingExercise.exampleSolutionExplanation",type:d.Markdown,data:{innerHtml:this.exampleSolution}},{title:"artemisApp.exercise.exampleSolutionPublicationDate",type:d.Date,data:{date:e.exampleSolutionPublicationDate}}]},{headline:"artemisApp.exercise.sections.grading",details:[...J,{type:d.Text,title:"artemisApp.modelingExercise.diagramType",data:{text:e.diagramType}},...R,this.isAdmin&&{type:d.Text,title:"artemisApp.modelingExercise.checkClusters.text",data:{text:this.numberOfClusters}}]}]}ngOnDestroy(){this.subscription.unsubscribe(),this.eventManager.destroy(this.eventSubscriber)}registerChangeInModelingExercises(){this.eventSubscriber=this.eventManager.subscribe("modelingExerciseListModification",()=>{this.load(this.modelingExercise.id)})}buildModelClusters(){this.modelingExercise&&this.modelingExercise.id&&this.modelingExerciseService.buildClusters(this.modelingExercise.id).subscribe({next:()=>{this.alertService.success("artemisApp.modelingExercise.buildClusters.success")},error:()=>{this.alertService.error("artemisApp.modelingExercise.buildClusters.error")}})}deleteModelClusters(){this.modelingExercise&&this.modelingExercise.id&&this.modelingExerciseService.deleteClusters(this.modelingExercise.id).subscribe({next:()=>{this.alertService.success("artemisApp.modelingExercise.deleteClusters.success")},error:()=>{this.alertService.error("artemisApp.modelingExercise.deleteClusters.error")}})}countModelClusters(e){e&&this.modelingExerciseService.getNumberOfClusters(e).subscribe({next:t=>{this.numberOfClusters=t?.body||0,this.detailOverviewSections=this.modelingExercise&&this.getExerciseDetailSections()},error:()=>{this.alertService.error("artemisApp.modelingExercise.checkClusters.error")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=v({type:n,selectors:[["jhi-modeling-exercise-detail"]],decls:7,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-md-8"],[1,"d-flex","align-items-center"],["jhiTranslate","artemisApp.modelingExercise.detail.title"],[3,"type"],[1,"text-start"],[1,"mb-1"],["jhiTranslate","artemisApp.modelingExercise.buildClusters.action",1,"btn","btn-primary","btn-sm","me-1",3,"click"],["jhiTranslate","artemisApp.modelingExercise.deleteClusters.action",1,"btn","btn-primary","btn-sm",3,"click"],[3,"sections"],[3,"isExamExercise","course","exercise"],[1,"mt-3"],[1,"d-flex","justify-content-around",3,"exercise","doughnutStats","exerciseType"]],template:function(t,a){t&1&&(s(0,"div",0),i(1,`
    `),s(2,"div",1),i(3,`
        `),p(4,K,31,5),r(),i(5,`
`),r(),i(6,`
`)),t&2&&(l(4),u(a.modelingExercise?4:-1))},dependencies:[k,w,L,G,I],encapsulation:2})}return n})();export{ue as ModelingExerciseDetailComponent};
//# sourceMappingURL=modeling-exercise-detail.component-6G56EON4.js.map

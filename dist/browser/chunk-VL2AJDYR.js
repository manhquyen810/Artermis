import{a as h}from"./chunk-2CSD5TLZ.js";import{a as f}from"./chunk-ZM53HDCE.js";import{b as u}from"./chunk-XUCCGZJR.js";import{a as g}from"./chunk-NOBD5HSR.js";import{h as l}from"./chunk-M6Z6DKZQ.js";import{c}from"./chunk-E2KBL4LX.js";import{d as s}from"./chunk-PZTBTDSR.js";import{Ea as r,Hb as o,g as a,ya as n}from"./chunk-5LC5EQRR.js";var y=(()=>{class i{translateService=r(c);localeConversionService=r(h);titleService=r(s);router=r(l);sessionStorage=r(u);renderer;_language;constructor(){let e=r(o);this._language=new a(this.translateService.currentLang),this.renderer=e.createRenderer(document.querySelector("html"),null),this.init()}getAll(){return f}get language(){return this._language.asObservable()}updateTitle(e){e||(e=this.getPageTitle(this.router.routerState.snapshot.root)),this.translateService.get(e).subscribe(t=>{t?this.titleService.setTitle(t):g(new Error(`Translation key '${e}' for page title not found`))})}init(){this.translateService.onLangChange.subscribe(()=>{let e=this.translateService.currentLang;this._language.next(e),this.localeConversionService.locale=e,this.sessionStorage.store("locale",e),this.renderer.setAttribute(document.querySelector("html"),"lang",this.translateService.currentLang),this.updateTitle()})}getPageTitle(e){let t=e.data?.pageTitle||"global.title";return e.firstChild&&(t=this.getPageTitle(e.firstChild)||t),t}determinePreferredLanguage(){let e=this.getNavigatorReference();for(let t=0;t<e.languages.length;t++){if(e.languages[t].startsWith("en"))return"en";if(e.languages[t].startsWith("de"))return"de"}return"en"}getNavigatorReference(){return navigator}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{y as a};
//# sourceMappingURL=chunk-VL2AJDYR.js.map
